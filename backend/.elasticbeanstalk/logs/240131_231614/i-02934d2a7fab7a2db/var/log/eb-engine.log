2024/01/29 19:23:48.838560 [INFO] Starting...
2024/01/29 19:23:48.838631 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:23:48.838713 [INFO] reading event message file
2024/01/29 19:23:48.851912 [INFO] Engine received EB command userdata-exec

2024/01/29 19:23:48.858635 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:23:49.816762 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:23:50.784166 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:23:50.784220 [INFO] Engine command: (self-startup)

2024/01/29 19:23:50.784315 [INFO] Downloading EB Application...
2024/01/29 19:23:50.784319 [INFO] Region: eu-west-1
2024/01/29 19:23:50.784322 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:23:50.784325 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:23:50.784328 [INFO] Using manifest file name from command request
2024/01/29 19:23:50.784344 [INFO] Unable to get version manifest file.
2024/01/29 19:23:50.784347 [INFO] Downloading latest manifest available.
2024/01/29 19:23:50.784350 [INFO] Download latest app version manifest
2024/01/29 19:23:50.784503 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:23:50.851395 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:23:50.851663 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:23:50.864179 [INFO] Download successful124bytes downloaded
2024/01/29 19:23:50.864282 [INFO] Trying to read and parse version manifest...
2024/01/29 19:23:50.864385 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:23:50.875053 [INFO] Download successful264bytes downloaded
2024/01/29 19:23:50.875640 [INFO] Executing instruction: SyncClock
2024/01/29 19:23:50.875646 [INFO] Starting SyncClock
2024/01/29 19:23:50.875659 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:23:50.883330 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:23:49 2024
System time     : 0.000000004 seconds fast of NTP time
Last offset     : -0.000013963 seconds
RMS offset      : 0.000013963 seconds
Frequency       : 9.514 ppm slow
Residual freq   : +6.044 ppm
Skew            : 5.981 ppm
Root delay      : 0.000431677 seconds
Root dispersion : 0.000357548 seconds
Update interval : 1.2 seconds
Leap status     : Normal

2024/01/29 19:23:50.883359 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:23:50.887946 [INFO] 200 OK

2024/01/29 19:23:50.888003 [INFO] Skipping Configure OS
2024/01/29 19:23:50.888009 [INFO] Skipping LockRepo
2024/01/29 19:23:50.888015 [INFO] Skipping GenerateEBBanner
2024/01/29 19:23:50.888020 [INFO] Skipping Install Process Manager
2024/01/29 19:23:50.888025 [INFO] Skipping install syslog
2024/01/29 19:23:50.888030 [INFO] Skipping install cron
2024/01/29 19:23:50.888036 [INFO] Skipping install proxy
2024/01/29 19:23:50.888041 [INFO] Skipping installhealthd
2024/01/29 19:23:50.888047 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:23:50.888051 [INFO] Skipping install X-Ray
2024/01/29 19:23:50.888057 [INFO] Skipping install Third Party License
2024/01/29 19:23:50.888063 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:50.888066 [INFO] Executing instruction: installSqsd
2024/01/29 19:23:50.888070 [INFO] This is a web server environment instance, skip install sqsd daemon ...
2024/01/29 19:23:50.888075 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:50.888087 [INFO] Executing instruction: bootstraphealthd
2024/01/29 19:23:50.888090 [INFO] this is an enhanced health env ...
2024/01/29 19:23:50.888102 [INFO] bootstrap healthd....
2024/01/29 19:23:50.888116 [INFO] Running command /bin/sh -c /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/01/29 19:23:51.600853 [INFO] /usr/bin/id: ‘healthd’: no such user

2024/01/29 19:23:51.602621 [INFO] none proxy, skip creating proxy dir for healthd
2024/01/29 19:23:51.602643 [INFO] bootstrap healthd....
2024/01/29 19:23:51.602666 [INFO] Running command /bin/sh -c /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/01/29 19:23:51.606863 [INFO] 1001

2024/01/29 19:23:51.608395 [INFO] configure bundle log for healthd...
2024/01/29 19:23:51.608496 [INFO] Skipping Install yum packages
2024/01/29 19:23:51.608506 [INFO] Skipping install docker-compose
2024/01/29 19:23:51.608512 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:23:51.608518 [INFO] Skipping MarkBaked
2024/01/29 19:23:51.608524 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:51.608527 [INFO] Executing instruction: TuneSystemSettings
2024/01/29 19:23:51.608531 [INFO] Starting TuneSystemSettings
2024/01/29 19:23:51.608535 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:51.609803 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:23:51.609808 [INFO] Initialize LogRotate files and directories
2024/01/29 19:23:51.638427 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:51.638440 [INFO] Executing instruction: BootstrapCFNHup
2024/01/29 19:23:51.638444 [INFO] Bootstrap cfn-hup
2024/01/29 19:23:51.639993 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb-command-handler.conf to /etc/cfn/hooks.d/aws-eb-command-handler.conf
2024/01/29 19:23:51.642478 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:23:51.642490 [INFO] Start cfn-hup
2024/01/29 19:23:51.642513 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:23:51.662940 [INFO] cfn-hup is not registered with EB yet, registering it now
2024/01/29 19:23:51.662977 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:23:51.691160 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:23:52.325407 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:23:52.359426 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:23:52.373425 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:23:52.997494 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:23:53.010230 [INFO] Running command /bin/sh -c systemctl enable cfn-hup.service
2024/01/29 19:23:53.643587 [INFO] Synchronizing state of cfn-hup.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable cfn-hup
Created symlink /etc/systemd/system/multi-user.target.wants/cfn-hup.service → /etc/systemd/system/cfn-hup.service.

2024/01/29 19:23:53.643620 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:23:53.655851 [INFO] cfn-hup process is not running, starting it now
2024/01/29 19:23:53.655883 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:23:53.676374 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:23:53.687626 [INFO] Running command /bin/sh -c systemctl start cfn-hup.service
2024/01/29 19:23:53.787727 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:53.787750 [INFO] Executing instruction: SetupPublishLogCronjob
2024/01/29 19:23:53.787754 [INFO] Setup publish logs cron job...
2024/01/29 19:23:53.787758 [INFO] Copying file /opt/elasticbeanstalk/config/private/logtasks/cron/publishlogs to /etc/cron.d/publishlogs
2024/01/29 19:23:53.790975 [INFO] Executing instruction: Start Docker
2024/01/29 19:23:53.790997 [INFO] Starting Docker...
2024/01/29 19:23:53.791160 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:23:53.792207 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:23:53.793360 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:23:54.180182 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:23:54.207354 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:23:54.830226 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:23:54.850268 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:23:54.869828 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:23:54.892475 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:23:56.950436 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:56.950453 [INFO] Executing instruction: Setup Docker Options
2024/01/29 19:23:56.950457 [INFO] Setting up configurations for docker platform
2024/01/29 19:23:56.961367 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-events.service
2024/01/29 19:23:57.026604 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:23:57.706977 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:23:57.720757 [INFO] Running command /bin/sh -c systemctl enable eb-docker-events.service
2024/01/29 19:23:58.461733 [INFO] Created symlink /etc/systemd/system/docker.service.wants/eb-docker-events.service → /etc/systemd/system/eb-docker-events.service.

2024/01/29 19:23:58.461763 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-events.service
2024/01/29 19:23:58.487614 [INFO] Running command /bin/sh -c systemctl is-active eb-docker-events.service
2024/01/29 19:23:58.509293 [INFO] Running command /bin/sh -c systemctl start eb-docker-events.service
2024/01/29 19:23:58.620241 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:58.620260 [INFO] Executing instruction: MarkBootstrapped
2024/01/29 19:23:58.620264 [INFO] Starting MarkBootstrapped
2024/01/29 19:23:58.620269 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:58.620357 [INFO] Marked instance as Bootstrapped
2024/01/29 19:23:58.620362 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:23:58.620413 [INFO] Starting SwitchCFNStack
2024/01/29 19:23:58.620418 [INFO] Executing instruction: stopSqsd
2024/01/29 19:23:58.620422 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:23:58.620425 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:23:58.620429 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:23:58.620503 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:23:59.624024 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:23:59.624050 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:23:59.624063 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:23:59.693882 [INFO] Pruning containers ...
2024/01/29 19:23:59.693916 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:23:59.764217 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:23:59.764283 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:23:59.835049 [INFO] Total reclaimed space: 0B

2024/01/29 19:23:59.835081 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:23:59.894718 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:23:59.894969 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:23:59.902913 [INFO] application/json

2024/01/29 19:23:59.902947 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:24:00.401542 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:24:00.401778 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:24:00.403054 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:24:00.403148 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:24:00.403165 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:24:00.403169 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:24:00.403174 [INFO] Executing instruction: Generate environment file
2024/01/29 19:24:00.403324 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:24:00.403329 [INFO] start build docker app
2024/01/29 19:24:00.403704 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:24:00.403709 [INFO] fetching image and ports
2024/01/29 19:24:00.405609 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:24:00.405683 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:24:00.405693 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:24:00.405705 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:24:03.591325 [INFO] Login Succeeded

2024/01/29 19:24:03.591511 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:24:03.591523 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:24:03.591549 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:24:40.139589 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
1b13d4e1a46e: Pulling fs layer
1c74526957fc: Pulling fs layer
30d855997954: Pulling fs layer
223fb869183b: Pulling fs layer
3bc4c1e5efad: Pulling fs layer
c516ddd64fde: Pulling fs layer
4f4fb700ef54: Pulling fs layer
2462fcaa694a: Pulling fs layer
dedb2801a494: Pulling fs layer
0fb5e8ce5b89: Pulling fs layer
c082eec6344d: Pulling fs layer
044199a24fef: Pulling fs layer
4f4fb700ef54: Waiting
2462fcaa694a: Waiting
dedb2801a494: Waiting
0fb5e8ce5b89: Waiting
c082eec6344d: Waiting
044199a24fef: Waiting
223fb869183b: Waiting
3bc4c1e5efad: Waiting
c516ddd64fde: Waiting
1c74526957fc: Verifying Checksum
1c74526957fc: Download complete
1b13d4e1a46e: Verifying Checksum
1b13d4e1a46e: Download complete
30d855997954: Verifying Checksum
30d855997954: Download complete
c516ddd64fde: Verifying Checksum
c516ddd64fde: Download complete
4f4fb700ef54: Verifying Checksum
4f4fb700ef54: Download complete
2462fcaa694a: Verifying Checksum
2462fcaa694a: Download complete
dedb2801a494: Verifying Checksum
dedb2801a494: Download complete
223fb869183b: Verifying Checksum
223fb869183b: Download complete
3bc4c1e5efad: Verifying Checksum
3bc4c1e5efad: Download complete
c082eec6344d: Verifying Checksum
c082eec6344d: Download complete
044199a24fef: Verifying Checksum
044199a24fef: Download complete
0fb5e8ce5b89: Verifying Checksum
0fb5e8ce5b89: Download complete
1b13d4e1a46e: Pull complete
1c74526957fc: Pull complete
30d855997954: Pull complete
223fb869183b: Pull complete
3bc4c1e5efad: Pull complete
c516ddd64fde: Pull complete
4f4fb700ef54: Pull complete
2462fcaa694a: Pull complete
dedb2801a494: Pull complete
0fb5e8ce5b89: Pull complete
c082eec6344d: Pull complete
044199a24fef: Pull complete
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Downloaded newer image for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:24:40.141389 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:24:40.141409 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:24:40.141413 [INFO] start to build docker image
2024/01/29 19:24:40.143675 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:24:41.208795 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context:
#1 transferring context: 2B done
#1 DONE 0.1s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.1s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 DONE 0.2s

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:24:41.209118 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:24:41.209125 [INFO] successfully build docker image
2024/01/29 19:24:41.209128 [INFO] save staging docker image id
2024/01/29 19:24:41.209142 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:24:41.249940 [INFO] c176d18fbf65

2024/01/29 19:24:41.250185 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:24:41.250192 [INFO] X-Ray is not enabled.
2024/01/29 19:24:41.250195 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:24:41.272630 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:24:41.275363 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:24:41.313940 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:24:41.682936 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:24:41.700489 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:24:41.710037 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:24:42.111928 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:24:42.128698 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:24:42.463935 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:24:42.463974 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:24:42.480698 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:24:42.492811 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:24:42.555008 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:24:42.556940 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:24:42.557757 [INFO] Executing instruction: configure log streaming
2024/01/29 19:24:42.557770 [INFO] log streaming is not enabled
2024/01/29 19:24:42.557772 [INFO] disable log stream
2024/01/29 19:24:42.557784 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:24:42.577845 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:24:42.600542 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:24:42.600567 [INFO] Checking if logs need forced rotation
2024/01/29 19:24:42.600590 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:24:43.317123 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:24:43.862304 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:24:43.865369 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:24:44.172183 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:24:44.190441 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:24:44.190473 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:24:44.190493 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:24:44.693372 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:24:44.693397 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:24:44.693423 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:24:44.693428 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:24:44.693451 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:24:44.693462 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:24:44.693465 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:24:44.693469 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:24:44.693472 [INFO] stop X-Ray ...
2024/01/29 19:24:44.693482 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:24:44.711849 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:24:44.711878 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:24:44.729472 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:24:44.729543 [INFO] this is the first time deploying app...
2024/01/29 19:24:44.729549 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:24:44.729557 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:24:44.729580 [INFO] detected new app is not docker compose app
2024/01/29 19:24:44.729862 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:24:45.791708 [INFO] 282913d74899dc25c5b7adcba271821fde75d3da185db3eb7d5d3d655afc6207

2024/01/29 19:24:50.796817 [INFO] Running command /bin/sh -c docker ps | grep -q 282913d74899
2024/01/29 19:24:50.818099 [ERROR] docker container quit unexpectedly on 2024-01-29 19:24:50.817612747 +0000 UTC: Command /bin/sh -c docker ps | grep -q 282913d74899 failed with error exit status 1
2024/01/29 19:24:50.818128 [INFO] Running command /bin/sh -c docker logs 282913d74899
2024/01/29 19:24:50.839778 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 282913d74899: Command /bin/sh -c docker ps | grep -q 282913d74899 failed with error exit status 1 

2024/01/29 19:24:50.839788 [INFO] Executing cleanup logic
2024/01/29 19:24:50.841997 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:24:53.867811 [INFO] Starting...
2024/01/29 19:24:53.867863 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:24:53.867897 [INFO] reading event message file
2024/01/29 19:24:53.871265 [INFO] Engine received EB command userdata-exec

2024/01/29 19:24:53.890508 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:24:54.339530 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:24:54.900100 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:24:54.900384 [INFO] Engine command: (self-startup)

2024/01/29 19:24:54.900405 [INFO] Downloading EB Application...
2024/01/29 19:24:54.900408 [INFO] Region: eu-west-1
2024/01/29 19:24:54.900411 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:24:54.900413 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:24:54.900416 [INFO] Using manifest file name from command request
2024/01/29 19:24:54.900428 [INFO] Unable to get version manifest file.
2024/01/29 19:24:54.900430 [INFO] Downloading latest manifest available.
2024/01/29 19:24:54.900432 [INFO] Download latest app version manifest
2024/01/29 19:24:54.900650 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:24:54.936491 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:24:54.938005 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:24:54.951156 [INFO] Download successful124bytes downloaded
2024/01/29 19:24:54.951317 [INFO] Trying to read and parse version manifest...
2024/01/29 19:24:54.951407 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:24:54.991402 [INFO] Download successful264bytes downloaded
2024/01/29 19:24:54.991611 [INFO] Executing instruction: SyncClock
2024/01/29 19:24:54.991617 [INFO] Starting SyncClock
2024/01/29 19:24:54.991630 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:24:55.010476 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:24:53 2024
System time     : 0.000009426 seconds slow of NTP time
Last offset     : -0.000006404 seconds
RMS offset      : 0.000164422 seconds
Frequency       : 0.743 ppm fast
Residual freq   : -0.013 ppm
Skew            : 1.861 ppm
Root delay      : 0.000517807 seconds
Root dispersion : 0.000344995 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/29 19:24:55.010508 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:24:55.021093 [INFO] 200 OK

2024/01/29 19:24:55.021308 [INFO] Skipping Configure OS
2024/01/29 19:24:55.021320 [INFO] Skipping LockRepo
2024/01/29 19:24:55.021325 [INFO] Skipping GenerateEBBanner
2024/01/29 19:24:55.021332 [INFO] Skipping Install Process Manager
2024/01/29 19:24:55.021337 [INFO] Skipping install syslog
2024/01/29 19:24:55.021366 [INFO] Skipping install cron
2024/01/29 19:24:55.021373 [INFO] Skipping install proxy
2024/01/29 19:24:55.021380 [INFO] Skipping installhealthd
2024/01/29 19:24:55.021386 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:24:55.021392 [INFO] Skipping install X-Ray
2024/01/29 19:24:55.021398 [INFO] Skipping install Third Party License
2024/01/29 19:24:55.021404 [INFO] Skipping installSqsd
2024/01/29 19:24:55.021410 [INFO] Skipping bootstraphealthd
2024/01/29 19:24:55.021415 [INFO] Skipping Install yum packages
2024/01/29 19:24:55.021426 [INFO] Skipping install docker-compose
2024/01/29 19:24:55.021441 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:24:55.021446 [INFO] Skipping MarkBaked
2024/01/29 19:24:55.021452 [INFO] Skipping TuneSystemSettings
2024/01/29 19:24:55.021456 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:24:55.021459 [INFO] Initialize LogRotate files and directories
2024/01/29 19:24:55.037878 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:24:55.037891 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:24:55.037894 [INFO] Start cfn-hup
2024/01/29 19:24:55.037911 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:24:55.069041 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:24:55.083973 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:24:55.084003 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:24:55.084006 [INFO] Executing instruction: Start Docker
2024/01/29 19:24:55.084009 [INFO] Starting Docker...
2024/01/29 19:24:55.084068 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:24:55.085555 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:24:55.086595 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:24:55.424385 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:24:55.446415 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:24:55.446450 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:24:55.464274 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:24:55.477822 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:24:55.491105 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:24:55.592782 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:24:55.592857 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:24:56.045459 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:24:56.444739 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:24:56.459090 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:24:56.717612 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:24:56.727009 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:24:56.739159 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:24:56.747402 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:24:57.945818 [INFO] Skipping Setup Docker Options
2024/01/29 19:24:57.945854 [INFO] Skipping MarkBootstrapped
2024/01/29 19:24:57.945859 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:24:57.946014 [INFO] Starting SwitchCFNStack
2024/01/29 19:24:57.946023 [INFO] Executing instruction: stopSqsd
2024/01/29 19:24:57.946028 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:24:57.946032 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:24:57.946037 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:24:57.946065 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:24:58.395894 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:24:58.395917 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:24:58.395939 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:24:58.419365 [INFO] Pruning containers ...
2024/01/29 19:24:58.419393 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:24:58.440472 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
282913d74899   c176d18fbf65   "./main --environmen…"   14 seconds ago   Exited (1) 12 seconds ago             focused_zhukovsky

2024/01/29 19:24:58.440500 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:24:58.470494 [INFO] Deleted Containers:
282913d74899dc25c5b7adcba271821fde75d3da185db3eb7d5d3d655afc6207

Total reclaimed space: 0B

2024/01/29 19:24:58.470519 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:24:58.488640 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:24:58.488878 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:24:58.498312 [INFO] application/json

2024/01/29 19:24:58.498339 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:24:58.873378 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:24:58.873624 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:24:58.874647 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:24:58.874670 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:24:58.874683 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:24:58.874685 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:24:58.874690 [INFO] Executing instruction: Generate environment file
2024/01/29 19:24:58.874720 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:24:58.874725 [INFO] start build docker app
2024/01/29 19:24:58.875090 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:24:58.875094 [INFO] fetching image and ports
2024/01/29 19:24:58.877312 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:24:58.877361 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:24:58.877370 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:24:58.877380 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:25:00.473207 [INFO] Login Succeeded

2024/01/29 19:25:00.473229 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:25:00.473236 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:25:00.473253 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:00.678061 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:25:00.678085 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:00.678094 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:00.678179 [INFO] start to build docker image
2024/01/29 19:25:00.678196 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:01.125449 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:25:01.125472 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:01.125477 [INFO] successfully build docker image
2024/01/29 19:25:01.125479 [INFO] save staging docker image id
2024/01/29 19:25:01.125495 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:25:01.159507 [INFO] c176d18fbf65

2024/01/29 19:25:01.159693 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:25:01.159699 [INFO] X-Ray is not enabled.
2024/01/29 19:25:01.159702 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:25:01.175634 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:25:01.178560 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:01.227639 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:25:01.227674 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:01.245603 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:01.264593 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:01.296570 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:25:01.400490 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:25:01.960964 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:25:01.961157 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:02.450329 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:02.478475 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:02.858046 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:02.868304 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:25:02.878047 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:25:03.146031 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:25:03.157086 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:25:03.440902 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:25:03.440943 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:03.453835 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:03.462053 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:25:03.568080 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:25:03.569095 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:25:03.570105 [INFO] Executing instruction: configure log streaming
2024/01/29 19:25:03.570115 [INFO] log streaming is not enabled
2024/01/29 19:25:03.570118 [INFO] disable log stream
2024/01/29 19:25:03.570133 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:25:03.586248 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:25:03.606166 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:25:03.606186 [INFO] Checking if logs need forced rotation
2024/01/29 19:25:03.606207 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:04.217592 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:04.839067 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:25:04.841319 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:05.422984 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:25:05.448417 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:25:05.448438 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:25:05.448451 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:25:05.970035 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:25:05.970075 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:25:05.970156 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:25:05.970162 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:25:05.970183 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:25:05.970194 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:25:05.970197 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:25:05.970202 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:25:05.970204 [INFO] stop X-Ray ...
2024/01/29 19:25:05.970222 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:25:05.988690 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:25:05.988717 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:25:06.006015 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:25:06.006059 [INFO] stop currently running containers...
2024/01/29 19:25:06.006078 [INFO] detected old app is not docker compose app
2024/01/29 19:25:06.006095 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:25:06.052484 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:25:06.068820 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:25:06.068849 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:25:06.114788 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:25:06.114823 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:25:06.166578 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:25:06.166636 [INFO] stopping current container: 282913d74899
2024/01/29 19:25:06.166657 [INFO] Running command /bin/sh -c docker ps | grep -q 282913d74899
2024/01/29 19:25:06.231901 [INFO] Running command /bin/sh -c docker ps | grep -q 282913d74899
2024/01/29 19:25:06.258436 [INFO] Pruning containers ...
2024/01/29 19:25:06.258458 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:06.298016 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:06.298257 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:06.329143 [INFO] Total reclaimed space: 0B

2024/01/29 19:25:06.329172 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:06.369105 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:06.369147 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:25:06.401765 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:25:06.401787 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:25:06.401882 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:25:06.401898 [INFO] detected new app is not docker compose app
2024/01/29 19:25:06.401952 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:25:06.944633 [INFO] 8b0501eeb845908dbdc61f0e94de91a1a6e36655f942d538706615d97e69988f

2024/01/29 19:25:11.945226 [INFO] Running command /bin/sh -c docker ps | grep -q 8b0501eeb845
2024/01/29 19:25:11.974504 [ERROR] docker container quit unexpectedly on 2024-01-29 19:25:11.974493363 +0000 UTC: Command /bin/sh -c docker ps | grep -q 8b0501eeb845 failed with error exit status 1
2024/01/29 19:25:11.974533 [INFO] Running command /bin/sh -c docker logs 8b0501eeb845
2024/01/29 19:25:11.997116 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 8b0501eeb845: Command /bin/sh -c docker ps | grep -q 8b0501eeb845 failed with error exit status 1 

2024/01/29 19:25:11.997126 [INFO] Executing cleanup logic
2024/01/29 19:25:11.997443 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:25:17.101952 [INFO] Starting...
2024/01/29 19:25:17.101989 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:25:17.102017 [INFO] reading event message file
2024/01/29 19:25:17.102733 [INFO] Engine received EB command userdata-exec

2024/01/29 19:25:17.110389 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:17.489680 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:17.925183 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:25:17.925339 [INFO] Engine command: (self-startup)

2024/01/29 19:25:17.925349 [INFO] Downloading EB Application...
2024/01/29 19:25:17.925353 [INFO] Region: eu-west-1
2024/01/29 19:25:17.925356 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:25:17.925359 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:25:17.925362 [INFO] Using manifest file name from command request
2024/01/29 19:25:17.925375 [INFO] Unable to get version manifest file.
2024/01/29 19:25:17.925378 [INFO] Downloading latest manifest available.
2024/01/29 19:25:17.925380 [INFO] Download latest app version manifest
2024/01/29 19:25:17.925512 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:25:17.965315 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:25:17.965614 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:25:17.977405 [INFO] Download successful124bytes downloaded
2024/01/29 19:25:17.977536 [INFO] Trying to read and parse version manifest...
2024/01/29 19:25:17.977605 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:18.006666 [INFO] Download successful264bytes downloaded
2024/01/29 19:25:18.006892 [INFO] Executing instruction: SyncClock
2024/01/29 19:25:18.006897 [INFO] Starting SyncClock
2024/01/29 19:25:18.006907 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:25:18.014919 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:25:09 2024
System time     : 0.000004635 seconds fast of NTP time
Last offset     : +0.000004995 seconds
RMS offset      : 0.000155993 seconds
Frequency       : 0.785 ppm fast
Residual freq   : +0.011 ppm
Skew            : 1.731 ppm
Root delay      : 0.000517807 seconds
Root dispersion : 0.000397449 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 19:25:18.014944 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:25:18.022310 [INFO] 200 OK

2024/01/29 19:25:18.022494 [INFO] Skipping Configure OS
2024/01/29 19:25:18.022506 [INFO] Skipping LockRepo
2024/01/29 19:25:18.022511 [INFO] Skipping GenerateEBBanner
2024/01/29 19:25:18.022517 [INFO] Skipping Install Process Manager
2024/01/29 19:25:18.022521 [INFO] Skipping install syslog
2024/01/29 19:25:18.022527 [INFO] Skipping install cron
2024/01/29 19:25:18.022532 [INFO] Skipping install proxy
2024/01/29 19:25:18.022536 [INFO] Skipping installhealthd
2024/01/29 19:25:18.022541 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:25:18.022546 [INFO] Skipping install X-Ray
2024/01/29 19:25:18.022551 [INFO] Skipping install Third Party License
2024/01/29 19:25:18.022569 [INFO] Skipping installSqsd
2024/01/29 19:25:18.022574 [INFO] Skipping bootstraphealthd
2024/01/29 19:25:18.022579 [INFO] Skipping Install yum packages
2024/01/29 19:25:18.022584 [INFO] Skipping install docker-compose
2024/01/29 19:25:18.022592 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:25:18.022597 [INFO] Skipping MarkBaked
2024/01/29 19:25:18.022602 [INFO] Skipping TuneSystemSettings
2024/01/29 19:25:18.022606 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:25:18.022611 [INFO] Initialize LogRotate files and directories
2024/01/29 19:25:18.039607 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:25:18.039623 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:25:18.039628 [INFO] Start cfn-hup
2024/01/29 19:25:18.039647 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:25:18.071890 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:25:18.089440 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:25:18.089475 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:25:18.089479 [INFO] Executing instruction: Start Docker
2024/01/29 19:25:18.089483 [INFO] Starting Docker...
2024/01/29 19:25:18.089563 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:25:18.090746 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:25:18.091803 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:18.439499 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:18.455306 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:25:18.455341 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:18.466103 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:25:18.476876 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:18.490815 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:25:18.576823 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:25:18.576851 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:25:18.957080 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:19.243183 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:19.254104 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:19.565515 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:19.577433 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:19.593271 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:25:19.604473 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:25:20.812948 [INFO] Skipping Setup Docker Options
2024/01/29 19:25:20.812972 [INFO] Skipping MarkBootstrapped
2024/01/29 19:25:20.812975 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:25:20.813064 [INFO] Starting SwitchCFNStack
2024/01/29 19:25:20.813068 [INFO] Executing instruction: stopSqsd
2024/01/29 19:25:20.813071 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:25:20.813074 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:25:20.813077 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:25:20.813090 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:25:21.269185 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:25:21.269212 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:25:21.269223 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:25:21.292391 [INFO] Pruning containers ...
2024/01/29 19:25:21.292422 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:21.315221 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
8b0501eeb845   c176d18fbf65   "./main --environmen…"   15 seconds ago   Exited (1) 14 seconds ago             cranky_mestorf

2024/01/29 19:25:21.315249 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:21.341881 [INFO] Deleted Containers:
8b0501eeb845908dbdc61f0e94de91a1a6e36655f942d538706615d97e69988f

Total reclaimed space: 0B

2024/01/29 19:25:21.341905 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:21.373144 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:21.373393 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:25:21.376265 [INFO] application/json

2024/01/29 19:25:21.376282 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:25:21.462515 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:25:21.462681 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:25:21.464087 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:25:21.464116 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:25:21.464133 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:25:21.464136 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:25:21.464147 [INFO] Executing instruction: Generate environment file
2024/01/29 19:25:21.464175 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:25:21.464178 [INFO] start build docker app
2024/01/29 19:25:21.464614 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:25:21.464620 [INFO] fetching image and ports
2024/01/29 19:25:21.467383 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:25:21.467455 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:25:21.467465 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:25:21.467475 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:25:22.389615 [INFO] Login Succeeded

2024/01/29 19:25:22.389646 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:25:22.389654 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:25:22.389675 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:22.530776 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:25:22.530798 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:22.530807 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:22.530810 [INFO] start to build docker image
2024/01/29 19:25:22.530840 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:22.834838 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:25:22.834860 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:22.834863 [INFO] successfully build docker image
2024/01/29 19:25:22.834866 [INFO] save staging docker image id
2024/01/29 19:25:22.834880 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:25:22.860082 [INFO] c176d18fbf65

2024/01/29 19:25:22.860284 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:25:22.860291 [INFO] X-Ray is not enabled.
2024/01/29 19:25:22.860294 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:25:22.866820 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:25:22.868603 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:22.882393 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:25:22.882422 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:22.893129 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:22.903602 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:22.919636 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:25:22.979359 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:25:23.286065 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:25:23.286156 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:23.612675 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:23.624563 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:23.932697 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:23.949407 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:25:23.963474 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:25:24.390342 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:25:24.406372 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:25:24.775895 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:25:24.775931 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:24.795337 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:24.806899 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:25:24.872497 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:25:24.873513 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:25:24.874498 [INFO] Executing instruction: configure log streaming
2024/01/29 19:25:24.874602 [INFO] log streaming is not enabled
2024/01/29 19:25:24.874608 [INFO] disable log stream
2024/01/29 19:25:24.874628 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:25:24.892427 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:25:24.921538 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:25:24.921563 [INFO] Checking if logs need forced rotation
2024/01/29 19:25:24.921584 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:25.489684 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:26.023477 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:25:26.025383 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:26.423411 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:25:26.442378 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:25:26.442393 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:25:26.442405 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:25:26.914090 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:25:26.914175 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:25:26.914200 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:25:26.914204 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:25:26.914228 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:25:26.914238 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:25:26.914241 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:25:26.914246 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:25:26.914248 [INFO] stop X-Ray ...
2024/01/29 19:25:26.914258 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:25:26.931192 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:25:26.931226 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:25:26.949151 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:25:26.949183 [INFO] stop currently running containers...
2024/01/29 19:25:26.949193 [INFO] detected old app is not docker compose app
2024/01/29 19:25:26.949204 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:25:27.023368 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:25:27.063223 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:25:27.063260 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:25:27.098364 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:25:27.098398 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:25:27.114197 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:25:27.114252 [INFO] stopping current container: 8b0501eeb845
2024/01/29 19:25:27.114265 [INFO] Running command /bin/sh -c docker ps | grep -q 8b0501eeb845
2024/01/29 19:25:27.137455 [INFO] Running command /bin/sh -c docker ps | grep -q 8b0501eeb845
2024/01/29 19:25:27.157933 [INFO] Pruning containers ...
2024/01/29 19:25:27.157991 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:27.179049 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:27.179079 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:27.198940 [INFO] Total reclaimed space: 0B

2024/01/29 19:25:27.198974 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:27.217463 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:27.217492 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:25:27.237949 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:25:27.237969 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:25:27.238157 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:25:27.238175 [INFO] detected new app is not docker compose app
2024/01/29 19:25:27.238223 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:25:27.715539 [INFO] 5f05d2f27000dc866a1a495c0a370402ca23ab10b31564672e3640176eec2410

2024/01/29 19:25:32.716047 [INFO] Running command /bin/sh -c docker ps | grep -q 5f05d2f27000
2024/01/29 19:25:32.782244 [ERROR] docker container quit unexpectedly on 2024-01-29 19:25:32.782232401 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5f05d2f27000 failed with error exit status 1
2024/01/29 19:25:32.782274 [INFO] Running command /bin/sh -c docker logs 5f05d2f27000
2024/01/29 19:25:32.814886 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5f05d2f27000: Command /bin/sh -c docker ps | grep -q 5f05d2f27000 failed with error exit status 1 

2024/01/29 19:25:32.814898 [INFO] Executing cleanup logic
2024/01/29 19:25:32.815092 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:25:41.789583 [INFO] Starting...
2024/01/29 19:25:41.789620 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:25:41.789650 [INFO] reading event message file
2024/01/29 19:25:41.790347 [INFO] Engine received EB command userdata-exec

2024/01/29 19:25:41.802171 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:42.224592 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:42.799923 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:25:42.800014 [INFO] Engine command: (self-startup)

2024/01/29 19:25:42.800022 [INFO] Downloading EB Application...
2024/01/29 19:25:42.800026 [INFO] Region: eu-west-1
2024/01/29 19:25:42.800029 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:25:42.800033 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:25:42.800036 [INFO] Using manifest file name from command request
2024/01/29 19:25:42.800053 [INFO] Unable to get version manifest file.
2024/01/29 19:25:42.800056 [INFO] Downloading latest manifest available.
2024/01/29 19:25:42.800058 [INFO] Download latest app version manifest
2024/01/29 19:25:42.800213 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:25:42.842568 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:25:42.842741 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:25:42.854423 [INFO] Download successful124bytes downloaded
2024/01/29 19:25:42.854643 [INFO] Trying to read and parse version manifest...
2024/01/29 19:25:42.854719 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:42.866783 [INFO] Download successful264bytes downloaded
2024/01/29 19:25:42.867004 [INFO] Executing instruction: SyncClock
2024/01/29 19:25:42.867008 [INFO] Starting SyncClock
2024/01/29 19:25:42.867018 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:25:42.871840 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:25:41 2024
System time     : 0.000003736 seconds slow of NTP time
Last offset     : +0.000001460 seconds
RMS offset      : 0.000140411 seconds
Frequency       : 0.730 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.636 ppm
Root delay      : 0.000457049 seconds
Root dispersion : 0.000353087 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 19:25:42.871868 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:25:42.878805 [INFO] 200 OK

2024/01/29 19:25:42.878894 [INFO] Skipping Configure OS
2024/01/29 19:25:42.878899 [INFO] Skipping LockRepo
2024/01/29 19:25:42.878904 [INFO] Skipping GenerateEBBanner
2024/01/29 19:25:42.878908 [INFO] Skipping Install Process Manager
2024/01/29 19:25:42.878912 [INFO] Skipping install syslog
2024/01/29 19:25:42.878916 [INFO] Skipping install cron
2024/01/29 19:25:42.878920 [INFO] Skipping install proxy
2024/01/29 19:25:42.878924 [INFO] Skipping installhealthd
2024/01/29 19:25:42.878928 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:25:42.878931 [INFO] Skipping install X-Ray
2024/01/29 19:25:42.878936 [INFO] Skipping install Third Party License
2024/01/29 19:25:42.879016 [INFO] Skipping installSqsd
2024/01/29 19:25:42.879027 [INFO] Skipping bootstraphealthd
2024/01/29 19:25:42.879032 [INFO] Skipping Install yum packages
2024/01/29 19:25:42.879036 [INFO] Skipping install docker-compose
2024/01/29 19:25:42.879039 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:25:42.879046 [INFO] Skipping MarkBaked
2024/01/29 19:25:42.879050 [INFO] Skipping TuneSystemSettings
2024/01/29 19:25:42.879052 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:25:42.879055 [INFO] Initialize LogRotate files and directories
2024/01/29 19:25:42.890760 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:25:42.890768 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:25:42.890770 [INFO] Start cfn-hup
2024/01/29 19:25:42.890788 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:25:42.923569 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:25:42.946759 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:25:42.946795 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:25:42.946800 [INFO] Executing instruction: Start Docker
2024/01/29 19:25:42.946803 [INFO] Starting Docker...
2024/01/29 19:25:42.946885 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:25:42.952353 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:25:42.953429 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:43.385485 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:43.408962 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:25:43.408995 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:43.426352 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:25:43.439029 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:43.452491 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:25:43.534972 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:25:43.535000 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:25:43.825647 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:44.222190 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:44.234058 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:44.597276 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:44.617418 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:44.635282 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:25:44.645785 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:25:46.000482 [INFO] Skipping Setup Docker Options
2024/01/29 19:25:46.000504 [INFO] Skipping MarkBootstrapped
2024/01/29 19:25:46.000507 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:25:46.000595 [INFO] Starting SwitchCFNStack
2024/01/29 19:25:46.000599 [INFO] Executing instruction: stopSqsd
2024/01/29 19:25:46.000602 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:25:46.000605 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:25:46.000608 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:25:46.000623 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:25:46.383343 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:25:46.383436 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:25:46.383450 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:25:46.403629 [INFO] Pruning containers ...
2024/01/29 19:25:46.403660 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:46.422015 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
5f05d2f27000   c176d18fbf65   "./main --environmen…"   19 seconds ago   Exited (1) 18 seconds ago             reverent_napier

2024/01/29 19:25:46.422051 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:46.445795 [INFO] Deleted Containers:
5f05d2f27000dc866a1a495c0a370402ca23ab10b31564672e3640176eec2410

Total reclaimed space: 0B

2024/01/29 19:25:46.445819 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:46.463496 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:46.463732 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:25:46.467231 [INFO] application/json

2024/01/29 19:25:46.467253 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:25:46.541990 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/29 19:25:46.542150 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:25:46.543428 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:25:46.543455 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:25:46.543473 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:25:46.543477 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:25:46.543483 [INFO] Executing instruction: Generate environment file
2024/01/29 19:25:46.543510 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:25:46.543514 [INFO] start build docker app
2024/01/29 19:25:46.543872 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:25:46.543877 [INFO] fetching image and ports
2024/01/29 19:25:46.545466 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:25:46.545512 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:25:46.545520 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:25:46.545529 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:25:47.517815 [INFO] Login Succeeded

2024/01/29 19:25:47.517834 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:25:47.517841 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:25:47.517858 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:47.650852 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:25:47.650893 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:47.650896 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:47.650900 [INFO] start to build docker image
2024/01/29 19:25:47.650921 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:47.881315 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:25:47.881339 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:47.881368 [INFO] successfully build docker image
2024/01/29 19:25:47.881371 [INFO] save staging docker image id
2024/01/29 19:25:47.881387 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:25:47.901260 [INFO] c176d18fbf65

2024/01/29 19:25:47.901420 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:25:47.901428 [INFO] X-Ray is not enabled.
2024/01/29 19:25:47.901430 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:25:47.906301 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:25:47.907638 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:47.920610 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:25:47.920642 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:47.930700 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:47.939824 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:47.951371 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:25:48.010932 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:25:48.393268 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:25:48.393350 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:48.741848 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:48.753837 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:49.051339 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:49.060706 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:25:49.069034 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:25:49.342485 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:25:49.352001 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:25:49.660937 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:25:49.660988 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:49.678905 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:49.688404 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:25:49.759936 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:25:49.760844 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:25:49.761708 [INFO] Executing instruction: configure log streaming
2024/01/29 19:25:49.761720 [INFO] log streaming is not enabled
2024/01/29 19:25:49.761724 [INFO] disable log stream
2024/01/29 19:25:49.761738 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:25:49.781144 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:25:49.799425 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:25:49.799448 [INFO] Checking if logs need forced rotation
2024/01/29 19:25:49.799468 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:50.270940 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:50.741165 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:25:50.742667 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:50.933502 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:25:50.952983 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:25:50.952999 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:25:50.953013 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:25:51.321638 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:25:51.321666 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:25:51.321689 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:25:51.321691 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:25:51.321714 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:25:51.321729 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:25:51.321733 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:25:51.321739 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:25:51.321743 [INFO] stop X-Ray ...
2024/01/29 19:25:51.321755 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:25:51.339133 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:25:51.339167 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:25:51.355875 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:25:51.355905 [INFO] stop currently running containers...
2024/01/29 19:25:51.355914 [INFO] detected old app is not docker compose app
2024/01/29 19:25:51.355928 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:25:51.412916 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:25:51.427422 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:25:51.427457 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:25:51.441977 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:25:51.442027 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:25:51.455750 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:25:51.455797 [INFO] stopping current container: 5f05d2f27000
2024/01/29 19:25:51.455807 [INFO] Running command /bin/sh -c docker ps | grep -q 5f05d2f27000
2024/01/29 19:25:51.488855 [INFO] Running command /bin/sh -c docker ps | grep -q 5f05d2f27000
2024/01/29 19:25:51.513243 [INFO] Pruning containers ...
2024/01/29 19:25:51.513265 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:51.533928 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:51.533962 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:51.555376 [INFO] Total reclaimed space: 0B

2024/01/29 19:25:51.555406 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:51.574343 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:51.574381 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:25:51.597850 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:25:51.597869 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:25:51.598024 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:25:51.598040 [INFO] detected new app is not docker compose app
2024/01/29 19:25:51.598131 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:25:52.045460 [INFO] 69198963c866864784029e9e9ee4c05b310b22ee43ed89c0cca5f3cf6f07f6be

2024/01/29 19:25:57.046166 [INFO] Running command /bin/sh -c docker ps | grep -q 69198963c866
2024/01/29 19:25:57.070568 [ERROR] docker container quit unexpectedly on 2024-01-29 19:25:57.070547509 +0000 UTC: Command /bin/sh -c docker ps | grep -q 69198963c866 failed with error exit status 1
2024/01/29 19:25:57.070599 [INFO] Running command /bin/sh -c docker logs 69198963c866
2024/01/29 19:25:57.092611 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 69198963c866: Command /bin/sh -c docker ps | grep -q 69198963c866 failed with error exit status 1 

2024/01/29 19:25:57.092620 [INFO] Executing cleanup logic
2024/01/29 19:25:57.092817 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:26:14.084142 [INFO] Starting...
2024/01/29 19:26:14.084183 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:26:14.084208 [INFO] reading event message file
2024/01/29 19:26:14.084948 [INFO] Engine received EB command userdata-exec

2024/01/29 19:26:14.090827 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:26:14.544690 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:26:15.014630 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:26:15.014760 [INFO] Engine command: (self-startup)

2024/01/29 19:26:15.014778 [INFO] Downloading EB Application...
2024/01/29 19:26:15.014782 [INFO] Region: eu-west-1
2024/01/29 19:26:15.014785 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:26:15.014788 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:26:15.014792 [INFO] Using manifest file name from command request
2024/01/29 19:26:15.014813 [INFO] Unable to get version manifest file.
2024/01/29 19:26:15.014816 [INFO] Downloading latest manifest available.
2024/01/29 19:26:15.014823 [INFO] Download latest app version manifest
2024/01/29 19:26:15.015091 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:26:15.058256 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:26:15.058481 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:26:15.069936 [INFO] Download successful124bytes downloaded
2024/01/29 19:26:15.070094 [INFO] Trying to read and parse version manifest...
2024/01/29 19:26:15.070176 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:26:15.083199 [INFO] Download successful264bytes downloaded
2024/01/29 19:26:15.083461 [INFO] Executing instruction: SyncClock
2024/01/29 19:26:15.083466 [INFO] Starting SyncClock
2024/01/29 19:26:15.083479 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:26:15.098152 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:26:14 2024
System time     : 0.000019992 seconds slow of NTP time
Last offset     : -0.000017347 seconds
RMS offset      : 0.000126495 seconds
Frequency       : 0.626 ppm fast
Residual freq   : -0.009 ppm
Skew            : 0.352 ppm
Root delay      : 0.000468342 seconds
Root dispersion : 0.000338065 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/29 19:26:15.098197 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:26:15.121072 [INFO] 200 OK

2024/01/29 19:26:15.121214 [INFO] Skipping Configure OS
2024/01/29 19:26:15.121224 [INFO] Skipping LockRepo
2024/01/29 19:26:15.121229 [INFO] Skipping GenerateEBBanner
2024/01/29 19:26:15.121233 [INFO] Skipping Install Process Manager
2024/01/29 19:26:15.121237 [INFO] Skipping install syslog
2024/01/29 19:26:15.121241 [INFO] Skipping install cron
2024/01/29 19:26:15.121245 [INFO] Skipping install proxy
2024/01/29 19:26:15.121249 [INFO] Skipping installhealthd
2024/01/29 19:26:15.121253 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:26:15.121256 [INFO] Skipping install X-Ray
2024/01/29 19:26:15.121260 [INFO] Skipping install Third Party License
2024/01/29 19:26:15.121266 [INFO] Skipping installSqsd
2024/01/29 19:26:15.121270 [INFO] Skipping bootstraphealthd
2024/01/29 19:26:15.121274 [INFO] Skipping Install yum packages
2024/01/29 19:26:15.121278 [INFO] Skipping install docker-compose
2024/01/29 19:26:15.121282 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:26:15.121288 [INFO] Skipping MarkBaked
2024/01/29 19:26:15.121293 [INFO] Skipping TuneSystemSettings
2024/01/29 19:26:15.121297 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:26:15.121300 [INFO] Initialize LogRotate files and directories
2024/01/29 19:26:15.133658 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:26:15.133670 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:26:15.133672 [INFO] Start cfn-hup
2024/01/29 19:26:15.133690 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:26:15.178802 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:26:15.191561 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:26:15.191597 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:26:15.191601 [INFO] Executing instruction: Start Docker
2024/01/29 19:26:15.191604 [INFO] Starting Docker...
2024/01/29 19:26:15.191681 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:26:15.192699 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:26:15.193691 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:26:15.669392 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:26:15.687549 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:26:15.687583 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:26:15.700040 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:26:15.710852 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:26:15.722215 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:26:15.801497 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:26:15.801566 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:26:16.201406 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:26:16.632058 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:26:16.672833 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:26:17.044269 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:26:17.058290 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:26:17.077998 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:26:17.089765 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:26:18.399100 [INFO] Skipping Setup Docker Options
2024/01/29 19:26:18.399132 [INFO] Skipping MarkBootstrapped
2024/01/29 19:26:18.399136 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:26:18.399392 [INFO] Starting SwitchCFNStack
2024/01/29 19:26:18.399430 [INFO] Executing instruction: stopSqsd
2024/01/29 19:26:18.399435 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:26:18.399444 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:26:18.399447 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:26:18.399466 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:26:18.912667 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:26:18.912695 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:26:18.912709 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:26:18.946853 [INFO] Pruning containers ...
2024/01/29 19:26:18.946883 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:26:18.985626 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
69198963c866   c176d18fbf65   "./main --environmen…"   27 seconds ago   Exited (1) 26 seconds ago             competent_hopper

2024/01/29 19:26:18.985658 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:26:19.020827 [INFO] Deleted Containers:
69198963c866864784029e9e9ee4c05b310b22ee43ed89c0cca5f3cf6f07f6be

Total reclaimed space: 0B

2024/01/29 19:26:19.020851 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:26:19.042806 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:26:19.043034 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:26:19.046421 [INFO] application/json

2024/01/29 19:26:19.046440 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:26:19.126670 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/29 19:26:19.126851 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:26:19.128123 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:26:19.128152 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:26:19.128168 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:26:19.128176 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:26:19.128181 [INFO] Executing instruction: Generate environment file
2024/01/29 19:26:19.128206 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:26:19.128209 [INFO] start build docker app
2024/01/29 19:26:19.128557 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:26:19.128560 [INFO] fetching image and ports
2024/01/29 19:26:19.130258 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:26:19.130310 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:26:19.130319 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:26:19.130329 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:26:20.228918 [INFO] Login Succeeded

2024/01/29 19:26:20.228940 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:26:20.228952 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:26:20.228975 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:26:20.362483 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:26:20.362506 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:26:20.362509 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:26:20.362513 [INFO] start to build docker image
2024/01/29 19:26:20.362527 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:26:20.652240 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:26:20.652261 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:26:20.652267 [INFO] successfully build docker image
2024/01/29 19:26:20.652269 [INFO] save staging docker image id
2024/01/29 19:26:20.652283 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:26:20.673499 [INFO] c176d18fbf65

2024/01/29 19:26:20.673613 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:26:20.673619 [INFO] X-Ray is not enabled.
2024/01/29 19:26:20.673622 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:26:20.682403 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:26:20.684287 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:26:20.698071 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:26:20.698101 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:26:20.708779 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:26:20.718783 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:26:20.731989 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:26:20.799608 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:26:21.160632 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:26:21.160700 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:26:21.466713 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:26:21.479343 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:26:21.839525 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:26:21.849475 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:26:21.860325 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:26:22.190053 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:26:22.204491 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:26:22.556096 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:26:22.556133 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:26:22.570914 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:26:22.582257 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:26:22.683353 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:26:22.684296 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:26:22.685130 [INFO] Executing instruction: configure log streaming
2024/01/29 19:26:22.685142 [INFO] log streaming is not enabled
2024/01/29 19:26:22.685145 [INFO] disable log stream
2024/01/29 19:26:22.685160 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:26:22.708257 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:26:22.729214 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:26:22.729238 [INFO] Checking if logs need forced rotation
2024/01/29 19:26:22.729368 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:26:23.291108 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:26:23.817062 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:26:23.818860 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:26:24.165707 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:26:24.183869 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:26:24.183886 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:26:24.183905 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:26:24.642419 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:26:24.642462 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:26:24.642500 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:26:24.642505 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:26:24.642539 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:26:24.642550 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:26:24.642553 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:26:24.642558 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:26:24.642560 [INFO] stop X-Ray ...
2024/01/29 19:26:24.642572 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:26:24.658012 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:26:24.658041 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:26:24.677727 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:26:24.677756 [INFO] stop currently running containers...
2024/01/29 19:26:24.677765 [INFO] detected old app is not docker compose app
2024/01/29 19:26:24.677779 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:26:24.732588 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:26:24.763168 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:26:24.763209 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:26:24.782720 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:26:24.782754 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:26:24.799589 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:26:24.799821 [INFO] stopping current container: 69198963c866
2024/01/29 19:26:24.799839 [INFO] Running command /bin/sh -c docker ps | grep -q 69198963c866
2024/01/29 19:26:24.821766 [INFO] Running command /bin/sh -c docker ps | grep -q 69198963c866
2024/01/29 19:26:24.844812 [INFO] Pruning containers ...
2024/01/29 19:26:24.844948 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:26:24.872288 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:26:24.872320 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:26:24.891378 [INFO] Total reclaimed space: 0B

2024/01/29 19:26:24.891419 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:26:24.925214 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:26:24.925243 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:26:24.949142 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:26:24.949161 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:26:24.949302 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:26:24.949326 [INFO] detected new app is not docker compose app
2024/01/29 19:26:24.949387 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:26:25.444761 [INFO] 3b5cff14a0df1e5e3326237f61f606c223c7b1f3072c4297013a168e7b8b2f13

2024/01/29 19:26:30.445159 [INFO] Running command /bin/sh -c docker ps | grep -q 3b5cff14a0df
2024/01/29 19:26:30.476011 [ERROR] docker container quit unexpectedly on 2024-01-29 19:26:30.475993972 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3b5cff14a0df failed with error exit status 1
2024/01/29 19:26:30.476052 [INFO] Running command /bin/sh -c docker logs 3b5cff14a0df
2024/01/29 19:26:30.501204 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3b5cff14a0df: Command /bin/sh -c docker ps | grep -q 3b5cff14a0df failed with error exit status 1 

2024/01/29 19:26:30.501216 [INFO] Executing cleanup logic
2024/01/29 19:26:30.501711 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:27:03.807671 [INFO] Starting...
2024/01/29 19:27:03.807712 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:27:03.807739 [INFO] reading event message file
2024/01/29 19:27:03.808791 [INFO] Engine received EB command userdata-exec

2024/01/29 19:27:03.816448 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:27:04.361326 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:27:04.921831 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:27:04.921898 [INFO] Engine command: (self-startup)

2024/01/29 19:27:04.921906 [INFO] Downloading EB Application...
2024/01/29 19:27:04.921909 [INFO] Region: eu-west-1
2024/01/29 19:27:04.921912 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:27:04.921916 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:27:04.921919 [INFO] Using manifest file name from command request
2024/01/29 19:27:04.921937 [INFO] Unable to get version manifest file.
2024/01/29 19:27:04.921940 [INFO] Downloading latest manifest available.
2024/01/29 19:27:04.921943 [INFO] Download latest app version manifest
2024/01/29 19:27:04.923806 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:27:04.963620 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:27:04.963807 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:27:04.976405 [INFO] Download successful124bytes downloaded
2024/01/29 19:27:04.976560 [INFO] Trying to read and parse version manifest...
2024/01/29 19:27:04.976633 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:27:04.989730 [INFO] Download successful264bytes downloaded
2024/01/29 19:27:04.989984 [INFO] Executing instruction: SyncClock
2024/01/29 19:27:04.989989 [INFO] Starting SyncClock
2024/01/29 19:27:04.989999 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:27:04.995750 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:26:46 2024
System time     : 0.000004084 seconds slow of NTP time
Last offset     : -0.000005261 seconds
RMS offset      : 0.000120015 seconds
Frequency       : 0.592 ppm fast
Residual freq   : -0.006 ppm
Skew            : 0.289 ppm
Root delay      : 0.000505527 seconds
Root dispersion : 0.000341609 seconds
Update interval : 32.4 seconds
Leap status     : Normal

2024/01/29 19:27:04.995794 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:27:05.005643 [INFO] 200 OK

2024/01/29 19:27:05.005754 [INFO] Skipping Configure OS
2024/01/29 19:27:05.005759 [INFO] Skipping LockRepo
2024/01/29 19:27:05.005763 [INFO] Skipping GenerateEBBanner
2024/01/29 19:27:05.005768 [INFO] Skipping Install Process Manager
2024/01/29 19:27:05.005773 [INFO] Skipping install syslog
2024/01/29 19:27:05.005778 [INFO] Skipping install cron
2024/01/29 19:27:05.005963 [INFO] Skipping install proxy
2024/01/29 19:27:05.005971 [INFO] Skipping installhealthd
2024/01/29 19:27:05.005975 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:27:05.005979 [INFO] Skipping install X-Ray
2024/01/29 19:27:05.005990 [INFO] Skipping install Third Party License
2024/01/29 19:27:05.005995 [INFO] Skipping installSqsd
2024/01/29 19:27:05.005999 [INFO] Skipping bootstraphealthd
2024/01/29 19:27:05.006003 [INFO] Skipping Install yum packages
2024/01/29 19:27:05.006007 [INFO] Skipping install docker-compose
2024/01/29 19:27:05.006011 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:27:05.006015 [INFO] Skipping MarkBaked
2024/01/29 19:27:05.006018 [INFO] Skipping TuneSystemSettings
2024/01/29 19:27:05.006021 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:27:05.006023 [INFO] Initialize LogRotate files and directories
2024/01/29 19:27:05.021478 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:27:05.021491 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:27:05.021496 [INFO] Start cfn-hup
2024/01/29 19:27:05.021591 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:27:05.035093 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:27:05.046057 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:27:05.046089 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:27:05.046092 [INFO] Executing instruction: Start Docker
2024/01/29 19:27:05.046094 [INFO] Starting Docker...
2024/01/29 19:27:05.046153 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:27:05.047367 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:27:05.048541 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:27:05.421762 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:27:05.438234 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:27:05.438268 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:27:05.449672 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:27:05.468939 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:27:05.509792 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:27:05.583925 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:27:05.583977 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:27:05.993935 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:27:06.406301 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:27:06.418796 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:27:06.809562 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:27:06.819750 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:27:06.831945 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:27:06.840355 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:27:08.128267 [INFO] Skipping Setup Docker Options
2024/01/29 19:27:08.128290 [INFO] Skipping MarkBootstrapped
2024/01/29 19:27:08.128293 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:27:08.128380 [INFO] Starting SwitchCFNStack
2024/01/29 19:27:08.128458 [INFO] Executing instruction: stopSqsd
2024/01/29 19:27:08.128462 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:27:08.128465 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:27:08.128467 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:27:08.128485 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:27:08.662416 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:27:08.662453 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:27:08.662467 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:27:08.687971 [INFO] Pruning containers ...
2024/01/29 19:27:08.688003 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:27:08.710112 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
3b5cff14a0df   c176d18fbf65   "./main --environmen…"   44 seconds ago   Exited (1) 43 seconds ago             unruffled_wilson

2024/01/29 19:27:08.710140 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:27:08.743104 [INFO] Deleted Containers:
3b5cff14a0df1e5e3326237f61f606c223c7b1f3072c4297013a168e7b8b2f13

Total reclaimed space: 0B

2024/01/29 19:27:08.743133 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:27:08.769162 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:27:08.769549 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:27:08.778691 [INFO] application/json

2024/01/29 19:27:08.778726 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:27:08.871969 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:27:08.872141 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:27:08.873374 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:27:08.873396 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:27:08.873411 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:27:08.873425 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:27:08.873429 [INFO] Executing instruction: Generate environment file
2024/01/29 19:27:08.873459 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:27:08.873463 [INFO] start build docker app
2024/01/29 19:27:08.873854 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:27:08.873858 [INFO] fetching image and ports
2024/01/29 19:27:08.875627 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:27:08.875688 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:27:08.875698 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:27:08.875708 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:27:10.033192 [INFO] Login Succeeded

2024/01/29 19:27:10.033212 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:27:10.033219 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:27:10.033240 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:27:10.176144 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:27:10.176170 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:27:10.176174 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:27:10.176177 [INFO] start to build docker image
2024/01/29 19:27:10.176191 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:27:10.490348 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:27:10.490372 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:27:10.490441 [INFO] successfully build docker image
2024/01/29 19:27:10.490446 [INFO] save staging docker image id
2024/01/29 19:27:10.490461 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:27:10.513482 [INFO] c176d18fbf65

2024/01/29 19:27:10.513616 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:27:10.513622 [INFO] X-Ray is not enabled.
2024/01/29 19:27:10.513625 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:27:10.518778 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:27:10.520362 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:27:10.534226 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:27:10.534259 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:27:10.544888 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:27:10.556067 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:27:10.566442 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:27:10.618342 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:27:11.002956 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:27:11.003046 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:27:11.357232 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:27:11.374884 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:27:11.718188 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:27:11.729628 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:27:11.745164 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:27:12.037691 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:27:12.067956 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:27:12.448355 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:27:12.448392 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:27:12.473926 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:27:12.483871 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:27:12.570744 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:27:12.571744 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:27:12.572697 [INFO] Executing instruction: configure log streaming
2024/01/29 19:27:12.572708 [INFO] log streaming is not enabled
2024/01/29 19:27:12.572712 [INFO] disable log stream
2024/01/29 19:27:12.572727 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:27:12.593971 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:27:12.618839 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:27:12.618866 [INFO] Checking if logs need forced rotation
2024/01/29 19:27:12.619083 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:27:13.171890 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:27:13.672568 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:27:13.674300 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:27:13.771704 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:27:13.791149 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:27:13.791164 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:27:13.791179 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:27:14.175616 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:27:14.175640 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:27:14.175662 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:27:14.175665 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:27:14.175684 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:27:14.175694 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:27:14.175697 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:27:14.175702 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:27:14.175704 [INFO] stop X-Ray ...
2024/01/29 19:27:14.175715 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:27:14.198169 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:27:14.198204 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:27:14.220992 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:27:14.221070 [INFO] stop currently running containers...
2024/01/29 19:27:14.221083 [INFO] detected old app is not docker compose app
2024/01/29 19:27:14.221097 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:27:14.262502 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:27:14.281559 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:27:14.281589 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:27:14.305901 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:27:14.305935 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:27:14.322003 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:27:14.322206 [INFO] stopping current container: 3b5cff14a0df
2024/01/29 19:27:14.322219 [INFO] Running command /bin/sh -c docker ps | grep -q 3b5cff14a0df
2024/01/29 19:27:14.353375 [INFO] Running command /bin/sh -c docker ps | grep -q 3b5cff14a0df
2024/01/29 19:27:14.378268 [INFO] Pruning containers ...
2024/01/29 19:27:14.378360 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:27:14.401291 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:27:14.401320 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:27:14.423544 [INFO] Total reclaimed space: 0B

2024/01/29 19:27:14.423569 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:27:14.441205 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:27:14.441242 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:27:14.463861 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:27:14.463883 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:27:14.463983 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:27:14.464000 [INFO] detected new app is not docker compose app
2024/01/29 19:27:14.464046 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:27:14.905266 [INFO] 7cc0667601cfc629fdb1e1fdf0839e4e3c06e280bdfe5cce02cd5f8d9670dded

2024/01/29 19:27:19.909591 [INFO] Running command /bin/sh -c docker ps | grep -q 7cc0667601cf
2024/01/29 19:27:19.948834 [ERROR] docker container quit unexpectedly on 2024-01-29 19:27:19.948814641 +0000 UTC: Command /bin/sh -c docker ps | grep -q 7cc0667601cf failed with error exit status 1
2024/01/29 19:27:19.948904 [INFO] Running command /bin/sh -c docker logs 7cc0667601cf
2024/01/29 19:27:19.976276 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 7cc0667601cf: Command /bin/sh -c docker ps | grep -q 7cc0667601cf failed with error exit status 1 

2024/01/29 19:27:19.976286 [INFO] Executing cleanup logic
2024/01/29 19:27:19.976521 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:28:25.024972 [INFO] Starting...
2024/01/29 19:28:25.025011 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:28:25.025034 [INFO] reading event message file
2024/01/29 19:28:25.025884 [INFO] Engine received EB command userdata-exec

2024/01/29 19:28:25.031449 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:28:25.534186 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:28:26.117602 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:28:26.117661 [INFO] Engine command: (self-startup)

2024/01/29 19:28:26.117669 [INFO] Downloading EB Application...
2024/01/29 19:28:26.117673 [INFO] Region: eu-west-1
2024/01/29 19:28:26.117676 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:28:26.117680 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:28:26.117683 [INFO] Using manifest file name from command request
2024/01/29 19:28:26.117700 [INFO] Unable to get version manifest file.
2024/01/29 19:28:26.117703 [INFO] Downloading latest manifest available.
2024/01/29 19:28:26.117706 [INFO] Download latest app version manifest
2024/01/29 19:28:26.118030 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:28:26.158667 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:28:26.162897 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:28:26.176792 [INFO] Download successful124bytes downloaded
2024/01/29 19:28:26.177808 [INFO] Trying to read and parse version manifest...
2024/01/29 19:28:26.177934 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:28:26.189528 [INFO] Download successful264bytes downloaded
2024/01/29 19:28:26.189827 [INFO] Executing instruction: SyncClock
2024/01/29 19:28:26.189833 [INFO] Starting SyncClock
2024/01/29 19:28:26.189844 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:28:26.201970 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:28:24 2024
System time     : 0.000001509 seconds fast of NTP time
Last offset     : +0.000001233 seconds
RMS offset      : 0.000097271 seconds
Frequency       : 0.637 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.113 ppm
Root delay      : 0.000435855 seconds
Root dispersion : 0.000301386 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/29 19:28:26.202002 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:28:26.221742 [INFO] 200 OK

2024/01/29 19:28:26.221881 [INFO] Skipping Configure OS
2024/01/29 19:28:26.221889 [INFO] Skipping LockRepo
2024/01/29 19:28:26.221893 [INFO] Skipping GenerateEBBanner
2024/01/29 19:28:26.221897 [INFO] Skipping Install Process Manager
2024/01/29 19:28:26.221901 [INFO] Skipping install syslog
2024/01/29 19:28:26.221905 [INFO] Skipping install cron
2024/01/29 19:28:26.221909 [INFO] Skipping install proxy
2024/01/29 19:28:26.221915 [INFO] Skipping installhealthd
2024/01/29 19:28:26.221921 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:28:26.221926 [INFO] Skipping install X-Ray
2024/01/29 19:28:26.221931 [INFO] Skipping install Third Party License
2024/01/29 19:28:26.221944 [INFO] Skipping installSqsd
2024/01/29 19:28:26.221949 [INFO] Skipping bootstraphealthd
2024/01/29 19:28:26.221954 [INFO] Skipping Install yum packages
2024/01/29 19:28:26.221960 [INFO] Skipping install docker-compose
2024/01/29 19:28:26.221965 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:28:26.221968 [INFO] Skipping MarkBaked
2024/01/29 19:28:26.221972 [INFO] Skipping TuneSystemSettings
2024/01/29 19:28:26.221975 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:28:26.221977 [INFO] Initialize LogRotate files and directories
2024/01/29 19:28:26.236760 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:28:26.236772 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:28:26.236775 [INFO] Start cfn-hup
2024/01/29 19:28:26.236794 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:28:26.250128 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:28:26.262081 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:28:26.262115 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:28:26.262118 [INFO] Executing instruction: Start Docker
2024/01/29 19:28:26.262121 [INFO] Starting Docker...
2024/01/29 19:28:26.262130 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:28:26.263089 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:28:26.264109 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:28:26.669048 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:28:26.684462 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:28:26.684498 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:28:26.695145 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:28:26.703680 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:28:26.715716 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:28:26.760395 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:28:26.760492 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:28:27.073205 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:28:27.384050 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:28:27.395898 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:28:27.671574 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:28:27.681852 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:28:27.694639 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:28:27.703467 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:28:28.918647 [INFO] Skipping Setup Docker Options
2024/01/29 19:28:28.918676 [INFO] Skipping MarkBootstrapped
2024/01/29 19:28:28.918680 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:28:28.918793 [INFO] Starting SwitchCFNStack
2024/01/29 19:28:28.918799 [INFO] Executing instruction: stopSqsd
2024/01/29 19:28:28.918802 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:28:28.918805 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:28:28.918809 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:28:28.918826 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:28:29.362635 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:28:29.362671 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:28:29.362681 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:28:29.382319 [INFO] Pruning containers ...
2024/01/29 19:28:29.382352 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:28:29.402856 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS                          PORTS     NAMES
7cc0667601cf   c176d18fbf65   "./main --environmen…"   About a minute ago   Exited (1) About a minute ago             goofy_bouman

2024/01/29 19:28:29.402893 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:28:29.429084 [INFO] Deleted Containers:
7cc0667601cfc629fdb1e1fdf0839e4e3c06e280bdfe5cce02cd5f8d9670dded

Total reclaimed space: 0B

2024/01/29 19:28:29.429109 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:28:29.448655 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:28:29.449261 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:28:29.452786 [INFO] application/json

2024/01/29 19:28:29.453003 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:28:29.549449 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:28:29.549731 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:28:29.550990 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:28:29.551012 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:28:29.551102 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:28:29.551106 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:28:29.551111 [INFO] Executing instruction: Generate environment file
2024/01/29 19:28:29.551139 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:28:29.551143 [INFO] start build docker app
2024/01/29 19:28:29.551666 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:28:29.551675 [INFO] fetching image and ports
2024/01/29 19:28:29.553370 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:28:29.553419 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:28:29.553430 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:28:29.553442 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:28:30.557591 [INFO] Login Succeeded

2024/01/29 19:28:30.557615 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:28:30.557620 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:28:30.557647 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:28:30.738768 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:28:30.738794 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:28:30.738797 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:28:30.738800 [INFO] start to build docker image
2024/01/29 19:28:30.738815 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:28:31.084193 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:28:31.084214 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:28:31.084217 [INFO] successfully build docker image
2024/01/29 19:28:31.084219 [INFO] save staging docker image id
2024/01/29 19:28:31.084247 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:28:31.117087 [INFO] c176d18fbf65

2024/01/29 19:28:31.117205 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:28:31.117213 [INFO] X-Ray is not enabled.
2024/01/29 19:28:31.117216 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:28:31.125678 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:28:31.127128 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:28:31.151213 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:28:31.151250 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:28:31.174553 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:28:31.192997 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:28:31.203649 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:28:31.259659 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:28:31.590391 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:28:31.590456 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:28:31.902862 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:28:31.916836 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:28:32.246044 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:28:32.255516 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:28:32.265349 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:28:32.563107 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:28:32.574037 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:28:32.974838 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:28:32.974875 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:28:32.988128 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:28:32.996849 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:28:33.061417 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:28:33.062686 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:28:33.064109 [INFO] Executing instruction: configure log streaming
2024/01/29 19:28:33.064120 [INFO] log streaming is not enabled
2024/01/29 19:28:33.064124 [INFO] disable log stream
2024/01/29 19:28:33.064140 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:28:33.083494 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:28:33.101229 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:28:33.101256 [INFO] Checking if logs need forced rotation
2024/01/29 19:28:33.101282 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:28:33.639123 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:28:34.201735 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:28:34.207458 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:28:34.323761 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:28:34.342228 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:28:34.342247 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:28:34.342272 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:28:34.771488 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:28:34.771542 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:28:34.771571 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:28:34.771574 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:28:34.771594 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:28:34.771605 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:28:34.771607 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:28:34.771612 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:28:34.771614 [INFO] stop X-Ray ...
2024/01/29 19:28:34.771624 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:28:34.786578 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:28:34.786607 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:28:34.809189 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:28:34.809217 [INFO] stop currently running containers...
2024/01/29 19:28:34.809226 [INFO] detected old app is not docker compose app
2024/01/29 19:28:34.809244 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:28:34.874611 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:28:34.909263 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:28:34.909341 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:28:34.930615 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:28:34.930652 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:28:34.952317 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:28:34.952405 [INFO] stopping current container: 7cc0667601cf
2024/01/29 19:28:34.952420 [INFO] Running command /bin/sh -c docker ps | grep -q 7cc0667601cf
2024/01/29 19:28:34.988112 [INFO] Running command /bin/sh -c docker ps | grep -q 7cc0667601cf
2024/01/29 19:28:35.026408 [INFO] Pruning containers ...
2024/01/29 19:28:35.026431 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:28:35.071079 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:28:35.071109 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:28:35.100949 [INFO] Total reclaimed space: 0B

2024/01/29 19:28:35.100978 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:28:35.135757 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:28:35.135791 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:28:35.159257 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:28:35.159279 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:28:35.159377 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:28:35.159393 [INFO] detected new app is not docker compose app
2024/01/29 19:28:35.159442 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:28:35.659299 [INFO] ac7dddfc97ed8e70be9374cc2eaac754dcb8a68a260a3b96c84303e87ad75559

2024/01/29 19:28:40.659696 [INFO] Running command /bin/sh -c docker ps | grep -q ac7dddfc97ed
2024/01/29 19:28:40.682251 [ERROR] docker container quit unexpectedly on 2024-01-29 19:28:40.682226149 +0000 UTC: Command /bin/sh -c docker ps | grep -q ac7dddfc97ed failed with error exit status 1
2024/01/29 19:28:40.682281 [INFO] Running command /bin/sh -c docker logs ac7dddfc97ed
2024/01/29 19:28:40.703010 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container ac7dddfc97ed: Command /bin/sh -c docker ps | grep -q ac7dddfc97ed failed with error exit status 1 

2024/01/29 19:28:40.703056 [INFO] Executing cleanup logic
2024/01/29 19:28:40.703263 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:30:49.822676 [INFO] Starting...
2024/01/29 19:30:49.822716 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:30:49.822741 [INFO] reading event message file
2024/01/29 19:30:49.823431 [INFO] Engine received EB command userdata-exec

2024/01/29 19:30:49.829408 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:30:50.323388 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:30:50.722608 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:30:50.722711 [INFO] Engine command: (self-startup)

2024/01/29 19:30:50.722720 [INFO] Downloading EB Application...
2024/01/29 19:30:50.722724 [INFO] Region: eu-west-1
2024/01/29 19:30:50.722727 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:30:50.722737 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:30:50.722740 [INFO] Using manifest file name from command request
2024/01/29 19:30:50.722753 [INFO] Unable to get version manifest file.
2024/01/29 19:30:50.722756 [INFO] Downloading latest manifest available.
2024/01/29 19:30:50.722758 [INFO] Download latest app version manifest
2024/01/29 19:30:50.722877 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:30:50.761118 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:30:50.761517 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:30:50.773344 [INFO] Download successful124bytes downloaded
2024/01/29 19:30:50.773473 [INFO] Trying to read and parse version manifest...
2024/01/29 19:30:50.773551 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:30:50.784571 [INFO] Download successful264bytes downloaded
2024/01/29 19:30:50.784924 [INFO] Executing instruction: SyncClock
2024/01/29 19:30:50.784940 [INFO] Starting SyncClock
2024/01/29 19:30:50.784952 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:30:50.790562 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:30:49 2024
System time     : 0.000001295 seconds slow of NTP time
Last offset     : -0.000000703 seconds
RMS offset      : 0.000067290 seconds
Frequency       : 0.630 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.074 ppm
Root delay      : 0.000434250 seconds
Root dispersion : 0.000308131 seconds
Update interval : 32.5 seconds
Leap status     : Normal

2024/01/29 19:30:50.790582 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:30:50.795866 [INFO] 200 OK

2024/01/29 19:30:50.796069 [INFO] Skipping Configure OS
2024/01/29 19:30:50.796079 [INFO] Skipping LockRepo
2024/01/29 19:30:50.796085 [INFO] Skipping GenerateEBBanner
2024/01/29 19:30:50.796091 [INFO] Skipping Install Process Manager
2024/01/29 19:30:50.796096 [INFO] Skipping install syslog
2024/01/29 19:30:50.796101 [INFO] Skipping install cron
2024/01/29 19:30:50.796107 [INFO] Skipping install proxy
2024/01/29 19:30:50.796112 [INFO] Skipping installhealthd
2024/01/29 19:30:50.796124 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:30:50.796130 [INFO] Skipping install X-Ray
2024/01/29 19:30:50.796135 [INFO] Skipping install Third Party License
2024/01/29 19:30:50.796142 [INFO] Skipping installSqsd
2024/01/29 19:30:50.796148 [INFO] Skipping bootstraphealthd
2024/01/29 19:30:50.796154 [INFO] Skipping Install yum packages
2024/01/29 19:30:50.796160 [INFO] Skipping install docker-compose
2024/01/29 19:30:50.796170 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:30:50.796176 [INFO] Skipping MarkBaked
2024/01/29 19:30:50.796181 [INFO] Skipping TuneSystemSettings
2024/01/29 19:30:50.796185 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:30:50.796189 [INFO] Initialize LogRotate files and directories
2024/01/29 19:30:50.809930 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:30:50.809939 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:30:50.809942 [INFO] Start cfn-hup
2024/01/29 19:30:50.809987 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:30:50.831957 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:30:50.846416 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:30:50.846455 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:30:50.846460 [INFO] Executing instruction: Start Docker
2024/01/29 19:30:50.846464 [INFO] Starting Docker...
2024/01/29 19:30:50.846581 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:30:50.847813 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:30:50.849086 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:30:51.147695 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:30:51.174567 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:30:51.174602 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:30:51.199476 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:30:51.213088 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:30:51.226376 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:30:51.317586 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:30:51.317727 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:30:51.754470 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:30:52.045412 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:30:52.057649 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:30:52.423529 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:30:52.443926 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:30:52.470379 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:30:52.480245 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:30:53.682555 [INFO] Skipping Setup Docker Options
2024/01/29 19:30:53.682578 [INFO] Skipping MarkBootstrapped
2024/01/29 19:30:53.682582 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:30:53.682773 [INFO] Starting SwitchCFNStack
2024/01/29 19:30:53.682780 [INFO] Executing instruction: stopSqsd
2024/01/29 19:30:53.682784 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:30:53.682787 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:30:53.682791 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:30:53.682810 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:30:54.129060 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:30:54.129154 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:30:54.129167 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:30:54.153104 [INFO] Pruning containers ...
2024/01/29 19:30:54.153137 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:30:54.171917 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS                     PORTS     NAMES
ac7dddfc97ed   c176d18fbf65   "./main --environmen…"   2 minutes ago   Exited (1) 2 minutes ago             boring_jackson

2024/01/29 19:30:54.171946 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:30:54.200413 [INFO] Deleted Containers:
ac7dddfc97ed8e70be9374cc2eaac754dcb8a68a260a3b96c84303e87ad75559

Total reclaimed space: 0B

2024/01/29 19:30:54.200444 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:30:54.220346 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:30:54.220575 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:30:54.223855 [INFO] application/json

2024/01/29 19:30:54.223882 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:30:54.299461 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:30:54.299632 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:30:54.300813 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:30:54.300837 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:30:54.300855 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:30:54.300858 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:30:54.300863 [INFO] Executing instruction: Generate environment file
2024/01/29 19:30:54.300889 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:30:54.300893 [INFO] start build docker app
2024/01/29 19:30:54.301322 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:30:54.301325 [INFO] fetching image and ports
2024/01/29 19:30:54.302970 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:30:54.303027 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:30:54.303036 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:30:54.303045 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:30:55.255662 [INFO] Login Succeeded

2024/01/29 19:30:55.255680 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:30:55.255687 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:30:55.255752 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:30:55.412280 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:30:55.412308 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:30:55.412313 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:30:55.412317 [INFO] start to build docker image
2024/01/29 19:30:55.412337 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:30:55.666829 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:30:55.666851 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:30:55.666855 [INFO] successfully build docker image
2024/01/29 19:30:55.666857 [INFO] save staging docker image id
2024/01/29 19:30:55.666867 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:30:55.692815 [INFO] c176d18fbf65

2024/01/29 19:30:55.693124 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:30:55.693131 [INFO] X-Ray is not enabled.
2024/01/29 19:30:55.693134 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:30:55.698593 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:30:55.700118 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:30:55.718866 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:30:55.718898 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:30:55.734548 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:30:55.745588 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:30:55.760440 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:30:55.828908 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:30:56.147850 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:30:56.148065 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:30:56.486575 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:30:56.498094 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:30:56.864944 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:30:56.880487 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:30:56.890725 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:30:57.214394 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:30:57.227004 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:30:57.551954 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:30:57.551994 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:30:57.567420 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:30:57.577678 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:30:57.657883 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:30:57.658846 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:30:57.659773 [INFO] Executing instruction: configure log streaming
2024/01/29 19:30:57.659784 [INFO] log streaming is not enabled
2024/01/29 19:30:57.659788 [INFO] disable log stream
2024/01/29 19:30:57.659802 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:30:57.680891 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:30:57.701798 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:30:57.701826 [INFO] Checking if logs need forced rotation
2024/01/29 19:30:57.701847 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:30:58.226726 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:30:58.820377 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:30:58.825028 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:30:59.163977 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:30:59.183662 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:30:59.183684 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:30:59.183698 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:30:59.616757 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:30:59.616785 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:30:59.616815 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:30:59.616819 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:30:59.616843 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:30:59.616856 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:30:59.616858 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:30:59.616863 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:30:59.616866 [INFO] stop X-Ray ...
2024/01/29 19:30:59.616876 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:30:59.644420 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:30:59.644453 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:30:59.681257 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:30:59.681290 [INFO] stop currently running containers...
2024/01/29 19:30:59.681302 [INFO] detected old app is not docker compose app
2024/01/29 19:30:59.681313 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:30:59.732451 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:30:59.749198 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:30:59.749233 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:30:59.762699 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:30:59.762735 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:30:59.777499 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:30:59.777541 [INFO] stopping current container: ac7dddfc97ed
2024/01/29 19:30:59.777552 [INFO] Running command /bin/sh -c docker ps | grep -q ac7dddfc97ed
2024/01/29 19:30:59.814165 [INFO] Running command /bin/sh -c docker ps | grep -q ac7dddfc97ed
2024/01/29 19:30:59.836124 [INFO] Pruning containers ...
2024/01/29 19:30:59.836150 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:30:59.855029 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:30:59.855076 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:30:59.885978 [INFO] Total reclaimed space: 0B

2024/01/29 19:30:59.886253 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:30:59.910279 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:30:59.910464 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:30:59.938725 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:30:59.938748 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:30:59.938857 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:30:59.938877 [INFO] detected new app is not docker compose app
2024/01/29 19:30:59.938956 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:31:00.513364 [INFO] c15a9128e03a876f70583f348039c04b666ecf2517ed413b6c172810b4d7c6bc

2024/01/29 19:31:05.513760 [INFO] Running command /bin/sh -c docker ps | grep -q c15a9128e03a
2024/01/29 19:31:05.534597 [ERROR] docker container quit unexpectedly on 2024-01-29 19:31:05.534580576 +0000 UTC: Command /bin/sh -c docker ps | grep -q c15a9128e03a failed with error exit status 1
2024/01/29 19:31:05.534623 [INFO] Running command /bin/sh -c docker logs c15a9128e03a
2024/01/29 19:31:05.556902 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c15a9128e03a: Command /bin/sh -c docker ps | grep -q c15a9128e03a failed with error exit status 1 

2024/01/29 19:31:05.556911 [INFO] Executing cleanup logic
2024/01/29 19:31:05.557132 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:35:22.663056 [INFO] Starting...
2024/01/29 19:35:22.663097 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:35:22.663122 [INFO] reading event message file
2024/01/29 19:35:22.663996 [INFO] Engine received EB command userdata-exec

2024/01/29 19:35:22.676589 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:35:23.099815 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:35:23.614330 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:35:23.614455 [INFO] Engine command: (self-startup)

2024/01/29 19:35:23.614587 [INFO] Downloading EB Application...
2024/01/29 19:35:23.614595 [INFO] Region: eu-west-1
2024/01/29 19:35:23.614598 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:35:23.614602 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:35:23.614610 [INFO] Using manifest file name from command request
2024/01/29 19:35:23.614628 [INFO] Unable to get version manifest file.
2024/01/29 19:35:23.614636 [INFO] Downloading latest manifest available.
2024/01/29 19:35:23.614640 [INFO] Download latest app version manifest
2024/01/29 19:35:23.614857 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:35:23.661707 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:35:23.661949 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:35:23.680433 [INFO] Download successful124bytes downloaded
2024/01/29 19:35:23.680590 [INFO] Trying to read and parse version manifest...
2024/01/29 19:35:23.680665 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:35:23.699967 [INFO] Download successful264bytes downloaded
2024/01/29 19:35:23.700292 [INFO] Executing instruction: SyncClock
2024/01/29 19:35:23.700298 [INFO] Starting SyncClock
2024/01/29 19:35:23.700312 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:35:23.710444 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:35:09 2024
System time     : 0.000000080 seconds slow of NTP time
Last offset     : -0.000000263 seconds
RMS offset      : 0.000030583 seconds
Frequency       : 0.638 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.036 ppm
Root delay      : 0.000424854 seconds
Root dispersion : 0.000302101 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/29 19:35:23.710472 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:35:23.718960 [INFO] 200 OK

2024/01/29 19:35:23.719085 [INFO] Skipping Configure OS
2024/01/29 19:35:23.719093 [INFO] Skipping LockRepo
2024/01/29 19:35:23.719099 [INFO] Skipping GenerateEBBanner
2024/01/29 19:35:23.719105 [INFO] Skipping Install Process Manager
2024/01/29 19:35:23.719110 [INFO] Skipping install syslog
2024/01/29 19:35:23.719115 [INFO] Skipping install cron
2024/01/29 19:35:23.719120 [INFO] Skipping install proxy
2024/01/29 19:35:23.719125 [INFO] Skipping installhealthd
2024/01/29 19:35:23.719130 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:35:23.719136 [INFO] Skipping install X-Ray
2024/01/29 19:35:23.719140 [INFO] Skipping install Third Party License
2024/01/29 19:35:23.719148 [INFO] Skipping installSqsd
2024/01/29 19:35:23.719152 [INFO] Skipping bootstraphealthd
2024/01/29 19:35:23.719157 [INFO] Skipping Install yum packages
2024/01/29 19:35:23.719161 [INFO] Skipping install docker-compose
2024/01/29 19:35:23.719166 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:35:23.719172 [INFO] Skipping MarkBaked
2024/01/29 19:35:23.719177 [INFO] Skipping TuneSystemSettings
2024/01/29 19:35:23.719181 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:35:23.719184 [INFO] Initialize LogRotate files and directories
2024/01/29 19:35:23.735247 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:35:23.735260 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:35:23.735263 [INFO] Start cfn-hup
2024/01/29 19:35:23.735285 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:35:23.754603 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:35:23.765437 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:35:23.765511 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:35:23.765516 [INFO] Executing instruction: Start Docker
2024/01/29 19:35:23.765520 [INFO] Starting Docker...
2024/01/29 19:35:23.765605 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:35:23.766979 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:35:23.768230 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:35:24.159723 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:35:24.176168 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:35:24.176202 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:35:24.189436 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:35:24.201945 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:35:24.216101 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:35:24.287055 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:35:24.287114 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:35:24.662060 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:35:25.065573 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:35:25.081019 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:35:25.532356 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:35:25.542294 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:35:25.557527 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:35:25.566986 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:35:26.976407 [INFO] Skipping Setup Docker Options
2024/01/29 19:35:26.976439 [INFO] Skipping MarkBootstrapped
2024/01/29 19:35:26.976443 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:35:26.976564 [INFO] Starting SwitchCFNStack
2024/01/29 19:35:26.976582 [INFO] Executing instruction: stopSqsd
2024/01/29 19:35:26.976585 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:35:26.976589 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:35:26.976592 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:35:26.976609 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:35:27.584496 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:35:27.584519 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:35:27.584532 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:35:27.640367 [INFO] Pruning containers ...
2024/01/29 19:35:27.640402 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:35:27.700438 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS                     PORTS     NAMES
c15a9128e03a   c176d18fbf65   "./main --environmen…"   4 minutes ago   Exited (1) 4 minutes ago             priceless_banach

2024/01/29 19:35:27.700467 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:35:27.726160 [INFO] Deleted Containers:
c15a9128e03a876f70583f348039c04b666ecf2517ed413b6c172810b4d7c6bc

Total reclaimed space: 0B

2024/01/29 19:35:27.726185 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:35:27.749019 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:35:27.749344 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:35:27.752088 [INFO] application/json

2024/01/29 19:35:27.752178 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:35:27.890680 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/29 19:35:27.891770 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:35:27.896400 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:35:27.896563 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:35:27.896588 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:35:27.896592 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:35:27.896599 [INFO] Executing instruction: Generate environment file
2024/01/29 19:35:27.897357 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:35:27.897365 [INFO] start build docker app
2024/01/29 19:35:27.897766 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:35:27.897771 [INFO] fetching image and ports
2024/01/29 19:35:27.900727 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:35:27.900803 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:35:27.900811 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:35:27.900822 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:35:28.953735 [INFO] Login Succeeded

2024/01/29 19:35:28.953756 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:35:28.953763 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:35:28.953780 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:35:29.080464 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:35:29.080486 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:35:29.080489 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:35:29.080492 [INFO] start to build docker image
2024/01/29 19:35:29.080509 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:35:29.357898 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:35:29.357926 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:35:29.357931 [INFO] successfully build docker image
2024/01/29 19:35:29.357933 [INFO] save staging docker image id
2024/01/29 19:35:29.357948 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:35:29.378796 [INFO] c176d18fbf65

2024/01/29 19:35:29.378929 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:35:29.378936 [INFO] X-Ray is not enabled.
2024/01/29 19:35:29.378938 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:35:29.384207 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:35:29.385922 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:35:29.404052 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:35:29.404083 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:35:29.416343 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:35:29.424902 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:35:29.436684 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:35:29.513510 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:35:29.836800 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:35:29.836923 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:35:30.203824 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:35:30.224876 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:35:30.570128 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:35:30.593659 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:35:30.627634 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:35:30.976040 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:35:31.013929 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:35:31.410807 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:35:31.410848 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:35:31.425175 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:35:31.434923 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:35:31.525398 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:35:31.526883 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:35:31.527904 [INFO] Executing instruction: configure log streaming
2024/01/29 19:35:31.527913 [INFO] log streaming is not enabled
2024/01/29 19:35:31.527916 [INFO] disable log stream
2024/01/29 19:35:31.527928 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:35:31.549916 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:35:31.584031 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:35:31.584057 [INFO] Checking if logs need forced rotation
2024/01/29 19:35:31.584081 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:35:32.214687 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:35:32.770127 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:35:32.772007 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:35:33.153620 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:35:33.180781 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:35:33.180800 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:35:33.180817 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:35:33.682840 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:35:33.682876 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:35:33.682901 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:35:33.682905 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:35:33.682928 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:35:33.682941 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:35:33.682944 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:35:33.682949 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:35:33.682952 [INFO] stop X-Ray ...
2024/01/29 19:35:33.682964 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:35:33.697002 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:35:33.697034 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:35:33.709803 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:35:33.709837 [INFO] stop currently running containers...
2024/01/29 19:35:33.709849 [INFO] detected old app is not docker compose app
2024/01/29 19:35:33.709864 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:35:33.752405 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:35:33.768100 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:35:33.768135 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:35:33.781690 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:35:33.781723 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:35:33.796077 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:35:33.796126 [INFO] stopping current container: c15a9128e03a
2024/01/29 19:35:33.796138 [INFO] Running command /bin/sh -c docker ps | grep -q c15a9128e03a
2024/01/29 19:35:33.815477 [INFO] Running command /bin/sh -c docker ps | grep -q c15a9128e03a
2024/01/29 19:35:33.835437 [INFO] Pruning containers ...
2024/01/29 19:35:33.835459 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:35:33.854133 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:35:33.854164 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:35:33.872246 [INFO] Total reclaimed space: 0B

2024/01/29 19:35:33.872275 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:35:33.892014 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:35:33.892046 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:35:33.911141 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:35:33.911162 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:35:33.911275 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:35:33.911292 [INFO] detected new app is not docker compose app
2024/01/29 19:35:33.911345 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:35:34.412212 [INFO] b50f6b858152ff08cf85b71d885fdcd881cacc37eb943e6d7877223e5773ebf6

2024/01/29 19:35:39.416623 [INFO] Running command /bin/sh -c docker ps | grep -q b50f6b858152
2024/01/29 19:35:39.442605 [ERROR] docker container quit unexpectedly on 2024-01-29 19:35:39.442589216 +0000 UTC: Command /bin/sh -c docker ps | grep -q b50f6b858152 failed with error exit status 1
2024/01/29 19:35:39.442648 [INFO] Running command /bin/sh -c docker logs b50f6b858152
2024/01/29 19:35:39.471587 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b50f6b858152: Command /bin/sh -c docker ps | grep -q b50f6b858152 failed with error exit status 1 

2024/01/29 19:35:39.471605 [INFO] Executing cleanup logic
2024/01/29 19:35:39.472277 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:44:12.562225 [INFO] Starting...
2024/01/29 19:44:12.562267 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:44:12.562293 [INFO] reading event message file
2024/01/29 19:44:12.563435 [INFO] Engine received EB command userdata-exec

2024/01/29 19:44:12.573784 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:44:13.006812 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:44:13.473983 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:44:13.474048 [INFO] Engine command: (self-startup)

2024/01/29 19:44:13.474055 [INFO] Downloading EB Application...
2024/01/29 19:44:13.474057 [INFO] Region: eu-west-1
2024/01/29 19:44:13.474059 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:44:13.474062 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:44:13.474064 [INFO] Using manifest file name from command request
2024/01/29 19:44:13.474077 [INFO] Unable to get version manifest file.
2024/01/29 19:44:13.474079 [INFO] Downloading latest manifest available.
2024/01/29 19:44:13.474081 [INFO] Download latest app version manifest
2024/01/29 19:44:13.474203 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:44:13.514105 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:44:13.514304 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:44:13.525828 [INFO] Download successful124bytes downloaded
2024/01/29 19:44:13.526043 [INFO] Trying to read and parse version manifest...
2024/01/29 19:44:13.526124 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:44:13.548165 [INFO] Download successful264bytes downloaded
2024/01/29 19:44:13.548581 [INFO] Executing instruction: SyncClock
2024/01/29 19:44:13.548588 [INFO] Starting SyncClock
2024/01/29 19:44:13.548598 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:44:13.554835 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:44:04 2024
System time     : 0.000000798 seconds fast of NTP time
Last offset     : -0.000000980 seconds
RMS offset      : 0.000007305 seconds
Frequency       : 0.623 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.029 ppm
Root delay      : 0.000424854 seconds
Root dispersion : 0.000312012 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/29 19:44:13.554866 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:44:13.559493 [INFO] 200 OK

2024/01/29 19:44:13.559603 [INFO] Skipping Configure OS
2024/01/29 19:44:13.559610 [INFO] Skipping LockRepo
2024/01/29 19:44:13.559614 [INFO] Skipping GenerateEBBanner
2024/01/29 19:44:13.559618 [INFO] Skipping Install Process Manager
2024/01/29 19:44:13.559622 [INFO] Skipping install syslog
2024/01/29 19:44:13.559626 [INFO] Skipping install cron
2024/01/29 19:44:13.559641 [INFO] Skipping install proxy
2024/01/29 19:44:13.559647 [INFO] Skipping installhealthd
2024/01/29 19:44:13.559653 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:44:13.559657 [INFO] Skipping install X-Ray
2024/01/29 19:44:13.559661 [INFO] Skipping install Third Party License
2024/01/29 19:44:13.559666 [INFO] Skipping installSqsd
2024/01/29 19:44:13.559670 [INFO] Skipping bootstraphealthd
2024/01/29 19:44:13.559674 [INFO] Skipping Install yum packages
2024/01/29 19:44:13.559678 [INFO] Skipping install docker-compose
2024/01/29 19:44:13.559682 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:44:13.559685 [INFO] Skipping MarkBaked
2024/01/29 19:44:13.559689 [INFO] Skipping TuneSystemSettings
2024/01/29 19:44:13.559691 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:44:13.559694 [INFO] Initialize LogRotate files and directories
2024/01/29 19:44:13.574042 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:44:13.574052 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:44:13.574055 [INFO] Start cfn-hup
2024/01/29 19:44:13.574072 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:44:13.588118 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:44:13.598911 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:44:13.598944 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:44:13.598948 [INFO] Executing instruction: Start Docker
2024/01/29 19:44:13.598951 [INFO] Starting Docker...
2024/01/29 19:44:13.599037 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:44:13.600204 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:44:13.601476 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:44:13.934586 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:44:13.953065 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:44:13.953095 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:44:13.966444 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:44:13.976350 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:44:14.000656 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:44:14.080073 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:44:14.080174 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:44:14.494351 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:44:14.872219 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:44:14.885017 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:44:15.253822 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:44:15.264889 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:44:15.287923 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:44:15.301029 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:44:16.613707 [INFO] Skipping Setup Docker Options
2024/01/29 19:44:16.613732 [INFO] Skipping MarkBootstrapped
2024/01/29 19:44:16.613736 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:44:16.613849 [INFO] Starting SwitchCFNStack
2024/01/29 19:44:16.613855 [INFO] Executing instruction: stopSqsd
2024/01/29 19:44:16.613859 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:44:16.613862 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:44:16.613866 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:44:16.613888 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:44:17.074273 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:44:17.074397 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:44:17.074412 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:44:17.099364 [INFO] Pruning containers ...
2024/01/29 19:44:17.099398 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:44:17.124945 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS                     PORTS     NAMES
b50f6b858152   c176d18fbf65   "./main --environmen…"   8 minutes ago   Exited (1) 8 minutes ago             angry_raman

2024/01/29 19:44:17.124983 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:44:17.179682 [INFO] Deleted Containers:
b50f6b858152ff08cf85b71d885fdcd881cacc37eb943e6d7877223e5773ebf6

Total reclaimed space: 0B

2024/01/29 19:44:17.180295 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:44:17.202128 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:44:17.202356 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:44:17.205510 [INFO] application/json

2024/01/29 19:44:17.205531 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:44:17.282006 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:44:17.282177 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:44:17.283520 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:44:17.283545 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:44:17.283562 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:44:17.283566 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:44:17.283571 [INFO] Executing instruction: Generate environment file
2024/01/29 19:44:17.283599 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:44:17.283602 [INFO] start build docker app
2024/01/29 19:44:17.283958 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:44:17.283962 [INFO] fetching image and ports
2024/01/29 19:44:17.285383 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:44:17.285436 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:44:17.285444 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:44:17.285459 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:44:18.223078 [INFO] Login Succeeded

2024/01/29 19:44:18.223107 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:44:18.223115 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:44:18.223132 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:44:18.360852 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:44:18.360882 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:44:18.360887 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:44:18.360891 [INFO] start to build docker image
2024/01/29 19:44:18.360910 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:44:18.630116 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:44:18.630143 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:44:18.630148 [INFO] successfully build docker image
2024/01/29 19:44:18.630151 [INFO] save staging docker image id
2024/01/29 19:44:18.630165 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:44:18.654296 [INFO] c176d18fbf65

2024/01/29 19:44:18.654418 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:44:18.654424 [INFO] X-Ray is not enabled.
2024/01/29 19:44:18.654426 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:44:18.660533 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:44:18.665658 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:44:18.679646 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:44:18.679672 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:44:18.700970 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:44:18.711916 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:44:18.723235 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:44:18.797822 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:44:19.185841 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:44:19.185935 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:44:19.528009 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:44:19.540431 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:44:19.919692 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:44:19.930082 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:44:19.940168 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:44:20.295023 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:44:20.305581 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:44:20.629623 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:44:20.629665 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:44:20.644997 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:44:20.654381 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:44:20.741971 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:44:20.742944 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:44:20.743709 [INFO] Executing instruction: configure log streaming
2024/01/29 19:44:20.743719 [INFO] log streaming is not enabled
2024/01/29 19:44:20.743723 [INFO] disable log stream
2024/01/29 19:44:20.743738 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:44:20.764307 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:44:20.786454 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:44:20.786479 [INFO] Checking if logs need forced rotation
2024/01/29 19:44:20.786498 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:44:21.354942 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:44:21.927041 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:44:21.928997 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:44:21.973547 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:44:21.991451 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:44:21.991468 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:44:21.991485 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:44:22.419979 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:44:22.420015 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:44:22.420042 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:44:22.420046 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:44:22.420068 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:44:22.420081 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:44:22.420084 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:44:22.420089 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:44:22.420092 [INFO] stop X-Ray ...
2024/01/29 19:44:22.420104 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:44:22.434768 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:44:22.434800 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:44:22.451211 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:44:22.451240 [INFO] stop currently running containers...
2024/01/29 19:44:22.451251 [INFO] detected old app is not docker compose app
2024/01/29 19:44:22.451266 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:44:22.502495 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:44:22.517081 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:44:22.517146 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:44:22.531844 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:44:22.531873 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:44:22.547409 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:44:22.547553 [INFO] stopping current container: b50f6b858152
2024/01/29 19:44:22.547567 [INFO] Running command /bin/sh -c docker ps | grep -q b50f6b858152
2024/01/29 19:44:22.568027 [INFO] Running command /bin/sh -c docker ps | grep -q b50f6b858152
2024/01/29 19:44:22.588534 [INFO] Pruning containers ...
2024/01/29 19:44:22.588556 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:44:22.606342 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:44:22.606372 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:44:22.633387 [INFO] Total reclaimed space: 0B

2024/01/29 19:44:22.633432 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:44:22.654362 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:44:22.654413 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:44:22.672699 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:44:22.672719 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:44:22.672815 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:44:22.672832 [INFO] detected new app is not docker compose app
2024/01/29 19:44:22.672875 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:44:23.171023 [INFO] 9eafe91534f2dfe57f46cc7e1a9836c29fc1a3f874d2035c8e49368b61ac0c0a

2024/01/29 19:44:28.175234 [INFO] Running command /bin/sh -c docker ps | grep -q 9eafe91534f2
2024/01/29 19:44:28.214322 [ERROR] docker container quit unexpectedly on 2024-01-29 19:44:28.214308728 +0000 UTC: Command /bin/sh -c docker ps | grep -q 9eafe91534f2 failed with error exit status 1
2024/01/29 19:44:28.214350 [INFO] Running command /bin/sh -c docker logs 9eafe91534f2
2024/01/29 19:44:28.239938 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 9eafe91534f2: Command /bin/sh -c docker ps | grep -q 9eafe91534f2 failed with error exit status 1 

2024/01/29 19:44:28.239951 [INFO] Executing cleanup logic
2024/01/29 19:44:28.240166 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 20:01:33.325852 [INFO] Starting...
2024/01/29 20:01:33.325893 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 20:01:33.325917 [INFO] reading event message file
2024/01/29 20:01:33.327002 [INFO] Engine received EB command userdata-exec

2024/01/29 20:01:33.332480 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 20:01:33.802311 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 20:01:34.290264 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 20:01:34.290489 [INFO] Engine command: (self-startup)

2024/01/29 20:01:34.290502 [INFO] Downloading EB Application...
2024/01/29 20:01:34.290507 [INFO] Region: eu-west-1
2024/01/29 20:01:34.290510 [INFO] envID: e-8gmkc7rmw6
2024/01/29 20:01:34.290512 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 20:01:34.290515 [INFO] Using manifest file name from command request
2024/01/29 20:01:34.290530 [INFO] Unable to get version manifest file.
2024/01/29 20:01:34.290533 [INFO] Downloading latest manifest available.
2024/01/29 20:01:34.290546 [INFO] Download latest app version manifest
2024/01/29 20:01:34.290700 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 20:01:34.347278 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 20:01:34.347561 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 20:01:34.359365 [INFO] Download successful124bytes downloaded
2024/01/29 20:01:34.359515 [INFO] Trying to read and parse version manifest...
2024/01/29 20:01:34.359600 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:01:34.385765 [INFO] Download successful264bytes downloaded
2024/01/29 20:01:34.386136 [INFO] Executing instruction: SyncClock
2024/01/29 20:01:34.386141 [INFO] Starting SyncClock
2024/01/29 20:01:34.386151 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 20:01:34.395358 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 20:01:20 2024
System time     : 0.000000101 seconds fast of NTP time
Last offset     : +0.000001111 seconds
RMS offset      : 0.000002568 seconds
Frequency       : 0.588 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.043 ppm
Root delay      : 0.000471028 seconds
Root dispersion : 0.000315527 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 20:01:34.395384 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 20:01:34.402675 [INFO] 200 OK

2024/01/29 20:01:34.402812 [INFO] Skipping Configure OS
2024/01/29 20:01:34.402818 [INFO] Skipping LockRepo
2024/01/29 20:01:34.402822 [INFO] Skipping GenerateEBBanner
2024/01/29 20:01:34.402827 [INFO] Skipping Install Process Manager
2024/01/29 20:01:34.402831 [INFO] Skipping install syslog
2024/01/29 20:01:34.402834 [INFO] Skipping install cron
2024/01/29 20:01:34.402838 [INFO] Skipping install proxy
2024/01/29 20:01:34.402842 [INFO] Skipping installhealthd
2024/01/29 20:01:34.402845 [INFO] Skipping Install Log Streaming Manager
2024/01/29 20:01:34.402849 [INFO] Skipping install X-Ray
2024/01/29 20:01:34.402854 [INFO] Skipping install Third Party License
2024/01/29 20:01:34.402861 [INFO] Skipping installSqsd
2024/01/29 20:01:34.402867 [INFO] Skipping bootstraphealthd
2024/01/29 20:01:34.402872 [INFO] Skipping Install yum packages
2024/01/29 20:01:34.402876 [INFO] Skipping install docker-compose
2024/01/29 20:01:34.402880 [INFO] Skipping Configure Docker Daemon
2024/01/29 20:01:34.402884 [INFO] Skipping MarkBaked
2024/01/29 20:01:34.402888 [INFO] Skipping TuneSystemSettings
2024/01/29 20:01:34.402891 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 20:01:34.402893 [INFO] Initialize LogRotate files and directories
2024/01/29 20:01:34.417242 [INFO] Skipping BootstrapCFNHup
2024/01/29 20:01:34.417253 [INFO] Executing instruction: StartCFNHup
2024/01/29 20:01:34.417256 [INFO] Start cfn-hup
2024/01/29 20:01:34.417276 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 20:01:34.430363 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 20:01:34.460786 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 20:01:34.460821 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 20:01:34.460826 [INFO] Executing instruction: Start Docker
2024/01/29 20:01:34.460829 [INFO] Starting Docker...
2024/01/29 20:01:34.460912 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 20:01:34.465318 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 20:01:34.467129 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 20:01:34.931333 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:01:34.947720 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 20:01:34.947755 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:01:34.960952 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 20:01:34.970392 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:01:34.982051 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 20:01:35.068359 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 20:01:35.068397 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 20:01:35.426296 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:01:35.730923 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:01:35.743878 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:01:36.113383 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:01:36.122885 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:01:36.136249 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 20:01:36.146546 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 20:01:37.540980 [INFO] Skipping Setup Docker Options
2024/01/29 20:01:37.541010 [INFO] Skipping MarkBootstrapped
2024/01/29 20:01:37.541014 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 20:01:37.541125 [INFO] Starting SwitchCFNStack
2024/01/29 20:01:37.541131 [INFO] Executing instruction: stopSqsd
2024/01/29 20:01:37.541135 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 20:01:37.541139 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 20:01:37.541142 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 20:01:37.541165 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 20:01:37.985562 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 20:01:37.985599 [INFO] Executing instruction: StagedockerApplication
2024/01/29 20:01:37.985610 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 20:01:38.005742 [INFO] Pruning containers ...
2024/01/29 20:01:38.005783 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:01:38.026253 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
9eafe91534f2   c176d18fbf65   "./main --environmen…"   17 minutes ago   Exited (1) 17 minutes ago             priceless_mahavira

2024/01/29 20:01:38.026286 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 20:01:38.059298 [INFO] Deleted Containers:
9eafe91534f2dfe57f46cc7e1a9836c29fc1a3f874d2035c8e49368b61ac0c0a

Total reclaimed space: 0B

2024/01/29 20:01:38.059325 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:01:38.080748 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:01:38.080974 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 20:01:38.084410 [INFO] application/json

2024/01/29 20:01:38.084435 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 20:01:38.186077 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/29 20:01:38.186243 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 20:01:38.187558 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 20:01:38.187581 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 20:01:38.187600 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 20:01:38.187604 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 20:01:38.187610 [INFO] Executing instruction: Generate environment file
2024/01/29 20:01:38.187638 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 20:01:38.187641 [INFO] start build docker app
2024/01/29 20:01:38.188034 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 20:01:38.188038 [INFO] fetching image and ports
2024/01/29 20:01:38.189616 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 20:01:38.189664 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 20:01:38.189675 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 20:01:38.189686 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 20:01:39.372231 [INFO] Login Succeeded

2024/01/29 20:01:39.372257 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 20:01:39.372264 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 20:01:39.372281 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:01:39.511320 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 20:01:39.511340 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:01:39.511344 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:01:39.511347 [INFO] start to build docker image
2024/01/29 20:01:39.511386 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 20:01:39.804426 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 20:01:39.804447 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 20:01:39.804451 [INFO] successfully build docker image
2024/01/29 20:01:39.804454 [INFO] save staging docker image id
2024/01/29 20:01:39.804585 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 20:01:39.828022 [INFO] c176d18fbf65

2024/01/29 20:01:39.828154 [INFO] Executing instruction: configure X-Ray
2024/01/29 20:01:39.828161 [INFO] X-Ray is not enabled.
2024/01/29 20:01:39.828164 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 20:01:39.835080 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 20:01:39.836642 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:01:39.851538 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 20:01:39.851571 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:01:39.867296 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 20:01:39.891246 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:01:39.909239 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 20:01:39.968906 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 20:01:40.322487 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 20:01:40.322563 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:01:40.604420 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:01:40.615784 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:01:40.995803 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:01:41.005872 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 20:01:41.015889 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 20:01:41.381074 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 20:01:41.391215 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 20:01:41.775385 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 20:01:41.775427 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:01:41.793782 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 20:01:41.808774 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 20:01:41.884491 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 20:01:41.885751 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 20:01:41.886711 [INFO] Executing instruction: configure log streaming
2024/01/29 20:01:41.886721 [INFO] log streaming is not enabled
2024/01/29 20:01:41.886724 [INFO] disable log stream
2024/01/29 20:01:41.886744 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 20:01:41.906391 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 20:01:41.926133 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 20:01:41.926154 [INFO] Checking if logs need forced rotation
2024/01/29 20:01:41.926177 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 20:01:42.467501 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 20:01:43.053961 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 20:01:43.059183 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 20:01:43.377545 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 20:01:43.396728 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 20:01:43.396744 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 20:01:43.396756 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 20:01:43.833241 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 20:01:43.833355 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 20:01:43.833390 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 20:01:43.833393 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 20:01:43.833418 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 20:01:43.833431 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 20:01:43.833434 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 20:01:43.833440 [INFO] Executing instruction: stop X-Ray
2024/01/29 20:01:43.833443 [INFO] stop X-Ray ...
2024/01/29 20:01:43.833455 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 20:01:43.847686 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 20:01:43.847718 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 20:01:43.863045 [INFO] Executing instruction: Run Docker Container
2024/01/29 20:01:43.863077 [INFO] stop currently running containers...
2024/01/29 20:01:43.863088 [INFO] detected old app is not docker compose app
2024/01/29 20:01:43.863103 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 20:01:43.902472 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 20:01:43.917083 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 20:01:43.917116 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 20:01:43.930376 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 20:01:43.930409 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 20:01:43.944891 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 20:01:43.944941 [INFO] stopping current container: 9eafe91534f2
2024/01/29 20:01:43.944953 [INFO] Running command /bin/sh -c docker ps | grep -q 9eafe91534f2
2024/01/29 20:01:43.966771 [INFO] Running command /bin/sh -c docker ps | grep -q 9eafe91534f2
2024/01/29 20:01:43.986145 [INFO] Pruning containers ...
2024/01/29 20:01:43.986176 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:01:44.004613 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:01:44.004648 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 20:01:44.025975 [INFO] Total reclaimed space: 0B

2024/01/29 20:01:44.026004 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:01:44.047365 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:01:44.047395 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 20:01:44.066831 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 20:01:44.066852 [INFO] Removing /var/app/current/ if it exists
2024/01/29 20:01:44.067000 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 20:01:44.067041 [INFO] detected new app is not docker compose app
2024/01/29 20:01:44.067091 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 20:01:44.487513 [INFO] 5c0225af127d0be2e437440bebc12f9d9a630f4428645d7bd9678d3ce9c0842f

2024/01/29 20:01:49.491860 [INFO] Running command /bin/sh -c docker ps | grep -q 5c0225af127d
2024/01/29 20:01:49.533514 [ERROR] docker container quit unexpectedly on 2024-01-29 20:01:49.533503533 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5c0225af127d failed with error exit status 1
2024/01/29 20:01:49.533546 [INFO] Running command /bin/sh -c docker logs 5c0225af127d
2024/01/29 20:01:49.561226 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5c0225af127d: Command /bin/sh -c docker ps | grep -q 5c0225af127d failed with error exit status 1 

2024/01/29 20:01:49.561237 [INFO] Executing cleanup logic
2024/01/29 20:01:49.561590 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 20:35:58.575115 [INFO] Starting...
2024/01/29 20:35:58.575156 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 20:35:58.575182 [INFO] reading event message file
2024/01/29 20:35:58.577614 [INFO] Engine received EB command userdata-exec

2024/01/29 20:35:58.590928 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 20:35:58.968833 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 20:35:59.367224 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 20:35:59.367570 [INFO] Engine command: (self-startup)

2024/01/29 20:35:59.367676 [INFO] Downloading EB Application...
2024/01/29 20:35:59.367683 [INFO] Region: eu-west-1
2024/01/29 20:35:59.367686 [INFO] envID: e-8gmkc7rmw6
2024/01/29 20:35:59.367697 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 20:35:59.367701 [INFO] Using manifest file name from command request
2024/01/29 20:35:59.367717 [INFO] Unable to get version manifest file.
2024/01/29 20:35:59.367720 [INFO] Downloading latest manifest available.
2024/01/29 20:35:59.367724 [INFO] Download latest app version manifest
2024/01/29 20:35:59.367923 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 20:35:59.412659 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 20:35:59.412846 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 20:35:59.424256 [INFO] Download successful124bytes downloaded
2024/01/29 20:35:59.424385 [INFO] Trying to read and parse version manifest...
2024/01/29 20:35:59.424457 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:35:59.460570 [INFO] Download successful264bytes downloaded
2024/01/29 20:35:59.460934 [INFO] Executing instruction: SyncClock
2024/01/29 20:35:59.460939 [INFO] Starting SyncClock
2024/01/29 20:35:59.460949 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 20:35:59.466736 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 20:35:52 2024
System time     : 0.000006657 seconds fast of NTP time
Last offset     : +0.000008625 seconds
RMS offset      : 0.000014629 seconds
Frequency       : 1.224 ppm fast
Residual freq   : +0.055 ppm
Skew            : 0.794 ppm
Root delay      : 0.000444479 seconds
Root dispersion : 0.000558333 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 20:35:59.466759 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 20:35:59.471062 [INFO] 200 OK

2024/01/29 20:35:59.471192 [INFO] Skipping Configure OS
2024/01/29 20:35:59.471216 [INFO] Skipping LockRepo
2024/01/29 20:35:59.471221 [INFO] Skipping GenerateEBBanner
2024/01/29 20:35:59.471225 [INFO] Skipping Install Process Manager
2024/01/29 20:35:59.471237 [INFO] Skipping install syslog
2024/01/29 20:35:59.471241 [INFO] Skipping install cron
2024/01/29 20:35:59.471248 [INFO] Skipping install proxy
2024/01/29 20:35:59.471252 [INFO] Skipping installhealthd
2024/01/29 20:35:59.471256 [INFO] Skipping Install Log Streaming Manager
2024/01/29 20:35:59.471260 [INFO] Skipping install X-Ray
2024/01/29 20:35:59.471264 [INFO] Skipping install Third Party License
2024/01/29 20:35:59.471269 [INFO] Skipping installSqsd
2024/01/29 20:35:59.471273 [INFO] Skipping bootstraphealthd
2024/01/29 20:35:59.471276 [INFO] Skipping Install yum packages
2024/01/29 20:35:59.471280 [INFO] Skipping install docker-compose
2024/01/29 20:35:59.471284 [INFO] Skipping Configure Docker Daemon
2024/01/29 20:35:59.471288 [INFO] Skipping MarkBaked
2024/01/29 20:35:59.471292 [INFO] Skipping TuneSystemSettings
2024/01/29 20:35:59.471294 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 20:35:59.471298 [INFO] Initialize LogRotate files and directories
2024/01/29 20:35:59.491706 [INFO] Skipping BootstrapCFNHup
2024/01/29 20:35:59.491725 [INFO] Executing instruction: StartCFNHup
2024/01/29 20:35:59.491731 [INFO] Start cfn-hup
2024/01/29 20:35:59.491756 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 20:35:59.520511 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 20:35:59.533989 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 20:35:59.534024 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 20:35:59.534028 [INFO] Executing instruction: Start Docker
2024/01/29 20:35:59.534089 [INFO] Starting Docker...
2024/01/29 20:35:59.534178 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 20:35:59.535252 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 20:35:59.536177 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 20:35:59.902889 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:35:59.918337 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 20:35:59.918377 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:35:59.950528 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 20:35:59.973378 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:35:59.985757 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 20:36:00.153978 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 20:36:00.154072 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 20:36:00.499081 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:36:00.810710 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:36:00.826773 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:36:01.235792 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:36:01.258993 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:36:01.296715 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 20:36:01.309169 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 20:36:03.046236 [INFO] Skipping Setup Docker Options
2024/01/29 20:36:03.046268 [INFO] Skipping MarkBootstrapped
2024/01/29 20:36:03.046272 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 20:36:03.046568 [INFO] Starting SwitchCFNStack
2024/01/29 20:36:03.046576 [INFO] Executing instruction: stopSqsd
2024/01/29 20:36:03.046580 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 20:36:03.046588 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 20:36:03.046662 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 20:36:03.046680 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 20:36:03.576060 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 20:36:03.576083 [INFO] Executing instruction: StagedockerApplication
2024/01/29 20:36:03.576094 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 20:36:03.624907 [INFO] Pruning containers ...
2024/01/29 20:36:03.624940 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:36:03.645715 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
5c0225af127d   c176d18fbf65   "./main --environmen…"   34 minutes ago   Exited (1) 34 minutes ago             objective_payne

2024/01/29 20:36:03.645747 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 20:36:03.674708 [INFO] Deleted Containers:
5c0225af127d0be2e437440bebc12f9d9a630f4428645d7bd9678d3ce9c0842f

Total reclaimed space: 0B

2024/01/29 20:36:03.674732 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:36:03.696403 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:36:03.696766 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 20:36:03.699720 [INFO] application/json

2024/01/29 20:36:03.699744 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 20:36:03.773994 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 20:36:03.774166 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 20:36:03.775528 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 20:36:03.775556 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 20:36:03.775575 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 20:36:03.775579 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 20:36:03.775589 [INFO] Executing instruction: Generate environment file
2024/01/29 20:36:03.775617 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 20:36:03.775621 [INFO] start build docker app
2024/01/29 20:36:03.776095 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 20:36:03.776098 [INFO] fetching image and ports
2024/01/29 20:36:03.777777 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 20:36:03.777845 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 20:36:03.777854 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 20:36:03.777871 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 20:36:04.803717 [INFO] Login Succeeded

2024/01/29 20:36:04.803735 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 20:36:04.803741 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 20:36:04.803760 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:36:04.964798 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 20:36:04.964860 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:36:04.964868 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:36:04.964871 [INFO] start to build docker image
2024/01/29 20:36:04.964893 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 20:36:05.343737 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 20:36:05.343762 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 20:36:05.343766 [INFO] successfully build docker image
2024/01/29 20:36:05.343769 [INFO] save staging docker image id
2024/01/29 20:36:05.343781 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 20:36:05.366375 [INFO] c176d18fbf65

2024/01/29 20:36:05.366486 [INFO] Executing instruction: configure X-Ray
2024/01/29 20:36:05.366491 [INFO] X-Ray is not enabled.
2024/01/29 20:36:05.366495 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 20:36:05.372080 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 20:36:05.373686 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:36:05.385495 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 20:36:05.385523 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:36:05.396636 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 20:36:05.405918 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:36:05.416625 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 20:36:05.489521 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 20:36:05.804974 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 20:36:05.805197 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:36:06.215346 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:36:06.244623 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:36:06.606094 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:36:06.615816 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 20:36:06.625203 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 20:36:06.899948 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 20:36:06.909910 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 20:36:07.205260 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 20:36:07.205295 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:36:07.225555 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 20:36:07.239314 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 20:36:07.297188 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 20:36:07.298646 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 20:36:07.300360 [INFO] Executing instruction: configure log streaming
2024/01/29 20:36:07.300372 [INFO] log streaming is not enabled
2024/01/29 20:36:07.300375 [INFO] disable log stream
2024/01/29 20:36:07.300389 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 20:36:07.324494 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 20:36:07.346976 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 20:36:07.347000 [INFO] Checking if logs need forced rotation
2024/01/29 20:36:07.347019 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 20:36:07.912836 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 20:36:08.388468 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 20:36:08.390121 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 20:36:08.631106 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 20:36:08.649183 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 20:36:08.649198 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 20:36:08.649219 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 20:36:09.051309 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 20:36:09.051344 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 20:36:09.051403 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 20:36:09.051409 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 20:36:09.051432 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 20:36:09.051445 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 20:36:09.051448 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 20:36:09.051464 [INFO] Executing instruction: stop X-Ray
2024/01/29 20:36:09.051467 [INFO] stop X-Ray ...
2024/01/29 20:36:09.051480 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 20:36:09.065341 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 20:36:09.065373 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 20:36:09.079878 [INFO] Executing instruction: Run Docker Container
2024/01/29 20:36:09.079922 [INFO] stop currently running containers...
2024/01/29 20:36:09.079932 [INFO] detected old app is not docker compose app
2024/01/29 20:36:09.079946 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 20:36:09.122437 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 20:36:09.137596 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 20:36:09.137640 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 20:36:09.151390 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 20:36:09.151424 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 20:36:09.164797 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 20:36:09.164847 [INFO] stopping current container: 5c0225af127d
2024/01/29 20:36:09.164860 [INFO] Running command /bin/sh -c docker ps | grep -q 5c0225af127d
2024/01/29 20:36:09.184030 [INFO] Running command /bin/sh -c docker ps | grep -q 5c0225af127d
2024/01/29 20:36:09.207415 [INFO] Pruning containers ...
2024/01/29 20:36:09.207437 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:36:09.224447 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:36:09.224479 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 20:36:09.243039 [INFO] Total reclaimed space: 0B

2024/01/29 20:36:09.243062 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:36:09.262840 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:36:09.262873 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 20:36:09.287336 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 20:36:09.287356 [INFO] Removing /var/app/current/ if it exists
2024/01/29 20:36:09.287455 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 20:36:09.287472 [INFO] detected new app is not docker compose app
2024/01/29 20:36:09.287519 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 20:36:09.698138 [INFO] 7dbb83b76a53b90cf74b8af9dec153e61112713c7c7e6300feb7102dc48f94e6

2024/01/29 20:36:14.702396 [INFO] Running command /bin/sh -c docker ps | grep -q 7dbb83b76a53
2024/01/29 20:36:14.724280 [ERROR] docker container quit unexpectedly on 2024-01-29 20:36:14.724268626 +0000 UTC: Command /bin/sh -c docker ps | grep -q 7dbb83b76a53 failed with error exit status 1
2024/01/29 20:36:14.724318 [INFO] Running command /bin/sh -c docker logs 7dbb83b76a53
2024/01/29 20:36:14.747007 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 7dbb83b76a53: Command /bin/sh -c docker ps | grep -q 7dbb83b76a53 failed with error exit status 1 

2024/01/29 20:36:14.747017 [INFO] Executing cleanup logic
2024/01/29 20:36:14.747281 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 21:36:15.835059 [INFO] Starting...
2024/01/29 21:36:15.835101 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 21:36:15.835127 [INFO] reading event message file
2024/01/29 21:36:15.835965 [INFO] Engine received EB command userdata-exec

2024/01/29 21:36:15.866814 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 21:36:16.265818 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 21:36:16.707410 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 21:36:16.707524 [INFO] Engine command: (self-startup)

2024/01/29 21:36:16.707533 [INFO] Downloading EB Application...
2024/01/29 21:36:16.707541 [INFO] Region: eu-west-1
2024/01/29 21:36:16.707544 [INFO] envID: e-8gmkc7rmw6
2024/01/29 21:36:16.707548 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 21:36:16.707556 [INFO] Using manifest file name from command request
2024/01/29 21:36:16.707580 [INFO] Unable to get version manifest file.
2024/01/29 21:36:16.707592 [INFO] Downloading latest manifest available.
2024/01/29 21:36:16.707600 [INFO] Download latest app version manifest
2024/01/29 21:36:16.707862 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 21:36:16.754207 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 21:36:16.754511 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 21:36:16.765738 [INFO] Download successful124bytes downloaded
2024/01/29 21:36:16.766018 [INFO] Trying to read and parse version manifest...
2024/01/29 21:36:16.766098 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 21:36:16.808831 [INFO] Download successful264bytes downloaded
2024/01/29 21:36:16.812482 [INFO] Executing instruction: SyncClock
2024/01/29 21:36:16.812571 [INFO] Starting SyncClock
2024/01/29 21:36:16.812658 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 21:36:16.823110 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 21:36:14 2024
System time     : 0.000003646 seconds fast of NTP time
Last offset     : +0.000004417 seconds
RMS offset      : 0.000005825 seconds
Frequency       : 0.345 ppm fast
Residual freq   : +0.005 ppm
Skew            : 0.407 ppm
Root delay      : 0.000435753 seconds
Root dispersion : 0.000497742 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/29 21:36:16.823138 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 21:36:16.828500 [INFO] 200 OK

2024/01/29 21:36:16.828926 [INFO] Skipping Configure OS
2024/01/29 21:36:16.828942 [INFO] Skipping LockRepo
2024/01/29 21:36:16.828981 [INFO] Skipping GenerateEBBanner
2024/01/29 21:36:16.828986 [INFO] Skipping Install Process Manager
2024/01/29 21:36:16.828990 [INFO] Skipping install syslog
2024/01/29 21:36:16.828994 [INFO] Skipping install cron
2024/01/29 21:36:16.828998 [INFO] Skipping install proxy
2024/01/29 21:36:16.829002 [INFO] Skipping installhealthd
2024/01/29 21:36:16.829007 [INFO] Skipping Install Log Streaming Manager
2024/01/29 21:36:16.829014 [INFO] Skipping install X-Ray
2024/01/29 21:36:16.829020 [INFO] Skipping install Third Party License
2024/01/29 21:36:16.829027 [INFO] Skipping installSqsd
2024/01/29 21:36:16.829059 [INFO] Skipping bootstraphealthd
2024/01/29 21:36:16.829066 [INFO] Skipping Install yum packages
2024/01/29 21:36:16.829070 [INFO] Skipping install docker-compose
2024/01/29 21:36:16.829074 [INFO] Skipping Configure Docker Daemon
2024/01/29 21:36:16.829078 [INFO] Skipping MarkBaked
2024/01/29 21:36:16.829082 [INFO] Skipping TuneSystemSettings
2024/01/29 21:36:16.829085 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 21:36:16.829088 [INFO] Initialize LogRotate files and directories
2024/01/29 21:36:16.844691 [INFO] Skipping BootstrapCFNHup
2024/01/29 21:36:16.844702 [INFO] Executing instruction: StartCFNHup
2024/01/29 21:36:16.844705 [INFO] Start cfn-hup
2024/01/29 21:36:16.844722 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 21:36:16.861622 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 21:36:16.870607 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 21:36:16.870631 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 21:36:16.870634 [INFO] Executing instruction: Start Docker
2024/01/29 21:36:16.870636 [INFO] Starting Docker...
2024/01/29 21:36:16.870698 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 21:36:16.871623 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 21:36:16.872818 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 21:36:17.171857 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 21:36:17.186980 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 21:36:17.187052 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 21:36:17.197719 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 21:36:17.205723 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 21:36:17.216261 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 21:36:17.316849 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 21:36:17.316916 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 21:36:17.609193 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 21:36:17.925989 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 21:36:17.943415 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 21:36:18.234765 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 21:36:18.244867 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 21:36:18.264906 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 21:36:18.273758 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 21:36:19.578741 [INFO] Skipping Setup Docker Options
2024/01/29 21:36:19.578765 [INFO] Skipping MarkBootstrapped
2024/01/29 21:36:19.578770 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 21:36:19.578958 [INFO] Starting SwitchCFNStack
2024/01/29 21:36:19.578965 [INFO] Executing instruction: stopSqsd
2024/01/29 21:36:19.578969 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 21:36:19.578973 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 21:36:19.578977 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 21:36:19.578997 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 21:36:20.151318 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 21:36:20.151341 [INFO] Executing instruction: StagedockerApplication
2024/01/29 21:36:20.151385 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 21:36:20.173104 [INFO] Pruning containers ...
2024/01/29 21:36:20.173141 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 21:36:20.197741 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
7dbb83b76a53   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             dazzling_jackson

2024/01/29 21:36:20.197784 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 21:36:20.223150 [INFO] Deleted Containers:
7dbb83b76a53b90cf74b8af9dec153e61112713c7c7e6300feb7102dc48f94e6

Total reclaimed space: 0B

2024/01/29 21:36:20.223172 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 21:36:20.242053 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 21:36:20.242475 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 21:36:20.256409 [INFO] application/json

2024/01/29 21:36:20.256690 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 21:36:20.328098 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 21:36:20.328281 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 21:36:20.333601 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 21:36:20.333649 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 21:36:20.333670 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 21:36:20.333674 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 21:36:20.333679 [INFO] Executing instruction: Generate environment file
2024/01/29 21:36:20.333711 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 21:36:20.333715 [INFO] start build docker app
2024/01/29 21:36:20.334177 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 21:36:20.334180 [INFO] fetching image and ports
2024/01/29 21:36:20.336342 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 21:36:20.336403 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 21:36:20.336411 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 21:36:20.336421 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 21:36:21.189752 [INFO] Login Succeeded

2024/01/29 21:36:21.189768 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 21:36:21.189775 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 21:36:21.189791 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 21:36:21.351351 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 21:36:21.351393 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 21:36:21.351398 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 21:36:21.351400 [INFO] start to build docker image
2024/01/29 21:36:21.351415 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 21:36:21.626647 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 21:36:21.626672 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 21:36:21.626681 [INFO] successfully build docker image
2024/01/29 21:36:21.626684 [INFO] save staging docker image id
2024/01/29 21:36:21.626699 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 21:36:21.653992 [INFO] c176d18fbf65

2024/01/29 21:36:21.654262 [INFO] Executing instruction: configure X-Ray
2024/01/29 21:36:21.654271 [INFO] X-Ray is not enabled.
2024/01/29 21:36:21.654274 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 21:36:21.660218 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 21:36:21.662358 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 21:36:21.674344 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 21:36:21.674375 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 21:36:21.684638 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 21:36:21.693168 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 21:36:21.710992 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 21:36:21.777335 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 21:36:22.059202 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 21:36:22.059379 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 21:36:22.366181 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 21:36:22.377157 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 21:36:22.728910 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 21:36:22.738839 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 21:36:22.747582 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 21:36:23.078986 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 21:36:23.089097 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 21:36:23.428652 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 21:36:23.428688 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 21:36:23.441046 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 21:36:23.449309 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 21:36:23.523699 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 21:36:23.524848 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 21:36:23.526565 [INFO] Executing instruction: configure log streaming
2024/01/29 21:36:23.526574 [INFO] log streaming is not enabled
2024/01/29 21:36:23.526578 [INFO] disable log stream
2024/01/29 21:36:23.526752 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 21:36:23.550794 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 21:36:23.570198 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 21:36:23.570222 [INFO] Checking if logs need forced rotation
2024/01/29 21:36:23.570241 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 21:36:24.133198 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 21:36:24.658299 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 21:36:24.662064 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 21:36:24.920367 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 21:36:24.939685 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 21:36:24.939700 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 21:36:24.939718 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 21:36:25.381165 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 21:36:25.381193 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 21:36:25.381216 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 21:36:25.381219 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 21:36:25.381239 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 21:36:25.381250 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 21:36:25.381254 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 21:36:25.381260 [INFO] Executing instruction: stop X-Ray
2024/01/29 21:36:25.381263 [INFO] stop X-Ray ...
2024/01/29 21:36:25.381279 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 21:36:25.398516 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 21:36:25.398553 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 21:36:25.414810 [INFO] Executing instruction: Run Docker Container
2024/01/29 21:36:25.414843 [INFO] stop currently running containers...
2024/01/29 21:36:25.414854 [INFO] detected old app is not docker compose app
2024/01/29 21:36:25.414869 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 21:36:25.452471 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 21:36:25.468803 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 21:36:25.468838 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 21:36:25.487486 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 21:36:25.487532 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 21:36:25.503936 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 21:36:25.503991 [INFO] stopping current container: 7dbb83b76a53
2024/01/29 21:36:25.504002 [INFO] Running command /bin/sh -c docker ps | grep -q 7dbb83b76a53
2024/01/29 21:36:25.525696 [INFO] Running command /bin/sh -c docker ps | grep -q 7dbb83b76a53
2024/01/29 21:36:25.551643 [INFO] Pruning containers ...
2024/01/29 21:36:25.551666 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 21:36:25.580388 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 21:36:25.580420 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 21:36:25.602068 [INFO] Total reclaimed space: 0B

2024/01/29 21:36:25.602096 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 21:36:25.621787 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 21:36:25.621822 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 21:36:25.644063 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 21:36:25.644087 [INFO] Removing /var/app/current/ if it exists
2024/01/29 21:36:25.644185 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 21:36:25.644202 [INFO] detected new app is not docker compose app
2024/01/29 21:36:25.644256 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 21:36:26.049723 [INFO] a5efe7391275e450c0e725a3cd033cfa83478892d5833a5dfdf81e9dfd1688ff

2024/01/29 21:36:31.050068 [INFO] Running command /bin/sh -c docker ps | grep -q a5efe7391275
2024/01/29 21:36:31.076597 [ERROR] docker container quit unexpectedly on 2024-01-29 21:36:31.076584577 +0000 UTC: Command /bin/sh -c docker ps | grep -q a5efe7391275 failed with error exit status 1
2024/01/29 21:36:31.076622 [INFO] Running command /bin/sh -c docker logs a5efe7391275
2024/01/29 21:36:31.113609 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container a5efe7391275: Command /bin/sh -c docker ps | grep -q a5efe7391275 failed with error exit status 1 

2024/01/29 21:36:31.113809 [INFO] Executing cleanup logic
2024/01/29 21:36:31.115424 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 22:36:32.053553 [INFO] Starting...
2024/01/29 22:36:32.053592 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 22:36:32.053624 [INFO] reading event message file
2024/01/29 22:36:32.054428 [INFO] Engine received EB command userdata-exec

2024/01/29 22:36:32.062911 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 22:36:32.495052 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 22:36:33.008521 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 22:36:33.008607 [INFO] Engine command: (self-startup)

2024/01/29 22:36:33.008612 [INFO] Downloading EB Application...
2024/01/29 22:36:33.008614 [INFO] Region: eu-west-1
2024/01/29 22:36:33.008616 [INFO] envID: e-8gmkc7rmw6
2024/01/29 22:36:33.008619 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 22:36:33.008621 [INFO] Using manifest file name from command request
2024/01/29 22:36:33.008634 [INFO] Unable to get version manifest file.
2024/01/29 22:36:33.008636 [INFO] Downloading latest manifest available.
2024/01/29 22:36:33.008638 [INFO] Download latest app version manifest
2024/01/29 22:36:33.008763 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 22:36:33.044683 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 22:36:33.044857 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 22:36:33.055389 [INFO] Download successful124bytes downloaded
2024/01/29 22:36:33.055532 [INFO] Trying to read and parse version manifest...
2024/01/29 22:36:33.055609 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 22:36:33.091250 [INFO] Download successful264bytes downloaded
2024/01/29 22:36:33.091628 [INFO] Executing instruction: SyncClock
2024/01/29 22:36:33.091636 [INFO] Starting SyncClock
2024/01/29 22:36:33.091649 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 22:36:33.097712 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 22:36:20 2024
System time     : 0.000002731 seconds fast of NTP time
Last offset     : +0.000008653 seconds
RMS offset      : 0.000010572 seconds
Frequency       : 0.536 ppm fast
Residual freq   : -0.057 ppm
Skew            : 0.621 ppm
Root delay      : 0.000464752 seconds
Root dispersion : 0.000428616 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 22:36:33.097732 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 22:36:33.101909 [INFO] 200 OK

2024/01/29 22:36:33.102012 [INFO] Skipping Configure OS
2024/01/29 22:36:33.102018 [INFO] Skipping LockRepo
2024/01/29 22:36:33.102030 [INFO] Skipping GenerateEBBanner
2024/01/29 22:36:33.102034 [INFO] Skipping Install Process Manager
2024/01/29 22:36:33.102038 [INFO] Skipping install syslog
2024/01/29 22:36:33.102042 [INFO] Skipping install cron
2024/01/29 22:36:33.102046 [INFO] Skipping install proxy
2024/01/29 22:36:33.102050 [INFO] Skipping installhealthd
2024/01/29 22:36:33.102054 [INFO] Skipping Install Log Streaming Manager
2024/01/29 22:36:33.102059 [INFO] Skipping install X-Ray
2024/01/29 22:36:33.102064 [INFO] Skipping install Third Party License
2024/01/29 22:36:33.102091 [INFO] Skipping installSqsd
2024/01/29 22:36:33.102095 [INFO] Skipping bootstraphealthd
2024/01/29 22:36:33.102099 [INFO] Skipping Install yum packages
2024/01/29 22:36:33.102103 [INFO] Skipping install docker-compose
2024/01/29 22:36:33.102107 [INFO] Skipping Configure Docker Daemon
2024/01/29 22:36:33.102111 [INFO] Skipping MarkBaked
2024/01/29 22:36:33.102115 [INFO] Skipping TuneSystemSettings
2024/01/29 22:36:33.102117 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 22:36:33.102120 [INFO] Initialize LogRotate files and directories
2024/01/29 22:36:33.117741 [INFO] Skipping BootstrapCFNHup
2024/01/29 22:36:33.117753 [INFO] Executing instruction: StartCFNHup
2024/01/29 22:36:33.117756 [INFO] Start cfn-hup
2024/01/29 22:36:33.117780 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 22:36:33.171066 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 22:36:33.184779 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 22:36:33.184812 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 22:36:33.184816 [INFO] Executing instruction: Start Docker
2024/01/29 22:36:33.184819 [INFO] Starting Docker...
2024/01/29 22:36:33.184895 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 22:36:33.188309 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 22:36:33.189321 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 22:36:33.671799 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 22:36:33.687564 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 22:36:33.687599 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 22:36:33.698513 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 22:36:33.707572 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 22:36:33.718092 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 22:36:33.757179 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 22:36:33.757212 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 22:36:34.072826 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 22:36:34.470235 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 22:36:34.490826 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 22:36:34.851184 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 22:36:34.860828 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 22:36:34.875234 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 22:36:34.884962 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 22:36:36.139738 [INFO] Skipping Setup Docker Options
2024/01/29 22:36:36.139762 [INFO] Skipping MarkBootstrapped
2024/01/29 22:36:36.139766 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 22:36:36.139879 [INFO] Starting SwitchCFNStack
2024/01/29 22:36:36.139885 [INFO] Executing instruction: stopSqsd
2024/01/29 22:36:36.139891 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 22:36:36.139895 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 22:36:36.139899 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 22:36:36.139916 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 22:36:36.695848 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 22:36:36.695877 [INFO] Executing instruction: StagedockerApplication
2024/01/29 22:36:36.695890 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 22:36:36.740336 [INFO] Pruning containers ...
2024/01/29 22:36:36.740369 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 22:36:36.772122 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
a5efe7391275   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             stupefied_lewin

2024/01/29 22:36:36.772217 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 22:36:36.800286 [INFO] Deleted Containers:
a5efe7391275e450c0e725a3cd033cfa83478892d5833a5dfdf81e9dfd1688ff

Total reclaimed space: 0B

2024/01/29 22:36:36.800310 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 22:36:36.819835 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 22:36:36.820052 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 22:36:36.822989 [INFO] application/json

2024/01/29 22:36:36.823011 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 22:36:36.896103 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 22:36:36.896262 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 22:36:36.897315 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 22:36:36.897335 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 22:36:36.897348 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 22:36:36.897350 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 22:36:36.897354 [INFO] Executing instruction: Generate environment file
2024/01/29 22:36:36.897377 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 22:36:36.897380 [INFO] start build docker app
2024/01/29 22:36:36.897817 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 22:36:36.897822 [INFO] fetching image and ports
2024/01/29 22:36:36.903003 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 22:36:36.903080 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 22:36:36.903311 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 22:36:36.903340 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 22:36:37.951598 [INFO] Login Succeeded

2024/01/29 22:36:37.951615 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 22:36:37.951621 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 22:36:37.951688 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 22:36:38.096550 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 22:36:38.096571 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 22:36:38.096575 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 22:36:38.096578 [INFO] start to build docker image
2024/01/29 22:36:38.096592 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 22:36:38.391892 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 22:36:38.391915 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 22:36:38.391920 [INFO] successfully build docker image
2024/01/29 22:36:38.391923 [INFO] save staging docker image id
2024/01/29 22:36:38.391936 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 22:36:38.415569 [INFO] c176d18fbf65

2024/01/29 22:36:38.415779 [INFO] Executing instruction: configure X-Ray
2024/01/29 22:36:38.415786 [INFO] X-Ray is not enabled.
2024/01/29 22:36:38.415790 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 22:36:38.423682 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 22:36:38.425484 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 22:36:38.439973 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 22:36:38.440005 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 22:36:38.450276 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 22:36:38.459793 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 22:36:38.470483 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 22:36:38.540276 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 22:36:38.871947 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 22:36:38.872178 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 22:36:39.245459 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 22:36:39.256531 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 22:36:39.564295 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 22:36:39.574597 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 22:36:39.583683 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 22:36:39.912238 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 22:36:39.925961 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 22:36:40.228997 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 22:36:40.229031 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 22:36:40.243595 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 22:36:40.254868 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 22:36:40.341159 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 22:36:40.342261 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 22:36:40.343176 [INFO] Executing instruction: configure log streaming
2024/01/29 22:36:40.343186 [INFO] log streaming is not enabled
2024/01/29 22:36:40.343189 [INFO] disable log stream
2024/01/29 22:36:40.343224 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 22:36:40.364525 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 22:36:40.389580 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 22:36:40.389607 [INFO] Checking if logs need forced rotation
2024/01/29 22:36:40.389626 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 22:36:40.947755 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 22:36:41.452186 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 22:36:41.454040 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 22:36:41.906229 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 22:36:41.929010 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 22:36:41.929027 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 22:36:41.929045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 22:36:42.304777 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 22:36:42.304815 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 22:36:42.304842 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 22:36:42.304845 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 22:36:42.304870 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 22:36:42.304884 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 22:36:42.304887 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 22:36:42.304893 [INFO] Executing instruction: stop X-Ray
2024/01/29 22:36:42.304897 [INFO] stop X-Ray ...
2024/01/29 22:36:42.304914 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 22:36:42.320624 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 22:36:42.320665 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 22:36:42.342842 [INFO] Executing instruction: Run Docker Container
2024/01/29 22:36:42.342873 [INFO] stop currently running containers...
2024/01/29 22:36:42.342884 [INFO] detected old app is not docker compose app
2024/01/29 22:36:42.342899 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 22:36:42.392568 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 22:36:42.407813 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 22:36:42.407846 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 22:36:42.421543 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 22:36:42.421575 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 22:36:42.435388 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 22:36:42.435440 [INFO] stopping current container: a5efe7391275
2024/01/29 22:36:42.435452 [INFO] Running command /bin/sh -c docker ps | grep -q a5efe7391275
2024/01/29 22:36:42.456310 [INFO] Running command /bin/sh -c docker ps | grep -q a5efe7391275
2024/01/29 22:36:42.476121 [INFO] Pruning containers ...
2024/01/29 22:36:42.476143 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 22:36:42.496852 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 22:36:42.496880 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 22:36:42.531648 [INFO] Total reclaimed space: 0B

2024/01/29 22:36:42.531679 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 22:36:42.556393 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 22:36:42.556437 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 22:36:42.577054 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 22:36:42.577079 [INFO] Removing /var/app/current/ if it exists
2024/01/29 22:36:42.577198 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 22:36:42.577217 [INFO] detected new app is not docker compose app
2024/01/29 22:36:42.577271 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 22:36:43.019515 [INFO] c3ac4c156d5c4c2e2ef7810c82cad5c391b00a83bb4a67eb9eb36d240582a9c4

2024/01/29 22:36:48.023832 [INFO] Running command /bin/sh -c docker ps | grep -q c3ac4c156d5c
2024/01/29 22:36:48.074471 [ERROR] docker container quit unexpectedly on 2024-01-29 22:36:48.074452541 +0000 UTC: Command /bin/sh -c docker ps | grep -q c3ac4c156d5c failed with error exit status 1
2024/01/29 22:36:48.074510 [INFO] Running command /bin/sh -c docker logs c3ac4c156d5c
2024/01/29 22:36:48.123795 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c3ac4c156d5c: Command /bin/sh -c docker ps | grep -q c3ac4c156d5c failed with error exit status 1 

2024/01/29 22:36:48.123805 [INFO] Executing cleanup logic
2024/01/29 22:36:48.124059 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 23:36:49.184879 [INFO] Starting...
2024/01/29 23:36:49.184922 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 23:36:49.184946 [INFO] reading event message file
2024/01/29 23:36:49.185798 [INFO] Engine received EB command userdata-exec

2024/01/29 23:36:49.191600 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 23:36:49.565023 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 23:36:50.017506 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 23:36:50.017613 [INFO] Engine command: (self-startup)

2024/01/29 23:36:50.017622 [INFO] Downloading EB Application...
2024/01/29 23:36:50.017627 [INFO] Region: eu-west-1
2024/01/29 23:36:50.017643 [INFO] envID: e-8gmkc7rmw6
2024/01/29 23:36:50.017646 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 23:36:50.017649 [INFO] Using manifest file name from command request
2024/01/29 23:36:50.017685 [INFO] Unable to get version manifest file.
2024/01/29 23:36:50.017688 [INFO] Downloading latest manifest available.
2024/01/29 23:36:50.017691 [INFO] Download latest app version manifest
2024/01/29 23:36:50.017899 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 23:36:50.069283 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 23:36:50.069464 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 23:36:50.088181 [INFO] Download successful124bytes downloaded
2024/01/29 23:36:50.088366 [INFO] Trying to read and parse version manifest...
2024/01/29 23:36:50.088444 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 23:36:50.152696 [INFO] Download successful264bytes downloaded
2024/01/29 23:36:50.153062 [INFO] Executing instruction: SyncClock
2024/01/29 23:36:50.153067 [INFO] Starting SyncClock
2024/01/29 23:36:50.153076 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 23:36:50.159834 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 23:36:42 2024
System time     : 0.000001345 seconds slow of NTP time
Last offset     : +0.000000489 seconds
RMS offset      : 0.000002889 seconds
Frequency       : 0.925 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.057 ppm
Root delay      : 0.000436302 seconds
Root dispersion : 0.000292862 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/29 23:36:50.159853 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 23:36:50.165840 [INFO] 200 OK

2024/01/29 23:36:50.165939 [INFO] Skipping Configure OS
2024/01/29 23:36:50.165944 [INFO] Skipping LockRepo
2024/01/29 23:36:50.165949 [INFO] Skipping GenerateEBBanner
2024/01/29 23:36:50.165954 [INFO] Skipping Install Process Manager
2024/01/29 23:36:50.165958 [INFO] Skipping install syslog
2024/01/29 23:36:50.165963 [INFO] Skipping install cron
2024/01/29 23:36:50.165967 [INFO] Skipping install proxy
2024/01/29 23:36:50.165971 [INFO] Skipping installhealthd
2024/01/29 23:36:50.165975 [INFO] Skipping Install Log Streaming Manager
2024/01/29 23:36:50.165979 [INFO] Skipping install X-Ray
2024/01/29 23:36:50.165984 [INFO] Skipping install Third Party License
2024/01/29 23:36:50.165994 [INFO] Skipping installSqsd
2024/01/29 23:36:50.165999 [INFO] Skipping bootstraphealthd
2024/01/29 23:36:50.166003 [INFO] Skipping Install yum packages
2024/01/29 23:36:50.166009 [INFO] Skipping install docker-compose
2024/01/29 23:36:50.166017 [INFO] Skipping Configure Docker Daemon
2024/01/29 23:36:50.166022 [INFO] Skipping MarkBaked
2024/01/29 23:36:50.166026 [INFO] Skipping TuneSystemSettings
2024/01/29 23:36:50.166029 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 23:36:50.166032 [INFO] Initialize LogRotate files and directories
2024/01/29 23:36:50.181942 [INFO] Skipping BootstrapCFNHup
2024/01/29 23:36:50.181955 [INFO] Executing instruction: StartCFNHup
2024/01/29 23:36:50.181958 [INFO] Start cfn-hup
2024/01/29 23:36:50.181980 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 23:36:50.199010 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 23:36:50.207917 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 23:36:50.207950 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 23:36:50.207954 [INFO] Executing instruction: Start Docker
2024/01/29 23:36:50.207957 [INFO] Starting Docker...
2024/01/29 23:36:50.208042 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 23:36:50.209294 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 23:36:50.210284 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 23:36:50.671014 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 23:36:50.687866 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 23:36:50.687893 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 23:36:50.703026 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 23:36:50.715913 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 23:36:50.729046 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 23:36:50.828939 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 23:36:50.829093 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 23:36:51.212025 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 23:36:51.592047 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 23:36:51.608353 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 23:36:51.925761 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 23:36:51.934733 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 23:36:51.946692 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 23:36:51.955375 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 23:36:53.174495 [INFO] Skipping Setup Docker Options
2024/01/29 23:36:53.174521 [INFO] Skipping MarkBootstrapped
2024/01/29 23:36:53.174525 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 23:36:53.175070 [INFO] Starting SwitchCFNStack
2024/01/29 23:36:53.175080 [INFO] Executing instruction: stopSqsd
2024/01/29 23:36:53.175084 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 23:36:53.175087 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 23:36:53.175091 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 23:36:53.175109 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 23:36:53.772167 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 23:36:53.772194 [INFO] Executing instruction: StagedockerApplication
2024/01/29 23:36:53.772206 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 23:36:53.796812 [INFO] Pruning containers ...
2024/01/29 23:36:53.796895 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 23:36:53.821342 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c3ac4c156d5c   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             blissful_banach

2024/01/29 23:36:53.821567 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 23:36:53.846368 [INFO] Deleted Containers:
c3ac4c156d5c4c2e2ef7810c82cad5c391b00a83bb4a67eb9eb36d240582a9c4

Total reclaimed space: 0B

2024/01/29 23:36:53.846391 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 23:36:53.870535 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 23:36:53.870771 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 23:36:53.878466 [INFO] application/json

2024/01/29 23:36:53.878616 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 23:36:53.982207 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 23:36:53.982383 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 23:36:53.983673 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 23:36:53.983695 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 23:36:53.983711 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 23:36:53.983715 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 23:36:53.983721 [INFO] Executing instruction: Generate environment file
2024/01/29 23:36:53.983748 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 23:36:53.983752 [INFO] start build docker app
2024/01/29 23:36:53.984183 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 23:36:53.984187 [INFO] fetching image and ports
2024/01/29 23:36:53.985933 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 23:36:53.985976 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 23:36:53.985986 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 23:36:53.985998 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 23:36:54.941876 [INFO] Login Succeeded

2024/01/29 23:36:54.941893 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 23:36:54.941900 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 23:36:54.941916 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 23:36:55.135585 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 23:36:55.135607 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 23:36:55.135612 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 23:36:55.135616 [INFO] start to build docker image
2024/01/29 23:36:55.135631 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 23:36:55.471931 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 23:36:55.471951 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 23:36:55.471954 [INFO] successfully build docker image
2024/01/29 23:36:55.471956 [INFO] save staging docker image id
2024/01/29 23:36:55.471966 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 23:36:55.512374 [INFO] c176d18fbf65

2024/01/29 23:36:55.512776 [INFO] Executing instruction: configure X-Ray
2024/01/29 23:36:55.512784 [INFO] X-Ray is not enabled.
2024/01/29 23:36:55.512786 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 23:36:55.518345 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 23:36:55.520001 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 23:36:55.532796 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 23:36:55.532826 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 23:36:55.543254 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 23:36:55.551600 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 23:36:55.561145 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 23:36:55.622563 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 23:36:56.021087 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 23:36:56.021312 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 23:36:56.396812 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 23:36:56.408419 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 23:36:56.727736 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 23:36:56.746508 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 23:36:56.767572 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 23:36:57.076323 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 23:36:57.085889 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 23:36:57.354734 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 23:36:57.354776 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 23:36:57.384996 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 23:36:57.394711 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 23:36:57.509972 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 23:36:57.510897 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 23:36:57.511821 [INFO] Executing instruction: configure log streaming
2024/01/29 23:36:57.511834 [INFO] log streaming is not enabled
2024/01/29 23:36:57.511838 [INFO] disable log stream
2024/01/29 23:36:57.511852 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 23:36:57.537031 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 23:36:57.561007 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 23:36:57.561032 [INFO] Checking if logs need forced rotation
2024/01/29 23:36:57.561053 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 23:36:58.172321 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 23:36:58.660915 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 23:36:58.663459 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 23:36:59.175950 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 23:36:59.205074 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 23:36:59.205090 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 23:36:59.205101 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 23:36:59.747144 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 23:36:59.747183 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 23:36:59.747207 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 23:36:59.747210 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 23:36:59.747254 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 23:36:59.747268 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 23:36:59.747274 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 23:36:59.747280 [INFO] Executing instruction: stop X-Ray
2024/01/29 23:36:59.747282 [INFO] stop X-Ray ...
2024/01/29 23:36:59.747293 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 23:36:59.763650 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 23:36:59.763687 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 23:36:59.780005 [INFO] Executing instruction: Run Docker Container
2024/01/29 23:36:59.780036 [INFO] stop currently running containers...
2024/01/29 23:36:59.780048 [INFO] detected old app is not docker compose app
2024/01/29 23:36:59.780063 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 23:36:59.812553 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 23:36:59.832519 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 23:36:59.832553 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 23:36:59.852753 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 23:36:59.852782 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 23:36:59.870740 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 23:36:59.870797 [INFO] stopping current container: c3ac4c156d5c
2024/01/29 23:36:59.870810 [INFO] Running command /bin/sh -c docker ps | grep -q c3ac4c156d5c
2024/01/29 23:36:59.898549 [INFO] Running command /bin/sh -c docker ps | grep -q c3ac4c156d5c
2024/01/29 23:36:59.921200 [INFO] Pruning containers ...
2024/01/29 23:36:59.921223 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 23:36:59.945671 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 23:36:59.945702 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 23:36:59.973618 [INFO] Total reclaimed space: 0B

2024/01/29 23:36:59.973642 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 23:36:59.998445 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 23:36:59.998479 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 23:37:00.055609 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 23:37:00.055635 [INFO] Removing /var/app/current/ if it exists
2024/01/29 23:37:00.055744 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 23:37:00.055763 [INFO] detected new app is not docker compose app
2024/01/29 23:37:00.055829 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 23:37:00.571129 [INFO] 241b1b88e4d2ccf0833e2781cf4de076d321432ccc431b2b0194a194a8d83a84

2024/01/29 23:37:05.571513 [INFO] Running command /bin/sh -c docker ps | grep -q 241b1b88e4d2
2024/01/29 23:37:05.609539 [ERROR] docker container quit unexpectedly on 2024-01-29 23:37:05.609492268 +0000 UTC: Command /bin/sh -c docker ps | grep -q 241b1b88e4d2 failed with error exit status 1
2024/01/29 23:37:05.609566 [INFO] Running command /bin/sh -c docker logs 241b1b88e4d2
2024/01/29 23:37:05.641911 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 241b1b88e4d2: Command /bin/sh -c docker ps | grep -q 241b1b88e4d2 failed with error exit status 1 

2024/01/29 23:37:05.641956 [INFO] Executing cleanup logic
2024/01/29 23:37:05.642336 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 00:37:06.831908 [INFO] Starting...
2024/01/30 00:37:06.831951 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 00:37:06.831975 [INFO] reading event message file
2024/01/30 00:37:06.832682 [INFO] Engine received EB command userdata-exec

2024/01/30 00:37:06.838172 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 00:37:07.250021 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 00:37:07.714526 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 00:37:07.714613 [INFO] Engine command: (self-startup)

2024/01/30 00:37:07.714619 [INFO] Downloading EB Application...
2024/01/30 00:37:07.714622 [INFO] Region: eu-west-1
2024/01/30 00:37:07.714624 [INFO] envID: e-8gmkc7rmw6
2024/01/30 00:37:07.714626 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 00:37:07.714629 [INFO] Using manifest file name from command request
2024/01/30 00:37:07.714678 [INFO] Unable to get version manifest file.
2024/01/30 00:37:07.714681 [INFO] Downloading latest manifest available.
2024/01/30 00:37:07.714684 [INFO] Download latest app version manifest
2024/01/30 00:37:07.714825 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 00:37:07.758072 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 00:37:07.758733 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 00:37:07.772252 [INFO] Download successful124bytes downloaded
2024/01/30 00:37:07.772460 [INFO] Trying to read and parse version manifest...
2024/01/30 00:37:07.772539 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 00:37:07.818081 [INFO] Download successful264bytes downloaded
2024/01/30 00:37:07.818453 [INFO] Executing instruction: SyncClock
2024/01/30 00:37:07.818464 [INFO] Starting SyncClock
2024/01/30 00:37:07.818524 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 00:37:07.824330 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 00:36:52 2024
System time     : 0.000001940 seconds fast of NTP time
Last offset     : +0.000002037 seconds
RMS offset      : 0.000002184 seconds
Frequency       : 0.467 ppm fast
Residual freq   : +0.003 ppm
Skew            : 0.070 ppm
Root delay      : 0.000408289 seconds
Root dispersion : 0.000531091 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 00:37:07.824362 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 00:37:07.830399 [INFO] 200 OK

2024/01/30 00:37:07.830590 [INFO] Skipping Configure OS
2024/01/30 00:37:07.830602 [INFO] Skipping LockRepo
2024/01/30 00:37:07.830606 [INFO] Skipping GenerateEBBanner
2024/01/30 00:37:07.830611 [INFO] Skipping Install Process Manager
2024/01/30 00:37:07.830615 [INFO] Skipping install syslog
2024/01/30 00:37:07.830619 [INFO] Skipping install cron
2024/01/30 00:37:07.830623 [INFO] Skipping install proxy
2024/01/30 00:37:07.830626 [INFO] Skipping installhealthd
2024/01/30 00:37:07.830630 [INFO] Skipping Install Log Streaming Manager
2024/01/30 00:37:07.830634 [INFO] Skipping install X-Ray
2024/01/30 00:37:07.830638 [INFO] Skipping install Third Party License
2024/01/30 00:37:07.830643 [INFO] Skipping installSqsd
2024/01/30 00:37:07.830647 [INFO] Skipping bootstraphealthd
2024/01/30 00:37:07.830651 [INFO] Skipping Install yum packages
2024/01/30 00:37:07.830660 [INFO] Skipping install docker-compose
2024/01/30 00:37:07.830664 [INFO] Skipping Configure Docker Daemon
2024/01/30 00:37:07.830669 [INFO] Skipping MarkBaked
2024/01/30 00:37:07.830672 [INFO] Skipping TuneSystemSettings
2024/01/30 00:37:07.830675 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 00:37:07.830678 [INFO] Initialize LogRotate files and directories
2024/01/30 00:37:07.849740 [INFO] Skipping BootstrapCFNHup
2024/01/30 00:37:07.849754 [INFO] Executing instruction: StartCFNHup
2024/01/30 00:37:07.849757 [INFO] Start cfn-hup
2024/01/30 00:37:07.849774 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 00:37:07.885433 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 00:37:07.907293 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 00:37:07.907328 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 00:37:07.907332 [INFO] Executing instruction: Start Docker
2024/01/30 00:37:07.907335 [INFO] Starting Docker...
2024/01/30 00:37:07.907420 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 00:37:07.910589 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 00:37:07.911840 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 00:37:08.169004 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 00:37:08.185384 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 00:37:08.185418 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 00:37:08.196514 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 00:37:08.210318 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 00:37:08.235775 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 00:37:08.339896 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 00:37:08.339955 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 00:37:08.627144 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 00:37:08.939833 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 00:37:08.953383 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 00:37:09.256234 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 00:37:09.265661 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 00:37:09.280292 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 00:37:09.289307 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 00:37:10.499392 [INFO] Skipping Setup Docker Options
2024/01/30 00:37:10.499416 [INFO] Skipping MarkBootstrapped
2024/01/30 00:37:10.499420 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 00:37:10.499505 [INFO] Starting SwitchCFNStack
2024/01/30 00:37:10.499510 [INFO] Executing instruction: stopSqsd
2024/01/30 00:37:10.499514 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 00:37:10.499516 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 00:37:10.499520 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 00:37:10.499533 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 00:37:10.954933 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 00:37:10.955014 [INFO] Executing instruction: StagedockerApplication
2024/01/30 00:37:10.955026 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 00:37:10.986642 [INFO] Pruning containers ...
2024/01/30 00:37:10.986940 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 00:37:11.016689 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
241b1b88e4d2   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             magical_swartz

2024/01/30 00:37:11.016720 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 00:37:11.060496 [INFO] Deleted Containers:
241b1b88e4d2ccf0833e2781cf4de076d321432ccc431b2b0194a194a8d83a84

Total reclaimed space: 0B

2024/01/30 00:37:11.061561 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 00:37:11.093972 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 00:37:11.094264 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 00:37:11.099111 [INFO] application/json

2024/01/30 00:37:11.099129 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 00:37:11.243848 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 00:37:11.244366 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 00:37:11.245693 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 00:37:11.245720 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 00:37:11.245738 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 00:37:11.245741 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 00:37:11.245746 [INFO] Executing instruction: Generate environment file
2024/01/30 00:37:11.245774 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 00:37:11.245777 [INFO] start build docker app
2024/01/30 00:37:11.246153 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 00:37:11.246157 [INFO] fetching image and ports
2024/01/30 00:37:11.250694 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 00:37:11.250750 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 00:37:11.250763 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 00:37:11.250778 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 00:37:12.125318 [INFO] Login Succeeded

2024/01/30 00:37:12.125341 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 00:37:12.125351 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 00:37:12.125366 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 00:37:12.269094 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 00:37:12.269148 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 00:37:12.269158 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 00:37:12.269162 [INFO] start to build docker image
2024/01/30 00:37:12.269178 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 00:37:12.576308 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 00:37:12.576328 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 00:37:12.576332 [INFO] successfully build docker image
2024/01/30 00:37:12.576334 [INFO] save staging docker image id
2024/01/30 00:37:12.576345 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 00:37:12.601335 [INFO] c176d18fbf65

2024/01/30 00:37:12.601518 [INFO] Executing instruction: configure X-Ray
2024/01/30 00:37:12.601525 [INFO] X-Ray is not enabled.
2024/01/30 00:37:12.601528 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 00:37:12.608413 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 00:37:12.610205 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 00:37:12.628914 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 00:37:12.628959 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 00:37:12.647386 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 00:37:12.655852 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 00:37:12.670891 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 00:37:12.737455 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 00:37:13.047490 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 00:37:13.047573 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 00:37:13.465236 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 00:37:13.477855 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 00:37:13.838412 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 00:37:13.852096 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 00:37:13.864468 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 00:37:14.233364 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 00:37:14.247038 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 00:37:14.554298 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 00:37:14.554333 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 00:37:14.566866 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 00:37:14.581866 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 00:37:14.654836 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 00:37:14.656008 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 00:37:14.657129 [INFO] Executing instruction: configure log streaming
2024/01/30 00:37:14.657139 [INFO] log streaming is not enabled
2024/01/30 00:37:14.657143 [INFO] disable log stream
2024/01/30 00:37:14.657160 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 00:37:14.679602 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 00:37:14.702730 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 00:37:14.702753 [INFO] Checking if logs need forced rotation
2024/01/30 00:37:14.702772 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 00:37:15.323336 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 00:37:15.793708 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 00:37:15.795456 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 00:37:15.902105 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 00:37:15.921955 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 00:37:15.921971 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 00:37:15.921983 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 00:37:16.395865 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 00:37:16.395901 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 00:37:16.395928 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 00:37:16.395932 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 00:37:16.395955 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 00:37:16.395967 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 00:37:16.395970 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 00:37:16.395976 [INFO] Executing instruction: stop X-Ray
2024/01/30 00:37:16.395979 [INFO] stop X-Ray ...
2024/01/30 00:37:16.395993 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 00:37:16.413381 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 00:37:16.413415 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 00:37:16.430529 [INFO] Executing instruction: Run Docker Container
2024/01/30 00:37:16.430556 [INFO] stop currently running containers...
2024/01/30 00:37:16.430575 [INFO] detected old app is not docker compose app
2024/01/30 00:37:16.430586 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 00:37:16.472625 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 00:37:16.489983 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 00:37:16.490026 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 00:37:16.504594 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 00:37:16.504626 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 00:37:16.527412 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 00:37:16.527462 [INFO] stopping current container: 241b1b88e4d2
2024/01/30 00:37:16.527475 [INFO] Running command /bin/sh -c docker ps | grep -q 241b1b88e4d2
2024/01/30 00:37:16.550316 [INFO] Running command /bin/sh -c docker ps | grep -q 241b1b88e4d2
2024/01/30 00:37:16.571520 [INFO] Pruning containers ...
2024/01/30 00:37:16.571551 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 00:37:16.592776 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 00:37:16.592805 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 00:37:16.609278 [INFO] Total reclaimed space: 0B

2024/01/30 00:37:16.609302 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 00:37:16.628518 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 00:37:16.628551 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 00:37:16.648705 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 00:37:16.648725 [INFO] Removing /var/app/current/ if it exists
2024/01/30 00:37:16.648876 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 00:37:16.648892 [INFO] detected new app is not docker compose app
2024/01/30 00:37:16.648943 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 00:37:17.051150 [INFO] 9396a0281c5429cb0142bf6a32c2e17043ffede5735a30c82e0589578751ae04

2024/01/30 00:37:22.051681 [INFO] Running command /bin/sh -c docker ps | grep -q 9396a0281c54
2024/01/30 00:37:22.109344 [ERROR] docker container quit unexpectedly on 2024-01-30 00:37:22.109324784 +0000 UTC: Command /bin/sh -c docker ps | grep -q 9396a0281c54 failed with error exit status 1
2024/01/30 00:37:22.109372 [INFO] Running command /bin/sh -c docker logs 9396a0281c54
2024/01/30 00:37:22.138192 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 9396a0281c54: Command /bin/sh -c docker ps | grep -q 9396a0281c54 failed with error exit status 1 

2024/01/30 00:37:22.138201 [INFO] Executing cleanup logic
2024/01/30 00:37:22.138403 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 01:37:23.186587 [INFO] Starting...
2024/01/30 01:37:23.186626 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 01:37:23.186650 [INFO] reading event message file
2024/01/30 01:37:23.187369 [INFO] Engine received EB command userdata-exec

2024/01/30 01:37:23.193060 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 01:37:23.599248 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 01:37:24.050956 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 01:37:24.051042 [INFO] Engine command: (self-startup)

2024/01/30 01:37:24.051050 [INFO] Downloading EB Application...
2024/01/30 01:37:24.051054 [INFO] Region: eu-west-1
2024/01/30 01:37:24.051057 [INFO] envID: e-8gmkc7rmw6
2024/01/30 01:37:24.051060 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 01:37:24.051063 [INFO] Using manifest file name from command request
2024/01/30 01:37:24.051079 [INFO] Unable to get version manifest file.
2024/01/30 01:37:24.051082 [INFO] Downloading latest manifest available.
2024/01/30 01:37:24.051085 [INFO] Download latest app version manifest
2024/01/30 01:37:24.051248 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 01:37:24.091055 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 01:37:24.091250 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 01:37:24.101587 [INFO] Download successful124bytes downloaded
2024/01/30 01:37:24.101727 [INFO] Trying to read and parse version manifest...
2024/01/30 01:37:24.101803 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 01:37:24.148257 [INFO] Download successful264bytes downloaded
2024/01/30 01:37:24.148731 [INFO] Executing instruction: SyncClock
2024/01/30 01:37:24.148739 [INFO] Starting SyncClock
2024/01/30 01:37:24.148751 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 01:37:24.154737 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 01:37:17 2024
System time     : 0.000003295 seconds fast of NTP time
Last offset     : +0.000004894 seconds
RMS offset      : 0.000004811 seconds
Frequency       : 0.387 ppm fast
Residual freq   : +0.004 ppm
Skew            : 0.122 ppm
Root delay      : 0.000466244 seconds
Root dispersion : 0.000459808 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 01:37:24.154760 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 01:37:24.161402 [INFO] 200 OK

2024/01/30 01:37:24.161525 [INFO] Skipping Configure OS
2024/01/30 01:37:24.161532 [INFO] Skipping LockRepo
2024/01/30 01:37:24.161537 [INFO] Skipping GenerateEBBanner
2024/01/30 01:37:24.161541 [INFO] Skipping Install Process Manager
2024/01/30 01:37:24.161545 [INFO] Skipping install syslog
2024/01/30 01:37:24.161549 [INFO] Skipping install cron
2024/01/30 01:37:24.161553 [INFO] Skipping install proxy
2024/01/30 01:37:24.161557 [INFO] Skipping installhealthd
2024/01/30 01:37:24.161560 [INFO] Skipping Install Log Streaming Manager
2024/01/30 01:37:24.161565 [INFO] Skipping install X-Ray
2024/01/30 01:37:24.161569 [INFO] Skipping install Third Party License
2024/01/30 01:37:24.161574 [INFO] Skipping installSqsd
2024/01/30 01:37:24.161578 [INFO] Skipping bootstraphealthd
2024/01/30 01:37:24.161582 [INFO] Skipping Install yum packages
2024/01/30 01:37:24.161585 [INFO] Skipping install docker-compose
2024/01/30 01:37:24.161589 [INFO] Skipping Configure Docker Daemon
2024/01/30 01:37:24.161595 [INFO] Skipping MarkBaked
2024/01/30 01:37:24.161598 [INFO] Skipping TuneSystemSettings
2024/01/30 01:37:24.161601 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 01:37:24.161603 [INFO] Initialize LogRotate files and directories
2024/01/30 01:37:24.175752 [INFO] Skipping BootstrapCFNHup
2024/01/30 01:37:24.175764 [INFO] Executing instruction: StartCFNHup
2024/01/30 01:37:24.175767 [INFO] Start cfn-hup
2024/01/30 01:37:24.175784 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 01:37:24.191874 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 01:37:24.200291 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 01:37:24.200327 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 01:37:24.200336 [INFO] Executing instruction: Start Docker
2024/01/30 01:37:24.200340 [INFO] Starting Docker...
2024/01/30 01:37:24.200424 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 01:37:24.201506 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 01:37:24.203390 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 01:37:24.645906 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 01:37:24.662466 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 01:37:24.662513 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 01:37:24.672722 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 01:37:24.680881 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 01:37:24.703679 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 01:37:24.772626 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 01:37:24.772657 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 01:37:25.138794 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 01:37:25.486168 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 01:37:25.501072 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 01:37:25.872923 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 01:37:25.883504 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 01:37:25.899901 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 01:37:25.909169 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 01:37:27.304359 [INFO] Skipping Setup Docker Options
2024/01/30 01:37:27.304393 [INFO] Skipping MarkBootstrapped
2024/01/30 01:37:27.304397 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 01:37:27.304509 [INFO] Starting SwitchCFNStack
2024/01/30 01:37:27.304514 [INFO] Executing instruction: stopSqsd
2024/01/30 01:37:27.304518 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 01:37:27.304522 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 01:37:27.304525 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 01:37:27.304542 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 01:37:27.800160 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 01:37:27.800187 [INFO] Executing instruction: StagedockerApplication
2024/01/30 01:37:27.800197 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 01:37:27.819975 [INFO] Pruning containers ...
2024/01/30 01:37:27.820003 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 01:37:27.842337 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
9396a0281c54   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             affectionate_vaughan

2024/01/30 01:37:27.842368 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 01:37:27.867859 [INFO] Deleted Containers:
9396a0281c5429cb0142bf6a32c2e17043ffede5735a30c82e0589578751ae04

Total reclaimed space: 0B

2024/01/30 01:37:27.867892 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 01:37:27.889780 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 01:37:27.890026 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 01:37:27.893330 [INFO] application/json

2024/01/30 01:37:27.893357 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 01:37:27.974294 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 01:37:27.974462 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 01:37:27.975655 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 01:37:27.975689 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 01:37:27.975704 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 01:37:27.975707 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 01:37:27.975712 [INFO] Executing instruction: Generate environment file
2024/01/30 01:37:27.975736 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 01:37:27.975740 [INFO] start build docker app
2024/01/30 01:37:27.976163 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 01:37:27.976166 [INFO] fetching image and ports
2024/01/30 01:37:27.978041 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 01:37:27.978095 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 01:37:27.978104 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 01:37:27.978114 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 01:37:29.014089 [INFO] Login Succeeded

2024/01/30 01:37:29.014169 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 01:37:29.014177 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 01:37:29.014194 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 01:37:29.162860 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 01:37:29.162888 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 01:37:29.162892 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 01:37:29.162895 [INFO] start to build docker image
2024/01/30 01:37:29.162910 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 01:37:29.422164 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 01:37:29.422191 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 01:37:29.422194 [INFO] successfully build docker image
2024/01/30 01:37:29.422196 [INFO] save staging docker image id
2024/01/30 01:37:29.422222 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 01:37:29.447087 [INFO] c176d18fbf65

2024/01/30 01:37:29.447242 [INFO] Executing instruction: configure X-Ray
2024/01/30 01:37:29.447249 [INFO] X-Ray is not enabled.
2024/01/30 01:37:29.447253 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 01:37:29.452316 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 01:37:29.454164 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 01:37:29.467120 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 01:37:29.467261 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 01:37:29.488816 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 01:37:29.515840 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 01:37:29.549319 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 01:37:29.618741 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 01:37:29.979573 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 01:37:29.979639 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 01:37:30.336996 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 01:37:30.349342 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 01:37:30.754279 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 01:37:30.764658 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 01:37:30.774384 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 01:37:31.124552 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 01:37:31.135168 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 01:37:31.456386 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 01:37:31.456416 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 01:37:31.467387 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 01:37:31.476083 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 01:37:31.541325 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 01:37:31.542411 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 01:37:31.543308 [INFO] Executing instruction: configure log streaming
2024/01/30 01:37:31.543318 [INFO] log streaming is not enabled
2024/01/30 01:37:31.543322 [INFO] disable log stream
2024/01/30 01:37:31.543337 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 01:37:31.564462 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 01:37:31.584773 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 01:37:31.584796 [INFO] Checking if logs need forced rotation
2024/01/30 01:37:31.584815 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 01:37:32.091917 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 01:37:32.587457 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 01:37:32.589402 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 01:37:32.684255 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 01:37:32.704878 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 01:37:32.704904 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 01:37:32.704921 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 01:37:33.130772 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 01:37:33.130818 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 01:37:33.130843 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 01:37:33.130845 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 01:37:33.130864 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 01:37:33.130875 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 01:37:33.130879 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 01:37:33.130885 [INFO] Executing instruction: stop X-Ray
2024/01/30 01:37:33.130889 [INFO] stop X-Ray ...
2024/01/30 01:37:33.130901 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 01:37:33.147781 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 01:37:33.147814 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 01:37:33.167161 [INFO] Executing instruction: Run Docker Container
2024/01/30 01:37:33.167192 [INFO] stop currently running containers...
2024/01/30 01:37:33.167203 [INFO] detected old app is not docker compose app
2024/01/30 01:37:33.167238 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 01:37:33.212347 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 01:37:33.231930 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 01:37:33.231962 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 01:37:33.246059 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 01:37:33.246092 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 01:37:33.260919 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 01:37:33.260968 [INFO] stopping current container: 9396a0281c54
2024/01/30 01:37:33.260981 [INFO] Running command /bin/sh -c docker ps | grep -q 9396a0281c54
2024/01/30 01:37:33.280667 [INFO] Running command /bin/sh -c docker ps | grep -q 9396a0281c54
2024/01/30 01:37:33.300882 [INFO] Pruning containers ...
2024/01/30 01:37:33.300906 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 01:37:33.360380 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 01:37:33.360416 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 01:37:33.389690 [INFO] Total reclaimed space: 0B

2024/01/30 01:37:33.389715 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 01:37:33.429786 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 01:37:33.429820 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 01:37:33.451644 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 01:37:33.451664 [INFO] Removing /var/app/current/ if it exists
2024/01/30 01:37:33.451822 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 01:37:33.451839 [INFO] detected new app is not docker compose app
2024/01/30 01:37:33.451885 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 01:37:33.873551 [INFO] 61c2d0f82147605344dde2caa77f93215255985a99586b64d4fae2ff2c80889d

2024/01/30 01:37:38.874461 [INFO] Running command /bin/sh -c docker ps | grep -q 61c2d0f82147
2024/01/30 01:37:38.903087 [ERROR] docker container quit unexpectedly on 2024-01-30 01:37:38.903076506 +0000 UTC: Command /bin/sh -c docker ps | grep -q 61c2d0f82147 failed with error exit status 1
2024/01/30 01:37:38.903112 [INFO] Running command /bin/sh -c docker logs 61c2d0f82147
2024/01/30 01:37:38.923276 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 61c2d0f82147: Command /bin/sh -c docker ps | grep -q 61c2d0f82147 failed with error exit status 1 

2024/01/30 01:37:38.923311 [INFO] Executing cleanup logic
2024/01/30 01:37:38.923530 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 02:37:39.925647 [INFO] Starting...
2024/01/30 02:37:39.925689 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 02:37:39.925715 [INFO] reading event message file
2024/01/30 02:37:39.926422 [INFO] Engine received EB command userdata-exec

2024/01/30 02:37:39.936907 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 02:37:40.358138 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 02:37:40.843851 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 02:37:40.843952 [INFO] Engine command: (self-startup)

2024/01/30 02:37:40.843961 [INFO] Downloading EB Application...
2024/01/30 02:37:40.843964 [INFO] Region: eu-west-1
2024/01/30 02:37:40.843967 [INFO] envID: e-8gmkc7rmw6
2024/01/30 02:37:40.843970 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 02:37:40.845868 [INFO] Using manifest file name from command request
2024/01/30 02:37:40.845886 [INFO] Unable to get version manifest file.
2024/01/30 02:37:40.845889 [INFO] Downloading latest manifest available.
2024/01/30 02:37:40.845891 [INFO] Download latest app version manifest
2024/01/30 02:37:40.846308 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 02:37:40.888115 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 02:37:40.888296 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 02:37:40.903625 [INFO] Download successful124bytes downloaded
2024/01/30 02:37:40.903763 [INFO] Trying to read and parse version manifest...
2024/01/30 02:37:40.903840 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 02:37:40.927627 [INFO] Download successful264bytes downloaded
2024/01/30 02:37:40.928014 [INFO] Executing instruction: SyncClock
2024/01/30 02:37:40.928019 [INFO] Starting SyncClock
2024/01/30 02:37:40.928032 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 02:37:40.934673 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 02:37:24 2024
System time     : 0.000001229 seconds fast of NTP time
Last offset     : +0.000004480 seconds
RMS offset      : 0.000007003 seconds
Frequency       : 0.854 ppm fast
Residual freq   : +0.004 ppm
Skew            : 0.156 ppm
Root delay      : 0.000424580 seconds
Root dispersion : 0.000470066 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 02:37:40.934706 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 02:37:40.939200 [INFO] 200 OK

2024/01/30 02:37:40.939285 [INFO] Skipping Configure OS
2024/01/30 02:37:40.939311 [INFO] Skipping LockRepo
2024/01/30 02:37:40.939316 [INFO] Skipping GenerateEBBanner
2024/01/30 02:37:40.939322 [INFO] Skipping Install Process Manager
2024/01/30 02:37:40.939326 [INFO] Skipping install syslog
2024/01/30 02:37:40.939330 [INFO] Skipping install cron
2024/01/30 02:37:40.939333 [INFO] Skipping install proxy
2024/01/30 02:37:40.939337 [INFO] Skipping installhealthd
2024/01/30 02:37:40.939341 [INFO] Skipping Install Log Streaming Manager
2024/01/30 02:37:40.939345 [INFO] Skipping install X-Ray
2024/01/30 02:37:40.939349 [INFO] Skipping install Third Party License
2024/01/30 02:37:40.939354 [INFO] Skipping installSqsd
2024/01/30 02:37:40.939358 [INFO] Skipping bootstraphealthd
2024/01/30 02:37:40.939361 [INFO] Skipping Install yum packages
2024/01/30 02:37:40.939365 [INFO] Skipping install docker-compose
2024/01/30 02:37:40.939369 [INFO] Skipping Configure Docker Daemon
2024/01/30 02:37:40.939373 [INFO] Skipping MarkBaked
2024/01/30 02:37:40.939377 [INFO] Skipping TuneSystemSettings
2024/01/30 02:37:40.939380 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 02:37:40.939382 [INFO] Initialize LogRotate files and directories
2024/01/30 02:37:40.953443 [INFO] Skipping BootstrapCFNHup
2024/01/30 02:37:40.953456 [INFO] Executing instruction: StartCFNHup
2024/01/30 02:37:40.953459 [INFO] Start cfn-hup
2024/01/30 02:37:40.953476 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 02:37:40.969130 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 02:37:40.978994 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 02:37:40.979027 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 02:37:40.979031 [INFO] Executing instruction: Start Docker
2024/01/30 02:37:40.979034 [INFO] Starting Docker...
2024/01/30 02:37:40.979115 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 02:37:40.980229 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 02:37:40.981345 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 02:37:41.412875 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 02:37:41.436444 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 02:37:41.436473 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 02:37:41.457228 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 02:37:41.473862 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 02:37:41.484935 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 02:37:41.533155 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 02:37:41.533256 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 02:37:41.876680 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 02:37:42.196201 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 02:37:42.249056 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 02:37:42.538350 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 02:37:42.570594 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 02:37:42.593213 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 02:37:42.608150 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 02:37:43.740544 [INFO] Skipping Setup Docker Options
2024/01/30 02:37:43.740571 [INFO] Skipping MarkBootstrapped
2024/01/30 02:37:43.740575 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 02:37:43.740687 [INFO] Starting SwitchCFNStack
2024/01/30 02:37:43.740693 [INFO] Executing instruction: stopSqsd
2024/01/30 02:37:43.740697 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 02:37:43.740700 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 02:37:43.740703 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 02:37:43.740727 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 02:37:44.144435 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 02:37:44.144470 [INFO] Executing instruction: StagedockerApplication
2024/01/30 02:37:44.144483 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 02:37:44.166626 [INFO] Pruning containers ...
2024/01/30 02:37:44.166661 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 02:37:44.187752 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
61c2d0f82147   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             nostalgic_benz

2024/01/30 02:37:44.187811 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 02:37:44.215529 [INFO] Deleted Containers:
61c2d0f82147605344dde2caa77f93215255985a99586b64d4fae2ff2c80889d

Total reclaimed space: 0B

2024/01/30 02:37:44.215552 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 02:37:44.243771 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 02:37:44.244135 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 02:37:44.247288 [INFO] application/json

2024/01/30 02:37:44.247348 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 02:37:44.343635 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 02:37:44.343811 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 02:37:44.345073 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 02:37:44.345100 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 02:37:44.345114 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 02:37:44.345116 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 02:37:44.345121 [INFO] Executing instruction: Generate environment file
2024/01/30 02:37:44.345146 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 02:37:44.345149 [INFO] start build docker app
2024/01/30 02:37:44.345560 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 02:37:44.345563 [INFO] fetching image and ports
2024/01/30 02:37:44.347531 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 02:37:44.347600 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 02:37:44.347609 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 02:37:44.347624 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 02:37:45.296835 [INFO] Login Succeeded

2024/01/30 02:37:45.296855 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 02:37:45.296883 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 02:37:45.296906 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 02:37:45.445667 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 02:37:45.445690 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 02:37:45.445694 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 02:37:45.445698 [INFO] start to build docker image
2024/01/30 02:37:45.445717 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 02:37:45.702883 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 02:37:45.702904 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 02:37:45.702907 [INFO] successfully build docker image
2024/01/30 02:37:45.702909 [INFO] save staging docker image id
2024/01/30 02:37:45.702921 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 02:37:45.728953 [INFO] c176d18fbf65

2024/01/30 02:37:45.729266 [INFO] Executing instruction: configure X-Ray
2024/01/30 02:37:45.729273 [INFO] X-Ray is not enabled.
2024/01/30 02:37:45.729276 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 02:37:45.734618 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 02:37:45.736189 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 02:37:45.749254 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 02:37:45.749281 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 02:37:45.760606 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 02:37:45.770277 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 02:37:45.780657 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 02:37:45.901642 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 02:37:46.272562 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 02:37:46.272647 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 02:37:46.592023 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 02:37:46.612092 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 02:37:46.929088 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 02:37:46.939726 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 02:37:46.949042 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 02:37:47.275875 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 02:37:47.295645 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 02:37:47.625042 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 02:37:47.625077 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 02:37:47.658920 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 02:37:47.674533 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 02:37:47.791965 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 02:37:47.792943 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 02:37:47.793885 [INFO] Executing instruction: configure log streaming
2024/01/30 02:37:47.794017 [INFO] log streaming is not enabled
2024/01/30 02:37:47.794023 [INFO] disable log stream
2024/01/30 02:37:47.794045 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 02:37:47.818765 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 02:37:47.837926 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 02:37:47.837950 [INFO] Checking if logs need forced rotation
2024/01/30 02:37:47.837971 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 02:37:48.341844 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 02:37:48.893593 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 02:37:48.895779 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 02:37:49.380078 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 02:37:49.399852 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 02:37:49.399868 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 02:37:49.399880 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 02:37:49.859598 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 02:37:49.859625 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 02:37:49.859650 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 02:37:49.859653 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 02:37:49.859677 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 02:37:49.859690 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 02:37:49.859693 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 02:37:49.859699 [INFO] Executing instruction: stop X-Ray
2024/01/30 02:37:49.859702 [INFO] stop X-Ray ...
2024/01/30 02:37:49.859714 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 02:37:49.876468 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 02:37:49.876494 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 02:37:49.893918 [INFO] Executing instruction: Run Docker Container
2024/01/30 02:37:49.893947 [INFO] stop currently running containers...
2024/01/30 02:37:49.893956 [INFO] detected old app is not docker compose app
2024/01/30 02:37:49.893967 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 02:37:49.942716 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 02:37:49.958238 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 02:37:49.958271 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 02:37:49.972126 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 02:37:49.972159 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 02:37:49.988222 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 02:37:49.988270 [INFO] stopping current container: 61c2d0f82147
2024/01/30 02:37:49.988283 [INFO] Running command /bin/sh -c docker ps | grep -q 61c2d0f82147
2024/01/30 02:37:50.009348 [INFO] Running command /bin/sh -c docker ps | grep -q 61c2d0f82147
2024/01/30 02:37:50.037059 [INFO] Pruning containers ...
2024/01/30 02:37:50.037081 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 02:37:50.056646 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 02:37:50.056683 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 02:37:50.077312 [INFO] Total reclaimed space: 0B

2024/01/30 02:37:50.077341 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 02:37:50.096573 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 02:37:50.096602 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 02:37:50.117872 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 02:37:50.117892 [INFO] Removing /var/app/current/ if it exists
2024/01/30 02:37:50.118044 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 02:37:50.118062 [INFO] detected new app is not docker compose app
2024/01/30 02:37:50.118109 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 02:37:50.551939 [INFO] 376c88b71b16cd40934b521ec14863ac3420c8ab09870ed0cc08308214d31f37

2024/01/30 02:37:55.552562 [INFO] Running command /bin/sh -c docker ps | grep -q 376c88b71b16
2024/01/30 02:37:55.605489 [ERROR] docker container quit unexpectedly on 2024-01-30 02:37:55.605478393 +0000 UTC: Command /bin/sh -c docker ps | grep -q 376c88b71b16 failed with error exit status 1
2024/01/30 02:37:55.605532 [INFO] Running command /bin/sh -c docker logs 376c88b71b16
2024/01/30 02:37:55.650423 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 376c88b71b16: Command /bin/sh -c docker ps | grep -q 376c88b71b16 failed with error exit status 1 

2024/01/30 02:37:55.650432 [INFO] Executing cleanup logic
2024/01/30 02:37:55.650650 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 03:37:56.697296 [INFO] Starting...
2024/01/30 03:37:56.697439 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 03:37:56.697468 [INFO] reading event message file
2024/01/30 03:37:56.699690 [INFO] Engine received EB command userdata-exec

2024/01/30 03:37:56.712656 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 03:37:57.116681 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 03:37:57.593146 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 03:37:57.593290 [INFO] Engine command: (self-startup)

2024/01/30 03:37:57.593300 [INFO] Downloading EB Application...
2024/01/30 03:37:57.593303 [INFO] Region: eu-west-1
2024/01/30 03:37:57.593306 [INFO] envID: e-8gmkc7rmw6
2024/01/30 03:37:57.593310 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 03:37:57.593313 [INFO] Using manifest file name from command request
2024/01/30 03:37:57.593331 [INFO] Unable to get version manifest file.
2024/01/30 03:37:57.593334 [INFO] Downloading latest manifest available.
2024/01/30 03:37:57.593337 [INFO] Download latest app version manifest
2024/01/30 03:37:57.593459 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 03:37:57.634056 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 03:37:57.634261 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 03:37:57.643846 [INFO] Download successful124bytes downloaded
2024/01/30 03:37:57.643973 [INFO] Trying to read and parse version manifest...
2024/01/30 03:37:57.644047 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 03:37:57.671695 [INFO] Download successful264bytes downloaded
2024/01/30 03:37:57.672050 [INFO] Executing instruction: SyncClock
2024/01/30 03:37:57.672057 [INFO] Starting SyncClock
2024/01/30 03:37:57.672070 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 03:37:57.677836 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 03:37:34 2024
System time     : 0.000000666 seconds slow of NTP time
Last offset     : -0.000001094 seconds
RMS offset      : 0.000001596 seconds
Frequency       : 0.633 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.025 ppm
Root delay      : 0.000427906 seconds
Root dispersion : 0.000490487 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 03:37:57.677855 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 03:37:57.681870 [INFO] 200 OK

2024/01/30 03:37:57.681962 [INFO] Skipping Configure OS
2024/01/30 03:37:57.681967 [INFO] Skipping LockRepo
2024/01/30 03:37:57.681971 [INFO] Skipping GenerateEBBanner
2024/01/30 03:37:57.681975 [INFO] Skipping Install Process Manager
2024/01/30 03:37:57.681979 [INFO] Skipping install syslog
2024/01/30 03:37:57.681983 [INFO] Skipping install cron
2024/01/30 03:37:57.681987 [INFO] Skipping install proxy
2024/01/30 03:37:57.681991 [INFO] Skipping installhealthd
2024/01/30 03:37:57.681994 [INFO] Skipping Install Log Streaming Manager
2024/01/30 03:37:57.681998 [INFO] Skipping install X-Ray
2024/01/30 03:37:57.682002 [INFO] Skipping install Third Party License
2024/01/30 03:37:57.682007 [INFO] Skipping installSqsd
2024/01/30 03:37:57.682010 [INFO] Skipping bootstraphealthd
2024/01/30 03:37:57.682014 [INFO] Skipping Install yum packages
2024/01/30 03:37:57.682018 [INFO] Skipping install docker-compose
2024/01/30 03:37:57.682021 [INFO] Skipping Configure Docker Daemon
2024/01/30 03:37:57.682025 [INFO] Skipping MarkBaked
2024/01/30 03:37:57.682031 [INFO] Skipping TuneSystemSettings
2024/01/30 03:37:57.682033 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 03:37:57.682035 [INFO] Initialize LogRotate files and directories
2024/01/30 03:37:57.695956 [INFO] Skipping BootstrapCFNHup
2024/01/30 03:37:57.695966 [INFO] Executing instruction: StartCFNHup
2024/01/30 03:37:57.695970 [INFO] Start cfn-hup
2024/01/30 03:37:57.695987 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 03:37:57.711730 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 03:37:57.723210 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 03:37:57.723274 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 03:37:57.723278 [INFO] Executing instruction: Start Docker
2024/01/30 03:37:57.723281 [INFO] Starting Docker...
2024/01/30 03:37:57.723363 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 03:37:57.724491 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 03:37:57.725794 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 03:37:58.179790 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 03:37:58.194662 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 03:37:58.194694 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 03:37:58.206302 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 03:37:58.215583 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 03:37:58.226447 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 03:37:58.263729 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 03:37:58.263788 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 03:37:58.673237 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 03:37:58.967494 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 03:37:58.979337 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 03:37:59.297682 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 03:37:59.306667 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 03:37:59.321314 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 03:37:59.331542 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 03:38:00.590374 [INFO] Skipping Setup Docker Options
2024/01/30 03:38:00.590395 [INFO] Skipping MarkBootstrapped
2024/01/30 03:38:00.590399 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 03:38:00.590507 [INFO] Starting SwitchCFNStack
2024/01/30 03:38:00.590513 [INFO] Executing instruction: stopSqsd
2024/01/30 03:38:00.590516 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 03:38:00.590519 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 03:38:00.590523 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 03:38:00.590541 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 03:38:01.184868 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 03:38:01.184906 [INFO] Executing instruction: StagedockerApplication
2024/01/30 03:38:01.184921 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 03:38:01.206632 [INFO] Pruning containers ...
2024/01/30 03:38:01.206668 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 03:38:01.229420 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
376c88b71b16   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             infallible_shannon

2024/01/30 03:38:01.229452 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 03:38:01.264690 [INFO] Deleted Containers:
376c88b71b16cd40934b521ec14863ac3420c8ab09870ed0cc08308214d31f37

Total reclaimed space: 0B

2024/01/30 03:38:01.264729 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 03:38:01.316796 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 03:38:01.317192 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 03:38:01.337768 [INFO] application/json

2024/01/30 03:38:01.337796 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 03:38:01.521009 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 03:38:01.521298 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 03:38:01.523313 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 03:38:01.523356 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 03:38:01.523375 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 03:38:01.523378 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 03:38:01.523382 [INFO] Executing instruction: Generate environment file
2024/01/30 03:38:01.523423 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 03:38:01.523427 [INFO] start build docker app
2024/01/30 03:38:01.524007 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 03:38:01.524015 [INFO] fetching image and ports
2024/01/30 03:38:01.525855 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 03:38:01.525934 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 03:38:01.525947 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 03:38:01.525958 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 03:38:02.817732 [INFO] Login Succeeded

2024/01/30 03:38:02.817751 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 03:38:02.817758 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 03:38:02.817820 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 03:38:02.967601 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 03:38:02.967627 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 03:38:02.967630 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 03:38:02.967634 [INFO] start to build docker image
2024/01/30 03:38:02.967649 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 03:38:03.279650 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 03:38:03.279683 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 03:38:03.279688 [INFO] successfully build docker image
2024/01/30 03:38:03.279690 [INFO] save staging docker image id
2024/01/30 03:38:03.279706 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 03:38:03.300776 [INFO] c176d18fbf65

2024/01/30 03:38:03.300902 [INFO] Executing instruction: configure X-Ray
2024/01/30 03:38:03.300908 [INFO] X-Ray is not enabled.
2024/01/30 03:38:03.300912 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 03:38:03.306726 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 03:38:03.308524 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 03:38:03.322899 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 03:38:03.322938 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 03:38:03.334079 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 03:38:03.343448 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 03:38:03.356121 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 03:38:03.421336 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 03:38:03.848119 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 03:38:03.848207 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 03:38:04.182799 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 03:38:04.197366 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 03:38:04.554730 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 03:38:04.564620 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 03:38:04.574663 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 03:38:04.949922 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 03:38:04.960278 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 03:38:05.272873 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 03:38:05.272912 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 03:38:05.306535 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 03:38:05.316326 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 03:38:05.428218 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 03:38:05.429177 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 03:38:05.430199 [INFO] Executing instruction: configure log streaming
2024/01/30 03:38:05.430209 [INFO] log streaming is not enabled
2024/01/30 03:38:05.430213 [INFO] disable log stream
2024/01/30 03:38:05.430233 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 03:38:05.454127 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 03:38:05.479857 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 03:38:05.479882 [INFO] Checking if logs need forced rotation
2024/01/30 03:38:05.479906 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 03:38:06.051160 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 03:38:06.579719 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 03:38:06.581437 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 03:38:07.137199 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 03:38:07.152915 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 03:38:07.152931 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 03:38:07.152950 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 03:38:07.580810 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 03:38:07.580832 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 03:38:07.580861 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 03:38:07.580865 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 03:38:07.580887 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 03:38:07.580902 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 03:38:07.580905 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 03:38:07.580909 [INFO] Executing instruction: stop X-Ray
2024/01/30 03:38:07.580912 [INFO] stop X-Ray ...
2024/01/30 03:38:07.580924 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 03:38:07.597219 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 03:38:07.597257 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 03:38:07.613338 [INFO] Executing instruction: Run Docker Container
2024/01/30 03:38:07.613380 [INFO] stop currently running containers...
2024/01/30 03:38:07.613390 [INFO] detected old app is not docker compose app
2024/01/30 03:38:07.613402 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 03:38:07.693072 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 03:38:07.728150 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 03:38:07.728185 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 03:38:07.762889 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 03:38:07.762932 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 03:38:07.809229 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 03:38:07.809289 [INFO] stopping current container: 376c88b71b16
2024/01/30 03:38:07.809302 [INFO] Running command /bin/sh -c docker ps | grep -q 376c88b71b16
2024/01/30 03:38:07.843969 [INFO] Running command /bin/sh -c docker ps | grep -q 376c88b71b16
2024/01/30 03:38:07.880324 [INFO] Pruning containers ...
2024/01/30 03:38:07.880348 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 03:38:07.915447 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 03:38:07.915478 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 03:38:07.941328 [INFO] Total reclaimed space: 0B

2024/01/30 03:38:07.941381 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 03:38:07.961922 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 03:38:07.961953 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 03:38:07.981460 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 03:38:07.981485 [INFO] Removing /var/app/current/ if it exists
2024/01/30 03:38:07.981648 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 03:38:07.981665 [INFO] detected new app is not docker compose app
2024/01/30 03:38:07.981720 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 03:38:08.405116 [INFO] f7ea391cba8e63aefbf36ec23a2a2741f0d69b9d150c1941f261372039608517

2024/01/30 03:38:13.406179 [INFO] Running command /bin/sh -c docker ps | grep -q f7ea391cba8e
2024/01/30 03:38:13.445467 [ERROR] docker container quit unexpectedly on 2024-01-30 03:38:13.445448221 +0000 UTC: Command /bin/sh -c docker ps | grep -q f7ea391cba8e failed with error exit status 1
2024/01/30 03:38:13.445499 [INFO] Running command /bin/sh -c docker logs f7ea391cba8e
2024/01/30 03:38:13.501335 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f7ea391cba8e: Command /bin/sh -c docker ps | grep -q f7ea391cba8e failed with error exit status 1 

2024/01/30 03:38:13.501365 [INFO] Executing cleanup logic
2024/01/30 03:38:13.501689 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 04:38:14.638997 [INFO] Starting...
2024/01/30 04:38:14.639036 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 04:38:14.639061 [INFO] reading event message file
2024/01/30 04:38:14.639769 [INFO] Engine received EB command userdata-exec

2024/01/30 04:38:14.647080 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 04:38:15.130716 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 04:38:15.556885 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 04:38:15.556996 [INFO] Engine command: (self-startup)

2024/01/30 04:38:15.557005 [INFO] Downloading EB Application...
2024/01/30 04:38:15.557009 [INFO] Region: eu-west-1
2024/01/30 04:38:15.557012 [INFO] envID: e-8gmkc7rmw6
2024/01/30 04:38:15.557018 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 04:38:15.557021 [INFO] Using manifest file name from command request
2024/01/30 04:38:15.557039 [INFO] Unable to get version manifest file.
2024/01/30 04:38:15.557042 [INFO] Downloading latest manifest available.
2024/01/30 04:38:15.557052 [INFO] Download latest app version manifest
2024/01/30 04:38:15.557231 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 04:38:15.600266 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 04:38:15.600444 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 04:38:15.612760 [INFO] Download successful124bytes downloaded
2024/01/30 04:38:15.612906 [INFO] Trying to read and parse version manifest...
2024/01/30 04:38:15.612981 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 04:38:15.639675 [INFO] Download successful264bytes downloaded
2024/01/30 04:38:15.640020 [INFO] Executing instruction: SyncClock
2024/01/30 04:38:15.640027 [INFO] Starting SyncClock
2024/01/30 04:38:15.640038 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 04:38:15.645399 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 04:37:43 2024
System time     : 0.000000116 seconds fast of NTP time
Last offset     : +0.000003397 seconds
RMS offset      : 0.000003854 seconds
Frequency       : 0.970 ppm fast
Residual freq   : +0.004 ppm
Skew            : 0.149 ppm
Root delay      : 0.000461185 seconds
Root dispersion : 0.000346470 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 04:38:15.645434 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 04:38:15.649467 [INFO] 200 OK

2024/01/30 04:38:15.649570 [INFO] Skipping Configure OS
2024/01/30 04:38:15.649575 [INFO] Skipping LockRepo
2024/01/30 04:38:15.649579 [INFO] Skipping GenerateEBBanner
2024/01/30 04:38:15.649584 [INFO] Skipping Install Process Manager
2024/01/30 04:38:15.649588 [INFO] Skipping install syslog
2024/01/30 04:38:15.649592 [INFO] Skipping install cron
2024/01/30 04:38:15.649595 [INFO] Skipping install proxy
2024/01/30 04:38:15.649599 [INFO] Skipping installhealthd
2024/01/30 04:38:15.649603 [INFO] Skipping Install Log Streaming Manager
2024/01/30 04:38:15.649607 [INFO] Skipping install X-Ray
2024/01/30 04:38:15.649610 [INFO] Skipping install Third Party License
2024/01/30 04:38:15.649615 [INFO] Skipping installSqsd
2024/01/30 04:38:15.649619 [INFO] Skipping bootstraphealthd
2024/01/30 04:38:15.649623 [INFO] Skipping Install yum packages
2024/01/30 04:38:15.649627 [INFO] Skipping install docker-compose
2024/01/30 04:38:15.649630 [INFO] Skipping Configure Docker Daemon
2024/01/30 04:38:15.649634 [INFO] Skipping MarkBaked
2024/01/30 04:38:15.649638 [INFO] Skipping TuneSystemSettings
2024/01/30 04:38:15.649640 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 04:38:15.649642 [INFO] Initialize LogRotate files and directories
2024/01/30 04:38:15.673795 [INFO] Skipping BootstrapCFNHup
2024/01/30 04:38:15.673806 [INFO] Executing instruction: StartCFNHup
2024/01/30 04:38:15.673809 [INFO] Start cfn-hup
2024/01/30 04:38:15.673829 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 04:38:15.686639 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 04:38:15.694623 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 04:38:15.694664 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 04:38:15.694668 [INFO] Executing instruction: Start Docker
2024/01/30 04:38:15.694671 [INFO] Starting Docker...
2024/01/30 04:38:15.694756 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 04:38:15.695711 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 04:38:15.696553 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 04:38:16.179921 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 04:38:16.195085 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 04:38:16.195120 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 04:38:16.204858 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 04:38:16.212942 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 04:38:16.224365 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 04:38:16.263069 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 04:38:16.263118 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 04:38:16.612948 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 04:38:16.884281 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 04:38:16.908028 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 04:38:17.231489 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 04:38:17.241439 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 04:38:17.255255 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 04:38:17.265987 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 04:38:18.521676 [INFO] Skipping Setup Docker Options
2024/01/30 04:38:18.521707 [INFO] Skipping MarkBootstrapped
2024/01/30 04:38:18.521712 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 04:38:18.521833 [INFO] Starting SwitchCFNStack
2024/01/30 04:38:18.521838 [INFO] Executing instruction: stopSqsd
2024/01/30 04:38:18.521842 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 04:38:18.521846 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 04:38:18.521849 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 04:38:18.521874 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 04:38:19.056710 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 04:38:19.056858 [INFO] Executing instruction: StagedockerApplication
2024/01/30 04:38:19.056877 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 04:38:19.086817 [INFO] Pruning containers ...
2024/01/30 04:38:19.086853 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 04:38:19.109769 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f7ea391cba8e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             recursing_gates

2024/01/30 04:38:19.109803 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 04:38:19.155529 [INFO] Deleted Containers:
f7ea391cba8e63aefbf36ec23a2a2741f0d69b9d150c1941f261372039608517

Total reclaimed space: 0B

2024/01/30 04:38:19.155561 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 04:38:19.179410 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 04:38:19.179709 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 04:38:19.184589 [INFO] application/json

2024/01/30 04:38:19.184621 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 04:38:19.283647 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 04:38:19.283853 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 04:38:19.285194 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 04:38:19.285218 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 04:38:19.285233 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 04:38:19.285236 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 04:38:19.285240 [INFO] Executing instruction: Generate environment file
2024/01/30 04:38:19.285265 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 04:38:19.285268 [INFO] start build docker app
2024/01/30 04:38:19.285646 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 04:38:19.285649 [INFO] fetching image and ports
2024/01/30 04:38:19.287711 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 04:38:19.287809 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 04:38:19.287820 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 04:38:19.287835 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 04:38:20.272577 [INFO] Login Succeeded

2024/01/30 04:38:20.272596 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 04:38:20.272601 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 04:38:20.272616 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 04:38:20.413793 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 04:38:20.413815 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 04:38:20.413820 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 04:38:20.413824 [INFO] start to build docker image
2024/01/30 04:38:20.413846 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 04:38:20.688923 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 04:38:20.688948 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 04:38:20.688952 [INFO] successfully build docker image
2024/01/30 04:38:20.688955 [INFO] save staging docker image id
2024/01/30 04:38:20.689040 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 04:38:20.710300 [INFO] c176d18fbf65

2024/01/30 04:38:20.710419 [INFO] Executing instruction: configure X-Ray
2024/01/30 04:38:20.710426 [INFO] X-Ray is not enabled.
2024/01/30 04:38:20.710430 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 04:38:20.716877 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 04:38:20.718669 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 04:38:20.731795 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 04:38:20.731830 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 04:38:20.743012 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 04:38:20.751691 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 04:38:20.762631 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 04:38:20.840180 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 04:38:21.175248 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 04:38:21.175338 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 04:38:21.496545 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 04:38:21.509327 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 04:38:21.929922 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 04:38:21.942182 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 04:38:21.955343 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 04:38:22.233475 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 04:38:22.243145 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 04:38:22.562456 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 04:38:22.562491 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 04:38:22.575461 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 04:38:22.583996 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 04:38:22.708234 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 04:38:22.709280 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 04:38:22.710303 [INFO] Executing instruction: configure log streaming
2024/01/30 04:38:22.710313 [INFO] log streaming is not enabled
2024/01/30 04:38:22.710317 [INFO] disable log stream
2024/01/30 04:38:22.710334 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 04:38:22.729877 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 04:38:22.747104 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 04:38:22.747127 [INFO] Checking if logs need forced rotation
2024/01/30 04:38:22.747148 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 04:38:23.362644 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 04:38:23.880912 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 04:38:23.882651 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 04:38:24.429200 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 04:38:24.451623 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 04:38:24.451644 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 04:38:24.451659 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 04:38:24.926275 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 04:38:24.926299 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 04:38:24.926323 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 04:38:24.926326 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 04:38:24.926348 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 04:38:24.926360 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 04:38:24.926362 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 04:38:24.926367 [INFO] Executing instruction: stop X-Ray
2024/01/30 04:38:24.926370 [INFO] stop X-Ray ...
2024/01/30 04:38:24.926381 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 04:38:24.944560 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 04:38:24.945168 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 04:38:24.964411 [INFO] Executing instruction: Run Docker Container
2024/01/30 04:38:24.964441 [INFO] stop currently running containers...
2024/01/30 04:38:24.964450 [INFO] detected old app is not docker compose app
2024/01/30 04:38:24.964464 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 04:38:25.004484 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 04:38:25.025926 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 04:38:25.025964 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 04:38:25.040724 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 04:38:25.040754 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 04:38:25.055537 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 04:38:25.055587 [INFO] stopping current container: f7ea391cba8e
2024/01/30 04:38:25.055600 [INFO] Running command /bin/sh -c docker ps | grep -q f7ea391cba8e
2024/01/30 04:38:25.088974 [INFO] Running command /bin/sh -c docker ps | grep -q f7ea391cba8e
2024/01/30 04:38:25.117749 [INFO] Pruning containers ...
2024/01/30 04:38:25.117774 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 04:38:25.140418 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 04:38:25.140447 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 04:38:25.164300 [INFO] Total reclaimed space: 0B

2024/01/30 04:38:25.164329 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 04:38:25.186479 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 04:38:25.186516 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 04:38:25.208261 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 04:38:25.208281 [INFO] Removing /var/app/current/ if it exists
2024/01/30 04:38:25.208454 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 04:38:25.208475 [INFO] detected new app is not docker compose app
2024/01/30 04:38:25.208527 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 04:38:25.666906 [INFO] 64903772f795d53385571784a8f78bd9e08b20c05aff4182cb1c28639b11baff

2024/01/30 04:38:30.671312 [INFO] Running command /bin/sh -c docker ps | grep -q 64903772f795
2024/01/30 04:38:30.699858 [ERROR] docker container quit unexpectedly on 2024-01-30 04:38:30.699841804 +0000 UTC: Command /bin/sh -c docker ps | grep -q 64903772f795 failed with error exit status 1
2024/01/30 04:38:30.699929 [INFO] Running command /bin/sh -c docker logs 64903772f795
2024/01/30 04:38:30.752933 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 64903772f795: Command /bin/sh -c docker ps | grep -q 64903772f795 failed with error exit status 1 

2024/01/30 04:38:30.752947 [INFO] Executing cleanup logic
2024/01/30 04:38:30.753876 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 05:38:31.809529 [INFO] Starting...
2024/01/30 05:38:31.809572 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 05:38:31.809595 [INFO] reading event message file
2024/01/30 05:38:31.810346 [INFO] Engine received EB command userdata-exec

2024/01/30 05:38:31.817532 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 05:38:32.248920 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 05:38:32.728640 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 05:38:32.728737 [INFO] Engine command: (self-startup)

2024/01/30 05:38:32.728746 [INFO] Downloading EB Application...
2024/01/30 05:38:32.728749 [INFO] Region: eu-west-1
2024/01/30 05:38:32.728752 [INFO] envID: e-8gmkc7rmw6
2024/01/30 05:38:32.728756 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 05:38:32.728759 [INFO] Using manifest file name from command request
2024/01/30 05:38:32.728775 [INFO] Unable to get version manifest file.
2024/01/30 05:38:32.728778 [INFO] Downloading latest manifest available.
2024/01/30 05:38:32.728780 [INFO] Download latest app version manifest
2024/01/30 05:38:32.728906 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 05:38:32.767347 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 05:38:32.767525 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 05:38:32.779528 [INFO] Download successful124bytes downloaded
2024/01/30 05:38:32.779645 [INFO] Trying to read and parse version manifest...
2024/01/30 05:38:32.779711 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 05:38:32.804223 [INFO] Download successful264bytes downloaded
2024/01/30 05:38:32.804545 [INFO] Executing instruction: SyncClock
2024/01/30 05:38:32.804550 [INFO] Starting SyncClock
2024/01/30 05:38:32.804559 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 05:38:32.810508 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 05:38:24 2024
System time     : 0.000002098 seconds fast of NTP time
Last offset     : +0.000001258 seconds
RMS offset      : 0.000004819 seconds
Frequency       : 0.652 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.064 ppm
Root delay      : 0.000436615 seconds
Root dispersion : 0.000337387 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/30 05:38:32.810526 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 05:38:32.815250 [INFO] 200 OK

2024/01/30 05:38:32.815348 [INFO] Skipping Configure OS
2024/01/30 05:38:32.815354 [INFO] Skipping LockRepo
2024/01/30 05:38:32.815358 [INFO] Skipping GenerateEBBanner
2024/01/30 05:38:32.815362 [INFO] Skipping Install Process Manager
2024/01/30 05:38:32.815366 [INFO] Skipping install syslog
2024/01/30 05:38:32.815370 [INFO] Skipping install cron
2024/01/30 05:38:32.815374 [INFO] Skipping install proxy
2024/01/30 05:38:32.815377 [INFO] Skipping installhealthd
2024/01/30 05:38:32.815381 [INFO] Skipping Install Log Streaming Manager
2024/01/30 05:38:32.815385 [INFO] Skipping install X-Ray
2024/01/30 05:38:32.815389 [INFO] Skipping install Third Party License
2024/01/30 05:38:32.815394 [INFO] Skipping installSqsd
2024/01/30 05:38:32.815398 [INFO] Skipping bootstraphealthd
2024/01/30 05:38:32.815401 [INFO] Skipping Install yum packages
2024/01/30 05:38:32.815406 [INFO] Skipping install docker-compose
2024/01/30 05:38:32.815411 [INFO] Skipping Configure Docker Daemon
2024/01/30 05:38:32.815417 [INFO] Skipping MarkBaked
2024/01/30 05:38:32.815425 [INFO] Skipping TuneSystemSettings
2024/01/30 05:38:32.815428 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 05:38:32.815430 [INFO] Initialize LogRotate files and directories
2024/01/30 05:38:32.832692 [INFO] Skipping BootstrapCFNHup
2024/01/30 05:38:32.832704 [INFO] Executing instruction: StartCFNHup
2024/01/30 05:38:32.832707 [INFO] Start cfn-hup
2024/01/30 05:38:32.832725 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 05:38:32.849711 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 05:38:32.862934 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 05:38:32.862970 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 05:38:32.863047 [INFO] Executing instruction: Start Docker
2024/01/30 05:38:32.863051 [INFO] Starting Docker...
2024/01/30 05:38:32.863135 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 05:38:32.864424 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 05:38:32.865618 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 05:38:33.141841 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 05:38:33.160903 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 05:38:33.160938 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 05:38:33.172393 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 05:38:33.182154 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 05:38:33.192322 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 05:38:33.273764 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 05:38:33.273823 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 05:38:33.572669 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 05:38:33.906958 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 05:38:33.918613 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 05:38:34.195881 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 05:38:34.204939 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 05:38:34.219528 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 05:38:34.231588 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 05:38:35.371970 [INFO] Skipping Setup Docker Options
2024/01/30 05:38:35.372198 [INFO] Skipping MarkBootstrapped
2024/01/30 05:38:35.372205 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 05:38:35.372357 [INFO] Starting SwitchCFNStack
2024/01/30 05:38:35.372364 [INFO] Executing instruction: stopSqsd
2024/01/30 05:38:35.372368 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 05:38:35.372378 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 05:38:35.372381 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 05:38:35.372397 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 05:38:35.895862 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 05:38:35.895951 [INFO] Executing instruction: StagedockerApplication
2024/01/30 05:38:35.895968 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 05:38:35.916797 [INFO] Pruning containers ...
2024/01/30 05:38:35.916828 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 05:38:35.947686 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
64903772f795   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             epic_moore

2024/01/30 05:38:35.947755 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 05:38:35.978445 [INFO] Deleted Containers:
64903772f795d53385571784a8f78bd9e08b20c05aff4182cb1c28639b11baff

Total reclaimed space: 0B

2024/01/30 05:38:35.978472 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 05:38:35.999136 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 05:38:35.999479 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 05:38:36.006457 [INFO] application/json

2024/01/30 05:38:36.006488 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 05:38:36.105487 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 05:38:36.105805 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 05:38:36.107644 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 05:38:36.107740 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 05:38:36.107801 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 05:38:36.107806 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 05:38:36.107811 [INFO] Executing instruction: Generate environment file
2024/01/30 05:38:36.107848 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 05:38:36.107852 [INFO] start build docker app
2024/01/30 05:38:36.108311 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 05:38:36.108315 [INFO] fetching image and ports
2024/01/30 05:38:36.110546 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 05:38:36.110656 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 05:38:36.110667 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 05:38:36.110676 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 05:38:37.110204 [INFO] Login Succeeded

2024/01/30 05:38:37.110223 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 05:38:37.110231 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 05:38:37.110256 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 05:38:37.255109 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 05:38:37.255131 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 05:38:37.255143 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 05:38:37.255146 [INFO] start to build docker image
2024/01/30 05:38:37.255160 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 05:38:37.508331 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 05:38:37.508360 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 05:38:37.508365 [INFO] successfully build docker image
2024/01/30 05:38:37.508368 [INFO] save staging docker image id
2024/01/30 05:38:37.508383 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 05:38:37.530915 [INFO] c176d18fbf65

2024/01/30 05:38:37.531041 [INFO] Executing instruction: configure X-Ray
2024/01/30 05:38:37.531048 [INFO] X-Ray is not enabled.
2024/01/30 05:38:37.531051 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 05:38:37.536815 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 05:38:37.538406 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 05:38:37.550735 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 05:38:37.550772 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 05:38:37.562223 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 05:38:37.570772 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 05:38:37.582318 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 05:38:37.638459 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 05:38:37.950559 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 05:38:37.950643 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 05:38:38.265311 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 05:38:38.280218 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 05:38:38.597571 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 05:38:38.609800 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 05:38:38.623496 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 05:38:38.926001 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 05:38:38.936181 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 05:38:39.209481 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 05:38:39.209513 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 05:38:39.222451 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 05:38:39.234012 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 05:38:39.298309 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 05:38:39.299215 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 05:38:39.300243 [INFO] Executing instruction: configure log streaming
2024/01/30 05:38:39.300253 [INFO] log streaming is not enabled
2024/01/30 05:38:39.300257 [INFO] disable log stream
2024/01/30 05:38:39.300273 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 05:38:39.319908 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 05:38:39.338695 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 05:38:39.338724 [INFO] Checking if logs need forced rotation
2024/01/30 05:38:39.338745 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 05:38:39.905837 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 05:38:40.398677 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 05:38:40.400525 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 05:38:40.457824 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 05:38:40.475319 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 05:38:40.475339 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 05:38:40.475352 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 05:38:40.867409 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 05:38:40.867431 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 05:38:40.867459 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 05:38:40.867462 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 05:38:40.867482 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 05:38:40.867493 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 05:38:40.867495 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 05:38:40.867500 [INFO] Executing instruction: stop X-Ray
2024/01/30 05:38:40.867502 [INFO] stop X-Ray ...
2024/01/30 05:38:40.867514 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 05:38:40.887031 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 05:38:40.887090 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 05:38:40.914537 [INFO] Executing instruction: Run Docker Container
2024/01/30 05:38:40.914568 [INFO] stop currently running containers...
2024/01/30 05:38:40.914585 [INFO] detected old app is not docker compose app
2024/01/30 05:38:40.914603 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 05:38:40.962515 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 05:38:40.976937 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 05:38:40.976972 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 05:38:40.999718 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 05:38:40.999753 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 05:38:41.018041 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 05:38:41.018096 [INFO] stopping current container: 64903772f795
2024/01/30 05:38:41.018109 [INFO] Running command /bin/sh -c docker ps | grep -q 64903772f795
2024/01/30 05:38:41.040536 [INFO] Running command /bin/sh -c docker ps | grep -q 64903772f795
2024/01/30 05:38:41.062017 [INFO] Pruning containers ...
2024/01/30 05:38:41.062040 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 05:38:41.081958 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 05:38:41.081991 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 05:38:41.104763 [INFO] Total reclaimed space: 0B

2024/01/30 05:38:41.104786 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 05:38:41.130005 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 05:38:41.130053 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 05:38:41.153879 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 05:38:41.153904 [INFO] Removing /var/app/current/ if it exists
2024/01/30 05:38:41.154076 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 05:38:41.154100 [INFO] detected new app is not docker compose app
2024/01/30 05:38:41.154150 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 05:38:41.557027 [INFO] 2c6d5f24290baf8141b5221b7cb1e7839e419936246cb4dc05588ab018dad009

2024/01/30 05:38:46.561405 [INFO] Running command /bin/sh -c docker ps | grep -q 2c6d5f24290b
2024/01/30 05:38:46.594549 [ERROR] docker container quit unexpectedly on 2024-01-30 05:38:46.59452817 +0000 UTC: Command /bin/sh -c docker ps | grep -q 2c6d5f24290b failed with error exit status 1
2024/01/30 05:38:46.594577 [INFO] Running command /bin/sh -c docker logs 2c6d5f24290b
2024/01/30 05:38:46.617556 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 2c6d5f24290b: Command /bin/sh -c docker ps | grep -q 2c6d5f24290b failed with error exit status 1 

2024/01/30 05:38:46.617566 [INFO] Executing cleanup logic
2024/01/30 05:38:46.617781 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 06:38:47.784646 [INFO] Starting...
2024/01/30 06:38:47.784690 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 06:38:47.784718 [INFO] reading event message file
2024/01/30 06:38:47.786273 [INFO] Engine received EB command userdata-exec

2024/01/30 06:38:47.796452 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 06:38:48.239846 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 06:38:48.661608 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 06:38:48.661704 [INFO] Engine command: (self-startup)

2024/01/30 06:38:48.661712 [INFO] Downloading EB Application...
2024/01/30 06:38:48.661715 [INFO] Region: eu-west-1
2024/01/30 06:38:48.661718 [INFO] envID: e-8gmkc7rmw6
2024/01/30 06:38:48.661721 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 06:38:48.661725 [INFO] Using manifest file name from command request
2024/01/30 06:38:48.661738 [INFO] Unable to get version manifest file.
2024/01/30 06:38:48.661741 [INFO] Downloading latest manifest available.
2024/01/30 06:38:48.661744 [INFO] Download latest app version manifest
2024/01/30 06:38:48.661889 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 06:38:48.706311 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 06:38:48.706580 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 06:38:48.717760 [INFO] Download successful124bytes downloaded
2024/01/30 06:38:48.717891 [INFO] Trying to read and parse version manifest...
2024/01/30 06:38:48.717973 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 06:38:48.767283 [INFO] Download successful264bytes downloaded
2024/01/30 06:38:48.767637 [INFO] Executing instruction: SyncClock
2024/01/30 06:38:48.767643 [INFO] Starting SyncClock
2024/01/30 06:38:48.767652 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 06:38:48.773579 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 06:38:44 2024
System time     : 0.000001723 seconds slow of NTP time
Last offset     : -0.000001761 seconds
RMS offset      : 0.000006255 seconds
Frequency       : 0.728 ppm fast
Residual freq   : +0.025 ppm
Skew            : 0.293 ppm
Root delay      : 0.000437518 seconds
Root dispersion : 0.000272146 seconds
Update interval : 32.4 seconds
Leap status     : Normal

2024/01/30 06:38:48.773611 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 06:38:48.777910 [INFO] 200 OK

2024/01/30 06:38:48.777998 [INFO] Skipping Configure OS
2024/01/30 06:38:48.778003 [INFO] Skipping LockRepo
2024/01/30 06:38:48.778007 [INFO] Skipping GenerateEBBanner
2024/01/30 06:38:48.778011 [INFO] Skipping Install Process Manager
2024/01/30 06:38:48.778014 [INFO] Skipping install syslog
2024/01/30 06:38:48.778018 [INFO] Skipping install cron
2024/01/30 06:38:48.778022 [INFO] Skipping install proxy
2024/01/30 06:38:48.778026 [INFO] Skipping installhealthd
2024/01/30 06:38:48.778030 [INFO] Skipping Install Log Streaming Manager
2024/01/30 06:38:48.778034 [INFO] Skipping install X-Ray
2024/01/30 06:38:48.778038 [INFO] Skipping install Third Party License
2024/01/30 06:38:48.778043 [INFO] Skipping installSqsd
2024/01/30 06:38:48.778049 [INFO] Skipping bootstraphealthd
2024/01/30 06:38:48.778053 [INFO] Skipping Install yum packages
2024/01/30 06:38:48.778057 [INFO] Skipping install docker-compose
2024/01/30 06:38:48.778062 [INFO] Skipping Configure Docker Daemon
2024/01/30 06:38:48.778065 [INFO] Skipping MarkBaked
2024/01/30 06:38:48.778069 [INFO] Skipping TuneSystemSettings
2024/01/30 06:38:48.778071 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 06:38:48.778074 [INFO] Initialize LogRotate files and directories
2024/01/30 06:38:48.792261 [INFO] Skipping BootstrapCFNHup
2024/01/30 06:38:48.792273 [INFO] Executing instruction: StartCFNHup
2024/01/30 06:38:48.792276 [INFO] Start cfn-hup
2024/01/30 06:38:48.792294 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 06:38:48.808574 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 06:38:48.822995 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 06:38:48.823046 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 06:38:48.823050 [INFO] Executing instruction: Start Docker
2024/01/30 06:38:48.823054 [INFO] Starting Docker...
2024/01/30 06:38:48.823151 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 06:38:48.824344 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 06:38:48.825395 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 06:38:49.154680 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 06:38:49.170551 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 06:38:49.170586 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 06:38:49.182309 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 06:38:49.192304 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 06:38:49.207933 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 06:38:49.301190 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 06:38:49.301227 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 06:38:49.713492 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 06:38:50.059615 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 06:38:50.087174 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 06:38:50.373846 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 06:38:50.394279 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 06:38:50.411958 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 06:38:50.421144 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 06:38:51.745397 [INFO] Skipping Setup Docker Options
2024/01/30 06:38:51.745426 [INFO] Skipping MarkBootstrapped
2024/01/30 06:38:51.745430 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 06:38:51.745594 [INFO] Starting SwitchCFNStack
2024/01/30 06:38:51.745600 [INFO] Executing instruction: stopSqsd
2024/01/30 06:38:51.745603 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 06:38:51.745606 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 06:38:51.745609 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 06:38:51.745627 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 06:38:52.245632 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 06:38:52.245655 [INFO] Executing instruction: StagedockerApplication
2024/01/30 06:38:52.245668 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 06:38:52.266615 [INFO] Pruning containers ...
2024/01/30 06:38:52.266649 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 06:38:52.288056 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
2c6d5f24290b   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             vigorous_thompson

2024/01/30 06:38:52.288086 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 06:38:52.328440 [INFO] Deleted Containers:
2c6d5f24290baf8141b5221b7cb1e7839e419936246cb4dc05588ab018dad009

Total reclaimed space: 0B

2024/01/30 06:38:52.328467 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 06:38:52.349272 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 06:38:52.349526 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 06:38:52.352634 [INFO] application/json

2024/01/30 06:38:52.352660 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 06:38:52.442100 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 06:38:52.442256 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 06:38:52.443563 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 06:38:52.443832 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 06:38:52.443853 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 06:38:52.443856 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 06:38:52.443862 [INFO] Executing instruction: Generate environment file
2024/01/30 06:38:52.443891 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 06:38:52.443896 [INFO] start build docker app
2024/01/30 06:38:52.444294 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 06:38:52.444299 [INFO] fetching image and ports
2024/01/30 06:38:52.446050 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 06:38:52.446136 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 06:38:52.446151 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 06:38:52.446161 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 06:38:53.314228 [INFO] Login Succeeded

2024/01/30 06:38:53.314319 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 06:38:53.314326 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 06:38:53.314343 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 06:38:53.467883 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 06:38:53.467905 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 06:38:53.467909 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 06:38:53.467913 [INFO] start to build docker image
2024/01/30 06:38:53.467931 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 06:38:53.747699 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 06:38:53.747727 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 06:38:53.747741 [INFO] successfully build docker image
2024/01/30 06:38:53.747744 [INFO] save staging docker image id
2024/01/30 06:38:53.747758 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 06:38:53.772770 [INFO] c176d18fbf65

2024/01/30 06:38:53.772891 [INFO] Executing instruction: configure X-Ray
2024/01/30 06:38:53.772898 [INFO] X-Ray is not enabled.
2024/01/30 06:38:53.772901 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 06:38:53.777993 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 06:38:53.779777 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 06:38:53.800338 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 06:38:53.801646 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 06:38:53.812679 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 06:38:53.826369 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 06:38:53.844775 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 06:38:53.930227 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 06:38:54.248398 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 06:38:54.248490 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 06:38:54.564972 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 06:38:54.576251 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 06:38:54.896231 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 06:38:54.906115 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 06:38:54.914713 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 06:38:55.253375 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 06:38:55.264561 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 06:38:55.542638 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 06:38:55.542678 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 06:38:55.555057 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 06:38:55.563145 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 06:38:55.646184 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 06:38:55.647338 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 06:38:55.648334 [INFO] Executing instruction: configure log streaming
2024/01/30 06:38:55.648345 [INFO] log streaming is not enabled
2024/01/30 06:38:55.648349 [INFO] disable log stream
2024/01/30 06:38:55.648363 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 06:38:55.680406 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 06:38:55.699444 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 06:38:55.699469 [INFO] Checking if logs need forced rotation
2024/01/30 06:38:55.699492 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 06:38:56.225105 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 06:38:56.743547 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 06:38:56.745367 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 06:38:56.822965 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 06:38:56.850042 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 06:38:56.850120 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 06:38:56.850133 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 06:38:57.251544 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 06:38:57.251574 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 06:38:57.251599 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 06:38:57.251602 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 06:38:57.251623 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 06:38:57.251637 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 06:38:57.251640 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 06:38:57.251647 [INFO] Executing instruction: stop X-Ray
2024/01/30 06:38:57.251656 [INFO] stop X-Ray ...
2024/01/30 06:38:57.251667 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 06:38:57.267371 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 06:38:57.267406 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 06:38:57.285419 [INFO] Executing instruction: Run Docker Container
2024/01/30 06:38:57.285463 [INFO] stop currently running containers...
2024/01/30 06:38:57.285545 [INFO] detected old app is not docker compose app
2024/01/30 06:38:57.285559 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 06:38:57.332341 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 06:38:57.346091 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 06:38:57.346118 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 06:38:57.366188 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 06:38:57.366220 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 06:38:57.387194 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 06:38:57.387249 [INFO] stopping current container: 2c6d5f24290b
2024/01/30 06:38:57.387262 [INFO] Running command /bin/sh -c docker ps | grep -q 2c6d5f24290b
2024/01/30 06:38:57.414054 [INFO] Running command /bin/sh -c docker ps | grep -q 2c6d5f24290b
2024/01/30 06:38:57.440559 [INFO] Pruning containers ...
2024/01/30 06:38:57.440583 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 06:38:57.470312 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 06:38:57.470340 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 06:38:57.495676 [INFO] Total reclaimed space: 0B

2024/01/30 06:38:57.495717 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 06:38:57.517415 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 06:38:57.517447 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 06:38:57.539516 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 06:38:57.539543 [INFO] Removing /var/app/current/ if it exists
2024/01/30 06:38:57.539838 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 06:38:57.539859 [INFO] detected new app is not docker compose app
2024/01/30 06:38:57.539930 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 06:38:57.983307 [INFO] 4dc3a32eafe2fe449e0d48a45c940c19806bc5ffbd2b6c5a82fbceb896b25af6

2024/01/30 06:39:02.983706 [INFO] Running command /bin/sh -c docker ps | grep -q 4dc3a32eafe2
2024/01/30 06:39:03.024811 [ERROR] docker container quit unexpectedly on 2024-01-30 06:39:03.024796978 +0000 UTC: Command /bin/sh -c docker ps | grep -q 4dc3a32eafe2 failed with error exit status 1
2024/01/30 06:39:03.024842 [INFO] Running command /bin/sh -c docker logs 4dc3a32eafe2
2024/01/30 06:39:03.061094 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 4dc3a32eafe2: Command /bin/sh -c docker ps | grep -q 4dc3a32eafe2 failed with error exit status 1 

2024/01/30 06:39:03.061105 [INFO] Executing cleanup logic
2024/01/30 06:39:03.062545 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 07:39:04.120135 [INFO] Starting...
2024/01/30 07:39:04.120176 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 07:39:04.120199 [INFO] reading event message file
2024/01/30 07:39:04.120907 [INFO] Engine received EB command userdata-exec

2024/01/30 07:39:04.125734 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 07:39:04.548872 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 07:39:05.245108 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 07:39:05.248768 [INFO] Engine command: (self-startup)

2024/01/30 07:39:05.248837 [INFO] Downloading EB Application...
2024/01/30 07:39:05.248842 [INFO] Region: eu-west-1
2024/01/30 07:39:05.248845 [INFO] envID: e-8gmkc7rmw6
2024/01/30 07:39:05.248847 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 07:39:05.248850 [INFO] Using manifest file name from command request
2024/01/30 07:39:05.248865 [INFO] Unable to get version manifest file.
2024/01/30 07:39:05.248868 [INFO] Downloading latest manifest available.
2024/01/30 07:39:05.248901 [INFO] Download latest app version manifest
2024/01/30 07:39:05.249126 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 07:39:05.304487 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 07:39:05.304664 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 07:39:05.317583 [INFO] Download successful124bytes downloaded
2024/01/30 07:39:05.317788 [INFO] Trying to read and parse version manifest...
2024/01/30 07:39:05.318098 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 07:39:05.339373 [INFO] Download successful264bytes downloaded
2024/01/30 07:39:05.339952 [INFO] Executing instruction: SyncClock
2024/01/30 07:39:05.339957 [INFO] Starting SyncClock
2024/01/30 07:39:05.339970 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 07:39:05.346046 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 07:38:50 2024
System time     : 0.000000120 seconds fast of NTP time
Last offset     : -0.000000862 seconds
RMS offset      : 0.000003638 seconds
Frequency       : 0.535 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.054 ppm
Root delay      : 0.000468195 seconds
Root dispersion : 0.000284981 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/30 07:39:05.346068 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 07:39:05.350680 [INFO] 200 OK

2024/01/30 07:39:05.350774 [INFO] Skipping Configure OS
2024/01/30 07:39:05.350779 [INFO] Skipping LockRepo
2024/01/30 07:39:05.350783 [INFO] Skipping GenerateEBBanner
2024/01/30 07:39:05.350787 [INFO] Skipping Install Process Manager
2024/01/30 07:39:05.350791 [INFO] Skipping install syslog
2024/01/30 07:39:05.350795 [INFO] Skipping install cron
2024/01/30 07:39:05.350799 [INFO] Skipping install proxy
2024/01/30 07:39:05.350802 [INFO] Skipping installhealthd
2024/01/30 07:39:05.350806 [INFO] Skipping Install Log Streaming Manager
2024/01/30 07:39:05.350810 [INFO] Skipping install X-Ray
2024/01/30 07:39:05.350814 [INFO] Skipping install Third Party License
2024/01/30 07:39:05.350819 [INFO] Skipping installSqsd
2024/01/30 07:39:05.350822 [INFO] Skipping bootstraphealthd
2024/01/30 07:39:05.350826 [INFO] Skipping Install yum packages
2024/01/30 07:39:05.350830 [INFO] Skipping install docker-compose
2024/01/30 07:39:05.350834 [INFO] Skipping Configure Docker Daemon
2024/01/30 07:39:05.350837 [INFO] Skipping MarkBaked
2024/01/30 07:39:05.350841 [INFO] Skipping TuneSystemSettings
2024/01/30 07:39:05.350843 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 07:39:05.350846 [INFO] Initialize LogRotate files and directories
2024/01/30 07:39:05.365238 [INFO] Skipping BootstrapCFNHup
2024/01/30 07:39:05.365249 [INFO] Executing instruction: StartCFNHup
2024/01/30 07:39:05.365252 [INFO] Start cfn-hup
2024/01/30 07:39:05.365276 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 07:39:05.387763 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 07:39:05.403756 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 07:39:05.403792 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 07:39:05.403796 [INFO] Executing instruction: Start Docker
2024/01/30 07:39:05.403799 [INFO] Starting Docker...
2024/01/30 07:39:05.403897 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 07:39:05.418498 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 07:39:05.422362 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 07:39:05.910448 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 07:39:05.925120 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 07:39:05.925151 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 07:39:05.935616 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 07:39:05.945037 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 07:39:05.958785 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 07:39:06.062190 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 07:39:06.062250 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 07:39:06.399634 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 07:39:06.686155 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 07:39:06.702030 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 07:39:07.043583 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 07:39:07.052082 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 07:39:07.064578 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 07:39:07.074535 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 07:39:08.289906 [INFO] Skipping Setup Docker Options
2024/01/30 07:39:08.289932 [INFO] Skipping MarkBootstrapped
2024/01/30 07:39:08.289936 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 07:39:08.290151 [INFO] Starting SwitchCFNStack
2024/01/30 07:39:08.290158 [INFO] Executing instruction: stopSqsd
2024/01/30 07:39:08.290161 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 07:39:08.290165 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 07:39:08.290169 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 07:39:08.290186 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 07:39:08.768525 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 07:39:08.768549 [INFO] Executing instruction: StagedockerApplication
2024/01/30 07:39:08.768561 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 07:39:08.815912 [INFO] Pruning containers ...
2024/01/30 07:39:08.815942 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 07:39:08.857403 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
4dc3a32eafe2   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             determined_thompson

2024/01/30 07:39:08.857459 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 07:39:08.883220 [INFO] Deleted Containers:
4dc3a32eafe2fe449e0d48a45c940c19806bc5ffbd2b6c5a82fbceb896b25af6

Total reclaimed space: 0B

2024/01/30 07:39:08.883245 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 07:39:08.902278 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 07:39:08.902522 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 07:39:08.906495 [INFO] application/json

2024/01/30 07:39:08.906517 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 07:39:09.017544 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 07:39:09.019115 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 07:39:09.024436 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 07:39:09.024474 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 07:39:09.024490 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 07:39:09.024493 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 07:39:09.024497 [INFO] Executing instruction: Generate environment file
2024/01/30 07:39:09.024525 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 07:39:09.024530 [INFO] start build docker app
2024/01/30 07:39:09.024980 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 07:39:09.024985 [INFO] fetching image and ports
2024/01/30 07:39:09.027386 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 07:39:09.027486 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 07:39:09.027495 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 07:39:09.027505 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 07:39:10.069668 [INFO] Login Succeeded

2024/01/30 07:39:10.069685 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 07:39:10.069691 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 07:39:10.069707 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 07:39:10.214897 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 07:39:10.214924 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 07:39:10.214928 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 07:39:10.214930 [INFO] start to build docker image
2024/01/30 07:39:10.214947 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 07:39:10.546702 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 07:39:10.546748 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 07:39:10.546753 [INFO] successfully build docker image
2024/01/30 07:39:10.546756 [INFO] save staging docker image id
2024/01/30 07:39:10.546771 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 07:39:10.572195 [INFO] c176d18fbf65

2024/01/30 07:39:10.572331 [INFO] Executing instruction: configure X-Ray
2024/01/30 07:39:10.572338 [INFO] X-Ray is not enabled.
2024/01/30 07:39:10.572340 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 07:39:10.578002 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 07:39:10.579827 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 07:39:10.593049 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 07:39:10.593083 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 07:39:10.605373 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 07:39:10.616230 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 07:39:10.628410 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 07:39:10.708407 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 07:39:11.054276 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 07:39:11.054465 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 07:39:11.329140 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 07:39:11.341262 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 07:39:11.636566 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 07:39:11.645793 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 07:39:11.659854 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 07:39:11.987392 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 07:39:11.997816 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 07:39:12.292618 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 07:39:12.292656 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 07:39:12.304782 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 07:39:12.312871 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 07:39:12.410314 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 07:39:12.411826 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 07:39:12.413040 [INFO] Executing instruction: configure log streaming
2024/01/30 07:39:12.413048 [INFO] log streaming is not enabled
2024/01/30 07:39:12.413050 [INFO] disable log stream
2024/01/30 07:39:12.413077 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 07:39:12.435490 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 07:39:12.449442 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 07:39:12.449466 [INFO] Checking if logs need forced rotation
2024/01/30 07:39:12.449486 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 07:39:13.034391 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 07:39:13.546599 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 07:39:13.548216 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 07:39:13.922447 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 07:39:13.939707 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 07:39:13.939723 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 07:39:13.939739 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 07:39:14.472271 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 07:39:14.472305 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 07:39:14.472332 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 07:39:14.472335 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 07:39:14.472355 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 07:39:14.472366 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 07:39:14.472368 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 07:39:14.472374 [INFO] Executing instruction: stop X-Ray
2024/01/30 07:39:14.472377 [INFO] stop X-Ray ...
2024/01/30 07:39:14.472386 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 07:39:14.490681 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 07:39:14.490715 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 07:39:14.508595 [INFO] Executing instruction: Run Docker Container
2024/01/30 07:39:14.508684 [INFO] stop currently running containers...
2024/01/30 07:39:14.508695 [INFO] detected old app is not docker compose app
2024/01/30 07:39:14.508709 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 07:39:14.522476 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 07:39:14.539220 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 07:39:14.539246 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 07:39:14.554528 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 07:39:14.554559 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 07:39:14.567840 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 07:39:14.567881 [INFO] stopping current container: 4dc3a32eafe2
2024/01/30 07:39:14.567892 [INFO] Running command /bin/sh -c docker ps | grep -q 4dc3a32eafe2
2024/01/30 07:39:14.604230 [INFO] Running command /bin/sh -c docker ps | grep -q 4dc3a32eafe2
2024/01/30 07:39:14.628551 [INFO] Pruning containers ...
2024/01/30 07:39:14.628575 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 07:39:14.648684 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 07:39:14.648711 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 07:39:14.678692 [INFO] Total reclaimed space: 0B

2024/01/30 07:39:14.678725 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 07:39:14.711207 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 07:39:14.711242 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 07:39:14.731697 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 07:39:14.731719 [INFO] Removing /var/app/current/ if it exists
2024/01/30 07:39:14.731901 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 07:39:14.731923 [INFO] detected new app is not docker compose app
2024/01/30 07:39:14.731976 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 07:39:15.206732 [INFO] b4b2ea15cf685685ca5ac99d20a2be41a6935af0777714f2331c7efecc97dee0

2024/01/30 07:39:20.207195 [INFO] Running command /bin/sh -c docker ps | grep -q b4b2ea15cf68
2024/01/30 07:39:20.231533 [ERROR] docker container quit unexpectedly on 2024-01-30 07:39:20.231515076 +0000 UTC: Command /bin/sh -c docker ps | grep -q b4b2ea15cf68 failed with error exit status 1
2024/01/30 07:39:20.231559 [INFO] Running command /bin/sh -c docker logs b4b2ea15cf68
2024/01/30 07:39:20.255066 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b4b2ea15cf68: Command /bin/sh -c docker ps | grep -q b4b2ea15cf68 failed with error exit status 1 

2024/01/30 07:39:20.255076 [INFO] Executing cleanup logic
2024/01/30 07:39:20.255340 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 08:39:21.271583 [INFO] Starting...
2024/01/30 08:39:21.271626 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 08:39:21.271653 [INFO] reading event message file
2024/01/30 08:39:21.272341 [INFO] Engine received EB command userdata-exec

2024/01/30 08:39:21.277746 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 08:39:21.690678 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 08:39:22.217837 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 08:39:22.217919 [INFO] Engine command: (self-startup)

2024/01/30 08:39:22.217925 [INFO] Downloading EB Application...
2024/01/30 08:39:22.217928 [INFO] Region: eu-west-1
2024/01/30 08:39:22.217931 [INFO] envID: e-8gmkc7rmw6
2024/01/30 08:39:22.217935 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 08:39:22.217938 [INFO] Using manifest file name from command request
2024/01/30 08:39:22.217952 [INFO] Unable to get version manifest file.
2024/01/30 08:39:22.217955 [INFO] Downloading latest manifest available.
2024/01/30 08:39:22.217957 [INFO] Download latest app version manifest
2024/01/30 08:39:22.218084 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 08:39:22.254035 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 08:39:22.254206 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 08:39:22.264002 [INFO] Download successful124bytes downloaded
2024/01/30 08:39:22.264236 [INFO] Trying to read and parse version manifest...
2024/01/30 08:39:22.264319 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 08:39:22.289451 [INFO] Download successful264bytes downloaded
2024/01/30 08:39:22.289745 [INFO] Executing instruction: SyncClock
2024/01/30 08:39:22.289750 [INFO] Starting SyncClock
2024/01/30 08:39:22.289765 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 08:39:22.296102 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 08:39:13 2024
System time     : 0.000001163 seconds fast of NTP time
Last offset     : +0.000000924 seconds
RMS offset      : 0.000003317 seconds
Frequency       : 0.838 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.032 ppm
Root delay      : 0.000450552 seconds
Root dispersion : 0.000521048 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 08:39:22.296130 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 08:39:22.302069 [INFO] 200 OK

2024/01/30 08:39:22.302368 [INFO] Skipping Configure OS
2024/01/30 08:39:22.302381 [INFO] Skipping LockRepo
2024/01/30 08:39:22.302386 [INFO] Skipping GenerateEBBanner
2024/01/30 08:39:22.302392 [INFO] Skipping Install Process Manager
2024/01/30 08:39:22.302397 [INFO] Skipping install syslog
2024/01/30 08:39:22.302402 [INFO] Skipping install cron
2024/01/30 08:39:22.302407 [INFO] Skipping install proxy
2024/01/30 08:39:22.302411 [INFO] Skipping installhealthd
2024/01/30 08:39:22.302416 [INFO] Skipping Install Log Streaming Manager
2024/01/30 08:39:22.302421 [INFO] Skipping install X-Ray
2024/01/30 08:39:22.302426 [INFO] Skipping install Third Party License
2024/01/30 08:39:22.302432 [INFO] Skipping installSqsd
2024/01/30 08:39:22.302437 [INFO] Skipping bootstraphealthd
2024/01/30 08:39:22.302443 [INFO] Skipping Install yum packages
2024/01/30 08:39:22.302454 [INFO] Skipping install docker-compose
2024/01/30 08:39:22.302460 [INFO] Skipping Configure Docker Daemon
2024/01/30 08:39:22.302465 [INFO] Skipping MarkBaked
2024/01/30 08:39:22.302471 [INFO] Skipping TuneSystemSettings
2024/01/30 08:39:22.302474 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 08:39:22.302478 [INFO] Initialize LogRotate files and directories
2024/01/30 08:39:22.315994 [INFO] Skipping BootstrapCFNHup
2024/01/30 08:39:22.316004 [INFO] Executing instruction: StartCFNHup
2024/01/30 08:39:22.316007 [INFO] Start cfn-hup
2024/01/30 08:39:22.316023 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 08:39:22.365540 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 08:39:22.382696 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 08:39:22.383380 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 08:39:22.383390 [INFO] Executing instruction: Start Docker
2024/01/30 08:39:22.383393 [INFO] Starting Docker...
2024/01/30 08:39:22.383477 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 08:39:22.384795 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 08:39:22.385814 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 08:39:22.643749 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 08:39:22.672223 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 08:39:22.672307 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 08:39:22.686629 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 08:39:22.695651 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 08:39:22.706275 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 08:39:22.814301 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 08:39:22.814348 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 08:39:23.217390 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 08:39:23.521807 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 08:39:23.531923 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 08:39:23.805642 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 08:39:23.814122 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 08:39:23.827779 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 08:39:23.837135 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 08:39:25.005301 [INFO] Skipping Setup Docker Options
2024/01/30 08:39:25.005321 [INFO] Skipping MarkBootstrapped
2024/01/30 08:39:25.005331 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 08:39:25.005525 [INFO] Starting SwitchCFNStack
2024/01/30 08:39:25.005532 [INFO] Executing instruction: stopSqsd
2024/01/30 08:39:25.005536 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 08:39:25.005540 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 08:39:25.005543 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 08:39:25.005560 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 08:39:25.489005 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 08:39:25.489030 [INFO] Executing instruction: StagedockerApplication
2024/01/30 08:39:25.489043 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 08:39:25.511945 [INFO] Pruning containers ...
2024/01/30 08:39:25.511974 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 08:39:25.535594 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b4b2ea15cf68   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             peaceful_cori

2024/01/30 08:39:25.535631 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 08:39:25.563684 [INFO] Deleted Containers:
b4b2ea15cf685685ca5ac99d20a2be41a6935af0777714f2331c7efecc97dee0

Total reclaimed space: 0B

2024/01/30 08:39:25.563707 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 08:39:25.584541 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 08:39:25.584807 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 08:39:25.587693 [INFO] application/json

2024/01/30 08:39:25.587711 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 08:39:25.686343 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 08:39:25.686524 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 08:39:25.687696 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 08:39:25.687722 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 08:39:25.687736 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 08:39:25.687739 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 08:39:25.687743 [INFO] Executing instruction: Generate environment file
2024/01/30 08:39:25.687770 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 08:39:25.687775 [INFO] start build docker app
2024/01/30 08:39:25.688128 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 08:39:25.688131 [INFO] fetching image and ports
2024/01/30 08:39:25.689986 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 08:39:25.690038 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 08:39:25.690050 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 08:39:25.690061 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 08:39:26.675679 [INFO] Login Succeeded

2024/01/30 08:39:26.676220 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 08:39:26.676232 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 08:39:26.676554 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 08:39:26.838908 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 08:39:26.838933 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 08:39:26.838937 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 08:39:26.838940 [INFO] start to build docker image
2024/01/30 08:39:26.838956 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 08:39:27.113518 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 08:39:27.113539 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 08:39:27.113544 [INFO] successfully build docker image
2024/01/30 08:39:27.113547 [INFO] save staging docker image id
2024/01/30 08:39:27.113644 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 08:39:27.152006 [INFO] c176d18fbf65

2024/01/30 08:39:27.152767 [INFO] Executing instruction: configure X-Ray
2024/01/30 08:39:27.152775 [INFO] X-Ray is not enabled.
2024/01/30 08:39:27.152778 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 08:39:27.161123 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 08:39:27.163300 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 08:39:27.177116 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 08:39:27.177202 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 08:39:27.191314 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 08:39:27.210550 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 08:39:27.221253 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 08:39:27.300964 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 08:39:27.650591 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 08:39:27.650681 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 08:39:27.938687 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 08:39:27.955392 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 08:39:28.326243 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 08:39:28.335037 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 08:39:28.348922 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 08:39:28.622236 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 08:39:28.631608 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 08:39:28.915438 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 08:39:28.915471 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 08:39:28.928235 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 08:39:28.936679 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 08:39:28.998771 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 08:39:28.999613 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 08:39:29.000519 [INFO] Executing instruction: configure log streaming
2024/01/30 08:39:29.000535 [INFO] log streaming is not enabled
2024/01/30 08:39:29.000539 [INFO] disable log stream
2024/01/30 08:39:29.000554 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 08:39:29.018753 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 08:39:29.042093 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 08:39:29.042116 [INFO] Checking if logs need forced rotation
2024/01/30 08:39:29.042139 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 08:39:29.640727 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 08:39:30.249141 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 08:39:30.251094 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 08:39:30.686770 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 08:39:30.706380 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 08:39:30.706397 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 08:39:30.706409 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 08:39:31.222718 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 08:39:31.222743 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 08:39:31.222770 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 08:39:31.222774 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 08:39:31.222794 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 08:39:31.222804 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 08:39:31.222807 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 08:39:31.222817 [INFO] Executing instruction: stop X-Ray
2024/01/30 08:39:31.222820 [INFO] stop X-Ray ...
2024/01/30 08:39:31.222833 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 08:39:31.238282 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 08:39:31.238315 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 08:39:31.253929 [INFO] Executing instruction: Run Docker Container
2024/01/30 08:39:31.253960 [INFO] stop currently running containers...
2024/01/30 08:39:31.253972 [INFO] detected old app is not docker compose app
2024/01/30 08:39:31.253985 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 08:39:31.272700 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 08:39:31.300795 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 08:39:31.300829 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 08:39:31.315708 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 08:39:31.315744 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 08:39:31.333762 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 08:39:31.333814 [INFO] stopping current container: b4b2ea15cf68
2024/01/30 08:39:31.333827 [INFO] Running command /bin/sh -c docker ps | grep -q b4b2ea15cf68
2024/01/30 08:39:31.358944 [INFO] Running command /bin/sh -c docker ps | grep -q b4b2ea15cf68
2024/01/30 08:39:31.382402 [INFO] Pruning containers ...
2024/01/30 08:39:31.382428 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 08:39:31.407375 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 08:39:31.407414 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 08:39:31.430259 [INFO] Total reclaimed space: 0B

2024/01/30 08:39:31.430285 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 08:39:31.454461 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 08:39:31.454499 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 08:39:31.475415 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 08:39:31.475447 [INFO] Removing /var/app/current/ if it exists
2024/01/30 08:39:31.475561 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 08:39:31.475578 [INFO] detected new app is not docker compose app
2024/01/30 08:39:31.475643 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 08:39:31.888966 [INFO] 3d87b990f170dbeefecd78d559a229643e81365ae9b2837bd82e0f0f16531def

2024/01/30 08:39:36.891428 [INFO] Running command /bin/sh -c docker ps | grep -q 3d87b990f170
2024/01/30 08:39:36.914945 [ERROR] docker container quit unexpectedly on 2024-01-30 08:39:36.914927031 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3d87b990f170 failed with error exit status 1
2024/01/30 08:39:36.914974 [INFO] Running command /bin/sh -c docker logs 3d87b990f170
2024/01/30 08:39:36.942102 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3d87b990f170: Command /bin/sh -c docker ps | grep -q 3d87b990f170 failed with error exit status 1 

2024/01/30 08:39:36.942111 [INFO] Executing cleanup logic
2024/01/30 08:39:36.942469 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 09:39:37.950533 [INFO] Starting...
2024/01/30 09:39:37.950573 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 09:39:37.950600 [INFO] reading event message file
2024/01/30 09:39:37.951292 [INFO] Engine received EB command userdata-exec

2024/01/30 09:39:37.959045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 09:39:38.354818 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 09:39:38.798258 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 09:39:38.798322 [INFO] Engine command: (self-startup)

2024/01/30 09:39:38.798327 [INFO] Downloading EB Application...
2024/01/30 09:39:38.798329 [INFO] Region: eu-west-1
2024/01/30 09:39:38.798331 [INFO] envID: e-8gmkc7rmw6
2024/01/30 09:39:38.798334 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 09:39:38.798336 [INFO] Using manifest file name from command request
2024/01/30 09:39:38.798349 [INFO] Unable to get version manifest file.
2024/01/30 09:39:38.798351 [INFO] Downloading latest manifest available.
2024/01/30 09:39:38.798353 [INFO] Download latest app version manifest
2024/01/30 09:39:38.798537 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 09:39:38.844350 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 09:39:38.844541 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 09:39:38.856836 [INFO] Download successful124bytes downloaded
2024/01/30 09:39:38.856966 [INFO] Trying to read and parse version manifest...
2024/01/30 09:39:38.857048 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 09:39:38.877101 [INFO] Download successful264bytes downloaded
2024/01/30 09:39:38.877416 [INFO] Executing instruction: SyncClock
2024/01/30 09:39:38.877423 [INFO] Starting SyncClock
2024/01/30 09:39:38.877435 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 09:39:38.883098 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 09:39:23 2024
System time     : 0.000000665 seconds fast of NTP time
Last offset     : -0.000000429 seconds
RMS offset      : 0.000001669 seconds
Frequency       : 0.544 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.034 ppm
Root delay      : 0.000418241 seconds
Root dispersion : 0.000303795 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 09:39:38.883138 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 09:39:38.889164 [INFO] 200 OK

2024/01/30 09:39:38.889419 [INFO] Skipping Configure OS
2024/01/30 09:39:38.889431 [INFO] Skipping LockRepo
2024/01/30 09:39:38.889437 [INFO] Skipping GenerateEBBanner
2024/01/30 09:39:38.889443 [INFO] Skipping Install Process Manager
2024/01/30 09:39:38.889448 [INFO] Skipping install syslog
2024/01/30 09:39:38.889453 [INFO] Skipping install cron
2024/01/30 09:39:38.889458 [INFO] Skipping install proxy
2024/01/30 09:39:38.889463 [INFO] Skipping installhealthd
2024/01/30 09:39:38.889468 [INFO] Skipping Install Log Streaming Manager
2024/01/30 09:39:38.889474 [INFO] Skipping install X-Ray
2024/01/30 09:39:38.889491 [INFO] Skipping install Third Party License
2024/01/30 09:39:38.889498 [INFO] Skipping installSqsd
2024/01/30 09:39:38.889504 [INFO] Skipping bootstraphealthd
2024/01/30 09:39:38.889511 [INFO] Skipping Install yum packages
2024/01/30 09:39:38.889525 [INFO] Skipping install docker-compose
2024/01/30 09:39:38.889531 [INFO] Skipping Configure Docker Daemon
2024/01/30 09:39:38.889537 [INFO] Skipping MarkBaked
2024/01/30 09:39:38.889541 [INFO] Skipping TuneSystemSettings
2024/01/30 09:39:38.889544 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 09:39:38.889546 [INFO] Initialize LogRotate files and directories
2024/01/30 09:39:38.905037 [INFO] Skipping BootstrapCFNHup
2024/01/30 09:39:38.905049 [INFO] Executing instruction: StartCFNHup
2024/01/30 09:39:38.905052 [INFO] Start cfn-hup
2024/01/30 09:39:38.905068 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 09:39:38.920237 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 09:39:38.932636 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 09:39:38.932671 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 09:39:38.932675 [INFO] Executing instruction: Start Docker
2024/01/30 09:39:38.932678 [INFO] Starting Docker...
2024/01/30 09:39:38.932760 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 09:39:38.933828 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 09:39:38.934820 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 09:39:39.456452 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 09:39:39.471967 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 09:39:39.472011 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 09:39:39.503205 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 09:39:39.524378 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 09:39:39.536007 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 09:39:39.611296 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 09:39:39.611393 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 09:39:39.977373 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 09:39:40.340715 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 09:39:40.351176 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 09:39:40.679614 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 09:39:40.689021 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 09:39:40.702151 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 09:39:40.712132 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 09:39:42.009115 [INFO] Skipping Setup Docker Options
2024/01/30 09:39:42.009140 [INFO] Skipping MarkBootstrapped
2024/01/30 09:39:42.009144 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 09:39:42.009261 [INFO] Starting SwitchCFNStack
2024/01/30 09:39:42.009266 [INFO] Executing instruction: stopSqsd
2024/01/30 09:39:42.009270 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 09:39:42.009274 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 09:39:42.009278 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 09:39:42.009296 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 09:39:42.515689 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 09:39:42.515776 [INFO] Executing instruction: StagedockerApplication
2024/01/30 09:39:42.515790 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 09:39:42.547691 [INFO] Pruning containers ...
2024/01/30 09:39:42.547734 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 09:39:42.568051 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
3d87b990f170   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             nice_lumiere

2024/01/30 09:39:42.568090 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 09:39:42.595380 [INFO] Deleted Containers:
3d87b990f170dbeefecd78d559a229643e81365ae9b2837bd82e0f0f16531def

Total reclaimed space: 0B

2024/01/30 09:39:42.595403 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 09:39:42.622849 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 09:39:42.623089 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 09:39:42.626707 [INFO] application/json

2024/01/30 09:39:42.626727 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 09:39:42.711145 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 09:39:42.711343 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 09:39:42.713025 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 09:39:42.713051 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 09:39:42.713068 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 09:39:42.713072 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 09:39:42.713078 [INFO] Executing instruction: Generate environment file
2024/01/30 09:39:42.713106 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 09:39:42.713109 [INFO] start build docker app
2024/01/30 09:39:42.713492 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 09:39:42.713495 [INFO] fetching image and ports
2024/01/30 09:39:42.715068 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 09:39:42.715117 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 09:39:42.715127 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 09:39:42.715137 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 09:39:43.579071 [INFO] Login Succeeded

2024/01/30 09:39:43.579203 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 09:39:43.579210 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 09:39:43.579226 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 09:39:43.742383 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 09:39:43.742407 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 09:39:43.742411 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 09:39:43.742484 [INFO] start to build docker image
2024/01/30 09:39:43.742504 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 09:39:44.026161 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 09:39:44.026185 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 09:39:44.026189 [INFO] successfully build docker image
2024/01/30 09:39:44.026191 [INFO] save staging docker image id
2024/01/30 09:39:44.026214 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 09:39:44.047719 [INFO] c176d18fbf65

2024/01/30 09:39:44.047836 [INFO] Executing instruction: configure X-Ray
2024/01/30 09:39:44.047842 [INFO] X-Ray is not enabled.
2024/01/30 09:39:44.047845 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 09:39:44.053118 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 09:39:44.054685 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 09:39:44.067220 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 09:39:44.067249 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 09:39:44.078620 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 09:39:44.088744 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 09:39:44.099916 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 09:39:44.168951 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 09:39:44.493015 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 09:39:44.493209 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 09:39:44.807013 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 09:39:44.819563 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 09:39:45.172675 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 09:39:45.184817 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 09:39:45.194911 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 09:39:45.514290 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 09:39:45.524526 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 09:39:45.820619 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 09:39:45.820812 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 09:39:45.837747 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 09:39:45.846885 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 09:39:45.932072 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 09:39:45.933123 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 09:39:45.934173 [INFO] Executing instruction: configure log streaming
2024/01/30 09:39:45.934183 [INFO] log streaming is not enabled
2024/01/30 09:39:45.934185 [INFO] disable log stream
2024/01/30 09:39:45.934197 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 09:39:45.959506 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 09:39:45.985739 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 09:39:45.985763 [INFO] Checking if logs need forced rotation
2024/01/30 09:39:45.985783 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 09:39:46.494688 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 09:39:47.023929 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 09:39:47.025854 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 09:39:47.398795 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 09:39:47.417058 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 09:39:47.417072 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 09:39:47.417085 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 09:39:47.916676 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 09:39:47.916703 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 09:39:47.916729 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 09:39:47.916732 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 09:39:47.916752 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 09:39:47.916766 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 09:39:47.916769 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 09:39:47.916775 [INFO] Executing instruction: stop X-Ray
2024/01/30 09:39:47.916778 [INFO] stop X-Ray ...
2024/01/30 09:39:47.916789 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 09:39:47.932078 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 09:39:47.932110 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 09:39:47.950761 [INFO] Executing instruction: Run Docker Container
2024/01/30 09:39:47.950795 [INFO] stop currently running containers...
2024/01/30 09:39:47.950807 [INFO] detected old app is not docker compose app
2024/01/30 09:39:47.950821 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 09:39:48.012551 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 09:39:48.034575 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 09:39:48.034605 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 09:39:48.050340 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 09:39:48.050376 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 09:39:48.064461 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 09:39:48.064509 [INFO] stopping current container: 3d87b990f170
2024/01/30 09:39:48.064522 [INFO] Running command /bin/sh -c docker ps | grep -q 3d87b990f170
2024/01/30 09:39:48.084703 [INFO] Running command /bin/sh -c docker ps | grep -q 3d87b990f170
2024/01/30 09:39:48.103400 [INFO] Pruning containers ...
2024/01/30 09:39:48.103424 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 09:39:48.122673 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 09:39:48.122711 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 09:39:48.140904 [INFO] Total reclaimed space: 0B

2024/01/30 09:39:48.140928 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 09:39:48.159032 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 09:39:48.159061 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 09:39:48.176195 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 09:39:48.176217 [INFO] Removing /var/app/current/ if it exists
2024/01/30 09:39:48.176307 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 09:39:48.176323 [INFO] detected new app is not docker compose app
2024/01/30 09:39:48.176373 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 09:39:48.624618 [INFO] 3125f59a9ec90f3ff49c50c19f53cb2e115ace1907e7420145a0b9b6dacc9b22

2024/01/30 09:39:53.628988 [INFO] Running command /bin/sh -c docker ps | grep -q 3125f59a9ec9
2024/01/30 09:39:53.655197 [ERROR] docker container quit unexpectedly on 2024-01-30 09:39:53.655185175 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3125f59a9ec9 failed with error exit status 1
2024/01/30 09:39:53.655225 [INFO] Running command /bin/sh -c docker logs 3125f59a9ec9
2024/01/30 09:39:53.675637 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3125f59a9ec9: Command /bin/sh -c docker ps | grep -q 3125f59a9ec9 failed with error exit status 1 

2024/01/30 09:39:53.675684 [INFO] Executing cleanup logic
2024/01/30 09:39:53.675930 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 10:39:54.678192 [INFO] Starting...
2024/01/30 10:39:54.678238 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 10:39:54.678263 [INFO] reading event message file
2024/01/30 10:39:54.678953 [INFO] Engine received EB command userdata-exec

2024/01/30 10:39:54.685796 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 10:39:55.068050 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 10:39:55.495431 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 10:39:55.495535 [INFO] Engine command: (self-startup)

2024/01/30 10:39:55.495550 [INFO] Downloading EB Application...
2024/01/30 10:39:55.495554 [INFO] Region: eu-west-1
2024/01/30 10:39:55.495565 [INFO] envID: e-8gmkc7rmw6
2024/01/30 10:39:55.495569 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 10:39:55.495572 [INFO] Using manifest file name from command request
2024/01/30 10:39:55.495588 [INFO] Unable to get version manifest file.
2024/01/30 10:39:55.495592 [INFO] Downloading latest manifest available.
2024/01/30 10:39:55.495595 [INFO] Download latest app version manifest
2024/01/30 10:39:55.495778 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 10:39:55.542296 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 10:39:55.542467 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 10:39:55.556147 [INFO] Download successful124bytes downloaded
2024/01/30 10:39:55.556276 [INFO] Trying to read and parse version manifest...
2024/01/30 10:39:55.556347 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 10:39:55.585181 [INFO] Download successful264bytes downloaded
2024/01/30 10:39:55.585534 [INFO] Executing instruction: SyncClock
2024/01/30 10:39:55.585541 [INFO] Starting SyncClock
2024/01/30 10:39:55.585551 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 10:39:55.595977 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 10:39:43 2024
System time     : 0.000003252 seconds fast of NTP time
Last offset     : +0.000003955 seconds
RMS offset      : 0.000003055 seconds
Frequency       : 0.966 ppm fast
Residual freq   : +0.010 ppm
Skew            : 0.099 ppm
Root delay      : 0.000438545 seconds
Root dispersion : 0.000375177 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/30 10:39:55.596004 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 10:39:55.602054 [INFO] 200 OK

2024/01/30 10:39:55.603193 [INFO] Skipping Configure OS
2024/01/30 10:39:55.603283 [INFO] Skipping LockRepo
2024/01/30 10:39:55.603293 [INFO] Skipping GenerateEBBanner
2024/01/30 10:39:55.603299 [INFO] Skipping Install Process Manager
2024/01/30 10:39:55.603562 [INFO] Skipping install syslog
2024/01/30 10:39:55.603569 [INFO] Skipping install cron
2024/01/30 10:39:55.603574 [INFO] Skipping install proxy
2024/01/30 10:39:55.603579 [INFO] Skipping installhealthd
2024/01/30 10:39:55.603655 [INFO] Skipping Install Log Streaming Manager
2024/01/30 10:39:55.603661 [INFO] Skipping install X-Ray
2024/01/30 10:39:55.603667 [INFO] Skipping install Third Party License
2024/01/30 10:39:55.604213 [INFO] Skipping installSqsd
2024/01/30 10:39:55.604244 [INFO] Skipping bootstraphealthd
2024/01/30 10:39:55.604435 [INFO] Skipping Install yum packages
2024/01/30 10:39:55.604441 [INFO] Skipping install docker-compose
2024/01/30 10:39:55.604446 [INFO] Skipping Configure Docker Daemon
2024/01/30 10:39:55.604521 [INFO] Skipping MarkBaked
2024/01/30 10:39:55.604530 [INFO] Skipping TuneSystemSettings
2024/01/30 10:39:55.604534 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 10:39:55.604538 [INFO] Initialize LogRotate files and directories
2024/01/30 10:39:55.619769 [INFO] Skipping BootstrapCFNHup
2024/01/30 10:39:55.619779 [INFO] Executing instruction: StartCFNHup
2024/01/30 10:39:55.619782 [INFO] Start cfn-hup
2024/01/30 10:39:55.619798 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 10:39:55.641604 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 10:39:55.654287 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 10:39:55.654321 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 10:39:55.654325 [INFO] Executing instruction: Start Docker
2024/01/30 10:39:55.654328 [INFO] Starting Docker...
2024/01/30 10:39:55.654402 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 10:39:55.655633 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 10:39:55.656627 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 10:39:56.194127 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 10:39:56.208725 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 10:39:56.208758 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 10:39:56.220134 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 10:39:56.229663 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 10:39:56.239651 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 10:39:56.278400 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 10:39:56.278432 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 10:39:56.585885 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 10:39:56.867731 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 10:39:56.879539 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 10:39:57.216127 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 10:39:57.243937 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 10:39:57.275298 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 10:39:57.285282 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 10:39:58.418512 [INFO] Skipping Setup Docker Options
2024/01/30 10:39:58.418531 [INFO] Skipping MarkBootstrapped
2024/01/30 10:39:58.418535 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 10:39:58.418641 [INFO] Starting SwitchCFNStack
2024/01/30 10:39:58.418646 [INFO] Executing instruction: stopSqsd
2024/01/30 10:39:58.418650 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 10:39:58.418653 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 10:39:58.418657 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 10:39:58.418678 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 10:39:58.886843 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 10:39:58.886899 [INFO] Executing instruction: StagedockerApplication
2024/01/30 10:39:58.886911 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 10:39:58.910299 [INFO] Pruning containers ...
2024/01/30 10:39:58.910330 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 10:39:58.966526 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
3125f59a9ec9   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             busy_cohen

2024/01/30 10:39:58.966808 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 10:39:59.002037 [INFO] Deleted Containers:
3125f59a9ec90f3ff49c50c19f53cb2e115ace1907e7420145a0b9b6dacc9b22

Total reclaimed space: 0B

2024/01/30 10:39:59.002074 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 10:39:59.024512 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 10:39:59.024788 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 10:39:59.029399 [INFO] application/json

2024/01/30 10:39:59.029419 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 10:39:59.110871 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/30 10:39:59.111034 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 10:39:59.112282 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 10:39:59.112313 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 10:39:59.112333 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 10:39:59.112336 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 10:39:59.112340 [INFO] Executing instruction: Generate environment file
2024/01/30 10:39:59.112365 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 10:39:59.112369 [INFO] start build docker app
2024/01/30 10:39:59.113724 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 10:39:59.113731 [INFO] fetching image and ports
2024/01/30 10:39:59.115449 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 10:39:59.115508 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 10:39:59.115519 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 10:39:59.115530 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 10:40:00.406886 [INFO] Login Succeeded

2024/01/30 10:40:00.406904 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 10:40:00.406910 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 10:40:00.406927 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 10:40:00.586897 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 10:40:00.586921 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 10:40:00.586925 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 10:40:00.586928 [INFO] start to build docker image
2024/01/30 10:40:00.586948 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 10:40:00.932305 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 10:40:00.932328 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 10:40:00.932332 [INFO] successfully build docker image
2024/01/30 10:40:00.932334 [INFO] save staging docker image id
2024/01/30 10:40:00.932346 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 10:40:00.966039 [INFO] c176d18fbf65

2024/01/30 10:40:00.966235 [INFO] Executing instruction: configure X-Ray
2024/01/30 10:40:00.966241 [INFO] X-Ray is not enabled.
2024/01/30 10:40:00.966244 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 10:40:00.972143 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 10:40:00.978986 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 10:40:01.009894 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 10:40:01.009942 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 10:40:01.033518 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 10:40:01.042457 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 10:40:01.053384 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 10:40:01.166623 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 10:40:01.714452 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 10:40:01.716060 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 10:40:02.292092 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 10:40:02.318605 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 10:40:02.805962 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 10:40:02.816157 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 10:40:02.826923 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 10:40:03.154361 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 10:40:03.165697 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 10:40:03.515247 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 10:40:03.515284 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 10:40:03.531775 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 10:40:03.542365 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 10:40:03.653063 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 10:40:03.654024 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 10:40:03.655063 [INFO] Executing instruction: configure log streaming
2024/01/30 10:40:03.655076 [INFO] log streaming is not enabled
2024/01/30 10:40:03.655080 [INFO] disable log stream
2024/01/30 10:40:03.655097 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 10:40:03.673116 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 10:40:03.690465 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 10:40:03.690489 [INFO] Checking if logs need forced rotation
2024/01/30 10:40:03.690510 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 10:40:04.344343 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 10:40:04.883376 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 10:40:04.885408 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 10:40:05.409143 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 10:40:05.427739 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 10:40:05.427754 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 10:40:05.427766 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 10:40:05.897640 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 10:40:05.897675 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 10:40:05.897701 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 10:40:05.897705 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 10:40:05.897728 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 10:40:05.897747 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 10:40:05.897750 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 10:40:05.897755 [INFO] Executing instruction: stop X-Ray
2024/01/30 10:40:05.897759 [INFO] stop X-Ray ...
2024/01/30 10:40:05.897775 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 10:40:05.924049 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 10:40:05.924084 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 10:40:05.948337 [INFO] Executing instruction: Run Docker Container
2024/01/30 10:40:05.948372 [INFO] stop currently running containers...
2024/01/30 10:40:05.948383 [INFO] detected old app is not docker compose app
2024/01/30 10:40:05.948399 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 10:40:06.012402 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 10:40:06.036264 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 10:40:06.036310 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 10:40:06.081574 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 10:40:06.081610 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 10:40:06.105543 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 10:40:06.105595 [INFO] stopping current container: 3125f59a9ec9
2024/01/30 10:40:06.105610 [INFO] Running command /bin/sh -c docker ps | grep -q 3125f59a9ec9
2024/01/30 10:40:06.126207 [INFO] Running command /bin/sh -c docker ps | grep -q 3125f59a9ec9
2024/01/30 10:40:06.147907 [INFO] Pruning containers ...
2024/01/30 10:40:06.147931 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 10:40:06.168486 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 10:40:06.168522 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 10:40:06.186915 [INFO] Total reclaimed space: 0B

2024/01/30 10:40:06.186947 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 10:40:06.205523 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 10:40:06.205554 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 10:40:06.224924 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 10:40:06.224945 [INFO] Removing /var/app/current/ if it exists
2024/01/30 10:40:06.225044 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 10:40:06.225061 [INFO] detected new app is not docker compose app
2024/01/30 10:40:06.225108 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 10:40:06.681967 [INFO] d951c1e814aa6d93cdee2dfadf2f0fc46f8a21c983c14ab9df0eff6f6a172fd2

2024/01/30 10:40:11.682349 [INFO] Running command /bin/sh -c docker ps | grep -q d951c1e814aa
2024/01/30 10:40:11.705670 [ERROR] docker container quit unexpectedly on 2024-01-30 10:40:11.705652941 +0000 UTC: Command /bin/sh -c docker ps | grep -q d951c1e814aa failed with error exit status 1
2024/01/30 10:40:11.705697 [INFO] Running command /bin/sh -c docker logs d951c1e814aa
2024/01/30 10:40:11.735348 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container d951c1e814aa: Command /bin/sh -c docker ps | grep -q d951c1e814aa failed with error exit status 1 

2024/01/30 10:40:11.735359 [INFO] Executing cleanup logic
2024/01/30 10:40:11.735652 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 11:40:12.661463 [INFO] Starting...
2024/01/30 11:40:12.661507 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 11:40:12.661531 [INFO] reading event message file
2024/01/30 11:40:12.662264 [INFO] Engine received EB command userdata-exec

2024/01/30 11:40:12.668994 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 11:40:13.124811 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 11:40:13.573420 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 11:40:13.573541 [INFO] Engine command: (self-startup)

2024/01/30 11:40:13.573561 [INFO] Downloading EB Application...
2024/01/30 11:40:13.573565 [INFO] Region: eu-west-1
2024/01/30 11:40:13.573568 [INFO] envID: e-8gmkc7rmw6
2024/01/30 11:40:13.573572 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 11:40:13.573576 [INFO] Using manifest file name from command request
2024/01/30 11:40:13.573592 [INFO] Unable to get version manifest file.
2024/01/30 11:40:13.573595 [INFO] Downloading latest manifest available.
2024/01/30 11:40:13.573598 [INFO] Download latest app version manifest
2024/01/30 11:40:13.573878 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 11:40:13.616114 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 11:40:13.616296 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 11:40:13.627457 [INFO] Download successful124bytes downloaded
2024/01/30 11:40:13.627599 [INFO] Trying to read and parse version manifest...
2024/01/30 11:40:13.627685 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 11:40:13.691008 [INFO] Download successful264bytes downloaded
2024/01/30 11:40:13.691454 [INFO] Executing instruction: SyncClock
2024/01/30 11:40:13.691465 [INFO] Starting SyncClock
2024/01/30 11:40:13.691480 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 11:40:13.700126 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 11:40:09 2024
System time     : 0.000000479 seconds slow of NTP time
Last offset     : -0.000000168 seconds
RMS offset      : 0.000005187 seconds
Frequency       : 0.398 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.057 ppm
Root delay      : 0.000431073 seconds
Root dispersion : 0.000311592 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 11:40:13.700150 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 11:40:13.705562 [INFO] 200 OK

2024/01/30 11:40:13.705723 [INFO] Skipping Configure OS
2024/01/30 11:40:13.705732 [INFO] Skipping LockRepo
2024/01/30 11:40:13.705737 [INFO] Skipping GenerateEBBanner
2024/01/30 11:40:13.705742 [INFO] Skipping Install Process Manager
2024/01/30 11:40:13.705746 [INFO] Skipping install syslog
2024/01/30 11:40:13.705750 [INFO] Skipping install cron
2024/01/30 11:40:13.705754 [INFO] Skipping install proxy
2024/01/30 11:40:13.705758 [INFO] Skipping installhealthd
2024/01/30 11:40:13.705762 [INFO] Skipping Install Log Streaming Manager
2024/01/30 11:40:13.705766 [INFO] Skipping install X-Ray
2024/01/30 11:40:13.705770 [INFO] Skipping install Third Party License
2024/01/30 11:40:13.705775 [INFO] Skipping installSqsd
2024/01/30 11:40:13.705778 [INFO] Skipping bootstraphealthd
2024/01/30 11:40:13.705782 [INFO] Skipping Install yum packages
2024/01/30 11:40:13.705785 [INFO] Skipping install docker-compose
2024/01/30 11:40:13.705790 [INFO] Skipping Configure Docker Daemon
2024/01/30 11:40:13.705793 [INFO] Skipping MarkBaked
2024/01/30 11:40:13.705797 [INFO] Skipping TuneSystemSettings
2024/01/30 11:40:13.705807 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 11:40:13.705811 [INFO] Initialize LogRotate files and directories
2024/01/30 11:40:13.720479 [INFO] Skipping BootstrapCFNHup
2024/01/30 11:40:13.720489 [INFO] Executing instruction: StartCFNHup
2024/01/30 11:40:13.720492 [INFO] Start cfn-hup
2024/01/30 11:40:13.720511 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 11:40:13.740431 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 11:40:13.755784 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 11:40:13.755819 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 11:40:13.755823 [INFO] Executing instruction: Start Docker
2024/01/30 11:40:13.755827 [INFO] Starting Docker...
2024/01/30 11:40:13.755912 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 11:40:13.756935 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 11:40:13.758953 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 11:40:14.182454 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 11:40:14.197162 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 11:40:14.197195 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 11:40:14.208642 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 11:40:14.217473 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 11:40:14.227962 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 11:40:14.323232 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 11:40:14.323279 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 11:40:14.671253 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 11:40:14.978839 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 11:40:14.990284 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 11:40:15.390612 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 11:40:15.403429 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 11:40:15.430799 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 11:40:15.449401 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 11:40:16.669898 [INFO] Skipping Setup Docker Options
2024/01/30 11:40:16.669920 [INFO] Skipping MarkBootstrapped
2024/01/30 11:40:16.669924 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 11:40:16.671757 [INFO] Starting SwitchCFNStack
2024/01/30 11:40:16.671777 [INFO] Executing instruction: stopSqsd
2024/01/30 11:40:16.671781 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 11:40:16.671785 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 11:40:16.671792 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 11:40:16.671807 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 11:40:17.144196 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 11:40:17.144275 [INFO] Executing instruction: StagedockerApplication
2024/01/30 11:40:17.144292 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 11:40:17.164673 [INFO] Pruning containers ...
2024/01/30 11:40:17.164706 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 11:40:17.183478 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
d951c1e814aa   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             priceless_goodall

2024/01/30 11:40:17.183514 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 11:40:17.212007 [INFO] Deleted Containers:
d951c1e814aa6d93cdee2dfadf2f0fc46f8a21c983c14ab9df0eff6f6a172fd2

Total reclaimed space: 0B

2024/01/30 11:40:17.212033 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 11:40:17.233108 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 11:40:17.242851 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 11:40:17.249439 [INFO] application/json

2024/01/30 11:40:17.249464 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 11:40:17.342675 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 11:40:17.342848 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 11:40:17.348640 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 11:40:17.348679 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 11:40:17.348697 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 11:40:17.348700 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 11:40:17.348704 [INFO] Executing instruction: Generate environment file
2024/01/30 11:40:17.348730 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 11:40:17.348733 [INFO] start build docker app
2024/01/30 11:40:17.349150 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 11:40:17.349165 [INFO] fetching image and ports
2024/01/30 11:40:17.351312 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 11:40:17.351448 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 11:40:17.351461 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 11:40:17.351470 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 11:40:18.278715 [INFO] Login Succeeded

2024/01/30 11:40:18.278763 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 11:40:18.278770 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 11:40:18.278786 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 11:40:18.439864 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 11:40:18.439890 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 11:40:18.439895 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 11:40:18.439908 [INFO] start to build docker image
2024/01/30 11:40:18.439923 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 11:40:18.771721 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 11:40:18.771748 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 11:40:18.771754 [INFO] successfully build docker image
2024/01/30 11:40:18.771756 [INFO] save staging docker image id
2024/01/30 11:40:18.771771 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 11:40:18.799288 [INFO] c176d18fbf65

2024/01/30 11:40:18.799411 [INFO] Executing instruction: configure X-Ray
2024/01/30 11:40:18.799418 [INFO] X-Ray is not enabled.
2024/01/30 11:40:18.799420 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 11:40:18.805500 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 11:40:18.807188 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 11:40:18.822286 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 11:40:18.822318 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 11:40:18.836005 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 11:40:18.847756 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 11:40:18.860707 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 11:40:18.951954 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 11:40:19.298980 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 11:40:19.299161 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 11:40:19.624801 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 11:40:19.638121 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 11:40:19.993854 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 11:40:20.003620 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 11:40:20.015331 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 11:40:20.329470 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 11:40:20.339366 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 11:40:20.646674 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 11:40:20.646702 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 11:40:20.659542 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 11:40:20.668661 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 11:40:20.756317 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 11:40:20.757285 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 11:40:20.758183 [INFO] Executing instruction: configure log streaming
2024/01/30 11:40:20.758199 [INFO] log streaming is not enabled
2024/01/30 11:40:20.758203 [INFO] disable log stream
2024/01/30 11:40:20.758218 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 11:40:20.780479 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 11:40:20.800404 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 11:40:20.800429 [INFO] Checking if logs need forced rotation
2024/01/30 11:40:20.800450 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 11:40:21.420774 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 11:40:21.852531 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 11:40:21.854430 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 11:40:22.424125 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 11:40:22.443097 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 11:40:22.443112 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 11:40:22.443127 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 11:40:22.831204 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 11:40:22.831236 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 11:40:22.831294 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 11:40:22.831298 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 11:40:22.831321 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 11:40:22.831427 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 11:40:22.831518 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 11:40:22.831526 [INFO] Executing instruction: stop X-Ray
2024/01/30 11:40:22.831531 [INFO] stop X-Ray ...
2024/01/30 11:40:22.831545 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 11:40:22.851171 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 11:40:22.851200 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 11:40:22.867874 [INFO] Executing instruction: Run Docker Container
2024/01/30 11:40:22.867902 [INFO] stop currently running containers...
2024/01/30 11:40:22.867911 [INFO] detected old app is not docker compose app
2024/01/30 11:40:22.867923 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 11:40:22.912612 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 11:40:22.929509 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 11:40:22.929573 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 11:40:22.951023 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 11:40:22.951054 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 11:40:22.967990 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 11:40:22.968046 [INFO] stopping current container: d951c1e814aa
2024/01/30 11:40:22.968059 [INFO] Running command /bin/sh -c docker ps | grep -q d951c1e814aa
2024/01/30 11:40:22.989993 [INFO] Running command /bin/sh -c docker ps | grep -q d951c1e814aa
2024/01/30 11:40:23.019376 [INFO] Pruning containers ...
2024/01/30 11:40:23.019399 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 11:40:23.046031 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 11:40:23.046059 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 11:40:23.072454 [INFO] Total reclaimed space: 0B

2024/01/30 11:40:23.072480 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 11:40:23.092899 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 11:40:23.093051 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 11:40:23.129014 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 11:40:23.129577 [INFO] Removing /var/app/current/ if it exists
2024/01/30 11:40:23.130538 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 11:40:23.130564 [INFO] detected new app is not docker compose app
2024/01/30 11:40:23.130981 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 11:40:23.625433 [INFO] 5bc0667e8bd3b440c074519c346158f0d00276ea6a8b0781389ebf76e09a5316

2024/01/30 11:40:28.625917 [INFO] Running command /bin/sh -c docker ps | grep -q 5bc0667e8bd3
2024/01/30 11:40:28.653064 [ERROR] docker container quit unexpectedly on 2024-01-30 11:40:28.653045766 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5bc0667e8bd3 failed with error exit status 1
2024/01/30 11:40:28.653093 [INFO] Running command /bin/sh -c docker logs 5bc0667e8bd3
2024/01/30 11:40:28.677212 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5bc0667e8bd3: Command /bin/sh -c docker ps | grep -q 5bc0667e8bd3 failed with error exit status 1 

2024/01/30 11:40:28.677224 [INFO] Executing cleanup logic
2024/01/30 11:40:28.677472 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 12:40:29.629543 [INFO] Starting...
2024/01/30 12:40:29.629590 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 12:40:29.629624 [INFO] reading event message file
2024/01/30 12:40:29.630439 [INFO] Engine received EB command userdata-exec

2024/01/30 12:40:29.635864 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 12:40:30.034076 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 12:40:30.467653 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 12:40:30.467736 [INFO] Engine command: (self-startup)

2024/01/30 12:40:30.467741 [INFO] Downloading EB Application...
2024/01/30 12:40:30.467743 [INFO] Region: eu-west-1
2024/01/30 12:40:30.467745 [INFO] envID: e-8gmkc7rmw6
2024/01/30 12:40:30.467748 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 12:40:30.467750 [INFO] Using manifest file name from command request
2024/01/30 12:40:30.467762 [INFO] Unable to get version manifest file.
2024/01/30 12:40:30.467764 [INFO] Downloading latest manifest available.
2024/01/30 12:40:30.467767 [INFO] Download latest app version manifest
2024/01/30 12:40:30.467891 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 12:40:30.511723 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 12:40:30.512049 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 12:40:30.524945 [INFO] Download successful124bytes downloaded
2024/01/30 12:40:30.525073 [INFO] Trying to read and parse version manifest...
2024/01/30 12:40:30.525231 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 12:40:30.548179 [INFO] Download successful264bytes downloaded
2024/01/30 12:40:30.548608 [INFO] Executing instruction: SyncClock
2024/01/30 12:40:30.548615 [INFO] Starting SyncClock
2024/01/30 12:40:30.548631 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 12:40:30.555023 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 12:40:14 2024
System time     : 0.000000606 seconds fast of NTP time
Last offset     : -0.000000742 seconds
RMS offset      : 0.000002403 seconds
Frequency       : 0.570 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.044 ppm
Root delay      : 0.000410297 seconds
Root dispersion : 0.000437835 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 12:40:30.555044 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 12:40:30.559800 [INFO] 200 OK

2024/01/30 12:40:30.559886 [INFO] Skipping Configure OS
2024/01/30 12:40:30.559891 [INFO] Skipping LockRepo
2024/01/30 12:40:30.559895 [INFO] Skipping GenerateEBBanner
2024/01/30 12:40:30.559899 [INFO] Skipping Install Process Manager
2024/01/30 12:40:30.559903 [INFO] Skipping install syslog
2024/01/30 12:40:30.559907 [INFO] Skipping install cron
2024/01/30 12:40:30.559910 [INFO] Skipping install proxy
2024/01/30 12:40:30.559914 [INFO] Skipping installhealthd
2024/01/30 12:40:30.559918 [INFO] Skipping Install Log Streaming Manager
2024/01/30 12:40:30.559922 [INFO] Skipping install X-Ray
2024/01/30 12:40:30.559926 [INFO] Skipping install Third Party License
2024/01/30 12:40:30.559931 [INFO] Skipping installSqsd
2024/01/30 12:40:30.559934 [INFO] Skipping bootstraphealthd
2024/01/30 12:40:30.559938 [INFO] Skipping Install yum packages
2024/01/30 12:40:30.559942 [INFO] Skipping install docker-compose
2024/01/30 12:40:30.559948 [INFO] Skipping Configure Docker Daemon
2024/01/30 12:40:30.559952 [INFO] Skipping MarkBaked
2024/01/30 12:40:30.559957 [INFO] Skipping TuneSystemSettings
2024/01/30 12:40:30.559959 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 12:40:30.559962 [INFO] Initialize LogRotate files and directories
2024/01/30 12:40:30.573845 [INFO] Skipping BootstrapCFNHup
2024/01/30 12:40:30.573858 [INFO] Executing instruction: StartCFNHup
2024/01/30 12:40:30.573861 [INFO] Start cfn-hup
2024/01/30 12:40:30.573877 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 12:40:30.588929 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 12:40:30.599071 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 12:40:30.599104 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 12:40:30.599108 [INFO] Executing instruction: Start Docker
2024/01/30 12:40:30.599111 [INFO] Starting Docker...
2024/01/30 12:40:30.599335 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 12:40:30.600310 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 12:40:30.601368 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 12:40:30.941729 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 12:40:30.958373 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 12:40:30.958595 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 12:40:30.969575 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 12:40:30.978030 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 12:40:30.989083 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 12:40:31.043063 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 12:40:31.043152 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 12:40:31.352442 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 12:40:31.660263 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 12:40:31.673865 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 12:40:31.978188 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 12:40:31.988038 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 12:40:32.005096 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 12:40:32.017298 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 12:40:33.147383 [INFO] Skipping Setup Docker Options
2024/01/30 12:40:33.147414 [INFO] Skipping MarkBootstrapped
2024/01/30 12:40:33.147418 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 12:40:33.147535 [INFO] Starting SwitchCFNStack
2024/01/30 12:40:33.147540 [INFO] Executing instruction: stopSqsd
2024/01/30 12:40:33.147543 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 12:40:33.147546 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 12:40:33.147551 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 12:40:33.147568 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 12:40:33.590849 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 12:40:33.590927 [INFO] Executing instruction: StagedockerApplication
2024/01/30 12:40:33.590940 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 12:40:33.609840 [INFO] Pruning containers ...
2024/01/30 12:40:33.609868 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 12:40:33.628563 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
5bc0667e8bd3   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             silly_neumann

2024/01/30 12:40:33.628594 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 12:40:33.652552 [INFO] Deleted Containers:
5bc0667e8bd3b440c074519c346158f0d00276ea6a8b0781389ebf76e09a5316

Total reclaimed space: 0B

2024/01/30 12:40:33.652575 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 12:40:33.672141 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 12:40:33.672374 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 12:40:33.675241 [INFO] application/json

2024/01/30 12:40:33.675277 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 12:40:33.758197 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 12:40:33.758372 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 12:40:33.759828 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 12:40:33.759853 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 12:40:33.759870 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 12:40:33.759873 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 12:40:33.759877 [INFO] Executing instruction: Generate environment file
2024/01/30 12:40:33.759902 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 12:40:33.759906 [INFO] start build docker app
2024/01/30 12:40:33.760323 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 12:40:33.760333 [INFO] fetching image and ports
2024/01/30 12:40:33.762605 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 12:40:33.762662 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 12:40:33.762670 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 12:40:33.762683 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 12:40:34.683403 [INFO] Login Succeeded

2024/01/30 12:40:34.683421 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 12:40:34.683427 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 12:40:34.683443 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 12:40:34.825126 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 12:40:34.825149 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 12:40:34.825160 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 12:40:34.825164 [INFO] start to build docker image
2024/01/30 12:40:34.825182 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 12:40:35.157287 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 12:40:35.157306 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 12:40:35.157310 [INFO] successfully build docker image
2024/01/30 12:40:35.157312 [INFO] save staging docker image id
2024/01/30 12:40:35.157332 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 12:40:35.185296 [INFO] c176d18fbf65

2024/01/30 12:40:35.185498 [INFO] Executing instruction: configure X-Ray
2024/01/30 12:40:35.185505 [INFO] X-Ray is not enabled.
2024/01/30 12:40:35.185508 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 12:40:35.191525 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 12:40:35.193376 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 12:40:35.206015 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 12:40:35.206046 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 12:40:35.218096 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 12:40:35.227179 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 12:40:35.236525 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 12:40:35.309227 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 12:40:35.667711 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 12:40:35.668131 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 12:40:36.000632 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 12:40:36.012975 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 12:40:36.280535 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 12:40:36.290189 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 12:40:36.299109 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 12:40:36.692881 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 12:40:36.703446 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 12:40:37.048169 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 12:40:37.048241 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 12:40:37.062857 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 12:40:37.071889 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 12:40:37.142564 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 12:40:37.143446 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 12:40:37.144416 [INFO] Executing instruction: configure log streaming
2024/01/30 12:40:37.144425 [INFO] log streaming is not enabled
2024/01/30 12:40:37.144428 [INFO] disable log stream
2024/01/30 12:40:37.144440 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 12:40:37.168257 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 12:40:37.189721 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 12:40:37.189758 [INFO] Checking if logs need forced rotation
2024/01/30 12:40:37.189783 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 12:40:37.743490 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 12:40:38.280804 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 12:40:38.282492 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 12:40:38.652610 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 12:40:38.671979 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 12:40:38.672000 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 12:40:38.672015 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 12:40:39.100818 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 12:40:39.100842 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 12:40:39.100866 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 12:40:39.100869 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 12:40:39.100895 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 12:40:39.100906 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 12:40:39.100908 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 12:40:39.100913 [INFO] Executing instruction: stop X-Ray
2024/01/30 12:40:39.100915 [INFO] stop X-Ray ...
2024/01/30 12:40:39.100926 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 12:40:39.113964 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 12:40:39.113996 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 12:40:39.129086 [INFO] Executing instruction: Run Docker Container
2024/01/30 12:40:39.129118 [INFO] stop currently running containers...
2024/01/30 12:40:39.129130 [INFO] detected old app is not docker compose app
2024/01/30 12:40:39.129144 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 12:40:39.152643 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 12:40:39.169607 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 12:40:39.169671 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 12:40:39.186684 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 12:40:39.186718 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 12:40:39.201773 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 12:40:39.201856 [INFO] stopping current container: 5bc0667e8bd3
2024/01/30 12:40:39.201868 [INFO] Running command /bin/sh -c docker ps | grep -q 5bc0667e8bd3
2024/01/30 12:40:39.223133 [INFO] Running command /bin/sh -c docker ps | grep -q 5bc0667e8bd3
2024/01/30 12:40:39.249128 [INFO] Pruning containers ...
2024/01/30 12:40:39.249151 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 12:40:39.297291 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 12:40:39.297325 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 12:40:39.314932 [INFO] Total reclaimed space: 0B

2024/01/30 12:40:39.314956 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 12:40:39.334193 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 12:40:39.334226 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 12:40:39.355247 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 12:40:39.355307 [INFO] Removing /var/app/current/ if it exists
2024/01/30 12:40:39.355404 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 12:40:39.355421 [INFO] detected new app is not docker compose app
2024/01/30 12:40:39.355468 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 12:40:39.763339 [INFO] bfd04c77fd34cf5e806cc4ec544e7bd64d2b1e8d8d4477d05fbe5f990a477d88

2024/01/30 12:40:44.767655 [INFO] Running command /bin/sh -c docker ps | grep -q bfd04c77fd34
2024/01/30 12:40:44.787797 [ERROR] docker container quit unexpectedly on 2024-01-30 12:40:44.787778773 +0000 UTC: Command /bin/sh -c docker ps | grep -q bfd04c77fd34 failed with error exit status 1
2024/01/30 12:40:44.787825 [INFO] Running command /bin/sh -c docker logs bfd04c77fd34
2024/01/30 12:40:44.807154 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container bfd04c77fd34: Command /bin/sh -c docker ps | grep -q bfd04c77fd34 failed with error exit status 1 

2024/01/30 12:40:44.807172 [INFO] Executing cleanup logic
2024/01/30 12:40:44.807454 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 13:40:45.956524 [INFO] Starting...
2024/01/30 13:40:45.956571 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 13:40:45.956596 [INFO] reading event message file
2024/01/30 13:40:45.957307 [INFO] Engine received EB command userdata-exec

2024/01/30 13:40:45.964334 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 13:40:46.332860 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 13:40:46.769881 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 13:40:46.769999 [INFO] Engine command: (self-startup)

2024/01/30 13:40:46.770011 [INFO] Downloading EB Application...
2024/01/30 13:40:46.770014 [INFO] Region: eu-west-1
2024/01/30 13:40:46.770016 [INFO] envID: e-8gmkc7rmw6
2024/01/30 13:40:46.770019 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 13:40:46.770021 [INFO] Using manifest file name from command request
2024/01/30 13:40:46.770036 [INFO] Unable to get version manifest file.
2024/01/30 13:40:46.770038 [INFO] Downloading latest manifest available.
2024/01/30 13:40:46.770041 [INFO] Download latest app version manifest
2024/01/30 13:40:46.770145 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 13:40:46.809976 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 13:40:46.810304 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 13:40:46.827646 [INFO] Download successful124bytes downloaded
2024/01/30 13:40:46.827842 [INFO] Trying to read and parse version manifest...
2024/01/30 13:40:46.827979 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 13:40:46.855015 [INFO] Download successful264bytes downloaded
2024/01/30 13:40:46.855375 [INFO] Executing instruction: SyncClock
2024/01/30 13:40:46.855380 [INFO] Starting SyncClock
2024/01/30 13:40:46.855390 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 13:40:46.860731 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 13:40:38 2024
System time     : 0.000000508 seconds slow of NTP time
Last offset     : -0.000000371 seconds
RMS offset      : 0.000004457 seconds
Frequency       : 0.681 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.051 ppm
Root delay      : 0.000411506 seconds
Root dispersion : 0.000418467 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 13:40:46.860750 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 13:40:46.864471 [INFO] 200 OK

2024/01/30 13:40:46.864591 [INFO] Skipping Configure OS
2024/01/30 13:40:46.864599 [INFO] Skipping LockRepo
2024/01/30 13:40:46.864604 [INFO] Skipping GenerateEBBanner
2024/01/30 13:40:46.864610 [INFO] Skipping Install Process Manager
2024/01/30 13:40:46.864616 [INFO] Skipping install syslog
2024/01/30 13:40:46.864621 [INFO] Skipping install cron
2024/01/30 13:40:46.864627 [INFO] Skipping install proxy
2024/01/30 13:40:46.864633 [INFO] Skipping installhealthd
2024/01/30 13:40:46.864638 [INFO] Skipping Install Log Streaming Manager
2024/01/30 13:40:46.864643 [INFO] Skipping install X-Ray
2024/01/30 13:40:46.864649 [INFO] Skipping install Third Party License
2024/01/30 13:40:46.864656 [INFO] Skipping installSqsd
2024/01/30 13:40:46.864662 [INFO] Skipping bootstraphealthd
2024/01/30 13:40:46.864668 [INFO] Skipping Install yum packages
2024/01/30 13:40:46.864672 [INFO] Skipping install docker-compose
2024/01/30 13:40:46.864676 [INFO] Skipping Configure Docker Daemon
2024/01/30 13:40:46.864686 [INFO] Skipping MarkBaked
2024/01/30 13:40:46.864691 [INFO] Skipping TuneSystemSettings
2024/01/30 13:40:46.864694 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 13:40:46.864697 [INFO] Initialize LogRotate files and directories
2024/01/30 13:40:46.879305 [INFO] Skipping BootstrapCFNHup
2024/01/30 13:40:46.879317 [INFO] Executing instruction: StartCFNHup
2024/01/30 13:40:46.879320 [INFO] Start cfn-hup
2024/01/30 13:40:46.879341 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 13:40:46.898669 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 13:40:46.908498 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 13:40:46.908535 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 13:40:46.908545 [INFO] Executing instruction: Start Docker
2024/01/30 13:40:46.908548 [INFO] Starting Docker...
2024/01/30 13:40:46.908633 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 13:40:46.909977 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 13:40:46.911119 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 13:40:47.400552 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 13:40:47.414794 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 13:40:47.414818 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 13:40:47.426062 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 13:40:47.434325 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 13:40:47.444832 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 13:40:47.476665 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 13:40:47.476705 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 13:40:47.838811 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 13:40:48.189951 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 13:40:48.202691 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 13:40:48.582101 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 13:40:48.591557 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 13:40:48.607451 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 13:40:48.616124 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 13:40:49.857451 [INFO] Skipping Setup Docker Options
2024/01/30 13:40:49.857479 [INFO] Skipping MarkBootstrapped
2024/01/30 13:40:49.857482 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 13:40:49.857597 [INFO] Starting SwitchCFNStack
2024/01/30 13:40:49.857603 [INFO] Executing instruction: stopSqsd
2024/01/30 13:40:49.857607 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 13:40:49.857610 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 13:40:49.857614 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 13:40:49.857630 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 13:40:50.356734 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 13:40:50.356756 [INFO] Executing instruction: StagedockerApplication
2024/01/30 13:40:50.356770 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 13:40:50.376168 [INFO] Pruning containers ...
2024/01/30 13:40:50.376203 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 13:40:50.401201 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
bfd04c77fd34   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             beautiful_payne

2024/01/30 13:40:50.401230 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 13:40:50.425920 [INFO] Deleted Containers:
bfd04c77fd34cf5e806cc4ec544e7bd64d2b1e8d8d4477d05fbe5f990a477d88

Total reclaimed space: 0B

2024/01/30 13:40:50.425948 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 13:40:50.444217 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 13:40:50.444463 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 13:40:50.447322 [INFO] application/json

2024/01/30 13:40:50.447445 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 13:40:50.525981 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 13:40:50.526273 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 13:40:50.527474 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 13:40:50.527500 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 13:40:50.527514 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 13:40:50.527517 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 13:40:50.527521 [INFO] Executing instruction: Generate environment file
2024/01/30 13:40:50.527546 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 13:40:50.527549 [INFO] start build docker app
2024/01/30 13:40:50.527958 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 13:40:50.527962 [INFO] fetching image and ports
2024/01/30 13:40:50.529494 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 13:40:50.529552 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 13:40:50.529560 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 13:40:50.529569 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 13:40:51.549644 [INFO] Login Succeeded

2024/01/30 13:40:51.549662 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 13:40:51.549668 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 13:40:51.549684 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 13:40:51.724432 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 13:40:51.724456 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 13:40:51.724460 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 13:40:51.724468 [INFO] start to build docker image
2024/01/30 13:40:51.724482 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 13:40:51.992716 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 13:40:51.992734 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 13:40:51.992738 [INFO] successfully build docker image
2024/01/30 13:40:51.992740 [INFO] save staging docker image id
2024/01/30 13:40:51.992753 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 13:40:52.022061 [INFO] c176d18fbf65

2024/01/30 13:40:52.022208 [INFO] Executing instruction: configure X-Ray
2024/01/30 13:40:52.022214 [INFO] X-Ray is not enabled.
2024/01/30 13:40:52.022219 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 13:40:52.027918 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 13:40:52.029773 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 13:40:52.051227 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 13:40:52.051273 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 13:40:52.062282 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 13:40:52.071673 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 13:40:52.081793 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 13:40:52.138813 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 13:40:52.502560 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 13:40:52.502751 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 13:40:52.933962 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 13:40:52.947311 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 13:40:53.269597 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 13:40:53.287906 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 13:40:53.304172 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 13:40:53.626990 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 13:40:53.641547 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 13:40:53.979078 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 13:40:53.979112 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 13:40:53.992163 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 13:40:54.004460 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 13:40:54.103546 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 13:40:54.104541 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 13:40:54.105544 [INFO] Executing instruction: configure log streaming
2024/01/30 13:40:54.105555 [INFO] log streaming is not enabled
2024/01/30 13:40:54.105559 [INFO] disable log stream
2024/01/30 13:40:54.105574 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 13:40:54.127443 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 13:40:54.150126 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 13:40:54.150153 [INFO] Checking if logs need forced rotation
2024/01/30 13:40:54.150176 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 13:40:54.746241 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 13:40:55.305764 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 13:40:55.308211 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 13:40:55.379483 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 13:40:55.401839 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 13:40:55.401867 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 13:40:55.401882 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 13:40:55.762530 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 13:40:55.762553 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 13:40:55.762577 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 13:40:55.762580 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 13:40:55.762601 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 13:40:55.762611 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 13:40:55.762617 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 13:40:55.762622 [INFO] Executing instruction: stop X-Ray
2024/01/30 13:40:55.762624 [INFO] stop X-Ray ...
2024/01/30 13:40:55.762634 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 13:40:55.793417 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 13:40:55.793451 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 13:40:55.810671 [INFO] Executing instruction: Run Docker Container
2024/01/30 13:40:55.810702 [INFO] stop currently running containers...
2024/01/30 13:40:55.810711 [INFO] detected old app is not docker compose app
2024/01/30 13:40:55.810723 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 13:40:55.842976 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 13:40:55.859424 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 13:40:55.859455 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 13:40:55.873756 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 13:40:55.873788 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 13:40:55.888726 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 13:40:55.888781 [INFO] stopping current container: bfd04c77fd34
2024/01/30 13:40:55.888793 [INFO] Running command /bin/sh -c docker ps | grep -q bfd04c77fd34
2024/01/30 13:40:55.909090 [INFO] Running command /bin/sh -c docker ps | grep -q bfd04c77fd34
2024/01/30 13:40:55.933111 [INFO] Pruning containers ...
2024/01/30 13:40:55.933135 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 13:40:55.971093 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 13:40:55.971126 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 13:40:56.002502 [INFO] Total reclaimed space: 0B

2024/01/30 13:40:56.002532 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 13:40:56.027832 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 13:40:56.027866 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 13:40:56.047886 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 13:40:56.047907 [INFO] Removing /var/app/current/ if it exists
2024/01/30 13:40:56.047997 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 13:40:56.048014 [INFO] detected new app is not docker compose app
2024/01/30 13:40:56.048061 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 13:40:56.441897 [INFO] c38277fa59ee8cc5d14b96f52e9e0aa477b9cab4654d8f2f56966166362048c4

2024/01/30 13:41:01.442513 [INFO] Running command /bin/sh -c docker ps | grep -q c38277fa59ee
2024/01/30 13:41:01.483064 [ERROR] docker container quit unexpectedly on 2024-01-30 13:41:01.483049546 +0000 UTC: Command /bin/sh -c docker ps | grep -q c38277fa59ee failed with error exit status 1
2024/01/30 13:41:01.483095 [INFO] Running command /bin/sh -c docker logs c38277fa59ee
2024/01/30 13:41:01.533417 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c38277fa59ee: Command /bin/sh -c docker ps | grep -q c38277fa59ee failed with error exit status 1 

2024/01/30 13:41:01.533428 [INFO] Executing cleanup logic
2024/01/30 13:41:01.533972 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 14:41:03.073757 [INFO] Starting...
2024/01/30 14:41:03.073799 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 14:41:03.073823 [INFO] reading event message file
2024/01/30 14:41:03.075636 [INFO] Engine received EB command userdata-exec

2024/01/30 14:41:03.082914 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 14:41:03.605155 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 14:41:04.083094 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 14:41:04.083198 [INFO] Engine command: (self-startup)

2024/01/30 14:41:04.083207 [INFO] Downloading EB Application...
2024/01/30 14:41:04.083210 [INFO] Region: eu-west-1
2024/01/30 14:41:04.083286 [INFO] envID: e-8gmkc7rmw6
2024/01/30 14:41:04.083290 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 14:41:04.083293 [INFO] Using manifest file name from command request
2024/01/30 14:41:04.083308 [INFO] Unable to get version manifest file.
2024/01/30 14:41:04.083311 [INFO] Downloading latest manifest available.
2024/01/30 14:41:04.083313 [INFO] Download latest app version manifest
2024/01/30 14:41:04.083422 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 14:41:04.127360 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 14:41:04.127569 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 14:41:04.138300 [INFO] Download successful124bytes downloaded
2024/01/30 14:41:04.138452 [INFO] Trying to read and parse version manifest...
2024/01/30 14:41:04.138530 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 14:41:04.159984 [INFO] Download successful264bytes downloaded
2024/01/30 14:41:04.160438 [INFO] Executing instruction: SyncClock
2024/01/30 14:41:04.160444 [INFO] Starting SyncClock
2024/01/30 14:41:04.160455 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 14:41:04.166078 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 14:40:57 2024
System time     : 0.000001410 seconds slow of NTP time
Last offset     : +0.000000489 seconds
RMS offset      : 0.000002679 seconds
Frequency       : 0.560 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.057 ppm
Root delay      : 0.000426557 seconds
Root dispersion : 0.000339773 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 14:41:04.166101 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 14:41:04.170931 [INFO] 200 OK

2024/01/30 14:41:04.171013 [INFO] Skipping Configure OS
2024/01/30 14:41:04.171018 [INFO] Skipping LockRepo
2024/01/30 14:41:04.171022 [INFO] Skipping GenerateEBBanner
2024/01/30 14:41:04.171026 [INFO] Skipping Install Process Manager
2024/01/30 14:41:04.171030 [INFO] Skipping install syslog
2024/01/30 14:41:04.171034 [INFO] Skipping install cron
2024/01/30 14:41:04.171037 [INFO] Skipping install proxy
2024/01/30 14:41:04.171041 [INFO] Skipping installhealthd
2024/01/30 14:41:04.171045 [INFO] Skipping Install Log Streaming Manager
2024/01/30 14:41:04.171049 [INFO] Skipping install X-Ray
2024/01/30 14:41:04.171053 [INFO] Skipping install Third Party License
2024/01/30 14:41:04.171057 [INFO] Skipping installSqsd
2024/01/30 14:41:04.171061 [INFO] Skipping bootstraphealthd
2024/01/30 14:41:04.171065 [INFO] Skipping Install yum packages
2024/01/30 14:41:04.171068 [INFO] Skipping install docker-compose
2024/01/30 14:41:04.171072 [INFO] Skipping Configure Docker Daemon
2024/01/30 14:41:04.171093 [INFO] Skipping MarkBaked
2024/01/30 14:41:04.171097 [INFO] Skipping TuneSystemSettings
2024/01/30 14:41:04.171100 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 14:41:04.171102 [INFO] Initialize LogRotate files and directories
2024/01/30 14:41:04.186596 [INFO] Skipping BootstrapCFNHup
2024/01/30 14:41:04.186607 [INFO] Executing instruction: StartCFNHup
2024/01/30 14:41:04.186610 [INFO] Start cfn-hup
2024/01/30 14:41:04.186626 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 14:41:04.202912 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 14:41:04.211794 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 14:41:04.211822 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 14:41:04.211826 [INFO] Executing instruction: Start Docker
2024/01/30 14:41:04.211828 [INFO] Starting Docker...
2024/01/30 14:41:04.211888 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 14:41:04.212844 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 14:41:04.213926 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 14:41:04.631301 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 14:41:04.646880 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 14:41:04.646941 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 14:41:04.658841 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 14:41:04.670053 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 14:41:04.681100 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 14:41:04.799838 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 14:41:04.799883 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 14:41:05.104630 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 14:41:05.412447 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 14:41:05.423183 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 14:41:05.707428 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 14:41:05.717217 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 14:41:05.729449 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 14:41:05.739016 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 14:41:07.053761 [INFO] Skipping Setup Docker Options
2024/01/30 14:41:07.053779 [INFO] Skipping MarkBootstrapped
2024/01/30 14:41:07.053782 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 14:41:07.053861 [INFO] Starting SwitchCFNStack
2024/01/30 14:41:07.053866 [INFO] Executing instruction: stopSqsd
2024/01/30 14:41:07.053868 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 14:41:07.053871 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 14:41:07.053874 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 14:41:07.053888 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 14:41:07.520284 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 14:41:07.520365 [INFO] Executing instruction: StagedockerApplication
2024/01/30 14:41:07.520380 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 14:41:07.541595 [INFO] Pruning containers ...
2024/01/30 14:41:07.541623 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 14:41:07.565612 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c38277fa59ee   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             distracted_jackson

2024/01/30 14:41:07.565641 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 14:41:07.595710 [INFO] Deleted Containers:
c38277fa59ee8cc5d14b96f52e9e0aa477b9cab4654d8f2f56966166362048c4

Total reclaimed space: 0B

2024/01/30 14:41:07.595734 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 14:41:07.617927 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 14:41:07.618266 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 14:41:07.621094 [INFO] application/json

2024/01/30 14:41:07.621110 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 14:41:07.699093 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 14:41:07.699261 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 14:41:07.700878 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 14:41:07.700914 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 14:41:07.700932 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 14:41:07.700935 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 14:41:07.700939 [INFO] Executing instruction: Generate environment file
2024/01/30 14:41:07.700965 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 14:41:07.700973 [INFO] start build docker app
2024/01/30 14:41:07.701461 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 14:41:07.701470 [INFO] fetching image and ports
2024/01/30 14:41:07.706515 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 14:41:07.706588 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 14:41:07.706597 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 14:41:07.706666 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 14:41:08.570265 [INFO] Login Succeeded

2024/01/30 14:41:08.570287 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 14:41:08.570293 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 14:41:08.570310 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 14:41:08.723199 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 14:41:08.723224 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 14:41:08.723235 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 14:41:08.723239 [INFO] start to build docker image
2024/01/30 14:41:08.723253 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 14:41:09.018828 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 14:41:09.018855 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 14:41:09.018860 [INFO] successfully build docker image
2024/01/30 14:41:09.018863 [INFO] save staging docker image id
2024/01/30 14:41:09.018878 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 14:41:09.045878 [INFO] c176d18fbf65

2024/01/30 14:41:09.045989 [INFO] Executing instruction: configure X-Ray
2024/01/30 14:41:09.045994 [INFO] X-Ray is not enabled.
2024/01/30 14:41:09.045997 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 14:41:09.051843 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 14:41:09.053578 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 14:41:09.066164 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 14:41:09.066198 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 14:41:09.076981 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 14:41:09.087491 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 14:41:09.098209 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 14:41:09.180729 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 14:41:09.519051 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 14:41:09.520436 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 14:41:09.864605 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 14:41:09.876996 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 14:41:10.168264 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 14:41:10.177901 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 14:41:10.186966 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 14:41:10.511502 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 14:41:10.523951 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 14:41:10.847611 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 14:41:10.847650 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 14:41:10.862303 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 14:41:10.875023 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 14:41:10.975584 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 14:41:10.976475 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 14:41:10.977473 [INFO] Executing instruction: configure log streaming
2024/01/30 14:41:10.977482 [INFO] log streaming is not enabled
2024/01/30 14:41:10.977486 [INFO] disable log stream
2024/01/30 14:41:10.977501 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 14:41:10.999506 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 14:41:11.019174 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 14:41:11.019198 [INFO] Checking if logs need forced rotation
2024/01/30 14:41:11.019222 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 14:41:11.586648 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 14:41:12.146830 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 14:41:12.148469 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 14:41:12.628434 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 14:41:12.651305 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 14:41:12.651322 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 14:41:12.651332 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 14:41:13.124466 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 14:41:13.124499 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 14:41:13.124538 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 14:41:13.124541 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 14:41:13.124561 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 14:41:13.124571 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 14:41:13.124573 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 14:41:13.124578 [INFO] Executing instruction: stop X-Ray
2024/01/30 14:41:13.124580 [INFO] stop X-Ray ...
2024/01/30 14:41:13.124590 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 14:41:13.140378 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 14:41:13.140413 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 14:41:13.156961 [INFO] Executing instruction: Run Docker Container
2024/01/30 14:41:13.157027 [INFO] stop currently running containers...
2024/01/30 14:41:13.157037 [INFO] detected old app is not docker compose app
2024/01/30 14:41:13.157048 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 14:41:13.192504 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 14:41:13.218283 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 14:41:13.218316 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 14:41:13.233575 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 14:41:13.233609 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 14:41:13.248094 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 14:41:13.248141 [INFO] stopping current container: c38277fa59ee
2024/01/30 14:41:13.248154 [INFO] Running command /bin/sh -c docker ps | grep -q c38277fa59ee
2024/01/30 14:41:13.269803 [INFO] Running command /bin/sh -c docker ps | grep -q c38277fa59ee
2024/01/30 14:41:13.290217 [INFO] Pruning containers ...
2024/01/30 14:41:13.290244 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 14:41:13.307308 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 14:41:13.307352 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 14:41:13.333723 [INFO] Total reclaimed space: 0B

2024/01/30 14:41:13.333777 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 14:41:13.358686 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 14:41:13.358716 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 14:41:13.379640 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 14:41:13.379665 [INFO] Removing /var/app/current/ if it exists
2024/01/30 14:41:13.379765 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 14:41:13.379788 [INFO] detected new app is not docker compose app
2024/01/30 14:41:13.379845 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 14:41:13.721698 [INFO] 1dabc1b2da6e96e3af4ffe0566b669722e1ab9661f2b9a659212035c670e05f1

2024/01/30 14:41:18.722053 [INFO] Running command /bin/sh -c docker ps | grep -q 1dabc1b2da6e
2024/01/30 14:41:18.750663 [ERROR] docker container quit unexpectedly on 2024-01-30 14:41:18.750652267 +0000 UTC: Command /bin/sh -c docker ps | grep -q 1dabc1b2da6e failed with error exit status 1
2024/01/30 14:41:18.750689 [INFO] Running command /bin/sh -c docker logs 1dabc1b2da6e
2024/01/30 14:41:18.772003 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 1dabc1b2da6e: Command /bin/sh -c docker ps | grep -q 1dabc1b2da6e failed with error exit status 1 

2024/01/30 14:41:18.772015 [INFO] Executing cleanup logic
2024/01/30 14:41:18.772274 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 15:41:19.825214 [INFO] Starting...
2024/01/30 15:41:19.825257 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 15:41:19.825280 [INFO] reading event message file
2024/01/30 15:41:19.826030 [INFO] Engine received EB command userdata-exec

2024/01/30 15:41:19.833962 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 15:41:20.205192 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 15:41:20.649676 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 15:41:20.649728 [INFO] Engine command: (self-startup)

2024/01/30 15:41:20.649742 [INFO] Downloading EB Application...
2024/01/30 15:41:20.649745 [INFO] Region: eu-west-1
2024/01/30 15:41:20.649747 [INFO] envID: e-8gmkc7rmw6
2024/01/30 15:41:20.649749 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 15:41:20.649752 [INFO] Using manifest file name from command request
2024/01/30 15:41:20.649766 [INFO] Unable to get version manifest file.
2024/01/30 15:41:20.649768 [INFO] Downloading latest manifest available.
2024/01/30 15:41:20.649770 [INFO] Download latest app version manifest
2024/01/30 15:41:20.649924 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 15:41:20.694402 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 15:41:20.694569 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 15:41:20.704988 [INFO] Download successful124bytes downloaded
2024/01/30 15:41:20.705122 [INFO] Trying to read and parse version manifest...
2024/01/30 15:41:20.705196 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 15:41:20.738793 [INFO] Download successful264bytes downloaded
2024/01/30 15:41:20.739175 [INFO] Executing instruction: SyncClock
2024/01/30 15:41:20.739180 [INFO] Starting SyncClock
2024/01/30 15:41:20.739191 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 15:41:20.744435 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 15:41:18 2024
System time     : 0.000004798 seconds slow of NTP time
Last offset     : -0.000003043 seconds
RMS offset      : 0.000006042 seconds
Frequency       : 0.437 ppm fast
Residual freq   : -0.004 ppm
Skew            : 0.135 ppm
Root delay      : 0.000426269 seconds
Root dispersion : 0.000482062 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 15:41:20.744461 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 15:41:20.749332 [INFO] 200 OK

2024/01/30 15:41:20.749421 [INFO] Skipping Configure OS
2024/01/30 15:41:20.749426 [INFO] Skipping LockRepo
2024/01/30 15:41:20.749430 [INFO] Skipping GenerateEBBanner
2024/01/30 15:41:20.749434 [INFO] Skipping Install Process Manager
2024/01/30 15:41:20.749438 [INFO] Skipping install syslog
2024/01/30 15:41:20.749442 [INFO] Skipping install cron
2024/01/30 15:41:20.749446 [INFO] Skipping install proxy
2024/01/30 15:41:20.749449 [INFO] Skipping installhealthd
2024/01/30 15:41:20.749456 [INFO] Skipping Install Log Streaming Manager
2024/01/30 15:41:20.749460 [INFO] Skipping install X-Ray
2024/01/30 15:41:20.749465 [INFO] Skipping install Third Party License
2024/01/30 15:41:20.749470 [INFO] Skipping installSqsd
2024/01/30 15:41:20.749475 [INFO] Skipping bootstraphealthd
2024/01/30 15:41:20.749483 [INFO] Skipping Install yum packages
2024/01/30 15:41:20.749495 [INFO] Skipping install docker-compose
2024/01/30 15:41:20.749500 [INFO] Skipping Configure Docker Daemon
2024/01/30 15:41:20.749504 [INFO] Skipping MarkBaked
2024/01/30 15:41:20.749509 [INFO] Skipping TuneSystemSettings
2024/01/30 15:41:20.749512 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 15:41:20.749515 [INFO] Initialize LogRotate files and directories
2024/01/30 15:41:20.762219 [INFO] Skipping BootstrapCFNHup
2024/01/30 15:41:20.762230 [INFO] Executing instruction: StartCFNHup
2024/01/30 15:41:20.762234 [INFO] Start cfn-hup
2024/01/30 15:41:20.762250 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 15:41:20.774674 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 15:41:20.796298 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 15:41:20.796337 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 15:41:20.796341 [INFO] Executing instruction: Start Docker
2024/01/30 15:41:20.796345 [INFO] Starting Docker...
2024/01/30 15:41:20.796429 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 15:41:20.797680 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 15:41:20.798802 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 15:41:21.131248 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 15:41:21.146305 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 15:41:21.146333 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 15:41:21.157388 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 15:41:21.167591 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 15:41:21.180235 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 15:41:21.256771 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 15:41:21.256829 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 15:41:21.580359 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 15:41:22.033140 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 15:41:22.045408 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 15:41:22.395513 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 15:41:22.406241 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 15:41:22.419634 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 15:41:22.430284 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 15:41:23.638071 [INFO] Skipping Setup Docker Options
2024/01/30 15:41:23.638099 [INFO] Skipping MarkBootstrapped
2024/01/30 15:41:23.638103 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 15:41:23.638217 [INFO] Starting SwitchCFNStack
2024/01/30 15:41:23.638228 [INFO] Executing instruction: stopSqsd
2024/01/30 15:41:23.638232 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 15:41:23.638235 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 15:41:23.638239 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 15:41:23.638261 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 15:41:24.117496 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 15:41:24.117517 [INFO] Executing instruction: StagedockerApplication
2024/01/30 15:41:24.117548 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 15:41:24.136676 [INFO] Pruning containers ...
2024/01/30 15:41:24.136803 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 15:41:24.177144 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
1dabc1b2da6e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             keen_jones

2024/01/30 15:41:24.177173 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 15:41:24.213558 [INFO] Deleted Containers:
1dabc1b2da6e96e3af4ffe0566b669722e1ab9661f2b9a659212035c670e05f1

Total reclaimed space: 0B

2024/01/30 15:41:24.213584 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 15:41:24.236929 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 15:41:24.237361 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 15:41:24.241559 [INFO] application/json

2024/01/30 15:41:24.241586 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 15:41:24.366706 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 15:41:24.366933 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 15:41:24.368173 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 15:41:24.368196 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 15:41:24.368210 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 15:41:24.368214 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 15:41:24.368220 [INFO] Executing instruction: Generate environment file
2024/01/30 15:41:24.368297 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 15:41:24.368303 [INFO] start build docker app
2024/01/30 15:41:24.368700 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 15:41:24.368705 [INFO] fetching image and ports
2024/01/30 15:41:24.370368 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 15:41:24.370417 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 15:41:24.370426 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 15:41:24.370442 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 15:41:25.350284 [INFO] Login Succeeded

2024/01/30 15:41:25.350306 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 15:41:25.350314 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 15:41:25.350355 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 15:41:25.519416 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 15:41:25.519443 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 15:41:25.519458 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 15:41:25.519462 [INFO] start to build docker image
2024/01/30 15:41:25.519479 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 15:41:25.786461 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 15:41:25.786483 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 15:41:25.786487 [INFO] successfully build docker image
2024/01/30 15:41:25.786489 [INFO] save staging docker image id
2024/01/30 15:41:25.786501 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 15:41:25.808449 [INFO] c176d18fbf65

2024/01/30 15:41:25.808677 [INFO] Executing instruction: configure X-Ray
2024/01/30 15:41:25.808684 [INFO] X-Ray is not enabled.
2024/01/30 15:41:25.808690 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 15:41:25.814353 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 15:41:25.816219 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 15:41:25.829045 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 15:41:25.829073 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 15:41:25.840040 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 15:41:25.848641 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 15:41:25.858408 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 15:41:25.918978 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 15:41:26.266493 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 15:41:26.266699 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 15:41:26.613099 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 15:41:26.625046 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 15:41:26.959294 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 15:41:26.980681 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 15:41:26.993396 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 15:41:27.379419 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 15:41:27.392760 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 15:41:27.734044 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 15:41:27.734082 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 15:41:27.748969 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 15:41:27.769373 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 15:41:27.868838 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 15:41:27.870459 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 15:41:27.871996 [INFO] Executing instruction: configure log streaming
2024/01/30 15:41:27.872022 [INFO] log streaming is not enabled
2024/01/30 15:41:27.872026 [INFO] disable log stream
2024/01/30 15:41:27.872042 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 15:41:27.893415 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 15:41:27.930179 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 15:41:27.930229 [INFO] Checking if logs need forced rotation
2024/01/30 15:41:27.930256 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 15:41:28.554208 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 15:41:29.067104 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 15:41:29.069456 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 15:41:29.114441 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 15:41:29.135114 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 15:41:29.135134 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 15:41:29.135154 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 15:41:29.650725 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 15:41:29.650752 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 15:41:29.650778 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 15:41:29.650782 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 15:41:29.650806 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 15:41:29.650818 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 15:41:29.650821 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 15:41:29.650826 [INFO] Executing instruction: stop X-Ray
2024/01/30 15:41:29.650830 [INFO] stop X-Ray ...
2024/01/30 15:41:29.650844 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 15:41:29.668308 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 15:41:29.668346 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 15:41:29.684916 [INFO] Executing instruction: Run Docker Container
2024/01/30 15:41:29.684947 [INFO] stop currently running containers...
2024/01/30 15:41:29.684959 [INFO] detected old app is not docker compose app
2024/01/30 15:41:29.684976 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 15:41:29.734072 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 15:41:29.757028 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 15:41:29.757061 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 15:41:29.772894 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 15:41:29.772926 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 15:41:29.788422 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 15:41:29.788462 [INFO] stopping current container: 1dabc1b2da6e
2024/01/30 15:41:29.788482 [INFO] Running command /bin/sh -c docker ps | grep -q 1dabc1b2da6e
2024/01/30 15:41:29.810486 [INFO] Running command /bin/sh -c docker ps | grep -q 1dabc1b2da6e
2024/01/30 15:41:29.835113 [INFO] Pruning containers ...
2024/01/30 15:41:29.835139 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 15:41:29.869257 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 15:41:29.869291 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 15:41:29.890653 [INFO] Total reclaimed space: 0B

2024/01/30 15:41:29.890680 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 15:41:29.909707 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 15:41:29.909750 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 15:41:29.934782 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 15:41:29.934803 [INFO] Removing /var/app/current/ if it exists
2024/01/30 15:41:29.934892 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 15:41:29.934909 [INFO] detected new app is not docker compose app
2024/01/30 15:41:29.935068 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 15:41:30.375281 [INFO] 28ee3317e47eea17614b678ca5e4f6474919c4a38b2bf06a493ec691b9cfdac6

2024/01/30 15:41:35.375674 [INFO] Running command /bin/sh -c docker ps | grep -q 28ee3317e47e
2024/01/30 15:41:35.404390 [ERROR] docker container quit unexpectedly on 2024-01-30 15:41:35.404371723 +0000 UTC: Command /bin/sh -c docker ps | grep -q 28ee3317e47e failed with error exit status 1
2024/01/30 15:41:35.404419 [INFO] Running command /bin/sh -c docker logs 28ee3317e47e
2024/01/30 15:41:35.434983 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 28ee3317e47e: Command /bin/sh -c docker ps | grep -q 28ee3317e47e failed with error exit status 1 

2024/01/30 15:41:35.434992 [INFO] Executing cleanup logic
2024/01/30 15:41:35.435173 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 16:41:36.555960 [INFO] Starting...
2024/01/30 16:41:36.556005 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 16:41:36.556029 [INFO] reading event message file
2024/01/30 16:41:36.556732 [INFO] Engine received EB command userdata-exec

2024/01/30 16:41:36.564103 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 16:41:37.075267 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 16:41:37.614307 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 16:41:37.614388 [INFO] Engine command: (self-startup)

2024/01/30 16:41:37.614403 [INFO] Downloading EB Application...
2024/01/30 16:41:37.614408 [INFO] Region: eu-west-1
2024/01/30 16:41:37.614410 [INFO] envID: e-8gmkc7rmw6
2024/01/30 16:41:37.614413 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 16:41:37.614415 [INFO] Using manifest file name from command request
2024/01/30 16:41:37.614430 [INFO] Unable to get version manifest file.
2024/01/30 16:41:37.614432 [INFO] Downloading latest manifest available.
2024/01/30 16:41:37.614434 [INFO] Download latest app version manifest
2024/01/30 16:41:37.614565 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 16:41:37.655329 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 16:41:37.655491 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 16:41:37.690099 [INFO] Download successful124bytes downloaded
2024/01/30 16:41:37.690238 [INFO] Trying to read and parse version manifest...
2024/01/30 16:41:37.690307 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 16:41:37.723472 [INFO] Download successful264bytes downloaded
2024/01/30 16:41:37.723970 [INFO] Executing instruction: SyncClock
2024/01/30 16:41:37.723976 [INFO] Starting SyncClock
2024/01/30 16:41:37.723985 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 16:41:37.729321 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 16:41:23 2024
System time     : 0.000005485 seconds fast of NTP time
Last offset     : +0.000009812 seconds
RMS offset      : 0.000009646 seconds
Frequency       : 0.403 ppm fast
Residual freq   : +0.010 ppm
Skew            : 0.423 ppm
Root delay      : 0.000397655 seconds
Root dispersion : 0.000470951 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 16:41:37.729339 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 16:41:37.733614 [INFO] 200 OK

2024/01/30 16:41:37.733707 [INFO] Skipping Configure OS
2024/01/30 16:41:37.733712 [INFO] Skipping LockRepo
2024/01/30 16:41:37.733716 [INFO] Skipping GenerateEBBanner
2024/01/30 16:41:37.733720 [INFO] Skipping Install Process Manager
2024/01/30 16:41:37.733724 [INFO] Skipping install syslog
2024/01/30 16:41:37.733728 [INFO] Skipping install cron
2024/01/30 16:41:37.733731 [INFO] Skipping install proxy
2024/01/30 16:41:37.733736 [INFO] Skipping installhealthd
2024/01/30 16:41:37.733740 [INFO] Skipping Install Log Streaming Manager
2024/01/30 16:41:37.733743 [INFO] Skipping install X-Ray
2024/01/30 16:41:37.733747 [INFO] Skipping install Third Party License
2024/01/30 16:41:37.733755 [INFO] Skipping installSqsd
2024/01/30 16:41:37.733761 [INFO] Skipping bootstraphealthd
2024/01/30 16:41:37.733765 [INFO] Skipping Install yum packages
2024/01/30 16:41:37.733769 [INFO] Skipping install docker-compose
2024/01/30 16:41:37.733773 [INFO] Skipping Configure Docker Daemon
2024/01/30 16:41:37.733777 [INFO] Skipping MarkBaked
2024/01/30 16:41:37.733781 [INFO] Skipping TuneSystemSettings
2024/01/30 16:41:37.733783 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 16:41:37.733786 [INFO] Initialize LogRotate files and directories
2024/01/30 16:41:37.748035 [INFO] Skipping BootstrapCFNHup
2024/01/30 16:41:37.748044 [INFO] Executing instruction: StartCFNHup
2024/01/30 16:41:37.748047 [INFO] Start cfn-hup
2024/01/30 16:41:37.748063 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 16:41:37.763139 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 16:41:37.772311 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 16:41:37.772347 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 16:41:37.772351 [INFO] Executing instruction: Start Docker
2024/01/30 16:41:37.772354 [INFO] Starting Docker...
2024/01/30 16:41:37.772441 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 16:41:37.773370 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 16:41:37.774564 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 16:41:38.189292 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 16:41:38.212191 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 16:41:38.212235 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 16:41:38.222417 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 16:41:38.230446 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 16:41:38.243779 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 16:41:38.327263 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 16:41:38.327324 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 16:41:38.669089 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 16:41:38.988594 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 16:41:38.999607 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 16:41:39.353610 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 16:41:39.365739 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 16:41:39.378861 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 16:41:39.387448 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 16:41:40.671827 [INFO] Skipping Setup Docker Options
2024/01/30 16:41:40.671854 [INFO] Skipping MarkBootstrapped
2024/01/30 16:41:40.671860 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 16:41:40.671976 [INFO] Starting SwitchCFNStack
2024/01/30 16:41:40.671982 [INFO] Executing instruction: stopSqsd
2024/01/30 16:41:40.672063 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 16:41:40.672068 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 16:41:40.672073 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 16:41:40.672096 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 16:41:41.148671 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 16:41:41.148700 [INFO] Executing instruction: StagedockerApplication
2024/01/30 16:41:41.148723 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 16:41:41.172021 [INFO] Pruning containers ...
2024/01/30 16:41:41.172050 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 16:41:41.196651 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
28ee3317e47e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             relaxed_taussig

2024/01/30 16:41:41.196714 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 16:41:41.225289 [INFO] Deleted Containers:
28ee3317e47eea17614b678ca5e4f6474919c4a38b2bf06a493ec691b9cfdac6

Total reclaimed space: 0B

2024/01/30 16:41:41.225313 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 16:41:41.245599 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 16:41:41.246179 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 16:41:41.249215 [INFO] application/json

2024/01/30 16:41:41.249234 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 16:41:41.348244 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 16:41:41.348430 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 16:41:41.349827 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 16:41:41.349926 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 16:41:41.349942 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 16:41:41.349945 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 16:41:41.349956 [INFO] Executing instruction: Generate environment file
2024/01/30 16:41:41.349983 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 16:41:41.349986 [INFO] start build docker app
2024/01/30 16:41:41.350482 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 16:41:41.350486 [INFO] fetching image and ports
2024/01/30 16:41:41.352153 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 16:41:41.352291 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 16:41:41.352302 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 16:41:41.352317 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 16:41:42.428731 [INFO] Login Succeeded

2024/01/30 16:41:42.428752 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 16:41:42.428758 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 16:41:42.428773 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 16:41:42.562748 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 16:41:42.562773 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 16:41:42.562786 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 16:41:42.562789 [INFO] start to build docker image
2024/01/30 16:41:42.562807 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 16:41:42.869621 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 16:41:42.869648 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 16:41:42.869653 [INFO] successfully build docker image
2024/01/30 16:41:42.869655 [INFO] save staging docker image id
2024/01/30 16:41:42.869666 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 16:41:42.914857 [INFO] c176d18fbf65

2024/01/30 16:41:42.915062 [INFO] Executing instruction: configure X-Ray
2024/01/30 16:41:42.915070 [INFO] X-Ray is not enabled.
2024/01/30 16:41:42.915073 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 16:41:42.921219 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 16:41:42.923082 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 16:41:42.944461 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 16:41:42.944493 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 16:41:42.962654 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 16:41:42.977889 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 16:41:43.002860 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 16:41:43.107737 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 16:41:43.515714 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 16:41:43.515941 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 16:41:43.872362 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 16:41:43.884266 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 16:41:44.196487 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 16:41:44.210419 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 16:41:44.222136 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 16:41:44.505508 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 16:41:44.526405 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 16:41:44.917013 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 16:41:44.917052 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 16:41:44.931830 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 16:41:44.941806 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 16:41:45.045997 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 16:41:45.047054 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 16:41:45.047934 [INFO] Executing instruction: configure log streaming
2024/01/30 16:41:45.047946 [INFO] log streaming is not enabled
2024/01/30 16:41:45.047950 [INFO] disable log stream
2024/01/30 16:41:45.047965 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 16:41:45.069878 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 16:41:45.090359 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 16:41:45.090379 [INFO] Checking if logs need forced rotation
2024/01/30 16:41:45.090398 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 16:41:45.645314 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 16:41:46.234394 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 16:41:46.236812 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 16:41:46.630485 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 16:41:46.648018 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 16:41:46.648034 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 16:41:46.648045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 16:41:47.158403 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 16:41:47.158427 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 16:41:47.158452 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 16:41:47.158455 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 16:41:47.158475 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 16:41:47.158485 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 16:41:47.158487 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 16:41:47.158492 [INFO] Executing instruction: stop X-Ray
2024/01/30 16:41:47.158495 [INFO] stop X-Ray ...
2024/01/30 16:41:47.158504 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 16:41:47.180150 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 16:41:47.180181 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 16:41:47.197408 [INFO] Executing instruction: Run Docker Container
2024/01/30 16:41:47.197441 [INFO] stop currently running containers...
2024/01/30 16:41:47.197452 [INFO] detected old app is not docker compose app
2024/01/30 16:41:47.197465 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 16:41:47.272963 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 16:41:47.289710 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 16:41:47.289745 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 16:41:47.305777 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 16:41:47.305804 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 16:41:47.320212 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 16:41:47.320255 [INFO] stopping current container: 28ee3317e47e
2024/01/30 16:41:47.320267 [INFO] Running command /bin/sh -c docker ps | grep -q 28ee3317e47e
2024/01/30 16:41:47.340604 [INFO] Running command /bin/sh -c docker ps | grep -q 28ee3317e47e
2024/01/30 16:41:47.368974 [INFO] Pruning containers ...
2024/01/30 16:41:47.368999 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 16:41:47.396171 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 16:41:47.396200 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 16:41:47.425715 [INFO] Total reclaimed space: 0B

2024/01/30 16:41:47.425743 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 16:41:47.457612 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 16:41:47.457642 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 16:41:47.491608 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 16:41:47.491638 [INFO] Removing /var/app/current/ if it exists
2024/01/30 16:41:47.492181 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 16:41:47.492203 [INFO] detected new app is not docker compose app
2024/01/30 16:41:47.492264 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 16:41:47.964009 [INFO] 6467cb1897fe5da547b60b6998fbc3d8e5d9fc35b9f394f03407706ef838571e

2024/01/30 16:41:52.968271 [INFO] Running command /bin/sh -c docker ps | grep -q 6467cb1897fe
2024/01/30 16:41:52.991163 [ERROR] docker container quit unexpectedly on 2024-01-30 16:41:52.991151644 +0000 UTC: Command /bin/sh -c docker ps | grep -q 6467cb1897fe failed with error exit status 1
2024/01/30 16:41:52.991203 [INFO] Running command /bin/sh -c docker logs 6467cb1897fe
2024/01/30 16:41:53.018632 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 6467cb1897fe: Command /bin/sh -c docker ps | grep -q 6467cb1897fe failed with error exit status 1 

2024/01/30 16:41:53.018648 [INFO] Executing cleanup logic
2024/01/30 16:41:53.018926 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 17:41:53.986216 [INFO] Starting...
2024/01/30 17:41:53.986257 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 17:41:53.986282 [INFO] reading event message file
2024/01/30 17:41:53.987092 [INFO] Engine received EB command userdata-exec

2024/01/30 17:41:53.995775 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 17:41:54.415602 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 17:41:54.943286 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 17:41:54.943386 [INFO] Engine command: (self-startup)

2024/01/30 17:41:54.943394 [INFO] Downloading EB Application...
2024/01/30 17:41:54.943397 [INFO] Region: eu-west-1
2024/01/30 17:41:54.943401 [INFO] envID: e-8gmkc7rmw6
2024/01/30 17:41:54.943404 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 17:41:54.943408 [INFO] Using manifest file name from command request
2024/01/30 17:41:54.943431 [INFO] Unable to get version manifest file.
2024/01/30 17:41:54.943434 [INFO] Downloading latest manifest available.
2024/01/30 17:41:54.943436 [INFO] Download latest app version manifest
2024/01/30 17:41:54.943553 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 17:41:54.985258 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 17:41:54.985606 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 17:41:54.996334 [INFO] Download successful124bytes downloaded
2024/01/30 17:41:54.996480 [INFO] Trying to read and parse version manifest...
2024/01/30 17:41:54.996547 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 17:41:55.023110 [INFO] Download successful264bytes downloaded
2024/01/30 17:41:55.023543 [INFO] Executing instruction: SyncClock
2024/01/30 17:41:55.023549 [INFO] Starting SyncClock
2024/01/30 17:41:55.023565 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 17:41:55.030212 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 17:41:50 2024
System time     : 0.000004271 seconds slow of NTP time
Last offset     : -0.000001977 seconds
RMS offset      : 0.000005795 seconds
Frequency       : 0.776 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.139 ppm
Root delay      : 0.000443195 seconds
Root dispersion : 0.000422337 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 17:41:55.030232 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 17:41:55.044702 [INFO] 200 OK

2024/01/30 17:41:55.047490 [INFO] Skipping Configure OS
2024/01/30 17:41:55.047500 [INFO] Skipping LockRepo
2024/01/30 17:41:55.047506 [INFO] Skipping GenerateEBBanner
2024/01/30 17:41:55.047511 [INFO] Skipping Install Process Manager
2024/01/30 17:41:55.047516 [INFO] Skipping install syslog
2024/01/30 17:41:55.047521 [INFO] Skipping install cron
2024/01/30 17:41:55.047532 [INFO] Skipping install proxy
2024/01/30 17:41:55.047537 [INFO] Skipping installhealthd
2024/01/30 17:41:55.047542 [INFO] Skipping Install Log Streaming Manager
2024/01/30 17:41:55.047547 [INFO] Skipping install X-Ray
2024/01/30 17:41:55.047564 [INFO] Skipping install Third Party License
2024/01/30 17:41:55.047571 [INFO] Skipping installSqsd
2024/01/30 17:41:55.047590 [INFO] Skipping bootstraphealthd
2024/01/30 17:41:55.047596 [INFO] Skipping Install yum packages
2024/01/30 17:41:55.047601 [INFO] Skipping install docker-compose
2024/01/30 17:41:55.047606 [INFO] Skipping Configure Docker Daemon
2024/01/30 17:41:55.047613 [INFO] Skipping MarkBaked
2024/01/30 17:41:55.047618 [INFO] Skipping TuneSystemSettings
2024/01/30 17:41:55.047622 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 17:41:55.047625 [INFO] Initialize LogRotate files and directories
2024/01/30 17:41:55.063245 [INFO] Skipping BootstrapCFNHup
2024/01/30 17:41:55.063260 [INFO] Executing instruction: StartCFNHup
2024/01/30 17:41:55.063263 [INFO] Start cfn-hup
2024/01/30 17:41:55.063280 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 17:41:55.081254 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 17:41:55.103554 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 17:41:55.103603 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 17:41:55.103607 [INFO] Executing instruction: Start Docker
2024/01/30 17:41:55.103610 [INFO] Starting Docker...
2024/01/30 17:41:55.103836 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 17:41:55.106122 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 17:41:55.107092 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 17:41:55.440721 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 17:41:55.467141 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 17:41:55.467198 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 17:41:55.482284 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 17:41:55.494939 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 17:41:55.507645 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 17:41:55.566592 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 17:41:55.566641 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 17:41:55.857641 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 17:41:56.259840 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 17:41:56.275598 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 17:41:56.618517 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 17:41:56.633761 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 17:41:56.660091 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 17:41:56.672791 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 17:41:57.949323 [INFO] Skipping Setup Docker Options
2024/01/30 17:41:57.949343 [INFO] Skipping MarkBootstrapped
2024/01/30 17:41:57.949347 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 17:41:57.949453 [INFO] Starting SwitchCFNStack
2024/01/30 17:41:57.949460 [INFO] Executing instruction: stopSqsd
2024/01/30 17:41:57.949463 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 17:41:57.949467 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 17:41:57.949544 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 17:41:57.949561 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 17:41:58.531969 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 17:41:58.532437 [INFO] Executing instruction: StagedockerApplication
2024/01/30 17:41:58.532536 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 17:41:58.570366 [INFO] Pruning containers ...
2024/01/30 17:41:58.570397 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 17:41:58.609416 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
6467cb1897fe   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             tender_mclaren

2024/01/30 17:41:58.609447 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 17:41:58.656084 [INFO] Deleted Containers:
6467cb1897fe5da547b60b6998fbc3d8e5d9fc35b9f394f03407706ef838571e

Total reclaimed space: 0B

2024/01/30 17:41:58.656162 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 17:41:58.678738 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 17:41:58.678965 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 17:41:58.686760 [INFO] application/json

2024/01/30 17:41:58.686790 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 17:41:58.767813 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 17:41:58.768165 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 17:41:58.769444 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 17:41:58.769466 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 17:41:58.769483 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 17:41:58.769487 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 17:41:58.769491 [INFO] Executing instruction: Generate environment file
2024/01/30 17:41:58.769516 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 17:41:58.769519 [INFO] start build docker app
2024/01/30 17:41:58.769898 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 17:41:58.769902 [INFO] fetching image and ports
2024/01/30 17:41:58.771739 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 17:41:58.771797 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 17:41:58.771809 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 17:41:58.771818 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 17:41:59.704223 [INFO] Login Succeeded

2024/01/30 17:41:59.704241 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 17:41:59.704247 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 17:41:59.704263 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 17:41:59.841411 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 17:41:59.841437 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 17:41:59.841441 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 17:41:59.841444 [INFO] start to build docker image
2024/01/30 17:41:59.841463 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 17:42:00.233794 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 17:42:00.233818 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 17:42:00.233823 [INFO] successfully build docker image
2024/01/30 17:42:00.233826 [INFO] save staging docker image id
2024/01/30 17:42:00.233840 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 17:42:00.259120 [INFO] c176d18fbf65

2024/01/30 17:42:00.259489 [INFO] Executing instruction: configure X-Ray
2024/01/30 17:42:00.259497 [INFO] X-Ray is not enabled.
2024/01/30 17:42:00.259500 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 17:42:00.265220 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 17:42:00.266939 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 17:42:00.281138 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 17:42:00.281167 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 17:42:00.293953 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 17:42:00.306254 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 17:42:00.321109 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 17:42:00.423359 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 17:42:00.776524 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 17:42:00.776773 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 17:42:01.098432 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 17:42:01.122161 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 17:42:01.764244 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 17:42:01.802658 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 17:42:01.839830 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 17:42:02.576376 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 17:42:02.589224 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 17:42:02.991073 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 17:42:02.991108 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 17:42:03.006725 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 17:42:03.018578 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 17:42:03.117190 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 17:42:03.118256 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 17:42:03.119234 [INFO] Executing instruction: configure log streaming
2024/01/30 17:42:03.119242 [INFO] log streaming is not enabled
2024/01/30 17:42:03.119244 [INFO] disable log stream
2024/01/30 17:42:03.119257 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 17:42:03.144901 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 17:42:03.171292 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 17:42:03.171319 [INFO] Checking if logs need forced rotation
2024/01/30 17:42:03.171396 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 17:42:03.807191 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 17:42:04.365020 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 17:42:04.367091 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 17:42:04.900242 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 17:42:04.920610 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 17:42:04.920631 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 17:42:04.920643 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 17:42:05.481173 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 17:42:05.481197 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 17:42:05.481223 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 17:42:05.481226 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 17:42:05.481247 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 17:42:05.481258 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 17:42:05.481260 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 17:42:05.481266 [INFO] Executing instruction: stop X-Ray
2024/01/30 17:42:05.481268 [INFO] stop X-Ray ...
2024/01/30 17:42:05.481278 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 17:42:05.504668 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 17:42:05.504703 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 17:42:05.526692 [INFO] Executing instruction: Run Docker Container
2024/01/30 17:42:05.526726 [INFO] stop currently running containers...
2024/01/30 17:42:05.526744 [INFO] detected old app is not docker compose app
2024/01/30 17:42:05.526758 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 17:42:05.562346 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 17:42:05.576935 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 17:42:05.577010 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 17:42:05.592852 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 17:42:05.592882 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 17:42:05.607930 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 17:42:05.607977 [INFO] stopping current container: 6467cb1897fe
2024/01/30 17:42:05.608001 [INFO] Running command /bin/sh -c docker ps | grep -q 6467cb1897fe
2024/01/30 17:42:05.630289 [INFO] Running command /bin/sh -c docker ps | grep -q 6467cb1897fe
2024/01/30 17:42:05.656862 [INFO] Pruning containers ...
2024/01/30 17:42:05.656886 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 17:42:05.676390 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 17:42:05.676419 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 17:42:05.697117 [INFO] Total reclaimed space: 0B

2024/01/30 17:42:05.697144 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 17:42:05.719007 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 17:42:05.719037 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 17:42:05.753152 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 17:42:05.753177 [INFO] Removing /var/app/current/ if it exists
2024/01/30 17:42:05.753324 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 17:42:05.753342 [INFO] detected new app is not docker compose app
2024/01/30 17:42:05.753391 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 17:42:06.172978 [INFO] 7a06874c78c42e023a816723000800c3125bac3b87670faf439a5fdffe402a39

2024/01/30 17:42:11.177263 [INFO] Running command /bin/sh -c docker ps | grep -q 7a06874c78c4
2024/01/30 17:42:11.204785 [ERROR] docker container quit unexpectedly on 2024-01-30 17:42:11.20473766 +0000 UTC: Command /bin/sh -c docker ps | grep -q 7a06874c78c4 failed with error exit status 1
2024/01/30 17:42:11.204874 [INFO] Running command /bin/sh -c docker logs 7a06874c78c4
2024/01/30 17:42:11.232637 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 7a06874c78c4: Command /bin/sh -c docker ps | grep -q 7a06874c78c4 failed with error exit status 1 

2024/01/30 17:42:11.232646 [INFO] Executing cleanup logic
2024/01/30 17:42:11.232943 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 18:42:12.178559 [INFO] Starting...
2024/01/30 18:42:12.178606 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 18:42:12.178637 [INFO] reading event message file
2024/01/30 18:42:12.179362 [INFO] Engine received EB command userdata-exec

2024/01/30 18:42:12.189246 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 18:42:12.786815 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 18:42:13.295063 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 18:42:13.295165 [INFO] Engine command: (self-startup)

2024/01/30 18:42:13.295295 [INFO] Downloading EB Application...
2024/01/30 18:42:13.295301 [INFO] Region: eu-west-1
2024/01/30 18:42:13.295305 [INFO] envID: e-8gmkc7rmw6
2024/01/30 18:42:13.295308 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 18:42:13.295310 [INFO] Using manifest file name from command request
2024/01/30 18:42:13.295325 [INFO] Unable to get version manifest file.
2024/01/30 18:42:13.295327 [INFO] Downloading latest manifest available.
2024/01/30 18:42:13.295330 [INFO] Download latest app version manifest
2024/01/30 18:42:13.295452 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 18:42:13.349317 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 18:42:13.349560 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 18:42:13.402472 [INFO] Download successful124bytes downloaded
2024/01/30 18:42:13.402621 [INFO] Trying to read and parse version manifest...
2024/01/30 18:42:13.402696 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 18:42:13.422406 [INFO] Download successful264bytes downloaded
2024/01/30 18:42:13.422750 [INFO] Executing instruction: SyncClock
2024/01/30 18:42:13.422757 [INFO] Starting SyncClock
2024/01/30 18:42:13.422769 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 18:42:13.428484 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 18:41:57 2024
System time     : 0.000003838 seconds fast of NTP time
Last offset     : +0.000002909 seconds
RMS offset      : 0.000005295 seconds
Frequency       : 0.820 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.084 ppm
Root delay      : 0.000421789 seconds
Root dispersion : 0.000343635 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 18:42:13.428502 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 18:42:13.432851 [INFO] 200 OK

2024/01/30 18:42:13.432937 [INFO] Skipping Configure OS
2024/01/30 18:42:13.432942 [INFO] Skipping LockRepo
2024/01/30 18:42:13.432946 [INFO] Skipping GenerateEBBanner
2024/01/30 18:42:13.432950 [INFO] Skipping Install Process Manager
2024/01/30 18:42:13.432954 [INFO] Skipping install syslog
2024/01/30 18:42:13.432957 [INFO] Skipping install cron
2024/01/30 18:42:13.432961 [INFO] Skipping install proxy
2024/01/30 18:42:13.432965 [INFO] Skipping installhealthd
2024/01/30 18:42:13.432969 [INFO] Skipping Install Log Streaming Manager
2024/01/30 18:42:13.432972 [INFO] Skipping install X-Ray
2024/01/30 18:42:13.432980 [INFO] Skipping install Third Party License
2024/01/30 18:42:13.433003 [INFO] Skipping installSqsd
2024/01/30 18:42:13.433007 [INFO] Skipping bootstraphealthd
2024/01/30 18:42:13.433011 [INFO] Skipping Install yum packages
2024/01/30 18:42:13.433015 [INFO] Skipping install docker-compose
2024/01/30 18:42:13.433021 [INFO] Skipping Configure Docker Daemon
2024/01/30 18:42:13.433105 [INFO] Skipping MarkBaked
2024/01/30 18:42:13.433111 [INFO] Skipping TuneSystemSettings
2024/01/30 18:42:13.433114 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 18:42:13.433116 [INFO] Initialize LogRotate files and directories
2024/01/30 18:42:13.450370 [INFO] Skipping BootstrapCFNHup
2024/01/30 18:42:13.450380 [INFO] Executing instruction: StartCFNHup
2024/01/30 18:42:13.450383 [INFO] Start cfn-hup
2024/01/30 18:42:13.450399 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 18:42:13.472629 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 18:42:13.505268 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 18:42:13.505304 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 18:42:13.505308 [INFO] Executing instruction: Start Docker
2024/01/30 18:42:13.505311 [INFO] Starting Docker...
2024/01/30 18:42:13.506334 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 18:42:13.508296 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 18:42:13.509301 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 18:42:13.934154 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 18:42:13.960325 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 18:42:13.960362 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 18:42:13.987634 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 18:42:14.021974 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 18:42:14.034701 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 18:42:14.145176 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 18:42:14.145221 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 18:42:14.580779 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 18:42:14.890455 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 18:42:14.903697 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 18:42:15.255406 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 18:42:15.265342 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 18:42:15.277894 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 18:42:15.286817 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 18:42:16.510849 [INFO] Skipping Setup Docker Options
2024/01/30 18:42:16.510876 [INFO] Skipping MarkBootstrapped
2024/01/30 18:42:16.510881 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 18:42:16.511008 [INFO] Starting SwitchCFNStack
2024/01/30 18:42:16.511014 [INFO] Executing instruction: stopSqsd
2024/01/30 18:42:16.511017 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 18:42:16.511021 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 18:42:16.511024 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 18:42:16.511045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 18:42:17.001561 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 18:42:17.001643 [INFO] Executing instruction: StagedockerApplication
2024/01/30 18:42:17.001657 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 18:42:17.024316 [INFO] Pruning containers ...
2024/01/30 18:42:17.024349 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 18:42:17.046077 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
7a06874c78c4   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             focused_satoshi

2024/01/30 18:42:17.046299 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 18:42:17.071691 [INFO] Deleted Containers:
7a06874c78c42e023a816723000800c3125bac3b87670faf439a5fdffe402a39

Total reclaimed space: 0B

2024/01/30 18:42:17.071716 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 18:42:17.092194 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 18:42:17.092542 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 18:42:17.095991 [INFO] application/json

2024/01/30 18:42:17.096012 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 18:42:17.198611 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 18:42:17.200037 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 18:42:17.202183 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 18:42:17.202216 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 18:42:17.202235 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 18:42:17.202243 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 18:42:17.202248 [INFO] Executing instruction: Generate environment file
2024/01/30 18:42:17.202309 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 18:42:17.202314 [INFO] start build docker app
2024/01/30 18:42:17.203249 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 18:42:17.203256 [INFO] fetching image and ports
2024/01/30 18:42:17.205142 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 18:42:17.205195 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 18:42:17.205208 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 18:42:17.205219 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 18:42:18.281096 [INFO] Login Succeeded

2024/01/30 18:42:18.281115 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 18:42:18.281121 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 18:42:18.281138 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 18:42:18.442724 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 18:42:18.442746 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 18:42:18.442749 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 18:42:18.442752 [INFO] start to build docker image
2024/01/30 18:42:18.442767 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 18:42:18.714743 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 18:42:18.714769 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 18:42:18.714773 [INFO] successfully build docker image
2024/01/30 18:42:18.714775 [INFO] save staging docker image id
2024/01/30 18:42:18.714786 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 18:42:18.738388 [INFO] c176d18fbf65

2024/01/30 18:42:18.738581 [INFO] Executing instruction: configure X-Ray
2024/01/30 18:42:18.738586 [INFO] X-Ray is not enabled.
2024/01/30 18:42:18.738589 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 18:42:18.743908 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 18:42:18.745583 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 18:42:18.761263 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 18:42:18.761296 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 18:42:18.772764 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 18:42:18.781914 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 18:42:18.795219 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 18:42:18.870423 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 18:42:19.192884 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 18:42:19.193105 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 18:42:19.628006 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 18:42:19.693496 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 18:42:19.992474 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 18:42:20.015219 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 18:42:20.024923 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 18:42:20.379874 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 18:42:20.390413 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 18:42:20.689841 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 18:42:20.689875 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 18:42:20.701534 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 18:42:20.710667 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 18:42:20.823259 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 18:42:20.824152 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 18:42:20.825209 [INFO] Executing instruction: configure log streaming
2024/01/30 18:42:20.825219 [INFO] log streaming is not enabled
2024/01/30 18:42:20.825223 [INFO] disable log stream
2024/01/30 18:42:20.825244 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 18:42:20.843738 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 18:42:20.875046 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 18:42:20.875071 [INFO] Checking if logs need forced rotation
2024/01/30 18:42:20.875090 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 18:42:21.488994 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 18:42:22.099980 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 18:42:22.101579 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 18:42:22.650114 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 18:42:22.671013 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 18:42:22.671029 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 18:42:22.671048 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 18:42:23.115643 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 18:42:23.115666 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 18:42:23.115689 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 18:42:23.115691 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 18:42:23.115713 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 18:42:23.115723 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 18:42:23.115726 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 18:42:23.115731 [INFO] Executing instruction: stop X-Ray
2024/01/30 18:42:23.115733 [INFO] stop X-Ray ...
2024/01/30 18:42:23.115744 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 18:42:23.133684 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 18:42:23.133726 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 18:42:23.151283 [INFO] Executing instruction: Run Docker Container
2024/01/30 18:42:23.151314 [INFO] stop currently running containers...
2024/01/30 18:42:23.151323 [INFO] detected old app is not docker compose app
2024/01/30 18:42:23.151334 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 18:42:23.212453 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 18:42:23.242884 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 18:42:23.242928 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 18:42:23.257770 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 18:42:23.257804 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 18:42:23.275793 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 18:42:23.275850 [INFO] stopping current container: 7a06874c78c4
2024/01/30 18:42:23.275862 [INFO] Running command /bin/sh -c docker ps | grep -q 7a06874c78c4
2024/01/30 18:42:23.316009 [INFO] Running command /bin/sh -c docker ps | grep -q 7a06874c78c4
2024/01/30 18:42:23.347120 [INFO] Pruning containers ...
2024/01/30 18:42:23.347161 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 18:42:23.372266 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 18:42:23.372294 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 18:42:23.394465 [INFO] Total reclaimed space: 0B

2024/01/30 18:42:23.394489 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 18:42:23.441266 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 18:42:23.441395 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 18:42:23.465487 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 18:42:23.465508 [INFO] Removing /var/app/current/ if it exists
2024/01/30 18:42:23.465609 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 18:42:23.465626 [INFO] detected new app is not docker compose app
2024/01/30 18:42:23.465672 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 18:42:23.956424 [INFO] 768c0a61e4d2da9c839b23ed7ac6ccfd242385183baef418b86e68a70661d952

2024/01/30 18:42:28.960820 [INFO] Running command /bin/sh -c docker ps | grep -q 768c0a61e4d2
2024/01/30 18:42:28.982460 [ERROR] docker container quit unexpectedly on 2024-01-30 18:42:28.98244991 +0000 UTC: Command /bin/sh -c docker ps | grep -q 768c0a61e4d2 failed with error exit status 1
2024/01/30 18:42:28.982488 [INFO] Running command /bin/sh -c docker logs 768c0a61e4d2
2024/01/30 18:42:29.027843 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 768c0a61e4d2: Command /bin/sh -c docker ps | grep -q 768c0a61e4d2 failed with error exit status 1 

2024/01/30 18:42:29.027857 [INFO] Executing cleanup logic
2024/01/30 18:42:29.032521 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 19:42:30.012005 [INFO] Starting...
2024/01/30 19:42:30.012050 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 19:42:30.012074 [INFO] reading event message file
2024/01/30 19:42:30.012852 [INFO] Engine received EB command userdata-exec

2024/01/30 19:42:30.020786 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 19:42:30.420715 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 19:42:30.838110 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 19:42:30.838205 [INFO] Engine command: (self-startup)

2024/01/30 19:42:30.838212 [INFO] Downloading EB Application...
2024/01/30 19:42:30.838216 [INFO] Region: eu-west-1
2024/01/30 19:42:30.838219 [INFO] envID: e-8gmkc7rmw6
2024/01/30 19:42:30.838222 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 19:42:30.838225 [INFO] Using manifest file name from command request
2024/01/30 19:42:30.838242 [INFO] Unable to get version manifest file.
2024/01/30 19:42:30.838245 [INFO] Downloading latest manifest available.
2024/01/30 19:42:30.838248 [INFO] Download latest app version manifest
2024/01/30 19:42:30.838381 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 19:42:30.881664 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 19:42:30.881962 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 19:42:30.898282 [INFO] Download successful124bytes downloaded
2024/01/30 19:42:30.898420 [INFO] Trying to read and parse version manifest...
2024/01/30 19:42:30.898495 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 19:42:30.924389 [INFO] Download successful264bytes downloaded
2024/01/30 19:42:30.924746 [INFO] Executing instruction: SyncClock
2024/01/30 19:42:30.924752 [INFO] Starting SyncClock
2024/01/30 19:42:30.924762 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 19:42:30.930220 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 19:42:20 2024
System time     : 0.000000519 seconds fast of NTP time
Last offset     : +0.000000532 seconds
RMS offset      : 0.000008620 seconds
Frequency       : 0.555 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.109 ppm
Root delay      : 0.000410330 seconds
Root dispersion : 0.000315023 seconds
Update interval : 32.6 seconds
Leap status     : Normal

2024/01/30 19:42:30.930241 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 19:42:30.934458 [INFO] 200 OK

2024/01/30 19:42:30.934581 [INFO] Skipping Configure OS
2024/01/30 19:42:30.934590 [INFO] Skipping LockRepo
2024/01/30 19:42:30.934595 [INFO] Skipping GenerateEBBanner
2024/01/30 19:42:30.934601 [INFO] Skipping Install Process Manager
2024/01/30 19:42:30.934606 [INFO] Skipping install syslog
2024/01/30 19:42:30.934611 [INFO] Skipping install cron
2024/01/30 19:42:30.934616 [INFO] Skipping install proxy
2024/01/30 19:42:30.934622 [INFO] Skipping installhealthd
2024/01/30 19:42:30.934627 [INFO] Skipping Install Log Streaming Manager
2024/01/30 19:42:30.934640 [INFO] Skipping install X-Ray
2024/01/30 19:42:30.934644 [INFO] Skipping install Third Party License
2024/01/30 19:42:30.934649 [INFO] Skipping installSqsd
2024/01/30 19:42:30.934653 [INFO] Skipping bootstraphealthd
2024/01/30 19:42:30.934657 [INFO] Skipping Install yum packages
2024/01/30 19:42:30.934661 [INFO] Skipping install docker-compose
2024/01/30 19:42:30.934664 [INFO] Skipping Configure Docker Daemon
2024/01/30 19:42:30.934668 [INFO] Skipping MarkBaked
2024/01/30 19:42:30.934671 [INFO] Skipping TuneSystemSettings
2024/01/30 19:42:30.934676 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 19:42:30.934679 [INFO] Initialize LogRotate files and directories
2024/01/30 19:42:30.949468 [INFO] Skipping BootstrapCFNHup
2024/01/30 19:42:30.949476 [INFO] Executing instruction: StartCFNHup
2024/01/30 19:42:30.949479 [INFO] Start cfn-hup
2024/01/30 19:42:30.949495 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 19:42:30.964539 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 19:42:30.973554 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 19:42:30.973588 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 19:42:30.973592 [INFO] Executing instruction: Start Docker
2024/01/30 19:42:30.973595 [INFO] Starting Docker...
2024/01/30 19:42:30.973676 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 19:42:30.974747 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 19:42:30.975730 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 19:42:31.431157 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 19:42:31.447167 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 19:42:31.447200 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 19:42:31.458852 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 19:42:31.468990 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 19:42:31.480775 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 19:42:31.555218 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 19:42:31.555282 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 19:42:31.856187 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 19:42:32.236417 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 19:42:32.248478 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 19:42:32.585935 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 19:42:32.601580 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 19:42:32.614352 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 19:42:32.639697 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 19:42:34.060478 [INFO] Skipping Setup Docker Options
2024/01/30 19:42:34.060507 [INFO] Skipping MarkBootstrapped
2024/01/30 19:42:34.060511 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 19:42:34.060626 [INFO] Starting SwitchCFNStack
2024/01/30 19:42:34.060632 [INFO] Executing instruction: stopSqsd
2024/01/30 19:42:34.060636 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 19:42:34.060639 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 19:42:34.060643 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 19:42:34.060665 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 19:42:34.482151 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 19:42:34.482230 [INFO] Executing instruction: StagedockerApplication
2024/01/30 19:42:34.482242 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 19:42:34.509876 [INFO] Pruning containers ...
2024/01/30 19:42:34.509905 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 19:42:34.531030 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
768c0a61e4d2   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             lucid_heisenberg

2024/01/30 19:42:34.531060 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 19:42:34.565713 [INFO] Deleted Containers:
768c0a61e4d2da9c839b23ed7ac6ccfd242385183baef418b86e68a70661d952

Total reclaimed space: 0B

2024/01/30 19:42:34.565757 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 19:42:34.589032 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 19:42:34.589372 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 19:42:34.592379 [INFO] application/json

2024/01/30 19:42:34.592402 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 19:42:34.660571 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 19:42:34.660808 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 19:42:34.662683 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 19:42:34.662715 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 19:42:34.662732 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 19:42:34.662734 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 19:42:34.662739 [INFO] Executing instruction: Generate environment file
2024/01/30 19:42:34.662765 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 19:42:34.662768 [INFO] start build docker app
2024/01/30 19:42:34.663183 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 19:42:34.663187 [INFO] fetching image and ports
2024/01/30 19:42:34.664745 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 19:42:34.664806 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 19:42:34.664814 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 19:42:34.664823 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 19:42:35.553869 [INFO] Login Succeeded

2024/01/30 19:42:35.553885 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 19:42:35.553892 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 19:42:35.553908 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 19:42:35.703689 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 19:42:35.703721 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 19:42:35.703725 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 19:42:35.703728 [INFO] start to build docker image
2024/01/30 19:42:35.703744 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 19:42:35.963193 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 19:42:35.963216 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 19:42:35.963225 [INFO] successfully build docker image
2024/01/30 19:42:35.963228 [INFO] save staging docker image id
2024/01/30 19:42:35.963253 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 19:42:35.984289 [INFO] c176d18fbf65

2024/01/30 19:42:35.984399 [INFO] Executing instruction: configure X-Ray
2024/01/30 19:42:35.984405 [INFO] X-Ray is not enabled.
2024/01/30 19:42:35.984408 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 19:42:35.989909 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 19:42:35.991516 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 19:42:36.006486 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 19:42:36.006518 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 19:42:36.017787 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 19:42:36.026499 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 19:42:36.037255 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 19:42:36.111050 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 19:42:36.443692 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 19:42:36.443893 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 19:42:36.786873 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 19:42:36.803832 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 19:42:37.156190 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 19:42:37.166761 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 19:42:37.177017 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 19:42:37.492174 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 19:42:37.502122 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 19:42:37.762374 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 19:42:37.762424 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 19:42:37.773511 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 19:42:37.781658 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 19:42:37.860916 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 19:42:37.861911 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 19:42:37.862851 [INFO] Executing instruction: configure log streaming
2024/01/30 19:42:37.862862 [INFO] log streaming is not enabled
2024/01/30 19:42:37.862865 [INFO] disable log stream
2024/01/30 19:42:37.862878 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 19:42:37.897036 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 19:42:37.914434 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 19:42:37.914458 [INFO] Checking if logs need forced rotation
2024/01/30 19:42:37.914482 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 19:42:38.393701 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 19:42:38.926899 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 19:42:38.928941 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 19:42:39.402478 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 19:42:39.420135 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 19:42:39.420150 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 19:42:39.420168 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 19:42:39.828441 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 19:42:39.828466 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 19:42:39.828564 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 19:42:39.828568 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 19:42:39.828592 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 19:42:39.828613 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 19:42:39.828616 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 19:42:39.828622 [INFO] Executing instruction: stop X-Ray
2024/01/30 19:42:39.828626 [INFO] stop X-Ray ...
2024/01/30 19:42:39.828639 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 19:42:39.844426 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 19:42:39.844457 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 19:42:39.862516 [INFO] Executing instruction: Run Docker Container
2024/01/30 19:42:39.862548 [INFO] stop currently running containers...
2024/01/30 19:42:39.862564 [INFO] detected old app is not docker compose app
2024/01/30 19:42:39.862578 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 19:42:39.903209 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 19:42:39.917755 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 19:42:39.917784 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 19:42:39.930747 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 19:42:39.930844 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 19:42:39.944060 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 19:42:39.944106 [INFO] stopping current container: 768c0a61e4d2
2024/01/30 19:42:39.944116 [INFO] Running command /bin/sh -c docker ps | grep -q 768c0a61e4d2
2024/01/30 19:42:39.968298 [INFO] Running command /bin/sh -c docker ps | grep -q 768c0a61e4d2
2024/01/30 19:42:39.991316 [INFO] Pruning containers ...
2024/01/30 19:42:39.991339 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 19:42:40.013027 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 19:42:40.013056 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 19:42:40.053902 [INFO] Total reclaimed space: 0B

2024/01/30 19:42:40.053933 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 19:42:40.086885 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 19:42:40.086916 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 19:42:40.122018 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 19:42:40.122064 [INFO] Removing /var/app/current/ if it exists
2024/01/30 19:42:40.122277 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 19:42:40.122301 [INFO] detected new app is not docker compose app
2024/01/30 19:42:40.122405 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 19:42:40.542134 [INFO] 47fa331660115bc257589ed26464c185796fc044081136ab87b83a5e989f6e59

2024/01/30 19:42:45.542469 [INFO] Running command /bin/sh -c docker ps | grep -q 47fa33166011
2024/01/30 19:42:45.564044 [ERROR] docker container quit unexpectedly on 2024-01-30 19:42:45.564017343 +0000 UTC: Command /bin/sh -c docker ps | grep -q 47fa33166011 failed with error exit status 1
2024/01/30 19:42:45.564076 [INFO] Running command /bin/sh -c docker logs 47fa33166011
2024/01/30 19:42:45.586699 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 47fa33166011: Command /bin/sh -c docker ps | grep -q 47fa33166011 failed with error exit status 1 

2024/01/30 19:42:45.586709 [INFO] Executing cleanup logic
2024/01/30 19:42:45.586904 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 20:42:46.619288 [INFO] Starting...
2024/01/30 20:42:46.619333 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 20:42:46.619360 [INFO] reading event message file
2024/01/30 20:42:46.620059 [INFO] Engine received EB command userdata-exec

2024/01/30 20:42:46.625876 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 20:42:46.990739 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 20:42:47.437912 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 20:42:47.438387 [INFO] Engine command: (self-startup)

2024/01/30 20:42:47.438399 [INFO] Downloading EB Application...
2024/01/30 20:42:47.438404 [INFO] Region: eu-west-1
2024/01/30 20:42:47.438407 [INFO] envID: e-8gmkc7rmw6
2024/01/30 20:42:47.438411 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 20:42:47.438414 [INFO] Using manifest file name from command request
2024/01/30 20:42:47.438432 [INFO] Unable to get version manifest file.
2024/01/30 20:42:47.438435 [INFO] Downloading latest manifest available.
2024/01/30 20:42:47.438438 [INFO] Download latest app version manifest
2024/01/30 20:42:47.439211 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 20:42:47.486053 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 20:42:47.486262 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 20:42:47.499843 [INFO] Download successful124bytes downloaded
2024/01/30 20:42:47.499989 [INFO] Trying to read and parse version manifest...
2024/01/30 20:42:47.500073 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 20:42:47.522670 [INFO] Download successful264bytes downloaded
2024/01/30 20:42:47.523862 [INFO] Executing instruction: SyncClock
2024/01/30 20:42:47.523872 [INFO] Starting SyncClock
2024/01/30 20:42:47.523944 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 20:42:47.530275 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 20:42:42 2024
System time     : 0.000002384 seconds fast of NTP time
Last offset     : +0.000001427 seconds
RMS offset      : 0.000003962 seconds
Frequency       : 0.527 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.135 ppm
Root delay      : 0.000439693 seconds
Root dispersion : 0.000335908 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 20:42:47.530306 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 20:42:47.534639 [INFO] 200 OK

2024/01/30 20:42:47.534730 [INFO] Skipping Configure OS
2024/01/30 20:42:47.534735 [INFO] Skipping LockRepo
2024/01/30 20:42:47.534739 [INFO] Skipping GenerateEBBanner
2024/01/30 20:42:47.534744 [INFO] Skipping Install Process Manager
2024/01/30 20:42:47.534747 [INFO] Skipping install syslog
2024/01/30 20:42:47.534751 [INFO] Skipping install cron
2024/01/30 20:42:47.534755 [INFO] Skipping install proxy
2024/01/30 20:42:47.534759 [INFO] Skipping installhealthd
2024/01/30 20:42:47.534762 [INFO] Skipping Install Log Streaming Manager
2024/01/30 20:42:47.534766 [INFO] Skipping install X-Ray
2024/01/30 20:42:47.534770 [INFO] Skipping install Third Party License
2024/01/30 20:42:47.534775 [INFO] Skipping installSqsd
2024/01/30 20:42:47.534779 [INFO] Skipping bootstraphealthd
2024/01/30 20:42:47.534782 [INFO] Skipping Install yum packages
2024/01/30 20:42:47.534786 [INFO] Skipping install docker-compose
2024/01/30 20:42:47.534790 [INFO] Skipping Configure Docker Daemon
2024/01/30 20:42:47.534793 [INFO] Skipping MarkBaked
2024/01/30 20:42:47.534800 [INFO] Skipping TuneSystemSettings
2024/01/30 20:42:47.534803 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 20:42:47.534805 [INFO] Initialize LogRotate files and directories
2024/01/30 20:42:47.553627 [INFO] Skipping BootstrapCFNHup
2024/01/30 20:42:47.553643 [INFO] Executing instruction: StartCFNHup
2024/01/30 20:42:47.553647 [INFO] Start cfn-hup
2024/01/30 20:42:47.553666 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 20:42:47.579590 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 20:42:47.590569 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 20:42:47.590605 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 20:42:47.590609 [INFO] Executing instruction: Start Docker
2024/01/30 20:42:47.590612 [INFO] Starting Docker...
2024/01/30 20:42:47.590692 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 20:42:47.591828 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 20:42:47.595728 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 20:42:47.912145 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 20:42:47.956178 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 20:42:47.956219 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 20:42:47.972640 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 20:42:47.984711 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 20:42:48.003862 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 20:42:48.124115 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 20:42:48.124144 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 20:42:48.522895 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 20:42:48.794787 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 20:42:48.805859 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 20:42:49.115434 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 20:42:49.124786 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 20:42:49.139159 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 20:42:49.149109 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 20:42:50.358426 [INFO] Skipping Setup Docker Options
2024/01/30 20:42:50.358454 [INFO] Skipping MarkBootstrapped
2024/01/30 20:42:50.358459 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 20:42:50.358577 [INFO] Starting SwitchCFNStack
2024/01/30 20:42:50.358583 [INFO] Executing instruction: stopSqsd
2024/01/30 20:42:50.358586 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 20:42:50.358590 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 20:42:50.358593 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 20:42:50.358615 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 20:42:50.854230 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 20:42:50.854253 [INFO] Executing instruction: StagedockerApplication
2024/01/30 20:42:50.854370 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 20:42:50.875693 [INFO] Pruning containers ...
2024/01/30 20:42:50.875797 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 20:42:50.917587 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
47fa33166011   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             gallant_torvalds

2024/01/30 20:42:50.917617 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 20:42:50.945272 [INFO] Deleted Containers:
47fa331660115bc257589ed26464c185796fc044081136ab87b83a5e989f6e59

Total reclaimed space: 0B

2024/01/30 20:42:50.945311 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 20:42:50.965037 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 20:42:50.965279 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 20:42:50.968297 [INFO] application/json

2024/01/30 20:42:50.968313 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 20:42:51.056561 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 20:42:51.056726 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 20:42:51.057958 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 20:42:51.057988 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 20:42:51.058012 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 20:42:51.058015 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 20:42:51.058018 [INFO] Executing instruction: Generate environment file
2024/01/30 20:42:51.058042 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 20:42:51.058045 [INFO] start build docker app
2024/01/30 20:42:51.058387 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 20:42:51.058390 [INFO] fetching image and ports
2024/01/30 20:42:51.059837 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 20:42:51.059887 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 20:42:51.059902 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 20:42:51.059917 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 20:42:52.057190 [INFO] Login Succeeded

2024/01/30 20:42:52.057215 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 20:42:52.057221 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 20:42:52.057242 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 20:42:52.194370 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 20:42:52.194393 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 20:42:52.194397 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 20:42:52.194400 [INFO] start to build docker image
2024/01/30 20:42:52.194419 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 20:42:52.478541 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 20:42:52.478563 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 20:42:52.478567 [INFO] successfully build docker image
2024/01/30 20:42:52.478569 [INFO] save staging docker image id
2024/01/30 20:42:52.478581 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 20:42:52.503079 [INFO] c176d18fbf65

2024/01/30 20:42:52.503210 [INFO] Executing instruction: configure X-Ray
2024/01/30 20:42:52.503216 [INFO] X-Ray is not enabled.
2024/01/30 20:42:52.503219 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 20:42:52.508838 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 20:42:52.510520 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 20:42:52.522621 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 20:42:52.522654 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 20:42:52.543066 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 20:42:52.570940 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 20:42:52.602724 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 20:42:52.681271 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 20:42:53.110361 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 20:42:53.110445 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 20:42:53.405162 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 20:42:53.417459 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 20:42:53.696826 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 20:42:53.706292 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 20:42:53.716137 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 20:42:54.050831 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 20:42:54.062590 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 20:42:54.422726 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 20:42:54.422761 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 20:42:54.457697 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 20:42:54.471003 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 20:42:54.552463 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 20:42:54.553334 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 20:42:54.554270 [INFO] Executing instruction: configure log streaming
2024/01/30 20:42:54.554279 [INFO] log streaming is not enabled
2024/01/30 20:42:54.554283 [INFO] disable log stream
2024/01/30 20:42:54.554302 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 20:42:54.577878 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 20:42:54.598869 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 20:42:54.598894 [INFO] Checking if logs need forced rotation
2024/01/30 20:42:54.598913 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 20:42:55.172495 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 20:42:55.662159 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 20:42:55.663843 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 20:42:56.137537 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 20:42:56.157531 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 20:42:56.157551 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 20:42:56.157563 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 20:42:56.748982 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 20:42:56.749057 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 20:42:56.749085 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 20:42:56.749089 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 20:42:56.749113 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 20:42:56.749131 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 20:42:56.749134 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 20:42:56.749140 [INFO] Executing instruction: stop X-Ray
2024/01/30 20:42:56.749144 [INFO] stop X-Ray ...
2024/01/30 20:42:56.749156 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 20:42:56.772025 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 20:42:56.772052 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 20:42:56.790425 [INFO] Executing instruction: Run Docker Container
2024/01/30 20:42:56.790456 [INFO] stop currently running containers...
2024/01/30 20:42:56.790468 [INFO] detected old app is not docker compose app
2024/01/30 20:42:56.790479 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 20:42:56.832400 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 20:42:56.852909 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 20:42:56.853017 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 20:42:56.867703 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 20:42:56.867732 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 20:42:56.889527 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 20:42:56.889582 [INFO] stopping current container: 47fa33166011
2024/01/30 20:42:56.889595 [INFO] Running command /bin/sh -c docker ps | grep -q 47fa33166011
2024/01/30 20:42:56.909636 [INFO] Running command /bin/sh -c docker ps | grep -q 47fa33166011
2024/01/30 20:42:56.942076 [INFO] Pruning containers ...
2024/01/30 20:42:56.942099 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 20:42:56.978967 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 20:42:56.978998 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 20:42:56.998218 [INFO] Total reclaimed space: 0B

2024/01/30 20:42:56.998240 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 20:42:57.027258 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 20:42:57.027306 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 20:42:57.060717 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 20:42:57.060738 [INFO] Removing /var/app/current/ if it exists
2024/01/30 20:42:57.060892 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 20:42:57.060909 [INFO] detected new app is not docker compose app
2024/01/30 20:42:57.060956 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 20:42:57.448464 [INFO] dc03d8f3427d9d7c5392e299195ee9b3de7d3f6b3a144386dd61f31acbc80472

2024/01/30 20:43:02.448841 [INFO] Running command /bin/sh -c docker ps | grep -q dc03d8f3427d
2024/01/30 20:43:02.471128 [ERROR] docker container quit unexpectedly on 2024-01-30 20:43:02.471112826 +0000 UTC: Command /bin/sh -c docker ps | grep -q dc03d8f3427d failed with error exit status 1
2024/01/30 20:43:02.471167 [INFO] Running command /bin/sh -c docker logs dc03d8f3427d
2024/01/30 20:43:02.491415 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container dc03d8f3427d: Command /bin/sh -c docker ps | grep -q dc03d8f3427d failed with error exit status 1 

2024/01/30 20:43:02.491464 [INFO] Executing cleanup logic
2024/01/30 20:43:02.491688 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 21:43:03.621574 [INFO] Starting...
2024/01/30 21:43:03.621616 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 21:43:03.621645 [INFO] reading event message file
2024/01/30 21:43:03.622344 [INFO] Engine received EB command userdata-exec

2024/01/30 21:43:03.628795 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 21:43:04.068365 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 21:43:04.580174 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 21:43:04.580250 [INFO] Engine command: (self-startup)

2024/01/30 21:43:04.580259 [INFO] Downloading EB Application...
2024/01/30 21:43:04.580263 [INFO] Region: eu-west-1
2024/01/30 21:43:04.580266 [INFO] envID: e-8gmkc7rmw6
2024/01/30 21:43:04.580271 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 21:43:04.580275 [INFO] Using manifest file name from command request
2024/01/30 21:43:04.580298 [INFO] Unable to get version manifest file.
2024/01/30 21:43:04.580301 [INFO] Downloading latest manifest available.
2024/01/30 21:43:04.580303 [INFO] Download latest app version manifest
2024/01/30 21:43:04.580464 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 21:43:04.625304 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 21:43:04.625486 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 21:43:04.638064 [INFO] Download successful124bytes downloaded
2024/01/30 21:43:04.638203 [INFO] Trying to read and parse version manifest...
2024/01/30 21:43:04.638278 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 21:43:04.662736 [INFO] Download successful264bytes downloaded
2024/01/30 21:43:04.663393 [INFO] Executing instruction: SyncClock
2024/01/30 21:43:04.663401 [INFO] Starting SyncClock
2024/01/30 21:43:04.663414 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 21:43:04.669438 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 21:42:50 2024
System time     : 0.000000009 seconds slow of NTP time
Last offset     : +0.000010145 seconds
RMS offset      : 0.000009801 seconds
Frequency       : 0.620 ppm fast
Residual freq   : +0.018 ppm
Skew            : 0.538 ppm
Root delay      : 0.000436640 seconds
Root dispersion : 0.000337803 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 21:43:04.669456 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 21:43:04.674336 [INFO] 200 OK

2024/01/30 21:43:04.674419 [INFO] Skipping Configure OS
2024/01/30 21:43:04.674424 [INFO] Skipping LockRepo
2024/01/30 21:43:04.674428 [INFO] Skipping GenerateEBBanner
2024/01/30 21:43:04.674432 [INFO] Skipping Install Process Manager
2024/01/30 21:43:04.674436 [INFO] Skipping install syslog
2024/01/30 21:43:04.674448 [INFO] Skipping install cron
2024/01/30 21:43:04.674452 [INFO] Skipping install proxy
2024/01/30 21:43:04.674456 [INFO] Skipping installhealthd
2024/01/30 21:43:04.674460 [INFO] Skipping Install Log Streaming Manager
2024/01/30 21:43:04.674464 [INFO] Skipping install X-Ray
2024/01/30 21:43:04.674468 [INFO] Skipping install Third Party License
2024/01/30 21:43:04.674472 [INFO] Skipping installSqsd
2024/01/30 21:43:04.674476 [INFO] Skipping bootstraphealthd
2024/01/30 21:43:04.674480 [INFO] Skipping Install yum packages
2024/01/30 21:43:04.674484 [INFO] Skipping install docker-compose
2024/01/30 21:43:04.674488 [INFO] Skipping Configure Docker Daemon
2024/01/30 21:43:04.674491 [INFO] Skipping MarkBaked
2024/01/30 21:43:04.674495 [INFO] Skipping TuneSystemSettings
2024/01/30 21:43:04.674498 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 21:43:04.674500 [INFO] Initialize LogRotate files and directories
2024/01/30 21:43:04.694039 [INFO] Skipping BootstrapCFNHup
2024/01/30 21:43:04.694056 [INFO] Executing instruction: StartCFNHup
2024/01/30 21:43:04.694060 [INFO] Start cfn-hup
2024/01/30 21:43:04.694081 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 21:43:04.711744 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 21:43:04.731737 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 21:43:04.731788 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 21:43:04.731793 [INFO] Executing instruction: Start Docker
2024/01/30 21:43:04.731796 [INFO] Starting Docker...
2024/01/30 21:43:04.731983 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 21:43:04.733133 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 21:43:04.734084 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 21:43:05.183529 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 21:43:05.207607 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 21:43:05.207655 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 21:43:05.223178 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 21:43:05.231736 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 21:43:05.241101 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 21:43:05.307426 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 21:43:05.307496 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 21:43:05.667546 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 21:43:06.021403 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 21:43:06.035530 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 21:43:06.380111 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 21:43:06.392671 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 21:43:06.408516 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 21:43:06.430867 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 21:43:07.743440 [INFO] Skipping Setup Docker Options
2024/01/30 21:43:07.743494 [INFO] Skipping MarkBootstrapped
2024/01/30 21:43:07.743499 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 21:43:07.743723 [INFO] Starting SwitchCFNStack
2024/01/30 21:43:07.743753 [INFO] Executing instruction: stopSqsd
2024/01/30 21:43:07.743758 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 21:43:07.743761 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 21:43:07.743770 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 21:43:07.743831 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 21:43:08.282001 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 21:43:08.282024 [INFO] Executing instruction: StagedockerApplication
2024/01/30 21:43:08.282035 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 21:43:08.303121 [INFO] Pruning containers ...
2024/01/30 21:43:08.303173 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 21:43:08.324869 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
dc03d8f3427d   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             sweet_hofstadter

2024/01/30 21:43:08.324897 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 21:43:08.351588 [INFO] Deleted Containers:
dc03d8f3427d9d7c5392e299195ee9b3de7d3f6b3a144386dd61f31acbc80472

Total reclaimed space: 0B

2024/01/30 21:43:08.351615 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 21:43:08.372863 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 21:43:08.373116 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 21:43:08.376244 [INFO] application/json

2024/01/30 21:43:08.376266 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 21:43:08.440682 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 21:43:08.440845 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 21:43:08.442111 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 21:43:08.442145 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 21:43:08.442160 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 21:43:08.442163 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 21:43:08.442168 [INFO] Executing instruction: Generate environment file
2024/01/30 21:43:08.442195 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 21:43:08.442199 [INFO] start build docker app
2024/01/30 21:43:08.442558 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 21:43:08.442562 [INFO] fetching image and ports
2024/01/30 21:43:08.444118 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 21:43:08.444173 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 21:43:08.444181 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 21:43:08.444191 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 21:43:09.374594 [INFO] Login Succeeded

2024/01/30 21:43:09.374616 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 21:43:09.374622 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 21:43:09.374640 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 21:43:09.534367 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 21:43:09.534393 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 21:43:09.534398 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 21:43:09.534402 [INFO] start to build docker image
2024/01/30 21:43:09.534420 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 21:43:09.826667 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 21:43:09.826697 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 21:43:09.826702 [INFO] successfully build docker image
2024/01/30 21:43:09.826705 [INFO] save staging docker image id
2024/01/30 21:43:09.826718 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 21:43:09.847763 [INFO] c176d18fbf65

2024/01/30 21:43:09.847882 [INFO] Executing instruction: configure X-Ray
2024/01/30 21:43:09.847888 [INFO] X-Ray is not enabled.
2024/01/30 21:43:09.847890 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 21:43:09.853408 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 21:43:09.855185 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 21:43:09.867394 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 21:43:09.867425 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 21:43:09.878616 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 21:43:09.888498 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 21:43:09.901611 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 21:43:10.016738 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 21:43:10.351946 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 21:43:10.352026 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 21:43:10.661153 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 21:43:10.676835 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 21:43:10.984891 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 21:43:11.001171 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 21:43:11.011749 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 21:43:11.302290 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 21:43:11.312421 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 21:43:11.625589 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 21:43:11.625646 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 21:43:11.638881 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 21:43:11.649889 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 21:43:11.747599 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 21:43:11.748558 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 21:43:11.749547 [INFO] Executing instruction: configure log streaming
2024/01/30 21:43:11.749556 [INFO] log streaming is not enabled
2024/01/30 21:43:11.749560 [INFO] disable log stream
2024/01/30 21:43:11.749574 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 21:43:11.767042 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 21:43:11.783177 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 21:43:11.783201 [INFO] Checking if logs need forced rotation
2024/01/30 21:43:11.783224 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 21:43:12.269819 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 21:43:12.778052 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 21:43:12.780390 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 21:43:13.167672 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 21:43:13.186297 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 21:43:13.186313 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 21:43:13.186324 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 21:43:13.550936 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 21:43:13.550976 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 21:43:13.551003 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 21:43:13.551007 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 21:43:13.551026 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 21:43:13.551037 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 21:43:13.551039 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 21:43:13.551044 [INFO] Executing instruction: stop X-Ray
2024/01/30 21:43:13.551046 [INFO] stop X-Ray ...
2024/01/30 21:43:13.551058 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 21:43:13.567059 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 21:43:13.567093 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 21:43:13.583821 [INFO] Executing instruction: Run Docker Container
2024/01/30 21:43:13.583853 [INFO] stop currently running containers...
2024/01/30 21:43:13.583864 [INFO] detected old app is not docker compose app
2024/01/30 21:43:13.583882 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 21:43:13.642530 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 21:43:13.658515 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 21:43:13.658548 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 21:43:13.675573 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 21:43:13.675601 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 21:43:13.690719 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 21:43:13.690763 [INFO] stopping current container: dc03d8f3427d
2024/01/30 21:43:13.690774 [INFO] Running command /bin/sh -c docker ps | grep -q dc03d8f3427d
2024/01/30 21:43:13.714730 [INFO] Running command /bin/sh -c docker ps | grep -q dc03d8f3427d
2024/01/30 21:43:13.735481 [INFO] Pruning containers ...
2024/01/30 21:43:13.735504 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 21:43:13.755757 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 21:43:13.755801 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 21:43:13.775955 [INFO] Total reclaimed space: 0B

2024/01/30 21:43:13.775984 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 21:43:13.797219 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 21:43:13.797285 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 21:43:13.826770 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 21:43:13.826793 [INFO] Removing /var/app/current/ if it exists
2024/01/30 21:43:13.826962 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 21:43:13.826981 [INFO] detected new app is not docker compose app
2024/01/30 21:43:13.827045 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 21:43:14.233752 [INFO] cad6b6c4c9d1294afe3739d35911891e51df318467e128bbcfa2f238b15c027e

2024/01/30 21:43:19.234268 [INFO] Running command /bin/sh -c docker ps | grep -q cad6b6c4c9d1
2024/01/30 21:43:19.258509 [ERROR] docker container quit unexpectedly on 2024-01-30 21:43:19.258498379 +0000 UTC: Command /bin/sh -c docker ps | grep -q cad6b6c4c9d1 failed with error exit status 1
2024/01/30 21:43:19.258536 [INFO] Running command /bin/sh -c docker logs cad6b6c4c9d1
2024/01/30 21:43:19.282633 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container cad6b6c4c9d1: Command /bin/sh -c docker ps | grep -q cad6b6c4c9d1 failed with error exit status 1 

2024/01/30 21:43:19.282645 [INFO] Executing cleanup logic
2024/01/30 21:43:19.282861 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 22:43:20.326041 [INFO] Starting...
2024/01/30 22:43:20.326082 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 22:43:20.326110 [INFO] reading event message file
2024/01/30 22:43:20.326862 [INFO] Engine received EB command userdata-exec

2024/01/30 22:43:20.332392 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 22:43:20.654456 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 22:43:21.122150 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 22:43:21.122243 [INFO] Engine command: (self-startup)

2024/01/30 22:43:21.122251 [INFO] Downloading EB Application...
2024/01/30 22:43:21.122254 [INFO] Region: eu-west-1
2024/01/30 22:43:21.122258 [INFO] envID: e-8gmkc7rmw6
2024/01/30 22:43:21.122261 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 22:43:21.122265 [INFO] Using manifest file name from command request
2024/01/30 22:43:21.122279 [INFO] Unable to get version manifest file.
2024/01/30 22:43:21.122291 [INFO] Downloading latest manifest available.
2024/01/30 22:43:21.122293 [INFO] Download latest app version manifest
2024/01/30 22:43:21.122455 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 22:43:21.160322 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 22:43:21.160502 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 22:43:21.170741 [INFO] Download successful124bytes downloaded
2024/01/30 22:43:21.170876 [INFO] Trying to read and parse version manifest...
2024/01/30 22:43:21.170948 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 22:43:21.204700 [INFO] Download successful264bytes downloaded
2024/01/30 22:43:21.205094 [INFO] Executing instruction: SyncClock
2024/01/30 22:43:21.205100 [INFO] Starting SyncClock
2024/01/30 22:43:21.205112 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 22:43:21.210865 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 22:43:13 2024
System time     : 0.000000741 seconds slow of NTP time
Last offset     : -0.000002003 seconds
RMS offset      : 0.000008806 seconds
Frequency       : 0.724 ppm fast
Residual freq   : -0.003 ppm
Skew            : 0.222 ppm
Root delay      : 0.000398783 seconds
Root dispersion : 0.000522796 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 22:43:21.210884 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 22:43:21.216201 [INFO] 200 OK

2024/01/30 22:43:21.216330 [INFO] Skipping Configure OS
2024/01/30 22:43:21.216337 [INFO] Skipping LockRepo
2024/01/30 22:43:21.216343 [INFO] Skipping GenerateEBBanner
2024/01/30 22:43:21.216349 [INFO] Skipping Install Process Manager
2024/01/30 22:43:21.216354 [INFO] Skipping install syslog
2024/01/30 22:43:21.216359 [INFO] Skipping install cron
2024/01/30 22:43:21.216364 [INFO] Skipping install proxy
2024/01/30 22:43:21.216369 [INFO] Skipping installhealthd
2024/01/30 22:43:21.216375 [INFO] Skipping Install Log Streaming Manager
2024/01/30 22:43:21.216380 [INFO] Skipping install X-Ray
2024/01/30 22:43:21.216385 [INFO] Skipping install Third Party License
2024/01/30 22:43:21.216392 [INFO] Skipping installSqsd
2024/01/30 22:43:21.216397 [INFO] Skipping bootstraphealthd
2024/01/30 22:43:21.216403 [INFO] Skipping Install yum packages
2024/01/30 22:43:21.216408 [INFO] Skipping install docker-compose
2024/01/30 22:43:21.216416 [INFO] Skipping Configure Docker Daemon
2024/01/30 22:43:21.216425 [INFO] Skipping MarkBaked
2024/01/30 22:43:21.216431 [INFO] Skipping TuneSystemSettings
2024/01/30 22:43:21.216435 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 22:43:21.216438 [INFO] Initialize LogRotate files and directories
2024/01/30 22:43:21.231086 [INFO] Skipping BootstrapCFNHup
2024/01/30 22:43:21.231095 [INFO] Executing instruction: StartCFNHup
2024/01/30 22:43:21.231098 [INFO] Start cfn-hup
2024/01/30 22:43:21.231115 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 22:43:21.275086 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 22:43:21.290952 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 22:43:21.290988 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 22:43:21.290993 [INFO] Executing instruction: Start Docker
2024/01/30 22:43:21.290996 [INFO] Starting Docker...
2024/01/30 22:43:21.291170 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 22:43:21.292464 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 22:43:21.293533 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 22:43:21.652370 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 22:43:21.667167 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 22:43:21.667198 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 22:43:21.677909 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 22:43:21.686762 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 22:43:21.700052 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 22:43:21.791624 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 22:43:21.791656 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 22:43:22.103851 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 22:43:22.435588 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 22:43:22.451924 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 22:43:22.818593 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 22:43:22.835351 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 22:43:22.850070 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 22:43:22.860701 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 22:43:24.157984 [INFO] Skipping Setup Docker Options
2024/01/30 22:43:24.158005 [INFO] Skipping MarkBootstrapped
2024/01/30 22:43:24.158009 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 22:43:24.158199 [INFO] Starting SwitchCFNStack
2024/01/30 22:43:24.158206 [INFO] Executing instruction: stopSqsd
2024/01/30 22:43:24.158210 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 22:43:24.158214 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 22:43:24.158217 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 22:43:24.158238 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 22:43:24.611488 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 22:43:24.611564 [INFO] Executing instruction: StagedockerApplication
2024/01/30 22:43:24.611576 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 22:43:24.636086 [INFO] Pruning containers ...
2024/01/30 22:43:24.636128 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 22:43:24.657961 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
cad6b6c4c9d1   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             sleepy_margulis

2024/01/30 22:43:24.657987 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 22:43:24.685616 [INFO] Deleted Containers:
cad6b6c4c9d1294afe3739d35911891e51df318467e128bbcfa2f238b15c027e

Total reclaimed space: 0B

2024/01/30 22:43:24.685642 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 22:43:24.711907 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 22:43:24.712156 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 22:43:24.715383 [INFO] application/json

2024/01/30 22:43:24.715402 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 22:43:24.790294 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 22:43:24.790503 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 22:43:24.791675 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 22:43:24.791700 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 22:43:24.791714 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 22:43:24.791717 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 22:43:24.791723 [INFO] Executing instruction: Generate environment file
2024/01/30 22:43:24.791754 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 22:43:24.791757 [INFO] start build docker app
2024/01/30 22:43:24.792156 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 22:43:24.792167 [INFO] fetching image and ports
2024/01/30 22:43:24.794065 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 22:43:24.794117 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 22:43:24.794143 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 22:43:24.794157 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 22:43:25.739142 [INFO] Login Succeeded

2024/01/30 22:43:25.739158 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 22:43:25.739163 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 22:43:25.739179 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 22:43:25.872102 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 22:43:25.872126 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 22:43:25.872129 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 22:43:25.872133 [INFO] start to build docker image
2024/01/30 22:43:25.872150 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 22:43:26.156807 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 22:43:26.156845 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 22:43:26.156854 [INFO] successfully build docker image
2024/01/30 22:43:26.156862 [INFO] save staging docker image id
2024/01/30 22:43:26.156878 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 22:43:26.201216 [INFO] c176d18fbf65

2024/01/30 22:43:26.201387 [INFO] Executing instruction: configure X-Ray
2024/01/30 22:43:26.201398 [INFO] X-Ray is not enabled.
2024/01/30 22:43:26.201401 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 22:43:26.207640 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 22:43:26.209404 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 22:43:26.226162 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 22:43:26.226196 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 22:43:26.236622 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 22:43:26.252256 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 22:43:26.263761 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 22:43:26.319476 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 22:43:26.688062 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 22:43:26.688247 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 22:43:27.031476 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 22:43:27.043288 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 22:43:27.349283 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 22:43:27.358170 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 22:43:27.366581 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 22:43:27.653749 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 22:43:27.664238 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 22:43:27.963813 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 22:43:27.963852 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 22:43:27.976791 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 22:43:27.988627 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 22:43:28.090068 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 22:43:28.091065 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 22:43:28.092085 [INFO] Executing instruction: configure log streaming
2024/01/30 22:43:28.092097 [INFO] log streaming is not enabled
2024/01/30 22:43:28.092101 [INFO] disable log stream
2024/01/30 22:43:28.092127 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 22:43:28.115099 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 22:43:28.138760 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 22:43:28.138790 [INFO] Checking if logs need forced rotation
2024/01/30 22:43:28.138815 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 22:43:28.696517 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 22:43:29.232598 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 22:43:29.234330 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 22:43:29.346136 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 22:43:29.366353 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 22:43:29.366371 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 22:43:29.366390 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 22:43:29.789450 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 22:43:29.789509 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 22:43:29.789537 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 22:43:29.789540 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 22:43:29.789560 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 22:43:29.789570 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 22:43:29.789573 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 22:43:29.789580 [INFO] Executing instruction: stop X-Ray
2024/01/30 22:43:29.789583 [INFO] stop X-Ray ...
2024/01/30 22:43:29.789596 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 22:43:29.804693 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 22:43:29.804728 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 22:43:29.822079 [INFO] Executing instruction: Run Docker Container
2024/01/30 22:43:29.822111 [INFO] stop currently running containers...
2024/01/30 22:43:29.822122 [INFO] detected old app is not docker compose app
2024/01/30 22:43:29.822139 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 22:43:29.842675 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 22:43:29.858447 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 22:43:29.858481 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 22:43:29.873589 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 22:43:29.873622 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 22:43:29.887901 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 22:43:29.887957 [INFO] stopping current container: cad6b6c4c9d1
2024/01/30 22:43:29.887970 [INFO] Running command /bin/sh -c docker ps | grep -q cad6b6c4c9d1
2024/01/30 22:43:29.909991 [INFO] Running command /bin/sh -c docker ps | grep -q cad6b6c4c9d1
2024/01/30 22:43:29.935300 [INFO] Pruning containers ...
2024/01/30 22:43:29.935324 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 22:43:29.955405 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 22:43:29.955436 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 22:43:29.975706 [INFO] Total reclaimed space: 0B

2024/01/30 22:43:29.975733 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 22:43:29.996848 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 22:43:29.996882 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 22:43:30.026152 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 22:43:30.026177 [INFO] Removing /var/app/current/ if it exists
2024/01/30 22:43:30.026286 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 22:43:30.026304 [INFO] detected new app is not docker compose app
2024/01/30 22:43:30.026358 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 22:43:30.485909 [INFO] 1fd99e671deb52474fec7d574ed211b2bbc2fa8ecbc6ed7afe3c8587370154ed

2024/01/30 22:43:35.487480 [INFO] Running command /bin/sh -c docker ps | grep -q 1fd99e671deb
2024/01/30 22:43:35.513313 [ERROR] docker container quit unexpectedly on 2024-01-30 22:43:35.513295858 +0000 UTC: Command /bin/sh -c docker ps | grep -q 1fd99e671deb failed with error exit status 1
2024/01/30 22:43:35.513339 [INFO] Running command /bin/sh -c docker logs 1fd99e671deb
2024/01/30 22:43:35.540904 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 1fd99e671deb: Command /bin/sh -c docker ps | grep -q 1fd99e671deb failed with error exit status 1 

2024/01/30 22:43:35.542249 [INFO] Executing cleanup logic
2024/01/30 22:43:35.544624 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 23:43:36.672068 [INFO] Starting...
2024/01/30 23:43:36.672110 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 23:43:36.672136 [INFO] reading event message file
2024/01/30 23:43:36.672817 [INFO] Engine received EB command userdata-exec

2024/01/30 23:43:36.689395 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 23:43:37.223874 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 23:43:37.687974 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 23:43:37.688101 [INFO] Engine command: (self-startup)

2024/01/30 23:43:37.688111 [INFO] Downloading EB Application...
2024/01/30 23:43:37.688120 [INFO] Region: eu-west-1
2024/01/30 23:43:37.688126 [INFO] envID: e-8gmkc7rmw6
2024/01/30 23:43:37.688132 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 23:43:37.688138 [INFO] Using manifest file name from command request
2024/01/30 23:43:37.688165 [INFO] Unable to get version manifest file.
2024/01/30 23:43:37.688170 [INFO] Downloading latest manifest available.
2024/01/30 23:43:37.688173 [INFO] Download latest app version manifest
2024/01/30 23:43:37.688304 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 23:43:37.725083 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 23:43:37.725284 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 23:43:37.739202 [INFO] Download successful124bytes downloaded
2024/01/30 23:43:37.739349 [INFO] Trying to read and parse version manifest...
2024/01/30 23:43:37.739427 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 23:43:37.768622 [INFO] Download successful264bytes downloaded
2024/01/30 23:43:37.769001 [INFO] Executing instruction: SyncClock
2024/01/30 23:43:37.769007 [INFO] Starting SyncClock
2024/01/30 23:43:37.769018 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 23:43:37.774279 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 23:43:22 2024
System time     : 0.000000016 seconds fast of NTP time
Last offset     : -0.000021067 seconds
RMS offset      : 0.000015873 seconds
Frequency       : 0.866 ppm fast
Residual freq   : -0.360 ppm
Skew            : 0.805 ppm
Root delay      : 0.000437121 seconds
Root dispersion : 0.000537851 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 23:43:37.774309 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 23:43:37.778945 [INFO] 200 OK

2024/01/30 23:43:37.779109 [INFO] Skipping Configure OS
2024/01/30 23:43:37.779116 [INFO] Skipping LockRepo
2024/01/30 23:43:37.779120 [INFO] Skipping GenerateEBBanner
2024/01/30 23:43:37.779133 [INFO] Skipping Install Process Manager
2024/01/30 23:43:37.779137 [INFO] Skipping install syslog
2024/01/30 23:43:37.779142 [INFO] Skipping install cron
2024/01/30 23:43:37.779147 [INFO] Skipping install proxy
2024/01/30 23:43:37.779153 [INFO] Skipping installhealthd
2024/01/30 23:43:37.779158 [INFO] Skipping Install Log Streaming Manager
2024/01/30 23:43:37.779164 [INFO] Skipping install X-Ray
2024/01/30 23:43:37.779168 [INFO] Skipping install Third Party License
2024/01/30 23:43:37.779173 [INFO] Skipping installSqsd
2024/01/30 23:43:37.779177 [INFO] Skipping bootstraphealthd
2024/01/30 23:43:37.779181 [INFO] Skipping Install yum packages
2024/01/30 23:43:37.779184 [INFO] Skipping install docker-compose
2024/01/30 23:43:37.779188 [INFO] Skipping Configure Docker Daemon
2024/01/30 23:43:37.779191 [INFO] Skipping MarkBaked
2024/01/30 23:43:37.779195 [INFO] Skipping TuneSystemSettings
2024/01/30 23:43:37.779198 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 23:43:37.779200 [INFO] Initialize LogRotate files and directories
2024/01/30 23:43:37.797598 [INFO] Skipping BootstrapCFNHup
2024/01/30 23:43:37.797609 [INFO] Executing instruction: StartCFNHup
2024/01/30 23:43:37.797611 [INFO] Start cfn-hup
2024/01/30 23:43:37.797633 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 23:43:37.813019 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 23:43:37.822780 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 23:43:37.822813 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 23:43:37.822817 [INFO] Executing instruction: Start Docker
2024/01/30 23:43:37.822820 [INFO] Starting Docker...
2024/01/30 23:43:37.822902 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 23:43:37.823927 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 23:43:37.825148 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 23:43:38.172108 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 23:43:38.187481 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 23:43:38.187513 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 23:43:38.198567 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 23:43:38.207948 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 23:43:38.218051 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 23:43:38.330251 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 23:43:38.330338 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 23:43:38.661194 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 23:43:39.068787 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 23:43:39.084111 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 23:43:39.389966 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 23:43:39.398344 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 23:43:39.417646 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 23:43:39.427472 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 23:43:40.768214 [INFO] Skipping Setup Docker Options
2024/01/30 23:43:40.768244 [INFO] Skipping MarkBootstrapped
2024/01/30 23:43:40.768249 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 23:43:40.768367 [INFO] Starting SwitchCFNStack
2024/01/30 23:43:40.768373 [INFO] Executing instruction: stopSqsd
2024/01/30 23:43:40.768377 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 23:43:40.768384 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 23:43:40.768388 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 23:43:40.768409 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 23:43:41.201164 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 23:43:41.201247 [INFO] Executing instruction: StagedockerApplication
2024/01/30 23:43:41.201261 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 23:43:41.231708 [INFO] Pruning containers ...
2024/01/30 23:43:41.231741 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 23:43:41.254114 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
1fd99e671deb   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             funny_yalow

2024/01/30 23:43:41.254144 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 23:43:41.290650 [INFO] Deleted Containers:
1fd99e671deb52474fec7d574ed211b2bbc2fa8ecbc6ed7afe3c8587370154ed

Total reclaimed space: 0B

2024/01/30 23:43:41.290673 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 23:43:41.315228 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 23:43:41.315563 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 23:43:41.319504 [INFO] application/json

2024/01/30 23:43:41.319531 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 23:43:41.407698 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 23:43:41.407873 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 23:43:41.409201 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 23:43:41.409227 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 23:43:41.409241 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 23:43:41.409244 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 23:43:41.409248 [INFO] Executing instruction: Generate environment file
2024/01/30 23:43:41.409272 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 23:43:41.409276 [INFO] start build docker app
2024/01/30 23:43:41.409621 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 23:43:41.409625 [INFO] fetching image and ports
2024/01/30 23:43:41.411662 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 23:43:41.411724 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 23:43:41.411735 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 23:43:41.411747 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 23:43:42.588893 [INFO] Login Succeeded

2024/01/30 23:43:42.589209 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 23:43:42.589256 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 23:43:42.589280 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 23:43:42.752086 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 23:43:42.752113 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 23:43:42.752117 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 23:43:42.752122 [INFO] start to build docker image
2024/01/30 23:43:42.752139 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 23:43:43.041766 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 23:43:43.041794 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 23:43:43.041799 [INFO] successfully build docker image
2024/01/30 23:43:43.041802 [INFO] save staging docker image id
2024/01/30 23:43:43.041816 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 23:43:43.064383 [INFO] c176d18fbf65

2024/01/30 23:43:43.064502 [INFO] Executing instruction: configure X-Ray
2024/01/30 23:43:43.064508 [INFO] X-Ray is not enabled.
2024/01/30 23:43:43.064510 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 23:43:43.069454 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 23:43:43.071039 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 23:43:43.084689 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 23:43:43.084723 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 23:43:43.095824 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 23:43:43.105563 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 23:43:43.115528 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 23:43:43.168098 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 23:43:43.536937 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 23:43:43.537027 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 23:43:43.885071 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 23:43:43.900703 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 23:43:44.260799 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 23:43:44.271052 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 23:43:44.280161 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 23:43:44.575888 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 23:43:44.586827 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 23:43:44.939000 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 23:43:44.939029 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 23:43:44.957261 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 23:43:44.970187 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 23:43:45.053019 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 23:43:45.053900 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 23:43:45.054880 [INFO] Executing instruction: configure log streaming
2024/01/30 23:43:45.054891 [INFO] log streaming is not enabled
2024/01/30 23:43:45.054895 [INFO] disable log stream
2024/01/30 23:43:45.054909 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 23:43:45.078801 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 23:43:45.105165 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 23:43:45.105190 [INFO] Checking if logs need forced rotation
2024/01/30 23:43:45.105211 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 23:43:45.691822 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 23:43:46.191252 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 23:43:46.193127 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 23:43:46.645379 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 23:43:46.662223 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 23:43:46.662243 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 23:43:46.662258 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 23:43:47.023438 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 23:43:47.023463 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 23:43:47.023487 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 23:43:47.023490 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 23:43:47.023508 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 23:43:47.023519 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 23:43:47.023521 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 23:43:47.023525 [INFO] Executing instruction: stop X-Ray
2024/01/30 23:43:47.023528 [INFO] stop X-Ray ...
2024/01/30 23:43:47.023539 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 23:43:47.037531 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 23:43:47.037564 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 23:43:47.052331 [INFO] Executing instruction: Run Docker Container
2024/01/30 23:43:47.052362 [INFO] stop currently running containers...
2024/01/30 23:43:47.052373 [INFO] detected old app is not docker compose app
2024/01/30 23:43:47.052387 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 23:43:47.102400 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 23:43:47.116827 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 23:43:47.116861 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 23:43:47.130715 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 23:43:47.130750 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 23:43:47.144801 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 23:43:47.144848 [INFO] stopping current container: 1fd99e671deb
2024/01/30 23:43:47.144865 [INFO] Running command /bin/sh -c docker ps | grep -q 1fd99e671deb
2024/01/30 23:43:47.165239 [INFO] Running command /bin/sh -c docker ps | grep -q 1fd99e671deb
2024/01/30 23:43:47.188980 [INFO] Pruning containers ...
2024/01/30 23:43:47.189003 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 23:43:47.206859 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 23:43:47.206892 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 23:43:47.225651 [INFO] Total reclaimed space: 0B

2024/01/30 23:43:47.225696 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 23:43:47.244326 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 23:43:47.244358 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 23:43:47.263160 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 23:43:47.263183 [INFO] Removing /var/app/current/ if it exists
2024/01/30 23:43:47.263275 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 23:43:47.263292 [INFO] detected new app is not docker compose app
2024/01/30 23:43:47.263340 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 23:43:47.695242 [INFO] 295d500210d0dec7cda6d0f1668d477dffff51036e797c04887292a1154e3717

2024/01/30 23:43:52.699551 [INFO] Running command /bin/sh -c docker ps | grep -q 295d500210d0
2024/01/30 23:43:52.724445 [ERROR] docker container quit unexpectedly on 2024-01-30 23:43:52.724433466 +0000 UTC: Command /bin/sh -c docker ps | grep -q 295d500210d0 failed with error exit status 1
2024/01/30 23:43:52.724478 [INFO] Running command /bin/sh -c docker logs 295d500210d0
2024/01/30 23:43:52.770762 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 295d500210d0: Command /bin/sh -c docker ps | grep -q 295d500210d0 failed with error exit status 1 

2024/01/30 23:43:52.770770 [INFO] Executing cleanup logic
2024/01/30 23:43:52.771025 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 00:43:53.599078 [INFO] Starting...
2024/01/31 00:43:53.599118 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 00:43:53.599141 [INFO] reading event message file
2024/01/31 00:43:53.599824 [INFO] Engine received EB command userdata-exec

2024/01/31 00:43:53.605672 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 00:43:54.005684 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 00:43:54.465357 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 00:43:54.465456 [INFO] Engine command: (self-startup)

2024/01/31 00:43:54.465464 [INFO] Downloading EB Application...
2024/01/31 00:43:54.465468 [INFO] Region: eu-west-1
2024/01/31 00:43:54.465471 [INFO] envID: e-8gmkc7rmw6
2024/01/31 00:43:54.465474 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 00:43:54.465486 [INFO] Using manifest file name from command request
2024/01/31 00:43:54.465500 [INFO] Unable to get version manifest file.
2024/01/31 00:43:54.465502 [INFO] Downloading latest manifest available.
2024/01/31 00:43:54.465505 [INFO] Download latest app version manifest
2024/01/31 00:43:54.465620 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 00:43:54.543301 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 00:43:54.543497 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 00:43:54.569436 [INFO] Download successful124bytes downloaded
2024/01/31 00:43:54.569577 [INFO] Trying to read and parse version manifest...
2024/01/31 00:43:54.569652 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 00:43:54.614026 [INFO] Download successful264bytes downloaded
2024/01/31 00:43:54.614450 [INFO] Executing instruction: SyncClock
2024/01/31 00:43:54.614455 [INFO] Starting SyncClock
2024/01/31 00:43:54.614466 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 00:43:54.621318 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 00:43:45 2024
System time     : 0.000002158 seconds slow of NTP time
Last offset     : -0.000000469 seconds
RMS offset      : 0.000008982 seconds
Frequency       : 1.039 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.153 ppm
Root delay      : 0.000413573 seconds
Root dispersion : 0.000510662 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/31 00:43:54.621337 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 00:43:54.625786 [INFO] 200 OK

2024/01/31 00:43:54.625880 [INFO] Skipping Configure OS
2024/01/31 00:43:54.625885 [INFO] Skipping LockRepo
2024/01/31 00:43:54.625889 [INFO] Skipping GenerateEBBanner
2024/01/31 00:43:54.625893 [INFO] Skipping Install Process Manager
2024/01/31 00:43:54.625898 [INFO] Skipping install syslog
2024/01/31 00:43:54.625902 [INFO] Skipping install cron
2024/01/31 00:43:54.625905 [INFO] Skipping install proxy
2024/01/31 00:43:54.625909 [INFO] Skipping installhealthd
2024/01/31 00:43:54.625913 [INFO] Skipping Install Log Streaming Manager
2024/01/31 00:43:54.625917 [INFO] Skipping install X-Ray
2024/01/31 00:43:54.625920 [INFO] Skipping install Third Party License
2024/01/31 00:43:54.625925 [INFO] Skipping installSqsd
2024/01/31 00:43:54.625929 [INFO] Skipping bootstraphealthd
2024/01/31 00:43:54.625933 [INFO] Skipping Install yum packages
2024/01/31 00:43:54.625937 [INFO] Skipping install docker-compose
2024/01/31 00:43:54.625941 [INFO] Skipping Configure Docker Daemon
2024/01/31 00:43:54.625944 [INFO] Skipping MarkBaked
2024/01/31 00:43:54.625951 [INFO] Skipping TuneSystemSettings
2024/01/31 00:43:54.625954 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 00:43:54.625956 [INFO] Initialize LogRotate files and directories
2024/01/31 00:43:54.640829 [INFO] Skipping BootstrapCFNHup
2024/01/31 00:43:54.640839 [INFO] Executing instruction: StartCFNHup
2024/01/31 00:43:54.640842 [INFO] Start cfn-hup
2024/01/31 00:43:54.640862 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 00:43:54.654649 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 00:43:54.663221 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 00:43:54.663254 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 00:43:54.663258 [INFO] Executing instruction: Start Docker
2024/01/31 00:43:54.663261 [INFO] Starting Docker...
2024/01/31 00:43:54.663416 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 00:43:54.664476 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 00:43:54.665556 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 00:43:55.162405 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 00:43:55.178629 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 00:43:55.178662 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 00:43:55.191417 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 00:43:55.202081 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 00:43:55.218184 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 00:43:55.304914 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 00:43:55.304979 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 00:43:55.652764 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 00:43:55.974975 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 00:43:55.987926 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 00:43:56.314906 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 00:43:56.325074 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 00:43:56.343592 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 00:43:56.357934 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 00:43:57.530624 [INFO] Skipping Setup Docker Options
2024/01/31 00:43:57.530645 [INFO] Skipping MarkBootstrapped
2024/01/31 00:43:57.530649 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 00:43:57.530767 [INFO] Starting SwitchCFNStack
2024/01/31 00:43:57.530772 [INFO] Executing instruction: stopSqsd
2024/01/31 00:43:57.530776 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 00:43:57.530779 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 00:43:57.530784 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 00:43:57.530800 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 00:43:58.023377 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 00:43:58.023402 [INFO] Executing instruction: StagedockerApplication
2024/01/31 00:43:58.023414 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 00:43:58.043226 [INFO] Pruning containers ...
2024/01/31 00:43:58.043258 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 00:43:58.065196 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
295d500210d0   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             affectionate_easley

2024/01/31 00:43:58.065232 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 00:43:58.093621 [INFO] Deleted Containers:
295d500210d0dec7cda6d0f1668d477dffff51036e797c04887292a1154e3717

Total reclaimed space: 0B

2024/01/31 00:43:58.093645 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 00:43:58.114364 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 00:43:58.114587 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 00:43:58.118086 [INFO] application/json

2024/01/31 00:43:58.118103 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 00:43:58.196551 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 00:43:58.196708 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 00:43:58.198212 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 00:43:58.198237 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 00:43:58.198257 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 00:43:58.198260 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 00:43:58.198264 [INFO] Executing instruction: Generate environment file
2024/01/31 00:43:58.198289 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 00:43:58.198292 [INFO] start build docker app
2024/01/31 00:43:58.198832 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 00:43:58.198837 [INFO] fetching image and ports
2024/01/31 00:43:58.200748 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 00:43:58.200802 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 00:43:58.200816 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 00:43:58.200825 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 00:43:59.066057 [INFO] Login Succeeded

2024/01/31 00:43:59.066074 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 00:43:59.066080 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 00:43:59.066099 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 00:43:59.220124 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 00:43:59.220149 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 00:43:59.220153 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 00:43:59.220157 [INFO] start to build docker image
2024/01/31 00:43:59.220176 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 00:43:59.476620 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 00:43:59.476643 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 00:43:59.476651 [INFO] successfully build docker image
2024/01/31 00:43:59.476653 [INFO] save staging docker image id
2024/01/31 00:43:59.476670 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 00:43:59.500098 [INFO] c176d18fbf65

2024/01/31 00:43:59.500283 [INFO] Executing instruction: configure X-Ray
2024/01/31 00:43:59.500290 [INFO] X-Ray is not enabled.
2024/01/31 00:43:59.500293 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 00:43:59.507317 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 00:43:59.509070 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 00:43:59.525039 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 00:43:59.525220 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 00:43:59.539296 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 00:43:59.547797 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 00:43:59.558337 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 00:43:59.628101 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 00:43:59.960689 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 00:43:59.960787 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 00:44:00.364060 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 00:44:00.387169 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 00:44:00.737964 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 00:44:00.749630 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 00:44:00.764316 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 00:44:01.121574 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 00:44:01.132739 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 00:44:01.552305 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 00:44:01.552345 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 00:44:01.567363 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 00:44:01.584763 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 00:44:01.674344 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 00:44:01.675560 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 00:44:01.676561 [INFO] Executing instruction: configure log streaming
2024/01/31 00:44:01.676574 [INFO] log streaming is not enabled
2024/01/31 00:44:01.676578 [INFO] disable log stream
2024/01/31 00:44:01.676594 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 00:44:01.693248 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 00:44:01.710823 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 00:44:01.710848 [INFO] Checking if logs need forced rotation
2024/01/31 00:44:01.710868 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 00:44:02.330263 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 00:44:02.880528 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 00:44:02.882465 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 00:44:03.385425 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 00:44:03.402970 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 00:44:03.402985 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 00:44:03.402996 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 00:44:03.855476 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 00:44:03.855505 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 00:44:03.855534 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 00:44:03.855538 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 00:44:03.855563 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 00:44:03.855577 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 00:44:03.855580 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 00:44:03.855587 [INFO] Executing instruction: stop X-Ray
2024/01/31 00:44:03.855591 [INFO] stop X-Ray ...
2024/01/31 00:44:03.855603 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 00:44:03.877460 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 00:44:03.877495 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 00:44:03.895175 [INFO] Executing instruction: Run Docker Container
2024/01/31 00:44:03.895207 [INFO] stop currently running containers...
2024/01/31 00:44:03.895219 [INFO] detected old app is not docker compose app
2024/01/31 00:44:03.895233 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 00:44:03.952354 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 00:44:03.976291 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 00:44:03.976319 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 00:44:03.997624 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 00:44:03.997661 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 00:44:04.026028 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 00:44:04.026080 [INFO] stopping current container: 295d500210d0
2024/01/31 00:44:04.026098 [INFO] Running command /bin/sh -c docker ps | grep -q 295d500210d0
2024/01/31 00:44:04.051866 [INFO] Running command /bin/sh -c docker ps | grep -q 295d500210d0
2024/01/31 00:44:04.078626 [INFO] Pruning containers ...
2024/01/31 00:44:04.078676 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 00:44:04.105496 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 00:44:04.105528 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 00:44:04.128807 [INFO] Total reclaimed space: 0B

2024/01/31 00:44:04.128837 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 00:44:04.153951 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 00:44:04.153985 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 00:44:04.183833 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 00:44:04.183854 [INFO] Removing /var/app/current/ if it exists
2024/01/31 00:44:04.183958 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 00:44:04.183980 [INFO] detected new app is not docker compose app
2024/01/31 00:44:04.184032 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 00:44:04.653850 [INFO] 85057277cd249060e7075dcbc4545861acb6c9a19bb3756eae03547d1a073d09

2024/01/31 00:44:09.654189 [INFO] Running command /bin/sh -c docker ps | grep -q 85057277cd24
2024/01/31 00:44:09.677386 [ERROR] docker container quit unexpectedly on 2024-01-31 00:44:09.677321756 +0000 UTC: Command /bin/sh -c docker ps | grep -q 85057277cd24 failed with error exit status 1
2024/01/31 00:44:09.677419 [INFO] Running command /bin/sh -c docker logs 85057277cd24
2024/01/31 00:44:09.698753 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 85057277cd24: Command /bin/sh -c docker ps | grep -q 85057277cd24 failed with error exit status 1 

2024/01/31 00:44:09.698763 [INFO] Executing cleanup logic
2024/01/31 00:44:09.698950 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 01:44:10.685030 [INFO] Starting...
2024/01/31 01:44:10.685072 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 01:44:10.685100 [INFO] reading event message file
2024/01/31 01:44:10.685861 [INFO] Engine received EB command userdata-exec

2024/01/31 01:44:10.693249 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 01:44:11.146638 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 01:44:11.599368 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 01:44:11.599420 [INFO] Engine command: (self-startup)

2024/01/31 01:44:11.599428 [INFO] Downloading EB Application...
2024/01/31 01:44:11.599433 [INFO] Region: eu-west-1
2024/01/31 01:44:11.599436 [INFO] envID: e-8gmkc7rmw6
2024/01/31 01:44:11.599440 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 01:44:11.599444 [INFO] Using manifest file name from command request
2024/01/31 01:44:11.599459 [INFO] Unable to get version manifest file.
2024/01/31 01:44:11.599462 [INFO] Downloading latest manifest available.
2024/01/31 01:44:11.599465 [INFO] Download latest app version manifest
2024/01/31 01:44:11.599590 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 01:44:11.642339 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 01:44:11.642668 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 01:44:11.654595 [INFO] Download successful124bytes downloaded
2024/01/31 01:44:11.654828 [INFO] Trying to read and parse version manifest...
2024/01/31 01:44:11.654907 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 01:44:11.696104 [INFO] Download successful264bytes downloaded
2024/01/31 01:44:11.696572 [INFO] Executing instruction: SyncClock
2024/01/31 01:44:11.696579 [INFO] Starting SyncClock
2024/01/31 01:44:11.696591 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 01:44:11.704531 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 01:44:08 2024
System time     : 0.000002320 seconds slow of NTP time
Last offset     : -0.000002438 seconds
RMS offset      : 0.000008674 seconds
Frequency       : 0.820 ppm fast
Residual freq   : -0.164 ppm
Skew            : 0.173 ppm
Root delay      : 0.000436234 seconds
Root dispersion : 0.000453890 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/31 01:44:11.704556 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 01:44:11.710684 [INFO] 200 OK

2024/01/31 01:44:11.710792 [INFO] Skipping Configure OS
2024/01/31 01:44:11.710797 [INFO] Skipping LockRepo
2024/01/31 01:44:11.710801 [INFO] Skipping GenerateEBBanner
2024/01/31 01:44:11.710805 [INFO] Skipping Install Process Manager
2024/01/31 01:44:11.710809 [INFO] Skipping install syslog
2024/01/31 01:44:11.710813 [INFO] Skipping install cron
2024/01/31 01:44:11.710816 [INFO] Skipping install proxy
2024/01/31 01:44:11.710820 [INFO] Skipping installhealthd
2024/01/31 01:44:11.710824 [INFO] Skipping Install Log Streaming Manager
2024/01/31 01:44:11.710828 [INFO] Skipping install X-Ray
2024/01/31 01:44:11.710832 [INFO] Skipping install Third Party License
2024/01/31 01:44:11.710837 [INFO] Skipping installSqsd
2024/01/31 01:44:11.710841 [INFO] Skipping bootstraphealthd
2024/01/31 01:44:11.710845 [INFO] Skipping Install yum packages
2024/01/31 01:44:11.710848 [INFO] Skipping install docker-compose
2024/01/31 01:44:11.710852 [INFO] Skipping Configure Docker Daemon
2024/01/31 01:44:11.710856 [INFO] Skipping MarkBaked
2024/01/31 01:44:11.710860 [INFO] Skipping TuneSystemSettings
2024/01/31 01:44:11.710863 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 01:44:11.710865 [INFO] Initialize LogRotate files and directories
2024/01/31 01:44:11.722878 [INFO] Skipping BootstrapCFNHup
2024/01/31 01:44:11.722891 [INFO] Executing instruction: StartCFNHup
2024/01/31 01:44:11.722894 [INFO] Start cfn-hup
2024/01/31 01:44:11.722913 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 01:44:11.740209 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 01:44:11.750928 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 01:44:11.750973 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 01:44:11.750978 [INFO] Executing instruction: Start Docker
2024/01/31 01:44:11.750981 [INFO] Starting Docker...
2024/01/31 01:44:11.751063 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 01:44:11.752307 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 01:44:11.753222 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 01:44:12.150603 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 01:44:12.169618 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 01:44:12.169654 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 01:44:12.180609 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 01:44:12.189537 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 01:44:12.200835 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 01:44:12.291656 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 01:44:12.291699 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 01:44:12.679196 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 01:44:12.975138 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 01:44:12.987109 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 01:44:13.356367 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 01:44:13.367636 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 01:44:13.386105 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 01:44:13.396587 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 01:44:14.723759 [INFO] Skipping Setup Docker Options
2024/01/31 01:44:14.723783 [INFO] Skipping MarkBootstrapped
2024/01/31 01:44:14.723793 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 01:44:14.723907 [INFO] Starting SwitchCFNStack
2024/01/31 01:44:14.723912 [INFO] Executing instruction: stopSqsd
2024/01/31 01:44:14.723916 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 01:44:14.723919 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 01:44:14.723922 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 01:44:14.723941 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 01:44:15.223374 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 01:44:15.223460 [INFO] Executing instruction: StagedockerApplication
2024/01/31 01:44:15.223472 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 01:44:15.247643 [INFO] Pruning containers ...
2024/01/31 01:44:15.247678 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 01:44:15.269700 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
85057277cd24   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             nifty_mayer

2024/01/31 01:44:15.269727 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 01:44:15.295628 [INFO] Deleted Containers:
85057277cd249060e7075dcbc4545861acb6c9a19bb3756eae03547d1a073d09

Total reclaimed space: 0B

2024/01/31 01:44:15.295651 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 01:44:15.318088 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 01:44:15.318320 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 01:44:15.321080 [INFO] application/json

2024/01/31 01:44:15.321099 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 01:44:15.398868 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 01:44:15.399046 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 01:44:15.400245 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 01:44:15.400269 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 01:44:15.400284 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 01:44:15.400286 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 01:44:15.400290 [INFO] Executing instruction: Generate environment file
2024/01/31 01:44:15.400329 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 01:44:15.400332 [INFO] start build docker app
2024/01/31 01:44:15.400688 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 01:44:15.400691 [INFO] fetching image and ports
2024/01/31 01:44:15.402261 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 01:44:15.402327 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 01:44:15.402338 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 01:44:15.402349 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 01:44:16.337265 [INFO] Login Succeeded

2024/01/31 01:44:16.337282 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 01:44:16.337292 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 01:44:16.337307 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 01:44:16.492354 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 01:44:16.492382 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 01:44:16.492385 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 01:44:16.492389 [INFO] start to build docker image
2024/01/31 01:44:16.492408 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 01:44:16.781981 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B 0.0s done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 01:44:16.782009 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 01:44:16.782013 [INFO] successfully build docker image
2024/01/31 01:44:16.782016 [INFO] save staging docker image id
2024/01/31 01:44:16.782031 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 01:44:16.830853 [INFO] c176d18fbf65

2024/01/31 01:44:16.830988 [INFO] Executing instruction: configure X-Ray
2024/01/31 01:44:16.830995 [INFO] X-Ray is not enabled.
2024/01/31 01:44:16.830998 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 01:44:16.835842 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 01:44:16.837363 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 01:44:16.848714 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 01:44:16.848759 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 01:44:16.859623 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 01:44:16.869956 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 01:44:16.883426 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 01:44:16.959029 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 01:44:17.286106 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 01:44:17.286187 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 01:44:17.595969 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 01:44:17.607717 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 01:44:17.899600 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 01:44:17.909814 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 01:44:17.918810 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 01:44:18.225851 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 01:44:18.238426 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 01:44:18.513584 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 01:44:18.513619 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 01:44:18.526627 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 01:44:18.536405 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 01:44:18.640529 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 01:44:18.641471 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 01:44:18.642337 [INFO] Executing instruction: configure log streaming
2024/01/31 01:44:18.642349 [INFO] log streaming is not enabled
2024/01/31 01:44:18.642353 [INFO] disable log stream
2024/01/31 01:44:18.642407 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 01:44:18.664887 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 01:44:18.685670 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 01:44:18.685707 [INFO] Checking if logs need forced rotation
2024/01/31 01:44:18.685731 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 01:44:19.284175 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 01:44:19.776880 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 01:44:19.778341 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 01:44:19.876444 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 01:44:19.893897 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 01:44:19.893915 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 01:44:19.893933 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 01:44:20.357010 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 01:44:20.357046 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 01:44:20.357072 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 01:44:20.357075 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 01:44:20.357103 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 01:44:20.357115 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 01:44:20.357118 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 01:44:20.357124 [INFO] Executing instruction: stop X-Ray
2024/01/31 01:44:20.357127 [INFO] stop X-Ray ...
2024/01/31 01:44:20.357177 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 01:44:20.380507 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 01:44:20.380539 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 01:44:20.400487 [INFO] Executing instruction: Run Docker Container
2024/01/31 01:44:20.400518 [INFO] stop currently running containers...
2024/01/31 01:44:20.400530 [INFO] detected old app is not docker compose app
2024/01/31 01:44:20.400545 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 01:44:20.452397 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 01:44:20.468099 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 01:44:20.468138 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 01:44:20.482209 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 01:44:20.482241 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 01:44:20.500625 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 01:44:20.500681 [INFO] stopping current container: 85057277cd24
2024/01/31 01:44:20.500694 [INFO] Running command /bin/sh -c docker ps | grep -q 85057277cd24
2024/01/31 01:44:20.531255 [INFO] Running command /bin/sh -c docker ps | grep -q 85057277cd24
2024/01/31 01:44:20.555065 [INFO] Pruning containers ...
2024/01/31 01:44:20.555092 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 01:44:20.575364 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 01:44:20.575401 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 01:44:20.594514 [INFO] Total reclaimed space: 0B

2024/01/31 01:44:20.594539 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 01:44:20.614761 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 01:44:20.614789 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 01:44:20.636498 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 01:44:20.636517 [INFO] Removing /var/app/current/ if it exists
2024/01/31 01:44:20.636615 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 01:44:20.636632 [INFO] detected new app is not docker compose app
2024/01/31 01:44:20.636689 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 01:44:21.107341 [INFO] 89205de3eac4bf5600599f91b44b3350bd7d23cc077970de2ee41bf73333efb3

2024/01/31 01:44:26.107728 [INFO] Running command /bin/sh -c docker ps | grep -q 89205de3eac4
2024/01/31 01:44:26.128950 [ERROR] docker container quit unexpectedly on 2024-01-31 01:44:26.128932058 +0000 UTC: Command /bin/sh -c docker ps | grep -q 89205de3eac4 failed with error exit status 1
2024/01/31 01:44:26.128982 [INFO] Running command /bin/sh -c docker logs 89205de3eac4
2024/01/31 01:44:26.148951 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 89205de3eac4: Command /bin/sh -c docker ps | grep -q 89205de3eac4 failed with error exit status 1 

2024/01/31 01:44:26.148960 [INFO] Executing cleanup logic
2024/01/31 01:44:26.149151 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 02:44:27.171715 [INFO] Starting...
2024/01/31 02:44:27.171793 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 02:44:27.171820 [INFO] reading event message file
2024/01/31 02:44:27.173504 [INFO] Engine received EB command userdata-exec

2024/01/31 02:44:27.180153 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 02:44:27.641140 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 02:44:28.114389 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 02:44:28.114567 [INFO] Engine command: (self-startup)

2024/01/31 02:44:28.114582 [INFO] Downloading EB Application...
2024/01/31 02:44:28.114585 [INFO] Region: eu-west-1
2024/01/31 02:44:28.114596 [INFO] envID: e-8gmkc7rmw6
2024/01/31 02:44:28.114598 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 02:44:28.114601 [INFO] Using manifest file name from command request
2024/01/31 02:44:28.114614 [INFO] Unable to get version manifest file.
2024/01/31 02:44:28.114616 [INFO] Downloading latest manifest available.
2024/01/31 02:44:28.114618 [INFO] Download latest app version manifest
2024/01/31 02:44:28.114747 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 02:44:28.157772 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 02:44:28.157951 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 02:44:28.172037 [INFO] Download successful124bytes downloaded
2024/01/31 02:44:28.172193 [INFO] Trying to read and parse version manifest...
2024/01/31 02:44:28.172272 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 02:44:28.199588 [INFO] Download successful264bytes downloaded
2024/01/31 02:44:28.199946 [INFO] Executing instruction: SyncClock
2024/01/31 02:44:28.199952 [INFO] Starting SyncClock
2024/01/31 02:44:28.199969 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 02:44:28.207402 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 02:44:17 2024
System time     : 0.000003137 seconds slow of NTP time
Last offset     : -0.000003095 seconds
RMS offset      : 0.000003793 seconds
Frequency       : 0.790 ppm fast
Residual freq   : -0.005 ppm
Skew            : 0.301 ppm
Root delay      : 0.000391464 seconds
Root dispersion : 0.000527047 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 02:44:28.207484 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 02:44:28.211874 [INFO] 200 OK

2024/01/31 02:44:28.212041 [INFO] Skipping Configure OS
2024/01/31 02:44:28.212050 [INFO] Skipping LockRepo
2024/01/31 02:44:28.212054 [INFO] Skipping GenerateEBBanner
2024/01/31 02:44:28.212058 [INFO] Skipping Install Process Manager
2024/01/31 02:44:28.212062 [INFO] Skipping install syslog
2024/01/31 02:44:28.212066 [INFO] Skipping install cron
2024/01/31 02:44:28.212069 [INFO] Skipping install proxy
2024/01/31 02:44:28.212073 [INFO] Skipping installhealthd
2024/01/31 02:44:28.212077 [INFO] Skipping Install Log Streaming Manager
2024/01/31 02:44:28.212081 [INFO] Skipping install X-Ray
2024/01/31 02:44:28.212085 [INFO] Skipping install Third Party License
2024/01/31 02:44:28.212090 [INFO] Skipping installSqsd
2024/01/31 02:44:28.212097 [INFO] Skipping bootstraphealthd
2024/01/31 02:44:28.212101 [INFO] Skipping Install yum packages
2024/01/31 02:44:28.212105 [INFO] Skipping install docker-compose
2024/01/31 02:44:28.212109 [INFO] Skipping Configure Docker Daemon
2024/01/31 02:44:28.212113 [INFO] Skipping MarkBaked
2024/01/31 02:44:28.212117 [INFO] Skipping TuneSystemSettings
2024/01/31 02:44:28.212120 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 02:44:28.212122 [INFO] Initialize LogRotate files and directories
2024/01/31 02:44:28.227089 [INFO] Skipping BootstrapCFNHup
2024/01/31 02:44:28.227112 [INFO] Executing instruction: StartCFNHup
2024/01/31 02:44:28.227150 [INFO] Start cfn-hup
2024/01/31 02:44:28.227177 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 02:44:28.243010 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 02:44:28.256417 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 02:44:28.256455 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 02:44:28.256458 [INFO] Executing instruction: Start Docker
2024/01/31 02:44:28.256462 [INFO] Starting Docker...
2024/01/31 02:44:28.256594 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 02:44:28.257695 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 02:44:28.258879 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 02:44:28.692914 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 02:44:28.714845 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 02:44:28.714883 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 02:44:28.733313 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 02:44:28.743893 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 02:44:28.755473 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 02:44:28.864067 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 02:44:28.864118 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 02:44:29.244995 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 02:44:29.521469 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 02:44:29.534214 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 02:44:29.874473 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 02:44:29.884770 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 02:44:29.899259 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 02:44:29.908893 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 02:44:31.265442 [INFO] Skipping Setup Docker Options
2024/01/31 02:44:31.265541 [INFO] Skipping MarkBootstrapped
2024/01/31 02:44:31.265546 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 02:44:31.265669 [INFO] Starting SwitchCFNStack
2024/01/31 02:44:31.265676 [INFO] Executing instruction: stopSqsd
2024/01/31 02:44:31.265680 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 02:44:31.265684 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 02:44:31.265688 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 02:44:31.265707 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 02:44:31.790966 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 02:44:31.790992 [INFO] Executing instruction: StagedockerApplication
2024/01/31 02:44:31.791008 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 02:44:31.817587 [INFO] Pruning containers ...
2024/01/31 02:44:31.817617 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 02:44:31.838919 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
89205de3eac4   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             elegant_torvalds

2024/01/31 02:44:31.839338 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 02:44:31.873178 [INFO] Deleted Containers:
89205de3eac4bf5600599f91b44b3350bd7d23cc077970de2ee41bf73333efb3

Total reclaimed space: 0B

2024/01/31 02:44:31.873199 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 02:44:31.919034 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 02:44:31.919329 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 02:44:31.923761 [INFO] application/json

2024/01/31 02:44:31.923786 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 02:44:32.002517 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 02:44:32.002710 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 02:44:32.003996 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 02:44:32.004021 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 02:44:32.004039 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 02:44:32.004043 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 02:44:32.004049 [INFO] Executing instruction: Generate environment file
2024/01/31 02:44:32.004076 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 02:44:32.004079 [INFO] start build docker app
2024/01/31 02:44:32.004429 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 02:44:32.004433 [INFO] fetching image and ports
2024/01/31 02:44:32.006208 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 02:44:32.006261 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 02:44:32.006269 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 02:44:32.006280 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 02:44:32.926584 [INFO] Login Succeeded

2024/01/31 02:44:32.926599 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 02:44:32.926605 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 02:44:32.926622 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 02:44:33.066472 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 02:44:33.066497 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 02:44:33.066501 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 02:44:33.066505 [INFO] start to build docker image
2024/01/31 02:44:33.066522 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 02:44:33.321937 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 02:44:33.321973 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 02:44:33.321978 [INFO] successfully build docker image
2024/01/31 02:44:33.321981 [INFO] save staging docker image id
2024/01/31 02:44:33.321994 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 02:44:33.345253 [INFO] c176d18fbf65

2024/01/31 02:44:33.345495 [INFO] Executing instruction: configure X-Ray
2024/01/31 02:44:33.345502 [INFO] X-Ray is not enabled.
2024/01/31 02:44:33.345506 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 02:44:33.351477 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 02:44:33.353172 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 02:44:33.366140 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 02:44:33.366173 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 02:44:33.376476 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 02:44:33.384255 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 02:44:33.394100 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 02:44:33.479148 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 02:44:33.815770 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 02:44:33.815955 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 02:44:34.170264 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 02:44:34.185684 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 02:44:34.502005 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 02:44:34.512200 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 02:44:34.521980 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 02:44:34.849827 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 02:44:34.859293 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 02:44:35.200082 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 02:44:35.200117 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 02:44:35.213794 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 02:44:35.225009 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 02:44:35.316940 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 02:44:35.317888 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 02:44:35.318979 [INFO] Executing instruction: configure log streaming
2024/01/31 02:44:35.318988 [INFO] log streaming is not enabled
2024/01/31 02:44:35.318991 [INFO] disable log stream
2024/01/31 02:44:35.319008 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 02:44:35.357230 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 02:44:35.381453 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 02:44:35.381477 [INFO] Checking if logs need forced rotation
2024/01/31 02:44:35.381497 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 02:44:35.842626 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 02:44:36.416575 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 02:44:36.418306 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 02:44:36.909222 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 02:44:36.927027 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 02:44:36.927041 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 02:44:36.927052 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 02:44:37.356707 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 02:44:37.356893 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 02:44:37.356918 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 02:44:37.356921 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 02:44:37.357020 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 02:44:37.357034 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 02:44:37.357036 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 02:44:37.357042 [INFO] Executing instruction: stop X-Ray
2024/01/31 02:44:37.357045 [INFO] stop X-Ray ...
2024/01/31 02:44:37.357058 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 02:44:37.376824 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 02:44:37.376859 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 02:44:37.397398 [INFO] Executing instruction: Run Docker Container
2024/01/31 02:44:37.397432 [INFO] stop currently running containers...
2024/01/31 02:44:37.397444 [INFO] detected old app is not docker compose app
2024/01/31 02:44:37.397458 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 02:44:37.442391 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 02:44:37.465620 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 02:44:37.465661 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 02:44:37.480517 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 02:44:37.480551 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 02:44:37.495280 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 02:44:37.495328 [INFO] stopping current container: 89205de3eac4
2024/01/31 02:44:37.495341 [INFO] Running command /bin/sh -c docker ps | grep -q 89205de3eac4
2024/01/31 02:44:37.516301 [INFO] Running command /bin/sh -c docker ps | grep -q 89205de3eac4
2024/01/31 02:44:37.535908 [INFO] Pruning containers ...
2024/01/31 02:44:37.535936 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 02:44:37.557209 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 02:44:37.557242 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 02:44:37.575913 [INFO] Total reclaimed space: 0B

2024/01/31 02:44:37.575937 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 02:44:37.593982 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 02:44:37.594011 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 02:44:37.611953 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 02:44:37.611974 [INFO] Removing /var/app/current/ if it exists
2024/01/31 02:44:37.612062 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 02:44:37.612079 [INFO] detected new app is not docker compose app
2024/01/31 02:44:37.612129 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 02:44:37.993415 [INFO] a16968d69a867e3a486288b3c9cd71e8aa44dad2307ed67bc29426cd7058f1c7

2024/01/31 02:44:42.997814 [INFO] Running command /bin/sh -c docker ps | grep -q a16968d69a86
2024/01/31 02:44:43.024478 [ERROR] docker container quit unexpectedly on 2024-01-31 02:44:43.024462359 +0000 UTC: Command /bin/sh -c docker ps | grep -q a16968d69a86 failed with error exit status 1
2024/01/31 02:44:43.025388 [INFO] Running command /bin/sh -c docker logs a16968d69a86
2024/01/31 02:44:43.052003 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container a16968d69a86: Command /bin/sh -c docker ps | grep -q a16968d69a86 failed with error exit status 1 

2024/01/31 02:44:43.052016 [INFO] Executing cleanup logic
2024/01/31 02:44:43.052230 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 03:44:44.062075 [INFO] Starting...
2024/01/31 03:44:44.062117 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 03:44:44.062141 [INFO] reading event message file
2024/01/31 03:44:44.062906 [INFO] Engine received EB command userdata-exec

2024/01/31 03:44:44.076104 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 03:44:44.540036 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 03:44:45.036431 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 03:44:45.036529 [INFO] Engine command: (self-startup)

2024/01/31 03:44:45.036538 [INFO] Downloading EB Application...
2024/01/31 03:44:45.036543 [INFO] Region: eu-west-1
2024/01/31 03:44:45.036546 [INFO] envID: e-8gmkc7rmw6
2024/01/31 03:44:45.036549 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 03:44:45.036553 [INFO] Using manifest file name from command request
2024/01/31 03:44:45.037354 [INFO] Unable to get version manifest file.
2024/01/31 03:44:45.037364 [INFO] Downloading latest manifest available.
2024/01/31 03:44:45.037368 [INFO] Download latest app version manifest
2024/01/31 03:44:45.038633 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 03:44:45.086249 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 03:44:45.086428 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 03:44:45.096995 [INFO] Download successful124bytes downloaded
2024/01/31 03:44:45.097132 [INFO] Trying to read and parse version manifest...
2024/01/31 03:44:45.097202 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 03:44:45.189561 [INFO] Download successful264bytes downloaded
2024/01/31 03:44:45.190029 [INFO] Executing instruction: SyncClock
2024/01/31 03:44:45.190036 [INFO] Starting SyncClock
2024/01/31 03:44:45.190046 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 03:44:45.197805 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 03:44:36 2024
System time     : 0.000001915 seconds fast of NTP time
Last offset     : +0.000002132 seconds
RMS offset      : 0.000003536 seconds
Frequency       : 0.697 ppm fast
Residual freq   : +0.003 ppm
Skew            : 0.095 ppm
Root delay      : 0.000437314 seconds
Root dispersion : 0.000335955 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/31 03:44:45.197832 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 03:44:45.202010 [INFO] 200 OK

2024/01/31 03:44:45.202104 [INFO] Skipping Configure OS
2024/01/31 03:44:45.202109 [INFO] Skipping LockRepo
2024/01/31 03:44:45.202113 [INFO] Skipping GenerateEBBanner
2024/01/31 03:44:45.202118 [INFO] Skipping Install Process Manager
2024/01/31 03:44:45.202122 [INFO] Skipping install syslog
2024/01/31 03:44:45.202125 [INFO] Skipping install cron
2024/01/31 03:44:45.202129 [INFO] Skipping install proxy
2024/01/31 03:44:45.202133 [INFO] Skipping installhealthd
2024/01/31 03:44:45.202137 [INFO] Skipping Install Log Streaming Manager
2024/01/31 03:44:45.202141 [INFO] Skipping install X-Ray
2024/01/31 03:44:45.202145 [INFO] Skipping install Third Party License
2024/01/31 03:44:45.202149 [INFO] Skipping installSqsd
2024/01/31 03:44:45.202153 [INFO] Skipping bootstraphealthd
2024/01/31 03:44:45.202157 [INFO] Skipping Install yum packages
2024/01/31 03:44:45.202161 [INFO] Skipping install docker-compose
2024/01/31 03:44:45.202164 [INFO] Skipping Configure Docker Daemon
2024/01/31 03:44:45.202168 [INFO] Skipping MarkBaked
2024/01/31 03:44:45.202172 [INFO] Skipping TuneSystemSettings
2024/01/31 03:44:45.202174 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 03:44:45.202176 [INFO] Initialize LogRotate files and directories
2024/01/31 03:44:45.221661 [INFO] Skipping BootstrapCFNHup
2024/01/31 03:44:45.221671 [INFO] Executing instruction: StartCFNHup
2024/01/31 03:44:45.221674 [INFO] Start cfn-hup
2024/01/31 03:44:45.221691 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 03:44:45.235080 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 03:44:45.245642 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 03:44:45.245676 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 03:44:45.245680 [INFO] Executing instruction: Start Docker
2024/01/31 03:44:45.245683 [INFO] Starting Docker...
2024/01/31 03:44:45.245765 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 03:44:45.246783 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 03:44:45.247750 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 03:44:45.630488 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 03:44:45.645493 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 03:44:45.645530 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 03:44:45.656948 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 03:44:45.673002 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 03:44:45.701846 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 03:44:45.799852 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 03:44:45.799903 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 03:44:46.060366 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 03:44:46.390161 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 03:44:46.406253 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 03:44:46.773949 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 03:44:46.784566 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 03:44:46.800464 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 03:44:46.817322 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 03:44:47.929510 [INFO] Skipping Setup Docker Options
2024/01/31 03:44:47.929545 [INFO] Skipping MarkBootstrapped
2024/01/31 03:44:47.929550 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 03:44:47.929721 [INFO] Starting SwitchCFNStack
2024/01/31 03:44:47.929728 [INFO] Executing instruction: stopSqsd
2024/01/31 03:44:47.929732 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 03:44:47.929735 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 03:44:47.929738 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 03:44:47.929762 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 03:44:48.413391 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 03:44:48.413414 [INFO] Executing instruction: StagedockerApplication
2024/01/31 03:44:48.413449 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 03:44:48.438380 [INFO] Pruning containers ...
2024/01/31 03:44:48.438419 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 03:44:48.460607 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
a16968d69a86   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             clever_euclid

2024/01/31 03:44:48.460651 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 03:44:48.495965 [INFO] Deleted Containers:
a16968d69a867e3a486288b3c9cd71e8aa44dad2307ed67bc29426cd7058f1c7

Total reclaimed space: 0B

2024/01/31 03:44:48.495990 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 03:44:48.525837 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 03:44:48.526131 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 03:44:48.529014 [INFO] application/json

2024/01/31 03:44:48.529034 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 03:44:48.622960 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 03:44:48.623134 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 03:44:48.624405 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 03:44:48.624430 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 03:44:48.624448 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 03:44:48.624451 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 03:44:48.624455 [INFO] Executing instruction: Generate environment file
2024/01/31 03:44:48.624480 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 03:44:48.624484 [INFO] start build docker app
2024/01/31 03:44:48.624838 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 03:44:48.624843 [INFO] fetching image and ports
2024/01/31 03:44:48.632659 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 03:44:48.632757 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 03:44:48.632769 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 03:44:48.632783 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 03:44:49.641303 [INFO] Login Succeeded

2024/01/31 03:44:49.641320 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 03:44:49.641330 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 03:44:49.641424 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 03:44:49.804117 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 03:44:49.804143 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 03:44:49.804147 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 03:44:49.804149 [INFO] start to build docker image
2024/01/31 03:44:49.804166 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 03:44:50.067803 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 03:44:50.067834 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 03:44:50.067839 [INFO] successfully build docker image
2024/01/31 03:44:50.067841 [INFO] save staging docker image id
2024/01/31 03:44:50.067855 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 03:44:50.096993 [INFO] c176d18fbf65

2024/01/31 03:44:50.097124 [INFO] Executing instruction: configure X-Ray
2024/01/31 03:44:50.097131 [INFO] X-Ray is not enabled.
2024/01/31 03:44:50.097133 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 03:44:50.103135 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 03:44:50.109374 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 03:44:50.123718 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 03:44:50.123748 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 03:44:50.134168 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 03:44:50.144076 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 03:44:50.156303 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 03:44:50.245851 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 03:44:50.553030 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 03:44:50.553119 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 03:44:50.873820 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 03:44:50.885908 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 03:44:51.258303 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 03:44:51.274827 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 03:44:51.289525 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 03:44:51.571869 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 03:44:51.581641 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 03:44:51.844149 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 03:44:51.844247 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 03:44:51.856952 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 03:44:51.865488 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 03:44:51.937772 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 03:44:51.938577 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 03:44:51.939434 [INFO] Executing instruction: configure log streaming
2024/01/31 03:44:51.939444 [INFO] log streaming is not enabled
2024/01/31 03:44:51.939448 [INFO] disable log stream
2024/01/31 03:44:51.939463 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 03:44:51.962202 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 03:44:51.992034 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 03:44:51.992060 [INFO] Checking if logs need forced rotation
2024/01/31 03:44:51.992082 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 03:44:52.571493 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 03:44:53.056594 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 03:44:53.061482 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 03:44:53.110846 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 03:44:53.129225 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 03:44:53.129244 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 03:44:53.129255 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 03:44:53.582670 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 03:44:53.582696 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 03:44:53.582720 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 03:44:53.582724 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 03:44:53.582746 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 03:44:53.582759 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 03:44:53.582762 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 03:44:53.582767 [INFO] Executing instruction: stop X-Ray
2024/01/31 03:44:53.582771 [INFO] stop X-Ray ...
2024/01/31 03:44:53.582783 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 03:44:53.615949 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 03:44:53.615981 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 03:44:53.643197 [INFO] Executing instruction: Run Docker Container
2024/01/31 03:44:53.643229 [INFO] stop currently running containers...
2024/01/31 03:44:53.643269 [INFO] detected old app is not docker compose app
2024/01/31 03:44:53.643287 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 03:44:53.693937 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 03:44:53.711078 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 03:44:53.711111 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 03:44:53.725485 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 03:44:53.725527 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 03:44:53.740137 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 03:44:53.740300 [INFO] stopping current container: a16968d69a86
2024/01/31 03:44:53.740313 [INFO] Running command /bin/sh -c docker ps | grep -q a16968d69a86
2024/01/31 03:44:53.773130 [INFO] Running command /bin/sh -c docker ps | grep -q a16968d69a86
2024/01/31 03:44:53.809362 [INFO] Pruning containers ...
2024/01/31 03:44:53.809390 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 03:44:53.841818 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 03:44:53.841846 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 03:44:53.864065 [INFO] Total reclaimed space: 0B

2024/01/31 03:44:53.864104 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 03:44:53.892519 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 03:44:53.892557 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 03:44:53.915696 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 03:44:53.915727 [INFO] Removing /var/app/current/ if it exists
2024/01/31 03:44:53.915886 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 03:44:53.915911 [INFO] detected new app is not docker compose app
2024/01/31 03:44:53.915959 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 03:44:54.339857 [INFO] 5b4899042eed4c58e03cb190f392b51e16fdea69a52020652a8c36e246f86bbc

2024/01/31 03:44:59.342468 [INFO] Running command /bin/sh -c docker ps | grep -q 5b4899042eed
2024/01/31 03:44:59.367706 [ERROR] docker container quit unexpectedly on 2024-01-31 03:44:59.367692304 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5b4899042eed failed with error exit status 1
2024/01/31 03:44:59.367737 [INFO] Running command /bin/sh -c docker logs 5b4899042eed
2024/01/31 03:44:59.390105 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5b4899042eed: Command /bin/sh -c docker ps | grep -q 5b4899042eed failed with error exit status 1 

2024/01/31 03:44:59.390115 [INFO] Executing cleanup logic
2024/01/31 03:44:59.390306 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 04:45:00.484402 [INFO] Starting...
2024/01/31 04:45:00.484446 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 04:45:00.484474 [INFO] reading event message file
2024/01/31 04:45:00.485253 [INFO] Engine received EB command userdata-exec

2024/01/31 04:45:00.491782 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 04:45:00.910002 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 04:45:01.447512 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 04:45:01.447599 [INFO] Engine command: (self-startup)

2024/01/31 04:45:01.447623 [INFO] Downloading EB Application...
2024/01/31 04:45:01.447627 [INFO] Region: eu-west-1
2024/01/31 04:45:01.447630 [INFO] envID: e-8gmkc7rmw6
2024/01/31 04:45:01.447634 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 04:45:01.447637 [INFO] Using manifest file name from command request
2024/01/31 04:45:01.447655 [INFO] Unable to get version manifest file.
2024/01/31 04:45:01.447658 [INFO] Downloading latest manifest available.
2024/01/31 04:45:01.447661 [INFO] Download latest app version manifest
2024/01/31 04:45:01.447825 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 04:45:01.495459 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 04:45:01.495791 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 04:45:01.516117 [INFO] Download successful124bytes downloaded
2024/01/31 04:45:01.516281 [INFO] Trying to read and parse version manifest...
2024/01/31 04:45:01.516464 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 04:45:01.562058 [INFO] Download successful264bytes downloaded
2024/01/31 04:45:01.562618 [INFO] Executing instruction: SyncClock
2024/01/31 04:45:01.562624 [INFO] Starting SyncClock
2024/01/31 04:45:01.562633 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 04:45:01.574486 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 04:44:59 2024
System time     : 0.000001109 seconds slow of NTP time
Last offset     : -0.000000017 seconds
RMS offset      : 0.000002158 seconds
Frequency       : 0.749 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.033 ppm
Root delay      : 0.000414608 seconds
Root dispersion : 0.000299724 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/31 04:45:01.574523 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 04:45:01.581327 [INFO] 200 OK

2024/01/31 04:45:01.581460 [INFO] Skipping Configure OS
2024/01/31 04:45:01.581466 [INFO] Skipping LockRepo
2024/01/31 04:45:01.581470 [INFO] Skipping GenerateEBBanner
2024/01/31 04:45:01.581475 [INFO] Skipping Install Process Manager
2024/01/31 04:45:01.581479 [INFO] Skipping install syslog
2024/01/31 04:45:01.581483 [INFO] Skipping install cron
2024/01/31 04:45:01.581486 [INFO] Skipping install proxy
2024/01/31 04:45:01.581490 [INFO] Skipping installhealthd
2024/01/31 04:45:01.581494 [INFO] Skipping Install Log Streaming Manager
2024/01/31 04:45:01.581497 [INFO] Skipping install X-Ray
2024/01/31 04:45:01.581501 [INFO] Skipping install Third Party License
2024/01/31 04:45:01.581506 [INFO] Skipping installSqsd
2024/01/31 04:45:01.581510 [INFO] Skipping bootstraphealthd
2024/01/31 04:45:01.581513 [INFO] Skipping Install yum packages
2024/01/31 04:45:01.581517 [INFO] Skipping install docker-compose
2024/01/31 04:45:01.581523 [INFO] Skipping Configure Docker Daemon
2024/01/31 04:45:01.581527 [INFO] Skipping MarkBaked
2024/01/31 04:45:01.581534 [INFO] Skipping TuneSystemSettings
2024/01/31 04:45:01.581537 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 04:45:01.581539 [INFO] Initialize LogRotate files and directories
2024/01/31 04:45:01.600702 [INFO] Skipping BootstrapCFNHup
2024/01/31 04:45:01.600715 [INFO] Executing instruction: StartCFNHup
2024/01/31 04:45:01.600719 [INFO] Start cfn-hup
2024/01/31 04:45:01.600737 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 04:45:01.620976 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 04:45:01.630944 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 04:45:01.631094 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 04:45:01.631101 [INFO] Executing instruction: Start Docker
2024/01/31 04:45:01.631112 [INFO] Starting Docker...
2024/01/31 04:45:01.631228 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 04:45:01.632383 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 04:45:01.633625 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 04:45:01.956043 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 04:45:01.997433 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 04:45:01.997585 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 04:45:02.041177 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 04:45:02.052100 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 04:45:02.062899 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 04:45:02.192898 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 04:45:02.192939 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 04:45:02.614085 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 04:45:03.066835 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 04:45:03.080960 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 04:45:03.380721 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 04:45:03.389766 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 04:45:03.411046 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 04:45:03.435753 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 04:45:04.708299 [INFO] Skipping Setup Docker Options
2024/01/31 04:45:04.708320 [INFO] Skipping MarkBootstrapped
2024/01/31 04:45:04.708324 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 04:45:04.708435 [INFO] Starting SwitchCFNStack
2024/01/31 04:45:04.708440 [INFO] Executing instruction: stopSqsd
2024/01/31 04:45:04.708444 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 04:45:04.708447 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 04:45:04.708451 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 04:45:04.708468 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 04:45:05.220009 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 04:45:05.220060 [INFO] Executing instruction: StagedockerApplication
2024/01/31 04:45:05.220073 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 04:45:05.240803 [INFO] Pruning containers ...
2024/01/31 04:45:05.240833 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 04:45:05.264580 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
5b4899042eed   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             quizzical_mestorf

2024/01/31 04:45:05.264613 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 04:45:05.297851 [INFO] Deleted Containers:
5b4899042eed4c58e03cb190f392b51e16fdea69a52020652a8c36e246f86bbc

Total reclaimed space: 0B

2024/01/31 04:45:05.297877 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 04:45:05.326925 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 04:45:05.327186 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 04:45:05.330282 [INFO] application/json

2024/01/31 04:45:05.330299 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 04:45:05.407976 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 04:45:05.408140 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 04:45:05.409483 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 04:45:05.409508 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 04:45:05.409530 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 04:45:05.409532 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 04:45:05.409536 [INFO] Executing instruction: Generate environment file
2024/01/31 04:45:05.409564 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 04:45:05.409568 [INFO] start build docker app
2024/01/31 04:45:05.409966 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 04:45:05.409969 [INFO] fetching image and ports
2024/01/31 04:45:05.411792 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 04:45:05.411864 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 04:45:05.411873 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 04:45:05.411882 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 04:45:06.453837 [INFO] Login Succeeded

2024/01/31 04:45:06.453857 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 04:45:06.453863 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 04:45:06.453879 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 04:45:06.637497 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 04:45:06.637517 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 04:45:06.637525 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 04:45:06.637528 [INFO] start to build docker image
2024/01/31 04:45:06.637543 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 04:45:06.965689 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 04:45:06.965735 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 04:45:06.965741 [INFO] successfully build docker image
2024/01/31 04:45:06.965744 [INFO] save staging docker image id
2024/01/31 04:45:06.965758 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 04:45:07.018093 [INFO] c176d18fbf65

2024/01/31 04:45:07.018368 [INFO] Executing instruction: configure X-Ray
2024/01/31 04:45:07.018377 [INFO] X-Ray is not enabled.
2024/01/31 04:45:07.018380 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 04:45:07.024353 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 04:45:07.026183 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 04:45:07.042293 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 04:45:07.042323 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 04:45:07.055573 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 04:45:07.065539 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 04:45:07.077833 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 04:45:07.188994 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 04:45:07.576512 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 04:45:07.576578 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 04:45:08.003845 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 04:45:08.016432 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 04:45:08.366980 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 04:45:08.383208 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 04:45:08.395037 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 04:45:08.671016 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 04:45:08.683547 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 04:45:08.967726 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 04:45:08.967756 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 04:45:08.980541 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 04:45:08.988621 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 04:45:09.059030 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 04:45:09.059918 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 04:45:09.060858 [INFO] Executing instruction: configure log streaming
2024/01/31 04:45:09.060869 [INFO] log streaming is not enabled
2024/01/31 04:45:09.060873 [INFO] disable log stream
2024/01/31 04:45:09.060886 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 04:45:09.080538 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 04:45:09.103286 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 04:45:09.103310 [INFO] Checking if logs need forced rotation
2024/01/31 04:45:09.103328 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 04:45:09.653824 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 04:45:10.159168 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 04:45:10.161320 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 04:45:10.631899 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 04:45:10.653347 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 04:45:10.653364 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 04:45:10.653376 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 04:45:11.182814 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 04:45:11.182849 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 04:45:11.182877 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 04:45:11.182880 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 04:45:11.182904 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 04:45:11.182918 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 04:45:11.182921 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 04:45:11.182928 [INFO] Executing instruction: stop X-Ray
2024/01/31 04:45:11.182931 [INFO] stop X-Ray ...
2024/01/31 04:45:11.182943 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 04:45:11.197839 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 04:45:11.197873 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 04:45:11.212855 [INFO] Executing instruction: Run Docker Container
2024/01/31 04:45:11.212886 [INFO] stop currently running containers...
2024/01/31 04:45:11.212898 [INFO] detected old app is not docker compose app
2024/01/31 04:45:11.212913 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 04:45:11.252616 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 04:45:11.268356 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 04:45:11.268399 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 04:45:11.282498 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 04:45:11.282534 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 04:45:11.296265 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 04:45:11.296321 [INFO] stopping current container: 5b4899042eed
2024/01/31 04:45:11.296335 [INFO] Running command /bin/sh -c docker ps | grep -q 5b4899042eed
2024/01/31 04:45:11.321090 [INFO] Running command /bin/sh -c docker ps | grep -q 5b4899042eed
2024/01/31 04:45:11.343180 [INFO] Pruning containers ...
2024/01/31 04:45:11.343203 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 04:45:11.364524 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 04:45:11.364556 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 04:45:11.384271 [INFO] Total reclaimed space: 0B

2024/01/31 04:45:11.384299 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 04:45:11.407769 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 04:45:11.407796 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 04:45:11.450467 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 04:45:11.450493 [INFO] Removing /var/app/current/ if it exists
2024/01/31 04:45:11.451022 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 04:45:11.451047 [INFO] detected new app is not docker compose app
2024/01/31 04:45:11.451106 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 04:45:11.910845 [INFO] 07b75d05c83199d20c380dbaaf718b9a7da7f44024e8aac71a9bbd730ca13371

2024/01/31 04:45:16.911260 [INFO] Running command /bin/sh -c docker ps | grep -q 07b75d05c831
2024/01/31 04:45:16.934620 [ERROR] docker container quit unexpectedly on 2024-01-31 04:45:16.934602808 +0000 UTC: Command /bin/sh -c docker ps | grep -q 07b75d05c831 failed with error exit status 1
2024/01/31 04:45:16.934651 [INFO] Running command /bin/sh -c docker logs 07b75d05c831
2024/01/31 04:45:16.959507 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 07b75d05c831: Command /bin/sh -c docker ps | grep -q 07b75d05c831 failed with error exit status 1 

2024/01/31 04:45:16.959517 [INFO] Executing cleanup logic
2024/01/31 04:45:16.959834 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 05:45:18.065463 [INFO] Starting...
2024/01/31 05:45:18.065735 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 05:45:18.065769 [INFO] reading event message file
2024/01/31 05:45:18.066701 [INFO] Engine received EB command userdata-exec

2024/01/31 05:45:18.075725 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 05:45:18.621200 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 05:45:19.046136 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 05:45:19.046236 [INFO] Engine command: (self-startup)

2024/01/31 05:45:19.046244 [INFO] Downloading EB Application...
2024/01/31 05:45:19.046248 [INFO] Region: eu-west-1
2024/01/31 05:45:19.046251 [INFO] envID: e-8gmkc7rmw6
2024/01/31 05:45:19.046254 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 05:45:19.046258 [INFO] Using manifest file name from command request
2024/01/31 05:45:19.046270 [INFO] Unable to get version manifest file.
2024/01/31 05:45:19.046273 [INFO] Downloading latest manifest available.
2024/01/31 05:45:19.046275 [INFO] Download latest app version manifest
2024/01/31 05:45:19.046397 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 05:45:19.102908 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 05:45:19.103164 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 05:45:19.114680 [INFO] Download successful124bytes downloaded
2024/01/31 05:45:19.114816 [INFO] Trying to read and parse version manifest...
2024/01/31 05:45:19.114894 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 05:45:19.138755 [INFO] Download successful264bytes downloaded
2024/01/31 05:45:19.139066 [INFO] Executing instruction: SyncClock
2024/01/31 05:45:19.139072 [INFO] Starting SyncClock
2024/01/31 05:45:19.139084 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 05:45:19.144650 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 05:45:09 2024
System time     : 0.000002888 seconds fast of NTP time
Last offset     : +0.000003391 seconds
RMS offset      : 0.000005536 seconds
Frequency       : 0.654 ppm fast
Residual freq   : +0.005 ppm
Skew            : 0.167 ppm
Root delay      : 0.000406207 seconds
Root dispersion : 0.000334667 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/31 05:45:19.144682 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 05:45:19.148792 [INFO] 200 OK

2024/01/31 05:45:19.148886 [INFO] Skipping Configure OS
2024/01/31 05:45:19.148891 [INFO] Skipping LockRepo
2024/01/31 05:45:19.148895 [INFO] Skipping GenerateEBBanner
2024/01/31 05:45:19.148899 [INFO] Skipping Install Process Manager
2024/01/31 05:45:19.148903 [INFO] Skipping install syslog
2024/01/31 05:45:19.148907 [INFO] Skipping install cron
2024/01/31 05:45:19.148910 [INFO] Skipping install proxy
2024/01/31 05:45:19.148914 [INFO] Skipping installhealthd
2024/01/31 05:45:19.148918 [INFO] Skipping Install Log Streaming Manager
2024/01/31 05:45:19.148922 [INFO] Skipping install X-Ray
2024/01/31 05:45:19.148926 [INFO] Skipping install Third Party License
2024/01/31 05:45:19.148930 [INFO] Skipping installSqsd
2024/01/31 05:45:19.148934 [INFO] Skipping bootstraphealthd
2024/01/31 05:45:19.148938 [INFO] Skipping Install yum packages
2024/01/31 05:45:19.148942 [INFO] Skipping install docker-compose
2024/01/31 05:45:19.148945 [INFO] Skipping Configure Docker Daemon
2024/01/31 05:45:19.148951 [INFO] Skipping MarkBaked
2024/01/31 05:45:19.148955 [INFO] Skipping TuneSystemSettings
2024/01/31 05:45:19.148958 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 05:45:19.148960 [INFO] Initialize LogRotate files and directories
2024/01/31 05:45:19.161676 [INFO] Skipping BootstrapCFNHup
2024/01/31 05:45:19.161687 [INFO] Executing instruction: StartCFNHup
2024/01/31 05:45:19.161689 [INFO] Start cfn-hup
2024/01/31 05:45:19.161707 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 05:45:19.175035 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 05:45:19.184306 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 05:45:19.184345 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 05:45:19.184349 [INFO] Executing instruction: Start Docker
2024/01/31 05:45:19.184353 [INFO] Starting Docker...
2024/01/31 05:45:19.184434 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 05:45:19.185598 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 05:45:19.186748 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 05:45:19.672004 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 05:45:19.695169 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 05:45:19.695212 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 05:45:19.707060 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 05:45:19.717368 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 05:45:19.727782 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 05:45:19.825201 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 05:45:19.825266 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 05:45:20.128473 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 05:45:20.472353 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 05:45:20.490001 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 05:45:20.848447 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 05:45:20.861294 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 05:45:20.877413 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 05:45:20.886597 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 05:45:22.195896 [INFO] Skipping Setup Docker Options
2024/01/31 05:45:22.195920 [INFO] Skipping MarkBootstrapped
2024/01/31 05:45:22.195924 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 05:45:22.196257 [INFO] Starting SwitchCFNStack
2024/01/31 05:45:22.196266 [INFO] Executing instruction: stopSqsd
2024/01/31 05:45:22.196269 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 05:45:22.196273 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 05:45:22.196276 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 05:45:22.196301 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 05:45:22.676367 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 05:45:22.676402 [INFO] Executing instruction: StagedockerApplication
2024/01/31 05:45:22.676417 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 05:45:22.724050 [INFO] Pruning containers ...
2024/01/31 05:45:22.724191 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 05:45:22.754730 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
07b75d05c831   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             trusting_grothendieck

2024/01/31 05:45:22.754765 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 05:45:22.783830 [INFO] Deleted Containers:
07b75d05c83199d20c380dbaaf718b9a7da7f44024e8aac71a9bbd730ca13371

Total reclaimed space: 0B

2024/01/31 05:45:22.783854 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 05:45:22.802229 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 05:45:22.802443 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 05:45:22.805553 [INFO] application/json

2024/01/31 05:45:22.805572 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 05:45:22.888610 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 05:45:22.888789 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 05:45:22.890529 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 05:45:22.890556 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 05:45:22.890572 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 05:45:22.890575 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 05:45:22.890579 [INFO] Executing instruction: Generate environment file
2024/01/31 05:45:22.890612 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 05:45:22.890616 [INFO] start build docker app
2024/01/31 05:45:22.891833 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 05:45:22.891871 [INFO] fetching image and ports
2024/01/31 05:45:22.893453 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 05:45:22.893529 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 05:45:22.893539 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 05:45:22.893714 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 05:45:23.961423 [INFO] Login Succeeded

2024/01/31 05:45:23.961440 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 05:45:23.961446 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 05:45:23.961461 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 05:45:24.138571 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 05:45:24.138593 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 05:45:24.138597 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 05:45:24.138599 [INFO] start to build docker image
2024/01/31 05:45:24.138620 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 05:45:24.419374 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 05:45:24.419401 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 05:45:24.419405 [INFO] successfully build docker image
2024/01/31 05:45:24.419408 [INFO] save staging docker image id
2024/01/31 05:45:24.419421 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 05:45:24.447185 [INFO] c176d18fbf65

2024/01/31 05:45:24.447329 [INFO] Executing instruction: configure X-Ray
2024/01/31 05:45:24.447335 [INFO] X-Ray is not enabled.
2024/01/31 05:45:24.447338 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 05:45:24.453057 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 05:45:24.454576 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 05:45:24.469396 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 05:45:24.469434 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 05:45:24.479238 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 05:45:24.488464 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 05:45:24.497934 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 05:45:24.562000 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 05:45:24.883367 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 05:45:24.883445 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 05:45:25.355302 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 05:45:25.368495 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 05:45:25.715597 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 05:45:25.724986 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 05:45:25.734122 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 05:45:26.057008 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 05:45:26.068028 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 05:45:26.413765 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 05:45:26.413795 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 05:45:26.437672 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 05:45:26.447966 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 05:45:26.522119 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 05:45:26.523055 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 05:45:26.523977 [INFO] Executing instruction: configure log streaming
2024/01/31 05:45:26.523987 [INFO] log streaming is not enabled
2024/01/31 05:45:26.523995 [INFO] disable log stream
2024/01/31 05:45:26.524010 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 05:45:26.552305 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 05:45:26.598459 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 05:45:26.598482 [INFO] Checking if logs need forced rotation
2024/01/31 05:45:26.598502 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 05:45:27.206086 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 05:45:27.667181 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 05:45:27.669026 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 05:45:28.168249 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 05:45:28.184825 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 05:45:28.184840 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 05:45:28.184852 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 05:45:28.641051 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 05:45:28.641078 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 05:45:28.641106 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 05:45:28.641110 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 05:45:28.641134 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 05:45:28.641147 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 05:45:28.641150 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 05:45:28.641155 [INFO] Executing instruction: stop X-Ray
2024/01/31 05:45:28.641157 [INFO] stop X-Ray ...
2024/01/31 05:45:28.641166 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 05:45:28.657680 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 05:45:28.657715 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 05:45:28.676428 [INFO] Executing instruction: Run Docker Container
2024/01/31 05:45:28.676463 [INFO] stop currently running containers...
2024/01/31 05:45:28.676502 [INFO] detected old app is not docker compose app
2024/01/31 05:45:28.676517 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 05:45:28.732711 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 05:45:28.755332 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 05:45:28.755386 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 05:45:28.774921 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 05:45:28.774957 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 05:45:28.791519 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 05:45:28.791575 [INFO] stopping current container: 07b75d05c831
2024/01/31 05:45:28.791588 [INFO] Running command /bin/sh -c docker ps | grep -q 07b75d05c831
2024/01/31 05:45:28.810990 [INFO] Running command /bin/sh -c docker ps | grep -q 07b75d05c831
2024/01/31 05:45:28.830077 [INFO] Pruning containers ...
2024/01/31 05:45:28.830099 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 05:45:28.847893 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 05:45:28.847920 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 05:45:28.898040 [INFO] Total reclaimed space: 0B

2024/01/31 05:45:28.898077 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 05:45:28.930390 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 05:45:28.930420 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 05:45:28.951679 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 05:45:28.951704 [INFO] Removing /var/app/current/ if it exists
2024/01/31 05:45:28.951868 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 05:45:28.951886 [INFO] detected new app is not docker compose app
2024/01/31 05:45:28.951941 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 05:45:29.439488 [INFO] daec4f6adfc3b1f25fd6901a4332a3a368622329abe425acd6846fd8a5506658

2024/01/31 05:45:34.443916 [INFO] Running command /bin/sh -c docker ps | grep -q daec4f6adfc3
2024/01/31 05:45:34.465031 [ERROR] docker container quit unexpectedly on 2024-01-31 05:45:34.465013671 +0000 UTC: Command /bin/sh -c docker ps | grep -q daec4f6adfc3 failed with error exit status 1
2024/01/31 05:45:34.465311 [INFO] Running command /bin/sh -c docker logs daec4f6adfc3
2024/01/31 05:45:34.487348 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container daec4f6adfc3: Command /bin/sh -c docker ps | grep -q daec4f6adfc3 failed with error exit status 1 

2024/01/31 05:45:34.487359 [INFO] Executing cleanup logic
2024/01/31 05:45:34.487569 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 06:45:35.429121 [INFO] Starting...
2024/01/31 06:45:35.429165 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 06:45:35.429190 [INFO] reading event message file
2024/01/31 06:45:35.429863 [INFO] Engine received EB command userdata-exec

2024/01/31 06:45:35.435329 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 06:45:35.876154 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 06:45:36.411695 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 06:45:36.411788 [INFO] Engine command: (self-startup)

2024/01/31 06:45:36.411796 [INFO] Downloading EB Application...
2024/01/31 06:45:36.411799 [INFO] Region: eu-west-1
2024/01/31 06:45:36.411802 [INFO] envID: e-8gmkc7rmw6
2024/01/31 06:45:36.411805 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 06:45:36.411809 [INFO] Using manifest file name from command request
2024/01/31 06:45:36.411822 [INFO] Unable to get version manifest file.
2024/01/31 06:45:36.411825 [INFO] Downloading latest manifest available.
2024/01/31 06:45:36.411827 [INFO] Download latest app version manifest
2024/01/31 06:45:36.412070 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 06:45:36.464535 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 06:45:36.464717 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 06:45:36.481553 [INFO] Download successful124bytes downloaded
2024/01/31 06:45:36.481771 [INFO] Trying to read and parse version manifest...
2024/01/31 06:45:36.481865 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 06:45:36.506405 [INFO] Download successful264bytes downloaded
2024/01/31 06:45:36.506755 [INFO] Executing instruction: SyncClock
2024/01/31 06:45:36.506762 [INFO] Starting SyncClock
2024/01/31 06:45:36.506775 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 06:45:36.525685 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 06:45:34 2024
System time     : 0.000004572 seconds slow of NTP time
Last offset     : -0.000003968 seconds
RMS offset      : 0.000003535 seconds
Frequency       : 0.659 ppm fast
Residual freq   : -0.003 ppm
Skew            : 0.094 ppm
Root delay      : 0.000394762 seconds
Root dispersion : 0.000303213 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 06:45:36.525712 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 06:45:36.537743 [INFO] 200 OK

2024/01/31 06:45:36.537870 [INFO] Skipping Configure OS
2024/01/31 06:45:36.537877 [INFO] Skipping LockRepo
2024/01/31 06:45:36.537881 [INFO] Skipping GenerateEBBanner
2024/01/31 06:45:36.537885 [INFO] Skipping Install Process Manager
2024/01/31 06:45:36.537890 [INFO] Skipping install syslog
2024/01/31 06:45:36.537893 [INFO] Skipping install cron
2024/01/31 06:45:36.537898 [INFO] Skipping install proxy
2024/01/31 06:45:36.537901 [INFO] Skipping installhealthd
2024/01/31 06:45:36.537906 [INFO] Skipping Install Log Streaming Manager
2024/01/31 06:45:36.537912 [INFO] Skipping install X-Ray
2024/01/31 06:45:36.537917 [INFO] Skipping install Third Party License
2024/01/31 06:45:36.537924 [INFO] Skipping installSqsd
2024/01/31 06:45:36.537929 [INFO] Skipping bootstraphealthd
2024/01/31 06:45:36.537934 [INFO] Skipping Install yum packages
2024/01/31 06:45:36.537939 [INFO] Skipping install docker-compose
2024/01/31 06:45:36.538004 [INFO] Skipping Configure Docker Daemon
2024/01/31 06:45:36.538010 [INFO] Skipping MarkBaked
2024/01/31 06:45:36.538016 [INFO] Skipping TuneSystemSettings
2024/01/31 06:45:36.538088 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 06:45:36.538092 [INFO] Initialize LogRotate files and directories
2024/01/31 06:45:36.562093 [INFO] Skipping BootstrapCFNHup
2024/01/31 06:45:36.562105 [INFO] Executing instruction: StartCFNHup
2024/01/31 06:45:36.562108 [INFO] Start cfn-hup
2024/01/31 06:45:36.562124 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 06:45:36.583667 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 06:45:36.592017 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 06:45:36.592053 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 06:45:36.592058 [INFO] Executing instruction: Start Docker
2024/01/31 06:45:36.592061 [INFO] Starting Docker...
2024/01/31 06:45:36.592140 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 06:45:36.593236 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 06:45:36.594229 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 06:45:36.901388 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 06:45:36.918257 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 06:45:36.918339 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 06:45:36.930022 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 06:45:36.939402 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 06:45:36.951528 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 06:45:37.027456 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 06:45:37.027489 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 06:45:37.342590 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 06:45:37.666704 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 06:45:37.677957 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 06:45:38.055515 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 06:45:38.070184 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 06:45:38.085403 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 06:45:38.096295 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 06:45:39.330122 [INFO] Skipping Setup Docker Options
2024/01/31 06:45:39.330148 [INFO] Skipping MarkBootstrapped
2024/01/31 06:45:39.330152 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 06:45:39.330265 [INFO] Starting SwitchCFNStack
2024/01/31 06:45:39.330270 [INFO] Executing instruction: stopSqsd
2024/01/31 06:45:39.330274 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 06:45:39.330277 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 06:45:39.330281 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 06:45:39.330299 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 06:45:39.816770 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 06:45:39.816843 [INFO] Executing instruction: StagedockerApplication
2024/01/31 06:45:39.816859 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 06:45:39.843117 [INFO] Pruning containers ...
2024/01/31 06:45:39.843144 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 06:45:39.871580 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
daec4f6adfc3   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             affectionate_galileo

2024/01/31 06:45:39.871618 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 06:45:39.904564 [INFO] Deleted Containers:
daec4f6adfc3b1f25fd6901a4332a3a368622329abe425acd6846fd8a5506658

Total reclaimed space: 0B

2024/01/31 06:45:39.904612 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 06:45:39.932393 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 06:45:39.932663 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 06:45:39.935813 [INFO] application/json

2024/01/31 06:45:39.935833 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 06:45:40.022466 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/31 06:45:40.022649 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 06:45:40.025103 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 06:45:40.025144 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 06:45:40.025164 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 06:45:40.025168 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 06:45:40.025221 [INFO] Executing instruction: Generate environment file
2024/01/31 06:45:40.025271 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 06:45:40.025275 [INFO] start build docker app
2024/01/31 06:45:40.025796 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 06:45:40.025802 [INFO] fetching image and ports
2024/01/31 06:45:40.027498 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 06:45:40.027551 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 06:45:40.027560 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 06:45:40.027569 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 06:45:40.910140 [INFO] Login Succeeded

2024/01/31 06:45:40.910322 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 06:45:40.910330 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 06:45:40.910347 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 06:45:41.055697 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 06:45:41.055717 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 06:45:41.055720 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 06:45:41.055723 [INFO] start to build docker image
2024/01/31 06:45:41.055742 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 06:45:41.343943 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 06:45:41.344079 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 06:45:41.344112 [INFO] successfully build docker image
2024/01/31 06:45:41.344115 [INFO] save staging docker image id
2024/01/31 06:45:41.344127 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 06:45:41.379162 [INFO] c176d18fbf65

2024/01/31 06:45:41.379338 [INFO] Executing instruction: configure X-Ray
2024/01/31 06:45:41.379345 [INFO] X-Ray is not enabled.
2024/01/31 06:45:41.379349 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 06:45:41.387630 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 06:45:41.390011 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 06:45:41.402637 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 06:45:41.402670 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 06:45:41.412309 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 06:45:41.421867 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 06:45:41.431689 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 06:45:41.520534 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 06:45:41.926244 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 06:45:41.926846 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 06:45:42.243558 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 06:45:42.256106 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 06:45:42.574581 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 06:45:42.583837 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 06:45:42.592501 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 06:45:42.901805 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 06:45:42.914324 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 06:45:43.265384 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 06:45:43.265422 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 06:45:43.280326 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 06:45:43.288505 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 06:45:43.392627 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 06:45:43.393432 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 06:45:43.394776 [INFO] Executing instruction: configure log streaming
2024/01/31 06:45:43.394787 [INFO] log streaming is not enabled
2024/01/31 06:45:43.394791 [INFO] disable log stream
2024/01/31 06:45:43.394805 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 06:45:43.423607 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 06:45:43.450795 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 06:45:43.450820 [INFO] Checking if logs need forced rotation
2024/01/31 06:45:43.450844 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 06:45:44.031957 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 06:45:44.469117 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 06:45:44.472260 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 06:45:44.585896 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 06:45:44.605284 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 06:45:44.605301 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 06:45:44.605315 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 06:45:45.043157 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 06:45:45.043184 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 06:45:45.043206 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 06:45:45.043209 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 06:45:45.043230 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 06:45:45.043264 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 06:45:45.043268 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 06:45:45.043273 [INFO] Executing instruction: stop X-Ray
2024/01/31 06:45:45.043276 [INFO] stop X-Ray ...
2024/01/31 06:45:45.043287 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 06:45:45.060411 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 06:45:45.060460 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 06:45:45.078309 [INFO] Executing instruction: Run Docker Container
2024/01/31 06:45:45.078339 [INFO] stop currently running containers...
2024/01/31 06:45:45.078351 [INFO] detected old app is not docker compose app
2024/01/31 06:45:45.078364 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 06:45:45.152542 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 06:45:45.167557 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 06:45:45.167592 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 06:45:45.184256 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 06:45:45.184289 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 06:45:45.198332 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 06:45:45.198380 [INFO] stopping current container: daec4f6adfc3
2024/01/31 06:45:45.198392 [INFO] Running command /bin/sh -c docker ps | grep -q daec4f6adfc3
2024/01/31 06:45:45.221005 [INFO] Running command /bin/sh -c docker ps | grep -q daec4f6adfc3
2024/01/31 06:45:45.244324 [INFO] Pruning containers ...
2024/01/31 06:45:45.244347 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 06:45:45.264566 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 06:45:45.264598 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 06:45:45.283416 [INFO] Total reclaimed space: 0B

2024/01/31 06:45:45.283440 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 06:45:45.320946 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 06:45:45.320976 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 06:45:45.352754 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 06:45:45.352780 [INFO] Removing /var/app/current/ if it exists
2024/01/31 06:45:45.352914 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 06:45:45.352936 [INFO] detected new app is not docker compose app
2024/01/31 06:45:45.353011 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 06:45:45.745608 [INFO] c270ebf2a9c352f4a9095d4f193218bc8420b70f35449b388b14c6b401cc2272

2024/01/31 06:45:50.745970 [INFO] Running command /bin/sh -c docker ps | grep -q c270ebf2a9c3
2024/01/31 06:45:50.776146 [ERROR] docker container quit unexpectedly on 2024-01-31 06:45:50.776135802 +0000 UTC: Command /bin/sh -c docker ps | grep -q c270ebf2a9c3 failed with error exit status 1
2024/01/31 06:45:50.776188 [INFO] Running command /bin/sh -c docker logs c270ebf2a9c3
2024/01/31 06:45:50.801564 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c270ebf2a9c3: Command /bin/sh -c docker ps | grep -q c270ebf2a9c3 failed with error exit status 1 

2024/01/31 06:45:50.801574 [INFO] Executing cleanup logic
2024/01/31 06:45:50.801909 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 07:45:51.927922 [INFO] Starting...
2024/01/31 07:45:51.928019 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 07:45:51.928083 [INFO] reading event message file
2024/01/31 07:45:51.929268 [INFO] Engine received EB command userdata-exec

2024/01/31 07:45:51.942001 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 07:45:52.453516 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 07:45:52.889525 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 07:45:52.889620 [INFO] Engine command: (self-startup)

2024/01/31 07:45:52.889628 [INFO] Downloading EB Application...
2024/01/31 07:45:52.889632 [INFO] Region: eu-west-1
2024/01/31 07:45:52.889635 [INFO] envID: e-8gmkc7rmw6
2024/01/31 07:45:52.889638 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 07:45:52.889642 [INFO] Using manifest file name from command request
2024/01/31 07:45:52.889656 [INFO] Unable to get version manifest file.
2024/01/31 07:45:52.889659 [INFO] Downloading latest manifest available.
2024/01/31 07:45:52.889661 [INFO] Download latest app version manifest
2024/01/31 07:45:52.889788 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 07:45:52.934297 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 07:45:52.934471 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 07:45:52.947603 [INFO] Download successful124bytes downloaded
2024/01/31 07:45:52.947752 [INFO] Trying to read and parse version manifest...
2024/01/31 07:45:52.947826 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 07:45:52.976557 [INFO] Download successful264bytes downloaded
2024/01/31 07:45:52.976989 [INFO] Executing instruction: SyncClock
2024/01/31 07:45:52.976996 [INFO] Starting SyncClock
2024/01/31 07:45:52.977008 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 07:45:52.982424 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 07:45:42 2024
System time     : 0.000003953 seconds slow of NTP time
Last offset     : -0.000002847 seconds
RMS offset      : 0.000008625 seconds
Frequency       : 0.688 ppm fast
Residual freq   : -0.002 ppm
Skew            : 0.136 ppm
Root delay      : 0.000475264 seconds
Root dispersion : 0.000526821 seconds
Update interval : 32.3 seconds
Leap status     : Normal

2024/01/31 07:45:52.982459 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 07:45:52.986338 [INFO] 200 OK

2024/01/31 07:45:52.986516 [INFO] Skipping Configure OS
2024/01/31 07:45:52.986522 [INFO] Skipping LockRepo
2024/01/31 07:45:52.986526 [INFO] Skipping GenerateEBBanner
2024/01/31 07:45:52.986530 [INFO] Skipping Install Process Manager
2024/01/31 07:45:52.986534 [INFO] Skipping install syslog
2024/01/31 07:45:52.986538 [INFO] Skipping install cron
2024/01/31 07:45:52.986542 [INFO] Skipping install proxy
2024/01/31 07:45:52.986546 [INFO] Skipping installhealthd
2024/01/31 07:45:52.986687 [INFO] Skipping Install Log Streaming Manager
2024/01/31 07:45:52.986695 [INFO] Skipping install X-Ray
2024/01/31 07:45:52.986699 [INFO] Skipping install Third Party License
2024/01/31 07:45:52.986705 [INFO] Skipping installSqsd
2024/01/31 07:45:52.986709 [INFO] Skipping bootstraphealthd
2024/01/31 07:45:52.986712 [INFO] Skipping Install yum packages
2024/01/31 07:45:52.986716 [INFO] Skipping install docker-compose
2024/01/31 07:45:52.986720 [INFO] Skipping Configure Docker Daemon
2024/01/31 07:45:52.986724 [INFO] Skipping MarkBaked
2024/01/31 07:45:52.986728 [INFO] Skipping TuneSystemSettings
2024/01/31 07:45:52.986733 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 07:45:52.986736 [INFO] Initialize LogRotate files and directories
2024/01/31 07:45:53.002275 [INFO] Skipping BootstrapCFNHup
2024/01/31 07:45:53.002288 [INFO] Executing instruction: StartCFNHup
2024/01/31 07:45:53.002292 [INFO] Start cfn-hup
2024/01/31 07:45:53.002314 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 07:45:53.015766 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 07:45:53.024446 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 07:45:53.024478 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 07:45:53.024482 [INFO] Executing instruction: Start Docker
2024/01/31 07:45:53.024486 [INFO] Starting Docker...
2024/01/31 07:45:53.024577 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 07:45:53.025922 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 07:45:53.026915 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 07:45:53.430380 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 07:45:53.444228 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 07:45:53.444260 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 07:45:53.455425 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 07:45:53.466385 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 07:45:53.479405 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 07:45:53.512522 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 07:45:53.512545 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 07:45:53.869674 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 07:45:54.151822 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 07:45:54.163735 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 07:45:54.516160 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 07:45:54.530304 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 07:45:54.558034 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 07:45:54.572524 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 07:45:55.846841 [INFO] Skipping Setup Docker Options
2024/01/31 07:45:55.846863 [INFO] Skipping MarkBootstrapped
2024/01/31 07:45:55.846866 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 07:45:55.846957 [INFO] Starting SwitchCFNStack
2024/01/31 07:45:55.846961 [INFO] Executing instruction: stopSqsd
2024/01/31 07:45:55.846964 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 07:45:55.846966 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 07:45:55.846969 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 07:45:55.846983 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 07:45:56.272222 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 07:45:56.272306 [INFO] Executing instruction: StagedockerApplication
2024/01/31 07:45:56.272441 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 07:45:56.293947 [INFO] Pruning containers ...
2024/01/31 07:45:56.293976 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 07:45:56.315840 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c270ebf2a9c3   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             distracted_ardinghelli

2024/01/31 07:45:56.315908 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 07:45:56.367339 [INFO] Deleted Containers:
c270ebf2a9c352f4a9095d4f193218bc8420b70f35449b388b14c6b401cc2272

Total reclaimed space: 0B

2024/01/31 07:45:56.367372 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 07:45:56.387360 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 07:45:56.387610 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 07:45:56.390777 [INFO] application/json

2024/01/31 07:45:56.390794 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 07:45:56.488410 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 07:45:56.488592 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 07:45:56.490794 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 07:45:56.490827 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 07:45:56.490844 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 07:45:56.490846 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 07:45:56.490850 [INFO] Executing instruction: Generate environment file
2024/01/31 07:45:56.490877 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 07:45:56.490880 [INFO] start build docker app
2024/01/31 07:45:56.491287 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 07:45:56.491292 [INFO] fetching image and ports
2024/01/31 07:45:56.493110 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 07:45:56.493170 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 07:45:56.493179 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 07:45:56.493188 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 07:45:57.425002 [INFO] Login Succeeded

2024/01/31 07:45:57.425020 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 07:45:57.425025 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 07:45:57.425044 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 07:45:57.545658 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 07:45:57.545682 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 07:45:57.545686 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 07:45:57.545733 [INFO] start to build docker image
2024/01/31 07:45:57.545754 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 07:45:57.810512 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 07:45:57.810536 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 07:45:57.810545 [INFO] successfully build docker image
2024/01/31 07:45:57.810548 [INFO] save staging docker image id
2024/01/31 07:45:57.810598 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 07:45:57.832190 [INFO] c176d18fbf65

2024/01/31 07:45:57.832301 [INFO] Executing instruction: configure X-Ray
2024/01/31 07:45:57.832307 [INFO] X-Ray is not enabled.
2024/01/31 07:45:57.832310 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 07:45:57.837257 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 07:45:57.839087 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 07:45:57.851076 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 07:45:57.851105 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 07:45:57.861217 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 07:45:57.872057 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 07:45:57.887109 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 07:45:57.970242 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 07:45:58.307633 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 07:45:58.307710 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 07:45:58.646201 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 07:45:58.658255 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 07:45:59.006198 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 07:45:59.027524 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 07:45:59.046874 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 07:45:59.389029 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 07:45:59.400123 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 07:45:59.748678 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 07:45:59.748742 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 07:45:59.775557 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 07:45:59.792461 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 07:45:59.899381 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 07:45:59.900209 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 07:45:59.901225 [INFO] Executing instruction: configure log streaming
2024/01/31 07:45:59.901234 [INFO] log streaming is not enabled
2024/01/31 07:45:59.901236 [INFO] disable log stream
2024/01/31 07:45:59.901249 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 07:45:59.918298 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 07:45:59.941631 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 07:45:59.941656 [INFO] Checking if logs need forced rotation
2024/01/31 07:45:59.941721 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 07:46:00.500617 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 07:46:01.075283 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 07:46:01.077626 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 07:46:01.669688 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 07:46:01.692264 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 07:46:01.692294 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 07:46:01.692485 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 07:46:02.549883 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 07:46:02.549904 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 07:46:02.549932 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 07:46:02.549937 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 07:46:02.549959 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 07:46:02.549970 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 07:46:02.549973 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 07:46:02.549978 [INFO] Executing instruction: stop X-Ray
2024/01/31 07:46:02.549980 [INFO] stop X-Ray ...
2024/01/31 07:46:02.549991 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 07:46:02.564518 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 07:46:02.564554 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 07:46:02.582871 [INFO] Executing instruction: Run Docker Container
2024/01/31 07:46:02.582903 [INFO] stop currently running containers...
2024/01/31 07:46:02.582915 [INFO] detected old app is not docker compose app
2024/01/31 07:46:02.582930 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 07:46:02.633507 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 07:46:02.651167 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 07:46:02.651206 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 07:46:02.667251 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 07:46:02.667304 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 07:46:02.693084 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 07:46:02.693142 [INFO] stopping current container: c270ebf2a9c3
2024/01/31 07:46:02.693156 [INFO] Running command /bin/sh -c docker ps | grep -q c270ebf2a9c3
2024/01/31 07:46:02.717183 [INFO] Running command /bin/sh -c docker ps | grep -q c270ebf2a9c3
2024/01/31 07:46:02.737580 [INFO] Pruning containers ...
2024/01/31 07:46:02.737755 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 07:46:02.761551 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 07:46:02.761580 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 07:46:02.780566 [INFO] Total reclaimed space: 0B

2024/01/31 07:46:02.780594 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 07:46:02.809949 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 07:46:02.809992 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 07:46:02.842400 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 07:46:02.842427 [INFO] Removing /var/app/current/ if it exists
2024/01/31 07:46:02.842621 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 07:46:02.842649 [INFO] detected new app is not docker compose app
2024/01/31 07:46:02.842702 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 07:46:03.369249 [INFO] b1993c4a277eb2a370724356c465d2a22d2dd2375740097c508efd4093818f57

2024/01/31 07:46:08.371453 [INFO] Running command /bin/sh -c docker ps | grep -q b1993c4a277e
2024/01/31 07:46:08.407791 [ERROR] docker container quit unexpectedly on 2024-01-31 07:46:08.40777046 +0000 UTC: Command /bin/sh -c docker ps | grep -q b1993c4a277e failed with error exit status 1
2024/01/31 07:46:08.407822 [INFO] Running command /bin/sh -c docker logs b1993c4a277e
2024/01/31 07:46:08.429368 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b1993c4a277e: Command /bin/sh -c docker ps | grep -q b1993c4a277e failed with error exit status 1 

2024/01/31 07:46:08.429378 [INFO] Executing cleanup logic
2024/01/31 07:46:08.429750 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 08:46:09.375588 [INFO] Starting...
2024/01/31 08:46:09.375629 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 08:46:09.375652 [INFO] reading event message file
2024/01/31 08:46:09.376495 [INFO] Engine received EB command userdata-exec

2024/01/31 08:46:09.382418 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 08:46:09.720792 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 08:46:10.270651 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 08:46:10.270747 [INFO] Engine command: (self-startup)

2024/01/31 08:46:10.270753 [INFO] Downloading EB Application...
2024/01/31 08:46:10.270756 [INFO] Region: eu-west-1
2024/01/31 08:46:10.270758 [INFO] envID: e-8gmkc7rmw6
2024/01/31 08:46:10.270760 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 08:46:10.270763 [INFO] Using manifest file name from command request
2024/01/31 08:46:10.270776 [INFO] Unable to get version manifest file.
2024/01/31 08:46:10.270778 [INFO] Downloading latest manifest available.
2024/01/31 08:46:10.270780 [INFO] Download latest app version manifest
2024/01/31 08:46:10.270903 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 08:46:10.322913 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 08:46:10.323100 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 08:46:10.334201 [INFO] Download successful124bytes downloaded
2024/01/31 08:46:10.334353 [INFO] Trying to read and parse version manifest...
2024/01/31 08:46:10.334434 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 08:46:10.374906 [INFO] Download successful264bytes downloaded
2024/01/31 08:46:10.375296 [INFO] Executing instruction: SyncClock
2024/01/31 08:46:10.375302 [INFO] Starting SyncClock
2024/01/31 08:46:10.375312 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 08:46:10.380906 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 08:46:08 2024
System time     : 0.000004547 seconds slow of NTP time
Last offset     : -0.000004047 seconds
RMS offset      : 0.000005307 seconds
Frequency       : 0.517 ppm fast
Residual freq   : -0.006 ppm
Skew            : 0.131 ppm
Root delay      : 0.000440209 seconds
Root dispersion : 0.000289382 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 08:46:10.380926 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 08:46:10.385390 [INFO] 200 OK

2024/01/31 08:46:10.385482 [INFO] Skipping Configure OS
2024/01/31 08:46:10.385487 [INFO] Skipping LockRepo
2024/01/31 08:46:10.385491 [INFO] Skipping GenerateEBBanner
2024/01/31 08:46:10.385495 [INFO] Skipping Install Process Manager
2024/01/31 08:46:10.385500 [INFO] Skipping install syslog
2024/01/31 08:46:10.385503 [INFO] Skipping install cron
2024/01/31 08:46:10.385507 [INFO] Skipping install proxy
2024/01/31 08:46:10.385511 [INFO] Skipping installhealthd
2024/01/31 08:46:10.385515 [INFO] Skipping Install Log Streaming Manager
2024/01/31 08:46:10.385519 [INFO] Skipping install X-Ray
2024/01/31 08:46:10.385522 [INFO] Skipping install Third Party License
2024/01/31 08:46:10.385528 [INFO] Skipping installSqsd
2024/01/31 08:46:10.385531 [INFO] Skipping bootstraphealthd
2024/01/31 08:46:10.385535 [INFO] Skipping Install yum packages
2024/01/31 08:46:10.385539 [INFO] Skipping install docker-compose
2024/01/31 08:46:10.385545 [INFO] Skipping Configure Docker Daemon
2024/01/31 08:46:10.385548 [INFO] Skipping MarkBaked
2024/01/31 08:46:10.385552 [INFO] Skipping TuneSystemSettings
2024/01/31 08:46:10.385555 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 08:46:10.385557 [INFO] Initialize LogRotate files and directories
2024/01/31 08:46:10.398742 [INFO] Skipping BootstrapCFNHup
2024/01/31 08:46:10.398756 [INFO] Executing instruction: StartCFNHup
2024/01/31 08:46:10.398758 [INFO] Start cfn-hup
2024/01/31 08:46:10.398775 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 08:46:10.412572 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 08:46:10.420819 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 08:46:10.420843 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 08:46:10.420847 [INFO] Executing instruction: Start Docker
2024/01/31 08:46:10.420851 [INFO] Starting Docker...
2024/01/31 08:46:10.420934 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 08:46:10.422168 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 08:46:10.424033 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 08:46:10.881321 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 08:46:10.899885 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 08:46:10.899953 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 08:46:10.914713 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 08:46:10.925020 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 08:46:10.935780 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 08:46:11.009636 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 08:46:11.009727 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 08:46:11.311008 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 08:46:11.747693 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 08:46:11.772818 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 08:46:12.119530 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 08:46:12.129359 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 08:46:12.147524 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 08:46:12.157715 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 08:46:13.505230 [INFO] Skipping Setup Docker Options
2024/01/31 08:46:13.505251 [INFO] Skipping MarkBootstrapped
2024/01/31 08:46:13.505254 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 08:46:13.505366 [INFO] Starting SwitchCFNStack
2024/01/31 08:46:13.505371 [INFO] Executing instruction: stopSqsd
2024/01/31 08:46:13.505375 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 08:46:13.505378 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 08:46:13.505382 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 08:46:13.505397 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 08:46:13.980813 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 08:46:13.980840 [INFO] Executing instruction: StagedockerApplication
2024/01/31 08:46:13.980854 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 08:46:14.006764 [INFO] Pruning containers ...
2024/01/31 08:46:14.006793 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 08:46:14.025358 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b1993c4a277e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             interesting_goldberg

2024/01/31 08:46:14.025389 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 08:46:14.056176 [INFO] Deleted Containers:
b1993c4a277eb2a370724356c465d2a22d2dd2375740097c508efd4093818f57

Total reclaimed space: 0B

2024/01/31 08:46:14.056219 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 08:46:14.096204 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 08:46:14.096470 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 08:46:14.101287 [INFO] application/json

2024/01/31 08:46:14.101311 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 08:46:14.226299 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 08:46:14.226468 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 08:46:14.228149 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 08:46:14.228180 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 08:46:14.228196 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 08:46:14.228198 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 08:46:14.228207 [INFO] Executing instruction: Generate environment file
2024/01/31 08:46:14.228237 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 08:46:14.228241 [INFO] start build docker app
2024/01/31 08:46:14.228896 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 08:46:14.228955 [INFO] fetching image and ports
2024/01/31 08:46:14.232375 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 08:46:14.232659 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 08:46:14.232677 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 08:46:14.232708 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 08:46:15.275032 [INFO] Login Succeeded

2024/01/31 08:46:15.275053 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 08:46:15.275060 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 08:46:15.275076 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 08:46:15.414913 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 08:46:15.414933 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 08:46:15.414936 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 08:46:15.414939 [INFO] start to build docker image
2024/01/31 08:46:15.414955 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 08:46:15.685068 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 08:46:15.685100 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 08:46:15.685105 [INFO] successfully build docker image
2024/01/31 08:46:15.685107 [INFO] save staging docker image id
2024/01/31 08:46:15.685119 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 08:46:15.706207 [INFO] c176d18fbf65

2024/01/31 08:46:15.706478 [INFO] Executing instruction: configure X-Ray
2024/01/31 08:46:15.706484 [INFO] X-Ray is not enabled.
2024/01/31 08:46:15.706487 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 08:46:15.712659 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 08:46:15.714540 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 08:46:15.727155 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 08:46:15.727210 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 08:46:15.737551 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 08:46:15.746700 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 08:46:15.764499 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 08:46:15.839228 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 08:46:16.199649 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 08:46:16.199785 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 08:46:16.555185 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 08:46:16.570219 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 08:46:16.886599 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 08:46:16.896786 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 08:46:16.906353 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 08:46:17.321349 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 08:46:17.331224 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 08:46:17.667575 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 08:46:17.667617 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 08:46:17.684333 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 08:46:17.695295 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 08:46:17.787571 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 08:46:17.788504 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 08:46:17.789399 [INFO] Executing instruction: configure log streaming
2024/01/31 08:46:17.789408 [INFO] log streaming is not enabled
2024/01/31 08:46:17.789412 [INFO] disable log stream
2024/01/31 08:46:17.789426 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 08:46:17.814696 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 08:46:17.834716 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 08:46:17.834741 [INFO] Checking if logs need forced rotation
2024/01/31 08:46:17.834770 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 08:46:18.402777 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 08:46:18.869743 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 08:46:18.871652 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 08:46:19.422553 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 08:46:19.444702 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 08:46:19.444785 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 08:46:19.444803 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 08:46:19.885435 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 08:46:19.885458 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 08:46:19.885481 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 08:46:19.885484 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 08:46:19.885503 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 08:46:19.885514 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 08:46:19.885517 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 08:46:19.885522 [INFO] Executing instruction: stop X-Ray
2024/01/31 08:46:19.885524 [INFO] stop X-Ray ...
2024/01/31 08:46:19.885534 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 08:46:19.904000 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 08:46:19.904131 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 08:46:19.923576 [INFO] Executing instruction: Run Docker Container
2024/01/31 08:46:19.923603 [INFO] stop currently running containers...
2024/01/31 08:46:19.923613 [INFO] detected old app is not docker compose app
2024/01/31 08:46:19.923624 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 08:46:19.982634 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 08:46:20.012650 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 08:46:20.012687 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 08:46:20.040224 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 08:46:20.040256 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 08:46:20.066897 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 08:46:20.066950 [INFO] stopping current container: b1993c4a277e
2024/01/31 08:46:20.066964 [INFO] Running command /bin/sh -c docker ps | grep -q b1993c4a277e
2024/01/31 08:46:20.088830 [INFO] Running command /bin/sh -c docker ps | grep -q b1993c4a277e
2024/01/31 08:46:20.110099 [INFO] Pruning containers ...
2024/01/31 08:46:20.110127 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 08:46:20.128491 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 08:46:20.128525 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 08:46:20.153638 [INFO] Total reclaimed space: 0B

2024/01/31 08:46:20.153668 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 08:46:20.174620 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 08:46:20.174658 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 08:46:20.198236 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 08:46:20.198259 [INFO] Removing /var/app/current/ if it exists
2024/01/31 08:46:20.198359 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 08:46:20.198377 [INFO] detected new app is not docker compose app
2024/01/31 08:46:20.198489 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 08:46:20.666486 [INFO] 38d449079acd56edb98092bb71bcca750a35ac1057e70114947dd333389a56e4

2024/01/31 08:46:25.670880 [INFO] Running command /bin/sh -c docker ps | grep -q 38d449079acd
2024/01/31 08:46:25.690590 [ERROR] docker container quit unexpectedly on 2024-01-31 08:46:25.690572489 +0000 UTC: Command /bin/sh -c docker ps | grep -q 38d449079acd failed with error exit status 1
2024/01/31 08:46:25.690622 [INFO] Running command /bin/sh -c docker logs 38d449079acd
2024/01/31 08:46:25.710092 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 38d449079acd: Command /bin/sh -c docker ps | grep -q 38d449079acd failed with error exit status 1 

2024/01/31 08:46:25.710101 [INFO] Executing cleanup logic
2024/01/31 08:46:25.710370 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 09:46:26.636860 [INFO] Starting...
2024/01/31 09:46:26.636908 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 09:46:26.636982 [INFO] reading event message file
2024/01/31 09:46:26.641955 [INFO] Engine received EB command userdata-exec

2024/01/31 09:46:26.650252 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 09:46:27.078339 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 09:46:27.550484 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 09:46:27.550664 [INFO] Engine command: (self-startup)

2024/01/31 09:46:27.550672 [INFO] Downloading EB Application...
2024/01/31 09:46:27.550676 [INFO] Region: eu-west-1
2024/01/31 09:46:27.550679 [INFO] envID: e-8gmkc7rmw6
2024/01/31 09:46:27.550683 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 09:46:27.550686 [INFO] Using manifest file name from command request
2024/01/31 09:46:27.550700 [INFO] Unable to get version manifest file.
2024/01/31 09:46:27.550703 [INFO] Downloading latest manifest available.
2024/01/31 09:46:27.550706 [INFO] Download latest app version manifest
2024/01/31 09:46:27.550839 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 09:46:27.592036 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 09:46:27.592211 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 09:46:27.605334 [INFO] Download successful124bytes downloaded
2024/01/31 09:46:27.605570 [INFO] Trying to read and parse version manifest...
2024/01/31 09:46:27.605659 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 09:46:27.631251 [INFO] Download successful264bytes downloaded
2024/01/31 09:46:27.631593 [INFO] Executing instruction: SyncClock
2024/01/31 09:46:27.631600 [INFO] Starting SyncClock
2024/01/31 09:46:27.631610 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 09:46:27.637492 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 09:46:14 2024
System time     : 0.000001917 seconds fast of NTP time
Last offset     : +0.000002255 seconds
RMS offset      : 0.000004843 seconds
Frequency       : 0.887 ppm fast
Residual freq   : +0.002 ppm
Skew            : 0.187 ppm
Root delay      : 0.000404904 seconds
Root dispersion : 0.000297791 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 09:46:27.637516 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 09:46:27.641927 [INFO] 200 OK

2024/01/31 09:46:27.642227 [INFO] Skipping Configure OS
2024/01/31 09:46:27.642238 [INFO] Skipping LockRepo
2024/01/31 09:46:27.642242 [INFO] Skipping GenerateEBBanner
2024/01/31 09:46:27.642247 [INFO] Skipping Install Process Manager
2024/01/31 09:46:27.642250 [INFO] Skipping install syslog
2024/01/31 09:46:27.642254 [INFO] Skipping install cron
2024/01/31 09:46:27.642258 [INFO] Skipping install proxy
2024/01/31 09:46:27.642262 [INFO] Skipping installhealthd
2024/01/31 09:46:27.642266 [INFO] Skipping Install Log Streaming Manager
2024/01/31 09:46:27.642269 [INFO] Skipping install X-Ray
2024/01/31 09:46:27.642273 [INFO] Skipping install Third Party License
2024/01/31 09:46:27.642278 [INFO] Skipping installSqsd
2024/01/31 09:46:27.642283 [INFO] Skipping bootstraphealthd
2024/01/31 09:46:27.642287 [INFO] Skipping Install yum packages
2024/01/31 09:46:27.642293 [INFO] Skipping install docker-compose
2024/01/31 09:46:27.642297 [INFO] Skipping Configure Docker Daemon
2024/01/31 09:46:27.642301 [INFO] Skipping MarkBaked
2024/01/31 09:46:27.642305 [INFO] Skipping TuneSystemSettings
2024/01/31 09:46:27.642307 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 09:46:27.642310 [INFO] Initialize LogRotate files and directories
2024/01/31 09:46:27.656107 [INFO] Skipping BootstrapCFNHup
2024/01/31 09:46:27.656123 [INFO] Executing instruction: StartCFNHup
2024/01/31 09:46:27.656126 [INFO] Start cfn-hup
2024/01/31 09:46:27.656142 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 09:46:27.669101 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 09:46:27.677572 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 09:46:27.677605 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 09:46:27.677609 [INFO] Executing instruction: Start Docker
2024/01/31 09:46:27.677612 [INFO] Starting Docker...
2024/01/31 09:46:27.677692 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 09:46:27.678843 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 09:46:27.679844 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 09:46:28.152779 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 09:46:28.167818 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 09:46:28.167850 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 09:46:28.178261 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 09:46:28.187110 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 09:46:28.208079 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 09:46:28.289700 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 09:46:28.289802 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 09:46:28.646003 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 09:46:29.093599 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 09:46:29.105567 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 09:46:29.450649 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 09:46:29.460049 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 09:46:29.475415 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 09:46:29.484506 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 09:46:30.730794 [INFO] Skipping Setup Docker Options
2024/01/31 09:46:30.730820 [INFO] Skipping MarkBootstrapped
2024/01/31 09:46:30.730825 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 09:46:30.730939 [INFO] Starting SwitchCFNStack
2024/01/31 09:46:30.730945 [INFO] Executing instruction: stopSqsd
2024/01/31 09:46:30.730949 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 09:46:30.730952 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 09:46:30.730959 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 09:46:30.730975 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 09:46:31.242501 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 09:46:31.242524 [INFO] Executing instruction: StagedockerApplication
2024/01/31 09:46:31.242535 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 09:46:31.262875 [INFO] Pruning containers ...
2024/01/31 09:46:31.262904 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 09:46:31.288606 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
38d449079acd   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             upbeat_ritchie

2024/01/31 09:46:31.288638 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 09:46:31.337176 [INFO] Deleted Containers:
38d449079acd56edb98092bb71bcca750a35ac1057e70114947dd333389a56e4

Total reclaimed space: 0B

2024/01/31 09:46:31.337422 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 09:46:31.365234 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 09:46:31.365487 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 09:46:31.368835 [INFO] application/json

2024/01/31 09:46:31.368853 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 09:46:31.450424 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 09:46:31.450589 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 09:46:31.451969 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 09:46:31.451995 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 09:46:31.452013 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 09:46:31.452017 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 09:46:31.452022 [INFO] Executing instruction: Generate environment file
2024/01/31 09:46:31.452113 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 09:46:31.452118 [INFO] start build docker app
2024/01/31 09:46:31.452572 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 09:46:31.452576 [INFO] fetching image and ports
2024/01/31 09:46:31.455455 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 09:46:31.455522 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 09:46:31.455531 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 09:46:31.455611 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 09:46:32.297982 [INFO] Login Succeeded

2024/01/31 09:46:32.297999 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 09:46:32.298004 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 09:46:32.298062 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 09:46:32.470215 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 09:46:32.470953 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 09:46:32.470978 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 09:46:32.471017 [INFO] start to build docker image
2024/01/31 09:46:32.471041 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 09:46:32.758096 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 09:46:32.758122 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 09:46:32.758127 [INFO] successfully build docker image
2024/01/31 09:46:32.758129 [INFO] save staging docker image id
2024/01/31 09:46:32.758143 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 09:46:32.779797 [INFO] c176d18fbf65

2024/01/31 09:46:32.779920 [INFO] Executing instruction: configure X-Ray
2024/01/31 09:46:32.779927 [INFO] X-Ray is not enabled.
2024/01/31 09:46:32.779930 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 09:46:32.786878 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 09:46:32.789048 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 09:46:32.805164 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 09:46:32.805206 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 09:46:32.820390 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 09:46:32.829607 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 09:46:32.853872 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 09:46:32.949289 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 09:46:33.295706 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 09:46:33.295943 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 09:46:33.559877 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 09:46:33.571809 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 09:46:33.919713 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 09:46:33.933775 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 09:46:33.944425 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 09:46:34.264401 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 09:46:34.277340 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 09:46:34.605109 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 09:46:34.605151 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 09:46:34.617719 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 09:46:34.626512 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 09:46:34.734297 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 09:46:34.735213 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 09:46:34.736578 [INFO] Executing instruction: configure log streaming
2024/01/31 09:46:34.736589 [INFO] log streaming is not enabled
2024/01/31 09:46:34.736592 [INFO] disable log stream
2024/01/31 09:46:34.736607 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 09:46:34.759885 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 09:46:34.787248 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 09:46:34.787271 [INFO] Checking if logs need forced rotation
2024/01/31 09:46:34.787518 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 09:46:35.419329 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 09:46:35.867285 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 09:46:35.869263 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 09:46:36.381752 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 09:46:36.401725 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 09:46:36.401766 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 09:46:36.401777 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 09:46:36.840716 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 09:46:36.840740 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 09:46:36.840763 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 09:46:36.840766 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 09:46:36.840788 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 09:46:36.840808 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 09:46:36.840810 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 09:46:36.840815 [INFO] Executing instruction: stop X-Ray
2024/01/31 09:46:36.840818 [INFO] stop X-Ray ...
2024/01/31 09:46:36.840832 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 09:46:36.858639 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 09:46:36.858671 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 09:46:36.872710 [INFO] Executing instruction: Run Docker Container
2024/01/31 09:46:36.872764 [INFO] stop currently running containers...
2024/01/31 09:46:36.872774 [INFO] detected old app is not docker compose app
2024/01/31 09:46:36.872790 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 09:46:36.912503 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 09:46:36.931998 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 09:46:36.932031 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 09:46:36.947091 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 09:46:36.947123 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 09:46:36.961995 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 09:46:36.962044 [INFO] stopping current container: 38d449079acd
2024/01/31 09:46:36.962057 [INFO] Running command /bin/sh -c docker ps | grep -q 38d449079acd
2024/01/31 09:46:37.006781 [INFO] Running command /bin/sh -c docker ps | grep -q 38d449079acd
2024/01/31 09:46:37.030314 [INFO] Pruning containers ...
2024/01/31 09:46:37.030341 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 09:46:37.053366 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 09:46:37.053400 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 09:46:37.078716 [INFO] Total reclaimed space: 0B

2024/01/31 09:46:37.078741 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 09:46:37.102997 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 09:46:37.103031 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 09:46:37.124615 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 09:46:37.124637 [INFO] Removing /var/app/current/ if it exists
2024/01/31 09:46:37.124737 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 09:46:37.124755 [INFO] detected new app is not docker compose app
2024/01/31 09:46:37.124843 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 09:46:37.548148 [INFO] 559ea07afecf5b4c5167b412dcd1d4ba936abd2875b66017778b99aabcd4fb90

2024/01/31 09:46:42.551432 [INFO] Running command /bin/sh -c docker ps | grep -q 559ea07afecf
2024/01/31 09:46:42.577657 [ERROR] docker container quit unexpectedly on 2024-01-31 09:46:42.577646722 +0000 UTC: Command /bin/sh -c docker ps | grep -q 559ea07afecf failed with error exit status 1
2024/01/31 09:46:42.577684 [INFO] Running command /bin/sh -c docker logs 559ea07afecf
2024/01/31 09:46:42.602706 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 559ea07afecf: Command /bin/sh -c docker ps | grep -q 559ea07afecf failed with error exit status 1 

2024/01/31 09:46:42.602715 [INFO] Executing cleanup logic
2024/01/31 09:46:42.602939 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 10:46:43.565724 [INFO] Starting...
2024/01/31 10:46:43.565765 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 10:46:43.565794 [INFO] reading event message file
2024/01/31 10:46:43.566487 [INFO] Engine received EB command userdata-exec

2024/01/31 10:46:43.573137 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 10:46:43.991780 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 10:46:44.432906 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 10:46:44.433345 [INFO] Engine command: (self-startup)

2024/01/31 10:46:44.433467 [INFO] Downloading EB Application...
2024/01/31 10:46:44.433472 [INFO] Region: eu-west-1
2024/01/31 10:46:44.433475 [INFO] envID: e-8gmkc7rmw6
2024/01/31 10:46:44.433479 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 10:46:44.433482 [INFO] Using manifest file name from command request
2024/01/31 10:46:44.433495 [INFO] Unable to get version manifest file.
2024/01/31 10:46:44.433497 [INFO] Downloading latest manifest available.
2024/01/31 10:46:44.433499 [INFO] Download latest app version manifest
2024/01/31 10:46:44.433844 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 10:46:44.474307 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 10:46:44.474489 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 10:46:44.488756 [INFO] Download successful124bytes downloaded
2024/01/31 10:46:44.488941 [INFO] Trying to read and parse version manifest...
2024/01/31 10:46:44.489021 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 10:46:44.508071 [INFO] Download successful264bytes downloaded
2024/01/31 10:46:44.508692 [INFO] Executing instruction: SyncClock
2024/01/31 10:46:44.508698 [INFO] Starting SyncClock
2024/01/31 10:46:44.508708 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 10:46:44.514446 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 10:46:36 2024
System time     : 0.000000992 seconds slow of NTP time
Last offset     : -0.000000098 seconds
RMS offset      : 0.000001434 seconds
Frequency       : 0.649 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.018 ppm
Root delay      : 0.000413236 seconds
Root dispersion : 0.000281886 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 10:46:44.514469 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 10:46:44.519078 [INFO] 200 OK

2024/01/31 10:46:44.519166 [INFO] Skipping Configure OS
2024/01/31 10:46:44.519171 [INFO] Skipping LockRepo
2024/01/31 10:46:44.519175 [INFO] Skipping GenerateEBBanner
2024/01/31 10:46:44.519179 [INFO] Skipping Install Process Manager
2024/01/31 10:46:44.519183 [INFO] Skipping install syslog
2024/01/31 10:46:44.519187 [INFO] Skipping install cron
2024/01/31 10:46:44.519191 [INFO] Skipping install proxy
2024/01/31 10:46:44.519195 [INFO] Skipping installhealthd
2024/01/31 10:46:44.519198 [INFO] Skipping Install Log Streaming Manager
2024/01/31 10:46:44.519202 [INFO] Skipping install X-Ray
2024/01/31 10:46:44.519208 [INFO] Skipping install Third Party License
2024/01/31 10:46:44.519214 [INFO] Skipping installSqsd
2024/01/31 10:46:44.519218 [INFO] Skipping bootstraphealthd
2024/01/31 10:46:44.519222 [INFO] Skipping Install yum packages
2024/01/31 10:46:44.519226 [INFO] Skipping install docker-compose
2024/01/31 10:46:44.519230 [INFO] Skipping Configure Docker Daemon
2024/01/31 10:46:44.519235 [INFO] Skipping MarkBaked
2024/01/31 10:46:44.519239 [INFO] Skipping TuneSystemSettings
2024/01/31 10:46:44.519242 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 10:46:44.519244 [INFO] Initialize LogRotate files and directories
2024/01/31 10:46:44.538594 [INFO] Skipping BootstrapCFNHup
2024/01/31 10:46:44.538605 [INFO] Executing instruction: StartCFNHup
2024/01/31 10:46:44.538608 [INFO] Start cfn-hup
2024/01/31 10:46:44.538637 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 10:46:44.553893 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 10:46:44.563508 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 10:46:44.563661 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 10:46:44.563667 [INFO] Executing instruction: Start Docker
2024/01/31 10:46:44.563670 [INFO] Starting Docker...
2024/01/31 10:46:44.564552 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 10:46:44.566018 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 10:46:44.567204 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 10:46:44.881051 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 10:46:44.900452 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 10:46:44.900546 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 10:46:44.914925 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 10:46:44.924395 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 10:46:44.935696 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 10:46:45.006966 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 10:46:45.007028 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 10:46:45.384717 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 10:46:45.683421 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 10:46:45.703508 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 10:46:46.026574 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 10:46:46.049736 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 10:46:46.067799 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 10:46:46.076533 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 10:46:47.292201 [INFO] Skipping Setup Docker Options
2024/01/31 10:46:47.292225 [INFO] Skipping MarkBootstrapped
2024/01/31 10:46:47.292229 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 10:46:47.292348 [INFO] Starting SwitchCFNStack
2024/01/31 10:46:47.292354 [INFO] Executing instruction: stopSqsd
2024/01/31 10:46:47.292358 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 10:46:47.292361 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 10:46:47.292365 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 10:46:47.292388 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 10:46:47.739424 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 10:46:47.739451 [INFO] Executing instruction: StagedockerApplication
2024/01/31 10:46:47.739463 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 10:46:47.765828 [INFO] Pruning containers ...
2024/01/31 10:46:47.765856 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 10:46:47.796733 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
559ea07afecf   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             happy_hoover

2024/01/31 10:46:47.797090 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 10:46:47.831440 [INFO] Deleted Containers:
559ea07afecf5b4c5167b412dcd1d4ba936abd2875b66017778b99aabcd4fb90

Total reclaimed space: 0B

2024/01/31 10:46:47.831530 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 10:46:47.850187 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 10:46:47.850437 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 10:46:47.853220 [INFO] application/json

2024/01/31 10:46:47.853245 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 10:46:47.928763 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/31 10:46:47.929025 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 10:46:47.930655 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 10:46:47.930685 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 10:46:47.930701 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 10:46:47.930703 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 10:46:47.930707 [INFO] Executing instruction: Generate environment file
2024/01/31 10:46:47.930732 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 10:46:47.930736 [INFO] start build docker app
2024/01/31 10:46:47.931268 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 10:46:47.931274 [INFO] fetching image and ports
2024/01/31 10:46:47.933416 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 10:46:47.933472 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 10:46:47.933483 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 10:46:47.933494 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 10:46:49.037039 [INFO] Login Succeeded

2024/01/31 10:46:49.037056 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 10:46:49.037062 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 10:46:49.037079 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 10:46:49.183088 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 10:46:49.183115 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 10:46:49.183119 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 10:46:49.183122 [INFO] start to build docker image
2024/01/31 10:46:49.183141 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 10:46:49.461727 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 10:46:49.461754 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 10:46:49.461758 [INFO] successfully build docker image
2024/01/31 10:46:49.461760 [INFO] save staging docker image id
2024/01/31 10:46:49.461776 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 10:46:49.481494 [INFO] c176d18fbf65

2024/01/31 10:46:49.481612 [INFO] Executing instruction: configure X-Ray
2024/01/31 10:46:49.481620 [INFO] X-Ray is not enabled.
2024/01/31 10:46:49.481623 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 10:46:49.487276 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 10:46:49.488989 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 10:46:49.505795 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 10:46:49.505828 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 10:46:49.523890 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 10:46:49.533525 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 10:46:49.544671 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 10:46:49.614278 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 10:46:49.935834 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 10:46:49.935920 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 10:46:50.301736 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 10:46:50.317392 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 10:46:50.680511 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 10:46:50.689931 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 10:46:50.702103 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 10:46:51.043443 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 10:46:51.054358 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 10:46:51.376079 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 10:46:51.376115 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 10:46:51.388386 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 10:46:51.396762 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 10:46:51.488832 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 10:46:51.489685 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 10:46:51.490628 [INFO] Executing instruction: configure log streaming
2024/01/31 10:46:51.490637 [INFO] log streaming is not enabled
2024/01/31 10:46:51.490640 [INFO] disable log stream
2024/01/31 10:46:51.490656 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 10:46:51.513296 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 10:46:51.537002 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 10:46:51.537027 [INFO] Checking if logs need forced rotation
2024/01/31 10:46:51.537052 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 10:46:52.103360 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 10:46:52.518298 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 10:46:52.520273 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 10:46:52.926004 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 10:46:52.944725 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 10:46:52.944739 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 10:46:52.944751 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 10:46:53.466357 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 10:46:53.466384 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 10:46:53.466406 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 10:46:53.466409 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 10:46:53.466431 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 10:46:53.466445 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 10:46:53.466448 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 10:46:53.466454 [INFO] Executing instruction: stop X-Ray
2024/01/31 10:46:53.466457 [INFO] stop X-Ray ...
2024/01/31 10:46:53.466469 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 10:46:53.495706 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 10:46:53.495740 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 10:46:53.525263 [INFO] Executing instruction: Run Docker Container
2024/01/31 10:46:53.525297 [INFO] stop currently running containers...
2024/01/31 10:46:53.525385 [INFO] detected old app is not docker compose app
2024/01/31 10:46:53.525615 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 10:46:53.592384 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 10:46:53.607784 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 10:46:53.607814 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 10:46:53.620785 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 10:46:53.620812 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 10:46:53.633611 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 10:46:53.633658 [INFO] stopping current container: 559ea07afecf
2024/01/31 10:46:53.633668 [INFO] Running command /bin/sh -c docker ps | grep -q 559ea07afecf
2024/01/31 10:46:53.653084 [INFO] Running command /bin/sh -c docker ps | grep -q 559ea07afecf
2024/01/31 10:46:53.672780 [INFO] Pruning containers ...
2024/01/31 10:46:53.672809 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 10:46:53.693815 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 10:46:53.694938 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 10:46:53.713529 [INFO] Total reclaimed space: 0B

2024/01/31 10:46:53.713558 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 10:46:53.737276 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 10:46:53.737304 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 10:46:53.759898 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 10:46:53.759918 [INFO] Removing /var/app/current/ if it exists
2024/01/31 10:46:53.760006 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 10:46:53.760023 [INFO] detected new app is not docker compose app
2024/01/31 10:46:53.760070 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 10:46:54.274202 [INFO] c3ba7df087d821a6ce71cff7fe474c5f4fde70623b08b527b96503e2fa6b14be

2024/01/31 10:46:59.274648 [INFO] Running command /bin/sh -c docker ps | grep -q c3ba7df087d8
2024/01/31 10:46:59.301591 [ERROR] docker container quit unexpectedly on 2024-01-31 10:46:59.30157938 +0000 UTC: Command /bin/sh -c docker ps | grep -q c3ba7df087d8 failed with error exit status 1
2024/01/31 10:46:59.301625 [INFO] Running command /bin/sh -c docker logs c3ba7df087d8
2024/01/31 10:46:59.328946 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c3ba7df087d8: Command /bin/sh -c docker ps | grep -q c3ba7df087d8 failed with error exit status 1 

2024/01/31 10:46:59.328956 [INFO] Executing cleanup logic
2024/01/31 10:46:59.329180 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 11:47:00.453232 [INFO] Starting...
2024/01/31 11:47:00.453290 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 11:47:00.454174 [INFO] reading event message file
2024/01/31 11:47:00.455568 [INFO] Engine received EB command userdata-exec

2024/01/31 11:47:00.483977 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 11:47:00.911993 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 11:47:01.503822 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 11:47:01.503918 [INFO] Engine command: (self-startup)

2024/01/31 11:47:01.503926 [INFO] Downloading EB Application...
2024/01/31 11:47:01.503930 [INFO] Region: eu-west-1
2024/01/31 11:47:01.503933 [INFO] envID: e-8gmkc7rmw6
2024/01/31 11:47:01.503936 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 11:47:01.503940 [INFO] Using manifest file name from command request
2024/01/31 11:47:01.503958 [INFO] Unable to get version manifest file.
2024/01/31 11:47:01.503960 [INFO] Downloading latest manifest available.
2024/01/31 11:47:01.503963 [INFO] Download latest app version manifest
2024/01/31 11:47:01.504258 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 11:47:01.578588 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 11:47:01.578798 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 11:47:01.604844 [INFO] Download successful124bytes downloaded
2024/01/31 11:47:01.605010 [INFO] Trying to read and parse version manifest...
2024/01/31 11:47:01.605090 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 11:47:01.642646 [INFO] Download successful264bytes downloaded
2024/01/31 11:47:01.643090 [INFO] Executing instruction: SyncClock
2024/01/31 11:47:01.643096 [INFO] Starting SyncClock
2024/01/31 11:47:01.643105 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 11:47:01.654311 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 11:46:58 2024
System time     : 0.000002639 seconds fast of NTP time
Last offset     : +0.000001076 seconds
RMS offset      : 0.000001136 seconds
Frequency       : 0.515 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.026 ppm
Root delay      : 0.000408715 seconds
Root dispersion : 0.000500692 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/31 11:47:01.655539 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 11:47:01.666787 [INFO] 200 OK

2024/01/31 11:47:01.667447 [INFO] Skipping Configure OS
2024/01/31 11:47:01.667457 [INFO] Skipping LockRepo
2024/01/31 11:47:01.667462 [INFO] Skipping GenerateEBBanner
2024/01/31 11:47:01.667466 [INFO] Skipping Install Process Manager
2024/01/31 11:47:01.667471 [INFO] Skipping install syslog
2024/01/31 11:47:01.667475 [INFO] Skipping install cron
2024/01/31 11:47:01.667478 [INFO] Skipping install proxy
2024/01/31 11:47:01.667482 [INFO] Skipping installhealthd
2024/01/31 11:47:01.667486 [INFO] Skipping Install Log Streaming Manager
2024/01/31 11:47:01.667490 [INFO] Skipping install X-Ray
2024/01/31 11:47:01.667494 [INFO] Skipping install Third Party License
2024/01/31 11:47:01.667499 [INFO] Skipping installSqsd
2024/01/31 11:47:01.667503 [INFO] Skipping bootstraphealthd
2024/01/31 11:47:01.667507 [INFO] Skipping Install yum packages
2024/01/31 11:47:01.667510 [INFO] Skipping install docker-compose
2024/01/31 11:47:01.667514 [INFO] Skipping Configure Docker Daemon
2024/01/31 11:47:01.667518 [INFO] Skipping MarkBaked
2024/01/31 11:47:01.667521 [INFO] Skipping TuneSystemSettings
2024/01/31 11:47:01.667524 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 11:47:01.667527 [INFO] Initialize LogRotate files and directories
2024/01/31 11:47:01.683689 [INFO] Skipping BootstrapCFNHup
2024/01/31 11:47:01.683703 [INFO] Executing instruction: StartCFNHup
2024/01/31 11:47:01.683706 [INFO] Start cfn-hup
2024/01/31 11:47:01.683727 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 11:47:01.703946 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 11:47:01.720684 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 11:47:01.720721 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 11:47:01.720725 [INFO] Executing instruction: Start Docker
2024/01/31 11:47:01.720728 [INFO] Starting Docker...
2024/01/31 11:47:01.720812 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 11:47:01.722258 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 11:47:01.723501 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 11:47:02.154157 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 11:47:02.173734 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 11:47:02.173772 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 11:47:02.195187 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 11:47:02.207133 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 11:47:02.226006 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 11:47:02.321529 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 11:47:02.321561 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 11:47:02.741233 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 11:47:03.085437 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 11:47:03.102124 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 11:47:03.427163 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 11:47:03.443692 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 11:47:03.469908 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 11:47:03.486575 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 11:47:04.857858 [INFO] Skipping Setup Docker Options
2024/01/31 11:47:04.857873 [INFO] Skipping MarkBootstrapped
2024/01/31 11:47:04.857876 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 11:47:04.857963 [INFO] Starting SwitchCFNStack
2024/01/31 11:47:04.857967 [INFO] Executing instruction: stopSqsd
2024/01/31 11:47:04.857970 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 11:47:04.857972 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 11:47:04.857975 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 11:47:04.857992 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 11:47:05.294654 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 11:47:05.294681 [INFO] Executing instruction: StagedockerApplication
2024/01/31 11:47:05.294696 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 11:47:05.315577 [INFO] Pruning containers ...
2024/01/31 11:47:05.315611 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 11:47:05.335556 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c3ba7df087d8   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             unruffled_lumiere

2024/01/31 11:47:05.335588 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 11:47:05.362694 [INFO] Deleted Containers:
c3ba7df087d821a6ce71cff7fe474c5f4fde70623b08b527b96503e2fa6b14be

Total reclaimed space: 0B

2024/01/31 11:47:05.362718 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 11:47:05.402634 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 11:47:05.403686 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 11:47:05.413532 [INFO] application/json

2024/01/31 11:47:05.413561 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 11:47:05.512143 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 11:47:05.512347 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 11:47:05.513845 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 11:47:05.513878 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 11:47:05.513894 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 11:47:05.513898 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 11:47:05.513903 [INFO] Executing instruction: Generate environment file
2024/01/31 11:47:05.513934 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 11:47:05.513938 [INFO] start build docker app
2024/01/31 11:47:05.514510 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 11:47:05.514514 [INFO] fetching image and ports
2024/01/31 11:47:05.516778 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 11:47:05.516836 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 11:47:05.516851 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 11:47:05.516864 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 11:47:06.608237 [INFO] Login Succeeded

2024/01/31 11:47:06.608255 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 11:47:06.608260 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 11:47:06.608275 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 11:47:06.747824 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 11:47:06.747849 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 11:47:06.747853 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 11:47:06.747858 [INFO] start to build docker image
2024/01/31 11:47:06.747876 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 11:47:07.078495 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 11:47:07.078519 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 11:47:07.078524 [INFO] successfully build docker image
2024/01/31 11:47:07.078527 [INFO] save staging docker image id
2024/01/31 11:47:07.078540 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 11:47:07.127300 [INFO] c176d18fbf65

2024/01/31 11:47:07.128725 [INFO] Executing instruction: configure X-Ray
2024/01/31 11:47:07.128739 [INFO] X-Ray is not enabled.
2024/01/31 11:47:07.128831 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 11:47:07.136829 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 11:47:07.138669 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 11:47:07.153395 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 11:47:07.153425 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 11:47:07.167327 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 11:47:07.180066 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 11:47:07.198760 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 11:47:07.319004 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 11:47:07.662938 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 11:47:07.663148 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 11:47:07.951728 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 11:47:07.963427 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 11:47:08.292443 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 11:47:08.302607 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 11:47:08.312699 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 11:47:08.575655 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 11:47:08.591792 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 11:47:08.980496 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 11:47:08.980531 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 11:47:08.993784 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 11:47:09.005164 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 11:47:09.073907 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 11:47:09.074726 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 11:47:09.075616 [INFO] Executing instruction: configure log streaming
2024/01/31 11:47:09.075626 [INFO] log streaming is not enabled
2024/01/31 11:47:09.075630 [INFO] disable log stream
2024/01/31 11:47:09.075643 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 11:47:09.103959 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 11:47:09.134809 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 11:47:09.134833 [INFO] Checking if logs need forced rotation
2024/01/31 11:47:09.134857 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 11:47:09.734877 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 11:47:10.267709 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 11:47:10.269506 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 11:47:10.659407 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 11:47:10.676251 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 11:47:10.676267 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 11:47:10.676278 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 11:47:11.162266 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 11:47:11.162289 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 11:47:11.162319 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 11:47:11.162323 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 11:47:11.162346 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 11:47:11.162357 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 11:47:11.162360 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 11:47:11.162370 [INFO] Executing instruction: stop X-Ray
2024/01/31 11:47:11.162373 [INFO] stop X-Ray ...
2024/01/31 11:47:11.162624 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 11:47:11.193552 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 11:47:11.193586 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 11:47:11.212969 [INFO] Executing instruction: Run Docker Container
2024/01/31 11:47:11.213011 [INFO] stop currently running containers...
2024/01/31 11:47:11.213023 [INFO] detected old app is not docker compose app
2024/01/31 11:47:11.213043 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 11:47:11.292564 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 11:47:11.317855 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 11:47:11.317889 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 11:47:11.342900 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 11:47:11.342937 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 11:47:11.362335 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 11:47:11.362387 [INFO] stopping current container: c3ba7df087d8
2024/01/31 11:47:11.362400 [INFO] Running command /bin/sh -c docker ps | grep -q c3ba7df087d8
2024/01/31 11:47:11.391793 [INFO] Running command /bin/sh -c docker ps | grep -q c3ba7df087d8
2024/01/31 11:47:11.413173 [INFO] Pruning containers ...
2024/01/31 11:47:11.413197 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 11:47:11.431664 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 11:47:11.431695 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 11:47:11.452505 [INFO] Total reclaimed space: 0B

2024/01/31 11:47:11.452551 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 11:47:11.476235 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 11:47:11.476275 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 11:47:11.505572 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 11:47:11.505598 [INFO] Removing /var/app/current/ if it exists
2024/01/31 11:47:11.505711 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 11:47:11.505729 [INFO] detected new app is not docker compose app
2024/01/31 11:47:11.505788 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 11:47:11.960986 [INFO] 0888697abd4ea5ebff06c9e3d600e55183bcdf3076ea8bb99346700049bed073

2024/01/31 11:47:16.961487 [INFO] Running command /bin/sh -c docker ps | grep -q 0888697abd4e
2024/01/31 11:47:16.996691 [ERROR] docker container quit unexpectedly on 2024-01-31 11:47:16.996676759 +0000 UTC: Command /bin/sh -c docker ps | grep -q 0888697abd4e failed with error exit status 1
2024/01/31 11:47:16.996778 [INFO] Running command /bin/sh -c docker logs 0888697abd4e
2024/01/31 11:47:17.021939 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 0888697abd4e: Command /bin/sh -c docker ps | grep -q 0888697abd4e failed with error exit status 1 

2024/01/31 11:47:17.021948 [INFO] Executing cleanup logic
2024/01/31 11:47:17.022130 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 12:47:18.005322 [INFO] Starting...
2024/01/31 12:47:18.005368 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 12:47:18.005391 [INFO] reading event message file
2024/01/31 12:47:18.006357 [INFO] Engine received EB command userdata-exec

2024/01/31 12:47:18.011450 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 12:47:18.449591 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 12:47:18.959673 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 12:47:18.959754 [INFO] Engine command: (self-startup)

2024/01/31 12:47:18.959760 [INFO] Downloading EB Application...
2024/01/31 12:47:18.959763 [INFO] Region: eu-west-1
2024/01/31 12:47:18.959766 [INFO] envID: e-8gmkc7rmw6
2024/01/31 12:47:18.959769 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 12:47:18.959773 [INFO] Using manifest file name from command request
2024/01/31 12:47:18.959788 [INFO] Unable to get version manifest file.
2024/01/31 12:47:18.959791 [INFO] Downloading latest manifest available.
2024/01/31 12:47:18.959794 [INFO] Download latest app version manifest
2024/01/31 12:47:18.959915 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 12:47:19.004411 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 12:47:19.004656 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 12:47:19.016929 [INFO] Download successful124bytes downloaded
2024/01/31 12:47:19.017086 [INFO] Trying to read and parse version manifest...
2024/01/31 12:47:19.017162 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 12:47:19.044665 [INFO] Download successful264bytes downloaded
2024/01/31 12:47:19.048660 [INFO] Executing instruction: SyncClock
2024/01/31 12:47:19.048670 [INFO] Starting SyncClock
2024/01/31 12:47:19.048684 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 12:47:19.055552 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 12:47:04 2024
System time     : 0.000004350 seconds fast of NTP time
Last offset     : +0.000004858 seconds
RMS offset      : 0.000003961 seconds
Frequency       : 0.355 ppm fast
Residual freq   : +0.004 ppm
Skew            : 0.097 ppm
Root delay      : 0.000392719 seconds
Root dispersion : 0.000475957 seconds
Update interval : 48.3 seconds
Leap status     : Normal

2024/01/31 12:47:19.055578 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 12:47:19.060217 [INFO] 200 OK

2024/01/31 12:47:19.060314 [INFO] Skipping Configure OS
2024/01/31 12:47:19.060320 [INFO] Skipping LockRepo
2024/01/31 12:47:19.060324 [INFO] Skipping GenerateEBBanner
2024/01/31 12:47:19.060329 [INFO] Skipping Install Process Manager
2024/01/31 12:47:19.060332 [INFO] Skipping install syslog
2024/01/31 12:47:19.060336 [INFO] Skipping install cron
2024/01/31 12:47:19.060340 [INFO] Skipping install proxy
2024/01/31 12:47:19.060344 [INFO] Skipping installhealthd
2024/01/31 12:47:19.060347 [INFO] Skipping Install Log Streaming Manager
2024/01/31 12:47:19.060351 [INFO] Skipping install X-Ray
2024/01/31 12:47:19.060355 [INFO] Skipping install Third Party License
2024/01/31 12:47:19.060359 [INFO] Skipping installSqsd
2024/01/31 12:47:19.060366 [INFO] Skipping bootstraphealthd
2024/01/31 12:47:19.060370 [INFO] Skipping Install yum packages
2024/01/31 12:47:19.060375 [INFO] Skipping install docker-compose
2024/01/31 12:47:19.060379 [INFO] Skipping Configure Docker Daemon
2024/01/31 12:47:19.060382 [INFO] Skipping MarkBaked
2024/01/31 12:47:19.060386 [INFO] Skipping TuneSystemSettings
2024/01/31 12:47:19.060389 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 12:47:19.060391 [INFO] Initialize LogRotate files and directories
2024/01/31 12:47:19.076420 [INFO] Skipping BootstrapCFNHup
2024/01/31 12:47:19.076435 [INFO] Executing instruction: StartCFNHup
2024/01/31 12:47:19.076439 [INFO] Start cfn-hup
2024/01/31 12:47:19.076457 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 12:47:19.100054 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 12:47:19.111968 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 12:47:19.112129 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 12:47:19.112136 [INFO] Executing instruction: Start Docker
2024/01/31 12:47:19.112140 [INFO] Starting Docker...
2024/01/31 12:47:19.112191 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 12:47:19.113235 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 12:47:19.114163 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 12:47:19.402953 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 12:47:19.418297 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 12:47:19.418330 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 12:47:19.429935 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 12:47:19.439141 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 12:47:19.448977 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 12:47:19.481747 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 12:47:19.481791 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 12:47:19.830008 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 12:47:20.138425 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 12:47:20.159543 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 12:47:20.488575 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 12:47:20.504657 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 12:47:20.523890 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 12:47:20.536314 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 12:47:21.729807 [INFO] Skipping Setup Docker Options
2024/01/31 12:47:21.729835 [INFO] Skipping MarkBootstrapped
2024/01/31 12:47:21.729840 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 12:47:21.729958 [INFO] Starting SwitchCFNStack
2024/01/31 12:47:21.729963 [INFO] Executing instruction: stopSqsd
2024/01/31 12:47:21.729967 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 12:47:21.729970 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 12:47:21.729974 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 12:47:21.729991 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 12:47:22.214957 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 12:47:22.214980 [INFO] Executing instruction: StagedockerApplication
2024/01/31 12:47:22.214998 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 12:47:22.238334 [INFO] Pruning containers ...
2024/01/31 12:47:22.238369 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 12:47:22.262292 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
0888697abd4e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             jovial_sammet

2024/01/31 12:47:22.262339 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 12:47:22.298425 [INFO] Deleted Containers:
0888697abd4ea5ebff06c9e3d600e55183bcdf3076ea8bb99346700049bed073

Total reclaimed space: 0B

2024/01/31 12:47:22.298471 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 12:47:22.322437 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 12:47:22.322667 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 12:47:22.325870 [INFO] application/json

2024/01/31 12:47:22.325893 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 12:47:22.432945 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 12:47:22.433111 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 12:47:22.434494 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 12:47:22.434520 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 12:47:22.434539 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 12:47:22.434542 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 12:47:22.434546 [INFO] Executing instruction: Generate environment file
2024/01/31 12:47:22.434572 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 12:47:22.434575 [INFO] start build docker app
2024/01/31 12:47:22.434945 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 12:47:22.434949 [INFO] fetching image and ports
2024/01/31 12:47:22.436660 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 12:47:22.436730 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 12:47:22.436739 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 12:47:22.436753 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 12:47:23.511062 [INFO] Login Succeeded

2024/01/31 12:47:23.511084 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 12:47:23.511090 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 12:47:23.511112 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 12:47:23.701116 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 12:47:23.701140 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 12:47:23.701145 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 12:47:23.701149 [INFO] start to build docker image
2024/01/31 12:47:23.701167 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 12:47:24.010094 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 12:47:24.010119 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 12:47:24.010124 [INFO] successfully build docker image
2024/01/31 12:47:24.010127 [INFO] save staging docker image id
2024/01/31 12:47:24.010154 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 12:47:24.034836 [INFO] c176d18fbf65

2024/01/31 12:47:24.035047 [INFO] Executing instruction: configure X-Ray
2024/01/31 12:47:24.035055 [INFO] X-Ray is not enabled.
2024/01/31 12:47:24.035058 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 12:47:24.048715 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 12:47:24.050428 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 12:47:24.078186 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 12:47:24.078220 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 12:47:24.093625 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 12:47:24.109770 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 12:47:24.136488 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 12:47:24.239816 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 12:47:24.537717 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 12:47:24.537927 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 12:47:24.927779 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 12:47:24.939285 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 12:47:25.251605 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 12:47:25.260753 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 12:47:25.269853 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 12:47:25.592083 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 12:47:25.600725 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 12:47:25.943779 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 12:47:25.943856 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 12:47:25.958682 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 12:47:25.968719 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 12:47:26.031882 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 12:47:26.032821 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 12:47:26.033841 [INFO] Executing instruction: configure log streaming
2024/01/31 12:47:26.033852 [INFO] log streaming is not enabled
2024/01/31 12:47:26.033856 [INFO] disable log stream
2024/01/31 12:47:26.033870 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 12:47:26.053384 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 12:47:26.070411 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 12:47:26.070591 [INFO] Checking if logs need forced rotation
2024/01/31 12:47:26.070618 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 12:47:26.654377 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 12:47:27.177060 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 12:47:27.178875 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 12:47:27.671270 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 12:47:27.688602 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 12:47:27.688617 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 12:47:27.688639 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 12:47:28.085552 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 12:47:28.085667 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 12:47:28.085693 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 12:47:28.085695 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 12:47:28.085720 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 12:47:28.085731 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 12:47:28.085733 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 12:47:28.085738 [INFO] Executing instruction: stop X-Ray
2024/01/31 12:47:28.085740 [INFO] stop X-Ray ...
2024/01/31 12:47:28.085752 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 12:47:28.104761 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 12:47:28.104793 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 12:47:28.127375 [INFO] Executing instruction: Run Docker Container
2024/01/31 12:47:28.127405 [INFO] stop currently running containers...
2024/01/31 12:47:28.127415 [INFO] detected old app is not docker compose app
2024/01/31 12:47:28.127428 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 12:47:28.202393 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 12:47:28.217808 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 12:47:28.217847 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 12:47:28.232942 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 12:47:28.232978 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 12:47:28.247602 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 12:47:28.247655 [INFO] stopping current container: 0888697abd4e
2024/01/31 12:47:28.247667 [INFO] Running command /bin/sh -c docker ps | grep -q 0888697abd4e
2024/01/31 12:47:28.289964 [INFO] Running command /bin/sh -c docker ps | grep -q 0888697abd4e
2024/01/31 12:47:28.311468 [INFO] Pruning containers ...
2024/01/31 12:47:28.311492 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 12:47:28.331343 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 12:47:28.331395 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 12:47:28.350113 [INFO] Total reclaimed space: 0B

2024/01/31 12:47:28.350146 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 12:47:28.369184 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 12:47:28.369217 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 12:47:28.393882 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 12:47:28.393903 [INFO] Removing /var/app/current/ if it exists
2024/01/31 12:47:28.394003 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 12:47:28.394021 [INFO] detected new app is not docker compose app
2024/01/31 12:47:28.394078 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 12:47:28.828716 [INFO] ff68c3032a626ffddd8f8564f84108012ddc6a16a717b6993feb99a8ab816ca9

2024/01/31 12:47:33.833075 [INFO] Running command /bin/sh -c docker ps | grep -q ff68c3032a62
2024/01/31 12:47:33.855068 [ERROR] docker container quit unexpectedly on 2024-01-31 12:47:33.855044169 +0000 UTC: Command /bin/sh -c docker ps | grep -q ff68c3032a62 failed with error exit status 1
2024/01/31 12:47:33.855097 [INFO] Running command /bin/sh -c docker logs ff68c3032a62
2024/01/31 12:47:33.885975 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container ff68c3032a62: Command /bin/sh -c docker ps | grep -q ff68c3032a62 failed with error exit status 1 

2024/01/31 12:47:33.885986 [INFO] Executing cleanup logic
2024/01/31 12:47:33.886218 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 13:47:34.939631 [INFO] Starting...
2024/01/31 13:47:34.939674 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 13:47:34.939701 [INFO] reading event message file
2024/01/31 13:47:34.940390 [INFO] Engine received EB command userdata-exec

2024/01/31 13:47:34.957591 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 13:47:35.365417 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 13:47:35.835157 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 13:47:35.835490 [INFO] Engine command: (self-startup)

2024/01/31 13:47:35.835508 [INFO] Downloading EB Application...
2024/01/31 13:47:35.835512 [INFO] Region: eu-west-1
2024/01/31 13:47:35.835515 [INFO] envID: e-8gmkc7rmw6
2024/01/31 13:47:35.835519 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 13:47:35.835522 [INFO] Using manifest file name from command request
2024/01/31 13:47:35.835539 [INFO] Unable to get version manifest file.
2024/01/31 13:47:35.835547 [INFO] Downloading latest manifest available.
2024/01/31 13:47:35.835560 [INFO] Download latest app version manifest
2024/01/31 13:47:35.835700 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 13:47:35.909178 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 13:47:35.909357 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 13:47:35.921684 [INFO] Download successful124bytes downloaded
2024/01/31 13:47:35.921827 [INFO] Trying to read and parse version manifest...
2024/01/31 13:47:35.921907 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 13:47:35.963394 [INFO] Download successful264bytes downloaded
2024/01/31 13:47:35.963707 [INFO] Executing instruction: SyncClock
2024/01/31 13:47:35.963712 [INFO] Starting SyncClock
2024/01/31 13:47:35.963727 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 13:47:35.969348 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 13:47:29 2024
System time     : 0.000005648 seconds fast of NTP time
Last offset     : +0.000006693 seconds
RMS offset      : 0.000005702 seconds
Frequency       : 0.298 ppm fast
Residual freq   : +0.009 ppm
Skew            : 0.240 ppm
Root delay      : 0.000449056 seconds
Root dispersion : 0.000460103 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 13:47:35.969366 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 13:47:35.973747 [INFO] 200 OK

2024/01/31 13:47:35.973843 [INFO] Skipping Configure OS
2024/01/31 13:47:35.973848 [INFO] Skipping LockRepo
2024/01/31 13:47:35.973855 [INFO] Skipping GenerateEBBanner
2024/01/31 13:47:35.973859 [INFO] Skipping Install Process Manager
2024/01/31 13:47:35.973863 [INFO] Skipping install syslog
2024/01/31 13:47:35.973867 [INFO] Skipping install cron
2024/01/31 13:47:35.973871 [INFO] Skipping install proxy
2024/01/31 13:47:35.973875 [INFO] Skipping installhealthd
2024/01/31 13:47:35.973879 [INFO] Skipping Install Log Streaming Manager
2024/01/31 13:47:35.973883 [INFO] Skipping install X-Ray
2024/01/31 13:47:35.973886 [INFO] Skipping install Third Party License
2024/01/31 13:47:35.973893 [INFO] Skipping installSqsd
2024/01/31 13:47:35.973897 [INFO] Skipping bootstraphealthd
2024/01/31 13:47:35.973901 [INFO] Skipping Install yum packages
2024/01/31 13:47:35.973905 [INFO] Skipping install docker-compose
2024/01/31 13:47:35.973909 [INFO] Skipping Configure Docker Daemon
2024/01/31 13:47:35.973913 [INFO] Skipping MarkBaked
2024/01/31 13:47:35.973920 [INFO] Skipping TuneSystemSettings
2024/01/31 13:47:35.973923 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 13:47:35.973925 [INFO] Initialize LogRotate files and directories
2024/01/31 13:47:35.989026 [INFO] Skipping BootstrapCFNHup
2024/01/31 13:47:35.989036 [INFO] Executing instruction: StartCFNHup
2024/01/31 13:47:35.989040 [INFO] Start cfn-hup
2024/01/31 13:47:35.989058 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 13:47:36.005273 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 13:47:36.014734 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 13:47:36.014759 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 13:47:36.014764 [INFO] Executing instruction: Start Docker
2024/01/31 13:47:36.014767 [INFO] Starting Docker...
2024/01/31 13:47:36.014850 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 13:47:36.015978 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 13:47:36.017230 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 13:47:36.452854 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 13:47:36.469881 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 13:47:36.469915 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 13:47:36.480662 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 13:47:36.490165 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 13:47:36.503957 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 13:47:36.587761 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 13:47:36.587828 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 13:47:36.910003 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 13:47:37.192330 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 13:47:37.204299 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 13:47:37.567795 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 13:47:37.579943 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 13:47:37.598318 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 13:47:37.610408 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 13:47:39.023652 [INFO] Skipping Setup Docker Options
2024/01/31 13:47:39.023677 [INFO] Skipping MarkBootstrapped
2024/01/31 13:47:39.023682 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 13:47:39.023795 [INFO] Starting SwitchCFNStack
2024/01/31 13:47:39.023800 [INFO] Executing instruction: stopSqsd
2024/01/31 13:47:39.023805 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 13:47:39.023808 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 13:47:39.023812 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 13:47:39.023833 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 13:47:39.430639 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 13:47:39.430663 [INFO] Executing instruction: StagedockerApplication
2024/01/31 13:47:39.430675 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 13:47:39.447398 [INFO] Pruning containers ...
2024/01/31 13:47:39.447427 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 13:47:39.465921 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
ff68c3032a62   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             optimistic_carson

2024/01/31 13:47:39.465950 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 13:47:39.490110 [INFO] Deleted Containers:
ff68c3032a626ffddd8f8564f84108012ddc6a16a717b6993feb99a8ab816ca9

Total reclaimed space: 0B

2024/01/31 13:47:39.490137 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 13:47:39.525931 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 13:47:39.526154 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 13:47:39.532676 [INFO] application/json

2024/01/31 13:47:39.532726 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 13:47:39.620505 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 13:47:39.620672 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 13:47:39.621911 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 13:47:39.621944 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 13:47:39.622111 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 13:47:39.622115 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 13:47:39.622121 [INFO] Executing instruction: Generate environment file
2024/01/31 13:47:39.622151 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 13:47:39.622155 [INFO] start build docker app
2024/01/31 13:47:39.622974 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 13:47:39.622979 [INFO] fetching image and ports
2024/01/31 13:47:39.624557 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 13:47:39.624622 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 13:47:39.624630 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 13:47:39.624640 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 13:47:40.685828 [INFO] Login Succeeded

2024/01/31 13:47:40.685894 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 13:47:40.685901 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 13:47:40.685917 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 13:47:40.824990 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 13:47:40.825013 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 13:47:40.825016 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 13:47:40.825019 [INFO] start to build docker image
2024/01/31 13:47:40.825035 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 13:47:41.068989 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 13:47:41.069028 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 13:47:41.069032 [INFO] successfully build docker image
2024/01/31 13:47:41.069034 [INFO] save staging docker image id
2024/01/31 13:47:41.069049 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 13:47:41.093560 [INFO] c176d18fbf65

2024/01/31 13:47:41.093692 [INFO] Executing instruction: configure X-Ray
2024/01/31 13:47:41.093699 [INFO] X-Ray is not enabled.
2024/01/31 13:47:41.093704 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 13:47:41.099687 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 13:47:41.101228 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 13:47:41.112900 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 13:47:41.112931 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 13:47:41.124139 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 13:47:41.136393 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 13:47:41.147251 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 13:47:41.213201 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 13:47:41.540419 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 13:47:41.540481 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 13:47:41.837233 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 13:47:41.858451 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 13:47:42.168087 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 13:47:42.180226 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 13:47:42.192436 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 13:47:42.565401 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 13:47:42.579422 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 13:47:42.906211 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 13:47:42.906246 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 13:47:42.918718 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 13:47:42.927491 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 13:47:43.006728 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 13:47:43.007790 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 13:47:43.008831 [INFO] Executing instruction: configure log streaming
2024/01/31 13:47:43.008840 [INFO] log streaming is not enabled
2024/01/31 13:47:43.008843 [INFO] disable log stream
2024/01/31 13:47:43.008855 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 13:47:43.047884 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 13:47:43.081715 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 13:47:43.081742 [INFO] Checking if logs need forced rotation
2024/01/31 13:47:43.081764 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 13:47:43.626768 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 13:47:44.100280 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 13:47:44.103117 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 13:47:44.673112 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 13:47:44.692014 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 13:47:44.692035 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 13:47:44.692050 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 13:47:45.095311 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 13:47:45.095346 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 13:47:45.095372 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 13:47:45.095376 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 13:47:45.095399 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 13:47:45.095412 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 13:47:45.095421 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 13:47:45.095427 [INFO] Executing instruction: stop X-Ray
2024/01/31 13:47:45.095430 [INFO] stop X-Ray ...
2024/01/31 13:47:45.095443 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 13:47:45.110570 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 13:47:45.110661 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 13:47:45.125976 [INFO] Executing instruction: Run Docker Container
2024/01/31 13:47:45.126007 [INFO] stop currently running containers...
2024/01/31 13:47:45.126024 [INFO] detected old app is not docker compose app
2024/01/31 13:47:45.126039 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 13:47:45.182506 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 13:47:45.197341 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 13:47:45.197405 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 13:47:45.226508 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 13:47:45.226543 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 13:47:45.246743 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 13:47:45.246793 [INFO] stopping current container: ff68c3032a62
2024/01/31 13:47:45.246806 [INFO] Running command /bin/sh -c docker ps | grep -q ff68c3032a62
2024/01/31 13:47:45.271032 [INFO] Running command /bin/sh -c docker ps | grep -q ff68c3032a62
2024/01/31 13:47:45.293785 [INFO] Pruning containers ...
2024/01/31 13:47:45.293812 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 13:47:45.312723 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 13:47:45.312771 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 13:47:45.336624 [INFO] Total reclaimed space: 0B

2024/01/31 13:47:45.336662 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 13:47:45.356692 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 13:47:45.356724 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 13:47:45.386347 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 13:47:45.386370 [INFO] Removing /var/app/current/ if it exists
2024/01/31 13:47:45.386467 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 13:47:45.386484 [INFO] detected new app is not docker compose app
2024/01/31 13:47:45.386530 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 13:47:45.829692 [INFO] f662e8747a110d4b322d36e1b55617fcd9936ed97ca4d52bfa7d4687303fb3ba

2024/01/31 13:47:50.829958 [INFO] Running command /bin/sh -c docker ps | grep -q f662e8747a11
2024/01/31 13:47:50.869460 [ERROR] docker container quit unexpectedly on 2024-01-31 13:47:50.869440111 +0000 UTC: Command /bin/sh -c docker ps | grep -q f662e8747a11 failed with error exit status 1
2024/01/31 13:47:50.869504 [INFO] Running command /bin/sh -c docker logs f662e8747a11
2024/01/31 13:47:50.918738 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f662e8747a11: Command /bin/sh -c docker ps | grep -q f662e8747a11 failed with error exit status 1 

2024/01/31 13:47:50.918750 [INFO] Executing cleanup logic
2024/01/31 13:47:50.918973 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 14:47:51.910043 [INFO] Starting...
2024/01/31 14:47:51.910088 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 14:47:51.910113 [INFO] reading event message file
2024/01/31 14:47:51.911829 [INFO] Engine received EB command userdata-exec

2024/01/31 14:47:51.917988 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 14:47:52.340497 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 14:47:52.752218 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 14:47:52.752308 [INFO] Engine command: (self-startup)

2024/01/31 14:47:52.752315 [INFO] Downloading EB Application...
2024/01/31 14:47:52.752325 [INFO] Region: eu-west-1
2024/01/31 14:47:52.752328 [INFO] envID: e-8gmkc7rmw6
2024/01/31 14:47:52.752331 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 14:47:52.752333 [INFO] Using manifest file name from command request
2024/01/31 14:47:52.752345 [INFO] Unable to get version manifest file.
2024/01/31 14:47:52.752347 [INFO] Downloading latest manifest available.
2024/01/31 14:47:52.752349 [INFO] Download latest app version manifest
2024/01/31 14:47:52.752462 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 14:47:52.795260 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 14:47:52.795561 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 14:47:52.809006 [INFO] Download successful124bytes downloaded
2024/01/31 14:47:52.809160 [INFO] Trying to read and parse version manifest...
2024/01/31 14:47:52.809232 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 14:47:52.832039 [INFO] Download successful264bytes downloaded
2024/01/31 14:47:52.832562 [INFO] Executing instruction: SyncClock
2024/01/31 14:47:52.832567 [INFO] Starting SyncClock
2024/01/31 14:47:52.832581 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 14:47:52.842872 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 14:47:37 2024
System time     : 0.000000175 seconds slow of NTP time
Last offset     : +0.000000073 seconds
RMS offset      : 0.000001633 seconds
Frequency       : 0.371 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.047 ppm
Root delay      : 0.000426311 seconds
Root dispersion : 0.000454350 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 14:47:52.843001 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 14:47:52.848028 [INFO] 200 OK

2024/01/31 14:47:52.848144 [INFO] Skipping Configure OS
2024/01/31 14:47:52.848152 [INFO] Skipping LockRepo
2024/01/31 14:47:52.848156 [INFO] Skipping GenerateEBBanner
2024/01/31 14:47:52.848160 [INFO] Skipping Install Process Manager
2024/01/31 14:47:52.848164 [INFO] Skipping install syslog
2024/01/31 14:47:52.848168 [INFO] Skipping install cron
2024/01/31 14:47:52.848171 [INFO] Skipping install proxy
2024/01/31 14:47:52.848175 [INFO] Skipping installhealthd
2024/01/31 14:47:52.848179 [INFO] Skipping Install Log Streaming Manager
2024/01/31 14:47:52.848183 [INFO] Skipping install X-Ray
2024/01/31 14:47:52.848186 [INFO] Skipping install Third Party License
2024/01/31 14:47:52.848192 [INFO] Skipping installSqsd
2024/01/31 14:47:52.848196 [INFO] Skipping bootstraphealthd
2024/01/31 14:47:52.848199 [INFO] Skipping Install yum packages
2024/01/31 14:47:52.848203 [INFO] Skipping install docker-compose
2024/01/31 14:47:52.848207 [INFO] Skipping Configure Docker Daemon
2024/01/31 14:47:52.848211 [INFO] Skipping MarkBaked
2024/01/31 14:47:52.848214 [INFO] Skipping TuneSystemSettings
2024/01/31 14:47:52.848217 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 14:47:52.848224 [INFO] Initialize LogRotate files and directories
2024/01/31 14:47:52.863972 [INFO] Skipping BootstrapCFNHup
2024/01/31 14:47:52.863986 [INFO] Executing instruction: StartCFNHup
2024/01/31 14:47:52.863989 [INFO] Start cfn-hup
2024/01/31 14:47:52.864041 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 14:47:52.880708 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 14:47:52.891604 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 14:47:52.891639 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 14:47:52.891643 [INFO] Executing instruction: Start Docker
2024/01/31 14:47:52.891646 [INFO] Starting Docker...
2024/01/31 14:47:52.891823 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 14:47:52.893074 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 14:47:52.894146 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 14:47:53.379799 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 14:47:53.394396 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 14:47:53.394431 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 14:47:53.405057 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 14:47:53.413979 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 14:47:53.434833 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 14:47:53.485057 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 14:47:53.485104 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 14:47:53.826005 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 14:47:54.105686 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 14:47:54.121774 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 14:47:54.395954 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 14:47:54.414466 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 14:47:54.441346 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 14:47:54.457097 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 14:47:55.706647 [INFO] Skipping Setup Docker Options
2024/01/31 14:47:55.706666 [INFO] Skipping MarkBootstrapped
2024/01/31 14:47:55.706673 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 14:47:55.706802 [INFO] Starting SwitchCFNStack
2024/01/31 14:47:55.706807 [INFO] Executing instruction: stopSqsd
2024/01/31 14:47:55.706811 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 14:47:55.706813 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 14:47:55.706815 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 14:47:55.706840 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 14:47:56.275740 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 14:47:56.275775 [INFO] Executing instruction: StagedockerApplication
2024/01/31 14:47:56.275790 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 14:47:56.295609 [INFO] Pruning containers ...
2024/01/31 14:47:56.295639 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 14:47:56.317537 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f662e8747a11   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             zen_aryabhata

2024/01/31 14:47:56.317587 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 14:47:56.343235 [INFO] Deleted Containers:
f662e8747a110d4b322d36e1b55617fcd9936ed97ca4d52bfa7d4687303fb3ba

Total reclaimed space: 0B

2024/01/31 14:47:56.343263 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 14:47:56.379020 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 14:47:56.379292 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 14:47:56.382146 [INFO] application/json

2024/01/31 14:47:56.382170 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 14:47:56.506803 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 14:47:56.507084 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 14:47:56.508452 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 14:47:56.508568 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 14:47:56.508586 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 14:47:56.508589 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 14:47:56.508594 [INFO] Executing instruction: Generate environment file
2024/01/31 14:47:56.508622 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 14:47:56.508627 [INFO] start build docker app
2024/01/31 14:47:56.509114 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 14:47:56.509119 [INFO] fetching image and ports
2024/01/31 14:47:56.513035 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 14:47:56.513118 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 14:47:56.513129 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 14:47:56.513139 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 14:47:57.506831 [INFO] Login Succeeded

2024/01/31 14:47:57.506859 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 14:47:57.506866 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 14:47:57.506883 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 14:47:57.656939 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 14:47:57.656994 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 14:47:57.656999 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 14:47:57.657004 [INFO] start to build docker image
2024/01/31 14:47:57.657042 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 14:47:57.943168 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 14:47:57.943187 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 14:47:57.943191 [INFO] successfully build docker image
2024/01/31 14:47:57.943193 [INFO] save staging docker image id
2024/01/31 14:47:57.943224 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 14:47:57.970838 [INFO] c176d18fbf65

2024/01/31 14:47:57.970988 [INFO] Executing instruction: configure X-Ray
2024/01/31 14:47:57.970995 [INFO] X-Ray is not enabled.
2024/01/31 14:47:57.970998 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 14:47:57.976417 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 14:47:57.978101 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 14:47:57.993701 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 14:47:57.993738 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 14:47:58.012076 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 14:47:58.028566 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 14:47:58.050610 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 14:47:58.129035 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 14:47:58.457697 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 14:47:58.457781 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 14:47:58.783582 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 14:47:58.797344 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 14:47:59.156695 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 14:47:59.168089 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 14:47:59.181325 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 14:47:59.520129 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 14:47:59.536340 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 14:47:59.862060 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 14:47:59.862094 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 14:47:59.875807 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 14:47:59.884578 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 14:47:59.968186 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 14:47:59.969672 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 14:47:59.970614 [INFO] Executing instruction: configure log streaming
2024/01/31 14:47:59.970625 [INFO] log streaming is not enabled
2024/01/31 14:47:59.970634 [INFO] disable log stream
2024/01/31 14:47:59.970649 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 14:47:59.989032 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 14:48:00.087166 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 14:48:00.087196 [INFO] Checking if logs need forced rotation
2024/01/31 14:48:00.087233 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 14:48:00.756058 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 14:48:01.330686 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 14:48:01.332436 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 14:48:01.925001 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 14:48:01.948464 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 14:48:01.948490 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 14:48:01.948512 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 14:48:02.599772 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 14:48:02.599799 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 14:48:02.599827 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 14:48:02.599831 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 14:48:02.599850 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 14:48:02.599861 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 14:48:02.599864 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 14:48:02.599873 [INFO] Executing instruction: stop X-Ray
2024/01/31 14:48:02.599875 [INFO] stop X-Ray ...
2024/01/31 14:48:02.599887 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 14:48:02.615603 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 14:48:02.615640 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 14:48:02.634262 [INFO] Executing instruction: Run Docker Container
2024/01/31 14:48:02.634293 [INFO] stop currently running containers...
2024/01/31 14:48:02.634307 [INFO] detected old app is not docker compose app
2024/01/31 14:48:02.634320 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 14:48:02.712604 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 14:48:02.746727 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 14:48:02.746768 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 14:48:02.778796 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 14:48:02.778828 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 14:48:02.796527 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 14:48:02.796581 [INFO] stopping current container: f662e8747a11
2024/01/31 14:48:02.796593 [INFO] Running command /bin/sh -c docker ps | grep -q f662e8747a11
2024/01/31 14:48:02.817985 [INFO] Running command /bin/sh -c docker ps | grep -q f662e8747a11
2024/01/31 14:48:02.842735 [INFO] Pruning containers ...
2024/01/31 14:48:02.842759 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 14:48:02.863118 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 14:48:02.863152 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 14:48:02.896945 [INFO] Total reclaimed space: 0B

2024/01/31 14:48:02.896974 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 14:48:02.930035 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 14:48:02.930072 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 14:48:02.949385 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 14:48:02.949407 [INFO] Removing /var/app/current/ if it exists
2024/01/31 14:48:02.949506 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 14:48:02.949524 [INFO] detected new app is not docker compose app
2024/01/31 14:48:02.949591 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 14:48:03.430381 [INFO] 61aa84534bae900e7658880e8618aa78057985aa1a845f4018977164086be14b

2024/01/31 14:48:08.434862 [INFO] Running command /bin/sh -c docker ps | grep -q 61aa84534bae
2024/01/31 14:48:08.468830 [ERROR] docker container quit unexpectedly on 2024-01-31 14:48:08.468819437 +0000 UTC: Command /bin/sh -c docker ps | grep -q 61aa84534bae failed with error exit status 1
2024/01/31 14:48:08.468858 [INFO] Running command /bin/sh -c docker logs 61aa84534bae
2024/01/31 14:48:08.491830 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 61aa84534bae: Command /bin/sh -c docker ps | grep -q 61aa84534bae failed with error exit status 1 

2024/01/31 14:48:08.491842 [INFO] Executing cleanup logic
2024/01/31 14:48:08.492029 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 15:48:09.503055 [INFO] Starting...
2024/01/31 15:48:09.503105 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 15:48:09.503130 [INFO] reading event message file
2024/01/31 15:48:09.504144 [INFO] Engine received EB command userdata-exec

2024/01/31 15:48:09.510974 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 15:48:09.922020 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 15:48:10.434424 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 15:48:10.434535 [INFO] Engine command: (self-startup)

2024/01/31 15:48:10.434543 [INFO] Downloading EB Application...
2024/01/31 15:48:10.434546 [INFO] Region: eu-west-1
2024/01/31 15:48:10.434549 [INFO] envID: e-8gmkc7rmw6
2024/01/31 15:48:10.434551 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 15:48:10.434553 [INFO] Using manifest file name from command request
2024/01/31 15:48:10.434569 [INFO] Unable to get version manifest file.
2024/01/31 15:48:10.434571 [INFO] Downloading latest manifest available.
2024/01/31 15:48:10.434573 [INFO] Download latest app version manifest
2024/01/31 15:48:10.434710 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 15:48:10.471325 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 15:48:10.471540 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 15:48:10.481658 [INFO] Download successful124bytes downloaded
2024/01/31 15:48:10.481808 [INFO] Trying to read and parse version manifest...
2024/01/31 15:48:10.481880 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 15:48:10.518163 [INFO] Download successful264bytes downloaded
2024/01/31 15:48:10.518539 [INFO] Executing instruction: SyncClock
2024/01/31 15:48:10.518544 [INFO] Starting SyncClock
2024/01/31 15:48:10.518554 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 15:48:10.524489 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 15:47:57 2024
System time     : 0.000000653 seconds slow of NTP time
Last offset     : -0.000000280 seconds
RMS offset      : 0.000003804 seconds
Frequency       : 0.100 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.111 ppm
Root delay      : 0.000439278 seconds
Root dispersion : 0.000426725 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 15:48:10.524512 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 15:48:10.529497 [INFO] 200 OK

2024/01/31 15:48:10.529684 [INFO] Skipping Configure OS
2024/01/31 15:48:10.529692 [INFO] Skipping LockRepo
2024/01/31 15:48:10.529696 [INFO] Skipping GenerateEBBanner
2024/01/31 15:48:10.529700 [INFO] Skipping Install Process Manager
2024/01/31 15:48:10.529704 [INFO] Skipping install syslog
2024/01/31 15:48:10.529708 [INFO] Skipping install cron
2024/01/31 15:48:10.529712 [INFO] Skipping install proxy
2024/01/31 15:48:10.529716 [INFO] Skipping installhealthd
2024/01/31 15:48:10.529719 [INFO] Skipping Install Log Streaming Manager
2024/01/31 15:48:10.529723 [INFO] Skipping install X-Ray
2024/01/31 15:48:10.529731 [INFO] Skipping install Third Party License
2024/01/31 15:48:10.529737 [INFO] Skipping installSqsd
2024/01/31 15:48:10.529741 [INFO] Skipping bootstraphealthd
2024/01/31 15:48:10.529745 [INFO] Skipping Install yum packages
2024/01/31 15:48:10.529749 [INFO] Skipping install docker-compose
2024/01/31 15:48:10.529753 [INFO] Skipping Configure Docker Daemon
2024/01/31 15:48:10.529757 [INFO] Skipping MarkBaked
2024/01/31 15:48:10.529853 [INFO] Skipping TuneSystemSettings
2024/01/31 15:48:10.529857 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 15:48:10.529860 [INFO] Initialize LogRotate files and directories
2024/01/31 15:48:10.547062 [INFO] Skipping BootstrapCFNHup
2024/01/31 15:48:10.547158 [INFO] Executing instruction: StartCFNHup
2024/01/31 15:48:10.547162 [INFO] Start cfn-hup
2024/01/31 15:48:10.547179 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 15:48:10.562409 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 15:48:10.574135 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 15:48:10.574168 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 15:48:10.574172 [INFO] Executing instruction: Start Docker
2024/01/31 15:48:10.574176 [INFO] Starting Docker...
2024/01/31 15:48:10.574256 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 15:48:10.575331 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 15:48:10.576456 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 15:48:10.963541 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 15:48:10.978383 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 15:48:10.978519 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 15:48:10.990468 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 15:48:11.000084 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 15:48:11.013338 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 15:48:11.100407 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 15:48:11.100466 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 15:48:11.428921 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 15:48:11.721774 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 15:48:11.733077 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 15:48:12.046945 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 15:48:12.056827 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 15:48:12.068875 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 15:48:12.079157 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 15:48:13.341812 [INFO] Skipping Setup Docker Options
2024/01/31 15:48:13.341832 [INFO] Skipping MarkBootstrapped
2024/01/31 15:48:13.341836 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 15:48:13.341949 [INFO] Starting SwitchCFNStack
2024/01/31 15:48:13.341955 [INFO] Executing instruction: stopSqsd
2024/01/31 15:48:13.341959 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 15:48:13.341962 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 15:48:13.341966 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 15:48:13.341988 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 15:48:13.798588 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 15:48:13.798620 [INFO] Executing instruction: StagedockerApplication
2024/01/31 15:48:13.798630 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 15:48:13.817464 [INFO] Pruning containers ...
2024/01/31 15:48:13.817496 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 15:48:13.836697 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
61aa84534bae   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             cool_mcnulty

2024/01/31 15:48:13.836731 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 15:48:13.866786 [INFO] Deleted Containers:
61aa84534bae900e7658880e8618aa78057985aa1a845f4018977164086be14b

Total reclaimed space: 0B

2024/01/31 15:48:13.866809 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 15:48:13.888812 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 15:48:13.889071 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 15:48:13.891714 [INFO] application/json

2024/01/31 15:48:13.891758 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 15:48:13.967895 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 15:48:13.968057 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 15:48:13.969184 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 15:48:13.969204 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 15:48:13.969218 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 15:48:13.969220 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 15:48:13.969224 [INFO] Executing instruction: Generate environment file
2024/01/31 15:48:13.969254 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 15:48:13.969257 [INFO] start build docker app
2024/01/31 15:48:13.969612 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 15:48:13.969619 [INFO] fetching image and ports
2024/01/31 15:48:13.971742 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 15:48:13.971813 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 15:48:13.971824 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 15:48:13.971838 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 15:48:14.947898 [INFO] Login Succeeded

2024/01/31 15:48:14.947919 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 15:48:14.947926 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 15:48:14.947946 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 15:48:15.113996 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 15:48:15.114023 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 15:48:15.114027 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 15:48:15.114032 [INFO] start to build docker image
2024/01/31 15:48:15.114051 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 15:48:15.433040 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 15:48:15.433061 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 15:48:15.433066 [INFO] successfully build docker image
2024/01/31 15:48:15.433069 [INFO] save staging docker image id
2024/01/31 15:48:15.433084 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 15:48:15.451769 [INFO] c176d18fbf65

2024/01/31 15:48:15.451890 [INFO] Executing instruction: configure X-Ray
2024/01/31 15:48:15.451924 [INFO] X-Ray is not enabled.
2024/01/31 15:48:15.451928 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 15:48:15.457665 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 15:48:15.459316 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 15:48:15.470500 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 15:48:15.470532 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 15:48:15.479907 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 15:48:15.488304 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 15:48:15.497693 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 15:48:15.576472 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 15:48:15.903915 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 15:48:15.903995 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 15:48:16.261251 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 15:48:16.275515 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 15:48:16.650271 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 15:48:16.661674 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 15:48:16.670744 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 15:48:16.991389 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 15:48:17.001210 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 15:48:17.417605 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 15:48:17.417640 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 15:48:17.437707 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 15:48:17.449789 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 15:48:17.558163 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 15:48:17.559132 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 15:48:17.560315 [INFO] Executing instruction: configure log streaming
2024/01/31 15:48:17.560325 [INFO] log streaming is not enabled
2024/01/31 15:48:17.560329 [INFO] disable log stream
2024/01/31 15:48:17.560349 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 15:48:17.580107 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 15:48:17.620695 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 15:48:17.620748 [INFO] Checking if logs need forced rotation
2024/01/31 15:48:17.620769 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 15:48:18.190125 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 15:48:18.746169 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 15:48:18.748169 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 15:48:19.169422 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 15:48:19.186999 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 15:48:19.187014 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 15:48:19.187038 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 15:48:19.656460 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 15:48:19.656493 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 15:48:19.656516 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 15:48:19.656519 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 15:48:19.656544 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 15:48:19.656554 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 15:48:19.656556 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 15:48:19.656561 [INFO] Executing instruction: stop X-Ray
2024/01/31 15:48:19.656564 [INFO] stop X-Ray ...
2024/01/31 15:48:19.656574 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 15:48:19.670800 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 15:48:19.670831 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 15:48:19.685420 [INFO] Executing instruction: Run Docker Container
2024/01/31 15:48:19.685457 [INFO] stop currently running containers...
2024/01/31 15:48:19.685466 [INFO] detected old app is not docker compose app
2024/01/31 15:48:19.685477 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 15:48:19.732685 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 15:48:19.747234 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 15:48:19.747340 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 15:48:19.761068 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 15:48:19.761100 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 15:48:19.776028 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 15:48:19.776081 [INFO] stopping current container: 61aa84534bae
2024/01/31 15:48:19.776093 [INFO] Running command /bin/sh -c docker ps | grep -q 61aa84534bae
2024/01/31 15:48:19.796891 [INFO] Running command /bin/sh -c docker ps | grep -q 61aa84534bae
2024/01/31 15:48:19.816483 [INFO] Pruning containers ...
2024/01/31 15:48:19.816506 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 15:48:19.839084 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 15:48:19.839112 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 15:48:19.860942 [INFO] Total reclaimed space: 0B

2024/01/31 15:48:19.860972 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 15:48:19.880994 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 15:48:19.881022 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 15:48:19.907948 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 15:48:19.907969 [INFO] Removing /var/app/current/ if it exists
2024/01/31 15:48:19.908063 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 15:48:19.908079 [INFO] detected new app is not docker compose app
2024/01/31 15:48:19.908127 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 15:48:20.292676 [INFO] f5c92d7547b745cb2a91a68925b1df271a7f4e238442e98a9b5078a5bd11cd31

2024/01/31 15:48:25.292967 [INFO] Running command /bin/sh -c docker ps | grep -q f5c92d7547b7
2024/01/31 15:48:25.330918 [ERROR] docker container quit unexpectedly on 2024-01-31 15:48:25.330875416 +0000 UTC: Command /bin/sh -c docker ps | grep -q f5c92d7547b7 failed with error exit status 1
2024/01/31 15:48:25.330954 [INFO] Running command /bin/sh -c docker logs f5c92d7547b7
2024/01/31 15:48:25.378219 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f5c92d7547b7: Command /bin/sh -c docker ps | grep -q f5c92d7547b7 failed with error exit status 1 

2024/01/31 15:48:25.378229 [INFO] Executing cleanup logic
2024/01/31 15:48:25.378574 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 16:48:26.500506 [INFO] Starting...
2024/01/31 16:48:26.500550 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 16:48:26.500582 [INFO] reading event message file
2024/01/31 16:48:26.501465 [INFO] Engine received EB command userdata-exec

2024/01/31 16:48:26.508879 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 16:48:26.901846 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 16:48:27.388492 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 16:48:27.390652 [INFO] Engine command: (self-startup)

2024/01/31 16:48:27.390665 [INFO] Downloading EB Application...
2024/01/31 16:48:27.390668 [INFO] Region: eu-west-1
2024/01/31 16:48:27.390672 [INFO] envID: e-8gmkc7rmw6
2024/01/31 16:48:27.390675 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 16:48:27.390679 [INFO] Using manifest file name from command request
2024/01/31 16:48:27.390695 [INFO] Unable to get version manifest file.
2024/01/31 16:48:27.390698 [INFO] Downloading latest manifest available.
2024/01/31 16:48:27.390701 [INFO] Download latest app version manifest
2024/01/31 16:48:27.390829 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 16:48:27.438388 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 16:48:27.438614 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 16:48:27.450184 [INFO] Download successful124bytes downloaded
2024/01/31 16:48:27.450403 [INFO] Trying to read and parse version manifest...
2024/01/31 16:48:27.450547 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 16:48:27.477275 [INFO] Download successful264bytes downloaded
2024/01/31 16:48:27.477679 [INFO] Executing instruction: SyncClock
2024/01/31 16:48:27.477687 [INFO] Starting SyncClock
2024/01/31 16:48:27.477747 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 16:48:27.483982 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 16:48:21 2024
System time     : 0.000000496 seconds slow of NTP time
Last offset     : -0.000001256 seconds
RMS offset      : 0.000002625 seconds
Frequency       : 0.342 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.145 ppm
Root delay      : 0.000449074 seconds
Root dispersion : 0.000399932 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/31 16:48:27.484009 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 16:48:27.488503 [INFO] 200 OK

2024/01/31 16:48:27.488669 [INFO] Skipping Configure OS
2024/01/31 16:48:27.488678 [INFO] Skipping LockRepo
2024/01/31 16:48:27.488682 [INFO] Skipping GenerateEBBanner
2024/01/31 16:48:27.488686 [INFO] Skipping Install Process Manager
2024/01/31 16:48:27.488690 [INFO] Skipping install syslog
2024/01/31 16:48:27.488694 [INFO] Skipping install cron
2024/01/31 16:48:27.488698 [INFO] Skipping install proxy
2024/01/31 16:48:27.488702 [INFO] Skipping installhealthd
2024/01/31 16:48:27.488706 [INFO] Skipping Install Log Streaming Manager
2024/01/31 16:48:27.488710 [INFO] Skipping install X-Ray
2024/01/31 16:48:27.488714 [INFO] Skipping install Third Party License
2024/01/31 16:48:27.488719 [INFO] Skipping installSqsd
2024/01/31 16:48:27.488723 [INFO] Skipping bootstraphealthd
2024/01/31 16:48:27.488727 [INFO] Skipping Install yum packages
2024/01/31 16:48:27.488731 [INFO] Skipping install docker-compose
2024/01/31 16:48:27.488735 [INFO] Skipping Configure Docker Daemon
2024/01/31 16:48:27.488738 [INFO] Skipping MarkBaked
2024/01/31 16:48:27.488747 [INFO] Skipping TuneSystemSettings
2024/01/31 16:48:27.488749 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 16:48:27.488752 [INFO] Initialize LogRotate files and directories
2024/01/31 16:48:27.513684 [INFO] Skipping BootstrapCFNHup
2024/01/31 16:48:27.513695 [INFO] Executing instruction: StartCFNHup
2024/01/31 16:48:27.513698 [INFO] Start cfn-hup
2024/01/31 16:48:27.513716 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 16:48:27.536784 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 16:48:27.547567 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 16:48:27.547603 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 16:48:27.547607 [INFO] Executing instruction: Start Docker
2024/01/31 16:48:27.547611 [INFO] Starting Docker...
2024/01/31 16:48:27.547702 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 16:48:27.548834 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 16:48:27.549902 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 16:48:27.922048 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 16:48:27.937101 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 16:48:27.937133 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 16:48:27.948859 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 16:48:27.959343 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 16:48:27.970318 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 16:48:28.020316 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 16:48:28.020352 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 16:48:28.323489 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 16:48:28.727893 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 16:48:28.739838 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 16:48:29.112115 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 16:48:29.122699 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 16:48:29.153441 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 16:48:29.169907 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 16:48:30.497417 [INFO] Skipping Setup Docker Options
2024/01/31 16:48:30.497441 [INFO] Skipping MarkBootstrapped
2024/01/31 16:48:30.497444 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 16:48:30.497562 [INFO] Starting SwitchCFNStack
2024/01/31 16:48:30.497567 [INFO] Executing instruction: stopSqsd
2024/01/31 16:48:30.497571 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 16:48:30.497574 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 16:48:30.497578 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 16:48:30.497595 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 16:48:31.077582 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 16:48:31.078215 [INFO] Executing instruction: StagedockerApplication
2024/01/31 16:48:31.078376 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 16:48:31.120867 [INFO] Pruning containers ...
2024/01/31 16:48:31.120897 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 16:48:31.143586 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f5c92d7547b7   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             cranky_kowalevski

2024/01/31 16:48:31.143614 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 16:48:31.175371 [INFO] Deleted Containers:
f5c92d7547b745cb2a91a68925b1df271a7f4e238442e98a9b5078a5bd11cd31

Total reclaimed space: 0B

2024/01/31 16:48:31.175395 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 16:48:31.200082 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 16:48:31.200542 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 16:48:31.204403 [INFO] application/json

2024/01/31 16:48:31.204431 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 16:48:31.294698 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 16:48:31.294865 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 16:48:31.296251 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 16:48:31.296275 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 16:48:31.296289 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 16:48:31.296291 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 16:48:31.296295 [INFO] Executing instruction: Generate environment file
2024/01/31 16:48:31.296328 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 16:48:31.296332 [INFO] start build docker app
2024/01/31 16:48:31.296738 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 16:48:31.296742 [INFO] fetching image and ports
2024/01/31 16:48:31.298786 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 16:48:31.298850 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 16:48:31.298860 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 16:48:31.298871 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 16:48:32.317553 [INFO] Login Succeeded

2024/01/31 16:48:32.317573 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 16:48:32.317580 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 16:48:32.317601 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 16:48:32.479109 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 16:48:32.479131 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 16:48:32.479134 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 16:48:32.479142 [INFO] start to build docker image
2024/01/31 16:48:32.479158 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 16:48:32.793216 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 16:48:32.793235 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 16:48:32.793239 [INFO] successfully build docker image
2024/01/31 16:48:32.793242 [INFO] save staging docker image id
2024/01/31 16:48:32.793256 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 16:48:32.816587 [INFO] c176d18fbf65

2024/01/31 16:48:32.816713 [INFO] Executing instruction: configure X-Ray
2024/01/31 16:48:32.816719 [INFO] X-Ray is not enabled.
2024/01/31 16:48:32.816722 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 16:48:32.822983 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 16:48:32.824695 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 16:48:32.839375 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 16:48:32.839404 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 16:48:32.850696 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 16:48:32.860759 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 16:48:32.872026 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 16:48:32.941987 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 16:48:33.241250 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 16:48:33.241448 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 16:48:33.636572 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 16:48:33.655043 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 16:48:33.991124 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 16:48:34.000865 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 16:48:34.010197 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 16:48:34.415967 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 16:48:34.427649 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 16:48:34.763174 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 16:48:34.763217 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 16:48:34.777836 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 16:48:34.789120 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 16:48:34.901567 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 16:48:34.902683 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 16:48:34.903673 [INFO] Executing instruction: configure log streaming
2024/01/31 16:48:34.903688 [INFO] log streaming is not enabled
2024/01/31 16:48:34.903692 [INFO] disable log stream
2024/01/31 16:48:34.903705 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 16:48:34.932628 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 16:48:34.951580 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 16:48:34.951615 [INFO] Checking if logs need forced rotation
2024/01/31 16:48:34.951636 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 16:48:35.585140 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 16:48:36.059169 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 16:48:36.061158 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 16:48:36.172063 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 16:48:36.204188 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 16:48:36.204208 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 16:48:36.204228 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 16:48:36.675189 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 16:48:36.675235 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 16:48:36.675262 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 16:48:36.675267 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 16:48:36.675292 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 16:48:36.675303 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 16:48:36.675306 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 16:48:36.675311 [INFO] Executing instruction: stop X-Ray
2024/01/31 16:48:36.675314 [INFO] stop X-Ray ...
2024/01/31 16:48:36.675329 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 16:48:36.690980 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 16:48:36.691015 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 16:48:36.708288 [INFO] Executing instruction: Run Docker Container
2024/01/31 16:48:36.708315 [INFO] stop currently running containers...
2024/01/31 16:48:36.708324 [INFO] detected old app is not docker compose app
2024/01/31 16:48:36.708336 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 16:48:36.762388 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 16:48:36.780588 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 16:48:36.780632 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 16:48:36.795469 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 16:48:36.795534 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 16:48:36.810525 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 16:48:36.810580 [INFO] stopping current container: f5c92d7547b7
2024/01/31 16:48:36.810593 [INFO] Running command /bin/sh -c docker ps | grep -q f5c92d7547b7
2024/01/31 16:48:36.834590 [INFO] Running command /bin/sh -c docker ps | grep -q f5c92d7547b7
2024/01/31 16:48:36.859243 [INFO] Pruning containers ...
2024/01/31 16:48:36.859334 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 16:48:36.883138 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 16:48:36.883169 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 16:48:36.935344 [INFO] Total reclaimed space: 0B

2024/01/31 16:48:36.935394 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 16:48:36.955489 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 16:48:36.955522 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 16:48:37.000606 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 16:48:37.000628 [INFO] Removing /var/app/current/ if it exists
2024/01/31 16:48:37.000773 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 16:48:37.000792 [INFO] detected new app is not docker compose app
2024/01/31 16:48:37.000959 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 16:48:37.393037 [INFO] f8d5094190ac76b86aa544b15ecb1dcd4c8278cc7656e8233c928cb661aa8e27

2024/01/31 16:48:42.397187 [INFO] Running command /bin/sh -c docker ps | grep -q f8d5094190ac
2024/01/31 16:48:42.417741 [ERROR] docker container quit unexpectedly on 2024-01-31 16:48:42.417725298 +0000 UTC: Command /bin/sh -c docker ps | grep -q f8d5094190ac failed with error exit status 1
2024/01/31 16:48:42.417766 [INFO] Running command /bin/sh -c docker logs f8d5094190ac
2024/01/31 16:48:42.436819 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f8d5094190ac: Command /bin/sh -c docker ps | grep -q f8d5094190ac failed with error exit status 1 

2024/01/31 16:48:42.436828 [INFO] Executing cleanup logic
2024/01/31 16:48:42.436994 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 17:48:43.472532 [INFO] Starting...
2024/01/31 17:48:43.472598 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 17:48:43.472624 [INFO] reading event message file
2024/01/31 17:48:43.473984 [INFO] Engine received EB command userdata-exec

2024/01/31 17:48:43.483755 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 17:48:43.902472 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 17:48:44.370041 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 17:48:44.370155 [INFO] Engine command: (self-startup)

2024/01/31 17:48:44.370165 [INFO] Downloading EB Application...
2024/01/31 17:48:44.370168 [INFO] Region: eu-west-1
2024/01/31 17:48:44.370181 [INFO] envID: e-8gmkc7rmw6
2024/01/31 17:48:44.370184 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 17:48:44.370187 [INFO] Using manifest file name from command request
2024/01/31 17:48:44.370201 [INFO] Unable to get version manifest file.
2024/01/31 17:48:44.370205 [INFO] Downloading latest manifest available.
2024/01/31 17:48:44.370207 [INFO] Download latest app version manifest
2024/01/31 17:48:44.370568 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 17:48:44.409137 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 17:48:44.409733 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 17:48:44.428274 [INFO] Download successful124bytes downloaded
2024/01/31 17:48:44.428418 [INFO] Trying to read and parse version manifest...
2024/01/31 17:48:44.428508 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 17:48:44.458408 [INFO] Download successful264bytes downloaded
2024/01/31 17:48:44.458933 [INFO] Executing instruction: SyncClock
2024/01/31 17:48:44.458940 [INFO] Starting SyncClock
2024/01/31 17:48:44.458953 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 17:48:44.467507 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 17:48:29 2024
System time     : 0.000000977 seconds fast of NTP time
Last offset     : +0.000001420 seconds
RMS offset      : 0.000005302 seconds
Frequency       : 0.197 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.103 ppm
Root delay      : 0.000442366 seconds
Root dispersion : 0.000398956 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 17:48:44.467536 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 17:48:44.472431 [INFO] 200 OK

2024/01/31 17:48:44.472605 [INFO] Skipping Configure OS
2024/01/31 17:48:44.472616 [INFO] Skipping LockRepo
2024/01/31 17:48:44.472624 [INFO] Skipping GenerateEBBanner
2024/01/31 17:48:44.472631 [INFO] Skipping Install Process Manager
2024/01/31 17:48:44.472637 [INFO] Skipping install syslog
2024/01/31 17:48:44.472642 [INFO] Skipping install cron
2024/01/31 17:48:44.472648 [INFO] Skipping install proxy
2024/01/31 17:48:44.472654 [INFO] Skipping installhealthd
2024/01/31 17:48:44.472660 [INFO] Skipping Install Log Streaming Manager
2024/01/31 17:48:44.472670 [INFO] Skipping install X-Ray
2024/01/31 17:48:44.472676 [INFO] Skipping install Third Party License
2024/01/31 17:48:44.472685 [INFO] Skipping installSqsd
2024/01/31 17:48:44.472691 [INFO] Skipping bootstraphealthd
2024/01/31 17:48:44.472697 [INFO] Skipping Install yum packages
2024/01/31 17:48:44.472704 [INFO] Skipping install docker-compose
2024/01/31 17:48:44.472710 [INFO] Skipping Configure Docker Daemon
2024/01/31 17:48:44.472718 [INFO] Skipping MarkBaked
2024/01/31 17:48:44.472724 [INFO] Skipping TuneSystemSettings
2024/01/31 17:48:44.472728 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 17:48:44.472731 [INFO] Initialize LogRotate files and directories
2024/01/31 17:48:44.487505 [INFO] Skipping BootstrapCFNHup
2024/01/31 17:48:44.487518 [INFO] Executing instruction: StartCFNHup
2024/01/31 17:48:44.487521 [INFO] Start cfn-hup
2024/01/31 17:48:44.487539 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 17:48:44.502034 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 17:48:44.513313 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 17:48:44.513347 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 17:48:44.513351 [INFO] Executing instruction: Start Docker
2024/01/31 17:48:44.513354 [INFO] Starting Docker...
2024/01/31 17:48:44.513442 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 17:48:44.514777 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 17:48:44.515969 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 17:48:44.906422 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 17:48:44.922074 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 17:48:44.922104 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 17:48:44.950880 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 17:48:44.964202 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 17:48:44.974195 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 17:48:45.062712 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 17:48:45.062774 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 17:48:45.433935 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 17:48:45.838190 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 17:48:45.850436 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 17:48:46.180535 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 17:48:46.196205 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 17:48:46.212191 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 17:48:46.221893 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 17:48:47.316240 [INFO] Skipping Setup Docker Options
2024/01/31 17:48:47.316272 [INFO] Skipping MarkBootstrapped
2024/01/31 17:48:47.316276 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 17:48:47.316409 [INFO] Starting SwitchCFNStack
2024/01/31 17:48:47.316415 [INFO] Executing instruction: stopSqsd
2024/01/31 17:48:47.316419 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 17:48:47.316423 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 17:48:47.316427 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 17:48:47.316442 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 17:48:47.857737 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 17:48:47.857791 [INFO] Executing instruction: StagedockerApplication
2024/01/31 17:48:47.857803 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 17:48:47.879887 [INFO] Pruning containers ...
2024/01/31 17:48:47.879921 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 17:48:47.900874 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f8d5094190ac   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             eager_noether

2024/01/31 17:48:47.900903 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 17:48:47.932519 [INFO] Deleted Containers:
f8d5094190ac76b86aa544b15ecb1dcd4c8278cc7656e8233c928cb661aa8e27

Total reclaimed space: 0B

2024/01/31 17:48:47.932546 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 17:48:47.955973 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 17:48:47.956220 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 17:48:47.959094 [INFO] application/json

2024/01/31 17:48:47.959114 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 17:48:48.033853 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 17:48:48.034044 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 17:48:48.035766 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 17:48:48.035792 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 17:48:48.035807 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 17:48:48.035810 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 17:48:48.035814 [INFO] Executing instruction: Generate environment file
2024/01/31 17:48:48.035850 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 17:48:48.035860 [INFO] start build docker app
2024/01/31 17:48:48.036213 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 17:48:48.036218 [INFO] fetching image and ports
2024/01/31 17:48:48.037833 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 17:48:48.037903 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 17:48:48.037913 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 17:48:48.037923 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 17:48:49.114410 [INFO] Login Succeeded

2024/01/31 17:48:49.114426 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 17:48:49.114431 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 17:48:49.114450 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 17:48:49.262551 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 17:48:49.262577 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 17:48:49.262580 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 17:48:49.262583 [INFO] start to build docker image
2024/01/31 17:48:49.262598 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 17:48:49.536624 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 17:48:49.536642 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 17:48:49.536646 [INFO] successfully build docker image
2024/01/31 17:48:49.536649 [INFO] save staging docker image id
2024/01/31 17:48:49.536661 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 17:48:49.562091 [INFO] c176d18fbf65

2024/01/31 17:48:49.562213 [INFO] Executing instruction: configure X-Ray
2024/01/31 17:48:49.562219 [INFO] X-Ray is not enabled.
2024/01/31 17:48:49.562222 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 17:48:49.567883 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 17:48:49.569719 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 17:48:49.582208 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 17:48:49.582249 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 17:48:49.594302 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 17:48:49.603537 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 17:48:49.614246 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 17:48:49.678136 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 17:48:50.020995 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 17:48:50.021094 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 17:48:50.451237 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 17:48:50.495063 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 17:48:50.832101 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 17:48:50.846292 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 17:48:50.856239 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 17:48:51.251599 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 17:48:51.263478 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 17:48:51.633920 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 17:48:51.633963 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 17:48:51.647579 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 17:48:51.656859 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 17:48:51.750922 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 17:48:51.752155 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 17:48:51.753378 [INFO] Executing instruction: configure log streaming
2024/01/31 17:48:51.753388 [INFO] log streaming is not enabled
2024/01/31 17:48:51.753392 [INFO] disable log stream
2024/01/31 17:48:51.753408 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 17:48:51.771596 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 17:48:51.791466 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 17:48:51.791489 [INFO] Checking if logs need forced rotation
2024/01/31 17:48:51.791512 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 17:48:52.397867 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 17:48:52.850064 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 17:48:52.851940 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 17:48:53.381445 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 17:48:53.399097 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 17:48:53.399112 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 17:48:53.399125 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 17:48:53.832359 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 17:48:53.832380 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 17:48:53.832409 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 17:48:53.832412 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 17:48:53.832432 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 17:48:53.832443 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 17:48:53.832446 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 17:48:53.832450 [INFO] Executing instruction: stop X-Ray
2024/01/31 17:48:53.832453 [INFO] stop X-Ray ...
2024/01/31 17:48:53.832462 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 17:48:53.848459 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 17:48:53.848514 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 17:48:53.866082 [INFO] Executing instruction: Run Docker Container
2024/01/31 17:48:53.866112 [INFO] stop currently running containers...
2024/01/31 17:48:53.866122 [INFO] detected old app is not docker compose app
2024/01/31 17:48:53.866134 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 17:48:53.942457 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 17:48:53.962048 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 17:48:53.962081 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 17:48:53.980547 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 17:48:53.980581 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 17:48:53.998628 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 17:48:53.998688 [INFO] stopping current container: f8d5094190ac
2024/01/31 17:48:53.998702 [INFO] Running command /bin/sh -c docker ps | grep -q f8d5094190ac
2024/01/31 17:48:54.025566 [INFO] Running command /bin/sh -c docker ps | grep -q f8d5094190ac
2024/01/31 17:48:54.048241 [INFO] Pruning containers ...
2024/01/31 17:48:54.048264 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 17:48:54.070288 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 17:48:54.070315 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 17:48:54.090186 [INFO] Total reclaimed space: 0B

2024/01/31 17:48:54.090209 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 17:48:54.110515 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 17:48:54.110554 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 17:48:54.132103 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 17:48:54.132127 [INFO] Removing /var/app/current/ if it exists
2024/01/31 17:48:54.132225 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 17:48:54.132242 [INFO] detected new app is not docker compose app
2024/01/31 17:48:54.132295 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 17:48:54.545226 [INFO] 4159176d9a46eeb5d6de852a14cd63cb6e3c23d6b3c32ffcd8f0ee9d20ed6a35

2024/01/31 17:48:59.545670 [INFO] Running command /bin/sh -c docker ps | grep -q 4159176d9a46
2024/01/31 17:48:59.584297 [ERROR] docker container quit unexpectedly on 2024-01-31 17:48:59.584286346 +0000 UTC: Command /bin/sh -c docker ps | grep -q 4159176d9a46 failed with error exit status 1
2024/01/31 17:48:59.584330 [INFO] Running command /bin/sh -c docker logs 4159176d9a46
2024/01/31 17:48:59.607465 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 4159176d9a46: Command /bin/sh -c docker ps | grep -q 4159176d9a46 failed with error exit status 1 

2024/01/31 17:48:59.607475 [INFO] Executing cleanup logic
2024/01/31 17:48:59.607652 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 18:49:00.755938 [INFO] Starting...
2024/01/31 18:49:00.755984 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 18:49:00.756011 [INFO] reading event message file
2024/01/31 18:49:00.757064 [INFO] Engine received EB command userdata-exec

2024/01/31 18:49:00.763254 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 18:49:01.255547 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 18:49:01.991545 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 18:49:01.991672 [INFO] Engine command: (self-startup)

2024/01/31 18:49:01.991681 [INFO] Downloading EB Application...
2024/01/31 18:49:01.991685 [INFO] Region: eu-west-1
2024/01/31 18:49:01.991688 [INFO] envID: e-8gmkc7rmw6
2024/01/31 18:49:01.991692 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 18:49:01.991695 [INFO] Using manifest file name from command request
2024/01/31 18:49:01.991712 [INFO] Unable to get version manifest file.
2024/01/31 18:49:01.991715 [INFO] Downloading latest manifest available.
2024/01/31 18:49:01.991718 [INFO] Download latest app version manifest
2024/01/31 18:49:01.991853 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 18:49:02.032086 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 18:49:02.032350 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 18:49:02.043963 [INFO] Download successful124bytes downloaded
2024/01/31 18:49:02.044113 [INFO] Trying to read and parse version manifest...
2024/01/31 18:49:02.044191 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 18:49:02.084364 [INFO] Download successful264bytes downloaded
2024/01/31 18:49:02.084724 [INFO] Executing instruction: SyncClock
2024/01/31 18:49:02.084730 [INFO] Starting SyncClock
2024/01/31 18:49:02.084740 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 18:49:02.102931 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 18:48:52 2024
System time     : 0.000002054 seconds slow of NTP time
Last offset     : +0.000002322 seconds
RMS offset      : 0.000003398 seconds
Frequency       : 0.560 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.289 ppm
Root delay      : 0.000465883 seconds
Root dispersion : 0.000306752 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/31 18:49:02.103111 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 18:49:02.116069 [INFO] 200 OK

2024/01/31 18:49:02.116173 [INFO] Skipping Configure OS
2024/01/31 18:49:02.116193 [INFO] Skipping LockRepo
2024/01/31 18:49:02.116199 [INFO] Skipping GenerateEBBanner
2024/01/31 18:49:02.116204 [INFO] Skipping Install Process Manager
2024/01/31 18:49:02.116211 [INFO] Skipping install syslog
2024/01/31 18:49:02.116223 [INFO] Skipping install cron
2024/01/31 18:49:02.116278 [INFO] Skipping install proxy
2024/01/31 18:49:02.116286 [INFO] Skipping installhealthd
2024/01/31 18:49:02.116292 [INFO] Skipping Install Log Streaming Manager
2024/01/31 18:49:02.116297 [INFO] Skipping install X-Ray
2024/01/31 18:49:02.116302 [INFO] Skipping install Third Party License
2024/01/31 18:49:02.116307 [INFO] Skipping installSqsd
2024/01/31 18:49:02.116311 [INFO] Skipping bootstraphealthd
2024/01/31 18:49:02.116321 [INFO] Skipping Install yum packages
2024/01/31 18:49:02.116325 [INFO] Skipping install docker-compose
2024/01/31 18:49:02.116339 [INFO] Skipping Configure Docker Daemon
2024/01/31 18:49:02.116343 [INFO] Skipping MarkBaked
2024/01/31 18:49:02.116347 [INFO] Skipping TuneSystemSettings
2024/01/31 18:49:02.116349 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 18:49:02.116352 [INFO] Initialize LogRotate files and directories
2024/01/31 18:49:02.139985 [INFO] Skipping BootstrapCFNHup
2024/01/31 18:49:02.140005 [INFO] Executing instruction: StartCFNHup
2024/01/31 18:49:02.140008 [INFO] Start cfn-hup
2024/01/31 18:49:02.140030 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 18:49:02.176482 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 18:49:02.205556 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 18:49:02.205594 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 18:49:02.205598 [INFO] Executing instruction: Start Docker
2024/01/31 18:49:02.205601 [INFO] Starting Docker...
2024/01/31 18:49:02.205689 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 18:49:02.206869 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 18:49:02.211010 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 18:49:02.639800 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 18:49:02.664231 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 18:49:02.664274 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 18:49:02.693011 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 18:49:02.714223 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 18:49:02.730892 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 18:49:02.802861 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 18:49:02.802910 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 18:49:03.188024 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 18:49:03.525866 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 18:49:03.538770 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 18:49:03.874519 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 18:49:03.887747 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 18:49:03.907944 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 18:49:03.929140 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 18:49:05.191651 [INFO] Skipping Setup Docker Options
2024/01/31 18:49:05.191680 [INFO] Skipping MarkBootstrapped
2024/01/31 18:49:05.191685 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 18:49:05.191857 [INFO] Starting SwitchCFNStack
2024/01/31 18:49:05.191869 [INFO] Executing instruction: stopSqsd
2024/01/31 18:49:05.191873 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 18:49:05.191877 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 18:49:05.191881 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 18:49:05.191904 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 18:49:05.759131 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 18:49:05.759154 [INFO] Executing instruction: StagedockerApplication
2024/01/31 18:49:05.759169 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 18:49:05.785092 [INFO] Pruning containers ...
2024/01/31 18:49:05.785222 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 18:49:05.814451 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
4159176d9a46   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             inspiring_williams

2024/01/31 18:49:05.814487 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 18:49:05.847680 [INFO] Deleted Containers:
4159176d9a46eeb5d6de852a14cd63cb6e3c23d6b3c32ffcd8f0ee9d20ed6a35

Total reclaimed space: 0B

2024/01/31 18:49:05.847705 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 18:49:05.888106 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 18:49:05.888722 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 18:49:05.892791 [INFO] application/json

2024/01/31 18:49:05.892813 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 18:49:05.988329 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 18:49:05.988498 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 18:49:05.989910 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 18:49:05.989938 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 18:49:05.989952 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 18:49:05.989954 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 18:49:05.989959 [INFO] Executing instruction: Generate environment file
2024/01/31 18:49:05.989984 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 18:49:05.989987 [INFO] start build docker app
2024/01/31 18:49:05.990483 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 18:49:05.990487 [INFO] fetching image and ports
2024/01/31 18:49:05.992134 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 18:49:05.992245 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 18:49:05.992256 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 18:49:05.992295 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 18:49:07.114396 [INFO] Login Succeeded

2024/01/31 18:49:07.114416 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 18:49:07.114422 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 18:49:07.114441 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 18:49:07.307978 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 18:49:07.308004 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 18:49:07.308019 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 18:49:07.308022 [INFO] start to build docker image
2024/01/31 18:49:07.308036 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 18:49:07.586157 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 18:49:07.586179 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 18:49:07.586183 [INFO] successfully build docker image
2024/01/31 18:49:07.586187 [INFO] save staging docker image id
2024/01/31 18:49:07.586200 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 18:49:07.609858 [INFO] c176d18fbf65

2024/01/31 18:49:07.609994 [INFO] Executing instruction: configure X-Ray
2024/01/31 18:49:07.610000 [INFO] X-Ray is not enabled.
2024/01/31 18:49:07.610003 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 18:49:07.616925 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 18:49:07.619670 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 18:49:07.654118 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 18:49:07.654695 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 18:49:07.677484 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 18:49:07.686272 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 18:49:07.696932 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 18:49:07.758522 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 18:49:08.105265 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 18:49:08.105379 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 18:49:08.380773 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 18:49:08.391444 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 18:49:08.772803 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 18:49:08.785661 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 18:49:08.808351 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 18:49:09.099726 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 18:49:09.114604 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 18:49:09.427004 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 18:49:09.427040 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 18:49:09.444719 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 18:49:09.455835 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 18:49:09.570706 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 18:49:09.572754 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 18:49:09.573700 [INFO] Executing instruction: configure log streaming
2024/01/31 18:49:09.573712 [INFO] log streaming is not enabled
2024/01/31 18:49:09.573716 [INFO] disable log stream
2024/01/31 18:49:09.573733 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 18:49:09.594960 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 18:49:09.624856 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 18:49:09.624878 [INFO] Checking if logs need forced rotation
2024/01/31 18:49:09.624904 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 18:49:10.228823 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 18:49:10.802807 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 18:49:10.805369 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 18:49:10.927508 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 18:49:10.952945 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 18:49:10.952961 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 18:49:10.953003 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 18:49:11.472906 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 18:49:11.472929 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 18:49:11.472954 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 18:49:11.472958 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 18:49:11.472981 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 18:49:11.472992 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 18:49:11.472994 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 18:49:11.472999 [INFO] Executing instruction: stop X-Ray
2024/01/31 18:49:11.473002 [INFO] stop X-Ray ...
2024/01/31 18:49:11.473012 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 18:49:11.487640 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 18:49:11.487672 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 18:49:11.508314 [INFO] Executing instruction: Run Docker Container
2024/01/31 18:49:11.512527 [INFO] stop currently running containers...
2024/01/31 18:49:11.512780 [INFO] detected old app is not docker compose app
2024/01/31 18:49:11.512949 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 18:49:11.582362 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 18:49:11.597851 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 18:49:11.597889 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 18:49:11.612710 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 18:49:11.612741 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 18:49:11.627749 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 18:49:11.627943 [INFO] stopping current container: 4159176d9a46
2024/01/31 18:49:11.627958 [INFO] Running command /bin/sh -c docker ps | grep -q 4159176d9a46
2024/01/31 18:49:11.652058 [INFO] Running command /bin/sh -c docker ps | grep -q 4159176d9a46
2024/01/31 18:49:11.693595 [INFO] Pruning containers ...
2024/01/31 18:49:11.693618 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 18:49:11.712730 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 18:49:11.712758 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 18:49:11.732439 [INFO] Total reclaimed space: 0B

2024/01/31 18:49:11.732468 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 18:49:11.751869 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 18:49:11.751903 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 18:49:11.770875 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 18:49:11.770894 [INFO] Removing /var/app/current/ if it exists
2024/01/31 18:49:11.770995 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 18:49:11.771017 [INFO] detected new app is not docker compose app
2024/01/31 18:49:11.771077 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 18:49:12.194099 [INFO] e3f9cc2de7d5f7bf73465b7d2c4eaac4415ead4b4352dda063a27860da05fa13

2024/01/31 18:49:17.195552 [INFO] Running command /bin/sh -c docker ps | grep -q e3f9cc2de7d5
2024/01/31 18:49:17.220527 [ERROR] docker container quit unexpectedly on 2024-01-31 18:49:17.220507955 +0000 UTC: Command /bin/sh -c docker ps | grep -q e3f9cc2de7d5 failed with error exit status 1
2024/01/31 18:49:17.220583 [INFO] Running command /bin/sh -c docker logs e3f9cc2de7d5
2024/01/31 18:49:17.254699 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container e3f9cc2de7d5: Command /bin/sh -c docker ps | grep -q e3f9cc2de7d5 failed with error exit status 1 

2024/01/31 18:49:17.254708 [INFO] Executing cleanup logic
2024/01/31 18:49:17.254904 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 19:16:10.161438 [INFO] Starting...
2024/01/31 19:16:10.161538 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 19:16:10.161564 [INFO] reading event message file
2024/01/31 19:16:10.161821 [INFO] Engine received EB command cfn-hup-exec

2024/01/31 19:16:10.237374 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 19:16:10.636254 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 19:16:11.033147 [INFO] checking whether command bundle-log is applicable to this instance...
2024/01/31 19:16:11.033164 [INFO] this command is applicable to the instance, thus instance should execute command
2024/01/31 19:16:11.033167 [INFO] Engine command: (bundle-log)

2024/01/31 19:16:11.033221 [INFO] Executing instruction: GetBundleLogs
2024/01/31 19:16:11.033224 [INFO] Bundle Logs...
