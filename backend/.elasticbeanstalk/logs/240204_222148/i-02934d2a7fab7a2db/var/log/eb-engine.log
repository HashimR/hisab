2024/01/29 19:23:48.838560 [INFO] Starting...
2024/01/29 19:23:48.838631 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:23:48.838713 [INFO] reading event message file
2024/01/29 19:23:48.851912 [INFO] Engine received EB command userdata-exec

2024/01/29 19:23:48.858635 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:23:49.816762 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:23:50.784166 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:23:50.784220 [INFO] Engine command: (self-startup)

2024/01/29 19:23:50.784315 [INFO] Downloading EB Application...
2024/01/29 19:23:50.784319 [INFO] Region: eu-west-1
2024/01/29 19:23:50.784322 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:23:50.784325 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:23:50.784328 [INFO] Using manifest file name from command request
2024/01/29 19:23:50.784344 [INFO] Unable to get version manifest file.
2024/01/29 19:23:50.784347 [INFO] Downloading latest manifest available.
2024/01/29 19:23:50.784350 [INFO] Download latest app version manifest
2024/01/29 19:23:50.784503 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:23:50.851395 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:23:50.851663 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:23:50.864179 [INFO] Download successful124bytes downloaded
2024/01/29 19:23:50.864282 [INFO] Trying to read and parse version manifest...
2024/01/29 19:23:50.864385 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:23:50.875053 [INFO] Download successful264bytes downloaded
2024/01/29 19:23:50.875640 [INFO] Executing instruction: SyncClock
2024/01/29 19:23:50.875646 [INFO] Starting SyncClock
2024/01/29 19:23:50.875659 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:23:50.883330 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:23:49 2024
System time     : 0.000000004 seconds fast of NTP time
Last offset     : -0.000013963 seconds
RMS offset      : 0.000013963 seconds
Frequency       : 9.514 ppm slow
Residual freq   : +6.044 ppm
Skew            : 5.981 ppm
Root delay      : 0.000431677 seconds
Root dispersion : 0.000357548 seconds
Update interval : 1.2 seconds
Leap status     : Normal

2024/01/29 19:23:50.883359 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:23:50.887946 [INFO] 200 OK

2024/01/29 19:23:50.888003 [INFO] Skipping Configure OS
2024/01/29 19:23:50.888009 [INFO] Skipping LockRepo
2024/01/29 19:23:50.888015 [INFO] Skipping GenerateEBBanner
2024/01/29 19:23:50.888020 [INFO] Skipping Install Process Manager
2024/01/29 19:23:50.888025 [INFO] Skipping install syslog
2024/01/29 19:23:50.888030 [INFO] Skipping install cron
2024/01/29 19:23:50.888036 [INFO] Skipping install proxy
2024/01/29 19:23:50.888041 [INFO] Skipping installhealthd
2024/01/29 19:23:50.888047 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:23:50.888051 [INFO] Skipping install X-Ray
2024/01/29 19:23:50.888057 [INFO] Skipping install Third Party License
2024/01/29 19:23:50.888063 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:50.888066 [INFO] Executing instruction: installSqsd
2024/01/29 19:23:50.888070 [INFO] This is a web server environment instance, skip install sqsd daemon ...
2024/01/29 19:23:50.888075 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:50.888087 [INFO] Executing instruction: bootstraphealthd
2024/01/29 19:23:50.888090 [INFO] this is an enhanced health env ...
2024/01/29 19:23:50.888102 [INFO] bootstrap healthd....
2024/01/29 19:23:50.888116 [INFO] Running command /bin/sh -c /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/01/29 19:23:51.600853 [INFO] /usr/bin/id: ‘healthd’: no such user

2024/01/29 19:23:51.602621 [INFO] none proxy, skip creating proxy dir for healthd
2024/01/29 19:23:51.602643 [INFO] bootstrap healthd....
2024/01/29 19:23:51.602666 [INFO] Running command /bin/sh -c /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/01/29 19:23:51.606863 [INFO] 1001

2024/01/29 19:23:51.608395 [INFO] configure bundle log for healthd...
2024/01/29 19:23:51.608496 [INFO] Skipping Install yum packages
2024/01/29 19:23:51.608506 [INFO] Skipping install docker-compose
2024/01/29 19:23:51.608512 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:23:51.608518 [INFO] Skipping MarkBaked
2024/01/29 19:23:51.608524 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:51.608527 [INFO] Executing instruction: TuneSystemSettings
2024/01/29 19:23:51.608531 [INFO] Starting TuneSystemSettings
2024/01/29 19:23:51.608535 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:51.609803 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:23:51.609808 [INFO] Initialize LogRotate files and directories
2024/01/29 19:23:51.638427 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:51.638440 [INFO] Executing instruction: BootstrapCFNHup
2024/01/29 19:23:51.638444 [INFO] Bootstrap cfn-hup
2024/01/29 19:23:51.639993 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb-command-handler.conf to /etc/cfn/hooks.d/aws-eb-command-handler.conf
2024/01/29 19:23:51.642478 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:23:51.642490 [INFO] Start cfn-hup
2024/01/29 19:23:51.642513 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:23:51.662940 [INFO] cfn-hup is not registered with EB yet, registering it now
2024/01/29 19:23:51.662977 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:23:51.691160 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:23:52.325407 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:23:52.359426 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:23:52.373425 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:23:52.997494 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:23:53.010230 [INFO] Running command /bin/sh -c systemctl enable cfn-hup.service
2024/01/29 19:23:53.643587 [INFO] Synchronizing state of cfn-hup.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable cfn-hup
Created symlink /etc/systemd/system/multi-user.target.wants/cfn-hup.service → /etc/systemd/system/cfn-hup.service.

2024/01/29 19:23:53.643620 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:23:53.655851 [INFO] cfn-hup process is not running, starting it now
2024/01/29 19:23:53.655883 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:23:53.676374 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:23:53.687626 [INFO] Running command /bin/sh -c systemctl start cfn-hup.service
2024/01/29 19:23:53.787727 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:53.787750 [INFO] Executing instruction: SetupPublishLogCronjob
2024/01/29 19:23:53.787754 [INFO] Setup publish logs cron job...
2024/01/29 19:23:53.787758 [INFO] Copying file /opt/elasticbeanstalk/config/private/logtasks/cron/publishlogs to /etc/cron.d/publishlogs
2024/01/29 19:23:53.790975 [INFO] Executing instruction: Start Docker
2024/01/29 19:23:53.790997 [INFO] Starting Docker...
2024/01/29 19:23:53.791160 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:23:53.792207 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:23:53.793360 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:23:54.180182 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:23:54.207354 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:23:54.830226 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:23:54.850268 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:23:54.869828 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:23:54.892475 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:23:56.950436 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:56.950453 [INFO] Executing instruction: Setup Docker Options
2024/01/29 19:23:56.950457 [INFO] Setting up configurations for docker platform
2024/01/29 19:23:56.961367 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-events.service
2024/01/29 19:23:57.026604 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:23:57.706977 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:23:57.720757 [INFO] Running command /bin/sh -c systemctl enable eb-docker-events.service
2024/01/29 19:23:58.461733 [INFO] Created symlink /etc/systemd/system/docker.service.wants/eb-docker-events.service → /etc/systemd/system/eb-docker-events.service.

2024/01/29 19:23:58.461763 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-events.service
2024/01/29 19:23:58.487614 [INFO] Running command /bin/sh -c systemctl is-active eb-docker-events.service
2024/01/29 19:23:58.509293 [INFO] Running command /bin/sh -c systemctl start eb-docker-events.service
2024/01/29 19:23:58.620241 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:58.620260 [INFO] Executing instruction: MarkBootstrapped
2024/01/29 19:23:58.620264 [INFO] Starting MarkBootstrapped
2024/01/29 19:23:58.620269 [INFO] Instance has NOT been bootstrapped
2024/01/29 19:23:58.620357 [INFO] Marked instance as Bootstrapped
2024/01/29 19:23:58.620362 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:23:58.620413 [INFO] Starting SwitchCFNStack
2024/01/29 19:23:58.620418 [INFO] Executing instruction: stopSqsd
2024/01/29 19:23:58.620422 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:23:58.620425 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:23:58.620429 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:23:58.620503 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:23:59.624024 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:23:59.624050 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:23:59.624063 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:23:59.693882 [INFO] Pruning containers ...
2024/01/29 19:23:59.693916 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:23:59.764217 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:23:59.764283 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:23:59.835049 [INFO] Total reclaimed space: 0B

2024/01/29 19:23:59.835081 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:23:59.894718 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:23:59.894969 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:23:59.902913 [INFO] application/json

2024/01/29 19:23:59.902947 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:24:00.401542 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:24:00.401778 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:24:00.403054 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:24:00.403148 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:24:00.403165 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:24:00.403169 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:24:00.403174 [INFO] Executing instruction: Generate environment file
2024/01/29 19:24:00.403324 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:24:00.403329 [INFO] start build docker app
2024/01/29 19:24:00.403704 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:24:00.403709 [INFO] fetching image and ports
2024/01/29 19:24:00.405609 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:24:00.405683 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:24:00.405693 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:24:00.405705 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:24:03.591325 [INFO] Login Succeeded

2024/01/29 19:24:03.591511 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:24:03.591523 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:24:03.591549 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:24:40.139589 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
1b13d4e1a46e: Pulling fs layer
1c74526957fc: Pulling fs layer
30d855997954: Pulling fs layer
223fb869183b: Pulling fs layer
3bc4c1e5efad: Pulling fs layer
c516ddd64fde: Pulling fs layer
4f4fb700ef54: Pulling fs layer
2462fcaa694a: Pulling fs layer
dedb2801a494: Pulling fs layer
0fb5e8ce5b89: Pulling fs layer
c082eec6344d: Pulling fs layer
044199a24fef: Pulling fs layer
4f4fb700ef54: Waiting
2462fcaa694a: Waiting
dedb2801a494: Waiting
0fb5e8ce5b89: Waiting
c082eec6344d: Waiting
044199a24fef: Waiting
223fb869183b: Waiting
3bc4c1e5efad: Waiting
c516ddd64fde: Waiting
1c74526957fc: Verifying Checksum
1c74526957fc: Download complete
1b13d4e1a46e: Verifying Checksum
1b13d4e1a46e: Download complete
30d855997954: Verifying Checksum
30d855997954: Download complete
c516ddd64fde: Verifying Checksum
c516ddd64fde: Download complete
4f4fb700ef54: Verifying Checksum
4f4fb700ef54: Download complete
2462fcaa694a: Verifying Checksum
2462fcaa694a: Download complete
dedb2801a494: Verifying Checksum
dedb2801a494: Download complete
223fb869183b: Verifying Checksum
223fb869183b: Download complete
3bc4c1e5efad: Verifying Checksum
3bc4c1e5efad: Download complete
c082eec6344d: Verifying Checksum
c082eec6344d: Download complete
044199a24fef: Verifying Checksum
044199a24fef: Download complete
0fb5e8ce5b89: Verifying Checksum
0fb5e8ce5b89: Download complete
1b13d4e1a46e: Pull complete
1c74526957fc: Pull complete
30d855997954: Pull complete
223fb869183b: Pull complete
3bc4c1e5efad: Pull complete
c516ddd64fde: Pull complete
4f4fb700ef54: Pull complete
2462fcaa694a: Pull complete
dedb2801a494: Pull complete
0fb5e8ce5b89: Pull complete
c082eec6344d: Pull complete
044199a24fef: Pull complete
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Downloaded newer image for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:24:40.141389 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:24:40.141409 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:24:40.141413 [INFO] start to build docker image
2024/01/29 19:24:40.143675 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:24:41.208795 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context:
#1 transferring context: 2B done
#1 DONE 0.1s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.1s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 DONE 0.2s

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:24:41.209118 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:24:41.209125 [INFO] successfully build docker image
2024/01/29 19:24:41.209128 [INFO] save staging docker image id
2024/01/29 19:24:41.209142 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:24:41.249940 [INFO] c176d18fbf65

2024/01/29 19:24:41.250185 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:24:41.250192 [INFO] X-Ray is not enabled.
2024/01/29 19:24:41.250195 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:24:41.272630 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:24:41.275363 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:24:41.313940 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:24:41.682936 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:24:41.700489 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:24:41.710037 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:24:42.111928 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:24:42.128698 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:24:42.463935 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:24:42.463974 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:24:42.480698 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:24:42.492811 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:24:42.555008 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:24:42.556940 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:24:42.557757 [INFO] Executing instruction: configure log streaming
2024/01/29 19:24:42.557770 [INFO] log streaming is not enabled
2024/01/29 19:24:42.557772 [INFO] disable log stream
2024/01/29 19:24:42.557784 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:24:42.577845 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:24:42.600542 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:24:42.600567 [INFO] Checking if logs need forced rotation
2024/01/29 19:24:42.600590 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:24:43.317123 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:24:43.862304 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:24:43.865369 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:24:44.172183 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:24:44.190441 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:24:44.190473 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:24:44.190493 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:24:44.693372 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:24:44.693397 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:24:44.693423 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:24:44.693428 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:24:44.693451 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:24:44.693462 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:24:44.693465 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:24:44.693469 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:24:44.693472 [INFO] stop X-Ray ...
2024/01/29 19:24:44.693482 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:24:44.711849 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:24:44.711878 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:24:44.729472 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:24:44.729543 [INFO] this is the first time deploying app...
2024/01/29 19:24:44.729549 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:24:44.729557 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:24:44.729580 [INFO] detected new app is not docker compose app
2024/01/29 19:24:44.729862 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:24:45.791708 [INFO] 282913d74899dc25c5b7adcba271821fde75d3da185db3eb7d5d3d655afc6207

2024/01/29 19:24:50.796817 [INFO] Running command /bin/sh -c docker ps | grep -q 282913d74899
2024/01/29 19:24:50.818099 [ERROR] docker container quit unexpectedly on 2024-01-29 19:24:50.817612747 +0000 UTC: Command /bin/sh -c docker ps | grep -q 282913d74899 failed with error exit status 1
2024/01/29 19:24:50.818128 [INFO] Running command /bin/sh -c docker logs 282913d74899
2024/01/29 19:24:50.839778 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 282913d74899: Command /bin/sh -c docker ps | grep -q 282913d74899 failed with error exit status 1 

2024/01/29 19:24:50.839788 [INFO] Executing cleanup logic
2024/01/29 19:24:50.841997 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:24:53.867811 [INFO] Starting...
2024/01/29 19:24:53.867863 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:24:53.867897 [INFO] reading event message file
2024/01/29 19:24:53.871265 [INFO] Engine received EB command userdata-exec

2024/01/29 19:24:53.890508 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:24:54.339530 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:24:54.900100 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:24:54.900384 [INFO] Engine command: (self-startup)

2024/01/29 19:24:54.900405 [INFO] Downloading EB Application...
2024/01/29 19:24:54.900408 [INFO] Region: eu-west-1
2024/01/29 19:24:54.900411 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:24:54.900413 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:24:54.900416 [INFO] Using manifest file name from command request
2024/01/29 19:24:54.900428 [INFO] Unable to get version manifest file.
2024/01/29 19:24:54.900430 [INFO] Downloading latest manifest available.
2024/01/29 19:24:54.900432 [INFO] Download latest app version manifest
2024/01/29 19:24:54.900650 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:24:54.936491 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:24:54.938005 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:24:54.951156 [INFO] Download successful124bytes downloaded
2024/01/29 19:24:54.951317 [INFO] Trying to read and parse version manifest...
2024/01/29 19:24:54.951407 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:24:54.991402 [INFO] Download successful264bytes downloaded
2024/01/29 19:24:54.991611 [INFO] Executing instruction: SyncClock
2024/01/29 19:24:54.991617 [INFO] Starting SyncClock
2024/01/29 19:24:54.991630 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:24:55.010476 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:24:53 2024
System time     : 0.000009426 seconds slow of NTP time
Last offset     : -0.000006404 seconds
RMS offset      : 0.000164422 seconds
Frequency       : 0.743 ppm fast
Residual freq   : -0.013 ppm
Skew            : 1.861 ppm
Root delay      : 0.000517807 seconds
Root dispersion : 0.000344995 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/29 19:24:55.010508 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:24:55.021093 [INFO] 200 OK

2024/01/29 19:24:55.021308 [INFO] Skipping Configure OS
2024/01/29 19:24:55.021320 [INFO] Skipping LockRepo
2024/01/29 19:24:55.021325 [INFO] Skipping GenerateEBBanner
2024/01/29 19:24:55.021332 [INFO] Skipping Install Process Manager
2024/01/29 19:24:55.021337 [INFO] Skipping install syslog
2024/01/29 19:24:55.021366 [INFO] Skipping install cron
2024/01/29 19:24:55.021373 [INFO] Skipping install proxy
2024/01/29 19:24:55.021380 [INFO] Skipping installhealthd
2024/01/29 19:24:55.021386 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:24:55.021392 [INFO] Skipping install X-Ray
2024/01/29 19:24:55.021398 [INFO] Skipping install Third Party License
2024/01/29 19:24:55.021404 [INFO] Skipping installSqsd
2024/01/29 19:24:55.021410 [INFO] Skipping bootstraphealthd
2024/01/29 19:24:55.021415 [INFO] Skipping Install yum packages
2024/01/29 19:24:55.021426 [INFO] Skipping install docker-compose
2024/01/29 19:24:55.021441 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:24:55.021446 [INFO] Skipping MarkBaked
2024/01/29 19:24:55.021452 [INFO] Skipping TuneSystemSettings
2024/01/29 19:24:55.021456 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:24:55.021459 [INFO] Initialize LogRotate files and directories
2024/01/29 19:24:55.037878 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:24:55.037891 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:24:55.037894 [INFO] Start cfn-hup
2024/01/29 19:24:55.037911 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:24:55.069041 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:24:55.083973 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:24:55.084003 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:24:55.084006 [INFO] Executing instruction: Start Docker
2024/01/29 19:24:55.084009 [INFO] Starting Docker...
2024/01/29 19:24:55.084068 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:24:55.085555 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:24:55.086595 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:24:55.424385 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:24:55.446415 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:24:55.446450 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:24:55.464274 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:24:55.477822 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:24:55.491105 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:24:55.592782 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:24:55.592857 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:24:56.045459 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:24:56.444739 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:24:56.459090 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:24:56.717612 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:24:56.727009 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:24:56.739159 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:24:56.747402 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:24:57.945818 [INFO] Skipping Setup Docker Options
2024/01/29 19:24:57.945854 [INFO] Skipping MarkBootstrapped
2024/01/29 19:24:57.945859 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:24:57.946014 [INFO] Starting SwitchCFNStack
2024/01/29 19:24:57.946023 [INFO] Executing instruction: stopSqsd
2024/01/29 19:24:57.946028 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:24:57.946032 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:24:57.946037 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:24:57.946065 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:24:58.395894 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:24:58.395917 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:24:58.395939 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:24:58.419365 [INFO] Pruning containers ...
2024/01/29 19:24:58.419393 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:24:58.440472 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
282913d74899   c176d18fbf65   "./main --environmen…"   14 seconds ago   Exited (1) 12 seconds ago             focused_zhukovsky

2024/01/29 19:24:58.440500 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:24:58.470494 [INFO] Deleted Containers:
282913d74899dc25c5b7adcba271821fde75d3da185db3eb7d5d3d655afc6207

Total reclaimed space: 0B

2024/01/29 19:24:58.470519 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:24:58.488640 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:24:58.488878 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:24:58.498312 [INFO] application/json

2024/01/29 19:24:58.498339 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:24:58.873378 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:24:58.873624 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:24:58.874647 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:24:58.874670 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:24:58.874683 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:24:58.874685 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:24:58.874690 [INFO] Executing instruction: Generate environment file
2024/01/29 19:24:58.874720 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:24:58.874725 [INFO] start build docker app
2024/01/29 19:24:58.875090 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:24:58.875094 [INFO] fetching image and ports
2024/01/29 19:24:58.877312 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:24:58.877361 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:24:58.877370 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:24:58.877380 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:25:00.473207 [INFO] Login Succeeded

2024/01/29 19:25:00.473229 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:25:00.473236 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:25:00.473253 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:00.678061 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:25:00.678085 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:00.678094 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:00.678179 [INFO] start to build docker image
2024/01/29 19:25:00.678196 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:01.125449 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:25:01.125472 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:01.125477 [INFO] successfully build docker image
2024/01/29 19:25:01.125479 [INFO] save staging docker image id
2024/01/29 19:25:01.125495 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:25:01.159507 [INFO] c176d18fbf65

2024/01/29 19:25:01.159693 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:25:01.159699 [INFO] X-Ray is not enabled.
2024/01/29 19:25:01.159702 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:25:01.175634 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:25:01.178560 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:01.227639 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:25:01.227674 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:01.245603 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:01.264593 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:01.296570 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:25:01.400490 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:25:01.960964 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:25:01.961157 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:02.450329 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:02.478475 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:02.858046 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:02.868304 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:25:02.878047 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:25:03.146031 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:25:03.157086 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:25:03.440902 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:25:03.440943 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:03.453835 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:03.462053 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:25:03.568080 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:25:03.569095 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:25:03.570105 [INFO] Executing instruction: configure log streaming
2024/01/29 19:25:03.570115 [INFO] log streaming is not enabled
2024/01/29 19:25:03.570118 [INFO] disable log stream
2024/01/29 19:25:03.570133 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:25:03.586248 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:25:03.606166 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:25:03.606186 [INFO] Checking if logs need forced rotation
2024/01/29 19:25:03.606207 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:04.217592 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:04.839067 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:25:04.841319 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:05.422984 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:25:05.448417 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:25:05.448438 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:25:05.448451 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:25:05.970035 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:25:05.970075 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:25:05.970156 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:25:05.970162 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:25:05.970183 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:25:05.970194 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:25:05.970197 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:25:05.970202 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:25:05.970204 [INFO] stop X-Ray ...
2024/01/29 19:25:05.970222 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:25:05.988690 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:25:05.988717 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:25:06.006015 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:25:06.006059 [INFO] stop currently running containers...
2024/01/29 19:25:06.006078 [INFO] detected old app is not docker compose app
2024/01/29 19:25:06.006095 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:25:06.052484 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:25:06.068820 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:25:06.068849 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:25:06.114788 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:25:06.114823 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:25:06.166578 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:25:06.166636 [INFO] stopping current container: 282913d74899
2024/01/29 19:25:06.166657 [INFO] Running command /bin/sh -c docker ps | grep -q 282913d74899
2024/01/29 19:25:06.231901 [INFO] Running command /bin/sh -c docker ps | grep -q 282913d74899
2024/01/29 19:25:06.258436 [INFO] Pruning containers ...
2024/01/29 19:25:06.258458 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:06.298016 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:06.298257 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:06.329143 [INFO] Total reclaimed space: 0B

2024/01/29 19:25:06.329172 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:06.369105 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:06.369147 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:25:06.401765 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:25:06.401787 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:25:06.401882 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:25:06.401898 [INFO] detected new app is not docker compose app
2024/01/29 19:25:06.401952 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:25:06.944633 [INFO] 8b0501eeb845908dbdc61f0e94de91a1a6e36655f942d538706615d97e69988f

2024/01/29 19:25:11.945226 [INFO] Running command /bin/sh -c docker ps | grep -q 8b0501eeb845
2024/01/29 19:25:11.974504 [ERROR] docker container quit unexpectedly on 2024-01-29 19:25:11.974493363 +0000 UTC: Command /bin/sh -c docker ps | grep -q 8b0501eeb845 failed with error exit status 1
2024/01/29 19:25:11.974533 [INFO] Running command /bin/sh -c docker logs 8b0501eeb845
2024/01/29 19:25:11.997116 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 8b0501eeb845: Command /bin/sh -c docker ps | grep -q 8b0501eeb845 failed with error exit status 1 

2024/01/29 19:25:11.997126 [INFO] Executing cleanup logic
2024/01/29 19:25:11.997443 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:25:17.101952 [INFO] Starting...
2024/01/29 19:25:17.101989 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:25:17.102017 [INFO] reading event message file
2024/01/29 19:25:17.102733 [INFO] Engine received EB command userdata-exec

2024/01/29 19:25:17.110389 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:17.489680 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:17.925183 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:25:17.925339 [INFO] Engine command: (self-startup)

2024/01/29 19:25:17.925349 [INFO] Downloading EB Application...
2024/01/29 19:25:17.925353 [INFO] Region: eu-west-1
2024/01/29 19:25:17.925356 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:25:17.925359 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:25:17.925362 [INFO] Using manifest file name from command request
2024/01/29 19:25:17.925375 [INFO] Unable to get version manifest file.
2024/01/29 19:25:17.925378 [INFO] Downloading latest manifest available.
2024/01/29 19:25:17.925380 [INFO] Download latest app version manifest
2024/01/29 19:25:17.925512 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:25:17.965315 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:25:17.965614 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:25:17.977405 [INFO] Download successful124bytes downloaded
2024/01/29 19:25:17.977536 [INFO] Trying to read and parse version manifest...
2024/01/29 19:25:17.977605 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:18.006666 [INFO] Download successful264bytes downloaded
2024/01/29 19:25:18.006892 [INFO] Executing instruction: SyncClock
2024/01/29 19:25:18.006897 [INFO] Starting SyncClock
2024/01/29 19:25:18.006907 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:25:18.014919 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:25:09 2024
System time     : 0.000004635 seconds fast of NTP time
Last offset     : +0.000004995 seconds
RMS offset      : 0.000155993 seconds
Frequency       : 0.785 ppm fast
Residual freq   : +0.011 ppm
Skew            : 1.731 ppm
Root delay      : 0.000517807 seconds
Root dispersion : 0.000397449 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 19:25:18.014944 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:25:18.022310 [INFO] 200 OK

2024/01/29 19:25:18.022494 [INFO] Skipping Configure OS
2024/01/29 19:25:18.022506 [INFO] Skipping LockRepo
2024/01/29 19:25:18.022511 [INFO] Skipping GenerateEBBanner
2024/01/29 19:25:18.022517 [INFO] Skipping Install Process Manager
2024/01/29 19:25:18.022521 [INFO] Skipping install syslog
2024/01/29 19:25:18.022527 [INFO] Skipping install cron
2024/01/29 19:25:18.022532 [INFO] Skipping install proxy
2024/01/29 19:25:18.022536 [INFO] Skipping installhealthd
2024/01/29 19:25:18.022541 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:25:18.022546 [INFO] Skipping install X-Ray
2024/01/29 19:25:18.022551 [INFO] Skipping install Third Party License
2024/01/29 19:25:18.022569 [INFO] Skipping installSqsd
2024/01/29 19:25:18.022574 [INFO] Skipping bootstraphealthd
2024/01/29 19:25:18.022579 [INFO] Skipping Install yum packages
2024/01/29 19:25:18.022584 [INFO] Skipping install docker-compose
2024/01/29 19:25:18.022592 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:25:18.022597 [INFO] Skipping MarkBaked
2024/01/29 19:25:18.022602 [INFO] Skipping TuneSystemSettings
2024/01/29 19:25:18.022606 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:25:18.022611 [INFO] Initialize LogRotate files and directories
2024/01/29 19:25:18.039607 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:25:18.039623 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:25:18.039628 [INFO] Start cfn-hup
2024/01/29 19:25:18.039647 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:25:18.071890 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:25:18.089440 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:25:18.089475 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:25:18.089479 [INFO] Executing instruction: Start Docker
2024/01/29 19:25:18.089483 [INFO] Starting Docker...
2024/01/29 19:25:18.089563 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:25:18.090746 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:25:18.091803 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:18.439499 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:18.455306 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:25:18.455341 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:18.466103 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:25:18.476876 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:18.490815 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:25:18.576823 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:25:18.576851 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:25:18.957080 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:19.243183 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:19.254104 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:19.565515 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:19.577433 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:19.593271 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:25:19.604473 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:25:20.812948 [INFO] Skipping Setup Docker Options
2024/01/29 19:25:20.812972 [INFO] Skipping MarkBootstrapped
2024/01/29 19:25:20.812975 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:25:20.813064 [INFO] Starting SwitchCFNStack
2024/01/29 19:25:20.813068 [INFO] Executing instruction: stopSqsd
2024/01/29 19:25:20.813071 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:25:20.813074 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:25:20.813077 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:25:20.813090 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:25:21.269185 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:25:21.269212 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:25:21.269223 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:25:21.292391 [INFO] Pruning containers ...
2024/01/29 19:25:21.292422 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:21.315221 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
8b0501eeb845   c176d18fbf65   "./main --environmen…"   15 seconds ago   Exited (1) 14 seconds ago             cranky_mestorf

2024/01/29 19:25:21.315249 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:21.341881 [INFO] Deleted Containers:
8b0501eeb845908dbdc61f0e94de91a1a6e36655f942d538706615d97e69988f

Total reclaimed space: 0B

2024/01/29 19:25:21.341905 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:21.373144 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:21.373393 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:25:21.376265 [INFO] application/json

2024/01/29 19:25:21.376282 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:25:21.462515 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:25:21.462681 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:25:21.464087 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:25:21.464116 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:25:21.464133 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:25:21.464136 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:25:21.464147 [INFO] Executing instruction: Generate environment file
2024/01/29 19:25:21.464175 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:25:21.464178 [INFO] start build docker app
2024/01/29 19:25:21.464614 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:25:21.464620 [INFO] fetching image and ports
2024/01/29 19:25:21.467383 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:25:21.467455 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:25:21.467465 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:25:21.467475 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:25:22.389615 [INFO] Login Succeeded

2024/01/29 19:25:22.389646 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:25:22.389654 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:25:22.389675 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:22.530776 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:25:22.530798 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:22.530807 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:22.530810 [INFO] start to build docker image
2024/01/29 19:25:22.530840 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:22.834838 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:25:22.834860 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:22.834863 [INFO] successfully build docker image
2024/01/29 19:25:22.834866 [INFO] save staging docker image id
2024/01/29 19:25:22.834880 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:25:22.860082 [INFO] c176d18fbf65

2024/01/29 19:25:22.860284 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:25:22.860291 [INFO] X-Ray is not enabled.
2024/01/29 19:25:22.860294 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:25:22.866820 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:25:22.868603 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:22.882393 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:25:22.882422 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:22.893129 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:22.903602 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:22.919636 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:25:22.979359 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:25:23.286065 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:25:23.286156 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:23.612675 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:23.624563 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:23.932697 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:23.949407 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:25:23.963474 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:25:24.390342 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:25:24.406372 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:25:24.775895 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:25:24.775931 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:24.795337 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:24.806899 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:25:24.872497 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:25:24.873513 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:25:24.874498 [INFO] Executing instruction: configure log streaming
2024/01/29 19:25:24.874602 [INFO] log streaming is not enabled
2024/01/29 19:25:24.874608 [INFO] disable log stream
2024/01/29 19:25:24.874628 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:25:24.892427 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:25:24.921538 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:25:24.921563 [INFO] Checking if logs need forced rotation
2024/01/29 19:25:24.921584 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:25.489684 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:26.023477 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:25:26.025383 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:26.423411 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:25:26.442378 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:25:26.442393 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:25:26.442405 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:25:26.914090 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:25:26.914175 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:25:26.914200 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:25:26.914204 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:25:26.914228 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:25:26.914238 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:25:26.914241 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:25:26.914246 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:25:26.914248 [INFO] stop X-Ray ...
2024/01/29 19:25:26.914258 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:25:26.931192 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:25:26.931226 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:25:26.949151 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:25:26.949183 [INFO] stop currently running containers...
2024/01/29 19:25:26.949193 [INFO] detected old app is not docker compose app
2024/01/29 19:25:26.949204 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:25:27.023368 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:25:27.063223 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:25:27.063260 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:25:27.098364 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:25:27.098398 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:25:27.114197 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:25:27.114252 [INFO] stopping current container: 8b0501eeb845
2024/01/29 19:25:27.114265 [INFO] Running command /bin/sh -c docker ps | grep -q 8b0501eeb845
2024/01/29 19:25:27.137455 [INFO] Running command /bin/sh -c docker ps | grep -q 8b0501eeb845
2024/01/29 19:25:27.157933 [INFO] Pruning containers ...
2024/01/29 19:25:27.157991 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:27.179049 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:27.179079 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:27.198940 [INFO] Total reclaimed space: 0B

2024/01/29 19:25:27.198974 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:27.217463 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:27.217492 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:25:27.237949 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:25:27.237969 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:25:27.238157 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:25:27.238175 [INFO] detected new app is not docker compose app
2024/01/29 19:25:27.238223 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:25:27.715539 [INFO] 5f05d2f27000dc866a1a495c0a370402ca23ab10b31564672e3640176eec2410

2024/01/29 19:25:32.716047 [INFO] Running command /bin/sh -c docker ps | grep -q 5f05d2f27000
2024/01/29 19:25:32.782244 [ERROR] docker container quit unexpectedly on 2024-01-29 19:25:32.782232401 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5f05d2f27000 failed with error exit status 1
2024/01/29 19:25:32.782274 [INFO] Running command /bin/sh -c docker logs 5f05d2f27000
2024/01/29 19:25:32.814886 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5f05d2f27000: Command /bin/sh -c docker ps | grep -q 5f05d2f27000 failed with error exit status 1 

2024/01/29 19:25:32.814898 [INFO] Executing cleanup logic
2024/01/29 19:25:32.815092 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:25:41.789583 [INFO] Starting...
2024/01/29 19:25:41.789620 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:25:41.789650 [INFO] reading event message file
2024/01/29 19:25:41.790347 [INFO] Engine received EB command userdata-exec

2024/01/29 19:25:41.802171 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:42.224592 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:42.799923 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:25:42.800014 [INFO] Engine command: (self-startup)

2024/01/29 19:25:42.800022 [INFO] Downloading EB Application...
2024/01/29 19:25:42.800026 [INFO] Region: eu-west-1
2024/01/29 19:25:42.800029 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:25:42.800033 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:25:42.800036 [INFO] Using manifest file name from command request
2024/01/29 19:25:42.800053 [INFO] Unable to get version manifest file.
2024/01/29 19:25:42.800056 [INFO] Downloading latest manifest available.
2024/01/29 19:25:42.800058 [INFO] Download latest app version manifest
2024/01/29 19:25:42.800213 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:25:42.842568 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:25:42.842741 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:25:42.854423 [INFO] Download successful124bytes downloaded
2024/01/29 19:25:42.854643 [INFO] Trying to read and parse version manifest...
2024/01/29 19:25:42.854719 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:42.866783 [INFO] Download successful264bytes downloaded
2024/01/29 19:25:42.867004 [INFO] Executing instruction: SyncClock
2024/01/29 19:25:42.867008 [INFO] Starting SyncClock
2024/01/29 19:25:42.867018 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:25:42.871840 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:25:41 2024
System time     : 0.000003736 seconds slow of NTP time
Last offset     : +0.000001460 seconds
RMS offset      : 0.000140411 seconds
Frequency       : 0.730 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.636 ppm
Root delay      : 0.000457049 seconds
Root dispersion : 0.000353087 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 19:25:42.871868 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:25:42.878805 [INFO] 200 OK

2024/01/29 19:25:42.878894 [INFO] Skipping Configure OS
2024/01/29 19:25:42.878899 [INFO] Skipping LockRepo
2024/01/29 19:25:42.878904 [INFO] Skipping GenerateEBBanner
2024/01/29 19:25:42.878908 [INFO] Skipping Install Process Manager
2024/01/29 19:25:42.878912 [INFO] Skipping install syslog
2024/01/29 19:25:42.878916 [INFO] Skipping install cron
2024/01/29 19:25:42.878920 [INFO] Skipping install proxy
2024/01/29 19:25:42.878924 [INFO] Skipping installhealthd
2024/01/29 19:25:42.878928 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:25:42.878931 [INFO] Skipping install X-Ray
2024/01/29 19:25:42.878936 [INFO] Skipping install Third Party License
2024/01/29 19:25:42.879016 [INFO] Skipping installSqsd
2024/01/29 19:25:42.879027 [INFO] Skipping bootstraphealthd
2024/01/29 19:25:42.879032 [INFO] Skipping Install yum packages
2024/01/29 19:25:42.879036 [INFO] Skipping install docker-compose
2024/01/29 19:25:42.879039 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:25:42.879046 [INFO] Skipping MarkBaked
2024/01/29 19:25:42.879050 [INFO] Skipping TuneSystemSettings
2024/01/29 19:25:42.879052 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:25:42.879055 [INFO] Initialize LogRotate files and directories
2024/01/29 19:25:42.890760 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:25:42.890768 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:25:42.890770 [INFO] Start cfn-hup
2024/01/29 19:25:42.890788 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:25:42.923569 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:25:42.946759 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:25:42.946795 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:25:42.946800 [INFO] Executing instruction: Start Docker
2024/01/29 19:25:42.946803 [INFO] Starting Docker...
2024/01/29 19:25:42.946885 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:25:42.952353 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:25:42.953429 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:43.385485 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:43.408962 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:25:43.408995 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:43.426352 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:25:43.439029 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:43.452491 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:25:43.534972 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:25:43.535000 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:25:43.825647 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:44.222190 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:44.234058 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:44.597276 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:44.617418 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:25:44.635282 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:25:44.645785 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:25:46.000482 [INFO] Skipping Setup Docker Options
2024/01/29 19:25:46.000504 [INFO] Skipping MarkBootstrapped
2024/01/29 19:25:46.000507 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:25:46.000595 [INFO] Starting SwitchCFNStack
2024/01/29 19:25:46.000599 [INFO] Executing instruction: stopSqsd
2024/01/29 19:25:46.000602 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:25:46.000605 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:25:46.000608 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:25:46.000623 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:25:46.383343 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:25:46.383436 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:25:46.383450 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:25:46.403629 [INFO] Pruning containers ...
2024/01/29 19:25:46.403660 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:46.422015 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
5f05d2f27000   c176d18fbf65   "./main --environmen…"   19 seconds ago   Exited (1) 18 seconds ago             reverent_napier

2024/01/29 19:25:46.422051 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:46.445795 [INFO] Deleted Containers:
5f05d2f27000dc866a1a495c0a370402ca23ab10b31564672e3640176eec2410

Total reclaimed space: 0B

2024/01/29 19:25:46.445819 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:46.463496 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:46.463732 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:25:46.467231 [INFO] application/json

2024/01/29 19:25:46.467253 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:25:46.541990 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/29 19:25:46.542150 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:25:46.543428 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:25:46.543455 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:25:46.543473 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:25:46.543477 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:25:46.543483 [INFO] Executing instruction: Generate environment file
2024/01/29 19:25:46.543510 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:25:46.543514 [INFO] start build docker app
2024/01/29 19:25:46.543872 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:25:46.543877 [INFO] fetching image and ports
2024/01/29 19:25:46.545466 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:25:46.545512 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:25:46.545520 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:25:46.545529 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:25:47.517815 [INFO] Login Succeeded

2024/01/29 19:25:47.517834 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:25:47.517841 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:25:47.517858 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:47.650852 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:25:47.650893 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:47.650896 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:25:47.650900 [INFO] start to build docker image
2024/01/29 19:25:47.650921 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:47.881315 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:25:47.881339 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:25:47.881368 [INFO] successfully build docker image
2024/01/29 19:25:47.881371 [INFO] save staging docker image id
2024/01/29 19:25:47.881387 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:25:47.901260 [INFO] c176d18fbf65

2024/01/29 19:25:47.901420 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:25:47.901428 [INFO] X-Ray is not enabled.
2024/01/29 19:25:47.901430 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:25:47.906301 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:25:47.907638 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:47.920610 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:25:47.920642 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:47.930700 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:47.939824 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:47.951371 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:25:48.010932 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:25:48.393268 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:25:48.393350 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:48.741848 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:48.753837 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:25:49.051339 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:25:49.060706 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:25:49.069034 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:25:49.342485 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:25:49.352001 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:25:49.660937 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:25:49.660988 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:25:49.678905 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:25:49.688404 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:25:49.759936 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:25:49.760844 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:25:49.761708 [INFO] Executing instruction: configure log streaming
2024/01/29 19:25:49.761720 [INFO] log streaming is not enabled
2024/01/29 19:25:49.761724 [INFO] disable log stream
2024/01/29 19:25:49.761738 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:25:49.781144 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:25:49.799425 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:25:49.799448 [INFO] Checking if logs need forced rotation
2024/01/29 19:25:49.799468 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:25:50.270940 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:25:50.741165 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:25:50.742667 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:25:50.933502 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:25:50.952983 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:25:50.952999 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:25:50.953013 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:25:51.321638 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:25:51.321666 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:25:51.321689 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:25:51.321691 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:25:51.321714 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:25:51.321729 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:25:51.321733 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:25:51.321739 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:25:51.321743 [INFO] stop X-Ray ...
2024/01/29 19:25:51.321755 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:25:51.339133 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:25:51.339167 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:25:51.355875 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:25:51.355905 [INFO] stop currently running containers...
2024/01/29 19:25:51.355914 [INFO] detected old app is not docker compose app
2024/01/29 19:25:51.355928 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:25:51.412916 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:25:51.427422 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:25:51.427457 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:25:51.441977 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:25:51.442027 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:25:51.455750 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:25:51.455797 [INFO] stopping current container: 5f05d2f27000
2024/01/29 19:25:51.455807 [INFO] Running command /bin/sh -c docker ps | grep -q 5f05d2f27000
2024/01/29 19:25:51.488855 [INFO] Running command /bin/sh -c docker ps | grep -q 5f05d2f27000
2024/01/29 19:25:51.513243 [INFO] Pruning containers ...
2024/01/29 19:25:51.513265 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:51.533928 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:51.533962 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:25:51.555376 [INFO] Total reclaimed space: 0B

2024/01/29 19:25:51.555406 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:25:51.574343 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:25:51.574381 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:25:51.597850 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:25:51.597869 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:25:51.598024 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:25:51.598040 [INFO] detected new app is not docker compose app
2024/01/29 19:25:51.598131 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:25:52.045460 [INFO] 69198963c866864784029e9e9ee4c05b310b22ee43ed89c0cca5f3cf6f07f6be

2024/01/29 19:25:57.046166 [INFO] Running command /bin/sh -c docker ps | grep -q 69198963c866
2024/01/29 19:25:57.070568 [ERROR] docker container quit unexpectedly on 2024-01-29 19:25:57.070547509 +0000 UTC: Command /bin/sh -c docker ps | grep -q 69198963c866 failed with error exit status 1
2024/01/29 19:25:57.070599 [INFO] Running command /bin/sh -c docker logs 69198963c866
2024/01/29 19:25:57.092611 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 69198963c866: Command /bin/sh -c docker ps | grep -q 69198963c866 failed with error exit status 1 

2024/01/29 19:25:57.092620 [INFO] Executing cleanup logic
2024/01/29 19:25:57.092817 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:26:14.084142 [INFO] Starting...
2024/01/29 19:26:14.084183 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:26:14.084208 [INFO] reading event message file
2024/01/29 19:26:14.084948 [INFO] Engine received EB command userdata-exec

2024/01/29 19:26:14.090827 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:26:14.544690 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:26:15.014630 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:26:15.014760 [INFO] Engine command: (self-startup)

2024/01/29 19:26:15.014778 [INFO] Downloading EB Application...
2024/01/29 19:26:15.014782 [INFO] Region: eu-west-1
2024/01/29 19:26:15.014785 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:26:15.014788 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:26:15.014792 [INFO] Using manifest file name from command request
2024/01/29 19:26:15.014813 [INFO] Unable to get version manifest file.
2024/01/29 19:26:15.014816 [INFO] Downloading latest manifest available.
2024/01/29 19:26:15.014823 [INFO] Download latest app version manifest
2024/01/29 19:26:15.015091 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:26:15.058256 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:26:15.058481 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:26:15.069936 [INFO] Download successful124bytes downloaded
2024/01/29 19:26:15.070094 [INFO] Trying to read and parse version manifest...
2024/01/29 19:26:15.070176 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:26:15.083199 [INFO] Download successful264bytes downloaded
2024/01/29 19:26:15.083461 [INFO] Executing instruction: SyncClock
2024/01/29 19:26:15.083466 [INFO] Starting SyncClock
2024/01/29 19:26:15.083479 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:26:15.098152 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:26:14 2024
System time     : 0.000019992 seconds slow of NTP time
Last offset     : -0.000017347 seconds
RMS offset      : 0.000126495 seconds
Frequency       : 0.626 ppm fast
Residual freq   : -0.009 ppm
Skew            : 0.352 ppm
Root delay      : 0.000468342 seconds
Root dispersion : 0.000338065 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/29 19:26:15.098197 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:26:15.121072 [INFO] 200 OK

2024/01/29 19:26:15.121214 [INFO] Skipping Configure OS
2024/01/29 19:26:15.121224 [INFO] Skipping LockRepo
2024/01/29 19:26:15.121229 [INFO] Skipping GenerateEBBanner
2024/01/29 19:26:15.121233 [INFO] Skipping Install Process Manager
2024/01/29 19:26:15.121237 [INFO] Skipping install syslog
2024/01/29 19:26:15.121241 [INFO] Skipping install cron
2024/01/29 19:26:15.121245 [INFO] Skipping install proxy
2024/01/29 19:26:15.121249 [INFO] Skipping installhealthd
2024/01/29 19:26:15.121253 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:26:15.121256 [INFO] Skipping install X-Ray
2024/01/29 19:26:15.121260 [INFO] Skipping install Third Party License
2024/01/29 19:26:15.121266 [INFO] Skipping installSqsd
2024/01/29 19:26:15.121270 [INFO] Skipping bootstraphealthd
2024/01/29 19:26:15.121274 [INFO] Skipping Install yum packages
2024/01/29 19:26:15.121278 [INFO] Skipping install docker-compose
2024/01/29 19:26:15.121282 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:26:15.121288 [INFO] Skipping MarkBaked
2024/01/29 19:26:15.121293 [INFO] Skipping TuneSystemSettings
2024/01/29 19:26:15.121297 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:26:15.121300 [INFO] Initialize LogRotate files and directories
2024/01/29 19:26:15.133658 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:26:15.133670 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:26:15.133672 [INFO] Start cfn-hup
2024/01/29 19:26:15.133690 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:26:15.178802 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:26:15.191561 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:26:15.191597 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:26:15.191601 [INFO] Executing instruction: Start Docker
2024/01/29 19:26:15.191604 [INFO] Starting Docker...
2024/01/29 19:26:15.191681 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:26:15.192699 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:26:15.193691 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:26:15.669392 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:26:15.687549 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:26:15.687583 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:26:15.700040 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:26:15.710852 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:26:15.722215 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:26:15.801497 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:26:15.801566 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:26:16.201406 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:26:16.632058 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:26:16.672833 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:26:17.044269 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:26:17.058290 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:26:17.077998 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:26:17.089765 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:26:18.399100 [INFO] Skipping Setup Docker Options
2024/01/29 19:26:18.399132 [INFO] Skipping MarkBootstrapped
2024/01/29 19:26:18.399136 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:26:18.399392 [INFO] Starting SwitchCFNStack
2024/01/29 19:26:18.399430 [INFO] Executing instruction: stopSqsd
2024/01/29 19:26:18.399435 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:26:18.399444 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:26:18.399447 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:26:18.399466 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:26:18.912667 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:26:18.912695 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:26:18.912709 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:26:18.946853 [INFO] Pruning containers ...
2024/01/29 19:26:18.946883 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:26:18.985626 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
69198963c866   c176d18fbf65   "./main --environmen…"   27 seconds ago   Exited (1) 26 seconds ago             competent_hopper

2024/01/29 19:26:18.985658 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:26:19.020827 [INFO] Deleted Containers:
69198963c866864784029e9e9ee4c05b310b22ee43ed89c0cca5f3cf6f07f6be

Total reclaimed space: 0B

2024/01/29 19:26:19.020851 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:26:19.042806 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:26:19.043034 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:26:19.046421 [INFO] application/json

2024/01/29 19:26:19.046440 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:26:19.126670 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/29 19:26:19.126851 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:26:19.128123 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:26:19.128152 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:26:19.128168 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:26:19.128176 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:26:19.128181 [INFO] Executing instruction: Generate environment file
2024/01/29 19:26:19.128206 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:26:19.128209 [INFO] start build docker app
2024/01/29 19:26:19.128557 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:26:19.128560 [INFO] fetching image and ports
2024/01/29 19:26:19.130258 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:26:19.130310 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:26:19.130319 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:26:19.130329 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:26:20.228918 [INFO] Login Succeeded

2024/01/29 19:26:20.228940 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:26:20.228952 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:26:20.228975 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:26:20.362483 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:26:20.362506 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:26:20.362509 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:26:20.362513 [INFO] start to build docker image
2024/01/29 19:26:20.362527 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:26:20.652240 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:26:20.652261 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:26:20.652267 [INFO] successfully build docker image
2024/01/29 19:26:20.652269 [INFO] save staging docker image id
2024/01/29 19:26:20.652283 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:26:20.673499 [INFO] c176d18fbf65

2024/01/29 19:26:20.673613 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:26:20.673619 [INFO] X-Ray is not enabled.
2024/01/29 19:26:20.673622 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:26:20.682403 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:26:20.684287 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:26:20.698071 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:26:20.698101 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:26:20.708779 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:26:20.718783 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:26:20.731989 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:26:20.799608 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:26:21.160632 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:26:21.160700 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:26:21.466713 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:26:21.479343 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:26:21.839525 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:26:21.849475 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:26:21.860325 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:26:22.190053 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:26:22.204491 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:26:22.556096 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:26:22.556133 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:26:22.570914 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:26:22.582257 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:26:22.683353 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:26:22.684296 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:26:22.685130 [INFO] Executing instruction: configure log streaming
2024/01/29 19:26:22.685142 [INFO] log streaming is not enabled
2024/01/29 19:26:22.685145 [INFO] disable log stream
2024/01/29 19:26:22.685160 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:26:22.708257 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:26:22.729214 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:26:22.729238 [INFO] Checking if logs need forced rotation
2024/01/29 19:26:22.729368 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:26:23.291108 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:26:23.817062 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:26:23.818860 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:26:24.165707 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:26:24.183869 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:26:24.183886 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:26:24.183905 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:26:24.642419 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:26:24.642462 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:26:24.642500 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:26:24.642505 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:26:24.642539 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:26:24.642550 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:26:24.642553 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:26:24.642558 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:26:24.642560 [INFO] stop X-Ray ...
2024/01/29 19:26:24.642572 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:26:24.658012 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:26:24.658041 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:26:24.677727 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:26:24.677756 [INFO] stop currently running containers...
2024/01/29 19:26:24.677765 [INFO] detected old app is not docker compose app
2024/01/29 19:26:24.677779 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:26:24.732588 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:26:24.763168 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:26:24.763209 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:26:24.782720 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:26:24.782754 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:26:24.799589 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:26:24.799821 [INFO] stopping current container: 69198963c866
2024/01/29 19:26:24.799839 [INFO] Running command /bin/sh -c docker ps | grep -q 69198963c866
2024/01/29 19:26:24.821766 [INFO] Running command /bin/sh -c docker ps | grep -q 69198963c866
2024/01/29 19:26:24.844812 [INFO] Pruning containers ...
2024/01/29 19:26:24.844948 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:26:24.872288 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:26:24.872320 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:26:24.891378 [INFO] Total reclaimed space: 0B

2024/01/29 19:26:24.891419 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:26:24.925214 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:26:24.925243 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:26:24.949142 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:26:24.949161 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:26:24.949302 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:26:24.949326 [INFO] detected new app is not docker compose app
2024/01/29 19:26:24.949387 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:26:25.444761 [INFO] 3b5cff14a0df1e5e3326237f61f606c223c7b1f3072c4297013a168e7b8b2f13

2024/01/29 19:26:30.445159 [INFO] Running command /bin/sh -c docker ps | grep -q 3b5cff14a0df
2024/01/29 19:26:30.476011 [ERROR] docker container quit unexpectedly on 2024-01-29 19:26:30.475993972 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3b5cff14a0df failed with error exit status 1
2024/01/29 19:26:30.476052 [INFO] Running command /bin/sh -c docker logs 3b5cff14a0df
2024/01/29 19:26:30.501204 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3b5cff14a0df: Command /bin/sh -c docker ps | grep -q 3b5cff14a0df failed with error exit status 1 

2024/01/29 19:26:30.501216 [INFO] Executing cleanup logic
2024/01/29 19:26:30.501711 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:27:03.807671 [INFO] Starting...
2024/01/29 19:27:03.807712 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:27:03.807739 [INFO] reading event message file
2024/01/29 19:27:03.808791 [INFO] Engine received EB command userdata-exec

2024/01/29 19:27:03.816448 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:27:04.361326 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:27:04.921831 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:27:04.921898 [INFO] Engine command: (self-startup)

2024/01/29 19:27:04.921906 [INFO] Downloading EB Application...
2024/01/29 19:27:04.921909 [INFO] Region: eu-west-1
2024/01/29 19:27:04.921912 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:27:04.921916 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:27:04.921919 [INFO] Using manifest file name from command request
2024/01/29 19:27:04.921937 [INFO] Unable to get version manifest file.
2024/01/29 19:27:04.921940 [INFO] Downloading latest manifest available.
2024/01/29 19:27:04.921943 [INFO] Download latest app version manifest
2024/01/29 19:27:04.923806 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:27:04.963620 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:27:04.963807 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:27:04.976405 [INFO] Download successful124bytes downloaded
2024/01/29 19:27:04.976560 [INFO] Trying to read and parse version manifest...
2024/01/29 19:27:04.976633 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:27:04.989730 [INFO] Download successful264bytes downloaded
2024/01/29 19:27:04.989984 [INFO] Executing instruction: SyncClock
2024/01/29 19:27:04.989989 [INFO] Starting SyncClock
2024/01/29 19:27:04.989999 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:27:04.995750 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:26:46 2024
System time     : 0.000004084 seconds slow of NTP time
Last offset     : -0.000005261 seconds
RMS offset      : 0.000120015 seconds
Frequency       : 0.592 ppm fast
Residual freq   : -0.006 ppm
Skew            : 0.289 ppm
Root delay      : 0.000505527 seconds
Root dispersion : 0.000341609 seconds
Update interval : 32.4 seconds
Leap status     : Normal

2024/01/29 19:27:04.995794 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:27:05.005643 [INFO] 200 OK

2024/01/29 19:27:05.005754 [INFO] Skipping Configure OS
2024/01/29 19:27:05.005759 [INFO] Skipping LockRepo
2024/01/29 19:27:05.005763 [INFO] Skipping GenerateEBBanner
2024/01/29 19:27:05.005768 [INFO] Skipping Install Process Manager
2024/01/29 19:27:05.005773 [INFO] Skipping install syslog
2024/01/29 19:27:05.005778 [INFO] Skipping install cron
2024/01/29 19:27:05.005963 [INFO] Skipping install proxy
2024/01/29 19:27:05.005971 [INFO] Skipping installhealthd
2024/01/29 19:27:05.005975 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:27:05.005979 [INFO] Skipping install X-Ray
2024/01/29 19:27:05.005990 [INFO] Skipping install Third Party License
2024/01/29 19:27:05.005995 [INFO] Skipping installSqsd
2024/01/29 19:27:05.005999 [INFO] Skipping bootstraphealthd
2024/01/29 19:27:05.006003 [INFO] Skipping Install yum packages
2024/01/29 19:27:05.006007 [INFO] Skipping install docker-compose
2024/01/29 19:27:05.006011 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:27:05.006015 [INFO] Skipping MarkBaked
2024/01/29 19:27:05.006018 [INFO] Skipping TuneSystemSettings
2024/01/29 19:27:05.006021 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:27:05.006023 [INFO] Initialize LogRotate files and directories
2024/01/29 19:27:05.021478 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:27:05.021491 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:27:05.021496 [INFO] Start cfn-hup
2024/01/29 19:27:05.021591 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:27:05.035093 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:27:05.046057 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:27:05.046089 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:27:05.046092 [INFO] Executing instruction: Start Docker
2024/01/29 19:27:05.046094 [INFO] Starting Docker...
2024/01/29 19:27:05.046153 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:27:05.047367 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:27:05.048541 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:27:05.421762 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:27:05.438234 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:27:05.438268 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:27:05.449672 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:27:05.468939 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:27:05.509792 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:27:05.583925 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:27:05.583977 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:27:05.993935 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:27:06.406301 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:27:06.418796 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:27:06.809562 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:27:06.819750 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:27:06.831945 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:27:06.840355 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:27:08.128267 [INFO] Skipping Setup Docker Options
2024/01/29 19:27:08.128290 [INFO] Skipping MarkBootstrapped
2024/01/29 19:27:08.128293 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:27:08.128380 [INFO] Starting SwitchCFNStack
2024/01/29 19:27:08.128458 [INFO] Executing instruction: stopSqsd
2024/01/29 19:27:08.128462 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:27:08.128465 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:27:08.128467 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:27:08.128485 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:27:08.662416 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:27:08.662453 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:27:08.662467 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:27:08.687971 [INFO] Pruning containers ...
2024/01/29 19:27:08.688003 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:27:08.710112 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
3b5cff14a0df   c176d18fbf65   "./main --environmen…"   44 seconds ago   Exited (1) 43 seconds ago             unruffled_wilson

2024/01/29 19:27:08.710140 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:27:08.743104 [INFO] Deleted Containers:
3b5cff14a0df1e5e3326237f61f606c223c7b1f3072c4297013a168e7b8b2f13

Total reclaimed space: 0B

2024/01/29 19:27:08.743133 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:27:08.769162 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:27:08.769549 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:27:08.778691 [INFO] application/json

2024/01/29 19:27:08.778726 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:27:08.871969 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:27:08.872141 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:27:08.873374 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:27:08.873396 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:27:08.873411 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:27:08.873425 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:27:08.873429 [INFO] Executing instruction: Generate environment file
2024/01/29 19:27:08.873459 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:27:08.873463 [INFO] start build docker app
2024/01/29 19:27:08.873854 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:27:08.873858 [INFO] fetching image and ports
2024/01/29 19:27:08.875627 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:27:08.875688 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:27:08.875698 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:27:08.875708 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:27:10.033192 [INFO] Login Succeeded

2024/01/29 19:27:10.033212 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:27:10.033219 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:27:10.033240 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:27:10.176144 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:27:10.176170 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:27:10.176174 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:27:10.176177 [INFO] start to build docker image
2024/01/29 19:27:10.176191 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:27:10.490348 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:27:10.490372 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:27:10.490441 [INFO] successfully build docker image
2024/01/29 19:27:10.490446 [INFO] save staging docker image id
2024/01/29 19:27:10.490461 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:27:10.513482 [INFO] c176d18fbf65

2024/01/29 19:27:10.513616 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:27:10.513622 [INFO] X-Ray is not enabled.
2024/01/29 19:27:10.513625 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:27:10.518778 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:27:10.520362 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:27:10.534226 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:27:10.534259 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:27:10.544888 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:27:10.556067 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:27:10.566442 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:27:10.618342 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:27:11.002956 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:27:11.003046 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:27:11.357232 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:27:11.374884 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:27:11.718188 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:27:11.729628 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:27:11.745164 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:27:12.037691 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:27:12.067956 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:27:12.448355 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:27:12.448392 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:27:12.473926 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:27:12.483871 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:27:12.570744 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:27:12.571744 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:27:12.572697 [INFO] Executing instruction: configure log streaming
2024/01/29 19:27:12.572708 [INFO] log streaming is not enabled
2024/01/29 19:27:12.572712 [INFO] disable log stream
2024/01/29 19:27:12.572727 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:27:12.593971 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:27:12.618839 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:27:12.618866 [INFO] Checking if logs need forced rotation
2024/01/29 19:27:12.619083 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:27:13.171890 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:27:13.672568 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:27:13.674300 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:27:13.771704 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:27:13.791149 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:27:13.791164 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:27:13.791179 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:27:14.175616 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:27:14.175640 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:27:14.175662 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:27:14.175665 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:27:14.175684 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:27:14.175694 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:27:14.175697 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:27:14.175702 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:27:14.175704 [INFO] stop X-Ray ...
2024/01/29 19:27:14.175715 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:27:14.198169 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:27:14.198204 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:27:14.220992 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:27:14.221070 [INFO] stop currently running containers...
2024/01/29 19:27:14.221083 [INFO] detected old app is not docker compose app
2024/01/29 19:27:14.221097 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:27:14.262502 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:27:14.281559 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:27:14.281589 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:27:14.305901 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:27:14.305935 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:27:14.322003 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:27:14.322206 [INFO] stopping current container: 3b5cff14a0df
2024/01/29 19:27:14.322219 [INFO] Running command /bin/sh -c docker ps | grep -q 3b5cff14a0df
2024/01/29 19:27:14.353375 [INFO] Running command /bin/sh -c docker ps | grep -q 3b5cff14a0df
2024/01/29 19:27:14.378268 [INFO] Pruning containers ...
2024/01/29 19:27:14.378360 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:27:14.401291 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:27:14.401320 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:27:14.423544 [INFO] Total reclaimed space: 0B

2024/01/29 19:27:14.423569 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:27:14.441205 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:27:14.441242 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:27:14.463861 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:27:14.463883 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:27:14.463983 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:27:14.464000 [INFO] detected new app is not docker compose app
2024/01/29 19:27:14.464046 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:27:14.905266 [INFO] 7cc0667601cfc629fdb1e1fdf0839e4e3c06e280bdfe5cce02cd5f8d9670dded

2024/01/29 19:27:19.909591 [INFO] Running command /bin/sh -c docker ps | grep -q 7cc0667601cf
2024/01/29 19:27:19.948834 [ERROR] docker container quit unexpectedly on 2024-01-29 19:27:19.948814641 +0000 UTC: Command /bin/sh -c docker ps | grep -q 7cc0667601cf failed with error exit status 1
2024/01/29 19:27:19.948904 [INFO] Running command /bin/sh -c docker logs 7cc0667601cf
2024/01/29 19:27:19.976276 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 7cc0667601cf: Command /bin/sh -c docker ps | grep -q 7cc0667601cf failed with error exit status 1 

2024/01/29 19:27:19.976286 [INFO] Executing cleanup logic
2024/01/29 19:27:19.976521 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:28:25.024972 [INFO] Starting...
2024/01/29 19:28:25.025011 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:28:25.025034 [INFO] reading event message file
2024/01/29 19:28:25.025884 [INFO] Engine received EB command userdata-exec

2024/01/29 19:28:25.031449 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:28:25.534186 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:28:26.117602 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:28:26.117661 [INFO] Engine command: (self-startup)

2024/01/29 19:28:26.117669 [INFO] Downloading EB Application...
2024/01/29 19:28:26.117673 [INFO] Region: eu-west-1
2024/01/29 19:28:26.117676 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:28:26.117680 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:28:26.117683 [INFO] Using manifest file name from command request
2024/01/29 19:28:26.117700 [INFO] Unable to get version manifest file.
2024/01/29 19:28:26.117703 [INFO] Downloading latest manifest available.
2024/01/29 19:28:26.117706 [INFO] Download latest app version manifest
2024/01/29 19:28:26.118030 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:28:26.158667 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:28:26.162897 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:28:26.176792 [INFO] Download successful124bytes downloaded
2024/01/29 19:28:26.177808 [INFO] Trying to read and parse version manifest...
2024/01/29 19:28:26.177934 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:28:26.189528 [INFO] Download successful264bytes downloaded
2024/01/29 19:28:26.189827 [INFO] Executing instruction: SyncClock
2024/01/29 19:28:26.189833 [INFO] Starting SyncClock
2024/01/29 19:28:26.189844 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:28:26.201970 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:28:24 2024
System time     : 0.000001509 seconds fast of NTP time
Last offset     : +0.000001233 seconds
RMS offset      : 0.000097271 seconds
Frequency       : 0.637 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.113 ppm
Root delay      : 0.000435855 seconds
Root dispersion : 0.000301386 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/29 19:28:26.202002 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:28:26.221742 [INFO] 200 OK

2024/01/29 19:28:26.221881 [INFO] Skipping Configure OS
2024/01/29 19:28:26.221889 [INFO] Skipping LockRepo
2024/01/29 19:28:26.221893 [INFO] Skipping GenerateEBBanner
2024/01/29 19:28:26.221897 [INFO] Skipping Install Process Manager
2024/01/29 19:28:26.221901 [INFO] Skipping install syslog
2024/01/29 19:28:26.221905 [INFO] Skipping install cron
2024/01/29 19:28:26.221909 [INFO] Skipping install proxy
2024/01/29 19:28:26.221915 [INFO] Skipping installhealthd
2024/01/29 19:28:26.221921 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:28:26.221926 [INFO] Skipping install X-Ray
2024/01/29 19:28:26.221931 [INFO] Skipping install Third Party License
2024/01/29 19:28:26.221944 [INFO] Skipping installSqsd
2024/01/29 19:28:26.221949 [INFO] Skipping bootstraphealthd
2024/01/29 19:28:26.221954 [INFO] Skipping Install yum packages
2024/01/29 19:28:26.221960 [INFO] Skipping install docker-compose
2024/01/29 19:28:26.221965 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:28:26.221968 [INFO] Skipping MarkBaked
2024/01/29 19:28:26.221972 [INFO] Skipping TuneSystemSettings
2024/01/29 19:28:26.221975 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:28:26.221977 [INFO] Initialize LogRotate files and directories
2024/01/29 19:28:26.236760 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:28:26.236772 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:28:26.236775 [INFO] Start cfn-hup
2024/01/29 19:28:26.236794 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:28:26.250128 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:28:26.262081 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:28:26.262115 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:28:26.262118 [INFO] Executing instruction: Start Docker
2024/01/29 19:28:26.262121 [INFO] Starting Docker...
2024/01/29 19:28:26.262130 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:28:26.263089 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:28:26.264109 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:28:26.669048 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:28:26.684462 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:28:26.684498 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:28:26.695145 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:28:26.703680 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:28:26.715716 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:28:26.760395 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:28:26.760492 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:28:27.073205 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:28:27.384050 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:28:27.395898 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:28:27.671574 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:28:27.681852 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:28:27.694639 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:28:27.703467 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:28:28.918647 [INFO] Skipping Setup Docker Options
2024/01/29 19:28:28.918676 [INFO] Skipping MarkBootstrapped
2024/01/29 19:28:28.918680 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:28:28.918793 [INFO] Starting SwitchCFNStack
2024/01/29 19:28:28.918799 [INFO] Executing instruction: stopSqsd
2024/01/29 19:28:28.918802 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:28:28.918805 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:28:28.918809 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:28:28.918826 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:28:29.362635 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:28:29.362671 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:28:29.362681 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:28:29.382319 [INFO] Pruning containers ...
2024/01/29 19:28:29.382352 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:28:29.402856 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS                          PORTS     NAMES
7cc0667601cf   c176d18fbf65   "./main --environmen…"   About a minute ago   Exited (1) About a minute ago             goofy_bouman

2024/01/29 19:28:29.402893 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:28:29.429084 [INFO] Deleted Containers:
7cc0667601cfc629fdb1e1fdf0839e4e3c06e280bdfe5cce02cd5f8d9670dded

Total reclaimed space: 0B

2024/01/29 19:28:29.429109 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:28:29.448655 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:28:29.449261 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:28:29.452786 [INFO] application/json

2024/01/29 19:28:29.453003 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:28:29.549449 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:28:29.549731 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:28:29.550990 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:28:29.551012 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:28:29.551102 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:28:29.551106 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:28:29.551111 [INFO] Executing instruction: Generate environment file
2024/01/29 19:28:29.551139 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:28:29.551143 [INFO] start build docker app
2024/01/29 19:28:29.551666 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:28:29.551675 [INFO] fetching image and ports
2024/01/29 19:28:29.553370 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:28:29.553419 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:28:29.553430 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:28:29.553442 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:28:30.557591 [INFO] Login Succeeded

2024/01/29 19:28:30.557615 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:28:30.557620 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:28:30.557647 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:28:30.738768 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:28:30.738794 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:28:30.738797 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:28:30.738800 [INFO] start to build docker image
2024/01/29 19:28:30.738815 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:28:31.084193 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:28:31.084214 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:28:31.084217 [INFO] successfully build docker image
2024/01/29 19:28:31.084219 [INFO] save staging docker image id
2024/01/29 19:28:31.084247 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:28:31.117087 [INFO] c176d18fbf65

2024/01/29 19:28:31.117205 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:28:31.117213 [INFO] X-Ray is not enabled.
2024/01/29 19:28:31.117216 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:28:31.125678 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:28:31.127128 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:28:31.151213 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:28:31.151250 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:28:31.174553 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:28:31.192997 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:28:31.203649 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:28:31.259659 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:28:31.590391 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:28:31.590456 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:28:31.902862 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:28:31.916836 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:28:32.246044 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:28:32.255516 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:28:32.265349 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:28:32.563107 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:28:32.574037 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:28:32.974838 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:28:32.974875 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:28:32.988128 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:28:32.996849 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:28:33.061417 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:28:33.062686 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:28:33.064109 [INFO] Executing instruction: configure log streaming
2024/01/29 19:28:33.064120 [INFO] log streaming is not enabled
2024/01/29 19:28:33.064124 [INFO] disable log stream
2024/01/29 19:28:33.064140 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:28:33.083494 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:28:33.101229 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:28:33.101256 [INFO] Checking if logs need forced rotation
2024/01/29 19:28:33.101282 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:28:33.639123 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:28:34.201735 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:28:34.207458 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:28:34.323761 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:28:34.342228 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:28:34.342247 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:28:34.342272 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:28:34.771488 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:28:34.771542 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:28:34.771571 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:28:34.771574 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:28:34.771594 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:28:34.771605 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:28:34.771607 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:28:34.771612 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:28:34.771614 [INFO] stop X-Ray ...
2024/01/29 19:28:34.771624 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:28:34.786578 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:28:34.786607 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:28:34.809189 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:28:34.809217 [INFO] stop currently running containers...
2024/01/29 19:28:34.809226 [INFO] detected old app is not docker compose app
2024/01/29 19:28:34.809244 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:28:34.874611 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:28:34.909263 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:28:34.909341 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:28:34.930615 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:28:34.930652 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:28:34.952317 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:28:34.952405 [INFO] stopping current container: 7cc0667601cf
2024/01/29 19:28:34.952420 [INFO] Running command /bin/sh -c docker ps | grep -q 7cc0667601cf
2024/01/29 19:28:34.988112 [INFO] Running command /bin/sh -c docker ps | grep -q 7cc0667601cf
2024/01/29 19:28:35.026408 [INFO] Pruning containers ...
2024/01/29 19:28:35.026431 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:28:35.071079 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:28:35.071109 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:28:35.100949 [INFO] Total reclaimed space: 0B

2024/01/29 19:28:35.100978 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:28:35.135757 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:28:35.135791 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:28:35.159257 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:28:35.159279 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:28:35.159377 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:28:35.159393 [INFO] detected new app is not docker compose app
2024/01/29 19:28:35.159442 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:28:35.659299 [INFO] ac7dddfc97ed8e70be9374cc2eaac754dcb8a68a260a3b96c84303e87ad75559

2024/01/29 19:28:40.659696 [INFO] Running command /bin/sh -c docker ps | grep -q ac7dddfc97ed
2024/01/29 19:28:40.682251 [ERROR] docker container quit unexpectedly on 2024-01-29 19:28:40.682226149 +0000 UTC: Command /bin/sh -c docker ps | grep -q ac7dddfc97ed failed with error exit status 1
2024/01/29 19:28:40.682281 [INFO] Running command /bin/sh -c docker logs ac7dddfc97ed
2024/01/29 19:28:40.703010 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container ac7dddfc97ed: Command /bin/sh -c docker ps | grep -q ac7dddfc97ed failed with error exit status 1 

2024/01/29 19:28:40.703056 [INFO] Executing cleanup logic
2024/01/29 19:28:40.703263 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:30:49.822676 [INFO] Starting...
2024/01/29 19:30:49.822716 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:30:49.822741 [INFO] reading event message file
2024/01/29 19:30:49.823431 [INFO] Engine received EB command userdata-exec

2024/01/29 19:30:49.829408 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:30:50.323388 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:30:50.722608 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:30:50.722711 [INFO] Engine command: (self-startup)

2024/01/29 19:30:50.722720 [INFO] Downloading EB Application...
2024/01/29 19:30:50.722724 [INFO] Region: eu-west-1
2024/01/29 19:30:50.722727 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:30:50.722737 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:30:50.722740 [INFO] Using manifest file name from command request
2024/01/29 19:30:50.722753 [INFO] Unable to get version manifest file.
2024/01/29 19:30:50.722756 [INFO] Downloading latest manifest available.
2024/01/29 19:30:50.722758 [INFO] Download latest app version manifest
2024/01/29 19:30:50.722877 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:30:50.761118 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:30:50.761517 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:30:50.773344 [INFO] Download successful124bytes downloaded
2024/01/29 19:30:50.773473 [INFO] Trying to read and parse version manifest...
2024/01/29 19:30:50.773551 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:30:50.784571 [INFO] Download successful264bytes downloaded
2024/01/29 19:30:50.784924 [INFO] Executing instruction: SyncClock
2024/01/29 19:30:50.784940 [INFO] Starting SyncClock
2024/01/29 19:30:50.784952 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:30:50.790562 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:30:49 2024
System time     : 0.000001295 seconds slow of NTP time
Last offset     : -0.000000703 seconds
RMS offset      : 0.000067290 seconds
Frequency       : 0.630 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.074 ppm
Root delay      : 0.000434250 seconds
Root dispersion : 0.000308131 seconds
Update interval : 32.5 seconds
Leap status     : Normal

2024/01/29 19:30:50.790582 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:30:50.795866 [INFO] 200 OK

2024/01/29 19:30:50.796069 [INFO] Skipping Configure OS
2024/01/29 19:30:50.796079 [INFO] Skipping LockRepo
2024/01/29 19:30:50.796085 [INFO] Skipping GenerateEBBanner
2024/01/29 19:30:50.796091 [INFO] Skipping Install Process Manager
2024/01/29 19:30:50.796096 [INFO] Skipping install syslog
2024/01/29 19:30:50.796101 [INFO] Skipping install cron
2024/01/29 19:30:50.796107 [INFO] Skipping install proxy
2024/01/29 19:30:50.796112 [INFO] Skipping installhealthd
2024/01/29 19:30:50.796124 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:30:50.796130 [INFO] Skipping install X-Ray
2024/01/29 19:30:50.796135 [INFO] Skipping install Third Party License
2024/01/29 19:30:50.796142 [INFO] Skipping installSqsd
2024/01/29 19:30:50.796148 [INFO] Skipping bootstraphealthd
2024/01/29 19:30:50.796154 [INFO] Skipping Install yum packages
2024/01/29 19:30:50.796160 [INFO] Skipping install docker-compose
2024/01/29 19:30:50.796170 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:30:50.796176 [INFO] Skipping MarkBaked
2024/01/29 19:30:50.796181 [INFO] Skipping TuneSystemSettings
2024/01/29 19:30:50.796185 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:30:50.796189 [INFO] Initialize LogRotate files and directories
2024/01/29 19:30:50.809930 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:30:50.809939 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:30:50.809942 [INFO] Start cfn-hup
2024/01/29 19:30:50.809987 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:30:50.831957 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:30:50.846416 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:30:50.846455 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:30:50.846460 [INFO] Executing instruction: Start Docker
2024/01/29 19:30:50.846464 [INFO] Starting Docker...
2024/01/29 19:30:50.846581 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:30:50.847813 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:30:50.849086 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:30:51.147695 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:30:51.174567 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:30:51.174602 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:30:51.199476 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:30:51.213088 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:30:51.226376 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:30:51.317586 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:30:51.317727 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:30:51.754470 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:30:52.045412 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:30:52.057649 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:30:52.423529 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:30:52.443926 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:30:52.470379 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:30:52.480245 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:30:53.682555 [INFO] Skipping Setup Docker Options
2024/01/29 19:30:53.682578 [INFO] Skipping MarkBootstrapped
2024/01/29 19:30:53.682582 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:30:53.682773 [INFO] Starting SwitchCFNStack
2024/01/29 19:30:53.682780 [INFO] Executing instruction: stopSqsd
2024/01/29 19:30:53.682784 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:30:53.682787 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:30:53.682791 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:30:53.682810 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:30:54.129060 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:30:54.129154 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:30:54.129167 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:30:54.153104 [INFO] Pruning containers ...
2024/01/29 19:30:54.153137 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:30:54.171917 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS                     PORTS     NAMES
ac7dddfc97ed   c176d18fbf65   "./main --environmen…"   2 minutes ago   Exited (1) 2 minutes ago             boring_jackson

2024/01/29 19:30:54.171946 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:30:54.200413 [INFO] Deleted Containers:
ac7dddfc97ed8e70be9374cc2eaac754dcb8a68a260a3b96c84303e87ad75559

Total reclaimed space: 0B

2024/01/29 19:30:54.200444 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:30:54.220346 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:30:54.220575 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:30:54.223855 [INFO] application/json

2024/01/29 19:30:54.223882 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:30:54.299461 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:30:54.299632 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:30:54.300813 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:30:54.300837 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:30:54.300855 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:30:54.300858 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:30:54.300863 [INFO] Executing instruction: Generate environment file
2024/01/29 19:30:54.300889 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:30:54.300893 [INFO] start build docker app
2024/01/29 19:30:54.301322 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:30:54.301325 [INFO] fetching image and ports
2024/01/29 19:30:54.302970 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:30:54.303027 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:30:54.303036 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:30:54.303045 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:30:55.255662 [INFO] Login Succeeded

2024/01/29 19:30:55.255680 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:30:55.255687 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:30:55.255752 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:30:55.412280 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:30:55.412308 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:30:55.412313 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:30:55.412317 [INFO] start to build docker image
2024/01/29 19:30:55.412337 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:30:55.666829 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:30:55.666851 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:30:55.666855 [INFO] successfully build docker image
2024/01/29 19:30:55.666857 [INFO] save staging docker image id
2024/01/29 19:30:55.666867 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:30:55.692815 [INFO] c176d18fbf65

2024/01/29 19:30:55.693124 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:30:55.693131 [INFO] X-Ray is not enabled.
2024/01/29 19:30:55.693134 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:30:55.698593 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:30:55.700118 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:30:55.718866 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:30:55.718898 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:30:55.734548 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:30:55.745588 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:30:55.760440 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:30:55.828908 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:30:56.147850 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:30:56.148065 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:30:56.486575 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:30:56.498094 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:30:56.864944 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:30:56.880487 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:30:56.890725 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:30:57.214394 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:30:57.227004 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:30:57.551954 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:30:57.551994 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:30:57.567420 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:30:57.577678 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:30:57.657883 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:30:57.658846 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:30:57.659773 [INFO] Executing instruction: configure log streaming
2024/01/29 19:30:57.659784 [INFO] log streaming is not enabled
2024/01/29 19:30:57.659788 [INFO] disable log stream
2024/01/29 19:30:57.659802 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:30:57.680891 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:30:57.701798 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:30:57.701826 [INFO] Checking if logs need forced rotation
2024/01/29 19:30:57.701847 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:30:58.226726 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:30:58.820377 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:30:58.825028 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:30:59.163977 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:30:59.183662 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:30:59.183684 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:30:59.183698 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:30:59.616757 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:30:59.616785 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:30:59.616815 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:30:59.616819 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:30:59.616843 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:30:59.616856 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:30:59.616858 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:30:59.616863 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:30:59.616866 [INFO] stop X-Ray ...
2024/01/29 19:30:59.616876 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:30:59.644420 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:30:59.644453 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:30:59.681257 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:30:59.681290 [INFO] stop currently running containers...
2024/01/29 19:30:59.681302 [INFO] detected old app is not docker compose app
2024/01/29 19:30:59.681313 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:30:59.732451 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:30:59.749198 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:30:59.749233 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:30:59.762699 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:30:59.762735 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:30:59.777499 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:30:59.777541 [INFO] stopping current container: ac7dddfc97ed
2024/01/29 19:30:59.777552 [INFO] Running command /bin/sh -c docker ps | grep -q ac7dddfc97ed
2024/01/29 19:30:59.814165 [INFO] Running command /bin/sh -c docker ps | grep -q ac7dddfc97ed
2024/01/29 19:30:59.836124 [INFO] Pruning containers ...
2024/01/29 19:30:59.836150 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:30:59.855029 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:30:59.855076 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:30:59.885978 [INFO] Total reclaimed space: 0B

2024/01/29 19:30:59.886253 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:30:59.910279 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:30:59.910464 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:30:59.938725 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:30:59.938748 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:30:59.938857 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:30:59.938877 [INFO] detected new app is not docker compose app
2024/01/29 19:30:59.938956 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:31:00.513364 [INFO] c15a9128e03a876f70583f348039c04b666ecf2517ed413b6c172810b4d7c6bc

2024/01/29 19:31:05.513760 [INFO] Running command /bin/sh -c docker ps | grep -q c15a9128e03a
2024/01/29 19:31:05.534597 [ERROR] docker container quit unexpectedly on 2024-01-29 19:31:05.534580576 +0000 UTC: Command /bin/sh -c docker ps | grep -q c15a9128e03a failed with error exit status 1
2024/01/29 19:31:05.534623 [INFO] Running command /bin/sh -c docker logs c15a9128e03a
2024/01/29 19:31:05.556902 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c15a9128e03a: Command /bin/sh -c docker ps | grep -q c15a9128e03a failed with error exit status 1 

2024/01/29 19:31:05.556911 [INFO] Executing cleanup logic
2024/01/29 19:31:05.557132 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:35:22.663056 [INFO] Starting...
2024/01/29 19:35:22.663097 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:35:22.663122 [INFO] reading event message file
2024/01/29 19:35:22.663996 [INFO] Engine received EB command userdata-exec

2024/01/29 19:35:22.676589 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:35:23.099815 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:35:23.614330 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:35:23.614455 [INFO] Engine command: (self-startup)

2024/01/29 19:35:23.614587 [INFO] Downloading EB Application...
2024/01/29 19:35:23.614595 [INFO] Region: eu-west-1
2024/01/29 19:35:23.614598 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:35:23.614602 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:35:23.614610 [INFO] Using manifest file name from command request
2024/01/29 19:35:23.614628 [INFO] Unable to get version manifest file.
2024/01/29 19:35:23.614636 [INFO] Downloading latest manifest available.
2024/01/29 19:35:23.614640 [INFO] Download latest app version manifest
2024/01/29 19:35:23.614857 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:35:23.661707 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:35:23.661949 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:35:23.680433 [INFO] Download successful124bytes downloaded
2024/01/29 19:35:23.680590 [INFO] Trying to read and parse version manifest...
2024/01/29 19:35:23.680665 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:35:23.699967 [INFO] Download successful264bytes downloaded
2024/01/29 19:35:23.700292 [INFO] Executing instruction: SyncClock
2024/01/29 19:35:23.700298 [INFO] Starting SyncClock
2024/01/29 19:35:23.700312 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:35:23.710444 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:35:09 2024
System time     : 0.000000080 seconds slow of NTP time
Last offset     : -0.000000263 seconds
RMS offset      : 0.000030583 seconds
Frequency       : 0.638 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.036 ppm
Root delay      : 0.000424854 seconds
Root dispersion : 0.000302101 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/29 19:35:23.710472 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:35:23.718960 [INFO] 200 OK

2024/01/29 19:35:23.719085 [INFO] Skipping Configure OS
2024/01/29 19:35:23.719093 [INFO] Skipping LockRepo
2024/01/29 19:35:23.719099 [INFO] Skipping GenerateEBBanner
2024/01/29 19:35:23.719105 [INFO] Skipping Install Process Manager
2024/01/29 19:35:23.719110 [INFO] Skipping install syslog
2024/01/29 19:35:23.719115 [INFO] Skipping install cron
2024/01/29 19:35:23.719120 [INFO] Skipping install proxy
2024/01/29 19:35:23.719125 [INFO] Skipping installhealthd
2024/01/29 19:35:23.719130 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:35:23.719136 [INFO] Skipping install X-Ray
2024/01/29 19:35:23.719140 [INFO] Skipping install Third Party License
2024/01/29 19:35:23.719148 [INFO] Skipping installSqsd
2024/01/29 19:35:23.719152 [INFO] Skipping bootstraphealthd
2024/01/29 19:35:23.719157 [INFO] Skipping Install yum packages
2024/01/29 19:35:23.719161 [INFO] Skipping install docker-compose
2024/01/29 19:35:23.719166 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:35:23.719172 [INFO] Skipping MarkBaked
2024/01/29 19:35:23.719177 [INFO] Skipping TuneSystemSettings
2024/01/29 19:35:23.719181 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:35:23.719184 [INFO] Initialize LogRotate files and directories
2024/01/29 19:35:23.735247 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:35:23.735260 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:35:23.735263 [INFO] Start cfn-hup
2024/01/29 19:35:23.735285 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:35:23.754603 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:35:23.765437 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:35:23.765511 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:35:23.765516 [INFO] Executing instruction: Start Docker
2024/01/29 19:35:23.765520 [INFO] Starting Docker...
2024/01/29 19:35:23.765605 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:35:23.766979 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:35:23.768230 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:35:24.159723 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:35:24.176168 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:35:24.176202 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:35:24.189436 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:35:24.201945 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:35:24.216101 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:35:24.287055 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:35:24.287114 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:35:24.662060 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:35:25.065573 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:35:25.081019 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:35:25.532356 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:35:25.542294 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:35:25.557527 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:35:25.566986 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:35:26.976407 [INFO] Skipping Setup Docker Options
2024/01/29 19:35:26.976439 [INFO] Skipping MarkBootstrapped
2024/01/29 19:35:26.976443 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:35:26.976564 [INFO] Starting SwitchCFNStack
2024/01/29 19:35:26.976582 [INFO] Executing instruction: stopSqsd
2024/01/29 19:35:26.976585 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:35:26.976589 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:35:26.976592 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:35:26.976609 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:35:27.584496 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:35:27.584519 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:35:27.584532 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:35:27.640367 [INFO] Pruning containers ...
2024/01/29 19:35:27.640402 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:35:27.700438 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS                     PORTS     NAMES
c15a9128e03a   c176d18fbf65   "./main --environmen…"   4 minutes ago   Exited (1) 4 minutes ago             priceless_banach

2024/01/29 19:35:27.700467 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:35:27.726160 [INFO] Deleted Containers:
c15a9128e03a876f70583f348039c04b666ecf2517ed413b6c172810b4d7c6bc

Total reclaimed space: 0B

2024/01/29 19:35:27.726185 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:35:27.749019 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:35:27.749344 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:35:27.752088 [INFO] application/json

2024/01/29 19:35:27.752178 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:35:27.890680 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/29 19:35:27.891770 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:35:27.896400 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:35:27.896563 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:35:27.896588 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:35:27.896592 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:35:27.896599 [INFO] Executing instruction: Generate environment file
2024/01/29 19:35:27.897357 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:35:27.897365 [INFO] start build docker app
2024/01/29 19:35:27.897766 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:35:27.897771 [INFO] fetching image and ports
2024/01/29 19:35:27.900727 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:35:27.900803 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:35:27.900811 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:35:27.900822 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:35:28.953735 [INFO] Login Succeeded

2024/01/29 19:35:28.953756 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:35:28.953763 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:35:28.953780 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:35:29.080464 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:35:29.080486 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:35:29.080489 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:35:29.080492 [INFO] start to build docker image
2024/01/29 19:35:29.080509 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:35:29.357898 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:35:29.357926 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:35:29.357931 [INFO] successfully build docker image
2024/01/29 19:35:29.357933 [INFO] save staging docker image id
2024/01/29 19:35:29.357948 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:35:29.378796 [INFO] c176d18fbf65

2024/01/29 19:35:29.378929 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:35:29.378936 [INFO] X-Ray is not enabled.
2024/01/29 19:35:29.378938 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:35:29.384207 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:35:29.385922 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:35:29.404052 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:35:29.404083 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:35:29.416343 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:35:29.424902 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:35:29.436684 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:35:29.513510 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:35:29.836800 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:35:29.836923 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:35:30.203824 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:35:30.224876 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:35:30.570128 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:35:30.593659 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:35:30.627634 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:35:30.976040 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:35:31.013929 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:35:31.410807 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:35:31.410848 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:35:31.425175 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:35:31.434923 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:35:31.525398 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:35:31.526883 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:35:31.527904 [INFO] Executing instruction: configure log streaming
2024/01/29 19:35:31.527913 [INFO] log streaming is not enabled
2024/01/29 19:35:31.527916 [INFO] disable log stream
2024/01/29 19:35:31.527928 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:35:31.549916 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:35:31.584031 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:35:31.584057 [INFO] Checking if logs need forced rotation
2024/01/29 19:35:31.584081 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:35:32.214687 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:35:32.770127 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:35:32.772007 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:35:33.153620 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:35:33.180781 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:35:33.180800 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:35:33.180817 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:35:33.682840 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:35:33.682876 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:35:33.682901 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:35:33.682905 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:35:33.682928 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:35:33.682941 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:35:33.682944 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:35:33.682949 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:35:33.682952 [INFO] stop X-Ray ...
2024/01/29 19:35:33.682964 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:35:33.697002 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:35:33.697034 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:35:33.709803 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:35:33.709837 [INFO] stop currently running containers...
2024/01/29 19:35:33.709849 [INFO] detected old app is not docker compose app
2024/01/29 19:35:33.709864 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:35:33.752405 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:35:33.768100 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:35:33.768135 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:35:33.781690 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:35:33.781723 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:35:33.796077 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:35:33.796126 [INFO] stopping current container: c15a9128e03a
2024/01/29 19:35:33.796138 [INFO] Running command /bin/sh -c docker ps | grep -q c15a9128e03a
2024/01/29 19:35:33.815477 [INFO] Running command /bin/sh -c docker ps | grep -q c15a9128e03a
2024/01/29 19:35:33.835437 [INFO] Pruning containers ...
2024/01/29 19:35:33.835459 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:35:33.854133 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:35:33.854164 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:35:33.872246 [INFO] Total reclaimed space: 0B

2024/01/29 19:35:33.872275 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:35:33.892014 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:35:33.892046 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:35:33.911141 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:35:33.911162 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:35:33.911275 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:35:33.911292 [INFO] detected new app is not docker compose app
2024/01/29 19:35:33.911345 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:35:34.412212 [INFO] b50f6b858152ff08cf85b71d885fdcd881cacc37eb943e6d7877223e5773ebf6

2024/01/29 19:35:39.416623 [INFO] Running command /bin/sh -c docker ps | grep -q b50f6b858152
2024/01/29 19:35:39.442605 [ERROR] docker container quit unexpectedly on 2024-01-29 19:35:39.442589216 +0000 UTC: Command /bin/sh -c docker ps | grep -q b50f6b858152 failed with error exit status 1
2024/01/29 19:35:39.442648 [INFO] Running command /bin/sh -c docker logs b50f6b858152
2024/01/29 19:35:39.471587 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b50f6b858152: Command /bin/sh -c docker ps | grep -q b50f6b858152 failed with error exit status 1 

2024/01/29 19:35:39.471605 [INFO] Executing cleanup logic
2024/01/29 19:35:39.472277 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 19:44:12.562225 [INFO] Starting...
2024/01/29 19:44:12.562267 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 19:44:12.562293 [INFO] reading event message file
2024/01/29 19:44:12.563435 [INFO] Engine received EB command userdata-exec

2024/01/29 19:44:12.573784 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:44:13.006812 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:44:13.473983 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 19:44:13.474048 [INFO] Engine command: (self-startup)

2024/01/29 19:44:13.474055 [INFO] Downloading EB Application...
2024/01/29 19:44:13.474057 [INFO] Region: eu-west-1
2024/01/29 19:44:13.474059 [INFO] envID: e-8gmkc7rmw6
2024/01/29 19:44:13.474062 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 19:44:13.474064 [INFO] Using manifest file name from command request
2024/01/29 19:44:13.474077 [INFO] Unable to get version manifest file.
2024/01/29 19:44:13.474079 [INFO] Downloading latest manifest available.
2024/01/29 19:44:13.474081 [INFO] Download latest app version manifest
2024/01/29 19:44:13.474203 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 19:44:13.514105 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 19:44:13.514304 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 19:44:13.525828 [INFO] Download successful124bytes downloaded
2024/01/29 19:44:13.526043 [INFO] Trying to read and parse version manifest...
2024/01/29 19:44:13.526124 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:44:13.548165 [INFO] Download successful264bytes downloaded
2024/01/29 19:44:13.548581 [INFO] Executing instruction: SyncClock
2024/01/29 19:44:13.548588 [INFO] Starting SyncClock
2024/01/29 19:44:13.548598 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 19:44:13.554835 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 19:44:04 2024
System time     : 0.000000798 seconds fast of NTP time
Last offset     : -0.000000980 seconds
RMS offset      : 0.000007305 seconds
Frequency       : 0.623 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.029 ppm
Root delay      : 0.000424854 seconds
Root dispersion : 0.000312012 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/29 19:44:13.554866 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 19:44:13.559493 [INFO] 200 OK

2024/01/29 19:44:13.559603 [INFO] Skipping Configure OS
2024/01/29 19:44:13.559610 [INFO] Skipping LockRepo
2024/01/29 19:44:13.559614 [INFO] Skipping GenerateEBBanner
2024/01/29 19:44:13.559618 [INFO] Skipping Install Process Manager
2024/01/29 19:44:13.559622 [INFO] Skipping install syslog
2024/01/29 19:44:13.559626 [INFO] Skipping install cron
2024/01/29 19:44:13.559641 [INFO] Skipping install proxy
2024/01/29 19:44:13.559647 [INFO] Skipping installhealthd
2024/01/29 19:44:13.559653 [INFO] Skipping Install Log Streaming Manager
2024/01/29 19:44:13.559657 [INFO] Skipping install X-Ray
2024/01/29 19:44:13.559661 [INFO] Skipping install Third Party License
2024/01/29 19:44:13.559666 [INFO] Skipping installSqsd
2024/01/29 19:44:13.559670 [INFO] Skipping bootstraphealthd
2024/01/29 19:44:13.559674 [INFO] Skipping Install yum packages
2024/01/29 19:44:13.559678 [INFO] Skipping install docker-compose
2024/01/29 19:44:13.559682 [INFO] Skipping Configure Docker Daemon
2024/01/29 19:44:13.559685 [INFO] Skipping MarkBaked
2024/01/29 19:44:13.559689 [INFO] Skipping TuneSystemSettings
2024/01/29 19:44:13.559691 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 19:44:13.559694 [INFO] Initialize LogRotate files and directories
2024/01/29 19:44:13.574042 [INFO] Skipping BootstrapCFNHup
2024/01/29 19:44:13.574052 [INFO] Executing instruction: StartCFNHup
2024/01/29 19:44:13.574055 [INFO] Start cfn-hup
2024/01/29 19:44:13.574072 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 19:44:13.588118 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 19:44:13.598911 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 19:44:13.598944 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 19:44:13.598948 [INFO] Executing instruction: Start Docker
2024/01/29 19:44:13.598951 [INFO] Starting Docker...
2024/01/29 19:44:13.599037 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 19:44:13.600204 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 19:44:13.601476 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:44:13.934586 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:44:13.953065 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 19:44:13.953095 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:44:13.966444 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:44:13.976350 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:44:14.000656 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 19:44:14.080073 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 19:44:14.080174 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 19:44:14.494351 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:44:14.872219 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:44:14.885017 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:44:15.253822 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:44:15.264889 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 19:44:15.287923 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 19:44:15.301029 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 19:44:16.613707 [INFO] Skipping Setup Docker Options
2024/01/29 19:44:16.613732 [INFO] Skipping MarkBootstrapped
2024/01/29 19:44:16.613736 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 19:44:16.613849 [INFO] Starting SwitchCFNStack
2024/01/29 19:44:16.613855 [INFO] Executing instruction: stopSqsd
2024/01/29 19:44:16.613859 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 19:44:16.613862 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 19:44:16.613866 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 19:44:16.613888 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 19:44:17.074273 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 19:44:17.074397 [INFO] Executing instruction: StagedockerApplication
2024/01/29 19:44:17.074412 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 19:44:17.099364 [INFO] Pruning containers ...
2024/01/29 19:44:17.099398 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:44:17.124945 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS                     PORTS     NAMES
b50f6b858152   c176d18fbf65   "./main --environmen…"   8 minutes ago   Exited (1) 8 minutes ago             angry_raman

2024/01/29 19:44:17.124983 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:44:17.179682 [INFO] Deleted Containers:
b50f6b858152ff08cf85b71d885fdcd881cacc37eb943e6d7877223e5773ebf6

Total reclaimed space: 0B

2024/01/29 19:44:17.180295 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:44:17.202128 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:44:17.202356 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 19:44:17.205510 [INFO] application/json

2024/01/29 19:44:17.205531 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 19:44:17.282006 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 19:44:17.282177 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 19:44:17.283520 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 19:44:17.283545 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 19:44:17.283562 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 19:44:17.283566 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 19:44:17.283571 [INFO] Executing instruction: Generate environment file
2024/01/29 19:44:17.283599 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 19:44:17.283602 [INFO] start build docker app
2024/01/29 19:44:17.283958 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 19:44:17.283962 [INFO] fetching image and ports
2024/01/29 19:44:17.285383 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:44:17.285436 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 19:44:17.285444 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 19:44:17.285459 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 19:44:18.223078 [INFO] Login Succeeded

2024/01/29 19:44:18.223107 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 19:44:18.223115 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 19:44:18.223132 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:44:18.360852 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 19:44:18.360882 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:44:18.360887 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 19:44:18.360891 [INFO] start to build docker image
2024/01/29 19:44:18.360910 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:44:18.630116 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 19:44:18.630143 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 19:44:18.630148 [INFO] successfully build docker image
2024/01/29 19:44:18.630151 [INFO] save staging docker image id
2024/01/29 19:44:18.630165 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 19:44:18.654296 [INFO] c176d18fbf65

2024/01/29 19:44:18.654418 [INFO] Executing instruction: configure X-Ray
2024/01/29 19:44:18.654424 [INFO] X-Ray is not enabled.
2024/01/29 19:44:18.654426 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 19:44:18.660533 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 19:44:18.665658 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:44:18.679646 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 19:44:18.679672 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:44:18.700970 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:44:18.711916 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:44:18.723235 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 19:44:18.797822 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 19:44:19.185841 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 19:44:19.185935 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:44:19.528009 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:44:19.540431 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 19:44:19.919692 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 19:44:19.930082 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 19:44:19.940168 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 19:44:20.295023 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 19:44:20.305581 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 19:44:20.629623 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 19:44:20.629665 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 19:44:20.644997 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 19:44:20.654381 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 19:44:20.741971 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 19:44:20.742944 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 19:44:20.743709 [INFO] Executing instruction: configure log streaming
2024/01/29 19:44:20.743719 [INFO] log streaming is not enabled
2024/01/29 19:44:20.743723 [INFO] disable log stream
2024/01/29 19:44:20.743738 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 19:44:20.764307 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 19:44:20.786454 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 19:44:20.786479 [INFO] Checking if logs need forced rotation
2024/01/29 19:44:20.786498 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 19:44:21.354942 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 19:44:21.927041 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 19:44:21.928997 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 19:44:21.973547 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 19:44:21.991451 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 19:44:21.991468 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 19:44:21.991485 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 19:44:22.419979 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 19:44:22.420015 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 19:44:22.420042 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 19:44:22.420046 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 19:44:22.420068 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 19:44:22.420081 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 19:44:22.420084 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 19:44:22.420089 [INFO] Executing instruction: stop X-Ray
2024/01/29 19:44:22.420092 [INFO] stop X-Ray ...
2024/01/29 19:44:22.420104 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 19:44:22.434768 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 19:44:22.434800 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 19:44:22.451211 [INFO] Executing instruction: Run Docker Container
2024/01/29 19:44:22.451240 [INFO] stop currently running containers...
2024/01/29 19:44:22.451251 [INFO] detected old app is not docker compose app
2024/01/29 19:44:22.451266 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 19:44:22.502495 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 19:44:22.517081 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 19:44:22.517146 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 19:44:22.531844 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 19:44:22.531873 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 19:44:22.547409 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 19:44:22.547553 [INFO] stopping current container: b50f6b858152
2024/01/29 19:44:22.547567 [INFO] Running command /bin/sh -c docker ps | grep -q b50f6b858152
2024/01/29 19:44:22.568027 [INFO] Running command /bin/sh -c docker ps | grep -q b50f6b858152
2024/01/29 19:44:22.588534 [INFO] Pruning containers ...
2024/01/29 19:44:22.588556 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:44:22.606342 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:44:22.606372 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 19:44:22.633387 [INFO] Total reclaimed space: 0B

2024/01/29 19:44:22.633432 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 19:44:22.654362 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 19:44:22.654413 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 19:44:22.672699 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 19:44:22.672719 [INFO] Removing /var/app/current/ if it exists
2024/01/29 19:44:22.672815 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 19:44:22.672832 [INFO] detected new app is not docker compose app
2024/01/29 19:44:22.672875 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 19:44:23.171023 [INFO] 9eafe91534f2dfe57f46cc7e1a9836c29fc1a3f874d2035c8e49368b61ac0c0a

2024/01/29 19:44:28.175234 [INFO] Running command /bin/sh -c docker ps | grep -q 9eafe91534f2
2024/01/29 19:44:28.214322 [ERROR] docker container quit unexpectedly on 2024-01-29 19:44:28.214308728 +0000 UTC: Command /bin/sh -c docker ps | grep -q 9eafe91534f2 failed with error exit status 1
2024/01/29 19:44:28.214350 [INFO] Running command /bin/sh -c docker logs 9eafe91534f2
2024/01/29 19:44:28.239938 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 9eafe91534f2: Command /bin/sh -c docker ps | grep -q 9eafe91534f2 failed with error exit status 1 

2024/01/29 19:44:28.239951 [INFO] Executing cleanup logic
2024/01/29 19:44:28.240166 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 20:01:33.325852 [INFO] Starting...
2024/01/29 20:01:33.325893 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 20:01:33.325917 [INFO] reading event message file
2024/01/29 20:01:33.327002 [INFO] Engine received EB command userdata-exec

2024/01/29 20:01:33.332480 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 20:01:33.802311 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 20:01:34.290264 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 20:01:34.290489 [INFO] Engine command: (self-startup)

2024/01/29 20:01:34.290502 [INFO] Downloading EB Application...
2024/01/29 20:01:34.290507 [INFO] Region: eu-west-1
2024/01/29 20:01:34.290510 [INFO] envID: e-8gmkc7rmw6
2024/01/29 20:01:34.290512 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 20:01:34.290515 [INFO] Using manifest file name from command request
2024/01/29 20:01:34.290530 [INFO] Unable to get version manifest file.
2024/01/29 20:01:34.290533 [INFO] Downloading latest manifest available.
2024/01/29 20:01:34.290546 [INFO] Download latest app version manifest
2024/01/29 20:01:34.290700 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 20:01:34.347278 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 20:01:34.347561 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 20:01:34.359365 [INFO] Download successful124bytes downloaded
2024/01/29 20:01:34.359515 [INFO] Trying to read and parse version manifest...
2024/01/29 20:01:34.359600 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:01:34.385765 [INFO] Download successful264bytes downloaded
2024/01/29 20:01:34.386136 [INFO] Executing instruction: SyncClock
2024/01/29 20:01:34.386141 [INFO] Starting SyncClock
2024/01/29 20:01:34.386151 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 20:01:34.395358 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 20:01:20 2024
System time     : 0.000000101 seconds fast of NTP time
Last offset     : +0.000001111 seconds
RMS offset      : 0.000002568 seconds
Frequency       : 0.588 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.043 ppm
Root delay      : 0.000471028 seconds
Root dispersion : 0.000315527 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 20:01:34.395384 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 20:01:34.402675 [INFO] 200 OK

2024/01/29 20:01:34.402812 [INFO] Skipping Configure OS
2024/01/29 20:01:34.402818 [INFO] Skipping LockRepo
2024/01/29 20:01:34.402822 [INFO] Skipping GenerateEBBanner
2024/01/29 20:01:34.402827 [INFO] Skipping Install Process Manager
2024/01/29 20:01:34.402831 [INFO] Skipping install syslog
2024/01/29 20:01:34.402834 [INFO] Skipping install cron
2024/01/29 20:01:34.402838 [INFO] Skipping install proxy
2024/01/29 20:01:34.402842 [INFO] Skipping installhealthd
2024/01/29 20:01:34.402845 [INFO] Skipping Install Log Streaming Manager
2024/01/29 20:01:34.402849 [INFO] Skipping install X-Ray
2024/01/29 20:01:34.402854 [INFO] Skipping install Third Party License
2024/01/29 20:01:34.402861 [INFO] Skipping installSqsd
2024/01/29 20:01:34.402867 [INFO] Skipping bootstraphealthd
2024/01/29 20:01:34.402872 [INFO] Skipping Install yum packages
2024/01/29 20:01:34.402876 [INFO] Skipping install docker-compose
2024/01/29 20:01:34.402880 [INFO] Skipping Configure Docker Daemon
2024/01/29 20:01:34.402884 [INFO] Skipping MarkBaked
2024/01/29 20:01:34.402888 [INFO] Skipping TuneSystemSettings
2024/01/29 20:01:34.402891 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 20:01:34.402893 [INFO] Initialize LogRotate files and directories
2024/01/29 20:01:34.417242 [INFO] Skipping BootstrapCFNHup
2024/01/29 20:01:34.417253 [INFO] Executing instruction: StartCFNHup
2024/01/29 20:01:34.417256 [INFO] Start cfn-hup
2024/01/29 20:01:34.417276 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 20:01:34.430363 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 20:01:34.460786 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 20:01:34.460821 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 20:01:34.460826 [INFO] Executing instruction: Start Docker
2024/01/29 20:01:34.460829 [INFO] Starting Docker...
2024/01/29 20:01:34.460912 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 20:01:34.465318 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 20:01:34.467129 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 20:01:34.931333 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:01:34.947720 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 20:01:34.947755 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:01:34.960952 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 20:01:34.970392 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:01:34.982051 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 20:01:35.068359 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 20:01:35.068397 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 20:01:35.426296 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:01:35.730923 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:01:35.743878 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:01:36.113383 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:01:36.122885 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:01:36.136249 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 20:01:36.146546 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 20:01:37.540980 [INFO] Skipping Setup Docker Options
2024/01/29 20:01:37.541010 [INFO] Skipping MarkBootstrapped
2024/01/29 20:01:37.541014 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 20:01:37.541125 [INFO] Starting SwitchCFNStack
2024/01/29 20:01:37.541131 [INFO] Executing instruction: stopSqsd
2024/01/29 20:01:37.541135 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 20:01:37.541139 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 20:01:37.541142 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 20:01:37.541165 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 20:01:37.985562 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 20:01:37.985599 [INFO] Executing instruction: StagedockerApplication
2024/01/29 20:01:37.985610 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 20:01:38.005742 [INFO] Pruning containers ...
2024/01/29 20:01:38.005783 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:01:38.026253 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
9eafe91534f2   c176d18fbf65   "./main --environmen…"   17 minutes ago   Exited (1) 17 minutes ago             priceless_mahavira

2024/01/29 20:01:38.026286 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 20:01:38.059298 [INFO] Deleted Containers:
9eafe91534f2dfe57f46cc7e1a9836c29fc1a3f874d2035c8e49368b61ac0c0a

Total reclaimed space: 0B

2024/01/29 20:01:38.059325 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:01:38.080748 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:01:38.080974 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 20:01:38.084410 [INFO] application/json

2024/01/29 20:01:38.084435 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 20:01:38.186077 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/29 20:01:38.186243 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 20:01:38.187558 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 20:01:38.187581 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 20:01:38.187600 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 20:01:38.187604 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 20:01:38.187610 [INFO] Executing instruction: Generate environment file
2024/01/29 20:01:38.187638 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 20:01:38.187641 [INFO] start build docker app
2024/01/29 20:01:38.188034 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 20:01:38.188038 [INFO] fetching image and ports
2024/01/29 20:01:38.189616 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 20:01:38.189664 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 20:01:38.189675 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 20:01:38.189686 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 20:01:39.372231 [INFO] Login Succeeded

2024/01/29 20:01:39.372257 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 20:01:39.372264 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 20:01:39.372281 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:01:39.511320 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 20:01:39.511340 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:01:39.511344 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:01:39.511347 [INFO] start to build docker image
2024/01/29 20:01:39.511386 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 20:01:39.804426 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 20:01:39.804447 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 20:01:39.804451 [INFO] successfully build docker image
2024/01/29 20:01:39.804454 [INFO] save staging docker image id
2024/01/29 20:01:39.804585 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 20:01:39.828022 [INFO] c176d18fbf65

2024/01/29 20:01:39.828154 [INFO] Executing instruction: configure X-Ray
2024/01/29 20:01:39.828161 [INFO] X-Ray is not enabled.
2024/01/29 20:01:39.828164 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 20:01:39.835080 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 20:01:39.836642 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:01:39.851538 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 20:01:39.851571 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:01:39.867296 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 20:01:39.891246 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:01:39.909239 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 20:01:39.968906 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 20:01:40.322487 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 20:01:40.322563 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:01:40.604420 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:01:40.615784 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:01:40.995803 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:01:41.005872 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 20:01:41.015889 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 20:01:41.381074 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 20:01:41.391215 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 20:01:41.775385 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 20:01:41.775427 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:01:41.793782 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 20:01:41.808774 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 20:01:41.884491 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 20:01:41.885751 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 20:01:41.886711 [INFO] Executing instruction: configure log streaming
2024/01/29 20:01:41.886721 [INFO] log streaming is not enabled
2024/01/29 20:01:41.886724 [INFO] disable log stream
2024/01/29 20:01:41.886744 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 20:01:41.906391 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 20:01:41.926133 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 20:01:41.926154 [INFO] Checking if logs need forced rotation
2024/01/29 20:01:41.926177 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 20:01:42.467501 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 20:01:43.053961 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 20:01:43.059183 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 20:01:43.377545 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 20:01:43.396728 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 20:01:43.396744 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 20:01:43.396756 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 20:01:43.833241 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 20:01:43.833355 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 20:01:43.833390 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 20:01:43.833393 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 20:01:43.833418 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 20:01:43.833431 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 20:01:43.833434 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 20:01:43.833440 [INFO] Executing instruction: stop X-Ray
2024/01/29 20:01:43.833443 [INFO] stop X-Ray ...
2024/01/29 20:01:43.833455 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 20:01:43.847686 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 20:01:43.847718 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 20:01:43.863045 [INFO] Executing instruction: Run Docker Container
2024/01/29 20:01:43.863077 [INFO] stop currently running containers...
2024/01/29 20:01:43.863088 [INFO] detected old app is not docker compose app
2024/01/29 20:01:43.863103 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 20:01:43.902472 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 20:01:43.917083 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 20:01:43.917116 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 20:01:43.930376 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 20:01:43.930409 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 20:01:43.944891 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 20:01:43.944941 [INFO] stopping current container: 9eafe91534f2
2024/01/29 20:01:43.944953 [INFO] Running command /bin/sh -c docker ps | grep -q 9eafe91534f2
2024/01/29 20:01:43.966771 [INFO] Running command /bin/sh -c docker ps | grep -q 9eafe91534f2
2024/01/29 20:01:43.986145 [INFO] Pruning containers ...
2024/01/29 20:01:43.986176 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:01:44.004613 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:01:44.004648 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 20:01:44.025975 [INFO] Total reclaimed space: 0B

2024/01/29 20:01:44.026004 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:01:44.047365 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:01:44.047395 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 20:01:44.066831 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 20:01:44.066852 [INFO] Removing /var/app/current/ if it exists
2024/01/29 20:01:44.067000 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 20:01:44.067041 [INFO] detected new app is not docker compose app
2024/01/29 20:01:44.067091 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 20:01:44.487513 [INFO] 5c0225af127d0be2e437440bebc12f9d9a630f4428645d7bd9678d3ce9c0842f

2024/01/29 20:01:49.491860 [INFO] Running command /bin/sh -c docker ps | grep -q 5c0225af127d
2024/01/29 20:01:49.533514 [ERROR] docker container quit unexpectedly on 2024-01-29 20:01:49.533503533 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5c0225af127d failed with error exit status 1
2024/01/29 20:01:49.533546 [INFO] Running command /bin/sh -c docker logs 5c0225af127d
2024/01/29 20:01:49.561226 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5c0225af127d: Command /bin/sh -c docker ps | grep -q 5c0225af127d failed with error exit status 1 

2024/01/29 20:01:49.561237 [INFO] Executing cleanup logic
2024/01/29 20:01:49.561590 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 20:35:58.575115 [INFO] Starting...
2024/01/29 20:35:58.575156 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 20:35:58.575182 [INFO] reading event message file
2024/01/29 20:35:58.577614 [INFO] Engine received EB command userdata-exec

2024/01/29 20:35:58.590928 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 20:35:58.968833 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 20:35:59.367224 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 20:35:59.367570 [INFO] Engine command: (self-startup)

2024/01/29 20:35:59.367676 [INFO] Downloading EB Application...
2024/01/29 20:35:59.367683 [INFO] Region: eu-west-1
2024/01/29 20:35:59.367686 [INFO] envID: e-8gmkc7rmw6
2024/01/29 20:35:59.367697 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 20:35:59.367701 [INFO] Using manifest file name from command request
2024/01/29 20:35:59.367717 [INFO] Unable to get version manifest file.
2024/01/29 20:35:59.367720 [INFO] Downloading latest manifest available.
2024/01/29 20:35:59.367724 [INFO] Download latest app version manifest
2024/01/29 20:35:59.367923 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 20:35:59.412659 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 20:35:59.412846 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 20:35:59.424256 [INFO] Download successful124bytes downloaded
2024/01/29 20:35:59.424385 [INFO] Trying to read and parse version manifest...
2024/01/29 20:35:59.424457 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:35:59.460570 [INFO] Download successful264bytes downloaded
2024/01/29 20:35:59.460934 [INFO] Executing instruction: SyncClock
2024/01/29 20:35:59.460939 [INFO] Starting SyncClock
2024/01/29 20:35:59.460949 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 20:35:59.466736 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 20:35:52 2024
System time     : 0.000006657 seconds fast of NTP time
Last offset     : +0.000008625 seconds
RMS offset      : 0.000014629 seconds
Frequency       : 1.224 ppm fast
Residual freq   : +0.055 ppm
Skew            : 0.794 ppm
Root delay      : 0.000444479 seconds
Root dispersion : 0.000558333 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 20:35:59.466759 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 20:35:59.471062 [INFO] 200 OK

2024/01/29 20:35:59.471192 [INFO] Skipping Configure OS
2024/01/29 20:35:59.471216 [INFO] Skipping LockRepo
2024/01/29 20:35:59.471221 [INFO] Skipping GenerateEBBanner
2024/01/29 20:35:59.471225 [INFO] Skipping Install Process Manager
2024/01/29 20:35:59.471237 [INFO] Skipping install syslog
2024/01/29 20:35:59.471241 [INFO] Skipping install cron
2024/01/29 20:35:59.471248 [INFO] Skipping install proxy
2024/01/29 20:35:59.471252 [INFO] Skipping installhealthd
2024/01/29 20:35:59.471256 [INFO] Skipping Install Log Streaming Manager
2024/01/29 20:35:59.471260 [INFO] Skipping install X-Ray
2024/01/29 20:35:59.471264 [INFO] Skipping install Third Party License
2024/01/29 20:35:59.471269 [INFO] Skipping installSqsd
2024/01/29 20:35:59.471273 [INFO] Skipping bootstraphealthd
2024/01/29 20:35:59.471276 [INFO] Skipping Install yum packages
2024/01/29 20:35:59.471280 [INFO] Skipping install docker-compose
2024/01/29 20:35:59.471284 [INFO] Skipping Configure Docker Daemon
2024/01/29 20:35:59.471288 [INFO] Skipping MarkBaked
2024/01/29 20:35:59.471292 [INFO] Skipping TuneSystemSettings
2024/01/29 20:35:59.471294 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 20:35:59.471298 [INFO] Initialize LogRotate files and directories
2024/01/29 20:35:59.491706 [INFO] Skipping BootstrapCFNHup
2024/01/29 20:35:59.491725 [INFO] Executing instruction: StartCFNHup
2024/01/29 20:35:59.491731 [INFO] Start cfn-hup
2024/01/29 20:35:59.491756 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 20:35:59.520511 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 20:35:59.533989 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 20:35:59.534024 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 20:35:59.534028 [INFO] Executing instruction: Start Docker
2024/01/29 20:35:59.534089 [INFO] Starting Docker...
2024/01/29 20:35:59.534178 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 20:35:59.535252 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 20:35:59.536177 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 20:35:59.902889 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:35:59.918337 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 20:35:59.918377 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:35:59.950528 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 20:35:59.973378 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:35:59.985757 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 20:36:00.153978 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 20:36:00.154072 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 20:36:00.499081 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:36:00.810710 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:36:00.826773 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:36:01.235792 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:36:01.258993 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 20:36:01.296715 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 20:36:01.309169 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 20:36:03.046236 [INFO] Skipping Setup Docker Options
2024/01/29 20:36:03.046268 [INFO] Skipping MarkBootstrapped
2024/01/29 20:36:03.046272 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 20:36:03.046568 [INFO] Starting SwitchCFNStack
2024/01/29 20:36:03.046576 [INFO] Executing instruction: stopSqsd
2024/01/29 20:36:03.046580 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 20:36:03.046588 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 20:36:03.046662 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 20:36:03.046680 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 20:36:03.576060 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 20:36:03.576083 [INFO] Executing instruction: StagedockerApplication
2024/01/29 20:36:03.576094 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 20:36:03.624907 [INFO] Pruning containers ...
2024/01/29 20:36:03.624940 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:36:03.645715 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                      PORTS     NAMES
5c0225af127d   c176d18fbf65   "./main --environmen…"   34 minutes ago   Exited (1) 34 minutes ago             objective_payne

2024/01/29 20:36:03.645747 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 20:36:03.674708 [INFO] Deleted Containers:
5c0225af127d0be2e437440bebc12f9d9a630f4428645d7bd9678d3ce9c0842f

Total reclaimed space: 0B

2024/01/29 20:36:03.674732 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:36:03.696403 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:36:03.696766 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 20:36:03.699720 [INFO] application/json

2024/01/29 20:36:03.699744 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 20:36:03.773994 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 20:36:03.774166 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 20:36:03.775528 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 20:36:03.775556 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 20:36:03.775575 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 20:36:03.775579 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 20:36:03.775589 [INFO] Executing instruction: Generate environment file
2024/01/29 20:36:03.775617 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 20:36:03.775621 [INFO] start build docker app
2024/01/29 20:36:03.776095 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 20:36:03.776098 [INFO] fetching image and ports
2024/01/29 20:36:03.777777 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 20:36:03.777845 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 20:36:03.777854 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 20:36:03.777871 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 20:36:04.803717 [INFO] Login Succeeded

2024/01/29 20:36:04.803735 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 20:36:04.803741 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 20:36:04.803760 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:36:04.964798 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 20:36:04.964860 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:36:04.964868 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 20:36:04.964871 [INFO] start to build docker image
2024/01/29 20:36:04.964893 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 20:36:05.343737 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 20:36:05.343762 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 20:36:05.343766 [INFO] successfully build docker image
2024/01/29 20:36:05.343769 [INFO] save staging docker image id
2024/01/29 20:36:05.343781 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 20:36:05.366375 [INFO] c176d18fbf65

2024/01/29 20:36:05.366486 [INFO] Executing instruction: configure X-Ray
2024/01/29 20:36:05.366491 [INFO] X-Ray is not enabled.
2024/01/29 20:36:05.366495 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 20:36:05.372080 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 20:36:05.373686 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:36:05.385495 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 20:36:05.385523 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:36:05.396636 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 20:36:05.405918 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:36:05.416625 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 20:36:05.489521 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 20:36:05.804974 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 20:36:05.805197 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:36:06.215346 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:36:06.244623 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 20:36:06.606094 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 20:36:06.615816 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 20:36:06.625203 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 20:36:06.899948 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 20:36:06.909910 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 20:36:07.205260 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 20:36:07.205295 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 20:36:07.225555 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 20:36:07.239314 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 20:36:07.297188 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 20:36:07.298646 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 20:36:07.300360 [INFO] Executing instruction: configure log streaming
2024/01/29 20:36:07.300372 [INFO] log streaming is not enabled
2024/01/29 20:36:07.300375 [INFO] disable log stream
2024/01/29 20:36:07.300389 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 20:36:07.324494 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 20:36:07.346976 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 20:36:07.347000 [INFO] Checking if logs need forced rotation
2024/01/29 20:36:07.347019 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 20:36:07.912836 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 20:36:08.388468 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 20:36:08.390121 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 20:36:08.631106 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 20:36:08.649183 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 20:36:08.649198 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 20:36:08.649219 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 20:36:09.051309 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 20:36:09.051344 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 20:36:09.051403 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 20:36:09.051409 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 20:36:09.051432 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 20:36:09.051445 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 20:36:09.051448 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 20:36:09.051464 [INFO] Executing instruction: stop X-Ray
2024/01/29 20:36:09.051467 [INFO] stop X-Ray ...
2024/01/29 20:36:09.051480 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 20:36:09.065341 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 20:36:09.065373 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 20:36:09.079878 [INFO] Executing instruction: Run Docker Container
2024/01/29 20:36:09.079922 [INFO] stop currently running containers...
2024/01/29 20:36:09.079932 [INFO] detected old app is not docker compose app
2024/01/29 20:36:09.079946 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 20:36:09.122437 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 20:36:09.137596 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 20:36:09.137640 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 20:36:09.151390 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 20:36:09.151424 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 20:36:09.164797 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 20:36:09.164847 [INFO] stopping current container: 5c0225af127d
2024/01/29 20:36:09.164860 [INFO] Running command /bin/sh -c docker ps | grep -q 5c0225af127d
2024/01/29 20:36:09.184030 [INFO] Running command /bin/sh -c docker ps | grep -q 5c0225af127d
2024/01/29 20:36:09.207415 [INFO] Pruning containers ...
2024/01/29 20:36:09.207437 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:36:09.224447 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:36:09.224479 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 20:36:09.243039 [INFO] Total reclaimed space: 0B

2024/01/29 20:36:09.243062 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 20:36:09.262840 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 20:36:09.262873 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 20:36:09.287336 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 20:36:09.287356 [INFO] Removing /var/app/current/ if it exists
2024/01/29 20:36:09.287455 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 20:36:09.287472 [INFO] detected new app is not docker compose app
2024/01/29 20:36:09.287519 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 20:36:09.698138 [INFO] 7dbb83b76a53b90cf74b8af9dec153e61112713c7c7e6300feb7102dc48f94e6

2024/01/29 20:36:14.702396 [INFO] Running command /bin/sh -c docker ps | grep -q 7dbb83b76a53
2024/01/29 20:36:14.724280 [ERROR] docker container quit unexpectedly on 2024-01-29 20:36:14.724268626 +0000 UTC: Command /bin/sh -c docker ps | grep -q 7dbb83b76a53 failed with error exit status 1
2024/01/29 20:36:14.724318 [INFO] Running command /bin/sh -c docker logs 7dbb83b76a53
2024/01/29 20:36:14.747007 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 7dbb83b76a53: Command /bin/sh -c docker ps | grep -q 7dbb83b76a53 failed with error exit status 1 

2024/01/29 20:36:14.747017 [INFO] Executing cleanup logic
2024/01/29 20:36:14.747281 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 21:36:15.835059 [INFO] Starting...
2024/01/29 21:36:15.835101 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 21:36:15.835127 [INFO] reading event message file
2024/01/29 21:36:15.835965 [INFO] Engine received EB command userdata-exec

2024/01/29 21:36:15.866814 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 21:36:16.265818 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 21:36:16.707410 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 21:36:16.707524 [INFO] Engine command: (self-startup)

2024/01/29 21:36:16.707533 [INFO] Downloading EB Application...
2024/01/29 21:36:16.707541 [INFO] Region: eu-west-1
2024/01/29 21:36:16.707544 [INFO] envID: e-8gmkc7rmw6
2024/01/29 21:36:16.707548 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 21:36:16.707556 [INFO] Using manifest file name from command request
2024/01/29 21:36:16.707580 [INFO] Unable to get version manifest file.
2024/01/29 21:36:16.707592 [INFO] Downloading latest manifest available.
2024/01/29 21:36:16.707600 [INFO] Download latest app version manifest
2024/01/29 21:36:16.707862 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 21:36:16.754207 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 21:36:16.754511 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 21:36:16.765738 [INFO] Download successful124bytes downloaded
2024/01/29 21:36:16.766018 [INFO] Trying to read and parse version manifest...
2024/01/29 21:36:16.766098 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 21:36:16.808831 [INFO] Download successful264bytes downloaded
2024/01/29 21:36:16.812482 [INFO] Executing instruction: SyncClock
2024/01/29 21:36:16.812571 [INFO] Starting SyncClock
2024/01/29 21:36:16.812658 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 21:36:16.823110 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 21:36:14 2024
System time     : 0.000003646 seconds fast of NTP time
Last offset     : +0.000004417 seconds
RMS offset      : 0.000005825 seconds
Frequency       : 0.345 ppm fast
Residual freq   : +0.005 ppm
Skew            : 0.407 ppm
Root delay      : 0.000435753 seconds
Root dispersion : 0.000497742 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/29 21:36:16.823138 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 21:36:16.828500 [INFO] 200 OK

2024/01/29 21:36:16.828926 [INFO] Skipping Configure OS
2024/01/29 21:36:16.828942 [INFO] Skipping LockRepo
2024/01/29 21:36:16.828981 [INFO] Skipping GenerateEBBanner
2024/01/29 21:36:16.828986 [INFO] Skipping Install Process Manager
2024/01/29 21:36:16.828990 [INFO] Skipping install syslog
2024/01/29 21:36:16.828994 [INFO] Skipping install cron
2024/01/29 21:36:16.828998 [INFO] Skipping install proxy
2024/01/29 21:36:16.829002 [INFO] Skipping installhealthd
2024/01/29 21:36:16.829007 [INFO] Skipping Install Log Streaming Manager
2024/01/29 21:36:16.829014 [INFO] Skipping install X-Ray
2024/01/29 21:36:16.829020 [INFO] Skipping install Third Party License
2024/01/29 21:36:16.829027 [INFO] Skipping installSqsd
2024/01/29 21:36:16.829059 [INFO] Skipping bootstraphealthd
2024/01/29 21:36:16.829066 [INFO] Skipping Install yum packages
2024/01/29 21:36:16.829070 [INFO] Skipping install docker-compose
2024/01/29 21:36:16.829074 [INFO] Skipping Configure Docker Daemon
2024/01/29 21:36:16.829078 [INFO] Skipping MarkBaked
2024/01/29 21:36:16.829082 [INFO] Skipping TuneSystemSettings
2024/01/29 21:36:16.829085 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 21:36:16.829088 [INFO] Initialize LogRotate files and directories
2024/01/29 21:36:16.844691 [INFO] Skipping BootstrapCFNHup
2024/01/29 21:36:16.844702 [INFO] Executing instruction: StartCFNHup
2024/01/29 21:36:16.844705 [INFO] Start cfn-hup
2024/01/29 21:36:16.844722 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 21:36:16.861622 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 21:36:16.870607 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 21:36:16.870631 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 21:36:16.870634 [INFO] Executing instruction: Start Docker
2024/01/29 21:36:16.870636 [INFO] Starting Docker...
2024/01/29 21:36:16.870698 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 21:36:16.871623 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 21:36:16.872818 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 21:36:17.171857 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 21:36:17.186980 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 21:36:17.187052 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 21:36:17.197719 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 21:36:17.205723 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 21:36:17.216261 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 21:36:17.316849 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 21:36:17.316916 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 21:36:17.609193 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 21:36:17.925989 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 21:36:17.943415 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 21:36:18.234765 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 21:36:18.244867 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 21:36:18.264906 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 21:36:18.273758 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 21:36:19.578741 [INFO] Skipping Setup Docker Options
2024/01/29 21:36:19.578765 [INFO] Skipping MarkBootstrapped
2024/01/29 21:36:19.578770 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 21:36:19.578958 [INFO] Starting SwitchCFNStack
2024/01/29 21:36:19.578965 [INFO] Executing instruction: stopSqsd
2024/01/29 21:36:19.578969 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 21:36:19.578973 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 21:36:19.578977 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 21:36:19.578997 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 21:36:20.151318 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 21:36:20.151341 [INFO] Executing instruction: StagedockerApplication
2024/01/29 21:36:20.151385 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 21:36:20.173104 [INFO] Pruning containers ...
2024/01/29 21:36:20.173141 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 21:36:20.197741 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
7dbb83b76a53   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             dazzling_jackson

2024/01/29 21:36:20.197784 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 21:36:20.223150 [INFO] Deleted Containers:
7dbb83b76a53b90cf74b8af9dec153e61112713c7c7e6300feb7102dc48f94e6

Total reclaimed space: 0B

2024/01/29 21:36:20.223172 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 21:36:20.242053 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 21:36:20.242475 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 21:36:20.256409 [INFO] application/json

2024/01/29 21:36:20.256690 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 21:36:20.328098 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 21:36:20.328281 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 21:36:20.333601 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 21:36:20.333649 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 21:36:20.333670 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 21:36:20.333674 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 21:36:20.333679 [INFO] Executing instruction: Generate environment file
2024/01/29 21:36:20.333711 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 21:36:20.333715 [INFO] start build docker app
2024/01/29 21:36:20.334177 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 21:36:20.334180 [INFO] fetching image and ports
2024/01/29 21:36:20.336342 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 21:36:20.336403 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 21:36:20.336411 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 21:36:20.336421 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 21:36:21.189752 [INFO] Login Succeeded

2024/01/29 21:36:21.189768 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 21:36:21.189775 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 21:36:21.189791 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 21:36:21.351351 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 21:36:21.351393 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 21:36:21.351398 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 21:36:21.351400 [INFO] start to build docker image
2024/01/29 21:36:21.351415 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 21:36:21.626647 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 21:36:21.626672 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 21:36:21.626681 [INFO] successfully build docker image
2024/01/29 21:36:21.626684 [INFO] save staging docker image id
2024/01/29 21:36:21.626699 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 21:36:21.653992 [INFO] c176d18fbf65

2024/01/29 21:36:21.654262 [INFO] Executing instruction: configure X-Ray
2024/01/29 21:36:21.654271 [INFO] X-Ray is not enabled.
2024/01/29 21:36:21.654274 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 21:36:21.660218 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 21:36:21.662358 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 21:36:21.674344 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 21:36:21.674375 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 21:36:21.684638 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 21:36:21.693168 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 21:36:21.710992 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 21:36:21.777335 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 21:36:22.059202 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 21:36:22.059379 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 21:36:22.366181 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 21:36:22.377157 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 21:36:22.728910 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 21:36:22.738839 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 21:36:22.747582 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 21:36:23.078986 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 21:36:23.089097 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 21:36:23.428652 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 21:36:23.428688 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 21:36:23.441046 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 21:36:23.449309 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 21:36:23.523699 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 21:36:23.524848 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 21:36:23.526565 [INFO] Executing instruction: configure log streaming
2024/01/29 21:36:23.526574 [INFO] log streaming is not enabled
2024/01/29 21:36:23.526578 [INFO] disable log stream
2024/01/29 21:36:23.526752 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 21:36:23.550794 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 21:36:23.570198 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 21:36:23.570222 [INFO] Checking if logs need forced rotation
2024/01/29 21:36:23.570241 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 21:36:24.133198 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 21:36:24.658299 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 21:36:24.662064 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 21:36:24.920367 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 21:36:24.939685 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 21:36:24.939700 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 21:36:24.939718 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 21:36:25.381165 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 21:36:25.381193 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 21:36:25.381216 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 21:36:25.381219 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 21:36:25.381239 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 21:36:25.381250 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 21:36:25.381254 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 21:36:25.381260 [INFO] Executing instruction: stop X-Ray
2024/01/29 21:36:25.381263 [INFO] stop X-Ray ...
2024/01/29 21:36:25.381279 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 21:36:25.398516 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 21:36:25.398553 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 21:36:25.414810 [INFO] Executing instruction: Run Docker Container
2024/01/29 21:36:25.414843 [INFO] stop currently running containers...
2024/01/29 21:36:25.414854 [INFO] detected old app is not docker compose app
2024/01/29 21:36:25.414869 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 21:36:25.452471 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 21:36:25.468803 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 21:36:25.468838 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 21:36:25.487486 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 21:36:25.487532 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 21:36:25.503936 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 21:36:25.503991 [INFO] stopping current container: 7dbb83b76a53
2024/01/29 21:36:25.504002 [INFO] Running command /bin/sh -c docker ps | grep -q 7dbb83b76a53
2024/01/29 21:36:25.525696 [INFO] Running command /bin/sh -c docker ps | grep -q 7dbb83b76a53
2024/01/29 21:36:25.551643 [INFO] Pruning containers ...
2024/01/29 21:36:25.551666 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 21:36:25.580388 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 21:36:25.580420 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 21:36:25.602068 [INFO] Total reclaimed space: 0B

2024/01/29 21:36:25.602096 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 21:36:25.621787 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 21:36:25.621822 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 21:36:25.644063 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 21:36:25.644087 [INFO] Removing /var/app/current/ if it exists
2024/01/29 21:36:25.644185 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 21:36:25.644202 [INFO] detected new app is not docker compose app
2024/01/29 21:36:25.644256 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 21:36:26.049723 [INFO] a5efe7391275e450c0e725a3cd033cfa83478892d5833a5dfdf81e9dfd1688ff

2024/01/29 21:36:31.050068 [INFO] Running command /bin/sh -c docker ps | grep -q a5efe7391275
2024/01/29 21:36:31.076597 [ERROR] docker container quit unexpectedly on 2024-01-29 21:36:31.076584577 +0000 UTC: Command /bin/sh -c docker ps | grep -q a5efe7391275 failed with error exit status 1
2024/01/29 21:36:31.076622 [INFO] Running command /bin/sh -c docker logs a5efe7391275
2024/01/29 21:36:31.113609 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container a5efe7391275: Command /bin/sh -c docker ps | grep -q a5efe7391275 failed with error exit status 1 

2024/01/29 21:36:31.113809 [INFO] Executing cleanup logic
2024/01/29 21:36:31.115424 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 22:36:32.053553 [INFO] Starting...
2024/01/29 22:36:32.053592 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 22:36:32.053624 [INFO] reading event message file
2024/01/29 22:36:32.054428 [INFO] Engine received EB command userdata-exec

2024/01/29 22:36:32.062911 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 22:36:32.495052 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 22:36:33.008521 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 22:36:33.008607 [INFO] Engine command: (self-startup)

2024/01/29 22:36:33.008612 [INFO] Downloading EB Application...
2024/01/29 22:36:33.008614 [INFO] Region: eu-west-1
2024/01/29 22:36:33.008616 [INFO] envID: e-8gmkc7rmw6
2024/01/29 22:36:33.008619 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 22:36:33.008621 [INFO] Using manifest file name from command request
2024/01/29 22:36:33.008634 [INFO] Unable to get version manifest file.
2024/01/29 22:36:33.008636 [INFO] Downloading latest manifest available.
2024/01/29 22:36:33.008638 [INFO] Download latest app version manifest
2024/01/29 22:36:33.008763 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 22:36:33.044683 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 22:36:33.044857 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 22:36:33.055389 [INFO] Download successful124bytes downloaded
2024/01/29 22:36:33.055532 [INFO] Trying to read and parse version manifest...
2024/01/29 22:36:33.055609 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 22:36:33.091250 [INFO] Download successful264bytes downloaded
2024/01/29 22:36:33.091628 [INFO] Executing instruction: SyncClock
2024/01/29 22:36:33.091636 [INFO] Starting SyncClock
2024/01/29 22:36:33.091649 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 22:36:33.097712 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 22:36:20 2024
System time     : 0.000002731 seconds fast of NTP time
Last offset     : +0.000008653 seconds
RMS offset      : 0.000010572 seconds
Frequency       : 0.536 ppm fast
Residual freq   : -0.057 ppm
Skew            : 0.621 ppm
Root delay      : 0.000464752 seconds
Root dispersion : 0.000428616 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/29 22:36:33.097732 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 22:36:33.101909 [INFO] 200 OK

2024/01/29 22:36:33.102012 [INFO] Skipping Configure OS
2024/01/29 22:36:33.102018 [INFO] Skipping LockRepo
2024/01/29 22:36:33.102030 [INFO] Skipping GenerateEBBanner
2024/01/29 22:36:33.102034 [INFO] Skipping Install Process Manager
2024/01/29 22:36:33.102038 [INFO] Skipping install syslog
2024/01/29 22:36:33.102042 [INFO] Skipping install cron
2024/01/29 22:36:33.102046 [INFO] Skipping install proxy
2024/01/29 22:36:33.102050 [INFO] Skipping installhealthd
2024/01/29 22:36:33.102054 [INFO] Skipping Install Log Streaming Manager
2024/01/29 22:36:33.102059 [INFO] Skipping install X-Ray
2024/01/29 22:36:33.102064 [INFO] Skipping install Third Party License
2024/01/29 22:36:33.102091 [INFO] Skipping installSqsd
2024/01/29 22:36:33.102095 [INFO] Skipping bootstraphealthd
2024/01/29 22:36:33.102099 [INFO] Skipping Install yum packages
2024/01/29 22:36:33.102103 [INFO] Skipping install docker-compose
2024/01/29 22:36:33.102107 [INFO] Skipping Configure Docker Daemon
2024/01/29 22:36:33.102111 [INFO] Skipping MarkBaked
2024/01/29 22:36:33.102115 [INFO] Skipping TuneSystemSettings
2024/01/29 22:36:33.102117 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 22:36:33.102120 [INFO] Initialize LogRotate files and directories
2024/01/29 22:36:33.117741 [INFO] Skipping BootstrapCFNHup
2024/01/29 22:36:33.117753 [INFO] Executing instruction: StartCFNHup
2024/01/29 22:36:33.117756 [INFO] Start cfn-hup
2024/01/29 22:36:33.117780 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 22:36:33.171066 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 22:36:33.184779 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 22:36:33.184812 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 22:36:33.184816 [INFO] Executing instruction: Start Docker
2024/01/29 22:36:33.184819 [INFO] Starting Docker...
2024/01/29 22:36:33.184895 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 22:36:33.188309 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 22:36:33.189321 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 22:36:33.671799 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 22:36:33.687564 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 22:36:33.687599 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 22:36:33.698513 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 22:36:33.707572 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 22:36:33.718092 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 22:36:33.757179 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 22:36:33.757212 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 22:36:34.072826 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 22:36:34.470235 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 22:36:34.490826 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 22:36:34.851184 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 22:36:34.860828 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 22:36:34.875234 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 22:36:34.884962 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 22:36:36.139738 [INFO] Skipping Setup Docker Options
2024/01/29 22:36:36.139762 [INFO] Skipping MarkBootstrapped
2024/01/29 22:36:36.139766 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 22:36:36.139879 [INFO] Starting SwitchCFNStack
2024/01/29 22:36:36.139885 [INFO] Executing instruction: stopSqsd
2024/01/29 22:36:36.139891 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 22:36:36.139895 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 22:36:36.139899 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 22:36:36.139916 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 22:36:36.695848 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 22:36:36.695877 [INFO] Executing instruction: StagedockerApplication
2024/01/29 22:36:36.695890 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 22:36:36.740336 [INFO] Pruning containers ...
2024/01/29 22:36:36.740369 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 22:36:36.772122 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
a5efe7391275   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             stupefied_lewin

2024/01/29 22:36:36.772217 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 22:36:36.800286 [INFO] Deleted Containers:
a5efe7391275e450c0e725a3cd033cfa83478892d5833a5dfdf81e9dfd1688ff

Total reclaimed space: 0B

2024/01/29 22:36:36.800310 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 22:36:36.819835 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 22:36:36.820052 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 22:36:36.822989 [INFO] application/json

2024/01/29 22:36:36.823011 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 22:36:36.896103 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 22:36:36.896262 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 22:36:36.897315 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 22:36:36.897335 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 22:36:36.897348 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 22:36:36.897350 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 22:36:36.897354 [INFO] Executing instruction: Generate environment file
2024/01/29 22:36:36.897377 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 22:36:36.897380 [INFO] start build docker app
2024/01/29 22:36:36.897817 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 22:36:36.897822 [INFO] fetching image and ports
2024/01/29 22:36:36.903003 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 22:36:36.903080 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 22:36:36.903311 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 22:36:36.903340 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 22:36:37.951598 [INFO] Login Succeeded

2024/01/29 22:36:37.951615 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 22:36:37.951621 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 22:36:37.951688 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 22:36:38.096550 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 22:36:38.096571 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 22:36:38.096575 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 22:36:38.096578 [INFO] start to build docker image
2024/01/29 22:36:38.096592 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 22:36:38.391892 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 22:36:38.391915 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 22:36:38.391920 [INFO] successfully build docker image
2024/01/29 22:36:38.391923 [INFO] save staging docker image id
2024/01/29 22:36:38.391936 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 22:36:38.415569 [INFO] c176d18fbf65

2024/01/29 22:36:38.415779 [INFO] Executing instruction: configure X-Ray
2024/01/29 22:36:38.415786 [INFO] X-Ray is not enabled.
2024/01/29 22:36:38.415790 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 22:36:38.423682 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 22:36:38.425484 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 22:36:38.439973 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 22:36:38.440005 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 22:36:38.450276 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 22:36:38.459793 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 22:36:38.470483 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 22:36:38.540276 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 22:36:38.871947 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 22:36:38.872178 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 22:36:39.245459 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 22:36:39.256531 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 22:36:39.564295 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 22:36:39.574597 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 22:36:39.583683 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 22:36:39.912238 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 22:36:39.925961 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 22:36:40.228997 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 22:36:40.229031 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 22:36:40.243595 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 22:36:40.254868 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 22:36:40.341159 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 22:36:40.342261 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 22:36:40.343176 [INFO] Executing instruction: configure log streaming
2024/01/29 22:36:40.343186 [INFO] log streaming is not enabled
2024/01/29 22:36:40.343189 [INFO] disable log stream
2024/01/29 22:36:40.343224 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 22:36:40.364525 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 22:36:40.389580 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 22:36:40.389607 [INFO] Checking if logs need forced rotation
2024/01/29 22:36:40.389626 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 22:36:40.947755 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 22:36:41.452186 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 22:36:41.454040 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 22:36:41.906229 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 22:36:41.929010 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 22:36:41.929027 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 22:36:41.929045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 22:36:42.304777 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 22:36:42.304815 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 22:36:42.304842 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 22:36:42.304845 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 22:36:42.304870 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 22:36:42.304884 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 22:36:42.304887 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 22:36:42.304893 [INFO] Executing instruction: stop X-Ray
2024/01/29 22:36:42.304897 [INFO] stop X-Ray ...
2024/01/29 22:36:42.304914 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 22:36:42.320624 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 22:36:42.320665 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 22:36:42.342842 [INFO] Executing instruction: Run Docker Container
2024/01/29 22:36:42.342873 [INFO] stop currently running containers...
2024/01/29 22:36:42.342884 [INFO] detected old app is not docker compose app
2024/01/29 22:36:42.342899 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 22:36:42.392568 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 22:36:42.407813 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 22:36:42.407846 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 22:36:42.421543 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 22:36:42.421575 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 22:36:42.435388 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 22:36:42.435440 [INFO] stopping current container: a5efe7391275
2024/01/29 22:36:42.435452 [INFO] Running command /bin/sh -c docker ps | grep -q a5efe7391275
2024/01/29 22:36:42.456310 [INFO] Running command /bin/sh -c docker ps | grep -q a5efe7391275
2024/01/29 22:36:42.476121 [INFO] Pruning containers ...
2024/01/29 22:36:42.476143 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 22:36:42.496852 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 22:36:42.496880 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 22:36:42.531648 [INFO] Total reclaimed space: 0B

2024/01/29 22:36:42.531679 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 22:36:42.556393 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 22:36:42.556437 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 22:36:42.577054 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 22:36:42.577079 [INFO] Removing /var/app/current/ if it exists
2024/01/29 22:36:42.577198 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 22:36:42.577217 [INFO] detected new app is not docker compose app
2024/01/29 22:36:42.577271 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 22:36:43.019515 [INFO] c3ac4c156d5c4c2e2ef7810c82cad5c391b00a83bb4a67eb9eb36d240582a9c4

2024/01/29 22:36:48.023832 [INFO] Running command /bin/sh -c docker ps | grep -q c3ac4c156d5c
2024/01/29 22:36:48.074471 [ERROR] docker container quit unexpectedly on 2024-01-29 22:36:48.074452541 +0000 UTC: Command /bin/sh -c docker ps | grep -q c3ac4c156d5c failed with error exit status 1
2024/01/29 22:36:48.074510 [INFO] Running command /bin/sh -c docker logs c3ac4c156d5c
2024/01/29 22:36:48.123795 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c3ac4c156d5c: Command /bin/sh -c docker ps | grep -q c3ac4c156d5c failed with error exit status 1 

2024/01/29 22:36:48.123805 [INFO] Executing cleanup logic
2024/01/29 22:36:48.124059 [INFO] Platform Engine finished execution on command: self-startup

2024/01/29 23:36:49.184879 [INFO] Starting...
2024/01/29 23:36:49.184922 [INFO] Starting EBPlatform-PlatformEngine
2024/01/29 23:36:49.184946 [INFO] reading event message file
2024/01/29 23:36:49.185798 [INFO] Engine received EB command userdata-exec

2024/01/29 23:36:49.191600 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 23:36:49.565023 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 23:36:50.017506 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/29 23:36:50.017613 [INFO] Engine command: (self-startup)

2024/01/29 23:36:50.017622 [INFO] Downloading EB Application...
2024/01/29 23:36:50.017627 [INFO] Region: eu-west-1
2024/01/29 23:36:50.017643 [INFO] envID: e-8gmkc7rmw6
2024/01/29 23:36:50.017646 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/29 23:36:50.017649 [INFO] Using manifest file name from command request
2024/01/29 23:36:50.017685 [INFO] Unable to get version manifest file.
2024/01/29 23:36:50.017688 [INFO] Downloading latest manifest available.
2024/01/29 23:36:50.017691 [INFO] Download latest app version manifest
2024/01/29 23:36:50.017899 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/29 23:36:50.069283 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/29 23:36:50.069464 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/29 23:36:50.088181 [INFO] Download successful124bytes downloaded
2024/01/29 23:36:50.088366 [INFO] Trying to read and parse version manifest...
2024/01/29 23:36:50.088444 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 23:36:50.152696 [INFO] Download successful264bytes downloaded
2024/01/29 23:36:50.153062 [INFO] Executing instruction: SyncClock
2024/01/29 23:36:50.153067 [INFO] Starting SyncClock
2024/01/29 23:36:50.153076 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/29 23:36:50.159834 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 29 23:36:42 2024
System time     : 0.000001345 seconds slow of NTP time
Last offset     : +0.000000489 seconds
RMS offset      : 0.000002889 seconds
Frequency       : 0.925 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.057 ppm
Root delay      : 0.000436302 seconds
Root dispersion : 0.000292862 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/29 23:36:50.159853 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/29 23:36:50.165840 [INFO] 200 OK

2024/01/29 23:36:50.165939 [INFO] Skipping Configure OS
2024/01/29 23:36:50.165944 [INFO] Skipping LockRepo
2024/01/29 23:36:50.165949 [INFO] Skipping GenerateEBBanner
2024/01/29 23:36:50.165954 [INFO] Skipping Install Process Manager
2024/01/29 23:36:50.165958 [INFO] Skipping install syslog
2024/01/29 23:36:50.165963 [INFO] Skipping install cron
2024/01/29 23:36:50.165967 [INFO] Skipping install proxy
2024/01/29 23:36:50.165971 [INFO] Skipping installhealthd
2024/01/29 23:36:50.165975 [INFO] Skipping Install Log Streaming Manager
2024/01/29 23:36:50.165979 [INFO] Skipping install X-Ray
2024/01/29 23:36:50.165984 [INFO] Skipping install Third Party License
2024/01/29 23:36:50.165994 [INFO] Skipping installSqsd
2024/01/29 23:36:50.165999 [INFO] Skipping bootstraphealthd
2024/01/29 23:36:50.166003 [INFO] Skipping Install yum packages
2024/01/29 23:36:50.166009 [INFO] Skipping install docker-compose
2024/01/29 23:36:50.166017 [INFO] Skipping Configure Docker Daemon
2024/01/29 23:36:50.166022 [INFO] Skipping MarkBaked
2024/01/29 23:36:50.166026 [INFO] Skipping TuneSystemSettings
2024/01/29 23:36:50.166029 [INFO] Executing instruction: GetSetupLogRotate
2024/01/29 23:36:50.166032 [INFO] Initialize LogRotate files and directories
2024/01/29 23:36:50.181942 [INFO] Skipping BootstrapCFNHup
2024/01/29 23:36:50.181955 [INFO] Executing instruction: StartCFNHup
2024/01/29 23:36:50.181958 [INFO] Start cfn-hup
2024/01/29 23:36:50.181980 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/29 23:36:50.199010 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/29 23:36:50.207917 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/29 23:36:50.207950 [INFO] Skipping SetupPublishLogCronjob
2024/01/29 23:36:50.207954 [INFO] Executing instruction: Start Docker
2024/01/29 23:36:50.207957 [INFO] Starting Docker...
2024/01/29 23:36:50.208042 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/29 23:36:50.209294 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/29 23:36:50.210284 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 23:36:50.671014 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 23:36:50.687866 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/29 23:36:50.687893 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 23:36:50.703026 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 23:36:50.715913 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 23:36:50.729046 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/29 23:36:50.828939 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/29 23:36:50.829093 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/29 23:36:51.212025 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 23:36:51.592047 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 23:36:51.608353 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 23:36:51.925761 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 23:36:51.934733 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/29 23:36:51.946692 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/29 23:36:51.955375 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/29 23:36:53.174495 [INFO] Skipping Setup Docker Options
2024/01/29 23:36:53.174521 [INFO] Skipping MarkBootstrapped
2024/01/29 23:36:53.174525 [INFO] Executing instruction: Save CFN Stack Info
2024/01/29 23:36:53.175070 [INFO] Starting SwitchCFNStack
2024/01/29 23:36:53.175080 [INFO] Executing instruction: stopSqsd
2024/01/29 23:36:53.175084 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/29 23:36:53.175087 [INFO] Executing instruction: PreBuildEbExtension
2024/01/29 23:36:53.175091 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/29 23:36:53.175109 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/29 23:36:53.772167 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/29 23:36:53.772194 [INFO] Executing instruction: StagedockerApplication
2024/01/29 23:36:53.772206 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/29 23:36:53.796812 [INFO] Pruning containers ...
2024/01/29 23:36:53.796895 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 23:36:53.821342 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c3ac4c156d5c   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             blissful_banach

2024/01/29 23:36:53.821567 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 23:36:53.846368 [INFO] Deleted Containers:
c3ac4c156d5c4c2e2ef7810c82cad5c391b00a83bb4a67eb9eb36d240582a9c4

Total reclaimed space: 0B

2024/01/29 23:36:53.846391 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 23:36:53.870535 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 23:36:53.870771 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/29 23:36:53.878466 [INFO] application/json

2024/01/29 23:36:53.878616 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/29 23:36:53.982207 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/29 23:36:53.982383 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/29 23:36:53.983673 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/29 23:36:53.983695 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/29 23:36:53.983711 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/29 23:36:53.983715 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/29 23:36:53.983721 [INFO] Executing instruction: Generate environment file
2024/01/29 23:36:53.983748 [INFO] Executing instruction: Docker Specific Build Application
2024/01/29 23:36:53.983752 [INFO] start build docker app
2024/01/29 23:36:53.984183 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/29 23:36:53.984187 [INFO] fetching image and ports
2024/01/29 23:36:53.985933 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/29 23:36:53.985976 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/29 23:36:53.985986 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/29 23:36:53.985998 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/29 23:36:54.941876 [INFO] Login Succeeded

2024/01/29 23:36:54.941893 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/29 23:36:54.941900 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/29 23:36:54.941916 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 23:36:55.135585 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/29 23:36:55.135607 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 23:36:55.135612 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/29 23:36:55.135616 [INFO] start to build docker image
2024/01/29 23:36:55.135631 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 23:36:55.471931 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/29 23:36:55.471951 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/29 23:36:55.471954 [INFO] successfully build docker image
2024/01/29 23:36:55.471956 [INFO] save staging docker image id
2024/01/29 23:36:55.471966 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/29 23:36:55.512374 [INFO] c176d18fbf65

2024/01/29 23:36:55.512776 [INFO] Executing instruction: configure X-Ray
2024/01/29 23:36:55.512784 [INFO] X-Ray is not enabled.
2024/01/29 23:36:55.512786 [INFO] Executing instruction: configure proxy Nginx
2024/01/29 23:36:55.518345 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/29 23:36:55.520001 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 23:36:55.532796 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/29 23:36:55.532826 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 23:36:55.543254 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 23:36:55.551600 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 23:36:55.561145 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/29 23:36:55.622563 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/29 23:36:56.021087 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/29 23:36:56.021312 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 23:36:56.396812 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 23:36:56.408419 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/29 23:36:56.727736 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/29 23:36:56.746508 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/29 23:36:56.767572 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/29 23:36:57.076323 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/29 23:36:57.085889 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/29 23:36:57.354734 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/29 23:36:57.354776 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/29 23:36:57.384996 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/29 23:36:57.394711 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/29 23:36:57.509972 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/29 23:36:57.510897 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/29 23:36:57.511821 [INFO] Executing instruction: configure log streaming
2024/01/29 23:36:57.511834 [INFO] log streaming is not enabled
2024/01/29 23:36:57.511838 [INFO] disable log stream
2024/01/29 23:36:57.511852 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/29 23:36:57.537031 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/29 23:36:57.561007 [INFO] Executing instruction: GetToggleForceRotate
2024/01/29 23:36:57.561032 [INFO] Checking if logs need forced rotation
2024/01/29 23:36:57.561053 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/29 23:36:58.172321 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/29 23:36:58.660915 [INFO] Procfile not found. Generating default rsyslog config
2024/01/29 23:36:58.663459 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/29 23:36:59.175950 [INFO] Executing instruction: Configure Docker Logging
2024/01/29 23:36:59.205074 [INFO] Executing instruction: PostBuildEbExtension
2024/01/29 23:36:59.205090 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/29 23:36:59.205101 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/29 23:36:59.747144 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/29 23:36:59.747183 [INFO] Executing instruction: CleanEbExtensions
2024/01/29 23:36:59.747207 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/29 23:36:59.747210 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/29 23:36:59.747254 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/29 23:36:59.747268 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/29 23:36:59.747274 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/29 23:36:59.747280 [INFO] Executing instruction: stop X-Ray
2024/01/29 23:36:59.747282 [INFO] stop X-Ray ...
2024/01/29 23:36:59.747293 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/29 23:36:59.763650 [WARN] stopProcess Warning: process xray is not registered 
2024/01/29 23:36:59.763687 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/29 23:36:59.780005 [INFO] Executing instruction: Run Docker Container
2024/01/29 23:36:59.780036 [INFO] stop currently running containers...
2024/01/29 23:36:59.780048 [INFO] detected old app is not docker compose app
2024/01/29 23:36:59.780063 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/29 23:36:59.812553 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/29 23:36:59.832519 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/29 23:36:59.832553 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/29 23:36:59.852753 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/29 23:36:59.852782 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/29 23:36:59.870740 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/29 23:36:59.870797 [INFO] stopping current container: c3ac4c156d5c
2024/01/29 23:36:59.870810 [INFO] Running command /bin/sh -c docker ps | grep -q c3ac4c156d5c
2024/01/29 23:36:59.898549 [INFO] Running command /bin/sh -c docker ps | grep -q c3ac4c156d5c
2024/01/29 23:36:59.921200 [INFO] Pruning containers ...
2024/01/29 23:36:59.921223 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 23:36:59.945671 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 23:36:59.945702 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/29 23:36:59.973618 [INFO] Total reclaimed space: 0B

2024/01/29 23:36:59.973642 [INFO] Running command /bin/sh -c docker ps -a
2024/01/29 23:36:59.998445 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/29 23:36:59.998479 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/29 23:37:00.055609 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/29 23:37:00.055635 [INFO] Removing /var/app/current/ if it exists
2024/01/29 23:37:00.055744 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/29 23:37:00.055763 [INFO] detected new app is not docker compose app
2024/01/29 23:37:00.055829 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/29 23:37:00.571129 [INFO] 241b1b88e4d2ccf0833e2781cf4de076d321432ccc431b2b0194a194a8d83a84

2024/01/29 23:37:05.571513 [INFO] Running command /bin/sh -c docker ps | grep -q 241b1b88e4d2
2024/01/29 23:37:05.609539 [ERROR] docker container quit unexpectedly on 2024-01-29 23:37:05.609492268 +0000 UTC: Command /bin/sh -c docker ps | grep -q 241b1b88e4d2 failed with error exit status 1
2024/01/29 23:37:05.609566 [INFO] Running command /bin/sh -c docker logs 241b1b88e4d2
2024/01/29 23:37:05.641911 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 241b1b88e4d2: Command /bin/sh -c docker ps | grep -q 241b1b88e4d2 failed with error exit status 1 

2024/01/29 23:37:05.641956 [INFO] Executing cleanup logic
2024/01/29 23:37:05.642336 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 00:37:06.831908 [INFO] Starting...
2024/01/30 00:37:06.831951 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 00:37:06.831975 [INFO] reading event message file
2024/01/30 00:37:06.832682 [INFO] Engine received EB command userdata-exec

2024/01/30 00:37:06.838172 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 00:37:07.250021 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 00:37:07.714526 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 00:37:07.714613 [INFO] Engine command: (self-startup)

2024/01/30 00:37:07.714619 [INFO] Downloading EB Application...
2024/01/30 00:37:07.714622 [INFO] Region: eu-west-1
2024/01/30 00:37:07.714624 [INFO] envID: e-8gmkc7rmw6
2024/01/30 00:37:07.714626 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 00:37:07.714629 [INFO] Using manifest file name from command request
2024/01/30 00:37:07.714678 [INFO] Unable to get version manifest file.
2024/01/30 00:37:07.714681 [INFO] Downloading latest manifest available.
2024/01/30 00:37:07.714684 [INFO] Download latest app version manifest
2024/01/30 00:37:07.714825 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 00:37:07.758072 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 00:37:07.758733 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 00:37:07.772252 [INFO] Download successful124bytes downloaded
2024/01/30 00:37:07.772460 [INFO] Trying to read and parse version manifest...
2024/01/30 00:37:07.772539 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 00:37:07.818081 [INFO] Download successful264bytes downloaded
2024/01/30 00:37:07.818453 [INFO] Executing instruction: SyncClock
2024/01/30 00:37:07.818464 [INFO] Starting SyncClock
2024/01/30 00:37:07.818524 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 00:37:07.824330 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 00:36:52 2024
System time     : 0.000001940 seconds fast of NTP time
Last offset     : +0.000002037 seconds
RMS offset      : 0.000002184 seconds
Frequency       : 0.467 ppm fast
Residual freq   : +0.003 ppm
Skew            : 0.070 ppm
Root delay      : 0.000408289 seconds
Root dispersion : 0.000531091 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 00:37:07.824362 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 00:37:07.830399 [INFO] 200 OK

2024/01/30 00:37:07.830590 [INFO] Skipping Configure OS
2024/01/30 00:37:07.830602 [INFO] Skipping LockRepo
2024/01/30 00:37:07.830606 [INFO] Skipping GenerateEBBanner
2024/01/30 00:37:07.830611 [INFO] Skipping Install Process Manager
2024/01/30 00:37:07.830615 [INFO] Skipping install syslog
2024/01/30 00:37:07.830619 [INFO] Skipping install cron
2024/01/30 00:37:07.830623 [INFO] Skipping install proxy
2024/01/30 00:37:07.830626 [INFO] Skipping installhealthd
2024/01/30 00:37:07.830630 [INFO] Skipping Install Log Streaming Manager
2024/01/30 00:37:07.830634 [INFO] Skipping install X-Ray
2024/01/30 00:37:07.830638 [INFO] Skipping install Third Party License
2024/01/30 00:37:07.830643 [INFO] Skipping installSqsd
2024/01/30 00:37:07.830647 [INFO] Skipping bootstraphealthd
2024/01/30 00:37:07.830651 [INFO] Skipping Install yum packages
2024/01/30 00:37:07.830660 [INFO] Skipping install docker-compose
2024/01/30 00:37:07.830664 [INFO] Skipping Configure Docker Daemon
2024/01/30 00:37:07.830669 [INFO] Skipping MarkBaked
2024/01/30 00:37:07.830672 [INFO] Skipping TuneSystemSettings
2024/01/30 00:37:07.830675 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 00:37:07.830678 [INFO] Initialize LogRotate files and directories
2024/01/30 00:37:07.849740 [INFO] Skipping BootstrapCFNHup
2024/01/30 00:37:07.849754 [INFO] Executing instruction: StartCFNHup
2024/01/30 00:37:07.849757 [INFO] Start cfn-hup
2024/01/30 00:37:07.849774 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 00:37:07.885433 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 00:37:07.907293 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 00:37:07.907328 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 00:37:07.907332 [INFO] Executing instruction: Start Docker
2024/01/30 00:37:07.907335 [INFO] Starting Docker...
2024/01/30 00:37:07.907420 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 00:37:07.910589 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 00:37:07.911840 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 00:37:08.169004 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 00:37:08.185384 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 00:37:08.185418 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 00:37:08.196514 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 00:37:08.210318 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 00:37:08.235775 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 00:37:08.339896 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 00:37:08.339955 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 00:37:08.627144 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 00:37:08.939833 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 00:37:08.953383 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 00:37:09.256234 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 00:37:09.265661 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 00:37:09.280292 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 00:37:09.289307 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 00:37:10.499392 [INFO] Skipping Setup Docker Options
2024/01/30 00:37:10.499416 [INFO] Skipping MarkBootstrapped
2024/01/30 00:37:10.499420 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 00:37:10.499505 [INFO] Starting SwitchCFNStack
2024/01/30 00:37:10.499510 [INFO] Executing instruction: stopSqsd
2024/01/30 00:37:10.499514 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 00:37:10.499516 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 00:37:10.499520 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 00:37:10.499533 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 00:37:10.954933 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 00:37:10.955014 [INFO] Executing instruction: StagedockerApplication
2024/01/30 00:37:10.955026 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 00:37:10.986642 [INFO] Pruning containers ...
2024/01/30 00:37:10.986940 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 00:37:11.016689 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
241b1b88e4d2   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             magical_swartz

2024/01/30 00:37:11.016720 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 00:37:11.060496 [INFO] Deleted Containers:
241b1b88e4d2ccf0833e2781cf4de076d321432ccc431b2b0194a194a8d83a84

Total reclaimed space: 0B

2024/01/30 00:37:11.061561 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 00:37:11.093972 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 00:37:11.094264 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 00:37:11.099111 [INFO] application/json

2024/01/30 00:37:11.099129 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 00:37:11.243848 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 00:37:11.244366 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 00:37:11.245693 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 00:37:11.245720 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 00:37:11.245738 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 00:37:11.245741 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 00:37:11.245746 [INFO] Executing instruction: Generate environment file
2024/01/30 00:37:11.245774 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 00:37:11.245777 [INFO] start build docker app
2024/01/30 00:37:11.246153 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 00:37:11.246157 [INFO] fetching image and ports
2024/01/30 00:37:11.250694 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 00:37:11.250750 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 00:37:11.250763 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 00:37:11.250778 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 00:37:12.125318 [INFO] Login Succeeded

2024/01/30 00:37:12.125341 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 00:37:12.125351 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 00:37:12.125366 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 00:37:12.269094 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 00:37:12.269148 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 00:37:12.269158 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 00:37:12.269162 [INFO] start to build docker image
2024/01/30 00:37:12.269178 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 00:37:12.576308 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 00:37:12.576328 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 00:37:12.576332 [INFO] successfully build docker image
2024/01/30 00:37:12.576334 [INFO] save staging docker image id
2024/01/30 00:37:12.576345 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 00:37:12.601335 [INFO] c176d18fbf65

2024/01/30 00:37:12.601518 [INFO] Executing instruction: configure X-Ray
2024/01/30 00:37:12.601525 [INFO] X-Ray is not enabled.
2024/01/30 00:37:12.601528 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 00:37:12.608413 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 00:37:12.610205 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 00:37:12.628914 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 00:37:12.628959 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 00:37:12.647386 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 00:37:12.655852 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 00:37:12.670891 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 00:37:12.737455 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 00:37:13.047490 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 00:37:13.047573 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 00:37:13.465236 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 00:37:13.477855 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 00:37:13.838412 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 00:37:13.852096 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 00:37:13.864468 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 00:37:14.233364 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 00:37:14.247038 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 00:37:14.554298 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 00:37:14.554333 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 00:37:14.566866 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 00:37:14.581866 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 00:37:14.654836 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 00:37:14.656008 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 00:37:14.657129 [INFO] Executing instruction: configure log streaming
2024/01/30 00:37:14.657139 [INFO] log streaming is not enabled
2024/01/30 00:37:14.657143 [INFO] disable log stream
2024/01/30 00:37:14.657160 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 00:37:14.679602 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 00:37:14.702730 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 00:37:14.702753 [INFO] Checking if logs need forced rotation
2024/01/30 00:37:14.702772 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 00:37:15.323336 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 00:37:15.793708 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 00:37:15.795456 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 00:37:15.902105 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 00:37:15.921955 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 00:37:15.921971 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 00:37:15.921983 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 00:37:16.395865 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 00:37:16.395901 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 00:37:16.395928 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 00:37:16.395932 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 00:37:16.395955 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 00:37:16.395967 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 00:37:16.395970 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 00:37:16.395976 [INFO] Executing instruction: stop X-Ray
2024/01/30 00:37:16.395979 [INFO] stop X-Ray ...
2024/01/30 00:37:16.395993 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 00:37:16.413381 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 00:37:16.413415 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 00:37:16.430529 [INFO] Executing instruction: Run Docker Container
2024/01/30 00:37:16.430556 [INFO] stop currently running containers...
2024/01/30 00:37:16.430575 [INFO] detected old app is not docker compose app
2024/01/30 00:37:16.430586 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 00:37:16.472625 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 00:37:16.489983 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 00:37:16.490026 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 00:37:16.504594 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 00:37:16.504626 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 00:37:16.527412 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 00:37:16.527462 [INFO] stopping current container: 241b1b88e4d2
2024/01/30 00:37:16.527475 [INFO] Running command /bin/sh -c docker ps | grep -q 241b1b88e4d2
2024/01/30 00:37:16.550316 [INFO] Running command /bin/sh -c docker ps | grep -q 241b1b88e4d2
2024/01/30 00:37:16.571520 [INFO] Pruning containers ...
2024/01/30 00:37:16.571551 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 00:37:16.592776 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 00:37:16.592805 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 00:37:16.609278 [INFO] Total reclaimed space: 0B

2024/01/30 00:37:16.609302 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 00:37:16.628518 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 00:37:16.628551 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 00:37:16.648705 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 00:37:16.648725 [INFO] Removing /var/app/current/ if it exists
2024/01/30 00:37:16.648876 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 00:37:16.648892 [INFO] detected new app is not docker compose app
2024/01/30 00:37:16.648943 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 00:37:17.051150 [INFO] 9396a0281c5429cb0142bf6a32c2e17043ffede5735a30c82e0589578751ae04

2024/01/30 00:37:22.051681 [INFO] Running command /bin/sh -c docker ps | grep -q 9396a0281c54
2024/01/30 00:37:22.109344 [ERROR] docker container quit unexpectedly on 2024-01-30 00:37:22.109324784 +0000 UTC: Command /bin/sh -c docker ps | grep -q 9396a0281c54 failed with error exit status 1
2024/01/30 00:37:22.109372 [INFO] Running command /bin/sh -c docker logs 9396a0281c54
2024/01/30 00:37:22.138192 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 9396a0281c54: Command /bin/sh -c docker ps | grep -q 9396a0281c54 failed with error exit status 1 

2024/01/30 00:37:22.138201 [INFO] Executing cleanup logic
2024/01/30 00:37:22.138403 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 01:37:23.186587 [INFO] Starting...
2024/01/30 01:37:23.186626 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 01:37:23.186650 [INFO] reading event message file
2024/01/30 01:37:23.187369 [INFO] Engine received EB command userdata-exec

2024/01/30 01:37:23.193060 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 01:37:23.599248 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 01:37:24.050956 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 01:37:24.051042 [INFO] Engine command: (self-startup)

2024/01/30 01:37:24.051050 [INFO] Downloading EB Application...
2024/01/30 01:37:24.051054 [INFO] Region: eu-west-1
2024/01/30 01:37:24.051057 [INFO] envID: e-8gmkc7rmw6
2024/01/30 01:37:24.051060 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 01:37:24.051063 [INFO] Using manifest file name from command request
2024/01/30 01:37:24.051079 [INFO] Unable to get version manifest file.
2024/01/30 01:37:24.051082 [INFO] Downloading latest manifest available.
2024/01/30 01:37:24.051085 [INFO] Download latest app version manifest
2024/01/30 01:37:24.051248 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 01:37:24.091055 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 01:37:24.091250 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 01:37:24.101587 [INFO] Download successful124bytes downloaded
2024/01/30 01:37:24.101727 [INFO] Trying to read and parse version manifest...
2024/01/30 01:37:24.101803 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 01:37:24.148257 [INFO] Download successful264bytes downloaded
2024/01/30 01:37:24.148731 [INFO] Executing instruction: SyncClock
2024/01/30 01:37:24.148739 [INFO] Starting SyncClock
2024/01/30 01:37:24.148751 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 01:37:24.154737 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 01:37:17 2024
System time     : 0.000003295 seconds fast of NTP time
Last offset     : +0.000004894 seconds
RMS offset      : 0.000004811 seconds
Frequency       : 0.387 ppm fast
Residual freq   : +0.004 ppm
Skew            : 0.122 ppm
Root delay      : 0.000466244 seconds
Root dispersion : 0.000459808 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 01:37:24.154760 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 01:37:24.161402 [INFO] 200 OK

2024/01/30 01:37:24.161525 [INFO] Skipping Configure OS
2024/01/30 01:37:24.161532 [INFO] Skipping LockRepo
2024/01/30 01:37:24.161537 [INFO] Skipping GenerateEBBanner
2024/01/30 01:37:24.161541 [INFO] Skipping Install Process Manager
2024/01/30 01:37:24.161545 [INFO] Skipping install syslog
2024/01/30 01:37:24.161549 [INFO] Skipping install cron
2024/01/30 01:37:24.161553 [INFO] Skipping install proxy
2024/01/30 01:37:24.161557 [INFO] Skipping installhealthd
2024/01/30 01:37:24.161560 [INFO] Skipping Install Log Streaming Manager
2024/01/30 01:37:24.161565 [INFO] Skipping install X-Ray
2024/01/30 01:37:24.161569 [INFO] Skipping install Third Party License
2024/01/30 01:37:24.161574 [INFO] Skipping installSqsd
2024/01/30 01:37:24.161578 [INFO] Skipping bootstraphealthd
2024/01/30 01:37:24.161582 [INFO] Skipping Install yum packages
2024/01/30 01:37:24.161585 [INFO] Skipping install docker-compose
2024/01/30 01:37:24.161589 [INFO] Skipping Configure Docker Daemon
2024/01/30 01:37:24.161595 [INFO] Skipping MarkBaked
2024/01/30 01:37:24.161598 [INFO] Skipping TuneSystemSettings
2024/01/30 01:37:24.161601 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 01:37:24.161603 [INFO] Initialize LogRotate files and directories
2024/01/30 01:37:24.175752 [INFO] Skipping BootstrapCFNHup
2024/01/30 01:37:24.175764 [INFO] Executing instruction: StartCFNHup
2024/01/30 01:37:24.175767 [INFO] Start cfn-hup
2024/01/30 01:37:24.175784 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 01:37:24.191874 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 01:37:24.200291 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 01:37:24.200327 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 01:37:24.200336 [INFO] Executing instruction: Start Docker
2024/01/30 01:37:24.200340 [INFO] Starting Docker...
2024/01/30 01:37:24.200424 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 01:37:24.201506 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 01:37:24.203390 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 01:37:24.645906 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 01:37:24.662466 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 01:37:24.662513 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 01:37:24.672722 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 01:37:24.680881 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 01:37:24.703679 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 01:37:24.772626 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 01:37:24.772657 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 01:37:25.138794 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 01:37:25.486168 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 01:37:25.501072 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 01:37:25.872923 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 01:37:25.883504 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 01:37:25.899901 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 01:37:25.909169 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 01:37:27.304359 [INFO] Skipping Setup Docker Options
2024/01/30 01:37:27.304393 [INFO] Skipping MarkBootstrapped
2024/01/30 01:37:27.304397 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 01:37:27.304509 [INFO] Starting SwitchCFNStack
2024/01/30 01:37:27.304514 [INFO] Executing instruction: stopSqsd
2024/01/30 01:37:27.304518 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 01:37:27.304522 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 01:37:27.304525 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 01:37:27.304542 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 01:37:27.800160 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 01:37:27.800187 [INFO] Executing instruction: StagedockerApplication
2024/01/30 01:37:27.800197 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 01:37:27.819975 [INFO] Pruning containers ...
2024/01/30 01:37:27.820003 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 01:37:27.842337 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
9396a0281c54   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             affectionate_vaughan

2024/01/30 01:37:27.842368 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 01:37:27.867859 [INFO] Deleted Containers:
9396a0281c5429cb0142bf6a32c2e17043ffede5735a30c82e0589578751ae04

Total reclaimed space: 0B

2024/01/30 01:37:27.867892 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 01:37:27.889780 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 01:37:27.890026 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 01:37:27.893330 [INFO] application/json

2024/01/30 01:37:27.893357 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 01:37:27.974294 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 01:37:27.974462 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 01:37:27.975655 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 01:37:27.975689 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 01:37:27.975704 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 01:37:27.975707 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 01:37:27.975712 [INFO] Executing instruction: Generate environment file
2024/01/30 01:37:27.975736 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 01:37:27.975740 [INFO] start build docker app
2024/01/30 01:37:27.976163 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 01:37:27.976166 [INFO] fetching image and ports
2024/01/30 01:37:27.978041 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 01:37:27.978095 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 01:37:27.978104 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 01:37:27.978114 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 01:37:29.014089 [INFO] Login Succeeded

2024/01/30 01:37:29.014169 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 01:37:29.014177 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 01:37:29.014194 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 01:37:29.162860 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 01:37:29.162888 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 01:37:29.162892 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 01:37:29.162895 [INFO] start to build docker image
2024/01/30 01:37:29.162910 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 01:37:29.422164 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 01:37:29.422191 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 01:37:29.422194 [INFO] successfully build docker image
2024/01/30 01:37:29.422196 [INFO] save staging docker image id
2024/01/30 01:37:29.422222 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 01:37:29.447087 [INFO] c176d18fbf65

2024/01/30 01:37:29.447242 [INFO] Executing instruction: configure X-Ray
2024/01/30 01:37:29.447249 [INFO] X-Ray is not enabled.
2024/01/30 01:37:29.447253 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 01:37:29.452316 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 01:37:29.454164 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 01:37:29.467120 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 01:37:29.467261 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 01:37:29.488816 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 01:37:29.515840 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 01:37:29.549319 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 01:37:29.618741 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 01:37:29.979573 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 01:37:29.979639 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 01:37:30.336996 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 01:37:30.349342 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 01:37:30.754279 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 01:37:30.764658 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 01:37:30.774384 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 01:37:31.124552 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 01:37:31.135168 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 01:37:31.456386 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 01:37:31.456416 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 01:37:31.467387 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 01:37:31.476083 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 01:37:31.541325 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 01:37:31.542411 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 01:37:31.543308 [INFO] Executing instruction: configure log streaming
2024/01/30 01:37:31.543318 [INFO] log streaming is not enabled
2024/01/30 01:37:31.543322 [INFO] disable log stream
2024/01/30 01:37:31.543337 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 01:37:31.564462 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 01:37:31.584773 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 01:37:31.584796 [INFO] Checking if logs need forced rotation
2024/01/30 01:37:31.584815 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 01:37:32.091917 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 01:37:32.587457 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 01:37:32.589402 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 01:37:32.684255 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 01:37:32.704878 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 01:37:32.704904 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 01:37:32.704921 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 01:37:33.130772 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 01:37:33.130818 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 01:37:33.130843 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 01:37:33.130845 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 01:37:33.130864 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 01:37:33.130875 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 01:37:33.130879 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 01:37:33.130885 [INFO] Executing instruction: stop X-Ray
2024/01/30 01:37:33.130889 [INFO] stop X-Ray ...
2024/01/30 01:37:33.130901 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 01:37:33.147781 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 01:37:33.147814 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 01:37:33.167161 [INFO] Executing instruction: Run Docker Container
2024/01/30 01:37:33.167192 [INFO] stop currently running containers...
2024/01/30 01:37:33.167203 [INFO] detected old app is not docker compose app
2024/01/30 01:37:33.167238 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 01:37:33.212347 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 01:37:33.231930 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 01:37:33.231962 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 01:37:33.246059 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 01:37:33.246092 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 01:37:33.260919 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 01:37:33.260968 [INFO] stopping current container: 9396a0281c54
2024/01/30 01:37:33.260981 [INFO] Running command /bin/sh -c docker ps | grep -q 9396a0281c54
2024/01/30 01:37:33.280667 [INFO] Running command /bin/sh -c docker ps | grep -q 9396a0281c54
2024/01/30 01:37:33.300882 [INFO] Pruning containers ...
2024/01/30 01:37:33.300906 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 01:37:33.360380 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 01:37:33.360416 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 01:37:33.389690 [INFO] Total reclaimed space: 0B

2024/01/30 01:37:33.389715 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 01:37:33.429786 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 01:37:33.429820 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 01:37:33.451644 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 01:37:33.451664 [INFO] Removing /var/app/current/ if it exists
2024/01/30 01:37:33.451822 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 01:37:33.451839 [INFO] detected new app is not docker compose app
2024/01/30 01:37:33.451885 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 01:37:33.873551 [INFO] 61c2d0f82147605344dde2caa77f93215255985a99586b64d4fae2ff2c80889d

2024/01/30 01:37:38.874461 [INFO] Running command /bin/sh -c docker ps | grep -q 61c2d0f82147
2024/01/30 01:37:38.903087 [ERROR] docker container quit unexpectedly on 2024-01-30 01:37:38.903076506 +0000 UTC: Command /bin/sh -c docker ps | grep -q 61c2d0f82147 failed with error exit status 1
2024/01/30 01:37:38.903112 [INFO] Running command /bin/sh -c docker logs 61c2d0f82147
2024/01/30 01:37:38.923276 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 61c2d0f82147: Command /bin/sh -c docker ps | grep -q 61c2d0f82147 failed with error exit status 1 

2024/01/30 01:37:38.923311 [INFO] Executing cleanup logic
2024/01/30 01:37:38.923530 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 02:37:39.925647 [INFO] Starting...
2024/01/30 02:37:39.925689 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 02:37:39.925715 [INFO] reading event message file
2024/01/30 02:37:39.926422 [INFO] Engine received EB command userdata-exec

2024/01/30 02:37:39.936907 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 02:37:40.358138 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 02:37:40.843851 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 02:37:40.843952 [INFO] Engine command: (self-startup)

2024/01/30 02:37:40.843961 [INFO] Downloading EB Application...
2024/01/30 02:37:40.843964 [INFO] Region: eu-west-1
2024/01/30 02:37:40.843967 [INFO] envID: e-8gmkc7rmw6
2024/01/30 02:37:40.843970 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 02:37:40.845868 [INFO] Using manifest file name from command request
2024/01/30 02:37:40.845886 [INFO] Unable to get version manifest file.
2024/01/30 02:37:40.845889 [INFO] Downloading latest manifest available.
2024/01/30 02:37:40.845891 [INFO] Download latest app version manifest
2024/01/30 02:37:40.846308 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 02:37:40.888115 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 02:37:40.888296 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 02:37:40.903625 [INFO] Download successful124bytes downloaded
2024/01/30 02:37:40.903763 [INFO] Trying to read and parse version manifest...
2024/01/30 02:37:40.903840 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 02:37:40.927627 [INFO] Download successful264bytes downloaded
2024/01/30 02:37:40.928014 [INFO] Executing instruction: SyncClock
2024/01/30 02:37:40.928019 [INFO] Starting SyncClock
2024/01/30 02:37:40.928032 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 02:37:40.934673 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 02:37:24 2024
System time     : 0.000001229 seconds fast of NTP time
Last offset     : +0.000004480 seconds
RMS offset      : 0.000007003 seconds
Frequency       : 0.854 ppm fast
Residual freq   : +0.004 ppm
Skew            : 0.156 ppm
Root delay      : 0.000424580 seconds
Root dispersion : 0.000470066 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 02:37:40.934706 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 02:37:40.939200 [INFO] 200 OK

2024/01/30 02:37:40.939285 [INFO] Skipping Configure OS
2024/01/30 02:37:40.939311 [INFO] Skipping LockRepo
2024/01/30 02:37:40.939316 [INFO] Skipping GenerateEBBanner
2024/01/30 02:37:40.939322 [INFO] Skipping Install Process Manager
2024/01/30 02:37:40.939326 [INFO] Skipping install syslog
2024/01/30 02:37:40.939330 [INFO] Skipping install cron
2024/01/30 02:37:40.939333 [INFO] Skipping install proxy
2024/01/30 02:37:40.939337 [INFO] Skipping installhealthd
2024/01/30 02:37:40.939341 [INFO] Skipping Install Log Streaming Manager
2024/01/30 02:37:40.939345 [INFO] Skipping install X-Ray
2024/01/30 02:37:40.939349 [INFO] Skipping install Third Party License
2024/01/30 02:37:40.939354 [INFO] Skipping installSqsd
2024/01/30 02:37:40.939358 [INFO] Skipping bootstraphealthd
2024/01/30 02:37:40.939361 [INFO] Skipping Install yum packages
2024/01/30 02:37:40.939365 [INFO] Skipping install docker-compose
2024/01/30 02:37:40.939369 [INFO] Skipping Configure Docker Daemon
2024/01/30 02:37:40.939373 [INFO] Skipping MarkBaked
2024/01/30 02:37:40.939377 [INFO] Skipping TuneSystemSettings
2024/01/30 02:37:40.939380 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 02:37:40.939382 [INFO] Initialize LogRotate files and directories
2024/01/30 02:37:40.953443 [INFO] Skipping BootstrapCFNHup
2024/01/30 02:37:40.953456 [INFO] Executing instruction: StartCFNHup
2024/01/30 02:37:40.953459 [INFO] Start cfn-hup
2024/01/30 02:37:40.953476 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 02:37:40.969130 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 02:37:40.978994 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 02:37:40.979027 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 02:37:40.979031 [INFO] Executing instruction: Start Docker
2024/01/30 02:37:40.979034 [INFO] Starting Docker...
2024/01/30 02:37:40.979115 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 02:37:40.980229 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 02:37:40.981345 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 02:37:41.412875 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 02:37:41.436444 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 02:37:41.436473 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 02:37:41.457228 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 02:37:41.473862 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 02:37:41.484935 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 02:37:41.533155 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 02:37:41.533256 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 02:37:41.876680 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 02:37:42.196201 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 02:37:42.249056 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 02:37:42.538350 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 02:37:42.570594 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 02:37:42.593213 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 02:37:42.608150 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 02:37:43.740544 [INFO] Skipping Setup Docker Options
2024/01/30 02:37:43.740571 [INFO] Skipping MarkBootstrapped
2024/01/30 02:37:43.740575 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 02:37:43.740687 [INFO] Starting SwitchCFNStack
2024/01/30 02:37:43.740693 [INFO] Executing instruction: stopSqsd
2024/01/30 02:37:43.740697 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 02:37:43.740700 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 02:37:43.740703 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 02:37:43.740727 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 02:37:44.144435 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 02:37:44.144470 [INFO] Executing instruction: StagedockerApplication
2024/01/30 02:37:44.144483 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 02:37:44.166626 [INFO] Pruning containers ...
2024/01/30 02:37:44.166661 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 02:37:44.187752 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
61c2d0f82147   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             nostalgic_benz

2024/01/30 02:37:44.187811 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 02:37:44.215529 [INFO] Deleted Containers:
61c2d0f82147605344dde2caa77f93215255985a99586b64d4fae2ff2c80889d

Total reclaimed space: 0B

2024/01/30 02:37:44.215552 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 02:37:44.243771 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 02:37:44.244135 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 02:37:44.247288 [INFO] application/json

2024/01/30 02:37:44.247348 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 02:37:44.343635 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 02:37:44.343811 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 02:37:44.345073 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 02:37:44.345100 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 02:37:44.345114 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 02:37:44.345116 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 02:37:44.345121 [INFO] Executing instruction: Generate environment file
2024/01/30 02:37:44.345146 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 02:37:44.345149 [INFO] start build docker app
2024/01/30 02:37:44.345560 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 02:37:44.345563 [INFO] fetching image and ports
2024/01/30 02:37:44.347531 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 02:37:44.347600 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 02:37:44.347609 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 02:37:44.347624 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 02:37:45.296835 [INFO] Login Succeeded

2024/01/30 02:37:45.296855 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 02:37:45.296883 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 02:37:45.296906 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 02:37:45.445667 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 02:37:45.445690 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 02:37:45.445694 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 02:37:45.445698 [INFO] start to build docker image
2024/01/30 02:37:45.445717 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 02:37:45.702883 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 02:37:45.702904 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 02:37:45.702907 [INFO] successfully build docker image
2024/01/30 02:37:45.702909 [INFO] save staging docker image id
2024/01/30 02:37:45.702921 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 02:37:45.728953 [INFO] c176d18fbf65

2024/01/30 02:37:45.729266 [INFO] Executing instruction: configure X-Ray
2024/01/30 02:37:45.729273 [INFO] X-Ray is not enabled.
2024/01/30 02:37:45.729276 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 02:37:45.734618 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 02:37:45.736189 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 02:37:45.749254 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 02:37:45.749281 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 02:37:45.760606 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 02:37:45.770277 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 02:37:45.780657 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 02:37:45.901642 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 02:37:46.272562 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 02:37:46.272647 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 02:37:46.592023 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 02:37:46.612092 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 02:37:46.929088 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 02:37:46.939726 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 02:37:46.949042 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 02:37:47.275875 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 02:37:47.295645 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 02:37:47.625042 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 02:37:47.625077 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 02:37:47.658920 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 02:37:47.674533 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 02:37:47.791965 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 02:37:47.792943 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 02:37:47.793885 [INFO] Executing instruction: configure log streaming
2024/01/30 02:37:47.794017 [INFO] log streaming is not enabled
2024/01/30 02:37:47.794023 [INFO] disable log stream
2024/01/30 02:37:47.794045 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 02:37:47.818765 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 02:37:47.837926 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 02:37:47.837950 [INFO] Checking if logs need forced rotation
2024/01/30 02:37:47.837971 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 02:37:48.341844 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 02:37:48.893593 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 02:37:48.895779 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 02:37:49.380078 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 02:37:49.399852 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 02:37:49.399868 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 02:37:49.399880 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 02:37:49.859598 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 02:37:49.859625 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 02:37:49.859650 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 02:37:49.859653 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 02:37:49.859677 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 02:37:49.859690 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 02:37:49.859693 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 02:37:49.859699 [INFO] Executing instruction: stop X-Ray
2024/01/30 02:37:49.859702 [INFO] stop X-Ray ...
2024/01/30 02:37:49.859714 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 02:37:49.876468 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 02:37:49.876494 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 02:37:49.893918 [INFO] Executing instruction: Run Docker Container
2024/01/30 02:37:49.893947 [INFO] stop currently running containers...
2024/01/30 02:37:49.893956 [INFO] detected old app is not docker compose app
2024/01/30 02:37:49.893967 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 02:37:49.942716 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 02:37:49.958238 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 02:37:49.958271 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 02:37:49.972126 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 02:37:49.972159 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 02:37:49.988222 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 02:37:49.988270 [INFO] stopping current container: 61c2d0f82147
2024/01/30 02:37:49.988283 [INFO] Running command /bin/sh -c docker ps | grep -q 61c2d0f82147
2024/01/30 02:37:50.009348 [INFO] Running command /bin/sh -c docker ps | grep -q 61c2d0f82147
2024/01/30 02:37:50.037059 [INFO] Pruning containers ...
2024/01/30 02:37:50.037081 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 02:37:50.056646 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 02:37:50.056683 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 02:37:50.077312 [INFO] Total reclaimed space: 0B

2024/01/30 02:37:50.077341 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 02:37:50.096573 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 02:37:50.096602 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 02:37:50.117872 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 02:37:50.117892 [INFO] Removing /var/app/current/ if it exists
2024/01/30 02:37:50.118044 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 02:37:50.118062 [INFO] detected new app is not docker compose app
2024/01/30 02:37:50.118109 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 02:37:50.551939 [INFO] 376c88b71b16cd40934b521ec14863ac3420c8ab09870ed0cc08308214d31f37

2024/01/30 02:37:55.552562 [INFO] Running command /bin/sh -c docker ps | grep -q 376c88b71b16
2024/01/30 02:37:55.605489 [ERROR] docker container quit unexpectedly on 2024-01-30 02:37:55.605478393 +0000 UTC: Command /bin/sh -c docker ps | grep -q 376c88b71b16 failed with error exit status 1
2024/01/30 02:37:55.605532 [INFO] Running command /bin/sh -c docker logs 376c88b71b16
2024/01/30 02:37:55.650423 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 376c88b71b16: Command /bin/sh -c docker ps | grep -q 376c88b71b16 failed with error exit status 1 

2024/01/30 02:37:55.650432 [INFO] Executing cleanup logic
2024/01/30 02:37:55.650650 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 03:37:56.697296 [INFO] Starting...
2024/01/30 03:37:56.697439 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 03:37:56.697468 [INFO] reading event message file
2024/01/30 03:37:56.699690 [INFO] Engine received EB command userdata-exec

2024/01/30 03:37:56.712656 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 03:37:57.116681 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 03:37:57.593146 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 03:37:57.593290 [INFO] Engine command: (self-startup)

2024/01/30 03:37:57.593300 [INFO] Downloading EB Application...
2024/01/30 03:37:57.593303 [INFO] Region: eu-west-1
2024/01/30 03:37:57.593306 [INFO] envID: e-8gmkc7rmw6
2024/01/30 03:37:57.593310 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 03:37:57.593313 [INFO] Using manifest file name from command request
2024/01/30 03:37:57.593331 [INFO] Unable to get version manifest file.
2024/01/30 03:37:57.593334 [INFO] Downloading latest manifest available.
2024/01/30 03:37:57.593337 [INFO] Download latest app version manifest
2024/01/30 03:37:57.593459 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 03:37:57.634056 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 03:37:57.634261 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 03:37:57.643846 [INFO] Download successful124bytes downloaded
2024/01/30 03:37:57.643973 [INFO] Trying to read and parse version manifest...
2024/01/30 03:37:57.644047 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 03:37:57.671695 [INFO] Download successful264bytes downloaded
2024/01/30 03:37:57.672050 [INFO] Executing instruction: SyncClock
2024/01/30 03:37:57.672057 [INFO] Starting SyncClock
2024/01/30 03:37:57.672070 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 03:37:57.677836 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 03:37:34 2024
System time     : 0.000000666 seconds slow of NTP time
Last offset     : -0.000001094 seconds
RMS offset      : 0.000001596 seconds
Frequency       : 0.633 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.025 ppm
Root delay      : 0.000427906 seconds
Root dispersion : 0.000490487 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 03:37:57.677855 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 03:37:57.681870 [INFO] 200 OK

2024/01/30 03:37:57.681962 [INFO] Skipping Configure OS
2024/01/30 03:37:57.681967 [INFO] Skipping LockRepo
2024/01/30 03:37:57.681971 [INFO] Skipping GenerateEBBanner
2024/01/30 03:37:57.681975 [INFO] Skipping Install Process Manager
2024/01/30 03:37:57.681979 [INFO] Skipping install syslog
2024/01/30 03:37:57.681983 [INFO] Skipping install cron
2024/01/30 03:37:57.681987 [INFO] Skipping install proxy
2024/01/30 03:37:57.681991 [INFO] Skipping installhealthd
2024/01/30 03:37:57.681994 [INFO] Skipping Install Log Streaming Manager
2024/01/30 03:37:57.681998 [INFO] Skipping install X-Ray
2024/01/30 03:37:57.682002 [INFO] Skipping install Third Party License
2024/01/30 03:37:57.682007 [INFO] Skipping installSqsd
2024/01/30 03:37:57.682010 [INFO] Skipping bootstraphealthd
2024/01/30 03:37:57.682014 [INFO] Skipping Install yum packages
2024/01/30 03:37:57.682018 [INFO] Skipping install docker-compose
2024/01/30 03:37:57.682021 [INFO] Skipping Configure Docker Daemon
2024/01/30 03:37:57.682025 [INFO] Skipping MarkBaked
2024/01/30 03:37:57.682031 [INFO] Skipping TuneSystemSettings
2024/01/30 03:37:57.682033 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 03:37:57.682035 [INFO] Initialize LogRotate files and directories
2024/01/30 03:37:57.695956 [INFO] Skipping BootstrapCFNHup
2024/01/30 03:37:57.695966 [INFO] Executing instruction: StartCFNHup
2024/01/30 03:37:57.695970 [INFO] Start cfn-hup
2024/01/30 03:37:57.695987 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 03:37:57.711730 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 03:37:57.723210 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 03:37:57.723274 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 03:37:57.723278 [INFO] Executing instruction: Start Docker
2024/01/30 03:37:57.723281 [INFO] Starting Docker...
2024/01/30 03:37:57.723363 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 03:37:57.724491 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 03:37:57.725794 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 03:37:58.179790 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 03:37:58.194662 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 03:37:58.194694 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 03:37:58.206302 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 03:37:58.215583 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 03:37:58.226447 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 03:37:58.263729 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 03:37:58.263788 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 03:37:58.673237 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 03:37:58.967494 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 03:37:58.979337 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 03:37:59.297682 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 03:37:59.306667 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 03:37:59.321314 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 03:37:59.331542 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 03:38:00.590374 [INFO] Skipping Setup Docker Options
2024/01/30 03:38:00.590395 [INFO] Skipping MarkBootstrapped
2024/01/30 03:38:00.590399 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 03:38:00.590507 [INFO] Starting SwitchCFNStack
2024/01/30 03:38:00.590513 [INFO] Executing instruction: stopSqsd
2024/01/30 03:38:00.590516 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 03:38:00.590519 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 03:38:00.590523 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 03:38:00.590541 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 03:38:01.184868 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 03:38:01.184906 [INFO] Executing instruction: StagedockerApplication
2024/01/30 03:38:01.184921 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 03:38:01.206632 [INFO] Pruning containers ...
2024/01/30 03:38:01.206668 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 03:38:01.229420 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
376c88b71b16   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             infallible_shannon

2024/01/30 03:38:01.229452 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 03:38:01.264690 [INFO] Deleted Containers:
376c88b71b16cd40934b521ec14863ac3420c8ab09870ed0cc08308214d31f37

Total reclaimed space: 0B

2024/01/30 03:38:01.264729 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 03:38:01.316796 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 03:38:01.317192 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 03:38:01.337768 [INFO] application/json

2024/01/30 03:38:01.337796 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 03:38:01.521009 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 03:38:01.521298 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 03:38:01.523313 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 03:38:01.523356 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 03:38:01.523375 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 03:38:01.523378 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 03:38:01.523382 [INFO] Executing instruction: Generate environment file
2024/01/30 03:38:01.523423 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 03:38:01.523427 [INFO] start build docker app
2024/01/30 03:38:01.524007 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 03:38:01.524015 [INFO] fetching image and ports
2024/01/30 03:38:01.525855 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 03:38:01.525934 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 03:38:01.525947 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 03:38:01.525958 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 03:38:02.817732 [INFO] Login Succeeded

2024/01/30 03:38:02.817751 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 03:38:02.817758 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 03:38:02.817820 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 03:38:02.967601 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 03:38:02.967627 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 03:38:02.967630 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 03:38:02.967634 [INFO] start to build docker image
2024/01/30 03:38:02.967649 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 03:38:03.279650 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 03:38:03.279683 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 03:38:03.279688 [INFO] successfully build docker image
2024/01/30 03:38:03.279690 [INFO] save staging docker image id
2024/01/30 03:38:03.279706 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 03:38:03.300776 [INFO] c176d18fbf65

2024/01/30 03:38:03.300902 [INFO] Executing instruction: configure X-Ray
2024/01/30 03:38:03.300908 [INFO] X-Ray is not enabled.
2024/01/30 03:38:03.300912 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 03:38:03.306726 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 03:38:03.308524 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 03:38:03.322899 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 03:38:03.322938 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 03:38:03.334079 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 03:38:03.343448 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 03:38:03.356121 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 03:38:03.421336 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 03:38:03.848119 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 03:38:03.848207 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 03:38:04.182799 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 03:38:04.197366 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 03:38:04.554730 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 03:38:04.564620 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 03:38:04.574663 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 03:38:04.949922 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 03:38:04.960278 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 03:38:05.272873 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 03:38:05.272912 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 03:38:05.306535 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 03:38:05.316326 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 03:38:05.428218 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 03:38:05.429177 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 03:38:05.430199 [INFO] Executing instruction: configure log streaming
2024/01/30 03:38:05.430209 [INFO] log streaming is not enabled
2024/01/30 03:38:05.430213 [INFO] disable log stream
2024/01/30 03:38:05.430233 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 03:38:05.454127 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 03:38:05.479857 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 03:38:05.479882 [INFO] Checking if logs need forced rotation
2024/01/30 03:38:05.479906 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 03:38:06.051160 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 03:38:06.579719 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 03:38:06.581437 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 03:38:07.137199 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 03:38:07.152915 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 03:38:07.152931 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 03:38:07.152950 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 03:38:07.580810 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 03:38:07.580832 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 03:38:07.580861 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 03:38:07.580865 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 03:38:07.580887 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 03:38:07.580902 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 03:38:07.580905 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 03:38:07.580909 [INFO] Executing instruction: stop X-Ray
2024/01/30 03:38:07.580912 [INFO] stop X-Ray ...
2024/01/30 03:38:07.580924 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 03:38:07.597219 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 03:38:07.597257 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 03:38:07.613338 [INFO] Executing instruction: Run Docker Container
2024/01/30 03:38:07.613380 [INFO] stop currently running containers...
2024/01/30 03:38:07.613390 [INFO] detected old app is not docker compose app
2024/01/30 03:38:07.613402 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 03:38:07.693072 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 03:38:07.728150 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 03:38:07.728185 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 03:38:07.762889 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 03:38:07.762932 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 03:38:07.809229 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 03:38:07.809289 [INFO] stopping current container: 376c88b71b16
2024/01/30 03:38:07.809302 [INFO] Running command /bin/sh -c docker ps | grep -q 376c88b71b16
2024/01/30 03:38:07.843969 [INFO] Running command /bin/sh -c docker ps | grep -q 376c88b71b16
2024/01/30 03:38:07.880324 [INFO] Pruning containers ...
2024/01/30 03:38:07.880348 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 03:38:07.915447 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 03:38:07.915478 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 03:38:07.941328 [INFO] Total reclaimed space: 0B

2024/01/30 03:38:07.941381 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 03:38:07.961922 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 03:38:07.961953 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 03:38:07.981460 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 03:38:07.981485 [INFO] Removing /var/app/current/ if it exists
2024/01/30 03:38:07.981648 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 03:38:07.981665 [INFO] detected new app is not docker compose app
2024/01/30 03:38:07.981720 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 03:38:08.405116 [INFO] f7ea391cba8e63aefbf36ec23a2a2741f0d69b9d150c1941f261372039608517

2024/01/30 03:38:13.406179 [INFO] Running command /bin/sh -c docker ps | grep -q f7ea391cba8e
2024/01/30 03:38:13.445467 [ERROR] docker container quit unexpectedly on 2024-01-30 03:38:13.445448221 +0000 UTC: Command /bin/sh -c docker ps | grep -q f7ea391cba8e failed with error exit status 1
2024/01/30 03:38:13.445499 [INFO] Running command /bin/sh -c docker logs f7ea391cba8e
2024/01/30 03:38:13.501335 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f7ea391cba8e: Command /bin/sh -c docker ps | grep -q f7ea391cba8e failed with error exit status 1 

2024/01/30 03:38:13.501365 [INFO] Executing cleanup logic
2024/01/30 03:38:13.501689 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 04:38:14.638997 [INFO] Starting...
2024/01/30 04:38:14.639036 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 04:38:14.639061 [INFO] reading event message file
2024/01/30 04:38:14.639769 [INFO] Engine received EB command userdata-exec

2024/01/30 04:38:14.647080 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 04:38:15.130716 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 04:38:15.556885 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 04:38:15.556996 [INFO] Engine command: (self-startup)

2024/01/30 04:38:15.557005 [INFO] Downloading EB Application...
2024/01/30 04:38:15.557009 [INFO] Region: eu-west-1
2024/01/30 04:38:15.557012 [INFO] envID: e-8gmkc7rmw6
2024/01/30 04:38:15.557018 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 04:38:15.557021 [INFO] Using manifest file name from command request
2024/01/30 04:38:15.557039 [INFO] Unable to get version manifest file.
2024/01/30 04:38:15.557042 [INFO] Downloading latest manifest available.
2024/01/30 04:38:15.557052 [INFO] Download latest app version manifest
2024/01/30 04:38:15.557231 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 04:38:15.600266 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 04:38:15.600444 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 04:38:15.612760 [INFO] Download successful124bytes downloaded
2024/01/30 04:38:15.612906 [INFO] Trying to read and parse version manifest...
2024/01/30 04:38:15.612981 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 04:38:15.639675 [INFO] Download successful264bytes downloaded
2024/01/30 04:38:15.640020 [INFO] Executing instruction: SyncClock
2024/01/30 04:38:15.640027 [INFO] Starting SyncClock
2024/01/30 04:38:15.640038 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 04:38:15.645399 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 04:37:43 2024
System time     : 0.000000116 seconds fast of NTP time
Last offset     : +0.000003397 seconds
RMS offset      : 0.000003854 seconds
Frequency       : 0.970 ppm fast
Residual freq   : +0.004 ppm
Skew            : 0.149 ppm
Root delay      : 0.000461185 seconds
Root dispersion : 0.000346470 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 04:38:15.645434 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 04:38:15.649467 [INFO] 200 OK

2024/01/30 04:38:15.649570 [INFO] Skipping Configure OS
2024/01/30 04:38:15.649575 [INFO] Skipping LockRepo
2024/01/30 04:38:15.649579 [INFO] Skipping GenerateEBBanner
2024/01/30 04:38:15.649584 [INFO] Skipping Install Process Manager
2024/01/30 04:38:15.649588 [INFO] Skipping install syslog
2024/01/30 04:38:15.649592 [INFO] Skipping install cron
2024/01/30 04:38:15.649595 [INFO] Skipping install proxy
2024/01/30 04:38:15.649599 [INFO] Skipping installhealthd
2024/01/30 04:38:15.649603 [INFO] Skipping Install Log Streaming Manager
2024/01/30 04:38:15.649607 [INFO] Skipping install X-Ray
2024/01/30 04:38:15.649610 [INFO] Skipping install Third Party License
2024/01/30 04:38:15.649615 [INFO] Skipping installSqsd
2024/01/30 04:38:15.649619 [INFO] Skipping bootstraphealthd
2024/01/30 04:38:15.649623 [INFO] Skipping Install yum packages
2024/01/30 04:38:15.649627 [INFO] Skipping install docker-compose
2024/01/30 04:38:15.649630 [INFO] Skipping Configure Docker Daemon
2024/01/30 04:38:15.649634 [INFO] Skipping MarkBaked
2024/01/30 04:38:15.649638 [INFO] Skipping TuneSystemSettings
2024/01/30 04:38:15.649640 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 04:38:15.649642 [INFO] Initialize LogRotate files and directories
2024/01/30 04:38:15.673795 [INFO] Skipping BootstrapCFNHup
2024/01/30 04:38:15.673806 [INFO] Executing instruction: StartCFNHup
2024/01/30 04:38:15.673809 [INFO] Start cfn-hup
2024/01/30 04:38:15.673829 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 04:38:15.686639 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 04:38:15.694623 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 04:38:15.694664 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 04:38:15.694668 [INFO] Executing instruction: Start Docker
2024/01/30 04:38:15.694671 [INFO] Starting Docker...
2024/01/30 04:38:15.694756 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 04:38:15.695711 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 04:38:15.696553 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 04:38:16.179921 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 04:38:16.195085 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 04:38:16.195120 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 04:38:16.204858 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 04:38:16.212942 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 04:38:16.224365 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 04:38:16.263069 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 04:38:16.263118 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 04:38:16.612948 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 04:38:16.884281 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 04:38:16.908028 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 04:38:17.231489 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 04:38:17.241439 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 04:38:17.255255 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 04:38:17.265987 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 04:38:18.521676 [INFO] Skipping Setup Docker Options
2024/01/30 04:38:18.521707 [INFO] Skipping MarkBootstrapped
2024/01/30 04:38:18.521712 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 04:38:18.521833 [INFO] Starting SwitchCFNStack
2024/01/30 04:38:18.521838 [INFO] Executing instruction: stopSqsd
2024/01/30 04:38:18.521842 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 04:38:18.521846 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 04:38:18.521849 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 04:38:18.521874 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 04:38:19.056710 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 04:38:19.056858 [INFO] Executing instruction: StagedockerApplication
2024/01/30 04:38:19.056877 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 04:38:19.086817 [INFO] Pruning containers ...
2024/01/30 04:38:19.086853 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 04:38:19.109769 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f7ea391cba8e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             recursing_gates

2024/01/30 04:38:19.109803 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 04:38:19.155529 [INFO] Deleted Containers:
f7ea391cba8e63aefbf36ec23a2a2741f0d69b9d150c1941f261372039608517

Total reclaimed space: 0B

2024/01/30 04:38:19.155561 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 04:38:19.179410 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 04:38:19.179709 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 04:38:19.184589 [INFO] application/json

2024/01/30 04:38:19.184621 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 04:38:19.283647 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 04:38:19.283853 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 04:38:19.285194 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 04:38:19.285218 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 04:38:19.285233 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 04:38:19.285236 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 04:38:19.285240 [INFO] Executing instruction: Generate environment file
2024/01/30 04:38:19.285265 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 04:38:19.285268 [INFO] start build docker app
2024/01/30 04:38:19.285646 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 04:38:19.285649 [INFO] fetching image and ports
2024/01/30 04:38:19.287711 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 04:38:19.287809 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 04:38:19.287820 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 04:38:19.287835 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 04:38:20.272577 [INFO] Login Succeeded

2024/01/30 04:38:20.272596 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 04:38:20.272601 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 04:38:20.272616 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 04:38:20.413793 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 04:38:20.413815 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 04:38:20.413820 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 04:38:20.413824 [INFO] start to build docker image
2024/01/30 04:38:20.413846 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 04:38:20.688923 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 04:38:20.688948 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 04:38:20.688952 [INFO] successfully build docker image
2024/01/30 04:38:20.688955 [INFO] save staging docker image id
2024/01/30 04:38:20.689040 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 04:38:20.710300 [INFO] c176d18fbf65

2024/01/30 04:38:20.710419 [INFO] Executing instruction: configure X-Ray
2024/01/30 04:38:20.710426 [INFO] X-Ray is not enabled.
2024/01/30 04:38:20.710430 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 04:38:20.716877 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 04:38:20.718669 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 04:38:20.731795 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 04:38:20.731830 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 04:38:20.743012 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 04:38:20.751691 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 04:38:20.762631 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 04:38:20.840180 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 04:38:21.175248 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 04:38:21.175338 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 04:38:21.496545 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 04:38:21.509327 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 04:38:21.929922 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 04:38:21.942182 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 04:38:21.955343 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 04:38:22.233475 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 04:38:22.243145 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 04:38:22.562456 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 04:38:22.562491 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 04:38:22.575461 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 04:38:22.583996 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 04:38:22.708234 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 04:38:22.709280 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 04:38:22.710303 [INFO] Executing instruction: configure log streaming
2024/01/30 04:38:22.710313 [INFO] log streaming is not enabled
2024/01/30 04:38:22.710317 [INFO] disable log stream
2024/01/30 04:38:22.710334 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 04:38:22.729877 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 04:38:22.747104 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 04:38:22.747127 [INFO] Checking if logs need forced rotation
2024/01/30 04:38:22.747148 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 04:38:23.362644 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 04:38:23.880912 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 04:38:23.882651 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 04:38:24.429200 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 04:38:24.451623 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 04:38:24.451644 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 04:38:24.451659 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 04:38:24.926275 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 04:38:24.926299 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 04:38:24.926323 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 04:38:24.926326 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 04:38:24.926348 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 04:38:24.926360 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 04:38:24.926362 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 04:38:24.926367 [INFO] Executing instruction: stop X-Ray
2024/01/30 04:38:24.926370 [INFO] stop X-Ray ...
2024/01/30 04:38:24.926381 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 04:38:24.944560 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 04:38:24.945168 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 04:38:24.964411 [INFO] Executing instruction: Run Docker Container
2024/01/30 04:38:24.964441 [INFO] stop currently running containers...
2024/01/30 04:38:24.964450 [INFO] detected old app is not docker compose app
2024/01/30 04:38:24.964464 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 04:38:25.004484 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 04:38:25.025926 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 04:38:25.025964 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 04:38:25.040724 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 04:38:25.040754 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 04:38:25.055537 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 04:38:25.055587 [INFO] stopping current container: f7ea391cba8e
2024/01/30 04:38:25.055600 [INFO] Running command /bin/sh -c docker ps | grep -q f7ea391cba8e
2024/01/30 04:38:25.088974 [INFO] Running command /bin/sh -c docker ps | grep -q f7ea391cba8e
2024/01/30 04:38:25.117749 [INFO] Pruning containers ...
2024/01/30 04:38:25.117774 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 04:38:25.140418 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 04:38:25.140447 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 04:38:25.164300 [INFO] Total reclaimed space: 0B

2024/01/30 04:38:25.164329 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 04:38:25.186479 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 04:38:25.186516 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 04:38:25.208261 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 04:38:25.208281 [INFO] Removing /var/app/current/ if it exists
2024/01/30 04:38:25.208454 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 04:38:25.208475 [INFO] detected new app is not docker compose app
2024/01/30 04:38:25.208527 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 04:38:25.666906 [INFO] 64903772f795d53385571784a8f78bd9e08b20c05aff4182cb1c28639b11baff

2024/01/30 04:38:30.671312 [INFO] Running command /bin/sh -c docker ps | grep -q 64903772f795
2024/01/30 04:38:30.699858 [ERROR] docker container quit unexpectedly on 2024-01-30 04:38:30.699841804 +0000 UTC: Command /bin/sh -c docker ps | grep -q 64903772f795 failed with error exit status 1
2024/01/30 04:38:30.699929 [INFO] Running command /bin/sh -c docker logs 64903772f795
2024/01/30 04:38:30.752933 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 64903772f795: Command /bin/sh -c docker ps | grep -q 64903772f795 failed with error exit status 1 

2024/01/30 04:38:30.752947 [INFO] Executing cleanup logic
2024/01/30 04:38:30.753876 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 05:38:31.809529 [INFO] Starting...
2024/01/30 05:38:31.809572 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 05:38:31.809595 [INFO] reading event message file
2024/01/30 05:38:31.810346 [INFO] Engine received EB command userdata-exec

2024/01/30 05:38:31.817532 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 05:38:32.248920 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 05:38:32.728640 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 05:38:32.728737 [INFO] Engine command: (self-startup)

2024/01/30 05:38:32.728746 [INFO] Downloading EB Application...
2024/01/30 05:38:32.728749 [INFO] Region: eu-west-1
2024/01/30 05:38:32.728752 [INFO] envID: e-8gmkc7rmw6
2024/01/30 05:38:32.728756 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 05:38:32.728759 [INFO] Using manifest file name from command request
2024/01/30 05:38:32.728775 [INFO] Unable to get version manifest file.
2024/01/30 05:38:32.728778 [INFO] Downloading latest manifest available.
2024/01/30 05:38:32.728780 [INFO] Download latest app version manifest
2024/01/30 05:38:32.728906 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 05:38:32.767347 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 05:38:32.767525 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 05:38:32.779528 [INFO] Download successful124bytes downloaded
2024/01/30 05:38:32.779645 [INFO] Trying to read and parse version manifest...
2024/01/30 05:38:32.779711 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 05:38:32.804223 [INFO] Download successful264bytes downloaded
2024/01/30 05:38:32.804545 [INFO] Executing instruction: SyncClock
2024/01/30 05:38:32.804550 [INFO] Starting SyncClock
2024/01/30 05:38:32.804559 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 05:38:32.810508 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 05:38:24 2024
System time     : 0.000002098 seconds fast of NTP time
Last offset     : +0.000001258 seconds
RMS offset      : 0.000004819 seconds
Frequency       : 0.652 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.064 ppm
Root delay      : 0.000436615 seconds
Root dispersion : 0.000337387 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/30 05:38:32.810526 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 05:38:32.815250 [INFO] 200 OK

2024/01/30 05:38:32.815348 [INFO] Skipping Configure OS
2024/01/30 05:38:32.815354 [INFO] Skipping LockRepo
2024/01/30 05:38:32.815358 [INFO] Skipping GenerateEBBanner
2024/01/30 05:38:32.815362 [INFO] Skipping Install Process Manager
2024/01/30 05:38:32.815366 [INFO] Skipping install syslog
2024/01/30 05:38:32.815370 [INFO] Skipping install cron
2024/01/30 05:38:32.815374 [INFO] Skipping install proxy
2024/01/30 05:38:32.815377 [INFO] Skipping installhealthd
2024/01/30 05:38:32.815381 [INFO] Skipping Install Log Streaming Manager
2024/01/30 05:38:32.815385 [INFO] Skipping install X-Ray
2024/01/30 05:38:32.815389 [INFO] Skipping install Third Party License
2024/01/30 05:38:32.815394 [INFO] Skipping installSqsd
2024/01/30 05:38:32.815398 [INFO] Skipping bootstraphealthd
2024/01/30 05:38:32.815401 [INFO] Skipping Install yum packages
2024/01/30 05:38:32.815406 [INFO] Skipping install docker-compose
2024/01/30 05:38:32.815411 [INFO] Skipping Configure Docker Daemon
2024/01/30 05:38:32.815417 [INFO] Skipping MarkBaked
2024/01/30 05:38:32.815425 [INFO] Skipping TuneSystemSettings
2024/01/30 05:38:32.815428 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 05:38:32.815430 [INFO] Initialize LogRotate files and directories
2024/01/30 05:38:32.832692 [INFO] Skipping BootstrapCFNHup
2024/01/30 05:38:32.832704 [INFO] Executing instruction: StartCFNHup
2024/01/30 05:38:32.832707 [INFO] Start cfn-hup
2024/01/30 05:38:32.832725 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 05:38:32.849711 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 05:38:32.862934 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 05:38:32.862970 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 05:38:32.863047 [INFO] Executing instruction: Start Docker
2024/01/30 05:38:32.863051 [INFO] Starting Docker...
2024/01/30 05:38:32.863135 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 05:38:32.864424 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 05:38:32.865618 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 05:38:33.141841 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 05:38:33.160903 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 05:38:33.160938 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 05:38:33.172393 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 05:38:33.182154 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 05:38:33.192322 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 05:38:33.273764 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 05:38:33.273823 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 05:38:33.572669 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 05:38:33.906958 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 05:38:33.918613 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 05:38:34.195881 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 05:38:34.204939 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 05:38:34.219528 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 05:38:34.231588 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 05:38:35.371970 [INFO] Skipping Setup Docker Options
2024/01/30 05:38:35.372198 [INFO] Skipping MarkBootstrapped
2024/01/30 05:38:35.372205 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 05:38:35.372357 [INFO] Starting SwitchCFNStack
2024/01/30 05:38:35.372364 [INFO] Executing instruction: stopSqsd
2024/01/30 05:38:35.372368 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 05:38:35.372378 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 05:38:35.372381 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 05:38:35.372397 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 05:38:35.895862 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 05:38:35.895951 [INFO] Executing instruction: StagedockerApplication
2024/01/30 05:38:35.895968 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 05:38:35.916797 [INFO] Pruning containers ...
2024/01/30 05:38:35.916828 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 05:38:35.947686 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
64903772f795   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             epic_moore

2024/01/30 05:38:35.947755 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 05:38:35.978445 [INFO] Deleted Containers:
64903772f795d53385571784a8f78bd9e08b20c05aff4182cb1c28639b11baff

Total reclaimed space: 0B

2024/01/30 05:38:35.978472 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 05:38:35.999136 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 05:38:35.999479 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 05:38:36.006457 [INFO] application/json

2024/01/30 05:38:36.006488 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 05:38:36.105487 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 05:38:36.105805 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 05:38:36.107644 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 05:38:36.107740 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 05:38:36.107801 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 05:38:36.107806 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 05:38:36.107811 [INFO] Executing instruction: Generate environment file
2024/01/30 05:38:36.107848 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 05:38:36.107852 [INFO] start build docker app
2024/01/30 05:38:36.108311 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 05:38:36.108315 [INFO] fetching image and ports
2024/01/30 05:38:36.110546 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 05:38:36.110656 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 05:38:36.110667 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 05:38:36.110676 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 05:38:37.110204 [INFO] Login Succeeded

2024/01/30 05:38:37.110223 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 05:38:37.110231 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 05:38:37.110256 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 05:38:37.255109 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 05:38:37.255131 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 05:38:37.255143 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 05:38:37.255146 [INFO] start to build docker image
2024/01/30 05:38:37.255160 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 05:38:37.508331 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 05:38:37.508360 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 05:38:37.508365 [INFO] successfully build docker image
2024/01/30 05:38:37.508368 [INFO] save staging docker image id
2024/01/30 05:38:37.508383 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 05:38:37.530915 [INFO] c176d18fbf65

2024/01/30 05:38:37.531041 [INFO] Executing instruction: configure X-Ray
2024/01/30 05:38:37.531048 [INFO] X-Ray is not enabled.
2024/01/30 05:38:37.531051 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 05:38:37.536815 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 05:38:37.538406 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 05:38:37.550735 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 05:38:37.550772 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 05:38:37.562223 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 05:38:37.570772 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 05:38:37.582318 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 05:38:37.638459 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 05:38:37.950559 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 05:38:37.950643 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 05:38:38.265311 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 05:38:38.280218 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 05:38:38.597571 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 05:38:38.609800 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 05:38:38.623496 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 05:38:38.926001 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 05:38:38.936181 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 05:38:39.209481 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 05:38:39.209513 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 05:38:39.222451 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 05:38:39.234012 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 05:38:39.298309 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 05:38:39.299215 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 05:38:39.300243 [INFO] Executing instruction: configure log streaming
2024/01/30 05:38:39.300253 [INFO] log streaming is not enabled
2024/01/30 05:38:39.300257 [INFO] disable log stream
2024/01/30 05:38:39.300273 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 05:38:39.319908 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 05:38:39.338695 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 05:38:39.338724 [INFO] Checking if logs need forced rotation
2024/01/30 05:38:39.338745 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 05:38:39.905837 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 05:38:40.398677 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 05:38:40.400525 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 05:38:40.457824 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 05:38:40.475319 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 05:38:40.475339 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 05:38:40.475352 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 05:38:40.867409 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 05:38:40.867431 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 05:38:40.867459 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 05:38:40.867462 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 05:38:40.867482 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 05:38:40.867493 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 05:38:40.867495 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 05:38:40.867500 [INFO] Executing instruction: stop X-Ray
2024/01/30 05:38:40.867502 [INFO] stop X-Ray ...
2024/01/30 05:38:40.867514 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 05:38:40.887031 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 05:38:40.887090 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 05:38:40.914537 [INFO] Executing instruction: Run Docker Container
2024/01/30 05:38:40.914568 [INFO] stop currently running containers...
2024/01/30 05:38:40.914585 [INFO] detected old app is not docker compose app
2024/01/30 05:38:40.914603 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 05:38:40.962515 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 05:38:40.976937 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 05:38:40.976972 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 05:38:40.999718 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 05:38:40.999753 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 05:38:41.018041 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 05:38:41.018096 [INFO] stopping current container: 64903772f795
2024/01/30 05:38:41.018109 [INFO] Running command /bin/sh -c docker ps | grep -q 64903772f795
2024/01/30 05:38:41.040536 [INFO] Running command /bin/sh -c docker ps | grep -q 64903772f795
2024/01/30 05:38:41.062017 [INFO] Pruning containers ...
2024/01/30 05:38:41.062040 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 05:38:41.081958 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 05:38:41.081991 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 05:38:41.104763 [INFO] Total reclaimed space: 0B

2024/01/30 05:38:41.104786 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 05:38:41.130005 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 05:38:41.130053 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 05:38:41.153879 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 05:38:41.153904 [INFO] Removing /var/app/current/ if it exists
2024/01/30 05:38:41.154076 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 05:38:41.154100 [INFO] detected new app is not docker compose app
2024/01/30 05:38:41.154150 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 05:38:41.557027 [INFO] 2c6d5f24290baf8141b5221b7cb1e7839e419936246cb4dc05588ab018dad009

2024/01/30 05:38:46.561405 [INFO] Running command /bin/sh -c docker ps | grep -q 2c6d5f24290b
2024/01/30 05:38:46.594549 [ERROR] docker container quit unexpectedly on 2024-01-30 05:38:46.59452817 +0000 UTC: Command /bin/sh -c docker ps | grep -q 2c6d5f24290b failed with error exit status 1
2024/01/30 05:38:46.594577 [INFO] Running command /bin/sh -c docker logs 2c6d5f24290b
2024/01/30 05:38:46.617556 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 2c6d5f24290b: Command /bin/sh -c docker ps | grep -q 2c6d5f24290b failed with error exit status 1 

2024/01/30 05:38:46.617566 [INFO] Executing cleanup logic
2024/01/30 05:38:46.617781 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 06:38:47.784646 [INFO] Starting...
2024/01/30 06:38:47.784690 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 06:38:47.784718 [INFO] reading event message file
2024/01/30 06:38:47.786273 [INFO] Engine received EB command userdata-exec

2024/01/30 06:38:47.796452 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 06:38:48.239846 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 06:38:48.661608 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 06:38:48.661704 [INFO] Engine command: (self-startup)

2024/01/30 06:38:48.661712 [INFO] Downloading EB Application...
2024/01/30 06:38:48.661715 [INFO] Region: eu-west-1
2024/01/30 06:38:48.661718 [INFO] envID: e-8gmkc7rmw6
2024/01/30 06:38:48.661721 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 06:38:48.661725 [INFO] Using manifest file name from command request
2024/01/30 06:38:48.661738 [INFO] Unable to get version manifest file.
2024/01/30 06:38:48.661741 [INFO] Downloading latest manifest available.
2024/01/30 06:38:48.661744 [INFO] Download latest app version manifest
2024/01/30 06:38:48.661889 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 06:38:48.706311 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 06:38:48.706580 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 06:38:48.717760 [INFO] Download successful124bytes downloaded
2024/01/30 06:38:48.717891 [INFO] Trying to read and parse version manifest...
2024/01/30 06:38:48.717973 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 06:38:48.767283 [INFO] Download successful264bytes downloaded
2024/01/30 06:38:48.767637 [INFO] Executing instruction: SyncClock
2024/01/30 06:38:48.767643 [INFO] Starting SyncClock
2024/01/30 06:38:48.767652 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 06:38:48.773579 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 06:38:44 2024
System time     : 0.000001723 seconds slow of NTP time
Last offset     : -0.000001761 seconds
RMS offset      : 0.000006255 seconds
Frequency       : 0.728 ppm fast
Residual freq   : +0.025 ppm
Skew            : 0.293 ppm
Root delay      : 0.000437518 seconds
Root dispersion : 0.000272146 seconds
Update interval : 32.4 seconds
Leap status     : Normal

2024/01/30 06:38:48.773611 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 06:38:48.777910 [INFO] 200 OK

2024/01/30 06:38:48.777998 [INFO] Skipping Configure OS
2024/01/30 06:38:48.778003 [INFO] Skipping LockRepo
2024/01/30 06:38:48.778007 [INFO] Skipping GenerateEBBanner
2024/01/30 06:38:48.778011 [INFO] Skipping Install Process Manager
2024/01/30 06:38:48.778014 [INFO] Skipping install syslog
2024/01/30 06:38:48.778018 [INFO] Skipping install cron
2024/01/30 06:38:48.778022 [INFO] Skipping install proxy
2024/01/30 06:38:48.778026 [INFO] Skipping installhealthd
2024/01/30 06:38:48.778030 [INFO] Skipping Install Log Streaming Manager
2024/01/30 06:38:48.778034 [INFO] Skipping install X-Ray
2024/01/30 06:38:48.778038 [INFO] Skipping install Third Party License
2024/01/30 06:38:48.778043 [INFO] Skipping installSqsd
2024/01/30 06:38:48.778049 [INFO] Skipping bootstraphealthd
2024/01/30 06:38:48.778053 [INFO] Skipping Install yum packages
2024/01/30 06:38:48.778057 [INFO] Skipping install docker-compose
2024/01/30 06:38:48.778062 [INFO] Skipping Configure Docker Daemon
2024/01/30 06:38:48.778065 [INFO] Skipping MarkBaked
2024/01/30 06:38:48.778069 [INFO] Skipping TuneSystemSettings
2024/01/30 06:38:48.778071 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 06:38:48.778074 [INFO] Initialize LogRotate files and directories
2024/01/30 06:38:48.792261 [INFO] Skipping BootstrapCFNHup
2024/01/30 06:38:48.792273 [INFO] Executing instruction: StartCFNHup
2024/01/30 06:38:48.792276 [INFO] Start cfn-hup
2024/01/30 06:38:48.792294 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 06:38:48.808574 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 06:38:48.822995 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 06:38:48.823046 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 06:38:48.823050 [INFO] Executing instruction: Start Docker
2024/01/30 06:38:48.823054 [INFO] Starting Docker...
2024/01/30 06:38:48.823151 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 06:38:48.824344 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 06:38:48.825395 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 06:38:49.154680 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 06:38:49.170551 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 06:38:49.170586 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 06:38:49.182309 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 06:38:49.192304 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 06:38:49.207933 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 06:38:49.301190 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 06:38:49.301227 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 06:38:49.713492 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 06:38:50.059615 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 06:38:50.087174 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 06:38:50.373846 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 06:38:50.394279 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 06:38:50.411958 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 06:38:50.421144 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 06:38:51.745397 [INFO] Skipping Setup Docker Options
2024/01/30 06:38:51.745426 [INFO] Skipping MarkBootstrapped
2024/01/30 06:38:51.745430 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 06:38:51.745594 [INFO] Starting SwitchCFNStack
2024/01/30 06:38:51.745600 [INFO] Executing instruction: stopSqsd
2024/01/30 06:38:51.745603 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 06:38:51.745606 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 06:38:51.745609 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 06:38:51.745627 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 06:38:52.245632 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 06:38:52.245655 [INFO] Executing instruction: StagedockerApplication
2024/01/30 06:38:52.245668 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 06:38:52.266615 [INFO] Pruning containers ...
2024/01/30 06:38:52.266649 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 06:38:52.288056 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
2c6d5f24290b   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             vigorous_thompson

2024/01/30 06:38:52.288086 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 06:38:52.328440 [INFO] Deleted Containers:
2c6d5f24290baf8141b5221b7cb1e7839e419936246cb4dc05588ab018dad009

Total reclaimed space: 0B

2024/01/30 06:38:52.328467 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 06:38:52.349272 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 06:38:52.349526 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 06:38:52.352634 [INFO] application/json

2024/01/30 06:38:52.352660 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 06:38:52.442100 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 06:38:52.442256 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 06:38:52.443563 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 06:38:52.443832 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 06:38:52.443853 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 06:38:52.443856 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 06:38:52.443862 [INFO] Executing instruction: Generate environment file
2024/01/30 06:38:52.443891 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 06:38:52.443896 [INFO] start build docker app
2024/01/30 06:38:52.444294 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 06:38:52.444299 [INFO] fetching image and ports
2024/01/30 06:38:52.446050 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 06:38:52.446136 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 06:38:52.446151 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 06:38:52.446161 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 06:38:53.314228 [INFO] Login Succeeded

2024/01/30 06:38:53.314319 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 06:38:53.314326 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 06:38:53.314343 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 06:38:53.467883 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 06:38:53.467905 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 06:38:53.467909 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 06:38:53.467913 [INFO] start to build docker image
2024/01/30 06:38:53.467931 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 06:38:53.747699 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 06:38:53.747727 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 06:38:53.747741 [INFO] successfully build docker image
2024/01/30 06:38:53.747744 [INFO] save staging docker image id
2024/01/30 06:38:53.747758 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 06:38:53.772770 [INFO] c176d18fbf65

2024/01/30 06:38:53.772891 [INFO] Executing instruction: configure X-Ray
2024/01/30 06:38:53.772898 [INFO] X-Ray is not enabled.
2024/01/30 06:38:53.772901 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 06:38:53.777993 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 06:38:53.779777 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 06:38:53.800338 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 06:38:53.801646 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 06:38:53.812679 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 06:38:53.826369 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 06:38:53.844775 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 06:38:53.930227 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 06:38:54.248398 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 06:38:54.248490 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 06:38:54.564972 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 06:38:54.576251 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 06:38:54.896231 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 06:38:54.906115 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 06:38:54.914713 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 06:38:55.253375 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 06:38:55.264561 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 06:38:55.542638 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 06:38:55.542678 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 06:38:55.555057 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 06:38:55.563145 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 06:38:55.646184 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 06:38:55.647338 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 06:38:55.648334 [INFO] Executing instruction: configure log streaming
2024/01/30 06:38:55.648345 [INFO] log streaming is not enabled
2024/01/30 06:38:55.648349 [INFO] disable log stream
2024/01/30 06:38:55.648363 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 06:38:55.680406 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 06:38:55.699444 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 06:38:55.699469 [INFO] Checking if logs need forced rotation
2024/01/30 06:38:55.699492 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 06:38:56.225105 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 06:38:56.743547 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 06:38:56.745367 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 06:38:56.822965 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 06:38:56.850042 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 06:38:56.850120 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 06:38:56.850133 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 06:38:57.251544 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 06:38:57.251574 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 06:38:57.251599 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 06:38:57.251602 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 06:38:57.251623 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 06:38:57.251637 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 06:38:57.251640 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 06:38:57.251647 [INFO] Executing instruction: stop X-Ray
2024/01/30 06:38:57.251656 [INFO] stop X-Ray ...
2024/01/30 06:38:57.251667 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 06:38:57.267371 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 06:38:57.267406 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 06:38:57.285419 [INFO] Executing instruction: Run Docker Container
2024/01/30 06:38:57.285463 [INFO] stop currently running containers...
2024/01/30 06:38:57.285545 [INFO] detected old app is not docker compose app
2024/01/30 06:38:57.285559 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 06:38:57.332341 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 06:38:57.346091 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 06:38:57.346118 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 06:38:57.366188 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 06:38:57.366220 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 06:38:57.387194 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 06:38:57.387249 [INFO] stopping current container: 2c6d5f24290b
2024/01/30 06:38:57.387262 [INFO] Running command /bin/sh -c docker ps | grep -q 2c6d5f24290b
2024/01/30 06:38:57.414054 [INFO] Running command /bin/sh -c docker ps | grep -q 2c6d5f24290b
2024/01/30 06:38:57.440559 [INFO] Pruning containers ...
2024/01/30 06:38:57.440583 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 06:38:57.470312 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 06:38:57.470340 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 06:38:57.495676 [INFO] Total reclaimed space: 0B

2024/01/30 06:38:57.495717 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 06:38:57.517415 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 06:38:57.517447 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 06:38:57.539516 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 06:38:57.539543 [INFO] Removing /var/app/current/ if it exists
2024/01/30 06:38:57.539838 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 06:38:57.539859 [INFO] detected new app is not docker compose app
2024/01/30 06:38:57.539930 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 06:38:57.983307 [INFO] 4dc3a32eafe2fe449e0d48a45c940c19806bc5ffbd2b6c5a82fbceb896b25af6

2024/01/30 06:39:02.983706 [INFO] Running command /bin/sh -c docker ps | grep -q 4dc3a32eafe2
2024/01/30 06:39:03.024811 [ERROR] docker container quit unexpectedly on 2024-01-30 06:39:03.024796978 +0000 UTC: Command /bin/sh -c docker ps | grep -q 4dc3a32eafe2 failed with error exit status 1
2024/01/30 06:39:03.024842 [INFO] Running command /bin/sh -c docker logs 4dc3a32eafe2
2024/01/30 06:39:03.061094 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 4dc3a32eafe2: Command /bin/sh -c docker ps | grep -q 4dc3a32eafe2 failed with error exit status 1 

2024/01/30 06:39:03.061105 [INFO] Executing cleanup logic
2024/01/30 06:39:03.062545 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 07:39:04.120135 [INFO] Starting...
2024/01/30 07:39:04.120176 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 07:39:04.120199 [INFO] reading event message file
2024/01/30 07:39:04.120907 [INFO] Engine received EB command userdata-exec

2024/01/30 07:39:04.125734 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 07:39:04.548872 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 07:39:05.245108 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 07:39:05.248768 [INFO] Engine command: (self-startup)

2024/01/30 07:39:05.248837 [INFO] Downloading EB Application...
2024/01/30 07:39:05.248842 [INFO] Region: eu-west-1
2024/01/30 07:39:05.248845 [INFO] envID: e-8gmkc7rmw6
2024/01/30 07:39:05.248847 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 07:39:05.248850 [INFO] Using manifest file name from command request
2024/01/30 07:39:05.248865 [INFO] Unable to get version manifest file.
2024/01/30 07:39:05.248868 [INFO] Downloading latest manifest available.
2024/01/30 07:39:05.248901 [INFO] Download latest app version manifest
2024/01/30 07:39:05.249126 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 07:39:05.304487 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 07:39:05.304664 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 07:39:05.317583 [INFO] Download successful124bytes downloaded
2024/01/30 07:39:05.317788 [INFO] Trying to read and parse version manifest...
2024/01/30 07:39:05.318098 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 07:39:05.339373 [INFO] Download successful264bytes downloaded
2024/01/30 07:39:05.339952 [INFO] Executing instruction: SyncClock
2024/01/30 07:39:05.339957 [INFO] Starting SyncClock
2024/01/30 07:39:05.339970 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 07:39:05.346046 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 07:38:50 2024
System time     : 0.000000120 seconds fast of NTP time
Last offset     : -0.000000862 seconds
RMS offset      : 0.000003638 seconds
Frequency       : 0.535 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.054 ppm
Root delay      : 0.000468195 seconds
Root dispersion : 0.000284981 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/30 07:39:05.346068 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 07:39:05.350680 [INFO] 200 OK

2024/01/30 07:39:05.350774 [INFO] Skipping Configure OS
2024/01/30 07:39:05.350779 [INFO] Skipping LockRepo
2024/01/30 07:39:05.350783 [INFO] Skipping GenerateEBBanner
2024/01/30 07:39:05.350787 [INFO] Skipping Install Process Manager
2024/01/30 07:39:05.350791 [INFO] Skipping install syslog
2024/01/30 07:39:05.350795 [INFO] Skipping install cron
2024/01/30 07:39:05.350799 [INFO] Skipping install proxy
2024/01/30 07:39:05.350802 [INFO] Skipping installhealthd
2024/01/30 07:39:05.350806 [INFO] Skipping Install Log Streaming Manager
2024/01/30 07:39:05.350810 [INFO] Skipping install X-Ray
2024/01/30 07:39:05.350814 [INFO] Skipping install Third Party License
2024/01/30 07:39:05.350819 [INFO] Skipping installSqsd
2024/01/30 07:39:05.350822 [INFO] Skipping bootstraphealthd
2024/01/30 07:39:05.350826 [INFO] Skipping Install yum packages
2024/01/30 07:39:05.350830 [INFO] Skipping install docker-compose
2024/01/30 07:39:05.350834 [INFO] Skipping Configure Docker Daemon
2024/01/30 07:39:05.350837 [INFO] Skipping MarkBaked
2024/01/30 07:39:05.350841 [INFO] Skipping TuneSystemSettings
2024/01/30 07:39:05.350843 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 07:39:05.350846 [INFO] Initialize LogRotate files and directories
2024/01/30 07:39:05.365238 [INFO] Skipping BootstrapCFNHup
2024/01/30 07:39:05.365249 [INFO] Executing instruction: StartCFNHup
2024/01/30 07:39:05.365252 [INFO] Start cfn-hup
2024/01/30 07:39:05.365276 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 07:39:05.387763 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 07:39:05.403756 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 07:39:05.403792 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 07:39:05.403796 [INFO] Executing instruction: Start Docker
2024/01/30 07:39:05.403799 [INFO] Starting Docker...
2024/01/30 07:39:05.403897 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 07:39:05.418498 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 07:39:05.422362 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 07:39:05.910448 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 07:39:05.925120 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 07:39:05.925151 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 07:39:05.935616 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 07:39:05.945037 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 07:39:05.958785 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 07:39:06.062190 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 07:39:06.062250 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 07:39:06.399634 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 07:39:06.686155 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 07:39:06.702030 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 07:39:07.043583 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 07:39:07.052082 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 07:39:07.064578 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 07:39:07.074535 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 07:39:08.289906 [INFO] Skipping Setup Docker Options
2024/01/30 07:39:08.289932 [INFO] Skipping MarkBootstrapped
2024/01/30 07:39:08.289936 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 07:39:08.290151 [INFO] Starting SwitchCFNStack
2024/01/30 07:39:08.290158 [INFO] Executing instruction: stopSqsd
2024/01/30 07:39:08.290161 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 07:39:08.290165 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 07:39:08.290169 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 07:39:08.290186 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 07:39:08.768525 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 07:39:08.768549 [INFO] Executing instruction: StagedockerApplication
2024/01/30 07:39:08.768561 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 07:39:08.815912 [INFO] Pruning containers ...
2024/01/30 07:39:08.815942 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 07:39:08.857403 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
4dc3a32eafe2   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             determined_thompson

2024/01/30 07:39:08.857459 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 07:39:08.883220 [INFO] Deleted Containers:
4dc3a32eafe2fe449e0d48a45c940c19806bc5ffbd2b6c5a82fbceb896b25af6

Total reclaimed space: 0B

2024/01/30 07:39:08.883245 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 07:39:08.902278 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 07:39:08.902522 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 07:39:08.906495 [INFO] application/json

2024/01/30 07:39:08.906517 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 07:39:09.017544 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 07:39:09.019115 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 07:39:09.024436 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 07:39:09.024474 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 07:39:09.024490 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 07:39:09.024493 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 07:39:09.024497 [INFO] Executing instruction: Generate environment file
2024/01/30 07:39:09.024525 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 07:39:09.024530 [INFO] start build docker app
2024/01/30 07:39:09.024980 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 07:39:09.024985 [INFO] fetching image and ports
2024/01/30 07:39:09.027386 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 07:39:09.027486 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 07:39:09.027495 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 07:39:09.027505 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 07:39:10.069668 [INFO] Login Succeeded

2024/01/30 07:39:10.069685 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 07:39:10.069691 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 07:39:10.069707 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 07:39:10.214897 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 07:39:10.214924 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 07:39:10.214928 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 07:39:10.214930 [INFO] start to build docker image
2024/01/30 07:39:10.214947 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 07:39:10.546702 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 07:39:10.546748 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 07:39:10.546753 [INFO] successfully build docker image
2024/01/30 07:39:10.546756 [INFO] save staging docker image id
2024/01/30 07:39:10.546771 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 07:39:10.572195 [INFO] c176d18fbf65

2024/01/30 07:39:10.572331 [INFO] Executing instruction: configure X-Ray
2024/01/30 07:39:10.572338 [INFO] X-Ray is not enabled.
2024/01/30 07:39:10.572340 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 07:39:10.578002 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 07:39:10.579827 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 07:39:10.593049 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 07:39:10.593083 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 07:39:10.605373 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 07:39:10.616230 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 07:39:10.628410 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 07:39:10.708407 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 07:39:11.054276 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 07:39:11.054465 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 07:39:11.329140 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 07:39:11.341262 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 07:39:11.636566 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 07:39:11.645793 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 07:39:11.659854 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 07:39:11.987392 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 07:39:11.997816 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 07:39:12.292618 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 07:39:12.292656 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 07:39:12.304782 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 07:39:12.312871 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 07:39:12.410314 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 07:39:12.411826 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 07:39:12.413040 [INFO] Executing instruction: configure log streaming
2024/01/30 07:39:12.413048 [INFO] log streaming is not enabled
2024/01/30 07:39:12.413050 [INFO] disable log stream
2024/01/30 07:39:12.413077 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 07:39:12.435490 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 07:39:12.449442 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 07:39:12.449466 [INFO] Checking if logs need forced rotation
2024/01/30 07:39:12.449486 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 07:39:13.034391 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 07:39:13.546599 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 07:39:13.548216 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 07:39:13.922447 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 07:39:13.939707 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 07:39:13.939723 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 07:39:13.939739 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 07:39:14.472271 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 07:39:14.472305 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 07:39:14.472332 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 07:39:14.472335 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 07:39:14.472355 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 07:39:14.472366 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 07:39:14.472368 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 07:39:14.472374 [INFO] Executing instruction: stop X-Ray
2024/01/30 07:39:14.472377 [INFO] stop X-Ray ...
2024/01/30 07:39:14.472386 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 07:39:14.490681 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 07:39:14.490715 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 07:39:14.508595 [INFO] Executing instruction: Run Docker Container
2024/01/30 07:39:14.508684 [INFO] stop currently running containers...
2024/01/30 07:39:14.508695 [INFO] detected old app is not docker compose app
2024/01/30 07:39:14.508709 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 07:39:14.522476 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 07:39:14.539220 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 07:39:14.539246 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 07:39:14.554528 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 07:39:14.554559 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 07:39:14.567840 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 07:39:14.567881 [INFO] stopping current container: 4dc3a32eafe2
2024/01/30 07:39:14.567892 [INFO] Running command /bin/sh -c docker ps | grep -q 4dc3a32eafe2
2024/01/30 07:39:14.604230 [INFO] Running command /bin/sh -c docker ps | grep -q 4dc3a32eafe2
2024/01/30 07:39:14.628551 [INFO] Pruning containers ...
2024/01/30 07:39:14.628575 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 07:39:14.648684 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 07:39:14.648711 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 07:39:14.678692 [INFO] Total reclaimed space: 0B

2024/01/30 07:39:14.678725 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 07:39:14.711207 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 07:39:14.711242 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 07:39:14.731697 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 07:39:14.731719 [INFO] Removing /var/app/current/ if it exists
2024/01/30 07:39:14.731901 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 07:39:14.731923 [INFO] detected new app is not docker compose app
2024/01/30 07:39:14.731976 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 07:39:15.206732 [INFO] b4b2ea15cf685685ca5ac99d20a2be41a6935af0777714f2331c7efecc97dee0

2024/01/30 07:39:20.207195 [INFO] Running command /bin/sh -c docker ps | grep -q b4b2ea15cf68
2024/01/30 07:39:20.231533 [ERROR] docker container quit unexpectedly on 2024-01-30 07:39:20.231515076 +0000 UTC: Command /bin/sh -c docker ps | grep -q b4b2ea15cf68 failed with error exit status 1
2024/01/30 07:39:20.231559 [INFO] Running command /bin/sh -c docker logs b4b2ea15cf68
2024/01/30 07:39:20.255066 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b4b2ea15cf68: Command /bin/sh -c docker ps | grep -q b4b2ea15cf68 failed with error exit status 1 

2024/01/30 07:39:20.255076 [INFO] Executing cleanup logic
2024/01/30 07:39:20.255340 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 08:39:21.271583 [INFO] Starting...
2024/01/30 08:39:21.271626 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 08:39:21.271653 [INFO] reading event message file
2024/01/30 08:39:21.272341 [INFO] Engine received EB command userdata-exec

2024/01/30 08:39:21.277746 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 08:39:21.690678 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 08:39:22.217837 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 08:39:22.217919 [INFO] Engine command: (self-startup)

2024/01/30 08:39:22.217925 [INFO] Downloading EB Application...
2024/01/30 08:39:22.217928 [INFO] Region: eu-west-1
2024/01/30 08:39:22.217931 [INFO] envID: e-8gmkc7rmw6
2024/01/30 08:39:22.217935 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 08:39:22.217938 [INFO] Using manifest file name from command request
2024/01/30 08:39:22.217952 [INFO] Unable to get version manifest file.
2024/01/30 08:39:22.217955 [INFO] Downloading latest manifest available.
2024/01/30 08:39:22.217957 [INFO] Download latest app version manifest
2024/01/30 08:39:22.218084 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 08:39:22.254035 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 08:39:22.254206 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 08:39:22.264002 [INFO] Download successful124bytes downloaded
2024/01/30 08:39:22.264236 [INFO] Trying to read and parse version manifest...
2024/01/30 08:39:22.264319 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 08:39:22.289451 [INFO] Download successful264bytes downloaded
2024/01/30 08:39:22.289745 [INFO] Executing instruction: SyncClock
2024/01/30 08:39:22.289750 [INFO] Starting SyncClock
2024/01/30 08:39:22.289765 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 08:39:22.296102 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 08:39:13 2024
System time     : 0.000001163 seconds fast of NTP time
Last offset     : +0.000000924 seconds
RMS offset      : 0.000003317 seconds
Frequency       : 0.838 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.032 ppm
Root delay      : 0.000450552 seconds
Root dispersion : 0.000521048 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 08:39:22.296130 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 08:39:22.302069 [INFO] 200 OK

2024/01/30 08:39:22.302368 [INFO] Skipping Configure OS
2024/01/30 08:39:22.302381 [INFO] Skipping LockRepo
2024/01/30 08:39:22.302386 [INFO] Skipping GenerateEBBanner
2024/01/30 08:39:22.302392 [INFO] Skipping Install Process Manager
2024/01/30 08:39:22.302397 [INFO] Skipping install syslog
2024/01/30 08:39:22.302402 [INFO] Skipping install cron
2024/01/30 08:39:22.302407 [INFO] Skipping install proxy
2024/01/30 08:39:22.302411 [INFO] Skipping installhealthd
2024/01/30 08:39:22.302416 [INFO] Skipping Install Log Streaming Manager
2024/01/30 08:39:22.302421 [INFO] Skipping install X-Ray
2024/01/30 08:39:22.302426 [INFO] Skipping install Third Party License
2024/01/30 08:39:22.302432 [INFO] Skipping installSqsd
2024/01/30 08:39:22.302437 [INFO] Skipping bootstraphealthd
2024/01/30 08:39:22.302443 [INFO] Skipping Install yum packages
2024/01/30 08:39:22.302454 [INFO] Skipping install docker-compose
2024/01/30 08:39:22.302460 [INFO] Skipping Configure Docker Daemon
2024/01/30 08:39:22.302465 [INFO] Skipping MarkBaked
2024/01/30 08:39:22.302471 [INFO] Skipping TuneSystemSettings
2024/01/30 08:39:22.302474 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 08:39:22.302478 [INFO] Initialize LogRotate files and directories
2024/01/30 08:39:22.315994 [INFO] Skipping BootstrapCFNHup
2024/01/30 08:39:22.316004 [INFO] Executing instruction: StartCFNHup
2024/01/30 08:39:22.316007 [INFO] Start cfn-hup
2024/01/30 08:39:22.316023 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 08:39:22.365540 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 08:39:22.382696 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 08:39:22.383380 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 08:39:22.383390 [INFO] Executing instruction: Start Docker
2024/01/30 08:39:22.383393 [INFO] Starting Docker...
2024/01/30 08:39:22.383477 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 08:39:22.384795 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 08:39:22.385814 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 08:39:22.643749 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 08:39:22.672223 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 08:39:22.672307 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 08:39:22.686629 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 08:39:22.695651 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 08:39:22.706275 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 08:39:22.814301 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 08:39:22.814348 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 08:39:23.217390 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 08:39:23.521807 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 08:39:23.531923 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 08:39:23.805642 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 08:39:23.814122 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 08:39:23.827779 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 08:39:23.837135 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 08:39:25.005301 [INFO] Skipping Setup Docker Options
2024/01/30 08:39:25.005321 [INFO] Skipping MarkBootstrapped
2024/01/30 08:39:25.005331 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 08:39:25.005525 [INFO] Starting SwitchCFNStack
2024/01/30 08:39:25.005532 [INFO] Executing instruction: stopSqsd
2024/01/30 08:39:25.005536 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 08:39:25.005540 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 08:39:25.005543 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 08:39:25.005560 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 08:39:25.489005 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 08:39:25.489030 [INFO] Executing instruction: StagedockerApplication
2024/01/30 08:39:25.489043 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 08:39:25.511945 [INFO] Pruning containers ...
2024/01/30 08:39:25.511974 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 08:39:25.535594 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b4b2ea15cf68   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             peaceful_cori

2024/01/30 08:39:25.535631 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 08:39:25.563684 [INFO] Deleted Containers:
b4b2ea15cf685685ca5ac99d20a2be41a6935af0777714f2331c7efecc97dee0

Total reclaimed space: 0B

2024/01/30 08:39:25.563707 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 08:39:25.584541 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 08:39:25.584807 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 08:39:25.587693 [INFO] application/json

2024/01/30 08:39:25.587711 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 08:39:25.686343 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 08:39:25.686524 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 08:39:25.687696 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 08:39:25.687722 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 08:39:25.687736 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 08:39:25.687739 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 08:39:25.687743 [INFO] Executing instruction: Generate environment file
2024/01/30 08:39:25.687770 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 08:39:25.687775 [INFO] start build docker app
2024/01/30 08:39:25.688128 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 08:39:25.688131 [INFO] fetching image and ports
2024/01/30 08:39:25.689986 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 08:39:25.690038 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 08:39:25.690050 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 08:39:25.690061 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 08:39:26.675679 [INFO] Login Succeeded

2024/01/30 08:39:26.676220 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 08:39:26.676232 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 08:39:26.676554 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 08:39:26.838908 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 08:39:26.838933 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 08:39:26.838937 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 08:39:26.838940 [INFO] start to build docker image
2024/01/30 08:39:26.838956 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 08:39:27.113518 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 08:39:27.113539 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 08:39:27.113544 [INFO] successfully build docker image
2024/01/30 08:39:27.113547 [INFO] save staging docker image id
2024/01/30 08:39:27.113644 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 08:39:27.152006 [INFO] c176d18fbf65

2024/01/30 08:39:27.152767 [INFO] Executing instruction: configure X-Ray
2024/01/30 08:39:27.152775 [INFO] X-Ray is not enabled.
2024/01/30 08:39:27.152778 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 08:39:27.161123 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 08:39:27.163300 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 08:39:27.177116 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 08:39:27.177202 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 08:39:27.191314 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 08:39:27.210550 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 08:39:27.221253 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 08:39:27.300964 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 08:39:27.650591 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 08:39:27.650681 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 08:39:27.938687 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 08:39:27.955392 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 08:39:28.326243 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 08:39:28.335037 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 08:39:28.348922 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 08:39:28.622236 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 08:39:28.631608 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 08:39:28.915438 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 08:39:28.915471 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 08:39:28.928235 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 08:39:28.936679 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 08:39:28.998771 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 08:39:28.999613 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 08:39:29.000519 [INFO] Executing instruction: configure log streaming
2024/01/30 08:39:29.000535 [INFO] log streaming is not enabled
2024/01/30 08:39:29.000539 [INFO] disable log stream
2024/01/30 08:39:29.000554 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 08:39:29.018753 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 08:39:29.042093 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 08:39:29.042116 [INFO] Checking if logs need forced rotation
2024/01/30 08:39:29.042139 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 08:39:29.640727 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 08:39:30.249141 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 08:39:30.251094 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 08:39:30.686770 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 08:39:30.706380 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 08:39:30.706397 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 08:39:30.706409 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 08:39:31.222718 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 08:39:31.222743 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 08:39:31.222770 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 08:39:31.222774 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 08:39:31.222794 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 08:39:31.222804 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 08:39:31.222807 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 08:39:31.222817 [INFO] Executing instruction: stop X-Ray
2024/01/30 08:39:31.222820 [INFO] stop X-Ray ...
2024/01/30 08:39:31.222833 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 08:39:31.238282 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 08:39:31.238315 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 08:39:31.253929 [INFO] Executing instruction: Run Docker Container
2024/01/30 08:39:31.253960 [INFO] stop currently running containers...
2024/01/30 08:39:31.253972 [INFO] detected old app is not docker compose app
2024/01/30 08:39:31.253985 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 08:39:31.272700 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 08:39:31.300795 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 08:39:31.300829 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 08:39:31.315708 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 08:39:31.315744 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 08:39:31.333762 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 08:39:31.333814 [INFO] stopping current container: b4b2ea15cf68
2024/01/30 08:39:31.333827 [INFO] Running command /bin/sh -c docker ps | grep -q b4b2ea15cf68
2024/01/30 08:39:31.358944 [INFO] Running command /bin/sh -c docker ps | grep -q b4b2ea15cf68
2024/01/30 08:39:31.382402 [INFO] Pruning containers ...
2024/01/30 08:39:31.382428 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 08:39:31.407375 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 08:39:31.407414 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 08:39:31.430259 [INFO] Total reclaimed space: 0B

2024/01/30 08:39:31.430285 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 08:39:31.454461 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 08:39:31.454499 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 08:39:31.475415 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 08:39:31.475447 [INFO] Removing /var/app/current/ if it exists
2024/01/30 08:39:31.475561 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 08:39:31.475578 [INFO] detected new app is not docker compose app
2024/01/30 08:39:31.475643 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 08:39:31.888966 [INFO] 3d87b990f170dbeefecd78d559a229643e81365ae9b2837bd82e0f0f16531def

2024/01/30 08:39:36.891428 [INFO] Running command /bin/sh -c docker ps | grep -q 3d87b990f170
2024/01/30 08:39:36.914945 [ERROR] docker container quit unexpectedly on 2024-01-30 08:39:36.914927031 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3d87b990f170 failed with error exit status 1
2024/01/30 08:39:36.914974 [INFO] Running command /bin/sh -c docker logs 3d87b990f170
2024/01/30 08:39:36.942102 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3d87b990f170: Command /bin/sh -c docker ps | grep -q 3d87b990f170 failed with error exit status 1 

2024/01/30 08:39:36.942111 [INFO] Executing cleanup logic
2024/01/30 08:39:36.942469 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 09:39:37.950533 [INFO] Starting...
2024/01/30 09:39:37.950573 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 09:39:37.950600 [INFO] reading event message file
2024/01/30 09:39:37.951292 [INFO] Engine received EB command userdata-exec

2024/01/30 09:39:37.959045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 09:39:38.354818 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 09:39:38.798258 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 09:39:38.798322 [INFO] Engine command: (self-startup)

2024/01/30 09:39:38.798327 [INFO] Downloading EB Application...
2024/01/30 09:39:38.798329 [INFO] Region: eu-west-1
2024/01/30 09:39:38.798331 [INFO] envID: e-8gmkc7rmw6
2024/01/30 09:39:38.798334 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 09:39:38.798336 [INFO] Using manifest file name from command request
2024/01/30 09:39:38.798349 [INFO] Unable to get version manifest file.
2024/01/30 09:39:38.798351 [INFO] Downloading latest manifest available.
2024/01/30 09:39:38.798353 [INFO] Download latest app version manifest
2024/01/30 09:39:38.798537 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 09:39:38.844350 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 09:39:38.844541 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 09:39:38.856836 [INFO] Download successful124bytes downloaded
2024/01/30 09:39:38.856966 [INFO] Trying to read and parse version manifest...
2024/01/30 09:39:38.857048 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 09:39:38.877101 [INFO] Download successful264bytes downloaded
2024/01/30 09:39:38.877416 [INFO] Executing instruction: SyncClock
2024/01/30 09:39:38.877423 [INFO] Starting SyncClock
2024/01/30 09:39:38.877435 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 09:39:38.883098 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 09:39:23 2024
System time     : 0.000000665 seconds fast of NTP time
Last offset     : -0.000000429 seconds
RMS offset      : 0.000001669 seconds
Frequency       : 0.544 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.034 ppm
Root delay      : 0.000418241 seconds
Root dispersion : 0.000303795 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 09:39:38.883138 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 09:39:38.889164 [INFO] 200 OK

2024/01/30 09:39:38.889419 [INFO] Skipping Configure OS
2024/01/30 09:39:38.889431 [INFO] Skipping LockRepo
2024/01/30 09:39:38.889437 [INFO] Skipping GenerateEBBanner
2024/01/30 09:39:38.889443 [INFO] Skipping Install Process Manager
2024/01/30 09:39:38.889448 [INFO] Skipping install syslog
2024/01/30 09:39:38.889453 [INFO] Skipping install cron
2024/01/30 09:39:38.889458 [INFO] Skipping install proxy
2024/01/30 09:39:38.889463 [INFO] Skipping installhealthd
2024/01/30 09:39:38.889468 [INFO] Skipping Install Log Streaming Manager
2024/01/30 09:39:38.889474 [INFO] Skipping install X-Ray
2024/01/30 09:39:38.889491 [INFO] Skipping install Third Party License
2024/01/30 09:39:38.889498 [INFO] Skipping installSqsd
2024/01/30 09:39:38.889504 [INFO] Skipping bootstraphealthd
2024/01/30 09:39:38.889511 [INFO] Skipping Install yum packages
2024/01/30 09:39:38.889525 [INFO] Skipping install docker-compose
2024/01/30 09:39:38.889531 [INFO] Skipping Configure Docker Daemon
2024/01/30 09:39:38.889537 [INFO] Skipping MarkBaked
2024/01/30 09:39:38.889541 [INFO] Skipping TuneSystemSettings
2024/01/30 09:39:38.889544 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 09:39:38.889546 [INFO] Initialize LogRotate files and directories
2024/01/30 09:39:38.905037 [INFO] Skipping BootstrapCFNHup
2024/01/30 09:39:38.905049 [INFO] Executing instruction: StartCFNHup
2024/01/30 09:39:38.905052 [INFO] Start cfn-hup
2024/01/30 09:39:38.905068 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 09:39:38.920237 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 09:39:38.932636 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 09:39:38.932671 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 09:39:38.932675 [INFO] Executing instruction: Start Docker
2024/01/30 09:39:38.932678 [INFO] Starting Docker...
2024/01/30 09:39:38.932760 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 09:39:38.933828 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 09:39:38.934820 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 09:39:39.456452 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 09:39:39.471967 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 09:39:39.472011 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 09:39:39.503205 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 09:39:39.524378 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 09:39:39.536007 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 09:39:39.611296 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 09:39:39.611393 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 09:39:39.977373 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 09:39:40.340715 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 09:39:40.351176 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 09:39:40.679614 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 09:39:40.689021 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 09:39:40.702151 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 09:39:40.712132 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 09:39:42.009115 [INFO] Skipping Setup Docker Options
2024/01/30 09:39:42.009140 [INFO] Skipping MarkBootstrapped
2024/01/30 09:39:42.009144 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 09:39:42.009261 [INFO] Starting SwitchCFNStack
2024/01/30 09:39:42.009266 [INFO] Executing instruction: stopSqsd
2024/01/30 09:39:42.009270 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 09:39:42.009274 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 09:39:42.009278 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 09:39:42.009296 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 09:39:42.515689 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 09:39:42.515776 [INFO] Executing instruction: StagedockerApplication
2024/01/30 09:39:42.515790 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 09:39:42.547691 [INFO] Pruning containers ...
2024/01/30 09:39:42.547734 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 09:39:42.568051 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
3d87b990f170   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             nice_lumiere

2024/01/30 09:39:42.568090 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 09:39:42.595380 [INFO] Deleted Containers:
3d87b990f170dbeefecd78d559a229643e81365ae9b2837bd82e0f0f16531def

Total reclaimed space: 0B

2024/01/30 09:39:42.595403 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 09:39:42.622849 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 09:39:42.623089 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 09:39:42.626707 [INFO] application/json

2024/01/30 09:39:42.626727 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 09:39:42.711145 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 09:39:42.711343 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 09:39:42.713025 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 09:39:42.713051 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 09:39:42.713068 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 09:39:42.713072 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 09:39:42.713078 [INFO] Executing instruction: Generate environment file
2024/01/30 09:39:42.713106 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 09:39:42.713109 [INFO] start build docker app
2024/01/30 09:39:42.713492 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 09:39:42.713495 [INFO] fetching image and ports
2024/01/30 09:39:42.715068 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 09:39:42.715117 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 09:39:42.715127 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 09:39:42.715137 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 09:39:43.579071 [INFO] Login Succeeded

2024/01/30 09:39:43.579203 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 09:39:43.579210 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 09:39:43.579226 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 09:39:43.742383 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 09:39:43.742407 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 09:39:43.742411 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 09:39:43.742484 [INFO] start to build docker image
2024/01/30 09:39:43.742504 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 09:39:44.026161 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 09:39:44.026185 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 09:39:44.026189 [INFO] successfully build docker image
2024/01/30 09:39:44.026191 [INFO] save staging docker image id
2024/01/30 09:39:44.026214 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 09:39:44.047719 [INFO] c176d18fbf65

2024/01/30 09:39:44.047836 [INFO] Executing instruction: configure X-Ray
2024/01/30 09:39:44.047842 [INFO] X-Ray is not enabled.
2024/01/30 09:39:44.047845 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 09:39:44.053118 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 09:39:44.054685 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 09:39:44.067220 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 09:39:44.067249 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 09:39:44.078620 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 09:39:44.088744 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 09:39:44.099916 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 09:39:44.168951 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 09:39:44.493015 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 09:39:44.493209 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 09:39:44.807013 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 09:39:44.819563 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 09:39:45.172675 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 09:39:45.184817 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 09:39:45.194911 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 09:39:45.514290 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 09:39:45.524526 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 09:39:45.820619 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 09:39:45.820812 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 09:39:45.837747 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 09:39:45.846885 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 09:39:45.932072 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 09:39:45.933123 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 09:39:45.934173 [INFO] Executing instruction: configure log streaming
2024/01/30 09:39:45.934183 [INFO] log streaming is not enabled
2024/01/30 09:39:45.934185 [INFO] disable log stream
2024/01/30 09:39:45.934197 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 09:39:45.959506 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 09:39:45.985739 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 09:39:45.985763 [INFO] Checking if logs need forced rotation
2024/01/30 09:39:45.985783 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 09:39:46.494688 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 09:39:47.023929 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 09:39:47.025854 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 09:39:47.398795 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 09:39:47.417058 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 09:39:47.417072 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 09:39:47.417085 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 09:39:47.916676 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 09:39:47.916703 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 09:39:47.916729 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 09:39:47.916732 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 09:39:47.916752 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 09:39:47.916766 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 09:39:47.916769 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 09:39:47.916775 [INFO] Executing instruction: stop X-Ray
2024/01/30 09:39:47.916778 [INFO] stop X-Ray ...
2024/01/30 09:39:47.916789 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 09:39:47.932078 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 09:39:47.932110 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 09:39:47.950761 [INFO] Executing instruction: Run Docker Container
2024/01/30 09:39:47.950795 [INFO] stop currently running containers...
2024/01/30 09:39:47.950807 [INFO] detected old app is not docker compose app
2024/01/30 09:39:47.950821 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 09:39:48.012551 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 09:39:48.034575 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 09:39:48.034605 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 09:39:48.050340 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 09:39:48.050376 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 09:39:48.064461 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 09:39:48.064509 [INFO] stopping current container: 3d87b990f170
2024/01/30 09:39:48.064522 [INFO] Running command /bin/sh -c docker ps | grep -q 3d87b990f170
2024/01/30 09:39:48.084703 [INFO] Running command /bin/sh -c docker ps | grep -q 3d87b990f170
2024/01/30 09:39:48.103400 [INFO] Pruning containers ...
2024/01/30 09:39:48.103424 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 09:39:48.122673 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 09:39:48.122711 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 09:39:48.140904 [INFO] Total reclaimed space: 0B

2024/01/30 09:39:48.140928 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 09:39:48.159032 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 09:39:48.159061 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 09:39:48.176195 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 09:39:48.176217 [INFO] Removing /var/app/current/ if it exists
2024/01/30 09:39:48.176307 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 09:39:48.176323 [INFO] detected new app is not docker compose app
2024/01/30 09:39:48.176373 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 09:39:48.624618 [INFO] 3125f59a9ec90f3ff49c50c19f53cb2e115ace1907e7420145a0b9b6dacc9b22

2024/01/30 09:39:53.628988 [INFO] Running command /bin/sh -c docker ps | grep -q 3125f59a9ec9
2024/01/30 09:39:53.655197 [ERROR] docker container quit unexpectedly on 2024-01-30 09:39:53.655185175 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3125f59a9ec9 failed with error exit status 1
2024/01/30 09:39:53.655225 [INFO] Running command /bin/sh -c docker logs 3125f59a9ec9
2024/01/30 09:39:53.675637 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3125f59a9ec9: Command /bin/sh -c docker ps | grep -q 3125f59a9ec9 failed with error exit status 1 

2024/01/30 09:39:53.675684 [INFO] Executing cleanup logic
2024/01/30 09:39:53.675930 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 10:39:54.678192 [INFO] Starting...
2024/01/30 10:39:54.678238 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 10:39:54.678263 [INFO] reading event message file
2024/01/30 10:39:54.678953 [INFO] Engine received EB command userdata-exec

2024/01/30 10:39:54.685796 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 10:39:55.068050 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 10:39:55.495431 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 10:39:55.495535 [INFO] Engine command: (self-startup)

2024/01/30 10:39:55.495550 [INFO] Downloading EB Application...
2024/01/30 10:39:55.495554 [INFO] Region: eu-west-1
2024/01/30 10:39:55.495565 [INFO] envID: e-8gmkc7rmw6
2024/01/30 10:39:55.495569 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 10:39:55.495572 [INFO] Using manifest file name from command request
2024/01/30 10:39:55.495588 [INFO] Unable to get version manifest file.
2024/01/30 10:39:55.495592 [INFO] Downloading latest manifest available.
2024/01/30 10:39:55.495595 [INFO] Download latest app version manifest
2024/01/30 10:39:55.495778 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 10:39:55.542296 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 10:39:55.542467 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 10:39:55.556147 [INFO] Download successful124bytes downloaded
2024/01/30 10:39:55.556276 [INFO] Trying to read and parse version manifest...
2024/01/30 10:39:55.556347 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 10:39:55.585181 [INFO] Download successful264bytes downloaded
2024/01/30 10:39:55.585534 [INFO] Executing instruction: SyncClock
2024/01/30 10:39:55.585541 [INFO] Starting SyncClock
2024/01/30 10:39:55.585551 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 10:39:55.595977 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 10:39:43 2024
System time     : 0.000003252 seconds fast of NTP time
Last offset     : +0.000003955 seconds
RMS offset      : 0.000003055 seconds
Frequency       : 0.966 ppm fast
Residual freq   : +0.010 ppm
Skew            : 0.099 ppm
Root delay      : 0.000438545 seconds
Root dispersion : 0.000375177 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/30 10:39:55.596004 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 10:39:55.602054 [INFO] 200 OK

2024/01/30 10:39:55.603193 [INFO] Skipping Configure OS
2024/01/30 10:39:55.603283 [INFO] Skipping LockRepo
2024/01/30 10:39:55.603293 [INFO] Skipping GenerateEBBanner
2024/01/30 10:39:55.603299 [INFO] Skipping Install Process Manager
2024/01/30 10:39:55.603562 [INFO] Skipping install syslog
2024/01/30 10:39:55.603569 [INFO] Skipping install cron
2024/01/30 10:39:55.603574 [INFO] Skipping install proxy
2024/01/30 10:39:55.603579 [INFO] Skipping installhealthd
2024/01/30 10:39:55.603655 [INFO] Skipping Install Log Streaming Manager
2024/01/30 10:39:55.603661 [INFO] Skipping install X-Ray
2024/01/30 10:39:55.603667 [INFO] Skipping install Third Party License
2024/01/30 10:39:55.604213 [INFO] Skipping installSqsd
2024/01/30 10:39:55.604244 [INFO] Skipping bootstraphealthd
2024/01/30 10:39:55.604435 [INFO] Skipping Install yum packages
2024/01/30 10:39:55.604441 [INFO] Skipping install docker-compose
2024/01/30 10:39:55.604446 [INFO] Skipping Configure Docker Daemon
2024/01/30 10:39:55.604521 [INFO] Skipping MarkBaked
2024/01/30 10:39:55.604530 [INFO] Skipping TuneSystemSettings
2024/01/30 10:39:55.604534 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 10:39:55.604538 [INFO] Initialize LogRotate files and directories
2024/01/30 10:39:55.619769 [INFO] Skipping BootstrapCFNHup
2024/01/30 10:39:55.619779 [INFO] Executing instruction: StartCFNHup
2024/01/30 10:39:55.619782 [INFO] Start cfn-hup
2024/01/30 10:39:55.619798 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 10:39:55.641604 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 10:39:55.654287 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 10:39:55.654321 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 10:39:55.654325 [INFO] Executing instruction: Start Docker
2024/01/30 10:39:55.654328 [INFO] Starting Docker...
2024/01/30 10:39:55.654402 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 10:39:55.655633 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 10:39:55.656627 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 10:39:56.194127 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 10:39:56.208725 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 10:39:56.208758 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 10:39:56.220134 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 10:39:56.229663 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 10:39:56.239651 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 10:39:56.278400 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 10:39:56.278432 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 10:39:56.585885 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 10:39:56.867731 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 10:39:56.879539 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 10:39:57.216127 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 10:39:57.243937 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 10:39:57.275298 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 10:39:57.285282 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 10:39:58.418512 [INFO] Skipping Setup Docker Options
2024/01/30 10:39:58.418531 [INFO] Skipping MarkBootstrapped
2024/01/30 10:39:58.418535 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 10:39:58.418641 [INFO] Starting SwitchCFNStack
2024/01/30 10:39:58.418646 [INFO] Executing instruction: stopSqsd
2024/01/30 10:39:58.418650 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 10:39:58.418653 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 10:39:58.418657 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 10:39:58.418678 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 10:39:58.886843 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 10:39:58.886899 [INFO] Executing instruction: StagedockerApplication
2024/01/30 10:39:58.886911 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 10:39:58.910299 [INFO] Pruning containers ...
2024/01/30 10:39:58.910330 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 10:39:58.966526 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
3125f59a9ec9   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             busy_cohen

2024/01/30 10:39:58.966808 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 10:39:59.002037 [INFO] Deleted Containers:
3125f59a9ec90f3ff49c50c19f53cb2e115ace1907e7420145a0b9b6dacc9b22

Total reclaimed space: 0B

2024/01/30 10:39:59.002074 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 10:39:59.024512 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 10:39:59.024788 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 10:39:59.029399 [INFO] application/json

2024/01/30 10:39:59.029419 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 10:39:59.110871 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/30 10:39:59.111034 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 10:39:59.112282 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 10:39:59.112313 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 10:39:59.112333 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 10:39:59.112336 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 10:39:59.112340 [INFO] Executing instruction: Generate environment file
2024/01/30 10:39:59.112365 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 10:39:59.112369 [INFO] start build docker app
2024/01/30 10:39:59.113724 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 10:39:59.113731 [INFO] fetching image and ports
2024/01/30 10:39:59.115449 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 10:39:59.115508 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 10:39:59.115519 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 10:39:59.115530 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 10:40:00.406886 [INFO] Login Succeeded

2024/01/30 10:40:00.406904 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 10:40:00.406910 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 10:40:00.406927 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 10:40:00.586897 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 10:40:00.586921 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 10:40:00.586925 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 10:40:00.586928 [INFO] start to build docker image
2024/01/30 10:40:00.586948 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 10:40:00.932305 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 10:40:00.932328 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 10:40:00.932332 [INFO] successfully build docker image
2024/01/30 10:40:00.932334 [INFO] save staging docker image id
2024/01/30 10:40:00.932346 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 10:40:00.966039 [INFO] c176d18fbf65

2024/01/30 10:40:00.966235 [INFO] Executing instruction: configure X-Ray
2024/01/30 10:40:00.966241 [INFO] X-Ray is not enabled.
2024/01/30 10:40:00.966244 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 10:40:00.972143 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 10:40:00.978986 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 10:40:01.009894 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 10:40:01.009942 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 10:40:01.033518 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 10:40:01.042457 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 10:40:01.053384 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 10:40:01.166623 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 10:40:01.714452 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 10:40:01.716060 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 10:40:02.292092 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 10:40:02.318605 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 10:40:02.805962 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 10:40:02.816157 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 10:40:02.826923 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 10:40:03.154361 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 10:40:03.165697 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 10:40:03.515247 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 10:40:03.515284 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 10:40:03.531775 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 10:40:03.542365 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 10:40:03.653063 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 10:40:03.654024 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 10:40:03.655063 [INFO] Executing instruction: configure log streaming
2024/01/30 10:40:03.655076 [INFO] log streaming is not enabled
2024/01/30 10:40:03.655080 [INFO] disable log stream
2024/01/30 10:40:03.655097 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 10:40:03.673116 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 10:40:03.690465 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 10:40:03.690489 [INFO] Checking if logs need forced rotation
2024/01/30 10:40:03.690510 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 10:40:04.344343 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 10:40:04.883376 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 10:40:04.885408 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 10:40:05.409143 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 10:40:05.427739 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 10:40:05.427754 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 10:40:05.427766 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 10:40:05.897640 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 10:40:05.897675 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 10:40:05.897701 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 10:40:05.897705 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 10:40:05.897728 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 10:40:05.897747 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 10:40:05.897750 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 10:40:05.897755 [INFO] Executing instruction: stop X-Ray
2024/01/30 10:40:05.897759 [INFO] stop X-Ray ...
2024/01/30 10:40:05.897775 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 10:40:05.924049 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 10:40:05.924084 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 10:40:05.948337 [INFO] Executing instruction: Run Docker Container
2024/01/30 10:40:05.948372 [INFO] stop currently running containers...
2024/01/30 10:40:05.948383 [INFO] detected old app is not docker compose app
2024/01/30 10:40:05.948399 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 10:40:06.012402 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 10:40:06.036264 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 10:40:06.036310 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 10:40:06.081574 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 10:40:06.081610 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 10:40:06.105543 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 10:40:06.105595 [INFO] stopping current container: 3125f59a9ec9
2024/01/30 10:40:06.105610 [INFO] Running command /bin/sh -c docker ps | grep -q 3125f59a9ec9
2024/01/30 10:40:06.126207 [INFO] Running command /bin/sh -c docker ps | grep -q 3125f59a9ec9
2024/01/30 10:40:06.147907 [INFO] Pruning containers ...
2024/01/30 10:40:06.147931 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 10:40:06.168486 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 10:40:06.168522 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 10:40:06.186915 [INFO] Total reclaimed space: 0B

2024/01/30 10:40:06.186947 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 10:40:06.205523 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 10:40:06.205554 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 10:40:06.224924 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 10:40:06.224945 [INFO] Removing /var/app/current/ if it exists
2024/01/30 10:40:06.225044 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 10:40:06.225061 [INFO] detected new app is not docker compose app
2024/01/30 10:40:06.225108 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 10:40:06.681967 [INFO] d951c1e814aa6d93cdee2dfadf2f0fc46f8a21c983c14ab9df0eff6f6a172fd2

2024/01/30 10:40:11.682349 [INFO] Running command /bin/sh -c docker ps | grep -q d951c1e814aa
2024/01/30 10:40:11.705670 [ERROR] docker container quit unexpectedly on 2024-01-30 10:40:11.705652941 +0000 UTC: Command /bin/sh -c docker ps | grep -q d951c1e814aa failed with error exit status 1
2024/01/30 10:40:11.705697 [INFO] Running command /bin/sh -c docker logs d951c1e814aa
2024/01/30 10:40:11.735348 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container d951c1e814aa: Command /bin/sh -c docker ps | grep -q d951c1e814aa failed with error exit status 1 

2024/01/30 10:40:11.735359 [INFO] Executing cleanup logic
2024/01/30 10:40:11.735652 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 11:40:12.661463 [INFO] Starting...
2024/01/30 11:40:12.661507 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 11:40:12.661531 [INFO] reading event message file
2024/01/30 11:40:12.662264 [INFO] Engine received EB command userdata-exec

2024/01/30 11:40:12.668994 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 11:40:13.124811 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 11:40:13.573420 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 11:40:13.573541 [INFO] Engine command: (self-startup)

2024/01/30 11:40:13.573561 [INFO] Downloading EB Application...
2024/01/30 11:40:13.573565 [INFO] Region: eu-west-1
2024/01/30 11:40:13.573568 [INFO] envID: e-8gmkc7rmw6
2024/01/30 11:40:13.573572 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 11:40:13.573576 [INFO] Using manifest file name from command request
2024/01/30 11:40:13.573592 [INFO] Unable to get version manifest file.
2024/01/30 11:40:13.573595 [INFO] Downloading latest manifest available.
2024/01/30 11:40:13.573598 [INFO] Download latest app version manifest
2024/01/30 11:40:13.573878 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 11:40:13.616114 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 11:40:13.616296 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 11:40:13.627457 [INFO] Download successful124bytes downloaded
2024/01/30 11:40:13.627599 [INFO] Trying to read and parse version manifest...
2024/01/30 11:40:13.627685 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 11:40:13.691008 [INFO] Download successful264bytes downloaded
2024/01/30 11:40:13.691454 [INFO] Executing instruction: SyncClock
2024/01/30 11:40:13.691465 [INFO] Starting SyncClock
2024/01/30 11:40:13.691480 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 11:40:13.700126 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 11:40:09 2024
System time     : 0.000000479 seconds slow of NTP time
Last offset     : -0.000000168 seconds
RMS offset      : 0.000005187 seconds
Frequency       : 0.398 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.057 ppm
Root delay      : 0.000431073 seconds
Root dispersion : 0.000311592 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 11:40:13.700150 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 11:40:13.705562 [INFO] 200 OK

2024/01/30 11:40:13.705723 [INFO] Skipping Configure OS
2024/01/30 11:40:13.705732 [INFO] Skipping LockRepo
2024/01/30 11:40:13.705737 [INFO] Skipping GenerateEBBanner
2024/01/30 11:40:13.705742 [INFO] Skipping Install Process Manager
2024/01/30 11:40:13.705746 [INFO] Skipping install syslog
2024/01/30 11:40:13.705750 [INFO] Skipping install cron
2024/01/30 11:40:13.705754 [INFO] Skipping install proxy
2024/01/30 11:40:13.705758 [INFO] Skipping installhealthd
2024/01/30 11:40:13.705762 [INFO] Skipping Install Log Streaming Manager
2024/01/30 11:40:13.705766 [INFO] Skipping install X-Ray
2024/01/30 11:40:13.705770 [INFO] Skipping install Third Party License
2024/01/30 11:40:13.705775 [INFO] Skipping installSqsd
2024/01/30 11:40:13.705778 [INFO] Skipping bootstraphealthd
2024/01/30 11:40:13.705782 [INFO] Skipping Install yum packages
2024/01/30 11:40:13.705785 [INFO] Skipping install docker-compose
2024/01/30 11:40:13.705790 [INFO] Skipping Configure Docker Daemon
2024/01/30 11:40:13.705793 [INFO] Skipping MarkBaked
2024/01/30 11:40:13.705797 [INFO] Skipping TuneSystemSettings
2024/01/30 11:40:13.705807 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 11:40:13.705811 [INFO] Initialize LogRotate files and directories
2024/01/30 11:40:13.720479 [INFO] Skipping BootstrapCFNHup
2024/01/30 11:40:13.720489 [INFO] Executing instruction: StartCFNHup
2024/01/30 11:40:13.720492 [INFO] Start cfn-hup
2024/01/30 11:40:13.720511 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 11:40:13.740431 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 11:40:13.755784 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 11:40:13.755819 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 11:40:13.755823 [INFO] Executing instruction: Start Docker
2024/01/30 11:40:13.755827 [INFO] Starting Docker...
2024/01/30 11:40:13.755912 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 11:40:13.756935 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 11:40:13.758953 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 11:40:14.182454 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 11:40:14.197162 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 11:40:14.197195 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 11:40:14.208642 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 11:40:14.217473 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 11:40:14.227962 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 11:40:14.323232 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 11:40:14.323279 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 11:40:14.671253 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 11:40:14.978839 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 11:40:14.990284 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 11:40:15.390612 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 11:40:15.403429 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 11:40:15.430799 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 11:40:15.449401 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 11:40:16.669898 [INFO] Skipping Setup Docker Options
2024/01/30 11:40:16.669920 [INFO] Skipping MarkBootstrapped
2024/01/30 11:40:16.669924 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 11:40:16.671757 [INFO] Starting SwitchCFNStack
2024/01/30 11:40:16.671777 [INFO] Executing instruction: stopSqsd
2024/01/30 11:40:16.671781 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 11:40:16.671785 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 11:40:16.671792 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 11:40:16.671807 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 11:40:17.144196 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 11:40:17.144275 [INFO] Executing instruction: StagedockerApplication
2024/01/30 11:40:17.144292 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 11:40:17.164673 [INFO] Pruning containers ...
2024/01/30 11:40:17.164706 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 11:40:17.183478 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
d951c1e814aa   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             priceless_goodall

2024/01/30 11:40:17.183514 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 11:40:17.212007 [INFO] Deleted Containers:
d951c1e814aa6d93cdee2dfadf2f0fc46f8a21c983c14ab9df0eff6f6a172fd2

Total reclaimed space: 0B

2024/01/30 11:40:17.212033 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 11:40:17.233108 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 11:40:17.242851 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 11:40:17.249439 [INFO] application/json

2024/01/30 11:40:17.249464 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 11:40:17.342675 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 11:40:17.342848 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 11:40:17.348640 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 11:40:17.348679 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 11:40:17.348697 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 11:40:17.348700 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 11:40:17.348704 [INFO] Executing instruction: Generate environment file
2024/01/30 11:40:17.348730 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 11:40:17.348733 [INFO] start build docker app
2024/01/30 11:40:17.349150 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 11:40:17.349165 [INFO] fetching image and ports
2024/01/30 11:40:17.351312 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 11:40:17.351448 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 11:40:17.351461 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 11:40:17.351470 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 11:40:18.278715 [INFO] Login Succeeded

2024/01/30 11:40:18.278763 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 11:40:18.278770 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 11:40:18.278786 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 11:40:18.439864 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 11:40:18.439890 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 11:40:18.439895 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 11:40:18.439908 [INFO] start to build docker image
2024/01/30 11:40:18.439923 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 11:40:18.771721 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 11:40:18.771748 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 11:40:18.771754 [INFO] successfully build docker image
2024/01/30 11:40:18.771756 [INFO] save staging docker image id
2024/01/30 11:40:18.771771 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 11:40:18.799288 [INFO] c176d18fbf65

2024/01/30 11:40:18.799411 [INFO] Executing instruction: configure X-Ray
2024/01/30 11:40:18.799418 [INFO] X-Ray is not enabled.
2024/01/30 11:40:18.799420 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 11:40:18.805500 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 11:40:18.807188 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 11:40:18.822286 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 11:40:18.822318 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 11:40:18.836005 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 11:40:18.847756 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 11:40:18.860707 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 11:40:18.951954 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 11:40:19.298980 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 11:40:19.299161 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 11:40:19.624801 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 11:40:19.638121 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 11:40:19.993854 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 11:40:20.003620 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 11:40:20.015331 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 11:40:20.329470 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 11:40:20.339366 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 11:40:20.646674 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 11:40:20.646702 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 11:40:20.659542 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 11:40:20.668661 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 11:40:20.756317 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 11:40:20.757285 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 11:40:20.758183 [INFO] Executing instruction: configure log streaming
2024/01/30 11:40:20.758199 [INFO] log streaming is not enabled
2024/01/30 11:40:20.758203 [INFO] disable log stream
2024/01/30 11:40:20.758218 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 11:40:20.780479 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 11:40:20.800404 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 11:40:20.800429 [INFO] Checking if logs need forced rotation
2024/01/30 11:40:20.800450 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 11:40:21.420774 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 11:40:21.852531 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 11:40:21.854430 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 11:40:22.424125 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 11:40:22.443097 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 11:40:22.443112 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 11:40:22.443127 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 11:40:22.831204 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 11:40:22.831236 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 11:40:22.831294 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 11:40:22.831298 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 11:40:22.831321 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 11:40:22.831427 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 11:40:22.831518 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 11:40:22.831526 [INFO] Executing instruction: stop X-Ray
2024/01/30 11:40:22.831531 [INFO] stop X-Ray ...
2024/01/30 11:40:22.831545 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 11:40:22.851171 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 11:40:22.851200 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 11:40:22.867874 [INFO] Executing instruction: Run Docker Container
2024/01/30 11:40:22.867902 [INFO] stop currently running containers...
2024/01/30 11:40:22.867911 [INFO] detected old app is not docker compose app
2024/01/30 11:40:22.867923 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 11:40:22.912612 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 11:40:22.929509 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 11:40:22.929573 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 11:40:22.951023 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 11:40:22.951054 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 11:40:22.967990 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 11:40:22.968046 [INFO] stopping current container: d951c1e814aa
2024/01/30 11:40:22.968059 [INFO] Running command /bin/sh -c docker ps | grep -q d951c1e814aa
2024/01/30 11:40:22.989993 [INFO] Running command /bin/sh -c docker ps | grep -q d951c1e814aa
2024/01/30 11:40:23.019376 [INFO] Pruning containers ...
2024/01/30 11:40:23.019399 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 11:40:23.046031 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 11:40:23.046059 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 11:40:23.072454 [INFO] Total reclaimed space: 0B

2024/01/30 11:40:23.072480 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 11:40:23.092899 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 11:40:23.093051 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 11:40:23.129014 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 11:40:23.129577 [INFO] Removing /var/app/current/ if it exists
2024/01/30 11:40:23.130538 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 11:40:23.130564 [INFO] detected new app is not docker compose app
2024/01/30 11:40:23.130981 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 11:40:23.625433 [INFO] 5bc0667e8bd3b440c074519c346158f0d00276ea6a8b0781389ebf76e09a5316

2024/01/30 11:40:28.625917 [INFO] Running command /bin/sh -c docker ps | grep -q 5bc0667e8bd3
2024/01/30 11:40:28.653064 [ERROR] docker container quit unexpectedly on 2024-01-30 11:40:28.653045766 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5bc0667e8bd3 failed with error exit status 1
2024/01/30 11:40:28.653093 [INFO] Running command /bin/sh -c docker logs 5bc0667e8bd3
2024/01/30 11:40:28.677212 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5bc0667e8bd3: Command /bin/sh -c docker ps | grep -q 5bc0667e8bd3 failed with error exit status 1 

2024/01/30 11:40:28.677224 [INFO] Executing cleanup logic
2024/01/30 11:40:28.677472 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 12:40:29.629543 [INFO] Starting...
2024/01/30 12:40:29.629590 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 12:40:29.629624 [INFO] reading event message file
2024/01/30 12:40:29.630439 [INFO] Engine received EB command userdata-exec

2024/01/30 12:40:29.635864 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 12:40:30.034076 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 12:40:30.467653 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 12:40:30.467736 [INFO] Engine command: (self-startup)

2024/01/30 12:40:30.467741 [INFO] Downloading EB Application...
2024/01/30 12:40:30.467743 [INFO] Region: eu-west-1
2024/01/30 12:40:30.467745 [INFO] envID: e-8gmkc7rmw6
2024/01/30 12:40:30.467748 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 12:40:30.467750 [INFO] Using manifest file name from command request
2024/01/30 12:40:30.467762 [INFO] Unable to get version manifest file.
2024/01/30 12:40:30.467764 [INFO] Downloading latest manifest available.
2024/01/30 12:40:30.467767 [INFO] Download latest app version manifest
2024/01/30 12:40:30.467891 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 12:40:30.511723 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 12:40:30.512049 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 12:40:30.524945 [INFO] Download successful124bytes downloaded
2024/01/30 12:40:30.525073 [INFO] Trying to read and parse version manifest...
2024/01/30 12:40:30.525231 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 12:40:30.548179 [INFO] Download successful264bytes downloaded
2024/01/30 12:40:30.548608 [INFO] Executing instruction: SyncClock
2024/01/30 12:40:30.548615 [INFO] Starting SyncClock
2024/01/30 12:40:30.548631 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 12:40:30.555023 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 12:40:14 2024
System time     : 0.000000606 seconds fast of NTP time
Last offset     : -0.000000742 seconds
RMS offset      : 0.000002403 seconds
Frequency       : 0.570 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.044 ppm
Root delay      : 0.000410297 seconds
Root dispersion : 0.000437835 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 12:40:30.555044 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 12:40:30.559800 [INFO] 200 OK

2024/01/30 12:40:30.559886 [INFO] Skipping Configure OS
2024/01/30 12:40:30.559891 [INFO] Skipping LockRepo
2024/01/30 12:40:30.559895 [INFO] Skipping GenerateEBBanner
2024/01/30 12:40:30.559899 [INFO] Skipping Install Process Manager
2024/01/30 12:40:30.559903 [INFO] Skipping install syslog
2024/01/30 12:40:30.559907 [INFO] Skipping install cron
2024/01/30 12:40:30.559910 [INFO] Skipping install proxy
2024/01/30 12:40:30.559914 [INFO] Skipping installhealthd
2024/01/30 12:40:30.559918 [INFO] Skipping Install Log Streaming Manager
2024/01/30 12:40:30.559922 [INFO] Skipping install X-Ray
2024/01/30 12:40:30.559926 [INFO] Skipping install Third Party License
2024/01/30 12:40:30.559931 [INFO] Skipping installSqsd
2024/01/30 12:40:30.559934 [INFO] Skipping bootstraphealthd
2024/01/30 12:40:30.559938 [INFO] Skipping Install yum packages
2024/01/30 12:40:30.559942 [INFO] Skipping install docker-compose
2024/01/30 12:40:30.559948 [INFO] Skipping Configure Docker Daemon
2024/01/30 12:40:30.559952 [INFO] Skipping MarkBaked
2024/01/30 12:40:30.559957 [INFO] Skipping TuneSystemSettings
2024/01/30 12:40:30.559959 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 12:40:30.559962 [INFO] Initialize LogRotate files and directories
2024/01/30 12:40:30.573845 [INFO] Skipping BootstrapCFNHup
2024/01/30 12:40:30.573858 [INFO] Executing instruction: StartCFNHup
2024/01/30 12:40:30.573861 [INFO] Start cfn-hup
2024/01/30 12:40:30.573877 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 12:40:30.588929 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 12:40:30.599071 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 12:40:30.599104 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 12:40:30.599108 [INFO] Executing instruction: Start Docker
2024/01/30 12:40:30.599111 [INFO] Starting Docker...
2024/01/30 12:40:30.599335 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 12:40:30.600310 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 12:40:30.601368 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 12:40:30.941729 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 12:40:30.958373 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 12:40:30.958595 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 12:40:30.969575 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 12:40:30.978030 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 12:40:30.989083 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 12:40:31.043063 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 12:40:31.043152 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 12:40:31.352442 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 12:40:31.660263 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 12:40:31.673865 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 12:40:31.978188 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 12:40:31.988038 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 12:40:32.005096 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 12:40:32.017298 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 12:40:33.147383 [INFO] Skipping Setup Docker Options
2024/01/30 12:40:33.147414 [INFO] Skipping MarkBootstrapped
2024/01/30 12:40:33.147418 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 12:40:33.147535 [INFO] Starting SwitchCFNStack
2024/01/30 12:40:33.147540 [INFO] Executing instruction: stopSqsd
2024/01/30 12:40:33.147543 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 12:40:33.147546 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 12:40:33.147551 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 12:40:33.147568 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 12:40:33.590849 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 12:40:33.590927 [INFO] Executing instruction: StagedockerApplication
2024/01/30 12:40:33.590940 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 12:40:33.609840 [INFO] Pruning containers ...
2024/01/30 12:40:33.609868 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 12:40:33.628563 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
5bc0667e8bd3   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             silly_neumann

2024/01/30 12:40:33.628594 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 12:40:33.652552 [INFO] Deleted Containers:
5bc0667e8bd3b440c074519c346158f0d00276ea6a8b0781389ebf76e09a5316

Total reclaimed space: 0B

2024/01/30 12:40:33.652575 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 12:40:33.672141 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 12:40:33.672374 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 12:40:33.675241 [INFO] application/json

2024/01/30 12:40:33.675277 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 12:40:33.758197 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 12:40:33.758372 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 12:40:33.759828 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 12:40:33.759853 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 12:40:33.759870 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 12:40:33.759873 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 12:40:33.759877 [INFO] Executing instruction: Generate environment file
2024/01/30 12:40:33.759902 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 12:40:33.759906 [INFO] start build docker app
2024/01/30 12:40:33.760323 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 12:40:33.760333 [INFO] fetching image and ports
2024/01/30 12:40:33.762605 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 12:40:33.762662 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 12:40:33.762670 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 12:40:33.762683 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 12:40:34.683403 [INFO] Login Succeeded

2024/01/30 12:40:34.683421 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 12:40:34.683427 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 12:40:34.683443 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 12:40:34.825126 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 12:40:34.825149 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 12:40:34.825160 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 12:40:34.825164 [INFO] start to build docker image
2024/01/30 12:40:34.825182 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 12:40:35.157287 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 12:40:35.157306 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 12:40:35.157310 [INFO] successfully build docker image
2024/01/30 12:40:35.157312 [INFO] save staging docker image id
2024/01/30 12:40:35.157332 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 12:40:35.185296 [INFO] c176d18fbf65

2024/01/30 12:40:35.185498 [INFO] Executing instruction: configure X-Ray
2024/01/30 12:40:35.185505 [INFO] X-Ray is not enabled.
2024/01/30 12:40:35.185508 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 12:40:35.191525 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 12:40:35.193376 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 12:40:35.206015 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 12:40:35.206046 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 12:40:35.218096 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 12:40:35.227179 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 12:40:35.236525 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 12:40:35.309227 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 12:40:35.667711 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 12:40:35.668131 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 12:40:36.000632 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 12:40:36.012975 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 12:40:36.280535 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 12:40:36.290189 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 12:40:36.299109 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 12:40:36.692881 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 12:40:36.703446 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 12:40:37.048169 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 12:40:37.048241 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 12:40:37.062857 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 12:40:37.071889 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 12:40:37.142564 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 12:40:37.143446 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 12:40:37.144416 [INFO] Executing instruction: configure log streaming
2024/01/30 12:40:37.144425 [INFO] log streaming is not enabled
2024/01/30 12:40:37.144428 [INFO] disable log stream
2024/01/30 12:40:37.144440 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 12:40:37.168257 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 12:40:37.189721 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 12:40:37.189758 [INFO] Checking if logs need forced rotation
2024/01/30 12:40:37.189783 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 12:40:37.743490 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 12:40:38.280804 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 12:40:38.282492 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 12:40:38.652610 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 12:40:38.671979 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 12:40:38.672000 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 12:40:38.672015 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 12:40:39.100818 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 12:40:39.100842 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 12:40:39.100866 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 12:40:39.100869 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 12:40:39.100895 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 12:40:39.100906 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 12:40:39.100908 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 12:40:39.100913 [INFO] Executing instruction: stop X-Ray
2024/01/30 12:40:39.100915 [INFO] stop X-Ray ...
2024/01/30 12:40:39.100926 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 12:40:39.113964 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 12:40:39.113996 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 12:40:39.129086 [INFO] Executing instruction: Run Docker Container
2024/01/30 12:40:39.129118 [INFO] stop currently running containers...
2024/01/30 12:40:39.129130 [INFO] detected old app is not docker compose app
2024/01/30 12:40:39.129144 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 12:40:39.152643 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 12:40:39.169607 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 12:40:39.169671 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 12:40:39.186684 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 12:40:39.186718 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 12:40:39.201773 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 12:40:39.201856 [INFO] stopping current container: 5bc0667e8bd3
2024/01/30 12:40:39.201868 [INFO] Running command /bin/sh -c docker ps | grep -q 5bc0667e8bd3
2024/01/30 12:40:39.223133 [INFO] Running command /bin/sh -c docker ps | grep -q 5bc0667e8bd3
2024/01/30 12:40:39.249128 [INFO] Pruning containers ...
2024/01/30 12:40:39.249151 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 12:40:39.297291 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 12:40:39.297325 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 12:40:39.314932 [INFO] Total reclaimed space: 0B

2024/01/30 12:40:39.314956 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 12:40:39.334193 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 12:40:39.334226 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 12:40:39.355247 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 12:40:39.355307 [INFO] Removing /var/app/current/ if it exists
2024/01/30 12:40:39.355404 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 12:40:39.355421 [INFO] detected new app is not docker compose app
2024/01/30 12:40:39.355468 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 12:40:39.763339 [INFO] bfd04c77fd34cf5e806cc4ec544e7bd64d2b1e8d8d4477d05fbe5f990a477d88

2024/01/30 12:40:44.767655 [INFO] Running command /bin/sh -c docker ps | grep -q bfd04c77fd34
2024/01/30 12:40:44.787797 [ERROR] docker container quit unexpectedly on 2024-01-30 12:40:44.787778773 +0000 UTC: Command /bin/sh -c docker ps | grep -q bfd04c77fd34 failed with error exit status 1
2024/01/30 12:40:44.787825 [INFO] Running command /bin/sh -c docker logs bfd04c77fd34
2024/01/30 12:40:44.807154 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container bfd04c77fd34: Command /bin/sh -c docker ps | grep -q bfd04c77fd34 failed with error exit status 1 

2024/01/30 12:40:44.807172 [INFO] Executing cleanup logic
2024/01/30 12:40:44.807454 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 13:40:45.956524 [INFO] Starting...
2024/01/30 13:40:45.956571 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 13:40:45.956596 [INFO] reading event message file
2024/01/30 13:40:45.957307 [INFO] Engine received EB command userdata-exec

2024/01/30 13:40:45.964334 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 13:40:46.332860 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 13:40:46.769881 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 13:40:46.769999 [INFO] Engine command: (self-startup)

2024/01/30 13:40:46.770011 [INFO] Downloading EB Application...
2024/01/30 13:40:46.770014 [INFO] Region: eu-west-1
2024/01/30 13:40:46.770016 [INFO] envID: e-8gmkc7rmw6
2024/01/30 13:40:46.770019 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 13:40:46.770021 [INFO] Using manifest file name from command request
2024/01/30 13:40:46.770036 [INFO] Unable to get version manifest file.
2024/01/30 13:40:46.770038 [INFO] Downloading latest manifest available.
2024/01/30 13:40:46.770041 [INFO] Download latest app version manifest
2024/01/30 13:40:46.770145 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 13:40:46.809976 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 13:40:46.810304 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 13:40:46.827646 [INFO] Download successful124bytes downloaded
2024/01/30 13:40:46.827842 [INFO] Trying to read and parse version manifest...
2024/01/30 13:40:46.827979 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 13:40:46.855015 [INFO] Download successful264bytes downloaded
2024/01/30 13:40:46.855375 [INFO] Executing instruction: SyncClock
2024/01/30 13:40:46.855380 [INFO] Starting SyncClock
2024/01/30 13:40:46.855390 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 13:40:46.860731 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 13:40:38 2024
System time     : 0.000000508 seconds slow of NTP time
Last offset     : -0.000000371 seconds
RMS offset      : 0.000004457 seconds
Frequency       : 0.681 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.051 ppm
Root delay      : 0.000411506 seconds
Root dispersion : 0.000418467 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 13:40:46.860750 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 13:40:46.864471 [INFO] 200 OK

2024/01/30 13:40:46.864591 [INFO] Skipping Configure OS
2024/01/30 13:40:46.864599 [INFO] Skipping LockRepo
2024/01/30 13:40:46.864604 [INFO] Skipping GenerateEBBanner
2024/01/30 13:40:46.864610 [INFO] Skipping Install Process Manager
2024/01/30 13:40:46.864616 [INFO] Skipping install syslog
2024/01/30 13:40:46.864621 [INFO] Skipping install cron
2024/01/30 13:40:46.864627 [INFO] Skipping install proxy
2024/01/30 13:40:46.864633 [INFO] Skipping installhealthd
2024/01/30 13:40:46.864638 [INFO] Skipping Install Log Streaming Manager
2024/01/30 13:40:46.864643 [INFO] Skipping install X-Ray
2024/01/30 13:40:46.864649 [INFO] Skipping install Third Party License
2024/01/30 13:40:46.864656 [INFO] Skipping installSqsd
2024/01/30 13:40:46.864662 [INFO] Skipping bootstraphealthd
2024/01/30 13:40:46.864668 [INFO] Skipping Install yum packages
2024/01/30 13:40:46.864672 [INFO] Skipping install docker-compose
2024/01/30 13:40:46.864676 [INFO] Skipping Configure Docker Daemon
2024/01/30 13:40:46.864686 [INFO] Skipping MarkBaked
2024/01/30 13:40:46.864691 [INFO] Skipping TuneSystemSettings
2024/01/30 13:40:46.864694 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 13:40:46.864697 [INFO] Initialize LogRotate files and directories
2024/01/30 13:40:46.879305 [INFO] Skipping BootstrapCFNHup
2024/01/30 13:40:46.879317 [INFO] Executing instruction: StartCFNHup
2024/01/30 13:40:46.879320 [INFO] Start cfn-hup
2024/01/30 13:40:46.879341 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 13:40:46.898669 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 13:40:46.908498 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 13:40:46.908535 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 13:40:46.908545 [INFO] Executing instruction: Start Docker
2024/01/30 13:40:46.908548 [INFO] Starting Docker...
2024/01/30 13:40:46.908633 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 13:40:46.909977 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 13:40:46.911119 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 13:40:47.400552 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 13:40:47.414794 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 13:40:47.414818 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 13:40:47.426062 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 13:40:47.434325 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 13:40:47.444832 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 13:40:47.476665 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 13:40:47.476705 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 13:40:47.838811 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 13:40:48.189951 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 13:40:48.202691 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 13:40:48.582101 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 13:40:48.591557 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 13:40:48.607451 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 13:40:48.616124 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 13:40:49.857451 [INFO] Skipping Setup Docker Options
2024/01/30 13:40:49.857479 [INFO] Skipping MarkBootstrapped
2024/01/30 13:40:49.857482 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 13:40:49.857597 [INFO] Starting SwitchCFNStack
2024/01/30 13:40:49.857603 [INFO] Executing instruction: stopSqsd
2024/01/30 13:40:49.857607 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 13:40:49.857610 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 13:40:49.857614 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 13:40:49.857630 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 13:40:50.356734 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 13:40:50.356756 [INFO] Executing instruction: StagedockerApplication
2024/01/30 13:40:50.356770 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 13:40:50.376168 [INFO] Pruning containers ...
2024/01/30 13:40:50.376203 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 13:40:50.401201 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
bfd04c77fd34   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             beautiful_payne

2024/01/30 13:40:50.401230 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 13:40:50.425920 [INFO] Deleted Containers:
bfd04c77fd34cf5e806cc4ec544e7bd64d2b1e8d8d4477d05fbe5f990a477d88

Total reclaimed space: 0B

2024/01/30 13:40:50.425948 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 13:40:50.444217 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 13:40:50.444463 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 13:40:50.447322 [INFO] application/json

2024/01/30 13:40:50.447445 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 13:40:50.525981 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 13:40:50.526273 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 13:40:50.527474 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 13:40:50.527500 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 13:40:50.527514 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 13:40:50.527517 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 13:40:50.527521 [INFO] Executing instruction: Generate environment file
2024/01/30 13:40:50.527546 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 13:40:50.527549 [INFO] start build docker app
2024/01/30 13:40:50.527958 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 13:40:50.527962 [INFO] fetching image and ports
2024/01/30 13:40:50.529494 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 13:40:50.529552 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 13:40:50.529560 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 13:40:50.529569 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 13:40:51.549644 [INFO] Login Succeeded

2024/01/30 13:40:51.549662 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 13:40:51.549668 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 13:40:51.549684 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 13:40:51.724432 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 13:40:51.724456 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 13:40:51.724460 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 13:40:51.724468 [INFO] start to build docker image
2024/01/30 13:40:51.724482 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 13:40:51.992716 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 13:40:51.992734 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 13:40:51.992738 [INFO] successfully build docker image
2024/01/30 13:40:51.992740 [INFO] save staging docker image id
2024/01/30 13:40:51.992753 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 13:40:52.022061 [INFO] c176d18fbf65

2024/01/30 13:40:52.022208 [INFO] Executing instruction: configure X-Ray
2024/01/30 13:40:52.022214 [INFO] X-Ray is not enabled.
2024/01/30 13:40:52.022219 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 13:40:52.027918 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 13:40:52.029773 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 13:40:52.051227 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 13:40:52.051273 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 13:40:52.062282 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 13:40:52.071673 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 13:40:52.081793 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 13:40:52.138813 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 13:40:52.502560 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 13:40:52.502751 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 13:40:52.933962 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 13:40:52.947311 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 13:40:53.269597 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 13:40:53.287906 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 13:40:53.304172 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 13:40:53.626990 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 13:40:53.641547 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 13:40:53.979078 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 13:40:53.979112 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 13:40:53.992163 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 13:40:54.004460 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 13:40:54.103546 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 13:40:54.104541 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 13:40:54.105544 [INFO] Executing instruction: configure log streaming
2024/01/30 13:40:54.105555 [INFO] log streaming is not enabled
2024/01/30 13:40:54.105559 [INFO] disable log stream
2024/01/30 13:40:54.105574 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 13:40:54.127443 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 13:40:54.150126 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 13:40:54.150153 [INFO] Checking if logs need forced rotation
2024/01/30 13:40:54.150176 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 13:40:54.746241 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 13:40:55.305764 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 13:40:55.308211 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 13:40:55.379483 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 13:40:55.401839 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 13:40:55.401867 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 13:40:55.401882 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 13:40:55.762530 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 13:40:55.762553 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 13:40:55.762577 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 13:40:55.762580 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 13:40:55.762601 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 13:40:55.762611 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 13:40:55.762617 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 13:40:55.762622 [INFO] Executing instruction: stop X-Ray
2024/01/30 13:40:55.762624 [INFO] stop X-Ray ...
2024/01/30 13:40:55.762634 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 13:40:55.793417 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 13:40:55.793451 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 13:40:55.810671 [INFO] Executing instruction: Run Docker Container
2024/01/30 13:40:55.810702 [INFO] stop currently running containers...
2024/01/30 13:40:55.810711 [INFO] detected old app is not docker compose app
2024/01/30 13:40:55.810723 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 13:40:55.842976 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 13:40:55.859424 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 13:40:55.859455 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 13:40:55.873756 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 13:40:55.873788 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 13:40:55.888726 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 13:40:55.888781 [INFO] stopping current container: bfd04c77fd34
2024/01/30 13:40:55.888793 [INFO] Running command /bin/sh -c docker ps | grep -q bfd04c77fd34
2024/01/30 13:40:55.909090 [INFO] Running command /bin/sh -c docker ps | grep -q bfd04c77fd34
2024/01/30 13:40:55.933111 [INFO] Pruning containers ...
2024/01/30 13:40:55.933135 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 13:40:55.971093 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 13:40:55.971126 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 13:40:56.002502 [INFO] Total reclaimed space: 0B

2024/01/30 13:40:56.002532 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 13:40:56.027832 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 13:40:56.027866 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 13:40:56.047886 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 13:40:56.047907 [INFO] Removing /var/app/current/ if it exists
2024/01/30 13:40:56.047997 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 13:40:56.048014 [INFO] detected new app is not docker compose app
2024/01/30 13:40:56.048061 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 13:40:56.441897 [INFO] c38277fa59ee8cc5d14b96f52e9e0aa477b9cab4654d8f2f56966166362048c4

2024/01/30 13:41:01.442513 [INFO] Running command /bin/sh -c docker ps | grep -q c38277fa59ee
2024/01/30 13:41:01.483064 [ERROR] docker container quit unexpectedly on 2024-01-30 13:41:01.483049546 +0000 UTC: Command /bin/sh -c docker ps | grep -q c38277fa59ee failed with error exit status 1
2024/01/30 13:41:01.483095 [INFO] Running command /bin/sh -c docker logs c38277fa59ee
2024/01/30 13:41:01.533417 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c38277fa59ee: Command /bin/sh -c docker ps | grep -q c38277fa59ee failed with error exit status 1 

2024/01/30 13:41:01.533428 [INFO] Executing cleanup logic
2024/01/30 13:41:01.533972 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 14:41:03.073757 [INFO] Starting...
2024/01/30 14:41:03.073799 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 14:41:03.073823 [INFO] reading event message file
2024/01/30 14:41:03.075636 [INFO] Engine received EB command userdata-exec

2024/01/30 14:41:03.082914 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 14:41:03.605155 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 14:41:04.083094 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 14:41:04.083198 [INFO] Engine command: (self-startup)

2024/01/30 14:41:04.083207 [INFO] Downloading EB Application...
2024/01/30 14:41:04.083210 [INFO] Region: eu-west-1
2024/01/30 14:41:04.083286 [INFO] envID: e-8gmkc7rmw6
2024/01/30 14:41:04.083290 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 14:41:04.083293 [INFO] Using manifest file name from command request
2024/01/30 14:41:04.083308 [INFO] Unable to get version manifest file.
2024/01/30 14:41:04.083311 [INFO] Downloading latest manifest available.
2024/01/30 14:41:04.083313 [INFO] Download latest app version manifest
2024/01/30 14:41:04.083422 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 14:41:04.127360 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 14:41:04.127569 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 14:41:04.138300 [INFO] Download successful124bytes downloaded
2024/01/30 14:41:04.138452 [INFO] Trying to read and parse version manifest...
2024/01/30 14:41:04.138530 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 14:41:04.159984 [INFO] Download successful264bytes downloaded
2024/01/30 14:41:04.160438 [INFO] Executing instruction: SyncClock
2024/01/30 14:41:04.160444 [INFO] Starting SyncClock
2024/01/30 14:41:04.160455 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 14:41:04.166078 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 14:40:57 2024
System time     : 0.000001410 seconds slow of NTP time
Last offset     : +0.000000489 seconds
RMS offset      : 0.000002679 seconds
Frequency       : 0.560 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.057 ppm
Root delay      : 0.000426557 seconds
Root dispersion : 0.000339773 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 14:41:04.166101 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 14:41:04.170931 [INFO] 200 OK

2024/01/30 14:41:04.171013 [INFO] Skipping Configure OS
2024/01/30 14:41:04.171018 [INFO] Skipping LockRepo
2024/01/30 14:41:04.171022 [INFO] Skipping GenerateEBBanner
2024/01/30 14:41:04.171026 [INFO] Skipping Install Process Manager
2024/01/30 14:41:04.171030 [INFO] Skipping install syslog
2024/01/30 14:41:04.171034 [INFO] Skipping install cron
2024/01/30 14:41:04.171037 [INFO] Skipping install proxy
2024/01/30 14:41:04.171041 [INFO] Skipping installhealthd
2024/01/30 14:41:04.171045 [INFO] Skipping Install Log Streaming Manager
2024/01/30 14:41:04.171049 [INFO] Skipping install X-Ray
2024/01/30 14:41:04.171053 [INFO] Skipping install Third Party License
2024/01/30 14:41:04.171057 [INFO] Skipping installSqsd
2024/01/30 14:41:04.171061 [INFO] Skipping bootstraphealthd
2024/01/30 14:41:04.171065 [INFO] Skipping Install yum packages
2024/01/30 14:41:04.171068 [INFO] Skipping install docker-compose
2024/01/30 14:41:04.171072 [INFO] Skipping Configure Docker Daemon
2024/01/30 14:41:04.171093 [INFO] Skipping MarkBaked
2024/01/30 14:41:04.171097 [INFO] Skipping TuneSystemSettings
2024/01/30 14:41:04.171100 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 14:41:04.171102 [INFO] Initialize LogRotate files and directories
2024/01/30 14:41:04.186596 [INFO] Skipping BootstrapCFNHup
2024/01/30 14:41:04.186607 [INFO] Executing instruction: StartCFNHup
2024/01/30 14:41:04.186610 [INFO] Start cfn-hup
2024/01/30 14:41:04.186626 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 14:41:04.202912 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 14:41:04.211794 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 14:41:04.211822 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 14:41:04.211826 [INFO] Executing instruction: Start Docker
2024/01/30 14:41:04.211828 [INFO] Starting Docker...
2024/01/30 14:41:04.211888 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 14:41:04.212844 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 14:41:04.213926 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 14:41:04.631301 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 14:41:04.646880 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 14:41:04.646941 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 14:41:04.658841 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 14:41:04.670053 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 14:41:04.681100 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 14:41:04.799838 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 14:41:04.799883 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 14:41:05.104630 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 14:41:05.412447 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 14:41:05.423183 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 14:41:05.707428 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 14:41:05.717217 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 14:41:05.729449 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 14:41:05.739016 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 14:41:07.053761 [INFO] Skipping Setup Docker Options
2024/01/30 14:41:07.053779 [INFO] Skipping MarkBootstrapped
2024/01/30 14:41:07.053782 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 14:41:07.053861 [INFO] Starting SwitchCFNStack
2024/01/30 14:41:07.053866 [INFO] Executing instruction: stopSqsd
2024/01/30 14:41:07.053868 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 14:41:07.053871 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 14:41:07.053874 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 14:41:07.053888 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 14:41:07.520284 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 14:41:07.520365 [INFO] Executing instruction: StagedockerApplication
2024/01/30 14:41:07.520380 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 14:41:07.541595 [INFO] Pruning containers ...
2024/01/30 14:41:07.541623 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 14:41:07.565612 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c38277fa59ee   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             distracted_jackson

2024/01/30 14:41:07.565641 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 14:41:07.595710 [INFO] Deleted Containers:
c38277fa59ee8cc5d14b96f52e9e0aa477b9cab4654d8f2f56966166362048c4

Total reclaimed space: 0B

2024/01/30 14:41:07.595734 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 14:41:07.617927 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 14:41:07.618266 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 14:41:07.621094 [INFO] application/json

2024/01/30 14:41:07.621110 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 14:41:07.699093 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 14:41:07.699261 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 14:41:07.700878 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 14:41:07.700914 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 14:41:07.700932 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 14:41:07.700935 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 14:41:07.700939 [INFO] Executing instruction: Generate environment file
2024/01/30 14:41:07.700965 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 14:41:07.700973 [INFO] start build docker app
2024/01/30 14:41:07.701461 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 14:41:07.701470 [INFO] fetching image and ports
2024/01/30 14:41:07.706515 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 14:41:07.706588 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 14:41:07.706597 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 14:41:07.706666 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 14:41:08.570265 [INFO] Login Succeeded

2024/01/30 14:41:08.570287 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 14:41:08.570293 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 14:41:08.570310 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 14:41:08.723199 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 14:41:08.723224 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 14:41:08.723235 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 14:41:08.723239 [INFO] start to build docker image
2024/01/30 14:41:08.723253 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 14:41:09.018828 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 14:41:09.018855 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 14:41:09.018860 [INFO] successfully build docker image
2024/01/30 14:41:09.018863 [INFO] save staging docker image id
2024/01/30 14:41:09.018878 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 14:41:09.045878 [INFO] c176d18fbf65

2024/01/30 14:41:09.045989 [INFO] Executing instruction: configure X-Ray
2024/01/30 14:41:09.045994 [INFO] X-Ray is not enabled.
2024/01/30 14:41:09.045997 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 14:41:09.051843 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 14:41:09.053578 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 14:41:09.066164 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 14:41:09.066198 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 14:41:09.076981 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 14:41:09.087491 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 14:41:09.098209 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 14:41:09.180729 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 14:41:09.519051 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 14:41:09.520436 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 14:41:09.864605 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 14:41:09.876996 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 14:41:10.168264 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 14:41:10.177901 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 14:41:10.186966 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 14:41:10.511502 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 14:41:10.523951 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 14:41:10.847611 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 14:41:10.847650 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 14:41:10.862303 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 14:41:10.875023 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 14:41:10.975584 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 14:41:10.976475 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 14:41:10.977473 [INFO] Executing instruction: configure log streaming
2024/01/30 14:41:10.977482 [INFO] log streaming is not enabled
2024/01/30 14:41:10.977486 [INFO] disable log stream
2024/01/30 14:41:10.977501 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 14:41:10.999506 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 14:41:11.019174 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 14:41:11.019198 [INFO] Checking if logs need forced rotation
2024/01/30 14:41:11.019222 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 14:41:11.586648 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 14:41:12.146830 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 14:41:12.148469 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 14:41:12.628434 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 14:41:12.651305 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 14:41:12.651322 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 14:41:12.651332 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 14:41:13.124466 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 14:41:13.124499 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 14:41:13.124538 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 14:41:13.124541 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 14:41:13.124561 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 14:41:13.124571 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 14:41:13.124573 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 14:41:13.124578 [INFO] Executing instruction: stop X-Ray
2024/01/30 14:41:13.124580 [INFO] stop X-Ray ...
2024/01/30 14:41:13.124590 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 14:41:13.140378 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 14:41:13.140413 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 14:41:13.156961 [INFO] Executing instruction: Run Docker Container
2024/01/30 14:41:13.157027 [INFO] stop currently running containers...
2024/01/30 14:41:13.157037 [INFO] detected old app is not docker compose app
2024/01/30 14:41:13.157048 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 14:41:13.192504 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 14:41:13.218283 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 14:41:13.218316 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 14:41:13.233575 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 14:41:13.233609 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 14:41:13.248094 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 14:41:13.248141 [INFO] stopping current container: c38277fa59ee
2024/01/30 14:41:13.248154 [INFO] Running command /bin/sh -c docker ps | grep -q c38277fa59ee
2024/01/30 14:41:13.269803 [INFO] Running command /bin/sh -c docker ps | grep -q c38277fa59ee
2024/01/30 14:41:13.290217 [INFO] Pruning containers ...
2024/01/30 14:41:13.290244 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 14:41:13.307308 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 14:41:13.307352 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 14:41:13.333723 [INFO] Total reclaimed space: 0B

2024/01/30 14:41:13.333777 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 14:41:13.358686 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 14:41:13.358716 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 14:41:13.379640 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 14:41:13.379665 [INFO] Removing /var/app/current/ if it exists
2024/01/30 14:41:13.379765 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 14:41:13.379788 [INFO] detected new app is not docker compose app
2024/01/30 14:41:13.379845 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 14:41:13.721698 [INFO] 1dabc1b2da6e96e3af4ffe0566b669722e1ab9661f2b9a659212035c670e05f1

2024/01/30 14:41:18.722053 [INFO] Running command /bin/sh -c docker ps | grep -q 1dabc1b2da6e
2024/01/30 14:41:18.750663 [ERROR] docker container quit unexpectedly on 2024-01-30 14:41:18.750652267 +0000 UTC: Command /bin/sh -c docker ps | grep -q 1dabc1b2da6e failed with error exit status 1
2024/01/30 14:41:18.750689 [INFO] Running command /bin/sh -c docker logs 1dabc1b2da6e
2024/01/30 14:41:18.772003 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 1dabc1b2da6e: Command /bin/sh -c docker ps | grep -q 1dabc1b2da6e failed with error exit status 1 

2024/01/30 14:41:18.772015 [INFO] Executing cleanup logic
2024/01/30 14:41:18.772274 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 15:41:19.825214 [INFO] Starting...
2024/01/30 15:41:19.825257 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 15:41:19.825280 [INFO] reading event message file
2024/01/30 15:41:19.826030 [INFO] Engine received EB command userdata-exec

2024/01/30 15:41:19.833962 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 15:41:20.205192 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 15:41:20.649676 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 15:41:20.649728 [INFO] Engine command: (self-startup)

2024/01/30 15:41:20.649742 [INFO] Downloading EB Application...
2024/01/30 15:41:20.649745 [INFO] Region: eu-west-1
2024/01/30 15:41:20.649747 [INFO] envID: e-8gmkc7rmw6
2024/01/30 15:41:20.649749 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 15:41:20.649752 [INFO] Using manifest file name from command request
2024/01/30 15:41:20.649766 [INFO] Unable to get version manifest file.
2024/01/30 15:41:20.649768 [INFO] Downloading latest manifest available.
2024/01/30 15:41:20.649770 [INFO] Download latest app version manifest
2024/01/30 15:41:20.649924 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 15:41:20.694402 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 15:41:20.694569 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 15:41:20.704988 [INFO] Download successful124bytes downloaded
2024/01/30 15:41:20.705122 [INFO] Trying to read and parse version manifest...
2024/01/30 15:41:20.705196 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 15:41:20.738793 [INFO] Download successful264bytes downloaded
2024/01/30 15:41:20.739175 [INFO] Executing instruction: SyncClock
2024/01/30 15:41:20.739180 [INFO] Starting SyncClock
2024/01/30 15:41:20.739191 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 15:41:20.744435 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 15:41:18 2024
System time     : 0.000004798 seconds slow of NTP time
Last offset     : -0.000003043 seconds
RMS offset      : 0.000006042 seconds
Frequency       : 0.437 ppm fast
Residual freq   : -0.004 ppm
Skew            : 0.135 ppm
Root delay      : 0.000426269 seconds
Root dispersion : 0.000482062 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 15:41:20.744461 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 15:41:20.749332 [INFO] 200 OK

2024/01/30 15:41:20.749421 [INFO] Skipping Configure OS
2024/01/30 15:41:20.749426 [INFO] Skipping LockRepo
2024/01/30 15:41:20.749430 [INFO] Skipping GenerateEBBanner
2024/01/30 15:41:20.749434 [INFO] Skipping Install Process Manager
2024/01/30 15:41:20.749438 [INFO] Skipping install syslog
2024/01/30 15:41:20.749442 [INFO] Skipping install cron
2024/01/30 15:41:20.749446 [INFO] Skipping install proxy
2024/01/30 15:41:20.749449 [INFO] Skipping installhealthd
2024/01/30 15:41:20.749456 [INFO] Skipping Install Log Streaming Manager
2024/01/30 15:41:20.749460 [INFO] Skipping install X-Ray
2024/01/30 15:41:20.749465 [INFO] Skipping install Third Party License
2024/01/30 15:41:20.749470 [INFO] Skipping installSqsd
2024/01/30 15:41:20.749475 [INFO] Skipping bootstraphealthd
2024/01/30 15:41:20.749483 [INFO] Skipping Install yum packages
2024/01/30 15:41:20.749495 [INFO] Skipping install docker-compose
2024/01/30 15:41:20.749500 [INFO] Skipping Configure Docker Daemon
2024/01/30 15:41:20.749504 [INFO] Skipping MarkBaked
2024/01/30 15:41:20.749509 [INFO] Skipping TuneSystemSettings
2024/01/30 15:41:20.749512 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 15:41:20.749515 [INFO] Initialize LogRotate files and directories
2024/01/30 15:41:20.762219 [INFO] Skipping BootstrapCFNHup
2024/01/30 15:41:20.762230 [INFO] Executing instruction: StartCFNHup
2024/01/30 15:41:20.762234 [INFO] Start cfn-hup
2024/01/30 15:41:20.762250 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 15:41:20.774674 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 15:41:20.796298 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 15:41:20.796337 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 15:41:20.796341 [INFO] Executing instruction: Start Docker
2024/01/30 15:41:20.796345 [INFO] Starting Docker...
2024/01/30 15:41:20.796429 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 15:41:20.797680 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 15:41:20.798802 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 15:41:21.131248 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 15:41:21.146305 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 15:41:21.146333 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 15:41:21.157388 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 15:41:21.167591 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 15:41:21.180235 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 15:41:21.256771 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 15:41:21.256829 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 15:41:21.580359 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 15:41:22.033140 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 15:41:22.045408 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 15:41:22.395513 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 15:41:22.406241 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 15:41:22.419634 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 15:41:22.430284 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 15:41:23.638071 [INFO] Skipping Setup Docker Options
2024/01/30 15:41:23.638099 [INFO] Skipping MarkBootstrapped
2024/01/30 15:41:23.638103 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 15:41:23.638217 [INFO] Starting SwitchCFNStack
2024/01/30 15:41:23.638228 [INFO] Executing instruction: stopSqsd
2024/01/30 15:41:23.638232 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 15:41:23.638235 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 15:41:23.638239 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 15:41:23.638261 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 15:41:24.117496 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 15:41:24.117517 [INFO] Executing instruction: StagedockerApplication
2024/01/30 15:41:24.117548 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 15:41:24.136676 [INFO] Pruning containers ...
2024/01/30 15:41:24.136803 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 15:41:24.177144 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
1dabc1b2da6e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             keen_jones

2024/01/30 15:41:24.177173 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 15:41:24.213558 [INFO] Deleted Containers:
1dabc1b2da6e96e3af4ffe0566b669722e1ab9661f2b9a659212035c670e05f1

Total reclaimed space: 0B

2024/01/30 15:41:24.213584 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 15:41:24.236929 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 15:41:24.237361 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 15:41:24.241559 [INFO] application/json

2024/01/30 15:41:24.241586 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 15:41:24.366706 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 15:41:24.366933 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 15:41:24.368173 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 15:41:24.368196 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 15:41:24.368210 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 15:41:24.368214 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 15:41:24.368220 [INFO] Executing instruction: Generate environment file
2024/01/30 15:41:24.368297 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 15:41:24.368303 [INFO] start build docker app
2024/01/30 15:41:24.368700 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 15:41:24.368705 [INFO] fetching image and ports
2024/01/30 15:41:24.370368 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 15:41:24.370417 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 15:41:24.370426 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 15:41:24.370442 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 15:41:25.350284 [INFO] Login Succeeded

2024/01/30 15:41:25.350306 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 15:41:25.350314 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 15:41:25.350355 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 15:41:25.519416 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 15:41:25.519443 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 15:41:25.519458 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 15:41:25.519462 [INFO] start to build docker image
2024/01/30 15:41:25.519479 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 15:41:25.786461 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 15:41:25.786483 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 15:41:25.786487 [INFO] successfully build docker image
2024/01/30 15:41:25.786489 [INFO] save staging docker image id
2024/01/30 15:41:25.786501 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 15:41:25.808449 [INFO] c176d18fbf65

2024/01/30 15:41:25.808677 [INFO] Executing instruction: configure X-Ray
2024/01/30 15:41:25.808684 [INFO] X-Ray is not enabled.
2024/01/30 15:41:25.808690 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 15:41:25.814353 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 15:41:25.816219 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 15:41:25.829045 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 15:41:25.829073 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 15:41:25.840040 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 15:41:25.848641 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 15:41:25.858408 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 15:41:25.918978 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 15:41:26.266493 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 15:41:26.266699 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 15:41:26.613099 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 15:41:26.625046 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 15:41:26.959294 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 15:41:26.980681 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 15:41:26.993396 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 15:41:27.379419 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 15:41:27.392760 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 15:41:27.734044 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 15:41:27.734082 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 15:41:27.748969 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 15:41:27.769373 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 15:41:27.868838 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 15:41:27.870459 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 15:41:27.871996 [INFO] Executing instruction: configure log streaming
2024/01/30 15:41:27.872022 [INFO] log streaming is not enabled
2024/01/30 15:41:27.872026 [INFO] disable log stream
2024/01/30 15:41:27.872042 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 15:41:27.893415 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 15:41:27.930179 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 15:41:27.930229 [INFO] Checking if logs need forced rotation
2024/01/30 15:41:27.930256 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 15:41:28.554208 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 15:41:29.067104 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 15:41:29.069456 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 15:41:29.114441 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 15:41:29.135114 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 15:41:29.135134 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 15:41:29.135154 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 15:41:29.650725 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 15:41:29.650752 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 15:41:29.650778 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 15:41:29.650782 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 15:41:29.650806 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 15:41:29.650818 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 15:41:29.650821 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 15:41:29.650826 [INFO] Executing instruction: stop X-Ray
2024/01/30 15:41:29.650830 [INFO] stop X-Ray ...
2024/01/30 15:41:29.650844 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 15:41:29.668308 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 15:41:29.668346 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 15:41:29.684916 [INFO] Executing instruction: Run Docker Container
2024/01/30 15:41:29.684947 [INFO] stop currently running containers...
2024/01/30 15:41:29.684959 [INFO] detected old app is not docker compose app
2024/01/30 15:41:29.684976 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 15:41:29.734072 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 15:41:29.757028 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 15:41:29.757061 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 15:41:29.772894 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 15:41:29.772926 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 15:41:29.788422 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 15:41:29.788462 [INFO] stopping current container: 1dabc1b2da6e
2024/01/30 15:41:29.788482 [INFO] Running command /bin/sh -c docker ps | grep -q 1dabc1b2da6e
2024/01/30 15:41:29.810486 [INFO] Running command /bin/sh -c docker ps | grep -q 1dabc1b2da6e
2024/01/30 15:41:29.835113 [INFO] Pruning containers ...
2024/01/30 15:41:29.835139 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 15:41:29.869257 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 15:41:29.869291 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 15:41:29.890653 [INFO] Total reclaimed space: 0B

2024/01/30 15:41:29.890680 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 15:41:29.909707 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 15:41:29.909750 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 15:41:29.934782 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 15:41:29.934803 [INFO] Removing /var/app/current/ if it exists
2024/01/30 15:41:29.934892 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 15:41:29.934909 [INFO] detected new app is not docker compose app
2024/01/30 15:41:29.935068 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 15:41:30.375281 [INFO] 28ee3317e47eea17614b678ca5e4f6474919c4a38b2bf06a493ec691b9cfdac6

2024/01/30 15:41:35.375674 [INFO] Running command /bin/sh -c docker ps | grep -q 28ee3317e47e
2024/01/30 15:41:35.404390 [ERROR] docker container quit unexpectedly on 2024-01-30 15:41:35.404371723 +0000 UTC: Command /bin/sh -c docker ps | grep -q 28ee3317e47e failed with error exit status 1
2024/01/30 15:41:35.404419 [INFO] Running command /bin/sh -c docker logs 28ee3317e47e
2024/01/30 15:41:35.434983 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 28ee3317e47e: Command /bin/sh -c docker ps | grep -q 28ee3317e47e failed with error exit status 1 

2024/01/30 15:41:35.434992 [INFO] Executing cleanup logic
2024/01/30 15:41:35.435173 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 16:41:36.555960 [INFO] Starting...
2024/01/30 16:41:36.556005 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 16:41:36.556029 [INFO] reading event message file
2024/01/30 16:41:36.556732 [INFO] Engine received EB command userdata-exec

2024/01/30 16:41:36.564103 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 16:41:37.075267 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 16:41:37.614307 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 16:41:37.614388 [INFO] Engine command: (self-startup)

2024/01/30 16:41:37.614403 [INFO] Downloading EB Application...
2024/01/30 16:41:37.614408 [INFO] Region: eu-west-1
2024/01/30 16:41:37.614410 [INFO] envID: e-8gmkc7rmw6
2024/01/30 16:41:37.614413 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 16:41:37.614415 [INFO] Using manifest file name from command request
2024/01/30 16:41:37.614430 [INFO] Unable to get version manifest file.
2024/01/30 16:41:37.614432 [INFO] Downloading latest manifest available.
2024/01/30 16:41:37.614434 [INFO] Download latest app version manifest
2024/01/30 16:41:37.614565 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 16:41:37.655329 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 16:41:37.655491 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 16:41:37.690099 [INFO] Download successful124bytes downloaded
2024/01/30 16:41:37.690238 [INFO] Trying to read and parse version manifest...
2024/01/30 16:41:37.690307 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 16:41:37.723472 [INFO] Download successful264bytes downloaded
2024/01/30 16:41:37.723970 [INFO] Executing instruction: SyncClock
2024/01/30 16:41:37.723976 [INFO] Starting SyncClock
2024/01/30 16:41:37.723985 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 16:41:37.729321 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 16:41:23 2024
System time     : 0.000005485 seconds fast of NTP time
Last offset     : +0.000009812 seconds
RMS offset      : 0.000009646 seconds
Frequency       : 0.403 ppm fast
Residual freq   : +0.010 ppm
Skew            : 0.423 ppm
Root delay      : 0.000397655 seconds
Root dispersion : 0.000470951 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 16:41:37.729339 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 16:41:37.733614 [INFO] 200 OK

2024/01/30 16:41:37.733707 [INFO] Skipping Configure OS
2024/01/30 16:41:37.733712 [INFO] Skipping LockRepo
2024/01/30 16:41:37.733716 [INFO] Skipping GenerateEBBanner
2024/01/30 16:41:37.733720 [INFO] Skipping Install Process Manager
2024/01/30 16:41:37.733724 [INFO] Skipping install syslog
2024/01/30 16:41:37.733728 [INFO] Skipping install cron
2024/01/30 16:41:37.733731 [INFO] Skipping install proxy
2024/01/30 16:41:37.733736 [INFO] Skipping installhealthd
2024/01/30 16:41:37.733740 [INFO] Skipping Install Log Streaming Manager
2024/01/30 16:41:37.733743 [INFO] Skipping install X-Ray
2024/01/30 16:41:37.733747 [INFO] Skipping install Third Party License
2024/01/30 16:41:37.733755 [INFO] Skipping installSqsd
2024/01/30 16:41:37.733761 [INFO] Skipping bootstraphealthd
2024/01/30 16:41:37.733765 [INFO] Skipping Install yum packages
2024/01/30 16:41:37.733769 [INFO] Skipping install docker-compose
2024/01/30 16:41:37.733773 [INFO] Skipping Configure Docker Daemon
2024/01/30 16:41:37.733777 [INFO] Skipping MarkBaked
2024/01/30 16:41:37.733781 [INFO] Skipping TuneSystemSettings
2024/01/30 16:41:37.733783 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 16:41:37.733786 [INFO] Initialize LogRotate files and directories
2024/01/30 16:41:37.748035 [INFO] Skipping BootstrapCFNHup
2024/01/30 16:41:37.748044 [INFO] Executing instruction: StartCFNHup
2024/01/30 16:41:37.748047 [INFO] Start cfn-hup
2024/01/30 16:41:37.748063 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 16:41:37.763139 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 16:41:37.772311 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 16:41:37.772347 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 16:41:37.772351 [INFO] Executing instruction: Start Docker
2024/01/30 16:41:37.772354 [INFO] Starting Docker...
2024/01/30 16:41:37.772441 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 16:41:37.773370 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 16:41:37.774564 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 16:41:38.189292 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 16:41:38.212191 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 16:41:38.212235 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 16:41:38.222417 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 16:41:38.230446 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 16:41:38.243779 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 16:41:38.327263 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 16:41:38.327324 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 16:41:38.669089 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 16:41:38.988594 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 16:41:38.999607 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 16:41:39.353610 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 16:41:39.365739 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 16:41:39.378861 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 16:41:39.387448 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 16:41:40.671827 [INFO] Skipping Setup Docker Options
2024/01/30 16:41:40.671854 [INFO] Skipping MarkBootstrapped
2024/01/30 16:41:40.671860 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 16:41:40.671976 [INFO] Starting SwitchCFNStack
2024/01/30 16:41:40.671982 [INFO] Executing instruction: stopSqsd
2024/01/30 16:41:40.672063 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 16:41:40.672068 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 16:41:40.672073 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 16:41:40.672096 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 16:41:41.148671 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 16:41:41.148700 [INFO] Executing instruction: StagedockerApplication
2024/01/30 16:41:41.148723 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 16:41:41.172021 [INFO] Pruning containers ...
2024/01/30 16:41:41.172050 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 16:41:41.196651 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
28ee3317e47e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             relaxed_taussig

2024/01/30 16:41:41.196714 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 16:41:41.225289 [INFO] Deleted Containers:
28ee3317e47eea17614b678ca5e4f6474919c4a38b2bf06a493ec691b9cfdac6

Total reclaimed space: 0B

2024/01/30 16:41:41.225313 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 16:41:41.245599 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 16:41:41.246179 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 16:41:41.249215 [INFO] application/json

2024/01/30 16:41:41.249234 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 16:41:41.348244 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 16:41:41.348430 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 16:41:41.349827 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 16:41:41.349926 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 16:41:41.349942 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 16:41:41.349945 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 16:41:41.349956 [INFO] Executing instruction: Generate environment file
2024/01/30 16:41:41.349983 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 16:41:41.349986 [INFO] start build docker app
2024/01/30 16:41:41.350482 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 16:41:41.350486 [INFO] fetching image and ports
2024/01/30 16:41:41.352153 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 16:41:41.352291 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 16:41:41.352302 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 16:41:41.352317 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 16:41:42.428731 [INFO] Login Succeeded

2024/01/30 16:41:42.428752 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 16:41:42.428758 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 16:41:42.428773 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 16:41:42.562748 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 16:41:42.562773 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 16:41:42.562786 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 16:41:42.562789 [INFO] start to build docker image
2024/01/30 16:41:42.562807 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 16:41:42.869621 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 16:41:42.869648 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 16:41:42.869653 [INFO] successfully build docker image
2024/01/30 16:41:42.869655 [INFO] save staging docker image id
2024/01/30 16:41:42.869666 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 16:41:42.914857 [INFO] c176d18fbf65

2024/01/30 16:41:42.915062 [INFO] Executing instruction: configure X-Ray
2024/01/30 16:41:42.915070 [INFO] X-Ray is not enabled.
2024/01/30 16:41:42.915073 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 16:41:42.921219 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 16:41:42.923082 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 16:41:42.944461 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 16:41:42.944493 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 16:41:42.962654 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 16:41:42.977889 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 16:41:43.002860 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 16:41:43.107737 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 16:41:43.515714 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 16:41:43.515941 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 16:41:43.872362 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 16:41:43.884266 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 16:41:44.196487 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 16:41:44.210419 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 16:41:44.222136 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 16:41:44.505508 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 16:41:44.526405 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 16:41:44.917013 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 16:41:44.917052 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 16:41:44.931830 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 16:41:44.941806 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 16:41:45.045997 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 16:41:45.047054 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 16:41:45.047934 [INFO] Executing instruction: configure log streaming
2024/01/30 16:41:45.047946 [INFO] log streaming is not enabled
2024/01/30 16:41:45.047950 [INFO] disable log stream
2024/01/30 16:41:45.047965 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 16:41:45.069878 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 16:41:45.090359 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 16:41:45.090379 [INFO] Checking if logs need forced rotation
2024/01/30 16:41:45.090398 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 16:41:45.645314 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 16:41:46.234394 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 16:41:46.236812 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 16:41:46.630485 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 16:41:46.648018 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 16:41:46.648034 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 16:41:46.648045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 16:41:47.158403 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 16:41:47.158427 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 16:41:47.158452 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 16:41:47.158455 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 16:41:47.158475 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 16:41:47.158485 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 16:41:47.158487 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 16:41:47.158492 [INFO] Executing instruction: stop X-Ray
2024/01/30 16:41:47.158495 [INFO] stop X-Ray ...
2024/01/30 16:41:47.158504 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 16:41:47.180150 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 16:41:47.180181 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 16:41:47.197408 [INFO] Executing instruction: Run Docker Container
2024/01/30 16:41:47.197441 [INFO] stop currently running containers...
2024/01/30 16:41:47.197452 [INFO] detected old app is not docker compose app
2024/01/30 16:41:47.197465 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 16:41:47.272963 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 16:41:47.289710 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 16:41:47.289745 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 16:41:47.305777 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 16:41:47.305804 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 16:41:47.320212 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 16:41:47.320255 [INFO] stopping current container: 28ee3317e47e
2024/01/30 16:41:47.320267 [INFO] Running command /bin/sh -c docker ps | grep -q 28ee3317e47e
2024/01/30 16:41:47.340604 [INFO] Running command /bin/sh -c docker ps | grep -q 28ee3317e47e
2024/01/30 16:41:47.368974 [INFO] Pruning containers ...
2024/01/30 16:41:47.368999 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 16:41:47.396171 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 16:41:47.396200 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 16:41:47.425715 [INFO] Total reclaimed space: 0B

2024/01/30 16:41:47.425743 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 16:41:47.457612 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 16:41:47.457642 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 16:41:47.491608 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 16:41:47.491638 [INFO] Removing /var/app/current/ if it exists
2024/01/30 16:41:47.492181 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 16:41:47.492203 [INFO] detected new app is not docker compose app
2024/01/30 16:41:47.492264 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 16:41:47.964009 [INFO] 6467cb1897fe5da547b60b6998fbc3d8e5d9fc35b9f394f03407706ef838571e

2024/01/30 16:41:52.968271 [INFO] Running command /bin/sh -c docker ps | grep -q 6467cb1897fe
2024/01/30 16:41:52.991163 [ERROR] docker container quit unexpectedly on 2024-01-30 16:41:52.991151644 +0000 UTC: Command /bin/sh -c docker ps | grep -q 6467cb1897fe failed with error exit status 1
2024/01/30 16:41:52.991203 [INFO] Running command /bin/sh -c docker logs 6467cb1897fe
2024/01/30 16:41:53.018632 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 6467cb1897fe: Command /bin/sh -c docker ps | grep -q 6467cb1897fe failed with error exit status 1 

2024/01/30 16:41:53.018648 [INFO] Executing cleanup logic
2024/01/30 16:41:53.018926 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 17:41:53.986216 [INFO] Starting...
2024/01/30 17:41:53.986257 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 17:41:53.986282 [INFO] reading event message file
2024/01/30 17:41:53.987092 [INFO] Engine received EB command userdata-exec

2024/01/30 17:41:53.995775 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 17:41:54.415602 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 17:41:54.943286 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 17:41:54.943386 [INFO] Engine command: (self-startup)

2024/01/30 17:41:54.943394 [INFO] Downloading EB Application...
2024/01/30 17:41:54.943397 [INFO] Region: eu-west-1
2024/01/30 17:41:54.943401 [INFO] envID: e-8gmkc7rmw6
2024/01/30 17:41:54.943404 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 17:41:54.943408 [INFO] Using manifest file name from command request
2024/01/30 17:41:54.943431 [INFO] Unable to get version manifest file.
2024/01/30 17:41:54.943434 [INFO] Downloading latest manifest available.
2024/01/30 17:41:54.943436 [INFO] Download latest app version manifest
2024/01/30 17:41:54.943553 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 17:41:54.985258 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 17:41:54.985606 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 17:41:54.996334 [INFO] Download successful124bytes downloaded
2024/01/30 17:41:54.996480 [INFO] Trying to read and parse version manifest...
2024/01/30 17:41:54.996547 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 17:41:55.023110 [INFO] Download successful264bytes downloaded
2024/01/30 17:41:55.023543 [INFO] Executing instruction: SyncClock
2024/01/30 17:41:55.023549 [INFO] Starting SyncClock
2024/01/30 17:41:55.023565 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 17:41:55.030212 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 17:41:50 2024
System time     : 0.000004271 seconds slow of NTP time
Last offset     : -0.000001977 seconds
RMS offset      : 0.000005795 seconds
Frequency       : 0.776 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.139 ppm
Root delay      : 0.000443195 seconds
Root dispersion : 0.000422337 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 17:41:55.030232 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 17:41:55.044702 [INFO] 200 OK

2024/01/30 17:41:55.047490 [INFO] Skipping Configure OS
2024/01/30 17:41:55.047500 [INFO] Skipping LockRepo
2024/01/30 17:41:55.047506 [INFO] Skipping GenerateEBBanner
2024/01/30 17:41:55.047511 [INFO] Skipping Install Process Manager
2024/01/30 17:41:55.047516 [INFO] Skipping install syslog
2024/01/30 17:41:55.047521 [INFO] Skipping install cron
2024/01/30 17:41:55.047532 [INFO] Skipping install proxy
2024/01/30 17:41:55.047537 [INFO] Skipping installhealthd
2024/01/30 17:41:55.047542 [INFO] Skipping Install Log Streaming Manager
2024/01/30 17:41:55.047547 [INFO] Skipping install X-Ray
2024/01/30 17:41:55.047564 [INFO] Skipping install Third Party License
2024/01/30 17:41:55.047571 [INFO] Skipping installSqsd
2024/01/30 17:41:55.047590 [INFO] Skipping bootstraphealthd
2024/01/30 17:41:55.047596 [INFO] Skipping Install yum packages
2024/01/30 17:41:55.047601 [INFO] Skipping install docker-compose
2024/01/30 17:41:55.047606 [INFO] Skipping Configure Docker Daemon
2024/01/30 17:41:55.047613 [INFO] Skipping MarkBaked
2024/01/30 17:41:55.047618 [INFO] Skipping TuneSystemSettings
2024/01/30 17:41:55.047622 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 17:41:55.047625 [INFO] Initialize LogRotate files and directories
2024/01/30 17:41:55.063245 [INFO] Skipping BootstrapCFNHup
2024/01/30 17:41:55.063260 [INFO] Executing instruction: StartCFNHup
2024/01/30 17:41:55.063263 [INFO] Start cfn-hup
2024/01/30 17:41:55.063280 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 17:41:55.081254 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 17:41:55.103554 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 17:41:55.103603 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 17:41:55.103607 [INFO] Executing instruction: Start Docker
2024/01/30 17:41:55.103610 [INFO] Starting Docker...
2024/01/30 17:41:55.103836 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 17:41:55.106122 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 17:41:55.107092 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 17:41:55.440721 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 17:41:55.467141 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 17:41:55.467198 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 17:41:55.482284 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 17:41:55.494939 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 17:41:55.507645 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 17:41:55.566592 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 17:41:55.566641 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 17:41:55.857641 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 17:41:56.259840 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 17:41:56.275598 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 17:41:56.618517 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 17:41:56.633761 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 17:41:56.660091 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 17:41:56.672791 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 17:41:57.949323 [INFO] Skipping Setup Docker Options
2024/01/30 17:41:57.949343 [INFO] Skipping MarkBootstrapped
2024/01/30 17:41:57.949347 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 17:41:57.949453 [INFO] Starting SwitchCFNStack
2024/01/30 17:41:57.949460 [INFO] Executing instruction: stopSqsd
2024/01/30 17:41:57.949463 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 17:41:57.949467 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 17:41:57.949544 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 17:41:57.949561 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 17:41:58.531969 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 17:41:58.532437 [INFO] Executing instruction: StagedockerApplication
2024/01/30 17:41:58.532536 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 17:41:58.570366 [INFO] Pruning containers ...
2024/01/30 17:41:58.570397 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 17:41:58.609416 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
6467cb1897fe   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             tender_mclaren

2024/01/30 17:41:58.609447 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 17:41:58.656084 [INFO] Deleted Containers:
6467cb1897fe5da547b60b6998fbc3d8e5d9fc35b9f394f03407706ef838571e

Total reclaimed space: 0B

2024/01/30 17:41:58.656162 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 17:41:58.678738 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 17:41:58.678965 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 17:41:58.686760 [INFO] application/json

2024/01/30 17:41:58.686790 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 17:41:58.767813 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 17:41:58.768165 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 17:41:58.769444 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 17:41:58.769466 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 17:41:58.769483 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 17:41:58.769487 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 17:41:58.769491 [INFO] Executing instruction: Generate environment file
2024/01/30 17:41:58.769516 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 17:41:58.769519 [INFO] start build docker app
2024/01/30 17:41:58.769898 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 17:41:58.769902 [INFO] fetching image and ports
2024/01/30 17:41:58.771739 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 17:41:58.771797 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 17:41:58.771809 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 17:41:58.771818 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 17:41:59.704223 [INFO] Login Succeeded

2024/01/30 17:41:59.704241 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 17:41:59.704247 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 17:41:59.704263 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 17:41:59.841411 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 17:41:59.841437 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 17:41:59.841441 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 17:41:59.841444 [INFO] start to build docker image
2024/01/30 17:41:59.841463 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 17:42:00.233794 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 17:42:00.233818 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 17:42:00.233823 [INFO] successfully build docker image
2024/01/30 17:42:00.233826 [INFO] save staging docker image id
2024/01/30 17:42:00.233840 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 17:42:00.259120 [INFO] c176d18fbf65

2024/01/30 17:42:00.259489 [INFO] Executing instruction: configure X-Ray
2024/01/30 17:42:00.259497 [INFO] X-Ray is not enabled.
2024/01/30 17:42:00.259500 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 17:42:00.265220 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 17:42:00.266939 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 17:42:00.281138 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 17:42:00.281167 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 17:42:00.293953 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 17:42:00.306254 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 17:42:00.321109 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 17:42:00.423359 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 17:42:00.776524 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 17:42:00.776773 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 17:42:01.098432 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 17:42:01.122161 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 17:42:01.764244 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 17:42:01.802658 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 17:42:01.839830 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 17:42:02.576376 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 17:42:02.589224 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 17:42:02.991073 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 17:42:02.991108 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 17:42:03.006725 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 17:42:03.018578 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 17:42:03.117190 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 17:42:03.118256 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 17:42:03.119234 [INFO] Executing instruction: configure log streaming
2024/01/30 17:42:03.119242 [INFO] log streaming is not enabled
2024/01/30 17:42:03.119244 [INFO] disable log stream
2024/01/30 17:42:03.119257 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 17:42:03.144901 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 17:42:03.171292 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 17:42:03.171319 [INFO] Checking if logs need forced rotation
2024/01/30 17:42:03.171396 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 17:42:03.807191 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 17:42:04.365020 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 17:42:04.367091 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 17:42:04.900242 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 17:42:04.920610 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 17:42:04.920631 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 17:42:04.920643 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 17:42:05.481173 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 17:42:05.481197 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 17:42:05.481223 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 17:42:05.481226 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 17:42:05.481247 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 17:42:05.481258 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 17:42:05.481260 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 17:42:05.481266 [INFO] Executing instruction: stop X-Ray
2024/01/30 17:42:05.481268 [INFO] stop X-Ray ...
2024/01/30 17:42:05.481278 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 17:42:05.504668 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 17:42:05.504703 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 17:42:05.526692 [INFO] Executing instruction: Run Docker Container
2024/01/30 17:42:05.526726 [INFO] stop currently running containers...
2024/01/30 17:42:05.526744 [INFO] detected old app is not docker compose app
2024/01/30 17:42:05.526758 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 17:42:05.562346 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 17:42:05.576935 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 17:42:05.577010 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 17:42:05.592852 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 17:42:05.592882 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 17:42:05.607930 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 17:42:05.607977 [INFO] stopping current container: 6467cb1897fe
2024/01/30 17:42:05.608001 [INFO] Running command /bin/sh -c docker ps | grep -q 6467cb1897fe
2024/01/30 17:42:05.630289 [INFO] Running command /bin/sh -c docker ps | grep -q 6467cb1897fe
2024/01/30 17:42:05.656862 [INFO] Pruning containers ...
2024/01/30 17:42:05.656886 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 17:42:05.676390 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 17:42:05.676419 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 17:42:05.697117 [INFO] Total reclaimed space: 0B

2024/01/30 17:42:05.697144 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 17:42:05.719007 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 17:42:05.719037 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 17:42:05.753152 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 17:42:05.753177 [INFO] Removing /var/app/current/ if it exists
2024/01/30 17:42:05.753324 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 17:42:05.753342 [INFO] detected new app is not docker compose app
2024/01/30 17:42:05.753391 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 17:42:06.172978 [INFO] 7a06874c78c42e023a816723000800c3125bac3b87670faf439a5fdffe402a39

2024/01/30 17:42:11.177263 [INFO] Running command /bin/sh -c docker ps | grep -q 7a06874c78c4
2024/01/30 17:42:11.204785 [ERROR] docker container quit unexpectedly on 2024-01-30 17:42:11.20473766 +0000 UTC: Command /bin/sh -c docker ps | grep -q 7a06874c78c4 failed with error exit status 1
2024/01/30 17:42:11.204874 [INFO] Running command /bin/sh -c docker logs 7a06874c78c4
2024/01/30 17:42:11.232637 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 7a06874c78c4: Command /bin/sh -c docker ps | grep -q 7a06874c78c4 failed with error exit status 1 

2024/01/30 17:42:11.232646 [INFO] Executing cleanup logic
2024/01/30 17:42:11.232943 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 18:42:12.178559 [INFO] Starting...
2024/01/30 18:42:12.178606 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 18:42:12.178637 [INFO] reading event message file
2024/01/30 18:42:12.179362 [INFO] Engine received EB command userdata-exec

2024/01/30 18:42:12.189246 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 18:42:12.786815 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 18:42:13.295063 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 18:42:13.295165 [INFO] Engine command: (self-startup)

2024/01/30 18:42:13.295295 [INFO] Downloading EB Application...
2024/01/30 18:42:13.295301 [INFO] Region: eu-west-1
2024/01/30 18:42:13.295305 [INFO] envID: e-8gmkc7rmw6
2024/01/30 18:42:13.295308 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 18:42:13.295310 [INFO] Using manifest file name from command request
2024/01/30 18:42:13.295325 [INFO] Unable to get version manifest file.
2024/01/30 18:42:13.295327 [INFO] Downloading latest manifest available.
2024/01/30 18:42:13.295330 [INFO] Download latest app version manifest
2024/01/30 18:42:13.295452 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 18:42:13.349317 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 18:42:13.349560 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 18:42:13.402472 [INFO] Download successful124bytes downloaded
2024/01/30 18:42:13.402621 [INFO] Trying to read and parse version manifest...
2024/01/30 18:42:13.402696 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 18:42:13.422406 [INFO] Download successful264bytes downloaded
2024/01/30 18:42:13.422750 [INFO] Executing instruction: SyncClock
2024/01/30 18:42:13.422757 [INFO] Starting SyncClock
2024/01/30 18:42:13.422769 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 18:42:13.428484 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 18:41:57 2024
System time     : 0.000003838 seconds fast of NTP time
Last offset     : +0.000002909 seconds
RMS offset      : 0.000005295 seconds
Frequency       : 0.820 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.084 ppm
Root delay      : 0.000421789 seconds
Root dispersion : 0.000343635 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 18:42:13.428502 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 18:42:13.432851 [INFO] 200 OK

2024/01/30 18:42:13.432937 [INFO] Skipping Configure OS
2024/01/30 18:42:13.432942 [INFO] Skipping LockRepo
2024/01/30 18:42:13.432946 [INFO] Skipping GenerateEBBanner
2024/01/30 18:42:13.432950 [INFO] Skipping Install Process Manager
2024/01/30 18:42:13.432954 [INFO] Skipping install syslog
2024/01/30 18:42:13.432957 [INFO] Skipping install cron
2024/01/30 18:42:13.432961 [INFO] Skipping install proxy
2024/01/30 18:42:13.432965 [INFO] Skipping installhealthd
2024/01/30 18:42:13.432969 [INFO] Skipping Install Log Streaming Manager
2024/01/30 18:42:13.432972 [INFO] Skipping install X-Ray
2024/01/30 18:42:13.432980 [INFO] Skipping install Third Party License
2024/01/30 18:42:13.433003 [INFO] Skipping installSqsd
2024/01/30 18:42:13.433007 [INFO] Skipping bootstraphealthd
2024/01/30 18:42:13.433011 [INFO] Skipping Install yum packages
2024/01/30 18:42:13.433015 [INFO] Skipping install docker-compose
2024/01/30 18:42:13.433021 [INFO] Skipping Configure Docker Daemon
2024/01/30 18:42:13.433105 [INFO] Skipping MarkBaked
2024/01/30 18:42:13.433111 [INFO] Skipping TuneSystemSettings
2024/01/30 18:42:13.433114 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 18:42:13.433116 [INFO] Initialize LogRotate files and directories
2024/01/30 18:42:13.450370 [INFO] Skipping BootstrapCFNHup
2024/01/30 18:42:13.450380 [INFO] Executing instruction: StartCFNHup
2024/01/30 18:42:13.450383 [INFO] Start cfn-hup
2024/01/30 18:42:13.450399 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 18:42:13.472629 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 18:42:13.505268 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 18:42:13.505304 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 18:42:13.505308 [INFO] Executing instruction: Start Docker
2024/01/30 18:42:13.505311 [INFO] Starting Docker...
2024/01/30 18:42:13.506334 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 18:42:13.508296 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 18:42:13.509301 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 18:42:13.934154 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 18:42:13.960325 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 18:42:13.960362 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 18:42:13.987634 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 18:42:14.021974 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 18:42:14.034701 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 18:42:14.145176 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 18:42:14.145221 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 18:42:14.580779 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 18:42:14.890455 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 18:42:14.903697 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 18:42:15.255406 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 18:42:15.265342 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 18:42:15.277894 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 18:42:15.286817 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 18:42:16.510849 [INFO] Skipping Setup Docker Options
2024/01/30 18:42:16.510876 [INFO] Skipping MarkBootstrapped
2024/01/30 18:42:16.510881 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 18:42:16.511008 [INFO] Starting SwitchCFNStack
2024/01/30 18:42:16.511014 [INFO] Executing instruction: stopSqsd
2024/01/30 18:42:16.511017 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 18:42:16.511021 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 18:42:16.511024 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 18:42:16.511045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 18:42:17.001561 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 18:42:17.001643 [INFO] Executing instruction: StagedockerApplication
2024/01/30 18:42:17.001657 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 18:42:17.024316 [INFO] Pruning containers ...
2024/01/30 18:42:17.024349 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 18:42:17.046077 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
7a06874c78c4   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             focused_satoshi

2024/01/30 18:42:17.046299 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 18:42:17.071691 [INFO] Deleted Containers:
7a06874c78c42e023a816723000800c3125bac3b87670faf439a5fdffe402a39

Total reclaimed space: 0B

2024/01/30 18:42:17.071716 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 18:42:17.092194 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 18:42:17.092542 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 18:42:17.095991 [INFO] application/json

2024/01/30 18:42:17.096012 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 18:42:17.198611 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 18:42:17.200037 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 18:42:17.202183 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 18:42:17.202216 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 18:42:17.202235 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 18:42:17.202243 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 18:42:17.202248 [INFO] Executing instruction: Generate environment file
2024/01/30 18:42:17.202309 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 18:42:17.202314 [INFO] start build docker app
2024/01/30 18:42:17.203249 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 18:42:17.203256 [INFO] fetching image and ports
2024/01/30 18:42:17.205142 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 18:42:17.205195 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 18:42:17.205208 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 18:42:17.205219 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 18:42:18.281096 [INFO] Login Succeeded

2024/01/30 18:42:18.281115 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 18:42:18.281121 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 18:42:18.281138 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 18:42:18.442724 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 18:42:18.442746 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 18:42:18.442749 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 18:42:18.442752 [INFO] start to build docker image
2024/01/30 18:42:18.442767 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 18:42:18.714743 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 18:42:18.714769 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 18:42:18.714773 [INFO] successfully build docker image
2024/01/30 18:42:18.714775 [INFO] save staging docker image id
2024/01/30 18:42:18.714786 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 18:42:18.738388 [INFO] c176d18fbf65

2024/01/30 18:42:18.738581 [INFO] Executing instruction: configure X-Ray
2024/01/30 18:42:18.738586 [INFO] X-Ray is not enabled.
2024/01/30 18:42:18.738589 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 18:42:18.743908 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 18:42:18.745583 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 18:42:18.761263 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 18:42:18.761296 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 18:42:18.772764 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 18:42:18.781914 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 18:42:18.795219 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 18:42:18.870423 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 18:42:19.192884 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 18:42:19.193105 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 18:42:19.628006 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 18:42:19.693496 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 18:42:19.992474 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 18:42:20.015219 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 18:42:20.024923 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 18:42:20.379874 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 18:42:20.390413 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 18:42:20.689841 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 18:42:20.689875 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 18:42:20.701534 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 18:42:20.710667 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 18:42:20.823259 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 18:42:20.824152 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 18:42:20.825209 [INFO] Executing instruction: configure log streaming
2024/01/30 18:42:20.825219 [INFO] log streaming is not enabled
2024/01/30 18:42:20.825223 [INFO] disable log stream
2024/01/30 18:42:20.825244 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 18:42:20.843738 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 18:42:20.875046 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 18:42:20.875071 [INFO] Checking if logs need forced rotation
2024/01/30 18:42:20.875090 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 18:42:21.488994 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 18:42:22.099980 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 18:42:22.101579 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 18:42:22.650114 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 18:42:22.671013 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 18:42:22.671029 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 18:42:22.671048 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 18:42:23.115643 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 18:42:23.115666 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 18:42:23.115689 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 18:42:23.115691 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 18:42:23.115713 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 18:42:23.115723 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 18:42:23.115726 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 18:42:23.115731 [INFO] Executing instruction: stop X-Ray
2024/01/30 18:42:23.115733 [INFO] stop X-Ray ...
2024/01/30 18:42:23.115744 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 18:42:23.133684 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 18:42:23.133726 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 18:42:23.151283 [INFO] Executing instruction: Run Docker Container
2024/01/30 18:42:23.151314 [INFO] stop currently running containers...
2024/01/30 18:42:23.151323 [INFO] detected old app is not docker compose app
2024/01/30 18:42:23.151334 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 18:42:23.212453 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 18:42:23.242884 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 18:42:23.242928 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 18:42:23.257770 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 18:42:23.257804 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 18:42:23.275793 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 18:42:23.275850 [INFO] stopping current container: 7a06874c78c4
2024/01/30 18:42:23.275862 [INFO] Running command /bin/sh -c docker ps | grep -q 7a06874c78c4
2024/01/30 18:42:23.316009 [INFO] Running command /bin/sh -c docker ps | grep -q 7a06874c78c4
2024/01/30 18:42:23.347120 [INFO] Pruning containers ...
2024/01/30 18:42:23.347161 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 18:42:23.372266 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 18:42:23.372294 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 18:42:23.394465 [INFO] Total reclaimed space: 0B

2024/01/30 18:42:23.394489 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 18:42:23.441266 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 18:42:23.441395 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 18:42:23.465487 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 18:42:23.465508 [INFO] Removing /var/app/current/ if it exists
2024/01/30 18:42:23.465609 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 18:42:23.465626 [INFO] detected new app is not docker compose app
2024/01/30 18:42:23.465672 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 18:42:23.956424 [INFO] 768c0a61e4d2da9c839b23ed7ac6ccfd242385183baef418b86e68a70661d952

2024/01/30 18:42:28.960820 [INFO] Running command /bin/sh -c docker ps | grep -q 768c0a61e4d2
2024/01/30 18:42:28.982460 [ERROR] docker container quit unexpectedly on 2024-01-30 18:42:28.98244991 +0000 UTC: Command /bin/sh -c docker ps | grep -q 768c0a61e4d2 failed with error exit status 1
2024/01/30 18:42:28.982488 [INFO] Running command /bin/sh -c docker logs 768c0a61e4d2
2024/01/30 18:42:29.027843 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 768c0a61e4d2: Command /bin/sh -c docker ps | grep -q 768c0a61e4d2 failed with error exit status 1 

2024/01/30 18:42:29.027857 [INFO] Executing cleanup logic
2024/01/30 18:42:29.032521 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 19:42:30.012005 [INFO] Starting...
2024/01/30 19:42:30.012050 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 19:42:30.012074 [INFO] reading event message file
2024/01/30 19:42:30.012852 [INFO] Engine received EB command userdata-exec

2024/01/30 19:42:30.020786 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 19:42:30.420715 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 19:42:30.838110 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 19:42:30.838205 [INFO] Engine command: (self-startup)

2024/01/30 19:42:30.838212 [INFO] Downloading EB Application...
2024/01/30 19:42:30.838216 [INFO] Region: eu-west-1
2024/01/30 19:42:30.838219 [INFO] envID: e-8gmkc7rmw6
2024/01/30 19:42:30.838222 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 19:42:30.838225 [INFO] Using manifest file name from command request
2024/01/30 19:42:30.838242 [INFO] Unable to get version manifest file.
2024/01/30 19:42:30.838245 [INFO] Downloading latest manifest available.
2024/01/30 19:42:30.838248 [INFO] Download latest app version manifest
2024/01/30 19:42:30.838381 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 19:42:30.881664 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 19:42:30.881962 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 19:42:30.898282 [INFO] Download successful124bytes downloaded
2024/01/30 19:42:30.898420 [INFO] Trying to read and parse version manifest...
2024/01/30 19:42:30.898495 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 19:42:30.924389 [INFO] Download successful264bytes downloaded
2024/01/30 19:42:30.924746 [INFO] Executing instruction: SyncClock
2024/01/30 19:42:30.924752 [INFO] Starting SyncClock
2024/01/30 19:42:30.924762 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 19:42:30.930220 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 19:42:20 2024
System time     : 0.000000519 seconds fast of NTP time
Last offset     : +0.000000532 seconds
RMS offset      : 0.000008620 seconds
Frequency       : 0.555 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.109 ppm
Root delay      : 0.000410330 seconds
Root dispersion : 0.000315023 seconds
Update interval : 32.6 seconds
Leap status     : Normal

2024/01/30 19:42:30.930241 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 19:42:30.934458 [INFO] 200 OK

2024/01/30 19:42:30.934581 [INFO] Skipping Configure OS
2024/01/30 19:42:30.934590 [INFO] Skipping LockRepo
2024/01/30 19:42:30.934595 [INFO] Skipping GenerateEBBanner
2024/01/30 19:42:30.934601 [INFO] Skipping Install Process Manager
2024/01/30 19:42:30.934606 [INFO] Skipping install syslog
2024/01/30 19:42:30.934611 [INFO] Skipping install cron
2024/01/30 19:42:30.934616 [INFO] Skipping install proxy
2024/01/30 19:42:30.934622 [INFO] Skipping installhealthd
2024/01/30 19:42:30.934627 [INFO] Skipping Install Log Streaming Manager
2024/01/30 19:42:30.934640 [INFO] Skipping install X-Ray
2024/01/30 19:42:30.934644 [INFO] Skipping install Third Party License
2024/01/30 19:42:30.934649 [INFO] Skipping installSqsd
2024/01/30 19:42:30.934653 [INFO] Skipping bootstraphealthd
2024/01/30 19:42:30.934657 [INFO] Skipping Install yum packages
2024/01/30 19:42:30.934661 [INFO] Skipping install docker-compose
2024/01/30 19:42:30.934664 [INFO] Skipping Configure Docker Daemon
2024/01/30 19:42:30.934668 [INFO] Skipping MarkBaked
2024/01/30 19:42:30.934671 [INFO] Skipping TuneSystemSettings
2024/01/30 19:42:30.934676 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 19:42:30.934679 [INFO] Initialize LogRotate files and directories
2024/01/30 19:42:30.949468 [INFO] Skipping BootstrapCFNHup
2024/01/30 19:42:30.949476 [INFO] Executing instruction: StartCFNHup
2024/01/30 19:42:30.949479 [INFO] Start cfn-hup
2024/01/30 19:42:30.949495 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 19:42:30.964539 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 19:42:30.973554 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 19:42:30.973588 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 19:42:30.973592 [INFO] Executing instruction: Start Docker
2024/01/30 19:42:30.973595 [INFO] Starting Docker...
2024/01/30 19:42:30.973676 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 19:42:30.974747 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 19:42:30.975730 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 19:42:31.431157 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 19:42:31.447167 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 19:42:31.447200 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 19:42:31.458852 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 19:42:31.468990 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 19:42:31.480775 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 19:42:31.555218 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 19:42:31.555282 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 19:42:31.856187 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 19:42:32.236417 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 19:42:32.248478 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 19:42:32.585935 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 19:42:32.601580 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 19:42:32.614352 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 19:42:32.639697 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 19:42:34.060478 [INFO] Skipping Setup Docker Options
2024/01/30 19:42:34.060507 [INFO] Skipping MarkBootstrapped
2024/01/30 19:42:34.060511 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 19:42:34.060626 [INFO] Starting SwitchCFNStack
2024/01/30 19:42:34.060632 [INFO] Executing instruction: stopSqsd
2024/01/30 19:42:34.060636 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 19:42:34.060639 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 19:42:34.060643 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 19:42:34.060665 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 19:42:34.482151 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 19:42:34.482230 [INFO] Executing instruction: StagedockerApplication
2024/01/30 19:42:34.482242 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 19:42:34.509876 [INFO] Pruning containers ...
2024/01/30 19:42:34.509905 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 19:42:34.531030 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
768c0a61e4d2   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             lucid_heisenberg

2024/01/30 19:42:34.531060 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 19:42:34.565713 [INFO] Deleted Containers:
768c0a61e4d2da9c839b23ed7ac6ccfd242385183baef418b86e68a70661d952

Total reclaimed space: 0B

2024/01/30 19:42:34.565757 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 19:42:34.589032 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 19:42:34.589372 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 19:42:34.592379 [INFO] application/json

2024/01/30 19:42:34.592402 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 19:42:34.660571 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 19:42:34.660808 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 19:42:34.662683 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 19:42:34.662715 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 19:42:34.662732 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 19:42:34.662734 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 19:42:34.662739 [INFO] Executing instruction: Generate environment file
2024/01/30 19:42:34.662765 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 19:42:34.662768 [INFO] start build docker app
2024/01/30 19:42:34.663183 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 19:42:34.663187 [INFO] fetching image and ports
2024/01/30 19:42:34.664745 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 19:42:34.664806 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 19:42:34.664814 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 19:42:34.664823 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 19:42:35.553869 [INFO] Login Succeeded

2024/01/30 19:42:35.553885 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 19:42:35.553892 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 19:42:35.553908 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 19:42:35.703689 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 19:42:35.703721 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 19:42:35.703725 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 19:42:35.703728 [INFO] start to build docker image
2024/01/30 19:42:35.703744 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 19:42:35.963193 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 19:42:35.963216 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 19:42:35.963225 [INFO] successfully build docker image
2024/01/30 19:42:35.963228 [INFO] save staging docker image id
2024/01/30 19:42:35.963253 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 19:42:35.984289 [INFO] c176d18fbf65

2024/01/30 19:42:35.984399 [INFO] Executing instruction: configure X-Ray
2024/01/30 19:42:35.984405 [INFO] X-Ray is not enabled.
2024/01/30 19:42:35.984408 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 19:42:35.989909 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 19:42:35.991516 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 19:42:36.006486 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 19:42:36.006518 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 19:42:36.017787 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 19:42:36.026499 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 19:42:36.037255 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 19:42:36.111050 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 19:42:36.443692 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 19:42:36.443893 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 19:42:36.786873 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 19:42:36.803832 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 19:42:37.156190 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 19:42:37.166761 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 19:42:37.177017 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 19:42:37.492174 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 19:42:37.502122 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 19:42:37.762374 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 19:42:37.762424 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 19:42:37.773511 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 19:42:37.781658 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 19:42:37.860916 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 19:42:37.861911 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 19:42:37.862851 [INFO] Executing instruction: configure log streaming
2024/01/30 19:42:37.862862 [INFO] log streaming is not enabled
2024/01/30 19:42:37.862865 [INFO] disable log stream
2024/01/30 19:42:37.862878 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 19:42:37.897036 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 19:42:37.914434 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 19:42:37.914458 [INFO] Checking if logs need forced rotation
2024/01/30 19:42:37.914482 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 19:42:38.393701 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 19:42:38.926899 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 19:42:38.928941 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 19:42:39.402478 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 19:42:39.420135 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 19:42:39.420150 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 19:42:39.420168 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 19:42:39.828441 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 19:42:39.828466 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 19:42:39.828564 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 19:42:39.828568 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 19:42:39.828592 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 19:42:39.828613 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 19:42:39.828616 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 19:42:39.828622 [INFO] Executing instruction: stop X-Ray
2024/01/30 19:42:39.828626 [INFO] stop X-Ray ...
2024/01/30 19:42:39.828639 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 19:42:39.844426 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 19:42:39.844457 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 19:42:39.862516 [INFO] Executing instruction: Run Docker Container
2024/01/30 19:42:39.862548 [INFO] stop currently running containers...
2024/01/30 19:42:39.862564 [INFO] detected old app is not docker compose app
2024/01/30 19:42:39.862578 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 19:42:39.903209 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 19:42:39.917755 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 19:42:39.917784 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 19:42:39.930747 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 19:42:39.930844 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 19:42:39.944060 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 19:42:39.944106 [INFO] stopping current container: 768c0a61e4d2
2024/01/30 19:42:39.944116 [INFO] Running command /bin/sh -c docker ps | grep -q 768c0a61e4d2
2024/01/30 19:42:39.968298 [INFO] Running command /bin/sh -c docker ps | grep -q 768c0a61e4d2
2024/01/30 19:42:39.991316 [INFO] Pruning containers ...
2024/01/30 19:42:39.991339 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 19:42:40.013027 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 19:42:40.013056 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 19:42:40.053902 [INFO] Total reclaimed space: 0B

2024/01/30 19:42:40.053933 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 19:42:40.086885 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 19:42:40.086916 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 19:42:40.122018 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 19:42:40.122064 [INFO] Removing /var/app/current/ if it exists
2024/01/30 19:42:40.122277 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 19:42:40.122301 [INFO] detected new app is not docker compose app
2024/01/30 19:42:40.122405 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 19:42:40.542134 [INFO] 47fa331660115bc257589ed26464c185796fc044081136ab87b83a5e989f6e59

2024/01/30 19:42:45.542469 [INFO] Running command /bin/sh -c docker ps | grep -q 47fa33166011
2024/01/30 19:42:45.564044 [ERROR] docker container quit unexpectedly on 2024-01-30 19:42:45.564017343 +0000 UTC: Command /bin/sh -c docker ps | grep -q 47fa33166011 failed with error exit status 1
2024/01/30 19:42:45.564076 [INFO] Running command /bin/sh -c docker logs 47fa33166011
2024/01/30 19:42:45.586699 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 47fa33166011: Command /bin/sh -c docker ps | grep -q 47fa33166011 failed with error exit status 1 

2024/01/30 19:42:45.586709 [INFO] Executing cleanup logic
2024/01/30 19:42:45.586904 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 20:42:46.619288 [INFO] Starting...
2024/01/30 20:42:46.619333 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 20:42:46.619360 [INFO] reading event message file
2024/01/30 20:42:46.620059 [INFO] Engine received EB command userdata-exec

2024/01/30 20:42:46.625876 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 20:42:46.990739 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 20:42:47.437912 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 20:42:47.438387 [INFO] Engine command: (self-startup)

2024/01/30 20:42:47.438399 [INFO] Downloading EB Application...
2024/01/30 20:42:47.438404 [INFO] Region: eu-west-1
2024/01/30 20:42:47.438407 [INFO] envID: e-8gmkc7rmw6
2024/01/30 20:42:47.438411 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 20:42:47.438414 [INFO] Using manifest file name from command request
2024/01/30 20:42:47.438432 [INFO] Unable to get version manifest file.
2024/01/30 20:42:47.438435 [INFO] Downloading latest manifest available.
2024/01/30 20:42:47.438438 [INFO] Download latest app version manifest
2024/01/30 20:42:47.439211 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 20:42:47.486053 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 20:42:47.486262 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 20:42:47.499843 [INFO] Download successful124bytes downloaded
2024/01/30 20:42:47.499989 [INFO] Trying to read and parse version manifest...
2024/01/30 20:42:47.500073 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 20:42:47.522670 [INFO] Download successful264bytes downloaded
2024/01/30 20:42:47.523862 [INFO] Executing instruction: SyncClock
2024/01/30 20:42:47.523872 [INFO] Starting SyncClock
2024/01/30 20:42:47.523944 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 20:42:47.530275 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 20:42:42 2024
System time     : 0.000002384 seconds fast of NTP time
Last offset     : +0.000001427 seconds
RMS offset      : 0.000003962 seconds
Frequency       : 0.527 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.135 ppm
Root delay      : 0.000439693 seconds
Root dispersion : 0.000335908 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/30 20:42:47.530306 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 20:42:47.534639 [INFO] 200 OK

2024/01/30 20:42:47.534730 [INFO] Skipping Configure OS
2024/01/30 20:42:47.534735 [INFO] Skipping LockRepo
2024/01/30 20:42:47.534739 [INFO] Skipping GenerateEBBanner
2024/01/30 20:42:47.534744 [INFO] Skipping Install Process Manager
2024/01/30 20:42:47.534747 [INFO] Skipping install syslog
2024/01/30 20:42:47.534751 [INFO] Skipping install cron
2024/01/30 20:42:47.534755 [INFO] Skipping install proxy
2024/01/30 20:42:47.534759 [INFO] Skipping installhealthd
2024/01/30 20:42:47.534762 [INFO] Skipping Install Log Streaming Manager
2024/01/30 20:42:47.534766 [INFO] Skipping install X-Ray
2024/01/30 20:42:47.534770 [INFO] Skipping install Third Party License
2024/01/30 20:42:47.534775 [INFO] Skipping installSqsd
2024/01/30 20:42:47.534779 [INFO] Skipping bootstraphealthd
2024/01/30 20:42:47.534782 [INFO] Skipping Install yum packages
2024/01/30 20:42:47.534786 [INFO] Skipping install docker-compose
2024/01/30 20:42:47.534790 [INFO] Skipping Configure Docker Daemon
2024/01/30 20:42:47.534793 [INFO] Skipping MarkBaked
2024/01/30 20:42:47.534800 [INFO] Skipping TuneSystemSettings
2024/01/30 20:42:47.534803 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 20:42:47.534805 [INFO] Initialize LogRotate files and directories
2024/01/30 20:42:47.553627 [INFO] Skipping BootstrapCFNHup
2024/01/30 20:42:47.553643 [INFO] Executing instruction: StartCFNHup
2024/01/30 20:42:47.553647 [INFO] Start cfn-hup
2024/01/30 20:42:47.553666 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 20:42:47.579590 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 20:42:47.590569 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 20:42:47.590605 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 20:42:47.590609 [INFO] Executing instruction: Start Docker
2024/01/30 20:42:47.590612 [INFO] Starting Docker...
2024/01/30 20:42:47.590692 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 20:42:47.591828 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 20:42:47.595728 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 20:42:47.912145 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 20:42:47.956178 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 20:42:47.956219 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 20:42:47.972640 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 20:42:47.984711 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 20:42:48.003862 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 20:42:48.124115 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 20:42:48.124144 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 20:42:48.522895 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 20:42:48.794787 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 20:42:48.805859 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 20:42:49.115434 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 20:42:49.124786 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 20:42:49.139159 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 20:42:49.149109 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 20:42:50.358426 [INFO] Skipping Setup Docker Options
2024/01/30 20:42:50.358454 [INFO] Skipping MarkBootstrapped
2024/01/30 20:42:50.358459 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 20:42:50.358577 [INFO] Starting SwitchCFNStack
2024/01/30 20:42:50.358583 [INFO] Executing instruction: stopSqsd
2024/01/30 20:42:50.358586 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 20:42:50.358590 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 20:42:50.358593 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 20:42:50.358615 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 20:42:50.854230 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 20:42:50.854253 [INFO] Executing instruction: StagedockerApplication
2024/01/30 20:42:50.854370 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 20:42:50.875693 [INFO] Pruning containers ...
2024/01/30 20:42:50.875797 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 20:42:50.917587 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
47fa33166011   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             gallant_torvalds

2024/01/30 20:42:50.917617 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 20:42:50.945272 [INFO] Deleted Containers:
47fa331660115bc257589ed26464c185796fc044081136ab87b83a5e989f6e59

Total reclaimed space: 0B

2024/01/30 20:42:50.945311 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 20:42:50.965037 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 20:42:50.965279 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 20:42:50.968297 [INFO] application/json

2024/01/30 20:42:50.968313 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 20:42:51.056561 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 20:42:51.056726 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 20:42:51.057958 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 20:42:51.057988 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 20:42:51.058012 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 20:42:51.058015 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 20:42:51.058018 [INFO] Executing instruction: Generate environment file
2024/01/30 20:42:51.058042 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 20:42:51.058045 [INFO] start build docker app
2024/01/30 20:42:51.058387 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 20:42:51.058390 [INFO] fetching image and ports
2024/01/30 20:42:51.059837 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 20:42:51.059887 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 20:42:51.059902 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 20:42:51.059917 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 20:42:52.057190 [INFO] Login Succeeded

2024/01/30 20:42:52.057215 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 20:42:52.057221 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 20:42:52.057242 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 20:42:52.194370 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 20:42:52.194393 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 20:42:52.194397 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 20:42:52.194400 [INFO] start to build docker image
2024/01/30 20:42:52.194419 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 20:42:52.478541 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 20:42:52.478563 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 20:42:52.478567 [INFO] successfully build docker image
2024/01/30 20:42:52.478569 [INFO] save staging docker image id
2024/01/30 20:42:52.478581 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 20:42:52.503079 [INFO] c176d18fbf65

2024/01/30 20:42:52.503210 [INFO] Executing instruction: configure X-Ray
2024/01/30 20:42:52.503216 [INFO] X-Ray is not enabled.
2024/01/30 20:42:52.503219 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 20:42:52.508838 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 20:42:52.510520 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 20:42:52.522621 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 20:42:52.522654 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 20:42:52.543066 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 20:42:52.570940 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 20:42:52.602724 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 20:42:52.681271 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 20:42:53.110361 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 20:42:53.110445 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 20:42:53.405162 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 20:42:53.417459 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 20:42:53.696826 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 20:42:53.706292 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 20:42:53.716137 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 20:42:54.050831 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 20:42:54.062590 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 20:42:54.422726 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 20:42:54.422761 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 20:42:54.457697 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 20:42:54.471003 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 20:42:54.552463 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 20:42:54.553334 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 20:42:54.554270 [INFO] Executing instruction: configure log streaming
2024/01/30 20:42:54.554279 [INFO] log streaming is not enabled
2024/01/30 20:42:54.554283 [INFO] disable log stream
2024/01/30 20:42:54.554302 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 20:42:54.577878 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 20:42:54.598869 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 20:42:54.598894 [INFO] Checking if logs need forced rotation
2024/01/30 20:42:54.598913 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 20:42:55.172495 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 20:42:55.662159 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 20:42:55.663843 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 20:42:56.137537 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 20:42:56.157531 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 20:42:56.157551 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 20:42:56.157563 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 20:42:56.748982 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 20:42:56.749057 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 20:42:56.749085 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 20:42:56.749089 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 20:42:56.749113 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 20:42:56.749131 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 20:42:56.749134 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 20:42:56.749140 [INFO] Executing instruction: stop X-Ray
2024/01/30 20:42:56.749144 [INFO] stop X-Ray ...
2024/01/30 20:42:56.749156 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 20:42:56.772025 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 20:42:56.772052 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 20:42:56.790425 [INFO] Executing instruction: Run Docker Container
2024/01/30 20:42:56.790456 [INFO] stop currently running containers...
2024/01/30 20:42:56.790468 [INFO] detected old app is not docker compose app
2024/01/30 20:42:56.790479 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 20:42:56.832400 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 20:42:56.852909 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 20:42:56.853017 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 20:42:56.867703 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 20:42:56.867732 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 20:42:56.889527 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 20:42:56.889582 [INFO] stopping current container: 47fa33166011
2024/01/30 20:42:56.889595 [INFO] Running command /bin/sh -c docker ps | grep -q 47fa33166011
2024/01/30 20:42:56.909636 [INFO] Running command /bin/sh -c docker ps | grep -q 47fa33166011
2024/01/30 20:42:56.942076 [INFO] Pruning containers ...
2024/01/30 20:42:56.942099 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 20:42:56.978967 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 20:42:56.978998 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 20:42:56.998218 [INFO] Total reclaimed space: 0B

2024/01/30 20:42:56.998240 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 20:42:57.027258 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 20:42:57.027306 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 20:42:57.060717 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 20:42:57.060738 [INFO] Removing /var/app/current/ if it exists
2024/01/30 20:42:57.060892 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 20:42:57.060909 [INFO] detected new app is not docker compose app
2024/01/30 20:42:57.060956 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 20:42:57.448464 [INFO] dc03d8f3427d9d7c5392e299195ee9b3de7d3f6b3a144386dd61f31acbc80472

2024/01/30 20:43:02.448841 [INFO] Running command /bin/sh -c docker ps | grep -q dc03d8f3427d
2024/01/30 20:43:02.471128 [ERROR] docker container quit unexpectedly on 2024-01-30 20:43:02.471112826 +0000 UTC: Command /bin/sh -c docker ps | grep -q dc03d8f3427d failed with error exit status 1
2024/01/30 20:43:02.471167 [INFO] Running command /bin/sh -c docker logs dc03d8f3427d
2024/01/30 20:43:02.491415 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container dc03d8f3427d: Command /bin/sh -c docker ps | grep -q dc03d8f3427d failed with error exit status 1 

2024/01/30 20:43:02.491464 [INFO] Executing cleanup logic
2024/01/30 20:43:02.491688 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 21:43:03.621574 [INFO] Starting...
2024/01/30 21:43:03.621616 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 21:43:03.621645 [INFO] reading event message file
2024/01/30 21:43:03.622344 [INFO] Engine received EB command userdata-exec

2024/01/30 21:43:03.628795 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 21:43:04.068365 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 21:43:04.580174 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 21:43:04.580250 [INFO] Engine command: (self-startup)

2024/01/30 21:43:04.580259 [INFO] Downloading EB Application...
2024/01/30 21:43:04.580263 [INFO] Region: eu-west-1
2024/01/30 21:43:04.580266 [INFO] envID: e-8gmkc7rmw6
2024/01/30 21:43:04.580271 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 21:43:04.580275 [INFO] Using manifest file name from command request
2024/01/30 21:43:04.580298 [INFO] Unable to get version manifest file.
2024/01/30 21:43:04.580301 [INFO] Downloading latest manifest available.
2024/01/30 21:43:04.580303 [INFO] Download latest app version manifest
2024/01/30 21:43:04.580464 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 21:43:04.625304 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 21:43:04.625486 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 21:43:04.638064 [INFO] Download successful124bytes downloaded
2024/01/30 21:43:04.638203 [INFO] Trying to read and parse version manifest...
2024/01/30 21:43:04.638278 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 21:43:04.662736 [INFO] Download successful264bytes downloaded
2024/01/30 21:43:04.663393 [INFO] Executing instruction: SyncClock
2024/01/30 21:43:04.663401 [INFO] Starting SyncClock
2024/01/30 21:43:04.663414 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 21:43:04.669438 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 21:42:50 2024
System time     : 0.000000009 seconds slow of NTP time
Last offset     : +0.000010145 seconds
RMS offset      : 0.000009801 seconds
Frequency       : 0.620 ppm fast
Residual freq   : +0.018 ppm
Skew            : 0.538 ppm
Root delay      : 0.000436640 seconds
Root dispersion : 0.000337803 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/30 21:43:04.669456 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 21:43:04.674336 [INFO] 200 OK

2024/01/30 21:43:04.674419 [INFO] Skipping Configure OS
2024/01/30 21:43:04.674424 [INFO] Skipping LockRepo
2024/01/30 21:43:04.674428 [INFO] Skipping GenerateEBBanner
2024/01/30 21:43:04.674432 [INFO] Skipping Install Process Manager
2024/01/30 21:43:04.674436 [INFO] Skipping install syslog
2024/01/30 21:43:04.674448 [INFO] Skipping install cron
2024/01/30 21:43:04.674452 [INFO] Skipping install proxy
2024/01/30 21:43:04.674456 [INFO] Skipping installhealthd
2024/01/30 21:43:04.674460 [INFO] Skipping Install Log Streaming Manager
2024/01/30 21:43:04.674464 [INFO] Skipping install X-Ray
2024/01/30 21:43:04.674468 [INFO] Skipping install Third Party License
2024/01/30 21:43:04.674472 [INFO] Skipping installSqsd
2024/01/30 21:43:04.674476 [INFO] Skipping bootstraphealthd
2024/01/30 21:43:04.674480 [INFO] Skipping Install yum packages
2024/01/30 21:43:04.674484 [INFO] Skipping install docker-compose
2024/01/30 21:43:04.674488 [INFO] Skipping Configure Docker Daemon
2024/01/30 21:43:04.674491 [INFO] Skipping MarkBaked
2024/01/30 21:43:04.674495 [INFO] Skipping TuneSystemSettings
2024/01/30 21:43:04.674498 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 21:43:04.674500 [INFO] Initialize LogRotate files and directories
2024/01/30 21:43:04.694039 [INFO] Skipping BootstrapCFNHup
2024/01/30 21:43:04.694056 [INFO] Executing instruction: StartCFNHup
2024/01/30 21:43:04.694060 [INFO] Start cfn-hup
2024/01/30 21:43:04.694081 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 21:43:04.711744 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 21:43:04.731737 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 21:43:04.731788 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 21:43:04.731793 [INFO] Executing instruction: Start Docker
2024/01/30 21:43:04.731796 [INFO] Starting Docker...
2024/01/30 21:43:04.731983 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 21:43:04.733133 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 21:43:04.734084 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 21:43:05.183529 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 21:43:05.207607 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 21:43:05.207655 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 21:43:05.223178 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 21:43:05.231736 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 21:43:05.241101 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 21:43:05.307426 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 21:43:05.307496 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 21:43:05.667546 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 21:43:06.021403 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 21:43:06.035530 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 21:43:06.380111 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 21:43:06.392671 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 21:43:06.408516 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 21:43:06.430867 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 21:43:07.743440 [INFO] Skipping Setup Docker Options
2024/01/30 21:43:07.743494 [INFO] Skipping MarkBootstrapped
2024/01/30 21:43:07.743499 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 21:43:07.743723 [INFO] Starting SwitchCFNStack
2024/01/30 21:43:07.743753 [INFO] Executing instruction: stopSqsd
2024/01/30 21:43:07.743758 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 21:43:07.743761 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 21:43:07.743770 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 21:43:07.743831 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 21:43:08.282001 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 21:43:08.282024 [INFO] Executing instruction: StagedockerApplication
2024/01/30 21:43:08.282035 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 21:43:08.303121 [INFO] Pruning containers ...
2024/01/30 21:43:08.303173 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 21:43:08.324869 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
dc03d8f3427d   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             sweet_hofstadter

2024/01/30 21:43:08.324897 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 21:43:08.351588 [INFO] Deleted Containers:
dc03d8f3427d9d7c5392e299195ee9b3de7d3f6b3a144386dd61f31acbc80472

Total reclaimed space: 0B

2024/01/30 21:43:08.351615 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 21:43:08.372863 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 21:43:08.373116 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 21:43:08.376244 [INFO] application/json

2024/01/30 21:43:08.376266 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 21:43:08.440682 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/30 21:43:08.440845 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 21:43:08.442111 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 21:43:08.442145 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 21:43:08.442160 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 21:43:08.442163 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 21:43:08.442168 [INFO] Executing instruction: Generate environment file
2024/01/30 21:43:08.442195 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 21:43:08.442199 [INFO] start build docker app
2024/01/30 21:43:08.442558 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 21:43:08.442562 [INFO] fetching image and ports
2024/01/30 21:43:08.444118 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 21:43:08.444173 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 21:43:08.444181 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 21:43:08.444191 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 21:43:09.374594 [INFO] Login Succeeded

2024/01/30 21:43:09.374616 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 21:43:09.374622 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 21:43:09.374640 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 21:43:09.534367 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 21:43:09.534393 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 21:43:09.534398 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 21:43:09.534402 [INFO] start to build docker image
2024/01/30 21:43:09.534420 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 21:43:09.826667 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 21:43:09.826697 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 21:43:09.826702 [INFO] successfully build docker image
2024/01/30 21:43:09.826705 [INFO] save staging docker image id
2024/01/30 21:43:09.826718 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 21:43:09.847763 [INFO] c176d18fbf65

2024/01/30 21:43:09.847882 [INFO] Executing instruction: configure X-Ray
2024/01/30 21:43:09.847888 [INFO] X-Ray is not enabled.
2024/01/30 21:43:09.847890 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 21:43:09.853408 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 21:43:09.855185 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 21:43:09.867394 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 21:43:09.867425 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 21:43:09.878616 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 21:43:09.888498 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 21:43:09.901611 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 21:43:10.016738 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 21:43:10.351946 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 21:43:10.352026 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 21:43:10.661153 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 21:43:10.676835 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 21:43:10.984891 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 21:43:11.001171 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 21:43:11.011749 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 21:43:11.302290 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 21:43:11.312421 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 21:43:11.625589 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 21:43:11.625646 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 21:43:11.638881 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 21:43:11.649889 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 21:43:11.747599 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 21:43:11.748558 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 21:43:11.749547 [INFO] Executing instruction: configure log streaming
2024/01/30 21:43:11.749556 [INFO] log streaming is not enabled
2024/01/30 21:43:11.749560 [INFO] disable log stream
2024/01/30 21:43:11.749574 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 21:43:11.767042 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 21:43:11.783177 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 21:43:11.783201 [INFO] Checking if logs need forced rotation
2024/01/30 21:43:11.783224 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 21:43:12.269819 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 21:43:12.778052 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 21:43:12.780390 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 21:43:13.167672 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 21:43:13.186297 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 21:43:13.186313 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 21:43:13.186324 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 21:43:13.550936 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 21:43:13.550976 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 21:43:13.551003 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 21:43:13.551007 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 21:43:13.551026 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 21:43:13.551037 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 21:43:13.551039 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 21:43:13.551044 [INFO] Executing instruction: stop X-Ray
2024/01/30 21:43:13.551046 [INFO] stop X-Ray ...
2024/01/30 21:43:13.551058 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 21:43:13.567059 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 21:43:13.567093 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 21:43:13.583821 [INFO] Executing instruction: Run Docker Container
2024/01/30 21:43:13.583853 [INFO] stop currently running containers...
2024/01/30 21:43:13.583864 [INFO] detected old app is not docker compose app
2024/01/30 21:43:13.583882 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 21:43:13.642530 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 21:43:13.658515 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 21:43:13.658548 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 21:43:13.675573 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 21:43:13.675601 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 21:43:13.690719 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 21:43:13.690763 [INFO] stopping current container: dc03d8f3427d
2024/01/30 21:43:13.690774 [INFO] Running command /bin/sh -c docker ps | grep -q dc03d8f3427d
2024/01/30 21:43:13.714730 [INFO] Running command /bin/sh -c docker ps | grep -q dc03d8f3427d
2024/01/30 21:43:13.735481 [INFO] Pruning containers ...
2024/01/30 21:43:13.735504 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 21:43:13.755757 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 21:43:13.755801 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 21:43:13.775955 [INFO] Total reclaimed space: 0B

2024/01/30 21:43:13.775984 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 21:43:13.797219 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 21:43:13.797285 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 21:43:13.826770 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 21:43:13.826793 [INFO] Removing /var/app/current/ if it exists
2024/01/30 21:43:13.826962 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 21:43:13.826981 [INFO] detected new app is not docker compose app
2024/01/30 21:43:13.827045 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 21:43:14.233752 [INFO] cad6b6c4c9d1294afe3739d35911891e51df318467e128bbcfa2f238b15c027e

2024/01/30 21:43:19.234268 [INFO] Running command /bin/sh -c docker ps | grep -q cad6b6c4c9d1
2024/01/30 21:43:19.258509 [ERROR] docker container quit unexpectedly on 2024-01-30 21:43:19.258498379 +0000 UTC: Command /bin/sh -c docker ps | grep -q cad6b6c4c9d1 failed with error exit status 1
2024/01/30 21:43:19.258536 [INFO] Running command /bin/sh -c docker logs cad6b6c4c9d1
2024/01/30 21:43:19.282633 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container cad6b6c4c9d1: Command /bin/sh -c docker ps | grep -q cad6b6c4c9d1 failed with error exit status 1 

2024/01/30 21:43:19.282645 [INFO] Executing cleanup logic
2024/01/30 21:43:19.282861 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 22:43:20.326041 [INFO] Starting...
2024/01/30 22:43:20.326082 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 22:43:20.326110 [INFO] reading event message file
2024/01/30 22:43:20.326862 [INFO] Engine received EB command userdata-exec

2024/01/30 22:43:20.332392 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 22:43:20.654456 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 22:43:21.122150 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 22:43:21.122243 [INFO] Engine command: (self-startup)

2024/01/30 22:43:21.122251 [INFO] Downloading EB Application...
2024/01/30 22:43:21.122254 [INFO] Region: eu-west-1
2024/01/30 22:43:21.122258 [INFO] envID: e-8gmkc7rmw6
2024/01/30 22:43:21.122261 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 22:43:21.122265 [INFO] Using manifest file name from command request
2024/01/30 22:43:21.122279 [INFO] Unable to get version manifest file.
2024/01/30 22:43:21.122291 [INFO] Downloading latest manifest available.
2024/01/30 22:43:21.122293 [INFO] Download latest app version manifest
2024/01/30 22:43:21.122455 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 22:43:21.160322 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 22:43:21.160502 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 22:43:21.170741 [INFO] Download successful124bytes downloaded
2024/01/30 22:43:21.170876 [INFO] Trying to read and parse version manifest...
2024/01/30 22:43:21.170948 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 22:43:21.204700 [INFO] Download successful264bytes downloaded
2024/01/30 22:43:21.205094 [INFO] Executing instruction: SyncClock
2024/01/30 22:43:21.205100 [INFO] Starting SyncClock
2024/01/30 22:43:21.205112 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 22:43:21.210865 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 22:43:13 2024
System time     : 0.000000741 seconds slow of NTP time
Last offset     : -0.000002003 seconds
RMS offset      : 0.000008806 seconds
Frequency       : 0.724 ppm fast
Residual freq   : -0.003 ppm
Skew            : 0.222 ppm
Root delay      : 0.000398783 seconds
Root dispersion : 0.000522796 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 22:43:21.210884 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 22:43:21.216201 [INFO] 200 OK

2024/01/30 22:43:21.216330 [INFO] Skipping Configure OS
2024/01/30 22:43:21.216337 [INFO] Skipping LockRepo
2024/01/30 22:43:21.216343 [INFO] Skipping GenerateEBBanner
2024/01/30 22:43:21.216349 [INFO] Skipping Install Process Manager
2024/01/30 22:43:21.216354 [INFO] Skipping install syslog
2024/01/30 22:43:21.216359 [INFO] Skipping install cron
2024/01/30 22:43:21.216364 [INFO] Skipping install proxy
2024/01/30 22:43:21.216369 [INFO] Skipping installhealthd
2024/01/30 22:43:21.216375 [INFO] Skipping Install Log Streaming Manager
2024/01/30 22:43:21.216380 [INFO] Skipping install X-Ray
2024/01/30 22:43:21.216385 [INFO] Skipping install Third Party License
2024/01/30 22:43:21.216392 [INFO] Skipping installSqsd
2024/01/30 22:43:21.216397 [INFO] Skipping bootstraphealthd
2024/01/30 22:43:21.216403 [INFO] Skipping Install yum packages
2024/01/30 22:43:21.216408 [INFO] Skipping install docker-compose
2024/01/30 22:43:21.216416 [INFO] Skipping Configure Docker Daemon
2024/01/30 22:43:21.216425 [INFO] Skipping MarkBaked
2024/01/30 22:43:21.216431 [INFO] Skipping TuneSystemSettings
2024/01/30 22:43:21.216435 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 22:43:21.216438 [INFO] Initialize LogRotate files and directories
2024/01/30 22:43:21.231086 [INFO] Skipping BootstrapCFNHup
2024/01/30 22:43:21.231095 [INFO] Executing instruction: StartCFNHup
2024/01/30 22:43:21.231098 [INFO] Start cfn-hup
2024/01/30 22:43:21.231115 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 22:43:21.275086 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 22:43:21.290952 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 22:43:21.290988 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 22:43:21.290993 [INFO] Executing instruction: Start Docker
2024/01/30 22:43:21.290996 [INFO] Starting Docker...
2024/01/30 22:43:21.291170 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 22:43:21.292464 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 22:43:21.293533 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 22:43:21.652370 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 22:43:21.667167 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 22:43:21.667198 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 22:43:21.677909 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 22:43:21.686762 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 22:43:21.700052 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 22:43:21.791624 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 22:43:21.791656 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 22:43:22.103851 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 22:43:22.435588 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 22:43:22.451924 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 22:43:22.818593 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 22:43:22.835351 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 22:43:22.850070 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 22:43:22.860701 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 22:43:24.157984 [INFO] Skipping Setup Docker Options
2024/01/30 22:43:24.158005 [INFO] Skipping MarkBootstrapped
2024/01/30 22:43:24.158009 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 22:43:24.158199 [INFO] Starting SwitchCFNStack
2024/01/30 22:43:24.158206 [INFO] Executing instruction: stopSqsd
2024/01/30 22:43:24.158210 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 22:43:24.158214 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 22:43:24.158217 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 22:43:24.158238 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 22:43:24.611488 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 22:43:24.611564 [INFO] Executing instruction: StagedockerApplication
2024/01/30 22:43:24.611576 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 22:43:24.636086 [INFO] Pruning containers ...
2024/01/30 22:43:24.636128 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 22:43:24.657961 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
cad6b6c4c9d1   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             sleepy_margulis

2024/01/30 22:43:24.657987 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 22:43:24.685616 [INFO] Deleted Containers:
cad6b6c4c9d1294afe3739d35911891e51df318467e128bbcfa2f238b15c027e

Total reclaimed space: 0B

2024/01/30 22:43:24.685642 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 22:43:24.711907 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 22:43:24.712156 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 22:43:24.715383 [INFO] application/json

2024/01/30 22:43:24.715402 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 22:43:24.790294 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 22:43:24.790503 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 22:43:24.791675 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 22:43:24.791700 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 22:43:24.791714 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 22:43:24.791717 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 22:43:24.791723 [INFO] Executing instruction: Generate environment file
2024/01/30 22:43:24.791754 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 22:43:24.791757 [INFO] start build docker app
2024/01/30 22:43:24.792156 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 22:43:24.792167 [INFO] fetching image and ports
2024/01/30 22:43:24.794065 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 22:43:24.794117 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 22:43:24.794143 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 22:43:24.794157 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 22:43:25.739142 [INFO] Login Succeeded

2024/01/30 22:43:25.739158 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 22:43:25.739163 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 22:43:25.739179 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 22:43:25.872102 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 22:43:25.872126 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 22:43:25.872129 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 22:43:25.872133 [INFO] start to build docker image
2024/01/30 22:43:25.872150 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 22:43:26.156807 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 22:43:26.156845 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 22:43:26.156854 [INFO] successfully build docker image
2024/01/30 22:43:26.156862 [INFO] save staging docker image id
2024/01/30 22:43:26.156878 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 22:43:26.201216 [INFO] c176d18fbf65

2024/01/30 22:43:26.201387 [INFO] Executing instruction: configure X-Ray
2024/01/30 22:43:26.201398 [INFO] X-Ray is not enabled.
2024/01/30 22:43:26.201401 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 22:43:26.207640 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 22:43:26.209404 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 22:43:26.226162 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 22:43:26.226196 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 22:43:26.236622 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 22:43:26.252256 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 22:43:26.263761 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 22:43:26.319476 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 22:43:26.688062 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 22:43:26.688247 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 22:43:27.031476 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 22:43:27.043288 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 22:43:27.349283 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 22:43:27.358170 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 22:43:27.366581 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 22:43:27.653749 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 22:43:27.664238 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 22:43:27.963813 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 22:43:27.963852 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 22:43:27.976791 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 22:43:27.988627 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 22:43:28.090068 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 22:43:28.091065 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 22:43:28.092085 [INFO] Executing instruction: configure log streaming
2024/01/30 22:43:28.092097 [INFO] log streaming is not enabled
2024/01/30 22:43:28.092101 [INFO] disable log stream
2024/01/30 22:43:28.092127 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 22:43:28.115099 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 22:43:28.138760 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 22:43:28.138790 [INFO] Checking if logs need forced rotation
2024/01/30 22:43:28.138815 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 22:43:28.696517 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 22:43:29.232598 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 22:43:29.234330 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 22:43:29.346136 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 22:43:29.366353 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 22:43:29.366371 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 22:43:29.366390 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 22:43:29.789450 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 22:43:29.789509 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 22:43:29.789537 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 22:43:29.789540 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 22:43:29.789560 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 22:43:29.789570 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 22:43:29.789573 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 22:43:29.789580 [INFO] Executing instruction: stop X-Ray
2024/01/30 22:43:29.789583 [INFO] stop X-Ray ...
2024/01/30 22:43:29.789596 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 22:43:29.804693 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 22:43:29.804728 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 22:43:29.822079 [INFO] Executing instruction: Run Docker Container
2024/01/30 22:43:29.822111 [INFO] stop currently running containers...
2024/01/30 22:43:29.822122 [INFO] detected old app is not docker compose app
2024/01/30 22:43:29.822139 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 22:43:29.842675 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 22:43:29.858447 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 22:43:29.858481 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 22:43:29.873589 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 22:43:29.873622 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 22:43:29.887901 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 22:43:29.887957 [INFO] stopping current container: cad6b6c4c9d1
2024/01/30 22:43:29.887970 [INFO] Running command /bin/sh -c docker ps | grep -q cad6b6c4c9d1
2024/01/30 22:43:29.909991 [INFO] Running command /bin/sh -c docker ps | grep -q cad6b6c4c9d1
2024/01/30 22:43:29.935300 [INFO] Pruning containers ...
2024/01/30 22:43:29.935324 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 22:43:29.955405 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 22:43:29.955436 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 22:43:29.975706 [INFO] Total reclaimed space: 0B

2024/01/30 22:43:29.975733 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 22:43:29.996848 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 22:43:29.996882 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 22:43:30.026152 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 22:43:30.026177 [INFO] Removing /var/app/current/ if it exists
2024/01/30 22:43:30.026286 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 22:43:30.026304 [INFO] detected new app is not docker compose app
2024/01/30 22:43:30.026358 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 22:43:30.485909 [INFO] 1fd99e671deb52474fec7d574ed211b2bbc2fa8ecbc6ed7afe3c8587370154ed

2024/01/30 22:43:35.487480 [INFO] Running command /bin/sh -c docker ps | grep -q 1fd99e671deb
2024/01/30 22:43:35.513313 [ERROR] docker container quit unexpectedly on 2024-01-30 22:43:35.513295858 +0000 UTC: Command /bin/sh -c docker ps | grep -q 1fd99e671deb failed with error exit status 1
2024/01/30 22:43:35.513339 [INFO] Running command /bin/sh -c docker logs 1fd99e671deb
2024/01/30 22:43:35.540904 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 1fd99e671deb: Command /bin/sh -c docker ps | grep -q 1fd99e671deb failed with error exit status 1 

2024/01/30 22:43:35.542249 [INFO] Executing cleanup logic
2024/01/30 22:43:35.544624 [INFO] Platform Engine finished execution on command: self-startup

2024/01/30 23:43:36.672068 [INFO] Starting...
2024/01/30 23:43:36.672110 [INFO] Starting EBPlatform-PlatformEngine
2024/01/30 23:43:36.672136 [INFO] reading event message file
2024/01/30 23:43:36.672817 [INFO] Engine received EB command userdata-exec

2024/01/30 23:43:36.689395 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 23:43:37.223874 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 23:43:37.687974 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/30 23:43:37.688101 [INFO] Engine command: (self-startup)

2024/01/30 23:43:37.688111 [INFO] Downloading EB Application...
2024/01/30 23:43:37.688120 [INFO] Region: eu-west-1
2024/01/30 23:43:37.688126 [INFO] envID: e-8gmkc7rmw6
2024/01/30 23:43:37.688132 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/30 23:43:37.688138 [INFO] Using manifest file name from command request
2024/01/30 23:43:37.688165 [INFO] Unable to get version manifest file.
2024/01/30 23:43:37.688170 [INFO] Downloading latest manifest available.
2024/01/30 23:43:37.688173 [INFO] Download latest app version manifest
2024/01/30 23:43:37.688304 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/30 23:43:37.725083 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/30 23:43:37.725284 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/30 23:43:37.739202 [INFO] Download successful124bytes downloaded
2024/01/30 23:43:37.739349 [INFO] Trying to read and parse version manifest...
2024/01/30 23:43:37.739427 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 23:43:37.768622 [INFO] Download successful264bytes downloaded
2024/01/30 23:43:37.769001 [INFO] Executing instruction: SyncClock
2024/01/30 23:43:37.769007 [INFO] Starting SyncClock
2024/01/30 23:43:37.769018 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/30 23:43:37.774279 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Tue Jan 30 23:43:22 2024
System time     : 0.000000016 seconds fast of NTP time
Last offset     : -0.000021067 seconds
RMS offset      : 0.000015873 seconds
Frequency       : 0.866 ppm fast
Residual freq   : -0.360 ppm
Skew            : 0.805 ppm
Root delay      : 0.000437121 seconds
Root dispersion : 0.000537851 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/30 23:43:37.774309 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/30 23:43:37.778945 [INFO] 200 OK

2024/01/30 23:43:37.779109 [INFO] Skipping Configure OS
2024/01/30 23:43:37.779116 [INFO] Skipping LockRepo
2024/01/30 23:43:37.779120 [INFO] Skipping GenerateEBBanner
2024/01/30 23:43:37.779133 [INFO] Skipping Install Process Manager
2024/01/30 23:43:37.779137 [INFO] Skipping install syslog
2024/01/30 23:43:37.779142 [INFO] Skipping install cron
2024/01/30 23:43:37.779147 [INFO] Skipping install proxy
2024/01/30 23:43:37.779153 [INFO] Skipping installhealthd
2024/01/30 23:43:37.779158 [INFO] Skipping Install Log Streaming Manager
2024/01/30 23:43:37.779164 [INFO] Skipping install X-Ray
2024/01/30 23:43:37.779168 [INFO] Skipping install Third Party License
2024/01/30 23:43:37.779173 [INFO] Skipping installSqsd
2024/01/30 23:43:37.779177 [INFO] Skipping bootstraphealthd
2024/01/30 23:43:37.779181 [INFO] Skipping Install yum packages
2024/01/30 23:43:37.779184 [INFO] Skipping install docker-compose
2024/01/30 23:43:37.779188 [INFO] Skipping Configure Docker Daemon
2024/01/30 23:43:37.779191 [INFO] Skipping MarkBaked
2024/01/30 23:43:37.779195 [INFO] Skipping TuneSystemSettings
2024/01/30 23:43:37.779198 [INFO] Executing instruction: GetSetupLogRotate
2024/01/30 23:43:37.779200 [INFO] Initialize LogRotate files and directories
2024/01/30 23:43:37.797598 [INFO] Skipping BootstrapCFNHup
2024/01/30 23:43:37.797609 [INFO] Executing instruction: StartCFNHup
2024/01/30 23:43:37.797611 [INFO] Start cfn-hup
2024/01/30 23:43:37.797633 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/30 23:43:37.813019 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/30 23:43:37.822780 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/30 23:43:37.822813 [INFO] Skipping SetupPublishLogCronjob
2024/01/30 23:43:37.822817 [INFO] Executing instruction: Start Docker
2024/01/30 23:43:37.822820 [INFO] Starting Docker...
2024/01/30 23:43:37.822902 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/30 23:43:37.823927 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/30 23:43:37.825148 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 23:43:38.172108 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 23:43:38.187481 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/30 23:43:38.187513 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 23:43:38.198567 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 23:43:38.207948 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 23:43:38.218051 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/30 23:43:38.330251 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/30 23:43:38.330338 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/30 23:43:38.661194 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 23:43:39.068787 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 23:43:39.084111 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 23:43:39.389966 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 23:43:39.398344 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/30 23:43:39.417646 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/30 23:43:39.427472 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/30 23:43:40.768214 [INFO] Skipping Setup Docker Options
2024/01/30 23:43:40.768244 [INFO] Skipping MarkBootstrapped
2024/01/30 23:43:40.768249 [INFO] Executing instruction: Save CFN Stack Info
2024/01/30 23:43:40.768367 [INFO] Starting SwitchCFNStack
2024/01/30 23:43:40.768373 [INFO] Executing instruction: stopSqsd
2024/01/30 23:43:40.768377 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/30 23:43:40.768384 [INFO] Executing instruction: PreBuildEbExtension
2024/01/30 23:43:40.768388 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/30 23:43:40.768409 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/30 23:43:41.201164 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/30 23:43:41.201247 [INFO] Executing instruction: StagedockerApplication
2024/01/30 23:43:41.201261 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/30 23:43:41.231708 [INFO] Pruning containers ...
2024/01/30 23:43:41.231741 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 23:43:41.254114 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
1fd99e671deb   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             funny_yalow

2024/01/30 23:43:41.254144 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 23:43:41.290650 [INFO] Deleted Containers:
1fd99e671deb52474fec7d574ed211b2bbc2fa8ecbc6ed7afe3c8587370154ed

Total reclaimed space: 0B

2024/01/30 23:43:41.290673 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 23:43:41.315228 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 23:43:41.315563 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/30 23:43:41.319504 [INFO] application/json

2024/01/30 23:43:41.319531 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/30 23:43:41.407698 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/30 23:43:41.407873 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/30 23:43:41.409201 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/30 23:43:41.409227 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/30 23:43:41.409241 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/30 23:43:41.409244 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/30 23:43:41.409248 [INFO] Executing instruction: Generate environment file
2024/01/30 23:43:41.409272 [INFO] Executing instruction: Docker Specific Build Application
2024/01/30 23:43:41.409276 [INFO] start build docker app
2024/01/30 23:43:41.409621 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/30 23:43:41.409625 [INFO] fetching image and ports
2024/01/30 23:43:41.411662 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/30 23:43:41.411724 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/30 23:43:41.411735 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/30 23:43:41.411747 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/30 23:43:42.588893 [INFO] Login Succeeded

2024/01/30 23:43:42.589209 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/30 23:43:42.589256 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/30 23:43:42.589280 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 23:43:42.752086 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/30 23:43:42.752113 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 23:43:42.752117 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/30 23:43:42.752122 [INFO] start to build docker image
2024/01/30 23:43:42.752139 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 23:43:43.041766 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/30 23:43:43.041794 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/30 23:43:43.041799 [INFO] successfully build docker image
2024/01/30 23:43:43.041802 [INFO] save staging docker image id
2024/01/30 23:43:43.041816 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/30 23:43:43.064383 [INFO] c176d18fbf65

2024/01/30 23:43:43.064502 [INFO] Executing instruction: configure X-Ray
2024/01/30 23:43:43.064508 [INFO] X-Ray is not enabled.
2024/01/30 23:43:43.064510 [INFO] Executing instruction: configure proxy Nginx
2024/01/30 23:43:43.069454 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/30 23:43:43.071039 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 23:43:43.084689 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/30 23:43:43.084723 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 23:43:43.095824 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 23:43:43.105563 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 23:43:43.115528 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/30 23:43:43.168098 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/30 23:43:43.536937 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/30 23:43:43.537027 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 23:43:43.885071 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 23:43:43.900703 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/30 23:43:44.260799 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/30 23:43:44.271052 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/30 23:43:44.280161 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/30 23:43:44.575888 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/30 23:43:44.586827 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/30 23:43:44.939000 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/30 23:43:44.939029 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/30 23:43:44.957261 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/30 23:43:44.970187 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/30 23:43:45.053019 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/30 23:43:45.053900 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/30 23:43:45.054880 [INFO] Executing instruction: configure log streaming
2024/01/30 23:43:45.054891 [INFO] log streaming is not enabled
2024/01/30 23:43:45.054895 [INFO] disable log stream
2024/01/30 23:43:45.054909 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/30 23:43:45.078801 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/30 23:43:45.105165 [INFO] Executing instruction: GetToggleForceRotate
2024/01/30 23:43:45.105190 [INFO] Checking if logs need forced rotation
2024/01/30 23:43:45.105211 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/30 23:43:45.691822 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/30 23:43:46.191252 [INFO] Procfile not found. Generating default rsyslog config
2024/01/30 23:43:46.193127 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/30 23:43:46.645379 [INFO] Executing instruction: Configure Docker Logging
2024/01/30 23:43:46.662223 [INFO] Executing instruction: PostBuildEbExtension
2024/01/30 23:43:46.662243 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/30 23:43:46.662258 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/30 23:43:47.023438 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/30 23:43:47.023463 [INFO] Executing instruction: CleanEbExtensions
2024/01/30 23:43:47.023487 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/30 23:43:47.023490 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/30 23:43:47.023508 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/30 23:43:47.023519 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/30 23:43:47.023521 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/30 23:43:47.023525 [INFO] Executing instruction: stop X-Ray
2024/01/30 23:43:47.023528 [INFO] stop X-Ray ...
2024/01/30 23:43:47.023539 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/30 23:43:47.037531 [WARN] stopProcess Warning: process xray is not registered 
2024/01/30 23:43:47.037564 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/30 23:43:47.052331 [INFO] Executing instruction: Run Docker Container
2024/01/30 23:43:47.052362 [INFO] stop currently running containers...
2024/01/30 23:43:47.052373 [INFO] detected old app is not docker compose app
2024/01/30 23:43:47.052387 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/30 23:43:47.102400 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/30 23:43:47.116827 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/30 23:43:47.116861 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/30 23:43:47.130715 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/30 23:43:47.130750 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/30 23:43:47.144801 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/30 23:43:47.144848 [INFO] stopping current container: 1fd99e671deb
2024/01/30 23:43:47.144865 [INFO] Running command /bin/sh -c docker ps | grep -q 1fd99e671deb
2024/01/30 23:43:47.165239 [INFO] Running command /bin/sh -c docker ps | grep -q 1fd99e671deb
2024/01/30 23:43:47.188980 [INFO] Pruning containers ...
2024/01/30 23:43:47.189003 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 23:43:47.206859 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 23:43:47.206892 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/30 23:43:47.225651 [INFO] Total reclaimed space: 0B

2024/01/30 23:43:47.225696 [INFO] Running command /bin/sh -c docker ps -a
2024/01/30 23:43:47.244326 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/30 23:43:47.244358 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/30 23:43:47.263160 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/30 23:43:47.263183 [INFO] Removing /var/app/current/ if it exists
2024/01/30 23:43:47.263275 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/30 23:43:47.263292 [INFO] detected new app is not docker compose app
2024/01/30 23:43:47.263340 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/30 23:43:47.695242 [INFO] 295d500210d0dec7cda6d0f1668d477dffff51036e797c04887292a1154e3717

2024/01/30 23:43:52.699551 [INFO] Running command /bin/sh -c docker ps | grep -q 295d500210d0
2024/01/30 23:43:52.724445 [ERROR] docker container quit unexpectedly on 2024-01-30 23:43:52.724433466 +0000 UTC: Command /bin/sh -c docker ps | grep -q 295d500210d0 failed with error exit status 1
2024/01/30 23:43:52.724478 [INFO] Running command /bin/sh -c docker logs 295d500210d0
2024/01/30 23:43:52.770762 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 295d500210d0: Command /bin/sh -c docker ps | grep -q 295d500210d0 failed with error exit status 1 

2024/01/30 23:43:52.770770 [INFO] Executing cleanup logic
2024/01/30 23:43:52.771025 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 00:43:53.599078 [INFO] Starting...
2024/01/31 00:43:53.599118 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 00:43:53.599141 [INFO] reading event message file
2024/01/31 00:43:53.599824 [INFO] Engine received EB command userdata-exec

2024/01/31 00:43:53.605672 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 00:43:54.005684 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 00:43:54.465357 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 00:43:54.465456 [INFO] Engine command: (self-startup)

2024/01/31 00:43:54.465464 [INFO] Downloading EB Application...
2024/01/31 00:43:54.465468 [INFO] Region: eu-west-1
2024/01/31 00:43:54.465471 [INFO] envID: e-8gmkc7rmw6
2024/01/31 00:43:54.465474 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 00:43:54.465486 [INFO] Using manifest file name from command request
2024/01/31 00:43:54.465500 [INFO] Unable to get version manifest file.
2024/01/31 00:43:54.465502 [INFO] Downloading latest manifest available.
2024/01/31 00:43:54.465505 [INFO] Download latest app version manifest
2024/01/31 00:43:54.465620 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 00:43:54.543301 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 00:43:54.543497 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 00:43:54.569436 [INFO] Download successful124bytes downloaded
2024/01/31 00:43:54.569577 [INFO] Trying to read and parse version manifest...
2024/01/31 00:43:54.569652 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 00:43:54.614026 [INFO] Download successful264bytes downloaded
2024/01/31 00:43:54.614450 [INFO] Executing instruction: SyncClock
2024/01/31 00:43:54.614455 [INFO] Starting SyncClock
2024/01/31 00:43:54.614466 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 00:43:54.621318 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 00:43:45 2024
System time     : 0.000002158 seconds slow of NTP time
Last offset     : -0.000000469 seconds
RMS offset      : 0.000008982 seconds
Frequency       : 1.039 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.153 ppm
Root delay      : 0.000413573 seconds
Root dispersion : 0.000510662 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/31 00:43:54.621337 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 00:43:54.625786 [INFO] 200 OK

2024/01/31 00:43:54.625880 [INFO] Skipping Configure OS
2024/01/31 00:43:54.625885 [INFO] Skipping LockRepo
2024/01/31 00:43:54.625889 [INFO] Skipping GenerateEBBanner
2024/01/31 00:43:54.625893 [INFO] Skipping Install Process Manager
2024/01/31 00:43:54.625898 [INFO] Skipping install syslog
2024/01/31 00:43:54.625902 [INFO] Skipping install cron
2024/01/31 00:43:54.625905 [INFO] Skipping install proxy
2024/01/31 00:43:54.625909 [INFO] Skipping installhealthd
2024/01/31 00:43:54.625913 [INFO] Skipping Install Log Streaming Manager
2024/01/31 00:43:54.625917 [INFO] Skipping install X-Ray
2024/01/31 00:43:54.625920 [INFO] Skipping install Third Party License
2024/01/31 00:43:54.625925 [INFO] Skipping installSqsd
2024/01/31 00:43:54.625929 [INFO] Skipping bootstraphealthd
2024/01/31 00:43:54.625933 [INFO] Skipping Install yum packages
2024/01/31 00:43:54.625937 [INFO] Skipping install docker-compose
2024/01/31 00:43:54.625941 [INFO] Skipping Configure Docker Daemon
2024/01/31 00:43:54.625944 [INFO] Skipping MarkBaked
2024/01/31 00:43:54.625951 [INFO] Skipping TuneSystemSettings
2024/01/31 00:43:54.625954 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 00:43:54.625956 [INFO] Initialize LogRotate files and directories
2024/01/31 00:43:54.640829 [INFO] Skipping BootstrapCFNHup
2024/01/31 00:43:54.640839 [INFO] Executing instruction: StartCFNHup
2024/01/31 00:43:54.640842 [INFO] Start cfn-hup
2024/01/31 00:43:54.640862 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 00:43:54.654649 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 00:43:54.663221 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 00:43:54.663254 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 00:43:54.663258 [INFO] Executing instruction: Start Docker
2024/01/31 00:43:54.663261 [INFO] Starting Docker...
2024/01/31 00:43:54.663416 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 00:43:54.664476 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 00:43:54.665556 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 00:43:55.162405 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 00:43:55.178629 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 00:43:55.178662 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 00:43:55.191417 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 00:43:55.202081 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 00:43:55.218184 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 00:43:55.304914 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 00:43:55.304979 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 00:43:55.652764 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 00:43:55.974975 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 00:43:55.987926 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 00:43:56.314906 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 00:43:56.325074 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 00:43:56.343592 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 00:43:56.357934 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 00:43:57.530624 [INFO] Skipping Setup Docker Options
2024/01/31 00:43:57.530645 [INFO] Skipping MarkBootstrapped
2024/01/31 00:43:57.530649 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 00:43:57.530767 [INFO] Starting SwitchCFNStack
2024/01/31 00:43:57.530772 [INFO] Executing instruction: stopSqsd
2024/01/31 00:43:57.530776 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 00:43:57.530779 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 00:43:57.530784 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 00:43:57.530800 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 00:43:58.023377 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 00:43:58.023402 [INFO] Executing instruction: StagedockerApplication
2024/01/31 00:43:58.023414 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 00:43:58.043226 [INFO] Pruning containers ...
2024/01/31 00:43:58.043258 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 00:43:58.065196 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
295d500210d0   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             affectionate_easley

2024/01/31 00:43:58.065232 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 00:43:58.093621 [INFO] Deleted Containers:
295d500210d0dec7cda6d0f1668d477dffff51036e797c04887292a1154e3717

Total reclaimed space: 0B

2024/01/31 00:43:58.093645 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 00:43:58.114364 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 00:43:58.114587 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 00:43:58.118086 [INFO] application/json

2024/01/31 00:43:58.118103 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 00:43:58.196551 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 00:43:58.196708 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 00:43:58.198212 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 00:43:58.198237 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 00:43:58.198257 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 00:43:58.198260 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 00:43:58.198264 [INFO] Executing instruction: Generate environment file
2024/01/31 00:43:58.198289 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 00:43:58.198292 [INFO] start build docker app
2024/01/31 00:43:58.198832 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 00:43:58.198837 [INFO] fetching image and ports
2024/01/31 00:43:58.200748 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 00:43:58.200802 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 00:43:58.200816 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 00:43:58.200825 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 00:43:59.066057 [INFO] Login Succeeded

2024/01/31 00:43:59.066074 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 00:43:59.066080 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 00:43:59.066099 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 00:43:59.220124 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 00:43:59.220149 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 00:43:59.220153 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 00:43:59.220157 [INFO] start to build docker image
2024/01/31 00:43:59.220176 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 00:43:59.476620 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 00:43:59.476643 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 00:43:59.476651 [INFO] successfully build docker image
2024/01/31 00:43:59.476653 [INFO] save staging docker image id
2024/01/31 00:43:59.476670 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 00:43:59.500098 [INFO] c176d18fbf65

2024/01/31 00:43:59.500283 [INFO] Executing instruction: configure X-Ray
2024/01/31 00:43:59.500290 [INFO] X-Ray is not enabled.
2024/01/31 00:43:59.500293 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 00:43:59.507317 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 00:43:59.509070 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 00:43:59.525039 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 00:43:59.525220 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 00:43:59.539296 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 00:43:59.547797 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 00:43:59.558337 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 00:43:59.628101 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 00:43:59.960689 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 00:43:59.960787 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 00:44:00.364060 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 00:44:00.387169 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 00:44:00.737964 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 00:44:00.749630 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 00:44:00.764316 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 00:44:01.121574 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 00:44:01.132739 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 00:44:01.552305 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 00:44:01.552345 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 00:44:01.567363 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 00:44:01.584763 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 00:44:01.674344 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 00:44:01.675560 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 00:44:01.676561 [INFO] Executing instruction: configure log streaming
2024/01/31 00:44:01.676574 [INFO] log streaming is not enabled
2024/01/31 00:44:01.676578 [INFO] disable log stream
2024/01/31 00:44:01.676594 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 00:44:01.693248 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 00:44:01.710823 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 00:44:01.710848 [INFO] Checking if logs need forced rotation
2024/01/31 00:44:01.710868 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 00:44:02.330263 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 00:44:02.880528 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 00:44:02.882465 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 00:44:03.385425 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 00:44:03.402970 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 00:44:03.402985 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 00:44:03.402996 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 00:44:03.855476 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 00:44:03.855505 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 00:44:03.855534 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 00:44:03.855538 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 00:44:03.855563 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 00:44:03.855577 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 00:44:03.855580 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 00:44:03.855587 [INFO] Executing instruction: stop X-Ray
2024/01/31 00:44:03.855591 [INFO] stop X-Ray ...
2024/01/31 00:44:03.855603 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 00:44:03.877460 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 00:44:03.877495 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 00:44:03.895175 [INFO] Executing instruction: Run Docker Container
2024/01/31 00:44:03.895207 [INFO] stop currently running containers...
2024/01/31 00:44:03.895219 [INFO] detected old app is not docker compose app
2024/01/31 00:44:03.895233 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 00:44:03.952354 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 00:44:03.976291 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 00:44:03.976319 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 00:44:03.997624 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 00:44:03.997661 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 00:44:04.026028 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 00:44:04.026080 [INFO] stopping current container: 295d500210d0
2024/01/31 00:44:04.026098 [INFO] Running command /bin/sh -c docker ps | grep -q 295d500210d0
2024/01/31 00:44:04.051866 [INFO] Running command /bin/sh -c docker ps | grep -q 295d500210d0
2024/01/31 00:44:04.078626 [INFO] Pruning containers ...
2024/01/31 00:44:04.078676 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 00:44:04.105496 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 00:44:04.105528 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 00:44:04.128807 [INFO] Total reclaimed space: 0B

2024/01/31 00:44:04.128837 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 00:44:04.153951 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 00:44:04.153985 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 00:44:04.183833 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 00:44:04.183854 [INFO] Removing /var/app/current/ if it exists
2024/01/31 00:44:04.183958 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 00:44:04.183980 [INFO] detected new app is not docker compose app
2024/01/31 00:44:04.184032 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 00:44:04.653850 [INFO] 85057277cd249060e7075dcbc4545861acb6c9a19bb3756eae03547d1a073d09

2024/01/31 00:44:09.654189 [INFO] Running command /bin/sh -c docker ps | grep -q 85057277cd24
2024/01/31 00:44:09.677386 [ERROR] docker container quit unexpectedly on 2024-01-31 00:44:09.677321756 +0000 UTC: Command /bin/sh -c docker ps | grep -q 85057277cd24 failed with error exit status 1
2024/01/31 00:44:09.677419 [INFO] Running command /bin/sh -c docker logs 85057277cd24
2024/01/31 00:44:09.698753 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 85057277cd24: Command /bin/sh -c docker ps | grep -q 85057277cd24 failed with error exit status 1 

2024/01/31 00:44:09.698763 [INFO] Executing cleanup logic
2024/01/31 00:44:09.698950 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 01:44:10.685030 [INFO] Starting...
2024/01/31 01:44:10.685072 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 01:44:10.685100 [INFO] reading event message file
2024/01/31 01:44:10.685861 [INFO] Engine received EB command userdata-exec

2024/01/31 01:44:10.693249 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 01:44:11.146638 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 01:44:11.599368 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 01:44:11.599420 [INFO] Engine command: (self-startup)

2024/01/31 01:44:11.599428 [INFO] Downloading EB Application...
2024/01/31 01:44:11.599433 [INFO] Region: eu-west-1
2024/01/31 01:44:11.599436 [INFO] envID: e-8gmkc7rmw6
2024/01/31 01:44:11.599440 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 01:44:11.599444 [INFO] Using manifest file name from command request
2024/01/31 01:44:11.599459 [INFO] Unable to get version manifest file.
2024/01/31 01:44:11.599462 [INFO] Downloading latest manifest available.
2024/01/31 01:44:11.599465 [INFO] Download latest app version manifest
2024/01/31 01:44:11.599590 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 01:44:11.642339 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 01:44:11.642668 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 01:44:11.654595 [INFO] Download successful124bytes downloaded
2024/01/31 01:44:11.654828 [INFO] Trying to read and parse version manifest...
2024/01/31 01:44:11.654907 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 01:44:11.696104 [INFO] Download successful264bytes downloaded
2024/01/31 01:44:11.696572 [INFO] Executing instruction: SyncClock
2024/01/31 01:44:11.696579 [INFO] Starting SyncClock
2024/01/31 01:44:11.696591 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 01:44:11.704531 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 01:44:08 2024
System time     : 0.000002320 seconds slow of NTP time
Last offset     : -0.000002438 seconds
RMS offset      : 0.000008674 seconds
Frequency       : 0.820 ppm fast
Residual freq   : -0.164 ppm
Skew            : 0.173 ppm
Root delay      : 0.000436234 seconds
Root dispersion : 0.000453890 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/31 01:44:11.704556 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 01:44:11.710684 [INFO] 200 OK

2024/01/31 01:44:11.710792 [INFO] Skipping Configure OS
2024/01/31 01:44:11.710797 [INFO] Skipping LockRepo
2024/01/31 01:44:11.710801 [INFO] Skipping GenerateEBBanner
2024/01/31 01:44:11.710805 [INFO] Skipping Install Process Manager
2024/01/31 01:44:11.710809 [INFO] Skipping install syslog
2024/01/31 01:44:11.710813 [INFO] Skipping install cron
2024/01/31 01:44:11.710816 [INFO] Skipping install proxy
2024/01/31 01:44:11.710820 [INFO] Skipping installhealthd
2024/01/31 01:44:11.710824 [INFO] Skipping Install Log Streaming Manager
2024/01/31 01:44:11.710828 [INFO] Skipping install X-Ray
2024/01/31 01:44:11.710832 [INFO] Skipping install Third Party License
2024/01/31 01:44:11.710837 [INFO] Skipping installSqsd
2024/01/31 01:44:11.710841 [INFO] Skipping bootstraphealthd
2024/01/31 01:44:11.710845 [INFO] Skipping Install yum packages
2024/01/31 01:44:11.710848 [INFO] Skipping install docker-compose
2024/01/31 01:44:11.710852 [INFO] Skipping Configure Docker Daemon
2024/01/31 01:44:11.710856 [INFO] Skipping MarkBaked
2024/01/31 01:44:11.710860 [INFO] Skipping TuneSystemSettings
2024/01/31 01:44:11.710863 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 01:44:11.710865 [INFO] Initialize LogRotate files and directories
2024/01/31 01:44:11.722878 [INFO] Skipping BootstrapCFNHup
2024/01/31 01:44:11.722891 [INFO] Executing instruction: StartCFNHup
2024/01/31 01:44:11.722894 [INFO] Start cfn-hup
2024/01/31 01:44:11.722913 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 01:44:11.740209 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 01:44:11.750928 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 01:44:11.750973 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 01:44:11.750978 [INFO] Executing instruction: Start Docker
2024/01/31 01:44:11.750981 [INFO] Starting Docker...
2024/01/31 01:44:11.751063 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 01:44:11.752307 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 01:44:11.753222 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 01:44:12.150603 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 01:44:12.169618 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 01:44:12.169654 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 01:44:12.180609 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 01:44:12.189537 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 01:44:12.200835 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 01:44:12.291656 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 01:44:12.291699 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 01:44:12.679196 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 01:44:12.975138 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 01:44:12.987109 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 01:44:13.356367 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 01:44:13.367636 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 01:44:13.386105 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 01:44:13.396587 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 01:44:14.723759 [INFO] Skipping Setup Docker Options
2024/01/31 01:44:14.723783 [INFO] Skipping MarkBootstrapped
2024/01/31 01:44:14.723793 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 01:44:14.723907 [INFO] Starting SwitchCFNStack
2024/01/31 01:44:14.723912 [INFO] Executing instruction: stopSqsd
2024/01/31 01:44:14.723916 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 01:44:14.723919 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 01:44:14.723922 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 01:44:14.723941 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 01:44:15.223374 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 01:44:15.223460 [INFO] Executing instruction: StagedockerApplication
2024/01/31 01:44:15.223472 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 01:44:15.247643 [INFO] Pruning containers ...
2024/01/31 01:44:15.247678 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 01:44:15.269700 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
85057277cd24   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             nifty_mayer

2024/01/31 01:44:15.269727 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 01:44:15.295628 [INFO] Deleted Containers:
85057277cd249060e7075dcbc4545861acb6c9a19bb3756eae03547d1a073d09

Total reclaimed space: 0B

2024/01/31 01:44:15.295651 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 01:44:15.318088 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 01:44:15.318320 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 01:44:15.321080 [INFO] application/json

2024/01/31 01:44:15.321099 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 01:44:15.398868 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 01:44:15.399046 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 01:44:15.400245 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 01:44:15.400269 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 01:44:15.400284 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 01:44:15.400286 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 01:44:15.400290 [INFO] Executing instruction: Generate environment file
2024/01/31 01:44:15.400329 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 01:44:15.400332 [INFO] start build docker app
2024/01/31 01:44:15.400688 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 01:44:15.400691 [INFO] fetching image and ports
2024/01/31 01:44:15.402261 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 01:44:15.402327 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 01:44:15.402338 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 01:44:15.402349 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 01:44:16.337265 [INFO] Login Succeeded

2024/01/31 01:44:16.337282 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 01:44:16.337292 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 01:44:16.337307 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 01:44:16.492354 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 01:44:16.492382 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 01:44:16.492385 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 01:44:16.492389 [INFO] start to build docker image
2024/01/31 01:44:16.492408 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 01:44:16.781981 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B 0.0s done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 01:44:16.782009 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 01:44:16.782013 [INFO] successfully build docker image
2024/01/31 01:44:16.782016 [INFO] save staging docker image id
2024/01/31 01:44:16.782031 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 01:44:16.830853 [INFO] c176d18fbf65

2024/01/31 01:44:16.830988 [INFO] Executing instruction: configure X-Ray
2024/01/31 01:44:16.830995 [INFO] X-Ray is not enabled.
2024/01/31 01:44:16.830998 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 01:44:16.835842 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 01:44:16.837363 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 01:44:16.848714 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 01:44:16.848759 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 01:44:16.859623 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 01:44:16.869956 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 01:44:16.883426 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 01:44:16.959029 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 01:44:17.286106 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 01:44:17.286187 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 01:44:17.595969 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 01:44:17.607717 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 01:44:17.899600 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 01:44:17.909814 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 01:44:17.918810 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 01:44:18.225851 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 01:44:18.238426 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 01:44:18.513584 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 01:44:18.513619 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 01:44:18.526627 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 01:44:18.536405 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 01:44:18.640529 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 01:44:18.641471 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 01:44:18.642337 [INFO] Executing instruction: configure log streaming
2024/01/31 01:44:18.642349 [INFO] log streaming is not enabled
2024/01/31 01:44:18.642353 [INFO] disable log stream
2024/01/31 01:44:18.642407 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 01:44:18.664887 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 01:44:18.685670 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 01:44:18.685707 [INFO] Checking if logs need forced rotation
2024/01/31 01:44:18.685731 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 01:44:19.284175 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 01:44:19.776880 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 01:44:19.778341 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 01:44:19.876444 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 01:44:19.893897 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 01:44:19.893915 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 01:44:19.893933 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 01:44:20.357010 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 01:44:20.357046 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 01:44:20.357072 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 01:44:20.357075 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 01:44:20.357103 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 01:44:20.357115 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 01:44:20.357118 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 01:44:20.357124 [INFO] Executing instruction: stop X-Ray
2024/01/31 01:44:20.357127 [INFO] stop X-Ray ...
2024/01/31 01:44:20.357177 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 01:44:20.380507 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 01:44:20.380539 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 01:44:20.400487 [INFO] Executing instruction: Run Docker Container
2024/01/31 01:44:20.400518 [INFO] stop currently running containers...
2024/01/31 01:44:20.400530 [INFO] detected old app is not docker compose app
2024/01/31 01:44:20.400545 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 01:44:20.452397 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 01:44:20.468099 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 01:44:20.468138 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 01:44:20.482209 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 01:44:20.482241 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 01:44:20.500625 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 01:44:20.500681 [INFO] stopping current container: 85057277cd24
2024/01/31 01:44:20.500694 [INFO] Running command /bin/sh -c docker ps | grep -q 85057277cd24
2024/01/31 01:44:20.531255 [INFO] Running command /bin/sh -c docker ps | grep -q 85057277cd24
2024/01/31 01:44:20.555065 [INFO] Pruning containers ...
2024/01/31 01:44:20.555092 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 01:44:20.575364 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 01:44:20.575401 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 01:44:20.594514 [INFO] Total reclaimed space: 0B

2024/01/31 01:44:20.594539 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 01:44:20.614761 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 01:44:20.614789 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 01:44:20.636498 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 01:44:20.636517 [INFO] Removing /var/app/current/ if it exists
2024/01/31 01:44:20.636615 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 01:44:20.636632 [INFO] detected new app is not docker compose app
2024/01/31 01:44:20.636689 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 01:44:21.107341 [INFO] 89205de3eac4bf5600599f91b44b3350bd7d23cc077970de2ee41bf73333efb3

2024/01/31 01:44:26.107728 [INFO] Running command /bin/sh -c docker ps | grep -q 89205de3eac4
2024/01/31 01:44:26.128950 [ERROR] docker container quit unexpectedly on 2024-01-31 01:44:26.128932058 +0000 UTC: Command /bin/sh -c docker ps | grep -q 89205de3eac4 failed with error exit status 1
2024/01/31 01:44:26.128982 [INFO] Running command /bin/sh -c docker logs 89205de3eac4
2024/01/31 01:44:26.148951 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 89205de3eac4: Command /bin/sh -c docker ps | grep -q 89205de3eac4 failed with error exit status 1 

2024/01/31 01:44:26.148960 [INFO] Executing cleanup logic
2024/01/31 01:44:26.149151 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 02:44:27.171715 [INFO] Starting...
2024/01/31 02:44:27.171793 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 02:44:27.171820 [INFO] reading event message file
2024/01/31 02:44:27.173504 [INFO] Engine received EB command userdata-exec

2024/01/31 02:44:27.180153 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 02:44:27.641140 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 02:44:28.114389 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 02:44:28.114567 [INFO] Engine command: (self-startup)

2024/01/31 02:44:28.114582 [INFO] Downloading EB Application...
2024/01/31 02:44:28.114585 [INFO] Region: eu-west-1
2024/01/31 02:44:28.114596 [INFO] envID: e-8gmkc7rmw6
2024/01/31 02:44:28.114598 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 02:44:28.114601 [INFO] Using manifest file name from command request
2024/01/31 02:44:28.114614 [INFO] Unable to get version manifest file.
2024/01/31 02:44:28.114616 [INFO] Downloading latest manifest available.
2024/01/31 02:44:28.114618 [INFO] Download latest app version manifest
2024/01/31 02:44:28.114747 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 02:44:28.157772 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 02:44:28.157951 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 02:44:28.172037 [INFO] Download successful124bytes downloaded
2024/01/31 02:44:28.172193 [INFO] Trying to read and parse version manifest...
2024/01/31 02:44:28.172272 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 02:44:28.199588 [INFO] Download successful264bytes downloaded
2024/01/31 02:44:28.199946 [INFO] Executing instruction: SyncClock
2024/01/31 02:44:28.199952 [INFO] Starting SyncClock
2024/01/31 02:44:28.199969 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 02:44:28.207402 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 02:44:17 2024
System time     : 0.000003137 seconds slow of NTP time
Last offset     : -0.000003095 seconds
RMS offset      : 0.000003793 seconds
Frequency       : 0.790 ppm fast
Residual freq   : -0.005 ppm
Skew            : 0.301 ppm
Root delay      : 0.000391464 seconds
Root dispersion : 0.000527047 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 02:44:28.207484 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 02:44:28.211874 [INFO] 200 OK

2024/01/31 02:44:28.212041 [INFO] Skipping Configure OS
2024/01/31 02:44:28.212050 [INFO] Skipping LockRepo
2024/01/31 02:44:28.212054 [INFO] Skipping GenerateEBBanner
2024/01/31 02:44:28.212058 [INFO] Skipping Install Process Manager
2024/01/31 02:44:28.212062 [INFO] Skipping install syslog
2024/01/31 02:44:28.212066 [INFO] Skipping install cron
2024/01/31 02:44:28.212069 [INFO] Skipping install proxy
2024/01/31 02:44:28.212073 [INFO] Skipping installhealthd
2024/01/31 02:44:28.212077 [INFO] Skipping Install Log Streaming Manager
2024/01/31 02:44:28.212081 [INFO] Skipping install X-Ray
2024/01/31 02:44:28.212085 [INFO] Skipping install Third Party License
2024/01/31 02:44:28.212090 [INFO] Skipping installSqsd
2024/01/31 02:44:28.212097 [INFO] Skipping bootstraphealthd
2024/01/31 02:44:28.212101 [INFO] Skipping Install yum packages
2024/01/31 02:44:28.212105 [INFO] Skipping install docker-compose
2024/01/31 02:44:28.212109 [INFO] Skipping Configure Docker Daemon
2024/01/31 02:44:28.212113 [INFO] Skipping MarkBaked
2024/01/31 02:44:28.212117 [INFO] Skipping TuneSystemSettings
2024/01/31 02:44:28.212120 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 02:44:28.212122 [INFO] Initialize LogRotate files and directories
2024/01/31 02:44:28.227089 [INFO] Skipping BootstrapCFNHup
2024/01/31 02:44:28.227112 [INFO] Executing instruction: StartCFNHup
2024/01/31 02:44:28.227150 [INFO] Start cfn-hup
2024/01/31 02:44:28.227177 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 02:44:28.243010 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 02:44:28.256417 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 02:44:28.256455 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 02:44:28.256458 [INFO] Executing instruction: Start Docker
2024/01/31 02:44:28.256462 [INFO] Starting Docker...
2024/01/31 02:44:28.256594 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 02:44:28.257695 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 02:44:28.258879 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 02:44:28.692914 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 02:44:28.714845 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 02:44:28.714883 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 02:44:28.733313 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 02:44:28.743893 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 02:44:28.755473 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 02:44:28.864067 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 02:44:28.864118 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 02:44:29.244995 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 02:44:29.521469 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 02:44:29.534214 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 02:44:29.874473 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 02:44:29.884770 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 02:44:29.899259 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 02:44:29.908893 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 02:44:31.265442 [INFO] Skipping Setup Docker Options
2024/01/31 02:44:31.265541 [INFO] Skipping MarkBootstrapped
2024/01/31 02:44:31.265546 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 02:44:31.265669 [INFO] Starting SwitchCFNStack
2024/01/31 02:44:31.265676 [INFO] Executing instruction: stopSqsd
2024/01/31 02:44:31.265680 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 02:44:31.265684 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 02:44:31.265688 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 02:44:31.265707 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 02:44:31.790966 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 02:44:31.790992 [INFO] Executing instruction: StagedockerApplication
2024/01/31 02:44:31.791008 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 02:44:31.817587 [INFO] Pruning containers ...
2024/01/31 02:44:31.817617 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 02:44:31.838919 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
89205de3eac4   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             elegant_torvalds

2024/01/31 02:44:31.839338 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 02:44:31.873178 [INFO] Deleted Containers:
89205de3eac4bf5600599f91b44b3350bd7d23cc077970de2ee41bf73333efb3

Total reclaimed space: 0B

2024/01/31 02:44:31.873199 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 02:44:31.919034 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 02:44:31.919329 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 02:44:31.923761 [INFO] application/json

2024/01/31 02:44:31.923786 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 02:44:32.002517 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 02:44:32.002710 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 02:44:32.003996 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 02:44:32.004021 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 02:44:32.004039 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 02:44:32.004043 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 02:44:32.004049 [INFO] Executing instruction: Generate environment file
2024/01/31 02:44:32.004076 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 02:44:32.004079 [INFO] start build docker app
2024/01/31 02:44:32.004429 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 02:44:32.004433 [INFO] fetching image and ports
2024/01/31 02:44:32.006208 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 02:44:32.006261 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 02:44:32.006269 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 02:44:32.006280 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 02:44:32.926584 [INFO] Login Succeeded

2024/01/31 02:44:32.926599 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 02:44:32.926605 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 02:44:32.926622 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 02:44:33.066472 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 02:44:33.066497 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 02:44:33.066501 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 02:44:33.066505 [INFO] start to build docker image
2024/01/31 02:44:33.066522 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 02:44:33.321937 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 02:44:33.321973 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 02:44:33.321978 [INFO] successfully build docker image
2024/01/31 02:44:33.321981 [INFO] save staging docker image id
2024/01/31 02:44:33.321994 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 02:44:33.345253 [INFO] c176d18fbf65

2024/01/31 02:44:33.345495 [INFO] Executing instruction: configure X-Ray
2024/01/31 02:44:33.345502 [INFO] X-Ray is not enabled.
2024/01/31 02:44:33.345506 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 02:44:33.351477 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 02:44:33.353172 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 02:44:33.366140 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 02:44:33.366173 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 02:44:33.376476 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 02:44:33.384255 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 02:44:33.394100 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 02:44:33.479148 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 02:44:33.815770 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 02:44:33.815955 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 02:44:34.170264 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 02:44:34.185684 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 02:44:34.502005 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 02:44:34.512200 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 02:44:34.521980 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 02:44:34.849827 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 02:44:34.859293 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 02:44:35.200082 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 02:44:35.200117 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 02:44:35.213794 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 02:44:35.225009 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 02:44:35.316940 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 02:44:35.317888 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 02:44:35.318979 [INFO] Executing instruction: configure log streaming
2024/01/31 02:44:35.318988 [INFO] log streaming is not enabled
2024/01/31 02:44:35.318991 [INFO] disable log stream
2024/01/31 02:44:35.319008 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 02:44:35.357230 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 02:44:35.381453 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 02:44:35.381477 [INFO] Checking if logs need forced rotation
2024/01/31 02:44:35.381497 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 02:44:35.842626 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 02:44:36.416575 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 02:44:36.418306 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 02:44:36.909222 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 02:44:36.927027 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 02:44:36.927041 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 02:44:36.927052 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 02:44:37.356707 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 02:44:37.356893 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 02:44:37.356918 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 02:44:37.356921 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 02:44:37.357020 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 02:44:37.357034 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 02:44:37.357036 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 02:44:37.357042 [INFO] Executing instruction: stop X-Ray
2024/01/31 02:44:37.357045 [INFO] stop X-Ray ...
2024/01/31 02:44:37.357058 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 02:44:37.376824 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 02:44:37.376859 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 02:44:37.397398 [INFO] Executing instruction: Run Docker Container
2024/01/31 02:44:37.397432 [INFO] stop currently running containers...
2024/01/31 02:44:37.397444 [INFO] detected old app is not docker compose app
2024/01/31 02:44:37.397458 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 02:44:37.442391 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 02:44:37.465620 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 02:44:37.465661 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 02:44:37.480517 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 02:44:37.480551 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 02:44:37.495280 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 02:44:37.495328 [INFO] stopping current container: 89205de3eac4
2024/01/31 02:44:37.495341 [INFO] Running command /bin/sh -c docker ps | grep -q 89205de3eac4
2024/01/31 02:44:37.516301 [INFO] Running command /bin/sh -c docker ps | grep -q 89205de3eac4
2024/01/31 02:44:37.535908 [INFO] Pruning containers ...
2024/01/31 02:44:37.535936 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 02:44:37.557209 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 02:44:37.557242 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 02:44:37.575913 [INFO] Total reclaimed space: 0B

2024/01/31 02:44:37.575937 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 02:44:37.593982 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 02:44:37.594011 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 02:44:37.611953 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 02:44:37.611974 [INFO] Removing /var/app/current/ if it exists
2024/01/31 02:44:37.612062 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 02:44:37.612079 [INFO] detected new app is not docker compose app
2024/01/31 02:44:37.612129 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 02:44:37.993415 [INFO] a16968d69a867e3a486288b3c9cd71e8aa44dad2307ed67bc29426cd7058f1c7

2024/01/31 02:44:42.997814 [INFO] Running command /bin/sh -c docker ps | grep -q a16968d69a86
2024/01/31 02:44:43.024478 [ERROR] docker container quit unexpectedly on 2024-01-31 02:44:43.024462359 +0000 UTC: Command /bin/sh -c docker ps | grep -q a16968d69a86 failed with error exit status 1
2024/01/31 02:44:43.025388 [INFO] Running command /bin/sh -c docker logs a16968d69a86
2024/01/31 02:44:43.052003 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container a16968d69a86: Command /bin/sh -c docker ps | grep -q a16968d69a86 failed with error exit status 1 

2024/01/31 02:44:43.052016 [INFO] Executing cleanup logic
2024/01/31 02:44:43.052230 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 03:44:44.062075 [INFO] Starting...
2024/01/31 03:44:44.062117 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 03:44:44.062141 [INFO] reading event message file
2024/01/31 03:44:44.062906 [INFO] Engine received EB command userdata-exec

2024/01/31 03:44:44.076104 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 03:44:44.540036 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 03:44:45.036431 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 03:44:45.036529 [INFO] Engine command: (self-startup)

2024/01/31 03:44:45.036538 [INFO] Downloading EB Application...
2024/01/31 03:44:45.036543 [INFO] Region: eu-west-1
2024/01/31 03:44:45.036546 [INFO] envID: e-8gmkc7rmw6
2024/01/31 03:44:45.036549 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 03:44:45.036553 [INFO] Using manifest file name from command request
2024/01/31 03:44:45.037354 [INFO] Unable to get version manifest file.
2024/01/31 03:44:45.037364 [INFO] Downloading latest manifest available.
2024/01/31 03:44:45.037368 [INFO] Download latest app version manifest
2024/01/31 03:44:45.038633 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 03:44:45.086249 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 03:44:45.086428 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 03:44:45.096995 [INFO] Download successful124bytes downloaded
2024/01/31 03:44:45.097132 [INFO] Trying to read and parse version manifest...
2024/01/31 03:44:45.097202 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 03:44:45.189561 [INFO] Download successful264bytes downloaded
2024/01/31 03:44:45.190029 [INFO] Executing instruction: SyncClock
2024/01/31 03:44:45.190036 [INFO] Starting SyncClock
2024/01/31 03:44:45.190046 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 03:44:45.197805 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 03:44:36 2024
System time     : 0.000001915 seconds fast of NTP time
Last offset     : +0.000002132 seconds
RMS offset      : 0.000003536 seconds
Frequency       : 0.697 ppm fast
Residual freq   : +0.003 ppm
Skew            : 0.095 ppm
Root delay      : 0.000437314 seconds
Root dispersion : 0.000335955 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/31 03:44:45.197832 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 03:44:45.202010 [INFO] 200 OK

2024/01/31 03:44:45.202104 [INFO] Skipping Configure OS
2024/01/31 03:44:45.202109 [INFO] Skipping LockRepo
2024/01/31 03:44:45.202113 [INFO] Skipping GenerateEBBanner
2024/01/31 03:44:45.202118 [INFO] Skipping Install Process Manager
2024/01/31 03:44:45.202122 [INFO] Skipping install syslog
2024/01/31 03:44:45.202125 [INFO] Skipping install cron
2024/01/31 03:44:45.202129 [INFO] Skipping install proxy
2024/01/31 03:44:45.202133 [INFO] Skipping installhealthd
2024/01/31 03:44:45.202137 [INFO] Skipping Install Log Streaming Manager
2024/01/31 03:44:45.202141 [INFO] Skipping install X-Ray
2024/01/31 03:44:45.202145 [INFO] Skipping install Third Party License
2024/01/31 03:44:45.202149 [INFO] Skipping installSqsd
2024/01/31 03:44:45.202153 [INFO] Skipping bootstraphealthd
2024/01/31 03:44:45.202157 [INFO] Skipping Install yum packages
2024/01/31 03:44:45.202161 [INFO] Skipping install docker-compose
2024/01/31 03:44:45.202164 [INFO] Skipping Configure Docker Daemon
2024/01/31 03:44:45.202168 [INFO] Skipping MarkBaked
2024/01/31 03:44:45.202172 [INFO] Skipping TuneSystemSettings
2024/01/31 03:44:45.202174 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 03:44:45.202176 [INFO] Initialize LogRotate files and directories
2024/01/31 03:44:45.221661 [INFO] Skipping BootstrapCFNHup
2024/01/31 03:44:45.221671 [INFO] Executing instruction: StartCFNHup
2024/01/31 03:44:45.221674 [INFO] Start cfn-hup
2024/01/31 03:44:45.221691 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 03:44:45.235080 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 03:44:45.245642 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 03:44:45.245676 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 03:44:45.245680 [INFO] Executing instruction: Start Docker
2024/01/31 03:44:45.245683 [INFO] Starting Docker...
2024/01/31 03:44:45.245765 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 03:44:45.246783 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 03:44:45.247750 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 03:44:45.630488 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 03:44:45.645493 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 03:44:45.645530 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 03:44:45.656948 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 03:44:45.673002 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 03:44:45.701846 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 03:44:45.799852 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 03:44:45.799903 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 03:44:46.060366 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 03:44:46.390161 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 03:44:46.406253 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 03:44:46.773949 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 03:44:46.784566 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 03:44:46.800464 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 03:44:46.817322 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 03:44:47.929510 [INFO] Skipping Setup Docker Options
2024/01/31 03:44:47.929545 [INFO] Skipping MarkBootstrapped
2024/01/31 03:44:47.929550 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 03:44:47.929721 [INFO] Starting SwitchCFNStack
2024/01/31 03:44:47.929728 [INFO] Executing instruction: stopSqsd
2024/01/31 03:44:47.929732 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 03:44:47.929735 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 03:44:47.929738 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 03:44:47.929762 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 03:44:48.413391 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 03:44:48.413414 [INFO] Executing instruction: StagedockerApplication
2024/01/31 03:44:48.413449 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 03:44:48.438380 [INFO] Pruning containers ...
2024/01/31 03:44:48.438419 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 03:44:48.460607 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
a16968d69a86   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             clever_euclid

2024/01/31 03:44:48.460651 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 03:44:48.495965 [INFO] Deleted Containers:
a16968d69a867e3a486288b3c9cd71e8aa44dad2307ed67bc29426cd7058f1c7

Total reclaimed space: 0B

2024/01/31 03:44:48.495990 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 03:44:48.525837 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 03:44:48.526131 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 03:44:48.529014 [INFO] application/json

2024/01/31 03:44:48.529034 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 03:44:48.622960 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 03:44:48.623134 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 03:44:48.624405 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 03:44:48.624430 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 03:44:48.624448 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 03:44:48.624451 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 03:44:48.624455 [INFO] Executing instruction: Generate environment file
2024/01/31 03:44:48.624480 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 03:44:48.624484 [INFO] start build docker app
2024/01/31 03:44:48.624838 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 03:44:48.624843 [INFO] fetching image and ports
2024/01/31 03:44:48.632659 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 03:44:48.632757 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 03:44:48.632769 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 03:44:48.632783 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 03:44:49.641303 [INFO] Login Succeeded

2024/01/31 03:44:49.641320 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 03:44:49.641330 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 03:44:49.641424 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 03:44:49.804117 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 03:44:49.804143 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 03:44:49.804147 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 03:44:49.804149 [INFO] start to build docker image
2024/01/31 03:44:49.804166 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 03:44:50.067803 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 03:44:50.067834 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 03:44:50.067839 [INFO] successfully build docker image
2024/01/31 03:44:50.067841 [INFO] save staging docker image id
2024/01/31 03:44:50.067855 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 03:44:50.096993 [INFO] c176d18fbf65

2024/01/31 03:44:50.097124 [INFO] Executing instruction: configure X-Ray
2024/01/31 03:44:50.097131 [INFO] X-Ray is not enabled.
2024/01/31 03:44:50.097133 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 03:44:50.103135 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 03:44:50.109374 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 03:44:50.123718 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 03:44:50.123748 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 03:44:50.134168 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 03:44:50.144076 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 03:44:50.156303 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 03:44:50.245851 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 03:44:50.553030 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 03:44:50.553119 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 03:44:50.873820 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 03:44:50.885908 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 03:44:51.258303 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 03:44:51.274827 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 03:44:51.289525 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 03:44:51.571869 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 03:44:51.581641 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 03:44:51.844149 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 03:44:51.844247 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 03:44:51.856952 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 03:44:51.865488 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 03:44:51.937772 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 03:44:51.938577 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 03:44:51.939434 [INFO] Executing instruction: configure log streaming
2024/01/31 03:44:51.939444 [INFO] log streaming is not enabled
2024/01/31 03:44:51.939448 [INFO] disable log stream
2024/01/31 03:44:51.939463 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 03:44:51.962202 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 03:44:51.992034 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 03:44:51.992060 [INFO] Checking if logs need forced rotation
2024/01/31 03:44:51.992082 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 03:44:52.571493 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 03:44:53.056594 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 03:44:53.061482 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 03:44:53.110846 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 03:44:53.129225 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 03:44:53.129244 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 03:44:53.129255 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 03:44:53.582670 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 03:44:53.582696 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 03:44:53.582720 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 03:44:53.582724 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 03:44:53.582746 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 03:44:53.582759 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 03:44:53.582762 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 03:44:53.582767 [INFO] Executing instruction: stop X-Ray
2024/01/31 03:44:53.582771 [INFO] stop X-Ray ...
2024/01/31 03:44:53.582783 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 03:44:53.615949 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 03:44:53.615981 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 03:44:53.643197 [INFO] Executing instruction: Run Docker Container
2024/01/31 03:44:53.643229 [INFO] stop currently running containers...
2024/01/31 03:44:53.643269 [INFO] detected old app is not docker compose app
2024/01/31 03:44:53.643287 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 03:44:53.693937 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 03:44:53.711078 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 03:44:53.711111 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 03:44:53.725485 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 03:44:53.725527 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 03:44:53.740137 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 03:44:53.740300 [INFO] stopping current container: a16968d69a86
2024/01/31 03:44:53.740313 [INFO] Running command /bin/sh -c docker ps | grep -q a16968d69a86
2024/01/31 03:44:53.773130 [INFO] Running command /bin/sh -c docker ps | grep -q a16968d69a86
2024/01/31 03:44:53.809362 [INFO] Pruning containers ...
2024/01/31 03:44:53.809390 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 03:44:53.841818 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 03:44:53.841846 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 03:44:53.864065 [INFO] Total reclaimed space: 0B

2024/01/31 03:44:53.864104 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 03:44:53.892519 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 03:44:53.892557 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 03:44:53.915696 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 03:44:53.915727 [INFO] Removing /var/app/current/ if it exists
2024/01/31 03:44:53.915886 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 03:44:53.915911 [INFO] detected new app is not docker compose app
2024/01/31 03:44:53.915959 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 03:44:54.339857 [INFO] 5b4899042eed4c58e03cb190f392b51e16fdea69a52020652a8c36e246f86bbc

2024/01/31 03:44:59.342468 [INFO] Running command /bin/sh -c docker ps | grep -q 5b4899042eed
2024/01/31 03:44:59.367706 [ERROR] docker container quit unexpectedly on 2024-01-31 03:44:59.367692304 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5b4899042eed failed with error exit status 1
2024/01/31 03:44:59.367737 [INFO] Running command /bin/sh -c docker logs 5b4899042eed
2024/01/31 03:44:59.390105 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5b4899042eed: Command /bin/sh -c docker ps | grep -q 5b4899042eed failed with error exit status 1 

2024/01/31 03:44:59.390115 [INFO] Executing cleanup logic
2024/01/31 03:44:59.390306 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 04:45:00.484402 [INFO] Starting...
2024/01/31 04:45:00.484446 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 04:45:00.484474 [INFO] reading event message file
2024/01/31 04:45:00.485253 [INFO] Engine received EB command userdata-exec

2024/01/31 04:45:00.491782 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 04:45:00.910002 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 04:45:01.447512 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 04:45:01.447599 [INFO] Engine command: (self-startup)

2024/01/31 04:45:01.447623 [INFO] Downloading EB Application...
2024/01/31 04:45:01.447627 [INFO] Region: eu-west-1
2024/01/31 04:45:01.447630 [INFO] envID: e-8gmkc7rmw6
2024/01/31 04:45:01.447634 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 04:45:01.447637 [INFO] Using manifest file name from command request
2024/01/31 04:45:01.447655 [INFO] Unable to get version manifest file.
2024/01/31 04:45:01.447658 [INFO] Downloading latest manifest available.
2024/01/31 04:45:01.447661 [INFO] Download latest app version manifest
2024/01/31 04:45:01.447825 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 04:45:01.495459 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 04:45:01.495791 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 04:45:01.516117 [INFO] Download successful124bytes downloaded
2024/01/31 04:45:01.516281 [INFO] Trying to read and parse version manifest...
2024/01/31 04:45:01.516464 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 04:45:01.562058 [INFO] Download successful264bytes downloaded
2024/01/31 04:45:01.562618 [INFO] Executing instruction: SyncClock
2024/01/31 04:45:01.562624 [INFO] Starting SyncClock
2024/01/31 04:45:01.562633 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 04:45:01.574486 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 04:44:59 2024
System time     : 0.000001109 seconds slow of NTP time
Last offset     : -0.000000017 seconds
RMS offset      : 0.000002158 seconds
Frequency       : 0.749 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.033 ppm
Root delay      : 0.000414608 seconds
Root dispersion : 0.000299724 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/31 04:45:01.574523 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 04:45:01.581327 [INFO] 200 OK

2024/01/31 04:45:01.581460 [INFO] Skipping Configure OS
2024/01/31 04:45:01.581466 [INFO] Skipping LockRepo
2024/01/31 04:45:01.581470 [INFO] Skipping GenerateEBBanner
2024/01/31 04:45:01.581475 [INFO] Skipping Install Process Manager
2024/01/31 04:45:01.581479 [INFO] Skipping install syslog
2024/01/31 04:45:01.581483 [INFO] Skipping install cron
2024/01/31 04:45:01.581486 [INFO] Skipping install proxy
2024/01/31 04:45:01.581490 [INFO] Skipping installhealthd
2024/01/31 04:45:01.581494 [INFO] Skipping Install Log Streaming Manager
2024/01/31 04:45:01.581497 [INFO] Skipping install X-Ray
2024/01/31 04:45:01.581501 [INFO] Skipping install Third Party License
2024/01/31 04:45:01.581506 [INFO] Skipping installSqsd
2024/01/31 04:45:01.581510 [INFO] Skipping bootstraphealthd
2024/01/31 04:45:01.581513 [INFO] Skipping Install yum packages
2024/01/31 04:45:01.581517 [INFO] Skipping install docker-compose
2024/01/31 04:45:01.581523 [INFO] Skipping Configure Docker Daemon
2024/01/31 04:45:01.581527 [INFO] Skipping MarkBaked
2024/01/31 04:45:01.581534 [INFO] Skipping TuneSystemSettings
2024/01/31 04:45:01.581537 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 04:45:01.581539 [INFO] Initialize LogRotate files and directories
2024/01/31 04:45:01.600702 [INFO] Skipping BootstrapCFNHup
2024/01/31 04:45:01.600715 [INFO] Executing instruction: StartCFNHup
2024/01/31 04:45:01.600719 [INFO] Start cfn-hup
2024/01/31 04:45:01.600737 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 04:45:01.620976 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 04:45:01.630944 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 04:45:01.631094 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 04:45:01.631101 [INFO] Executing instruction: Start Docker
2024/01/31 04:45:01.631112 [INFO] Starting Docker...
2024/01/31 04:45:01.631228 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 04:45:01.632383 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 04:45:01.633625 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 04:45:01.956043 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 04:45:01.997433 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 04:45:01.997585 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 04:45:02.041177 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 04:45:02.052100 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 04:45:02.062899 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 04:45:02.192898 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 04:45:02.192939 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 04:45:02.614085 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 04:45:03.066835 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 04:45:03.080960 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 04:45:03.380721 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 04:45:03.389766 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 04:45:03.411046 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 04:45:03.435753 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 04:45:04.708299 [INFO] Skipping Setup Docker Options
2024/01/31 04:45:04.708320 [INFO] Skipping MarkBootstrapped
2024/01/31 04:45:04.708324 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 04:45:04.708435 [INFO] Starting SwitchCFNStack
2024/01/31 04:45:04.708440 [INFO] Executing instruction: stopSqsd
2024/01/31 04:45:04.708444 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 04:45:04.708447 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 04:45:04.708451 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 04:45:04.708468 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 04:45:05.220009 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 04:45:05.220060 [INFO] Executing instruction: StagedockerApplication
2024/01/31 04:45:05.220073 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 04:45:05.240803 [INFO] Pruning containers ...
2024/01/31 04:45:05.240833 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 04:45:05.264580 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
5b4899042eed   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             quizzical_mestorf

2024/01/31 04:45:05.264613 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 04:45:05.297851 [INFO] Deleted Containers:
5b4899042eed4c58e03cb190f392b51e16fdea69a52020652a8c36e246f86bbc

Total reclaimed space: 0B

2024/01/31 04:45:05.297877 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 04:45:05.326925 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 04:45:05.327186 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 04:45:05.330282 [INFO] application/json

2024/01/31 04:45:05.330299 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 04:45:05.407976 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 04:45:05.408140 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 04:45:05.409483 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 04:45:05.409508 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 04:45:05.409530 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 04:45:05.409532 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 04:45:05.409536 [INFO] Executing instruction: Generate environment file
2024/01/31 04:45:05.409564 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 04:45:05.409568 [INFO] start build docker app
2024/01/31 04:45:05.409966 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 04:45:05.409969 [INFO] fetching image and ports
2024/01/31 04:45:05.411792 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 04:45:05.411864 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 04:45:05.411873 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 04:45:05.411882 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 04:45:06.453837 [INFO] Login Succeeded

2024/01/31 04:45:06.453857 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 04:45:06.453863 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 04:45:06.453879 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 04:45:06.637497 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 04:45:06.637517 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 04:45:06.637525 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 04:45:06.637528 [INFO] start to build docker image
2024/01/31 04:45:06.637543 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 04:45:06.965689 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 04:45:06.965735 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 04:45:06.965741 [INFO] successfully build docker image
2024/01/31 04:45:06.965744 [INFO] save staging docker image id
2024/01/31 04:45:06.965758 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 04:45:07.018093 [INFO] c176d18fbf65

2024/01/31 04:45:07.018368 [INFO] Executing instruction: configure X-Ray
2024/01/31 04:45:07.018377 [INFO] X-Ray is not enabled.
2024/01/31 04:45:07.018380 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 04:45:07.024353 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 04:45:07.026183 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 04:45:07.042293 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 04:45:07.042323 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 04:45:07.055573 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 04:45:07.065539 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 04:45:07.077833 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 04:45:07.188994 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 04:45:07.576512 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 04:45:07.576578 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 04:45:08.003845 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 04:45:08.016432 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 04:45:08.366980 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 04:45:08.383208 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 04:45:08.395037 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 04:45:08.671016 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 04:45:08.683547 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 04:45:08.967726 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 04:45:08.967756 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 04:45:08.980541 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 04:45:08.988621 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 04:45:09.059030 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 04:45:09.059918 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 04:45:09.060858 [INFO] Executing instruction: configure log streaming
2024/01/31 04:45:09.060869 [INFO] log streaming is not enabled
2024/01/31 04:45:09.060873 [INFO] disable log stream
2024/01/31 04:45:09.060886 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 04:45:09.080538 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 04:45:09.103286 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 04:45:09.103310 [INFO] Checking if logs need forced rotation
2024/01/31 04:45:09.103328 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 04:45:09.653824 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 04:45:10.159168 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 04:45:10.161320 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 04:45:10.631899 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 04:45:10.653347 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 04:45:10.653364 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 04:45:10.653376 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 04:45:11.182814 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 04:45:11.182849 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 04:45:11.182877 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 04:45:11.182880 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 04:45:11.182904 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 04:45:11.182918 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 04:45:11.182921 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 04:45:11.182928 [INFO] Executing instruction: stop X-Ray
2024/01/31 04:45:11.182931 [INFO] stop X-Ray ...
2024/01/31 04:45:11.182943 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 04:45:11.197839 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 04:45:11.197873 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 04:45:11.212855 [INFO] Executing instruction: Run Docker Container
2024/01/31 04:45:11.212886 [INFO] stop currently running containers...
2024/01/31 04:45:11.212898 [INFO] detected old app is not docker compose app
2024/01/31 04:45:11.212913 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 04:45:11.252616 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 04:45:11.268356 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 04:45:11.268399 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 04:45:11.282498 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 04:45:11.282534 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 04:45:11.296265 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 04:45:11.296321 [INFO] stopping current container: 5b4899042eed
2024/01/31 04:45:11.296335 [INFO] Running command /bin/sh -c docker ps | grep -q 5b4899042eed
2024/01/31 04:45:11.321090 [INFO] Running command /bin/sh -c docker ps | grep -q 5b4899042eed
2024/01/31 04:45:11.343180 [INFO] Pruning containers ...
2024/01/31 04:45:11.343203 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 04:45:11.364524 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 04:45:11.364556 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 04:45:11.384271 [INFO] Total reclaimed space: 0B

2024/01/31 04:45:11.384299 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 04:45:11.407769 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 04:45:11.407796 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 04:45:11.450467 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 04:45:11.450493 [INFO] Removing /var/app/current/ if it exists
2024/01/31 04:45:11.451022 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 04:45:11.451047 [INFO] detected new app is not docker compose app
2024/01/31 04:45:11.451106 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 04:45:11.910845 [INFO] 07b75d05c83199d20c380dbaaf718b9a7da7f44024e8aac71a9bbd730ca13371

2024/01/31 04:45:16.911260 [INFO] Running command /bin/sh -c docker ps | grep -q 07b75d05c831
2024/01/31 04:45:16.934620 [ERROR] docker container quit unexpectedly on 2024-01-31 04:45:16.934602808 +0000 UTC: Command /bin/sh -c docker ps | grep -q 07b75d05c831 failed with error exit status 1
2024/01/31 04:45:16.934651 [INFO] Running command /bin/sh -c docker logs 07b75d05c831
2024/01/31 04:45:16.959507 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 07b75d05c831: Command /bin/sh -c docker ps | grep -q 07b75d05c831 failed with error exit status 1 

2024/01/31 04:45:16.959517 [INFO] Executing cleanup logic
2024/01/31 04:45:16.959834 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 05:45:18.065463 [INFO] Starting...
2024/01/31 05:45:18.065735 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 05:45:18.065769 [INFO] reading event message file
2024/01/31 05:45:18.066701 [INFO] Engine received EB command userdata-exec

2024/01/31 05:45:18.075725 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 05:45:18.621200 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 05:45:19.046136 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 05:45:19.046236 [INFO] Engine command: (self-startup)

2024/01/31 05:45:19.046244 [INFO] Downloading EB Application...
2024/01/31 05:45:19.046248 [INFO] Region: eu-west-1
2024/01/31 05:45:19.046251 [INFO] envID: e-8gmkc7rmw6
2024/01/31 05:45:19.046254 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 05:45:19.046258 [INFO] Using manifest file name from command request
2024/01/31 05:45:19.046270 [INFO] Unable to get version manifest file.
2024/01/31 05:45:19.046273 [INFO] Downloading latest manifest available.
2024/01/31 05:45:19.046275 [INFO] Download latest app version manifest
2024/01/31 05:45:19.046397 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 05:45:19.102908 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 05:45:19.103164 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 05:45:19.114680 [INFO] Download successful124bytes downloaded
2024/01/31 05:45:19.114816 [INFO] Trying to read and parse version manifest...
2024/01/31 05:45:19.114894 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 05:45:19.138755 [INFO] Download successful264bytes downloaded
2024/01/31 05:45:19.139066 [INFO] Executing instruction: SyncClock
2024/01/31 05:45:19.139072 [INFO] Starting SyncClock
2024/01/31 05:45:19.139084 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 05:45:19.144650 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 05:45:09 2024
System time     : 0.000002888 seconds fast of NTP time
Last offset     : +0.000003391 seconds
RMS offset      : 0.000005536 seconds
Frequency       : 0.654 ppm fast
Residual freq   : +0.005 ppm
Skew            : 0.167 ppm
Root delay      : 0.000406207 seconds
Root dispersion : 0.000334667 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/31 05:45:19.144682 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 05:45:19.148792 [INFO] 200 OK

2024/01/31 05:45:19.148886 [INFO] Skipping Configure OS
2024/01/31 05:45:19.148891 [INFO] Skipping LockRepo
2024/01/31 05:45:19.148895 [INFO] Skipping GenerateEBBanner
2024/01/31 05:45:19.148899 [INFO] Skipping Install Process Manager
2024/01/31 05:45:19.148903 [INFO] Skipping install syslog
2024/01/31 05:45:19.148907 [INFO] Skipping install cron
2024/01/31 05:45:19.148910 [INFO] Skipping install proxy
2024/01/31 05:45:19.148914 [INFO] Skipping installhealthd
2024/01/31 05:45:19.148918 [INFO] Skipping Install Log Streaming Manager
2024/01/31 05:45:19.148922 [INFO] Skipping install X-Ray
2024/01/31 05:45:19.148926 [INFO] Skipping install Third Party License
2024/01/31 05:45:19.148930 [INFO] Skipping installSqsd
2024/01/31 05:45:19.148934 [INFO] Skipping bootstraphealthd
2024/01/31 05:45:19.148938 [INFO] Skipping Install yum packages
2024/01/31 05:45:19.148942 [INFO] Skipping install docker-compose
2024/01/31 05:45:19.148945 [INFO] Skipping Configure Docker Daemon
2024/01/31 05:45:19.148951 [INFO] Skipping MarkBaked
2024/01/31 05:45:19.148955 [INFO] Skipping TuneSystemSettings
2024/01/31 05:45:19.148958 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 05:45:19.148960 [INFO] Initialize LogRotate files and directories
2024/01/31 05:45:19.161676 [INFO] Skipping BootstrapCFNHup
2024/01/31 05:45:19.161687 [INFO] Executing instruction: StartCFNHup
2024/01/31 05:45:19.161689 [INFO] Start cfn-hup
2024/01/31 05:45:19.161707 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 05:45:19.175035 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 05:45:19.184306 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 05:45:19.184345 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 05:45:19.184349 [INFO] Executing instruction: Start Docker
2024/01/31 05:45:19.184353 [INFO] Starting Docker...
2024/01/31 05:45:19.184434 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 05:45:19.185598 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 05:45:19.186748 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 05:45:19.672004 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 05:45:19.695169 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 05:45:19.695212 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 05:45:19.707060 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 05:45:19.717368 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 05:45:19.727782 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 05:45:19.825201 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 05:45:19.825266 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 05:45:20.128473 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 05:45:20.472353 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 05:45:20.490001 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 05:45:20.848447 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 05:45:20.861294 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 05:45:20.877413 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 05:45:20.886597 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 05:45:22.195896 [INFO] Skipping Setup Docker Options
2024/01/31 05:45:22.195920 [INFO] Skipping MarkBootstrapped
2024/01/31 05:45:22.195924 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 05:45:22.196257 [INFO] Starting SwitchCFNStack
2024/01/31 05:45:22.196266 [INFO] Executing instruction: stopSqsd
2024/01/31 05:45:22.196269 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 05:45:22.196273 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 05:45:22.196276 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 05:45:22.196301 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 05:45:22.676367 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 05:45:22.676402 [INFO] Executing instruction: StagedockerApplication
2024/01/31 05:45:22.676417 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 05:45:22.724050 [INFO] Pruning containers ...
2024/01/31 05:45:22.724191 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 05:45:22.754730 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
07b75d05c831   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             trusting_grothendieck

2024/01/31 05:45:22.754765 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 05:45:22.783830 [INFO] Deleted Containers:
07b75d05c83199d20c380dbaaf718b9a7da7f44024e8aac71a9bbd730ca13371

Total reclaimed space: 0B

2024/01/31 05:45:22.783854 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 05:45:22.802229 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 05:45:22.802443 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 05:45:22.805553 [INFO] application/json

2024/01/31 05:45:22.805572 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 05:45:22.888610 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 05:45:22.888789 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 05:45:22.890529 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 05:45:22.890556 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 05:45:22.890572 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 05:45:22.890575 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 05:45:22.890579 [INFO] Executing instruction: Generate environment file
2024/01/31 05:45:22.890612 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 05:45:22.890616 [INFO] start build docker app
2024/01/31 05:45:22.891833 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 05:45:22.891871 [INFO] fetching image and ports
2024/01/31 05:45:22.893453 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 05:45:22.893529 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 05:45:22.893539 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 05:45:22.893714 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 05:45:23.961423 [INFO] Login Succeeded

2024/01/31 05:45:23.961440 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 05:45:23.961446 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 05:45:23.961461 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 05:45:24.138571 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 05:45:24.138593 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 05:45:24.138597 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 05:45:24.138599 [INFO] start to build docker image
2024/01/31 05:45:24.138620 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 05:45:24.419374 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 05:45:24.419401 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 05:45:24.419405 [INFO] successfully build docker image
2024/01/31 05:45:24.419408 [INFO] save staging docker image id
2024/01/31 05:45:24.419421 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 05:45:24.447185 [INFO] c176d18fbf65

2024/01/31 05:45:24.447329 [INFO] Executing instruction: configure X-Ray
2024/01/31 05:45:24.447335 [INFO] X-Ray is not enabled.
2024/01/31 05:45:24.447338 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 05:45:24.453057 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 05:45:24.454576 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 05:45:24.469396 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 05:45:24.469434 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 05:45:24.479238 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 05:45:24.488464 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 05:45:24.497934 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 05:45:24.562000 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 05:45:24.883367 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 05:45:24.883445 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 05:45:25.355302 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 05:45:25.368495 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 05:45:25.715597 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 05:45:25.724986 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 05:45:25.734122 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 05:45:26.057008 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 05:45:26.068028 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 05:45:26.413765 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 05:45:26.413795 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 05:45:26.437672 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 05:45:26.447966 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 05:45:26.522119 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 05:45:26.523055 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 05:45:26.523977 [INFO] Executing instruction: configure log streaming
2024/01/31 05:45:26.523987 [INFO] log streaming is not enabled
2024/01/31 05:45:26.523995 [INFO] disable log stream
2024/01/31 05:45:26.524010 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 05:45:26.552305 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 05:45:26.598459 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 05:45:26.598482 [INFO] Checking if logs need forced rotation
2024/01/31 05:45:26.598502 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 05:45:27.206086 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 05:45:27.667181 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 05:45:27.669026 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 05:45:28.168249 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 05:45:28.184825 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 05:45:28.184840 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 05:45:28.184852 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 05:45:28.641051 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 05:45:28.641078 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 05:45:28.641106 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 05:45:28.641110 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 05:45:28.641134 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 05:45:28.641147 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 05:45:28.641150 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 05:45:28.641155 [INFO] Executing instruction: stop X-Ray
2024/01/31 05:45:28.641157 [INFO] stop X-Ray ...
2024/01/31 05:45:28.641166 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 05:45:28.657680 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 05:45:28.657715 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 05:45:28.676428 [INFO] Executing instruction: Run Docker Container
2024/01/31 05:45:28.676463 [INFO] stop currently running containers...
2024/01/31 05:45:28.676502 [INFO] detected old app is not docker compose app
2024/01/31 05:45:28.676517 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 05:45:28.732711 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 05:45:28.755332 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 05:45:28.755386 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 05:45:28.774921 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 05:45:28.774957 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 05:45:28.791519 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 05:45:28.791575 [INFO] stopping current container: 07b75d05c831
2024/01/31 05:45:28.791588 [INFO] Running command /bin/sh -c docker ps | grep -q 07b75d05c831
2024/01/31 05:45:28.810990 [INFO] Running command /bin/sh -c docker ps | grep -q 07b75d05c831
2024/01/31 05:45:28.830077 [INFO] Pruning containers ...
2024/01/31 05:45:28.830099 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 05:45:28.847893 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 05:45:28.847920 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 05:45:28.898040 [INFO] Total reclaimed space: 0B

2024/01/31 05:45:28.898077 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 05:45:28.930390 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 05:45:28.930420 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 05:45:28.951679 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 05:45:28.951704 [INFO] Removing /var/app/current/ if it exists
2024/01/31 05:45:28.951868 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 05:45:28.951886 [INFO] detected new app is not docker compose app
2024/01/31 05:45:28.951941 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 05:45:29.439488 [INFO] daec4f6adfc3b1f25fd6901a4332a3a368622329abe425acd6846fd8a5506658

2024/01/31 05:45:34.443916 [INFO] Running command /bin/sh -c docker ps | grep -q daec4f6adfc3
2024/01/31 05:45:34.465031 [ERROR] docker container quit unexpectedly on 2024-01-31 05:45:34.465013671 +0000 UTC: Command /bin/sh -c docker ps | grep -q daec4f6adfc3 failed with error exit status 1
2024/01/31 05:45:34.465311 [INFO] Running command /bin/sh -c docker logs daec4f6adfc3
2024/01/31 05:45:34.487348 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container daec4f6adfc3: Command /bin/sh -c docker ps | grep -q daec4f6adfc3 failed with error exit status 1 

2024/01/31 05:45:34.487359 [INFO] Executing cleanup logic
2024/01/31 05:45:34.487569 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 06:45:35.429121 [INFO] Starting...
2024/01/31 06:45:35.429165 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 06:45:35.429190 [INFO] reading event message file
2024/01/31 06:45:35.429863 [INFO] Engine received EB command userdata-exec

2024/01/31 06:45:35.435329 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 06:45:35.876154 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 06:45:36.411695 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 06:45:36.411788 [INFO] Engine command: (self-startup)

2024/01/31 06:45:36.411796 [INFO] Downloading EB Application...
2024/01/31 06:45:36.411799 [INFO] Region: eu-west-1
2024/01/31 06:45:36.411802 [INFO] envID: e-8gmkc7rmw6
2024/01/31 06:45:36.411805 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 06:45:36.411809 [INFO] Using manifest file name from command request
2024/01/31 06:45:36.411822 [INFO] Unable to get version manifest file.
2024/01/31 06:45:36.411825 [INFO] Downloading latest manifest available.
2024/01/31 06:45:36.411827 [INFO] Download latest app version manifest
2024/01/31 06:45:36.412070 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 06:45:36.464535 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 06:45:36.464717 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 06:45:36.481553 [INFO] Download successful124bytes downloaded
2024/01/31 06:45:36.481771 [INFO] Trying to read and parse version manifest...
2024/01/31 06:45:36.481865 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 06:45:36.506405 [INFO] Download successful264bytes downloaded
2024/01/31 06:45:36.506755 [INFO] Executing instruction: SyncClock
2024/01/31 06:45:36.506762 [INFO] Starting SyncClock
2024/01/31 06:45:36.506775 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 06:45:36.525685 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 06:45:34 2024
System time     : 0.000004572 seconds slow of NTP time
Last offset     : -0.000003968 seconds
RMS offset      : 0.000003535 seconds
Frequency       : 0.659 ppm fast
Residual freq   : -0.003 ppm
Skew            : 0.094 ppm
Root delay      : 0.000394762 seconds
Root dispersion : 0.000303213 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 06:45:36.525712 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 06:45:36.537743 [INFO] 200 OK

2024/01/31 06:45:36.537870 [INFO] Skipping Configure OS
2024/01/31 06:45:36.537877 [INFO] Skipping LockRepo
2024/01/31 06:45:36.537881 [INFO] Skipping GenerateEBBanner
2024/01/31 06:45:36.537885 [INFO] Skipping Install Process Manager
2024/01/31 06:45:36.537890 [INFO] Skipping install syslog
2024/01/31 06:45:36.537893 [INFO] Skipping install cron
2024/01/31 06:45:36.537898 [INFO] Skipping install proxy
2024/01/31 06:45:36.537901 [INFO] Skipping installhealthd
2024/01/31 06:45:36.537906 [INFO] Skipping Install Log Streaming Manager
2024/01/31 06:45:36.537912 [INFO] Skipping install X-Ray
2024/01/31 06:45:36.537917 [INFO] Skipping install Third Party License
2024/01/31 06:45:36.537924 [INFO] Skipping installSqsd
2024/01/31 06:45:36.537929 [INFO] Skipping bootstraphealthd
2024/01/31 06:45:36.537934 [INFO] Skipping Install yum packages
2024/01/31 06:45:36.537939 [INFO] Skipping install docker-compose
2024/01/31 06:45:36.538004 [INFO] Skipping Configure Docker Daemon
2024/01/31 06:45:36.538010 [INFO] Skipping MarkBaked
2024/01/31 06:45:36.538016 [INFO] Skipping TuneSystemSettings
2024/01/31 06:45:36.538088 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 06:45:36.538092 [INFO] Initialize LogRotate files and directories
2024/01/31 06:45:36.562093 [INFO] Skipping BootstrapCFNHup
2024/01/31 06:45:36.562105 [INFO] Executing instruction: StartCFNHup
2024/01/31 06:45:36.562108 [INFO] Start cfn-hup
2024/01/31 06:45:36.562124 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 06:45:36.583667 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 06:45:36.592017 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 06:45:36.592053 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 06:45:36.592058 [INFO] Executing instruction: Start Docker
2024/01/31 06:45:36.592061 [INFO] Starting Docker...
2024/01/31 06:45:36.592140 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 06:45:36.593236 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 06:45:36.594229 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 06:45:36.901388 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 06:45:36.918257 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 06:45:36.918339 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 06:45:36.930022 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 06:45:36.939402 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 06:45:36.951528 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 06:45:37.027456 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 06:45:37.027489 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 06:45:37.342590 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 06:45:37.666704 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 06:45:37.677957 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 06:45:38.055515 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 06:45:38.070184 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 06:45:38.085403 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 06:45:38.096295 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 06:45:39.330122 [INFO] Skipping Setup Docker Options
2024/01/31 06:45:39.330148 [INFO] Skipping MarkBootstrapped
2024/01/31 06:45:39.330152 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 06:45:39.330265 [INFO] Starting SwitchCFNStack
2024/01/31 06:45:39.330270 [INFO] Executing instruction: stopSqsd
2024/01/31 06:45:39.330274 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 06:45:39.330277 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 06:45:39.330281 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 06:45:39.330299 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 06:45:39.816770 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 06:45:39.816843 [INFO] Executing instruction: StagedockerApplication
2024/01/31 06:45:39.816859 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 06:45:39.843117 [INFO] Pruning containers ...
2024/01/31 06:45:39.843144 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 06:45:39.871580 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
daec4f6adfc3   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             affectionate_galileo

2024/01/31 06:45:39.871618 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 06:45:39.904564 [INFO] Deleted Containers:
daec4f6adfc3b1f25fd6901a4332a3a368622329abe425acd6846fd8a5506658

Total reclaimed space: 0B

2024/01/31 06:45:39.904612 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 06:45:39.932393 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 06:45:39.932663 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 06:45:39.935813 [INFO] application/json

2024/01/31 06:45:39.935833 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 06:45:40.022466 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/31 06:45:40.022649 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 06:45:40.025103 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 06:45:40.025144 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 06:45:40.025164 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 06:45:40.025168 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 06:45:40.025221 [INFO] Executing instruction: Generate environment file
2024/01/31 06:45:40.025271 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 06:45:40.025275 [INFO] start build docker app
2024/01/31 06:45:40.025796 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 06:45:40.025802 [INFO] fetching image and ports
2024/01/31 06:45:40.027498 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 06:45:40.027551 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 06:45:40.027560 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 06:45:40.027569 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 06:45:40.910140 [INFO] Login Succeeded

2024/01/31 06:45:40.910322 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 06:45:40.910330 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 06:45:40.910347 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 06:45:41.055697 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 06:45:41.055717 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 06:45:41.055720 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 06:45:41.055723 [INFO] start to build docker image
2024/01/31 06:45:41.055742 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 06:45:41.343943 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 06:45:41.344079 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 06:45:41.344112 [INFO] successfully build docker image
2024/01/31 06:45:41.344115 [INFO] save staging docker image id
2024/01/31 06:45:41.344127 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 06:45:41.379162 [INFO] c176d18fbf65

2024/01/31 06:45:41.379338 [INFO] Executing instruction: configure X-Ray
2024/01/31 06:45:41.379345 [INFO] X-Ray is not enabled.
2024/01/31 06:45:41.379349 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 06:45:41.387630 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 06:45:41.390011 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 06:45:41.402637 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 06:45:41.402670 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 06:45:41.412309 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 06:45:41.421867 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 06:45:41.431689 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 06:45:41.520534 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 06:45:41.926244 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 06:45:41.926846 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 06:45:42.243558 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 06:45:42.256106 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 06:45:42.574581 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 06:45:42.583837 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 06:45:42.592501 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 06:45:42.901805 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 06:45:42.914324 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 06:45:43.265384 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 06:45:43.265422 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 06:45:43.280326 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 06:45:43.288505 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 06:45:43.392627 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 06:45:43.393432 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 06:45:43.394776 [INFO] Executing instruction: configure log streaming
2024/01/31 06:45:43.394787 [INFO] log streaming is not enabled
2024/01/31 06:45:43.394791 [INFO] disable log stream
2024/01/31 06:45:43.394805 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 06:45:43.423607 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 06:45:43.450795 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 06:45:43.450820 [INFO] Checking if logs need forced rotation
2024/01/31 06:45:43.450844 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 06:45:44.031957 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 06:45:44.469117 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 06:45:44.472260 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 06:45:44.585896 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 06:45:44.605284 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 06:45:44.605301 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 06:45:44.605315 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 06:45:45.043157 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 06:45:45.043184 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 06:45:45.043206 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 06:45:45.043209 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 06:45:45.043230 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 06:45:45.043264 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 06:45:45.043268 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 06:45:45.043273 [INFO] Executing instruction: stop X-Ray
2024/01/31 06:45:45.043276 [INFO] stop X-Ray ...
2024/01/31 06:45:45.043287 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 06:45:45.060411 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 06:45:45.060460 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 06:45:45.078309 [INFO] Executing instruction: Run Docker Container
2024/01/31 06:45:45.078339 [INFO] stop currently running containers...
2024/01/31 06:45:45.078351 [INFO] detected old app is not docker compose app
2024/01/31 06:45:45.078364 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 06:45:45.152542 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 06:45:45.167557 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 06:45:45.167592 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 06:45:45.184256 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 06:45:45.184289 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 06:45:45.198332 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 06:45:45.198380 [INFO] stopping current container: daec4f6adfc3
2024/01/31 06:45:45.198392 [INFO] Running command /bin/sh -c docker ps | grep -q daec4f6adfc3
2024/01/31 06:45:45.221005 [INFO] Running command /bin/sh -c docker ps | grep -q daec4f6adfc3
2024/01/31 06:45:45.244324 [INFO] Pruning containers ...
2024/01/31 06:45:45.244347 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 06:45:45.264566 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 06:45:45.264598 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 06:45:45.283416 [INFO] Total reclaimed space: 0B

2024/01/31 06:45:45.283440 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 06:45:45.320946 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 06:45:45.320976 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 06:45:45.352754 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 06:45:45.352780 [INFO] Removing /var/app/current/ if it exists
2024/01/31 06:45:45.352914 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 06:45:45.352936 [INFO] detected new app is not docker compose app
2024/01/31 06:45:45.353011 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 06:45:45.745608 [INFO] c270ebf2a9c352f4a9095d4f193218bc8420b70f35449b388b14c6b401cc2272

2024/01/31 06:45:50.745970 [INFO] Running command /bin/sh -c docker ps | grep -q c270ebf2a9c3
2024/01/31 06:45:50.776146 [ERROR] docker container quit unexpectedly on 2024-01-31 06:45:50.776135802 +0000 UTC: Command /bin/sh -c docker ps | grep -q c270ebf2a9c3 failed with error exit status 1
2024/01/31 06:45:50.776188 [INFO] Running command /bin/sh -c docker logs c270ebf2a9c3
2024/01/31 06:45:50.801564 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c270ebf2a9c3: Command /bin/sh -c docker ps | grep -q c270ebf2a9c3 failed with error exit status 1 

2024/01/31 06:45:50.801574 [INFO] Executing cleanup logic
2024/01/31 06:45:50.801909 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 07:45:51.927922 [INFO] Starting...
2024/01/31 07:45:51.928019 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 07:45:51.928083 [INFO] reading event message file
2024/01/31 07:45:51.929268 [INFO] Engine received EB command userdata-exec

2024/01/31 07:45:51.942001 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 07:45:52.453516 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 07:45:52.889525 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 07:45:52.889620 [INFO] Engine command: (self-startup)

2024/01/31 07:45:52.889628 [INFO] Downloading EB Application...
2024/01/31 07:45:52.889632 [INFO] Region: eu-west-1
2024/01/31 07:45:52.889635 [INFO] envID: e-8gmkc7rmw6
2024/01/31 07:45:52.889638 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 07:45:52.889642 [INFO] Using manifest file name from command request
2024/01/31 07:45:52.889656 [INFO] Unable to get version manifest file.
2024/01/31 07:45:52.889659 [INFO] Downloading latest manifest available.
2024/01/31 07:45:52.889661 [INFO] Download latest app version manifest
2024/01/31 07:45:52.889788 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 07:45:52.934297 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 07:45:52.934471 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 07:45:52.947603 [INFO] Download successful124bytes downloaded
2024/01/31 07:45:52.947752 [INFO] Trying to read and parse version manifest...
2024/01/31 07:45:52.947826 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 07:45:52.976557 [INFO] Download successful264bytes downloaded
2024/01/31 07:45:52.976989 [INFO] Executing instruction: SyncClock
2024/01/31 07:45:52.976996 [INFO] Starting SyncClock
2024/01/31 07:45:52.977008 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 07:45:52.982424 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 07:45:42 2024
System time     : 0.000003953 seconds slow of NTP time
Last offset     : -0.000002847 seconds
RMS offset      : 0.000008625 seconds
Frequency       : 0.688 ppm fast
Residual freq   : -0.002 ppm
Skew            : 0.136 ppm
Root delay      : 0.000475264 seconds
Root dispersion : 0.000526821 seconds
Update interval : 32.3 seconds
Leap status     : Normal

2024/01/31 07:45:52.982459 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 07:45:52.986338 [INFO] 200 OK

2024/01/31 07:45:52.986516 [INFO] Skipping Configure OS
2024/01/31 07:45:52.986522 [INFO] Skipping LockRepo
2024/01/31 07:45:52.986526 [INFO] Skipping GenerateEBBanner
2024/01/31 07:45:52.986530 [INFO] Skipping Install Process Manager
2024/01/31 07:45:52.986534 [INFO] Skipping install syslog
2024/01/31 07:45:52.986538 [INFO] Skipping install cron
2024/01/31 07:45:52.986542 [INFO] Skipping install proxy
2024/01/31 07:45:52.986546 [INFO] Skipping installhealthd
2024/01/31 07:45:52.986687 [INFO] Skipping Install Log Streaming Manager
2024/01/31 07:45:52.986695 [INFO] Skipping install X-Ray
2024/01/31 07:45:52.986699 [INFO] Skipping install Third Party License
2024/01/31 07:45:52.986705 [INFO] Skipping installSqsd
2024/01/31 07:45:52.986709 [INFO] Skipping bootstraphealthd
2024/01/31 07:45:52.986712 [INFO] Skipping Install yum packages
2024/01/31 07:45:52.986716 [INFO] Skipping install docker-compose
2024/01/31 07:45:52.986720 [INFO] Skipping Configure Docker Daemon
2024/01/31 07:45:52.986724 [INFO] Skipping MarkBaked
2024/01/31 07:45:52.986728 [INFO] Skipping TuneSystemSettings
2024/01/31 07:45:52.986733 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 07:45:52.986736 [INFO] Initialize LogRotate files and directories
2024/01/31 07:45:53.002275 [INFO] Skipping BootstrapCFNHup
2024/01/31 07:45:53.002288 [INFO] Executing instruction: StartCFNHup
2024/01/31 07:45:53.002292 [INFO] Start cfn-hup
2024/01/31 07:45:53.002314 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 07:45:53.015766 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 07:45:53.024446 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 07:45:53.024478 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 07:45:53.024482 [INFO] Executing instruction: Start Docker
2024/01/31 07:45:53.024486 [INFO] Starting Docker...
2024/01/31 07:45:53.024577 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 07:45:53.025922 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 07:45:53.026915 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 07:45:53.430380 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 07:45:53.444228 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 07:45:53.444260 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 07:45:53.455425 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 07:45:53.466385 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 07:45:53.479405 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 07:45:53.512522 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 07:45:53.512545 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 07:45:53.869674 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 07:45:54.151822 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 07:45:54.163735 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 07:45:54.516160 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 07:45:54.530304 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 07:45:54.558034 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 07:45:54.572524 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 07:45:55.846841 [INFO] Skipping Setup Docker Options
2024/01/31 07:45:55.846863 [INFO] Skipping MarkBootstrapped
2024/01/31 07:45:55.846866 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 07:45:55.846957 [INFO] Starting SwitchCFNStack
2024/01/31 07:45:55.846961 [INFO] Executing instruction: stopSqsd
2024/01/31 07:45:55.846964 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 07:45:55.846966 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 07:45:55.846969 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 07:45:55.846983 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 07:45:56.272222 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 07:45:56.272306 [INFO] Executing instruction: StagedockerApplication
2024/01/31 07:45:56.272441 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 07:45:56.293947 [INFO] Pruning containers ...
2024/01/31 07:45:56.293976 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 07:45:56.315840 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c270ebf2a9c3   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             distracted_ardinghelli

2024/01/31 07:45:56.315908 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 07:45:56.367339 [INFO] Deleted Containers:
c270ebf2a9c352f4a9095d4f193218bc8420b70f35449b388b14c6b401cc2272

Total reclaimed space: 0B

2024/01/31 07:45:56.367372 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 07:45:56.387360 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 07:45:56.387610 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 07:45:56.390777 [INFO] application/json

2024/01/31 07:45:56.390794 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 07:45:56.488410 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 07:45:56.488592 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 07:45:56.490794 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 07:45:56.490827 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 07:45:56.490844 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 07:45:56.490846 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 07:45:56.490850 [INFO] Executing instruction: Generate environment file
2024/01/31 07:45:56.490877 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 07:45:56.490880 [INFO] start build docker app
2024/01/31 07:45:56.491287 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 07:45:56.491292 [INFO] fetching image and ports
2024/01/31 07:45:56.493110 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 07:45:56.493170 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 07:45:56.493179 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 07:45:56.493188 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 07:45:57.425002 [INFO] Login Succeeded

2024/01/31 07:45:57.425020 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 07:45:57.425025 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 07:45:57.425044 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 07:45:57.545658 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 07:45:57.545682 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 07:45:57.545686 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 07:45:57.545733 [INFO] start to build docker image
2024/01/31 07:45:57.545754 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 07:45:57.810512 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 07:45:57.810536 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 07:45:57.810545 [INFO] successfully build docker image
2024/01/31 07:45:57.810548 [INFO] save staging docker image id
2024/01/31 07:45:57.810598 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 07:45:57.832190 [INFO] c176d18fbf65

2024/01/31 07:45:57.832301 [INFO] Executing instruction: configure X-Ray
2024/01/31 07:45:57.832307 [INFO] X-Ray is not enabled.
2024/01/31 07:45:57.832310 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 07:45:57.837257 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 07:45:57.839087 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 07:45:57.851076 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 07:45:57.851105 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 07:45:57.861217 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 07:45:57.872057 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 07:45:57.887109 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 07:45:57.970242 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 07:45:58.307633 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 07:45:58.307710 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 07:45:58.646201 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 07:45:58.658255 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 07:45:59.006198 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 07:45:59.027524 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 07:45:59.046874 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 07:45:59.389029 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 07:45:59.400123 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 07:45:59.748678 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 07:45:59.748742 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 07:45:59.775557 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 07:45:59.792461 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 07:45:59.899381 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 07:45:59.900209 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 07:45:59.901225 [INFO] Executing instruction: configure log streaming
2024/01/31 07:45:59.901234 [INFO] log streaming is not enabled
2024/01/31 07:45:59.901236 [INFO] disable log stream
2024/01/31 07:45:59.901249 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 07:45:59.918298 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 07:45:59.941631 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 07:45:59.941656 [INFO] Checking if logs need forced rotation
2024/01/31 07:45:59.941721 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 07:46:00.500617 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 07:46:01.075283 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 07:46:01.077626 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 07:46:01.669688 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 07:46:01.692264 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 07:46:01.692294 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 07:46:01.692485 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 07:46:02.549883 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 07:46:02.549904 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 07:46:02.549932 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 07:46:02.549937 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 07:46:02.549959 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 07:46:02.549970 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 07:46:02.549973 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 07:46:02.549978 [INFO] Executing instruction: stop X-Ray
2024/01/31 07:46:02.549980 [INFO] stop X-Ray ...
2024/01/31 07:46:02.549991 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 07:46:02.564518 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 07:46:02.564554 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 07:46:02.582871 [INFO] Executing instruction: Run Docker Container
2024/01/31 07:46:02.582903 [INFO] stop currently running containers...
2024/01/31 07:46:02.582915 [INFO] detected old app is not docker compose app
2024/01/31 07:46:02.582930 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 07:46:02.633507 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 07:46:02.651167 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 07:46:02.651206 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 07:46:02.667251 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 07:46:02.667304 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 07:46:02.693084 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 07:46:02.693142 [INFO] stopping current container: c270ebf2a9c3
2024/01/31 07:46:02.693156 [INFO] Running command /bin/sh -c docker ps | grep -q c270ebf2a9c3
2024/01/31 07:46:02.717183 [INFO] Running command /bin/sh -c docker ps | grep -q c270ebf2a9c3
2024/01/31 07:46:02.737580 [INFO] Pruning containers ...
2024/01/31 07:46:02.737755 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 07:46:02.761551 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 07:46:02.761580 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 07:46:02.780566 [INFO] Total reclaimed space: 0B

2024/01/31 07:46:02.780594 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 07:46:02.809949 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 07:46:02.809992 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 07:46:02.842400 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 07:46:02.842427 [INFO] Removing /var/app/current/ if it exists
2024/01/31 07:46:02.842621 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 07:46:02.842649 [INFO] detected new app is not docker compose app
2024/01/31 07:46:02.842702 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 07:46:03.369249 [INFO] b1993c4a277eb2a370724356c465d2a22d2dd2375740097c508efd4093818f57

2024/01/31 07:46:08.371453 [INFO] Running command /bin/sh -c docker ps | grep -q b1993c4a277e
2024/01/31 07:46:08.407791 [ERROR] docker container quit unexpectedly on 2024-01-31 07:46:08.40777046 +0000 UTC: Command /bin/sh -c docker ps | grep -q b1993c4a277e failed with error exit status 1
2024/01/31 07:46:08.407822 [INFO] Running command /bin/sh -c docker logs b1993c4a277e
2024/01/31 07:46:08.429368 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b1993c4a277e: Command /bin/sh -c docker ps | grep -q b1993c4a277e failed with error exit status 1 

2024/01/31 07:46:08.429378 [INFO] Executing cleanup logic
2024/01/31 07:46:08.429750 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 08:46:09.375588 [INFO] Starting...
2024/01/31 08:46:09.375629 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 08:46:09.375652 [INFO] reading event message file
2024/01/31 08:46:09.376495 [INFO] Engine received EB command userdata-exec

2024/01/31 08:46:09.382418 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 08:46:09.720792 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 08:46:10.270651 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 08:46:10.270747 [INFO] Engine command: (self-startup)

2024/01/31 08:46:10.270753 [INFO] Downloading EB Application...
2024/01/31 08:46:10.270756 [INFO] Region: eu-west-1
2024/01/31 08:46:10.270758 [INFO] envID: e-8gmkc7rmw6
2024/01/31 08:46:10.270760 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 08:46:10.270763 [INFO] Using manifest file name from command request
2024/01/31 08:46:10.270776 [INFO] Unable to get version manifest file.
2024/01/31 08:46:10.270778 [INFO] Downloading latest manifest available.
2024/01/31 08:46:10.270780 [INFO] Download latest app version manifest
2024/01/31 08:46:10.270903 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 08:46:10.322913 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 08:46:10.323100 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 08:46:10.334201 [INFO] Download successful124bytes downloaded
2024/01/31 08:46:10.334353 [INFO] Trying to read and parse version manifest...
2024/01/31 08:46:10.334434 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 08:46:10.374906 [INFO] Download successful264bytes downloaded
2024/01/31 08:46:10.375296 [INFO] Executing instruction: SyncClock
2024/01/31 08:46:10.375302 [INFO] Starting SyncClock
2024/01/31 08:46:10.375312 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 08:46:10.380906 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 08:46:08 2024
System time     : 0.000004547 seconds slow of NTP time
Last offset     : -0.000004047 seconds
RMS offset      : 0.000005307 seconds
Frequency       : 0.517 ppm fast
Residual freq   : -0.006 ppm
Skew            : 0.131 ppm
Root delay      : 0.000440209 seconds
Root dispersion : 0.000289382 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 08:46:10.380926 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 08:46:10.385390 [INFO] 200 OK

2024/01/31 08:46:10.385482 [INFO] Skipping Configure OS
2024/01/31 08:46:10.385487 [INFO] Skipping LockRepo
2024/01/31 08:46:10.385491 [INFO] Skipping GenerateEBBanner
2024/01/31 08:46:10.385495 [INFO] Skipping Install Process Manager
2024/01/31 08:46:10.385500 [INFO] Skipping install syslog
2024/01/31 08:46:10.385503 [INFO] Skipping install cron
2024/01/31 08:46:10.385507 [INFO] Skipping install proxy
2024/01/31 08:46:10.385511 [INFO] Skipping installhealthd
2024/01/31 08:46:10.385515 [INFO] Skipping Install Log Streaming Manager
2024/01/31 08:46:10.385519 [INFO] Skipping install X-Ray
2024/01/31 08:46:10.385522 [INFO] Skipping install Third Party License
2024/01/31 08:46:10.385528 [INFO] Skipping installSqsd
2024/01/31 08:46:10.385531 [INFO] Skipping bootstraphealthd
2024/01/31 08:46:10.385535 [INFO] Skipping Install yum packages
2024/01/31 08:46:10.385539 [INFO] Skipping install docker-compose
2024/01/31 08:46:10.385545 [INFO] Skipping Configure Docker Daemon
2024/01/31 08:46:10.385548 [INFO] Skipping MarkBaked
2024/01/31 08:46:10.385552 [INFO] Skipping TuneSystemSettings
2024/01/31 08:46:10.385555 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 08:46:10.385557 [INFO] Initialize LogRotate files and directories
2024/01/31 08:46:10.398742 [INFO] Skipping BootstrapCFNHup
2024/01/31 08:46:10.398756 [INFO] Executing instruction: StartCFNHup
2024/01/31 08:46:10.398758 [INFO] Start cfn-hup
2024/01/31 08:46:10.398775 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 08:46:10.412572 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 08:46:10.420819 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 08:46:10.420843 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 08:46:10.420847 [INFO] Executing instruction: Start Docker
2024/01/31 08:46:10.420851 [INFO] Starting Docker...
2024/01/31 08:46:10.420934 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 08:46:10.422168 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 08:46:10.424033 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 08:46:10.881321 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 08:46:10.899885 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 08:46:10.899953 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 08:46:10.914713 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 08:46:10.925020 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 08:46:10.935780 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 08:46:11.009636 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 08:46:11.009727 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 08:46:11.311008 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 08:46:11.747693 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 08:46:11.772818 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 08:46:12.119530 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 08:46:12.129359 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 08:46:12.147524 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 08:46:12.157715 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 08:46:13.505230 [INFO] Skipping Setup Docker Options
2024/01/31 08:46:13.505251 [INFO] Skipping MarkBootstrapped
2024/01/31 08:46:13.505254 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 08:46:13.505366 [INFO] Starting SwitchCFNStack
2024/01/31 08:46:13.505371 [INFO] Executing instruction: stopSqsd
2024/01/31 08:46:13.505375 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 08:46:13.505378 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 08:46:13.505382 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 08:46:13.505397 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 08:46:13.980813 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 08:46:13.980840 [INFO] Executing instruction: StagedockerApplication
2024/01/31 08:46:13.980854 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 08:46:14.006764 [INFO] Pruning containers ...
2024/01/31 08:46:14.006793 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 08:46:14.025358 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b1993c4a277e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             interesting_goldberg

2024/01/31 08:46:14.025389 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 08:46:14.056176 [INFO] Deleted Containers:
b1993c4a277eb2a370724356c465d2a22d2dd2375740097c508efd4093818f57

Total reclaimed space: 0B

2024/01/31 08:46:14.056219 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 08:46:14.096204 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 08:46:14.096470 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 08:46:14.101287 [INFO] application/json

2024/01/31 08:46:14.101311 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 08:46:14.226299 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 08:46:14.226468 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 08:46:14.228149 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 08:46:14.228180 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 08:46:14.228196 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 08:46:14.228198 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 08:46:14.228207 [INFO] Executing instruction: Generate environment file
2024/01/31 08:46:14.228237 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 08:46:14.228241 [INFO] start build docker app
2024/01/31 08:46:14.228896 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 08:46:14.228955 [INFO] fetching image and ports
2024/01/31 08:46:14.232375 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 08:46:14.232659 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 08:46:14.232677 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 08:46:14.232708 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 08:46:15.275032 [INFO] Login Succeeded

2024/01/31 08:46:15.275053 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 08:46:15.275060 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 08:46:15.275076 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 08:46:15.414913 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 08:46:15.414933 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 08:46:15.414936 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 08:46:15.414939 [INFO] start to build docker image
2024/01/31 08:46:15.414955 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 08:46:15.685068 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 08:46:15.685100 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 08:46:15.685105 [INFO] successfully build docker image
2024/01/31 08:46:15.685107 [INFO] save staging docker image id
2024/01/31 08:46:15.685119 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 08:46:15.706207 [INFO] c176d18fbf65

2024/01/31 08:46:15.706478 [INFO] Executing instruction: configure X-Ray
2024/01/31 08:46:15.706484 [INFO] X-Ray is not enabled.
2024/01/31 08:46:15.706487 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 08:46:15.712659 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 08:46:15.714540 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 08:46:15.727155 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 08:46:15.727210 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 08:46:15.737551 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 08:46:15.746700 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 08:46:15.764499 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 08:46:15.839228 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 08:46:16.199649 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 08:46:16.199785 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 08:46:16.555185 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 08:46:16.570219 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 08:46:16.886599 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 08:46:16.896786 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 08:46:16.906353 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 08:46:17.321349 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 08:46:17.331224 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 08:46:17.667575 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 08:46:17.667617 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 08:46:17.684333 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 08:46:17.695295 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 08:46:17.787571 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 08:46:17.788504 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 08:46:17.789399 [INFO] Executing instruction: configure log streaming
2024/01/31 08:46:17.789408 [INFO] log streaming is not enabled
2024/01/31 08:46:17.789412 [INFO] disable log stream
2024/01/31 08:46:17.789426 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 08:46:17.814696 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 08:46:17.834716 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 08:46:17.834741 [INFO] Checking if logs need forced rotation
2024/01/31 08:46:17.834770 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 08:46:18.402777 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 08:46:18.869743 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 08:46:18.871652 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 08:46:19.422553 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 08:46:19.444702 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 08:46:19.444785 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 08:46:19.444803 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 08:46:19.885435 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 08:46:19.885458 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 08:46:19.885481 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 08:46:19.885484 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 08:46:19.885503 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 08:46:19.885514 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 08:46:19.885517 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 08:46:19.885522 [INFO] Executing instruction: stop X-Ray
2024/01/31 08:46:19.885524 [INFO] stop X-Ray ...
2024/01/31 08:46:19.885534 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 08:46:19.904000 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 08:46:19.904131 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 08:46:19.923576 [INFO] Executing instruction: Run Docker Container
2024/01/31 08:46:19.923603 [INFO] stop currently running containers...
2024/01/31 08:46:19.923613 [INFO] detected old app is not docker compose app
2024/01/31 08:46:19.923624 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 08:46:19.982634 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 08:46:20.012650 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 08:46:20.012687 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 08:46:20.040224 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 08:46:20.040256 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 08:46:20.066897 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 08:46:20.066950 [INFO] stopping current container: b1993c4a277e
2024/01/31 08:46:20.066964 [INFO] Running command /bin/sh -c docker ps | grep -q b1993c4a277e
2024/01/31 08:46:20.088830 [INFO] Running command /bin/sh -c docker ps | grep -q b1993c4a277e
2024/01/31 08:46:20.110099 [INFO] Pruning containers ...
2024/01/31 08:46:20.110127 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 08:46:20.128491 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 08:46:20.128525 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 08:46:20.153638 [INFO] Total reclaimed space: 0B

2024/01/31 08:46:20.153668 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 08:46:20.174620 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 08:46:20.174658 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 08:46:20.198236 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 08:46:20.198259 [INFO] Removing /var/app/current/ if it exists
2024/01/31 08:46:20.198359 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 08:46:20.198377 [INFO] detected new app is not docker compose app
2024/01/31 08:46:20.198489 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 08:46:20.666486 [INFO] 38d449079acd56edb98092bb71bcca750a35ac1057e70114947dd333389a56e4

2024/01/31 08:46:25.670880 [INFO] Running command /bin/sh -c docker ps | grep -q 38d449079acd
2024/01/31 08:46:25.690590 [ERROR] docker container quit unexpectedly on 2024-01-31 08:46:25.690572489 +0000 UTC: Command /bin/sh -c docker ps | grep -q 38d449079acd failed with error exit status 1
2024/01/31 08:46:25.690622 [INFO] Running command /bin/sh -c docker logs 38d449079acd
2024/01/31 08:46:25.710092 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 38d449079acd: Command /bin/sh -c docker ps | grep -q 38d449079acd failed with error exit status 1 

2024/01/31 08:46:25.710101 [INFO] Executing cleanup logic
2024/01/31 08:46:25.710370 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 09:46:26.636860 [INFO] Starting...
2024/01/31 09:46:26.636908 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 09:46:26.636982 [INFO] reading event message file
2024/01/31 09:46:26.641955 [INFO] Engine received EB command userdata-exec

2024/01/31 09:46:26.650252 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 09:46:27.078339 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 09:46:27.550484 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 09:46:27.550664 [INFO] Engine command: (self-startup)

2024/01/31 09:46:27.550672 [INFO] Downloading EB Application...
2024/01/31 09:46:27.550676 [INFO] Region: eu-west-1
2024/01/31 09:46:27.550679 [INFO] envID: e-8gmkc7rmw6
2024/01/31 09:46:27.550683 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 09:46:27.550686 [INFO] Using manifest file name from command request
2024/01/31 09:46:27.550700 [INFO] Unable to get version manifest file.
2024/01/31 09:46:27.550703 [INFO] Downloading latest manifest available.
2024/01/31 09:46:27.550706 [INFO] Download latest app version manifest
2024/01/31 09:46:27.550839 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 09:46:27.592036 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 09:46:27.592211 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 09:46:27.605334 [INFO] Download successful124bytes downloaded
2024/01/31 09:46:27.605570 [INFO] Trying to read and parse version manifest...
2024/01/31 09:46:27.605659 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 09:46:27.631251 [INFO] Download successful264bytes downloaded
2024/01/31 09:46:27.631593 [INFO] Executing instruction: SyncClock
2024/01/31 09:46:27.631600 [INFO] Starting SyncClock
2024/01/31 09:46:27.631610 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 09:46:27.637492 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 09:46:14 2024
System time     : 0.000001917 seconds fast of NTP time
Last offset     : +0.000002255 seconds
RMS offset      : 0.000004843 seconds
Frequency       : 0.887 ppm fast
Residual freq   : +0.002 ppm
Skew            : 0.187 ppm
Root delay      : 0.000404904 seconds
Root dispersion : 0.000297791 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 09:46:27.637516 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 09:46:27.641927 [INFO] 200 OK

2024/01/31 09:46:27.642227 [INFO] Skipping Configure OS
2024/01/31 09:46:27.642238 [INFO] Skipping LockRepo
2024/01/31 09:46:27.642242 [INFO] Skipping GenerateEBBanner
2024/01/31 09:46:27.642247 [INFO] Skipping Install Process Manager
2024/01/31 09:46:27.642250 [INFO] Skipping install syslog
2024/01/31 09:46:27.642254 [INFO] Skipping install cron
2024/01/31 09:46:27.642258 [INFO] Skipping install proxy
2024/01/31 09:46:27.642262 [INFO] Skipping installhealthd
2024/01/31 09:46:27.642266 [INFO] Skipping Install Log Streaming Manager
2024/01/31 09:46:27.642269 [INFO] Skipping install X-Ray
2024/01/31 09:46:27.642273 [INFO] Skipping install Third Party License
2024/01/31 09:46:27.642278 [INFO] Skipping installSqsd
2024/01/31 09:46:27.642283 [INFO] Skipping bootstraphealthd
2024/01/31 09:46:27.642287 [INFO] Skipping Install yum packages
2024/01/31 09:46:27.642293 [INFO] Skipping install docker-compose
2024/01/31 09:46:27.642297 [INFO] Skipping Configure Docker Daemon
2024/01/31 09:46:27.642301 [INFO] Skipping MarkBaked
2024/01/31 09:46:27.642305 [INFO] Skipping TuneSystemSettings
2024/01/31 09:46:27.642307 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 09:46:27.642310 [INFO] Initialize LogRotate files and directories
2024/01/31 09:46:27.656107 [INFO] Skipping BootstrapCFNHup
2024/01/31 09:46:27.656123 [INFO] Executing instruction: StartCFNHup
2024/01/31 09:46:27.656126 [INFO] Start cfn-hup
2024/01/31 09:46:27.656142 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 09:46:27.669101 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 09:46:27.677572 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 09:46:27.677605 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 09:46:27.677609 [INFO] Executing instruction: Start Docker
2024/01/31 09:46:27.677612 [INFO] Starting Docker...
2024/01/31 09:46:27.677692 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 09:46:27.678843 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 09:46:27.679844 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 09:46:28.152779 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 09:46:28.167818 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 09:46:28.167850 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 09:46:28.178261 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 09:46:28.187110 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 09:46:28.208079 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 09:46:28.289700 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 09:46:28.289802 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 09:46:28.646003 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 09:46:29.093599 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 09:46:29.105567 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 09:46:29.450649 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 09:46:29.460049 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 09:46:29.475415 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 09:46:29.484506 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 09:46:30.730794 [INFO] Skipping Setup Docker Options
2024/01/31 09:46:30.730820 [INFO] Skipping MarkBootstrapped
2024/01/31 09:46:30.730825 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 09:46:30.730939 [INFO] Starting SwitchCFNStack
2024/01/31 09:46:30.730945 [INFO] Executing instruction: stopSqsd
2024/01/31 09:46:30.730949 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 09:46:30.730952 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 09:46:30.730959 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 09:46:30.730975 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 09:46:31.242501 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 09:46:31.242524 [INFO] Executing instruction: StagedockerApplication
2024/01/31 09:46:31.242535 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 09:46:31.262875 [INFO] Pruning containers ...
2024/01/31 09:46:31.262904 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 09:46:31.288606 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
38d449079acd   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             upbeat_ritchie

2024/01/31 09:46:31.288638 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 09:46:31.337176 [INFO] Deleted Containers:
38d449079acd56edb98092bb71bcca750a35ac1057e70114947dd333389a56e4

Total reclaimed space: 0B

2024/01/31 09:46:31.337422 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 09:46:31.365234 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 09:46:31.365487 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 09:46:31.368835 [INFO] application/json

2024/01/31 09:46:31.368853 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 09:46:31.450424 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 09:46:31.450589 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 09:46:31.451969 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 09:46:31.451995 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 09:46:31.452013 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 09:46:31.452017 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 09:46:31.452022 [INFO] Executing instruction: Generate environment file
2024/01/31 09:46:31.452113 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 09:46:31.452118 [INFO] start build docker app
2024/01/31 09:46:31.452572 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 09:46:31.452576 [INFO] fetching image and ports
2024/01/31 09:46:31.455455 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 09:46:31.455522 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 09:46:31.455531 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 09:46:31.455611 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 09:46:32.297982 [INFO] Login Succeeded

2024/01/31 09:46:32.297999 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 09:46:32.298004 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 09:46:32.298062 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 09:46:32.470215 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 09:46:32.470953 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 09:46:32.470978 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 09:46:32.471017 [INFO] start to build docker image
2024/01/31 09:46:32.471041 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 09:46:32.758096 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 09:46:32.758122 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 09:46:32.758127 [INFO] successfully build docker image
2024/01/31 09:46:32.758129 [INFO] save staging docker image id
2024/01/31 09:46:32.758143 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 09:46:32.779797 [INFO] c176d18fbf65

2024/01/31 09:46:32.779920 [INFO] Executing instruction: configure X-Ray
2024/01/31 09:46:32.779927 [INFO] X-Ray is not enabled.
2024/01/31 09:46:32.779930 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 09:46:32.786878 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 09:46:32.789048 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 09:46:32.805164 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 09:46:32.805206 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 09:46:32.820390 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 09:46:32.829607 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 09:46:32.853872 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 09:46:32.949289 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 09:46:33.295706 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 09:46:33.295943 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 09:46:33.559877 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 09:46:33.571809 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 09:46:33.919713 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 09:46:33.933775 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 09:46:33.944425 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 09:46:34.264401 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 09:46:34.277340 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 09:46:34.605109 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 09:46:34.605151 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 09:46:34.617719 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 09:46:34.626512 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 09:46:34.734297 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 09:46:34.735213 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 09:46:34.736578 [INFO] Executing instruction: configure log streaming
2024/01/31 09:46:34.736589 [INFO] log streaming is not enabled
2024/01/31 09:46:34.736592 [INFO] disable log stream
2024/01/31 09:46:34.736607 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 09:46:34.759885 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 09:46:34.787248 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 09:46:34.787271 [INFO] Checking if logs need forced rotation
2024/01/31 09:46:34.787518 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 09:46:35.419329 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 09:46:35.867285 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 09:46:35.869263 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 09:46:36.381752 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 09:46:36.401725 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 09:46:36.401766 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 09:46:36.401777 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 09:46:36.840716 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 09:46:36.840740 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 09:46:36.840763 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 09:46:36.840766 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 09:46:36.840788 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 09:46:36.840808 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 09:46:36.840810 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 09:46:36.840815 [INFO] Executing instruction: stop X-Ray
2024/01/31 09:46:36.840818 [INFO] stop X-Ray ...
2024/01/31 09:46:36.840832 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 09:46:36.858639 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 09:46:36.858671 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 09:46:36.872710 [INFO] Executing instruction: Run Docker Container
2024/01/31 09:46:36.872764 [INFO] stop currently running containers...
2024/01/31 09:46:36.872774 [INFO] detected old app is not docker compose app
2024/01/31 09:46:36.872790 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 09:46:36.912503 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 09:46:36.931998 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 09:46:36.932031 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 09:46:36.947091 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 09:46:36.947123 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 09:46:36.961995 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 09:46:36.962044 [INFO] stopping current container: 38d449079acd
2024/01/31 09:46:36.962057 [INFO] Running command /bin/sh -c docker ps | grep -q 38d449079acd
2024/01/31 09:46:37.006781 [INFO] Running command /bin/sh -c docker ps | grep -q 38d449079acd
2024/01/31 09:46:37.030314 [INFO] Pruning containers ...
2024/01/31 09:46:37.030341 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 09:46:37.053366 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 09:46:37.053400 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 09:46:37.078716 [INFO] Total reclaimed space: 0B

2024/01/31 09:46:37.078741 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 09:46:37.102997 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 09:46:37.103031 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 09:46:37.124615 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 09:46:37.124637 [INFO] Removing /var/app/current/ if it exists
2024/01/31 09:46:37.124737 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 09:46:37.124755 [INFO] detected new app is not docker compose app
2024/01/31 09:46:37.124843 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 09:46:37.548148 [INFO] 559ea07afecf5b4c5167b412dcd1d4ba936abd2875b66017778b99aabcd4fb90

2024/01/31 09:46:42.551432 [INFO] Running command /bin/sh -c docker ps | grep -q 559ea07afecf
2024/01/31 09:46:42.577657 [ERROR] docker container quit unexpectedly on 2024-01-31 09:46:42.577646722 +0000 UTC: Command /bin/sh -c docker ps | grep -q 559ea07afecf failed with error exit status 1
2024/01/31 09:46:42.577684 [INFO] Running command /bin/sh -c docker logs 559ea07afecf
2024/01/31 09:46:42.602706 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 559ea07afecf: Command /bin/sh -c docker ps | grep -q 559ea07afecf failed with error exit status 1 

2024/01/31 09:46:42.602715 [INFO] Executing cleanup logic
2024/01/31 09:46:42.602939 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 10:46:43.565724 [INFO] Starting...
2024/01/31 10:46:43.565765 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 10:46:43.565794 [INFO] reading event message file
2024/01/31 10:46:43.566487 [INFO] Engine received EB command userdata-exec

2024/01/31 10:46:43.573137 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 10:46:43.991780 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 10:46:44.432906 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 10:46:44.433345 [INFO] Engine command: (self-startup)

2024/01/31 10:46:44.433467 [INFO] Downloading EB Application...
2024/01/31 10:46:44.433472 [INFO] Region: eu-west-1
2024/01/31 10:46:44.433475 [INFO] envID: e-8gmkc7rmw6
2024/01/31 10:46:44.433479 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 10:46:44.433482 [INFO] Using manifest file name from command request
2024/01/31 10:46:44.433495 [INFO] Unable to get version manifest file.
2024/01/31 10:46:44.433497 [INFO] Downloading latest manifest available.
2024/01/31 10:46:44.433499 [INFO] Download latest app version manifest
2024/01/31 10:46:44.433844 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 10:46:44.474307 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 10:46:44.474489 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 10:46:44.488756 [INFO] Download successful124bytes downloaded
2024/01/31 10:46:44.488941 [INFO] Trying to read and parse version manifest...
2024/01/31 10:46:44.489021 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 10:46:44.508071 [INFO] Download successful264bytes downloaded
2024/01/31 10:46:44.508692 [INFO] Executing instruction: SyncClock
2024/01/31 10:46:44.508698 [INFO] Starting SyncClock
2024/01/31 10:46:44.508708 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 10:46:44.514446 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 10:46:36 2024
System time     : 0.000000992 seconds slow of NTP time
Last offset     : -0.000000098 seconds
RMS offset      : 0.000001434 seconds
Frequency       : 0.649 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.018 ppm
Root delay      : 0.000413236 seconds
Root dispersion : 0.000281886 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 10:46:44.514469 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 10:46:44.519078 [INFO] 200 OK

2024/01/31 10:46:44.519166 [INFO] Skipping Configure OS
2024/01/31 10:46:44.519171 [INFO] Skipping LockRepo
2024/01/31 10:46:44.519175 [INFO] Skipping GenerateEBBanner
2024/01/31 10:46:44.519179 [INFO] Skipping Install Process Manager
2024/01/31 10:46:44.519183 [INFO] Skipping install syslog
2024/01/31 10:46:44.519187 [INFO] Skipping install cron
2024/01/31 10:46:44.519191 [INFO] Skipping install proxy
2024/01/31 10:46:44.519195 [INFO] Skipping installhealthd
2024/01/31 10:46:44.519198 [INFO] Skipping Install Log Streaming Manager
2024/01/31 10:46:44.519202 [INFO] Skipping install X-Ray
2024/01/31 10:46:44.519208 [INFO] Skipping install Third Party License
2024/01/31 10:46:44.519214 [INFO] Skipping installSqsd
2024/01/31 10:46:44.519218 [INFO] Skipping bootstraphealthd
2024/01/31 10:46:44.519222 [INFO] Skipping Install yum packages
2024/01/31 10:46:44.519226 [INFO] Skipping install docker-compose
2024/01/31 10:46:44.519230 [INFO] Skipping Configure Docker Daemon
2024/01/31 10:46:44.519235 [INFO] Skipping MarkBaked
2024/01/31 10:46:44.519239 [INFO] Skipping TuneSystemSettings
2024/01/31 10:46:44.519242 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 10:46:44.519244 [INFO] Initialize LogRotate files and directories
2024/01/31 10:46:44.538594 [INFO] Skipping BootstrapCFNHup
2024/01/31 10:46:44.538605 [INFO] Executing instruction: StartCFNHup
2024/01/31 10:46:44.538608 [INFO] Start cfn-hup
2024/01/31 10:46:44.538637 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 10:46:44.553893 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 10:46:44.563508 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 10:46:44.563661 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 10:46:44.563667 [INFO] Executing instruction: Start Docker
2024/01/31 10:46:44.563670 [INFO] Starting Docker...
2024/01/31 10:46:44.564552 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 10:46:44.566018 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 10:46:44.567204 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 10:46:44.881051 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 10:46:44.900452 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 10:46:44.900546 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 10:46:44.914925 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 10:46:44.924395 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 10:46:44.935696 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 10:46:45.006966 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 10:46:45.007028 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 10:46:45.384717 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 10:46:45.683421 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 10:46:45.703508 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 10:46:46.026574 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 10:46:46.049736 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 10:46:46.067799 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 10:46:46.076533 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 10:46:47.292201 [INFO] Skipping Setup Docker Options
2024/01/31 10:46:47.292225 [INFO] Skipping MarkBootstrapped
2024/01/31 10:46:47.292229 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 10:46:47.292348 [INFO] Starting SwitchCFNStack
2024/01/31 10:46:47.292354 [INFO] Executing instruction: stopSqsd
2024/01/31 10:46:47.292358 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 10:46:47.292361 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 10:46:47.292365 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 10:46:47.292388 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 10:46:47.739424 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 10:46:47.739451 [INFO] Executing instruction: StagedockerApplication
2024/01/31 10:46:47.739463 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 10:46:47.765828 [INFO] Pruning containers ...
2024/01/31 10:46:47.765856 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 10:46:47.796733 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
559ea07afecf   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             happy_hoover

2024/01/31 10:46:47.797090 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 10:46:47.831440 [INFO] Deleted Containers:
559ea07afecf5b4c5167b412dcd1d4ba936abd2875b66017778b99aabcd4fb90

Total reclaimed space: 0B

2024/01/31 10:46:47.831530 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 10:46:47.850187 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 10:46:47.850437 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 10:46:47.853220 [INFO] application/json

2024/01/31 10:46:47.853245 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 10:46:47.928763 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/01/31 10:46:47.929025 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 10:46:47.930655 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 10:46:47.930685 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 10:46:47.930701 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 10:46:47.930703 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 10:46:47.930707 [INFO] Executing instruction: Generate environment file
2024/01/31 10:46:47.930732 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 10:46:47.930736 [INFO] start build docker app
2024/01/31 10:46:47.931268 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 10:46:47.931274 [INFO] fetching image and ports
2024/01/31 10:46:47.933416 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 10:46:47.933472 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 10:46:47.933483 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 10:46:47.933494 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 10:46:49.037039 [INFO] Login Succeeded

2024/01/31 10:46:49.037056 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 10:46:49.037062 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 10:46:49.037079 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 10:46:49.183088 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 10:46:49.183115 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 10:46:49.183119 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 10:46:49.183122 [INFO] start to build docker image
2024/01/31 10:46:49.183141 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 10:46:49.461727 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 10:46:49.461754 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 10:46:49.461758 [INFO] successfully build docker image
2024/01/31 10:46:49.461760 [INFO] save staging docker image id
2024/01/31 10:46:49.461776 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 10:46:49.481494 [INFO] c176d18fbf65

2024/01/31 10:46:49.481612 [INFO] Executing instruction: configure X-Ray
2024/01/31 10:46:49.481620 [INFO] X-Ray is not enabled.
2024/01/31 10:46:49.481623 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 10:46:49.487276 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 10:46:49.488989 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 10:46:49.505795 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 10:46:49.505828 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 10:46:49.523890 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 10:46:49.533525 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 10:46:49.544671 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 10:46:49.614278 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 10:46:49.935834 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 10:46:49.935920 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 10:46:50.301736 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 10:46:50.317392 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 10:46:50.680511 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 10:46:50.689931 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 10:46:50.702103 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 10:46:51.043443 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 10:46:51.054358 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 10:46:51.376079 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 10:46:51.376115 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 10:46:51.388386 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 10:46:51.396762 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 10:46:51.488832 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 10:46:51.489685 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 10:46:51.490628 [INFO] Executing instruction: configure log streaming
2024/01/31 10:46:51.490637 [INFO] log streaming is not enabled
2024/01/31 10:46:51.490640 [INFO] disable log stream
2024/01/31 10:46:51.490656 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 10:46:51.513296 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 10:46:51.537002 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 10:46:51.537027 [INFO] Checking if logs need forced rotation
2024/01/31 10:46:51.537052 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 10:46:52.103360 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 10:46:52.518298 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 10:46:52.520273 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 10:46:52.926004 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 10:46:52.944725 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 10:46:52.944739 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 10:46:52.944751 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 10:46:53.466357 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 10:46:53.466384 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 10:46:53.466406 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 10:46:53.466409 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 10:46:53.466431 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 10:46:53.466445 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 10:46:53.466448 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 10:46:53.466454 [INFO] Executing instruction: stop X-Ray
2024/01/31 10:46:53.466457 [INFO] stop X-Ray ...
2024/01/31 10:46:53.466469 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 10:46:53.495706 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 10:46:53.495740 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 10:46:53.525263 [INFO] Executing instruction: Run Docker Container
2024/01/31 10:46:53.525297 [INFO] stop currently running containers...
2024/01/31 10:46:53.525385 [INFO] detected old app is not docker compose app
2024/01/31 10:46:53.525615 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 10:46:53.592384 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 10:46:53.607784 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 10:46:53.607814 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 10:46:53.620785 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 10:46:53.620812 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 10:46:53.633611 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 10:46:53.633658 [INFO] stopping current container: 559ea07afecf
2024/01/31 10:46:53.633668 [INFO] Running command /bin/sh -c docker ps | grep -q 559ea07afecf
2024/01/31 10:46:53.653084 [INFO] Running command /bin/sh -c docker ps | grep -q 559ea07afecf
2024/01/31 10:46:53.672780 [INFO] Pruning containers ...
2024/01/31 10:46:53.672809 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 10:46:53.693815 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 10:46:53.694938 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 10:46:53.713529 [INFO] Total reclaimed space: 0B

2024/01/31 10:46:53.713558 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 10:46:53.737276 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 10:46:53.737304 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 10:46:53.759898 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 10:46:53.759918 [INFO] Removing /var/app/current/ if it exists
2024/01/31 10:46:53.760006 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 10:46:53.760023 [INFO] detected new app is not docker compose app
2024/01/31 10:46:53.760070 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 10:46:54.274202 [INFO] c3ba7df087d821a6ce71cff7fe474c5f4fde70623b08b527b96503e2fa6b14be

2024/01/31 10:46:59.274648 [INFO] Running command /bin/sh -c docker ps | grep -q c3ba7df087d8
2024/01/31 10:46:59.301591 [ERROR] docker container quit unexpectedly on 2024-01-31 10:46:59.30157938 +0000 UTC: Command /bin/sh -c docker ps | grep -q c3ba7df087d8 failed with error exit status 1
2024/01/31 10:46:59.301625 [INFO] Running command /bin/sh -c docker logs c3ba7df087d8
2024/01/31 10:46:59.328946 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c3ba7df087d8: Command /bin/sh -c docker ps | grep -q c3ba7df087d8 failed with error exit status 1 

2024/01/31 10:46:59.328956 [INFO] Executing cleanup logic
2024/01/31 10:46:59.329180 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 11:47:00.453232 [INFO] Starting...
2024/01/31 11:47:00.453290 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 11:47:00.454174 [INFO] reading event message file
2024/01/31 11:47:00.455568 [INFO] Engine received EB command userdata-exec

2024/01/31 11:47:00.483977 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 11:47:00.911993 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 11:47:01.503822 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 11:47:01.503918 [INFO] Engine command: (self-startup)

2024/01/31 11:47:01.503926 [INFO] Downloading EB Application...
2024/01/31 11:47:01.503930 [INFO] Region: eu-west-1
2024/01/31 11:47:01.503933 [INFO] envID: e-8gmkc7rmw6
2024/01/31 11:47:01.503936 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 11:47:01.503940 [INFO] Using manifest file name from command request
2024/01/31 11:47:01.503958 [INFO] Unable to get version manifest file.
2024/01/31 11:47:01.503960 [INFO] Downloading latest manifest available.
2024/01/31 11:47:01.503963 [INFO] Download latest app version manifest
2024/01/31 11:47:01.504258 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 11:47:01.578588 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 11:47:01.578798 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 11:47:01.604844 [INFO] Download successful124bytes downloaded
2024/01/31 11:47:01.605010 [INFO] Trying to read and parse version manifest...
2024/01/31 11:47:01.605090 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 11:47:01.642646 [INFO] Download successful264bytes downloaded
2024/01/31 11:47:01.643090 [INFO] Executing instruction: SyncClock
2024/01/31 11:47:01.643096 [INFO] Starting SyncClock
2024/01/31 11:47:01.643105 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 11:47:01.654311 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 11:46:58 2024
System time     : 0.000002639 seconds fast of NTP time
Last offset     : +0.000001076 seconds
RMS offset      : 0.000001136 seconds
Frequency       : 0.515 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.026 ppm
Root delay      : 0.000408715 seconds
Root dispersion : 0.000500692 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/31 11:47:01.655539 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 11:47:01.666787 [INFO] 200 OK

2024/01/31 11:47:01.667447 [INFO] Skipping Configure OS
2024/01/31 11:47:01.667457 [INFO] Skipping LockRepo
2024/01/31 11:47:01.667462 [INFO] Skipping GenerateEBBanner
2024/01/31 11:47:01.667466 [INFO] Skipping Install Process Manager
2024/01/31 11:47:01.667471 [INFO] Skipping install syslog
2024/01/31 11:47:01.667475 [INFO] Skipping install cron
2024/01/31 11:47:01.667478 [INFO] Skipping install proxy
2024/01/31 11:47:01.667482 [INFO] Skipping installhealthd
2024/01/31 11:47:01.667486 [INFO] Skipping Install Log Streaming Manager
2024/01/31 11:47:01.667490 [INFO] Skipping install X-Ray
2024/01/31 11:47:01.667494 [INFO] Skipping install Third Party License
2024/01/31 11:47:01.667499 [INFO] Skipping installSqsd
2024/01/31 11:47:01.667503 [INFO] Skipping bootstraphealthd
2024/01/31 11:47:01.667507 [INFO] Skipping Install yum packages
2024/01/31 11:47:01.667510 [INFO] Skipping install docker-compose
2024/01/31 11:47:01.667514 [INFO] Skipping Configure Docker Daemon
2024/01/31 11:47:01.667518 [INFO] Skipping MarkBaked
2024/01/31 11:47:01.667521 [INFO] Skipping TuneSystemSettings
2024/01/31 11:47:01.667524 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 11:47:01.667527 [INFO] Initialize LogRotate files and directories
2024/01/31 11:47:01.683689 [INFO] Skipping BootstrapCFNHup
2024/01/31 11:47:01.683703 [INFO] Executing instruction: StartCFNHup
2024/01/31 11:47:01.683706 [INFO] Start cfn-hup
2024/01/31 11:47:01.683727 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 11:47:01.703946 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 11:47:01.720684 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 11:47:01.720721 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 11:47:01.720725 [INFO] Executing instruction: Start Docker
2024/01/31 11:47:01.720728 [INFO] Starting Docker...
2024/01/31 11:47:01.720812 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 11:47:01.722258 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 11:47:01.723501 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 11:47:02.154157 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 11:47:02.173734 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 11:47:02.173772 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 11:47:02.195187 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 11:47:02.207133 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 11:47:02.226006 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 11:47:02.321529 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 11:47:02.321561 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 11:47:02.741233 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 11:47:03.085437 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 11:47:03.102124 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 11:47:03.427163 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 11:47:03.443692 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 11:47:03.469908 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 11:47:03.486575 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 11:47:04.857858 [INFO] Skipping Setup Docker Options
2024/01/31 11:47:04.857873 [INFO] Skipping MarkBootstrapped
2024/01/31 11:47:04.857876 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 11:47:04.857963 [INFO] Starting SwitchCFNStack
2024/01/31 11:47:04.857967 [INFO] Executing instruction: stopSqsd
2024/01/31 11:47:04.857970 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 11:47:04.857972 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 11:47:04.857975 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 11:47:04.857992 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 11:47:05.294654 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 11:47:05.294681 [INFO] Executing instruction: StagedockerApplication
2024/01/31 11:47:05.294696 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 11:47:05.315577 [INFO] Pruning containers ...
2024/01/31 11:47:05.315611 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 11:47:05.335556 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c3ba7df087d8   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             unruffled_lumiere

2024/01/31 11:47:05.335588 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 11:47:05.362694 [INFO] Deleted Containers:
c3ba7df087d821a6ce71cff7fe474c5f4fde70623b08b527b96503e2fa6b14be

Total reclaimed space: 0B

2024/01/31 11:47:05.362718 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 11:47:05.402634 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 11:47:05.403686 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 11:47:05.413532 [INFO] application/json

2024/01/31 11:47:05.413561 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 11:47:05.512143 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 11:47:05.512347 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 11:47:05.513845 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 11:47:05.513878 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 11:47:05.513894 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 11:47:05.513898 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 11:47:05.513903 [INFO] Executing instruction: Generate environment file
2024/01/31 11:47:05.513934 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 11:47:05.513938 [INFO] start build docker app
2024/01/31 11:47:05.514510 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 11:47:05.514514 [INFO] fetching image and ports
2024/01/31 11:47:05.516778 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 11:47:05.516836 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 11:47:05.516851 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 11:47:05.516864 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 11:47:06.608237 [INFO] Login Succeeded

2024/01/31 11:47:06.608255 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 11:47:06.608260 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 11:47:06.608275 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 11:47:06.747824 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 11:47:06.747849 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 11:47:06.747853 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 11:47:06.747858 [INFO] start to build docker image
2024/01/31 11:47:06.747876 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 11:47:07.078495 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 11:47:07.078519 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 11:47:07.078524 [INFO] successfully build docker image
2024/01/31 11:47:07.078527 [INFO] save staging docker image id
2024/01/31 11:47:07.078540 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 11:47:07.127300 [INFO] c176d18fbf65

2024/01/31 11:47:07.128725 [INFO] Executing instruction: configure X-Ray
2024/01/31 11:47:07.128739 [INFO] X-Ray is not enabled.
2024/01/31 11:47:07.128831 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 11:47:07.136829 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 11:47:07.138669 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 11:47:07.153395 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 11:47:07.153425 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 11:47:07.167327 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 11:47:07.180066 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 11:47:07.198760 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 11:47:07.319004 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 11:47:07.662938 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 11:47:07.663148 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 11:47:07.951728 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 11:47:07.963427 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 11:47:08.292443 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 11:47:08.302607 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 11:47:08.312699 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 11:47:08.575655 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 11:47:08.591792 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 11:47:08.980496 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 11:47:08.980531 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 11:47:08.993784 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 11:47:09.005164 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 11:47:09.073907 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 11:47:09.074726 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 11:47:09.075616 [INFO] Executing instruction: configure log streaming
2024/01/31 11:47:09.075626 [INFO] log streaming is not enabled
2024/01/31 11:47:09.075630 [INFO] disable log stream
2024/01/31 11:47:09.075643 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 11:47:09.103959 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 11:47:09.134809 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 11:47:09.134833 [INFO] Checking if logs need forced rotation
2024/01/31 11:47:09.134857 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 11:47:09.734877 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 11:47:10.267709 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 11:47:10.269506 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 11:47:10.659407 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 11:47:10.676251 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 11:47:10.676267 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 11:47:10.676278 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 11:47:11.162266 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 11:47:11.162289 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 11:47:11.162319 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 11:47:11.162323 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 11:47:11.162346 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 11:47:11.162357 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 11:47:11.162360 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 11:47:11.162370 [INFO] Executing instruction: stop X-Ray
2024/01/31 11:47:11.162373 [INFO] stop X-Ray ...
2024/01/31 11:47:11.162624 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 11:47:11.193552 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 11:47:11.193586 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 11:47:11.212969 [INFO] Executing instruction: Run Docker Container
2024/01/31 11:47:11.213011 [INFO] stop currently running containers...
2024/01/31 11:47:11.213023 [INFO] detected old app is not docker compose app
2024/01/31 11:47:11.213043 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 11:47:11.292564 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 11:47:11.317855 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 11:47:11.317889 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 11:47:11.342900 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 11:47:11.342937 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 11:47:11.362335 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 11:47:11.362387 [INFO] stopping current container: c3ba7df087d8
2024/01/31 11:47:11.362400 [INFO] Running command /bin/sh -c docker ps | grep -q c3ba7df087d8
2024/01/31 11:47:11.391793 [INFO] Running command /bin/sh -c docker ps | grep -q c3ba7df087d8
2024/01/31 11:47:11.413173 [INFO] Pruning containers ...
2024/01/31 11:47:11.413197 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 11:47:11.431664 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 11:47:11.431695 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 11:47:11.452505 [INFO] Total reclaimed space: 0B

2024/01/31 11:47:11.452551 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 11:47:11.476235 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 11:47:11.476275 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 11:47:11.505572 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 11:47:11.505598 [INFO] Removing /var/app/current/ if it exists
2024/01/31 11:47:11.505711 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 11:47:11.505729 [INFO] detected new app is not docker compose app
2024/01/31 11:47:11.505788 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 11:47:11.960986 [INFO] 0888697abd4ea5ebff06c9e3d600e55183bcdf3076ea8bb99346700049bed073

2024/01/31 11:47:16.961487 [INFO] Running command /bin/sh -c docker ps | grep -q 0888697abd4e
2024/01/31 11:47:16.996691 [ERROR] docker container quit unexpectedly on 2024-01-31 11:47:16.996676759 +0000 UTC: Command /bin/sh -c docker ps | grep -q 0888697abd4e failed with error exit status 1
2024/01/31 11:47:16.996778 [INFO] Running command /bin/sh -c docker logs 0888697abd4e
2024/01/31 11:47:17.021939 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 0888697abd4e: Command /bin/sh -c docker ps | grep -q 0888697abd4e failed with error exit status 1 

2024/01/31 11:47:17.021948 [INFO] Executing cleanup logic
2024/01/31 11:47:17.022130 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 12:47:18.005322 [INFO] Starting...
2024/01/31 12:47:18.005368 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 12:47:18.005391 [INFO] reading event message file
2024/01/31 12:47:18.006357 [INFO] Engine received EB command userdata-exec

2024/01/31 12:47:18.011450 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 12:47:18.449591 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 12:47:18.959673 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 12:47:18.959754 [INFO] Engine command: (self-startup)

2024/01/31 12:47:18.959760 [INFO] Downloading EB Application...
2024/01/31 12:47:18.959763 [INFO] Region: eu-west-1
2024/01/31 12:47:18.959766 [INFO] envID: e-8gmkc7rmw6
2024/01/31 12:47:18.959769 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 12:47:18.959773 [INFO] Using manifest file name from command request
2024/01/31 12:47:18.959788 [INFO] Unable to get version manifest file.
2024/01/31 12:47:18.959791 [INFO] Downloading latest manifest available.
2024/01/31 12:47:18.959794 [INFO] Download latest app version manifest
2024/01/31 12:47:18.959915 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 12:47:19.004411 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 12:47:19.004656 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 12:47:19.016929 [INFO] Download successful124bytes downloaded
2024/01/31 12:47:19.017086 [INFO] Trying to read and parse version manifest...
2024/01/31 12:47:19.017162 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 12:47:19.044665 [INFO] Download successful264bytes downloaded
2024/01/31 12:47:19.048660 [INFO] Executing instruction: SyncClock
2024/01/31 12:47:19.048670 [INFO] Starting SyncClock
2024/01/31 12:47:19.048684 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 12:47:19.055552 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 12:47:04 2024
System time     : 0.000004350 seconds fast of NTP time
Last offset     : +0.000004858 seconds
RMS offset      : 0.000003961 seconds
Frequency       : 0.355 ppm fast
Residual freq   : +0.004 ppm
Skew            : 0.097 ppm
Root delay      : 0.000392719 seconds
Root dispersion : 0.000475957 seconds
Update interval : 48.3 seconds
Leap status     : Normal

2024/01/31 12:47:19.055578 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 12:47:19.060217 [INFO] 200 OK

2024/01/31 12:47:19.060314 [INFO] Skipping Configure OS
2024/01/31 12:47:19.060320 [INFO] Skipping LockRepo
2024/01/31 12:47:19.060324 [INFO] Skipping GenerateEBBanner
2024/01/31 12:47:19.060329 [INFO] Skipping Install Process Manager
2024/01/31 12:47:19.060332 [INFO] Skipping install syslog
2024/01/31 12:47:19.060336 [INFO] Skipping install cron
2024/01/31 12:47:19.060340 [INFO] Skipping install proxy
2024/01/31 12:47:19.060344 [INFO] Skipping installhealthd
2024/01/31 12:47:19.060347 [INFO] Skipping Install Log Streaming Manager
2024/01/31 12:47:19.060351 [INFO] Skipping install X-Ray
2024/01/31 12:47:19.060355 [INFO] Skipping install Third Party License
2024/01/31 12:47:19.060359 [INFO] Skipping installSqsd
2024/01/31 12:47:19.060366 [INFO] Skipping bootstraphealthd
2024/01/31 12:47:19.060370 [INFO] Skipping Install yum packages
2024/01/31 12:47:19.060375 [INFO] Skipping install docker-compose
2024/01/31 12:47:19.060379 [INFO] Skipping Configure Docker Daemon
2024/01/31 12:47:19.060382 [INFO] Skipping MarkBaked
2024/01/31 12:47:19.060386 [INFO] Skipping TuneSystemSettings
2024/01/31 12:47:19.060389 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 12:47:19.060391 [INFO] Initialize LogRotate files and directories
2024/01/31 12:47:19.076420 [INFO] Skipping BootstrapCFNHup
2024/01/31 12:47:19.076435 [INFO] Executing instruction: StartCFNHup
2024/01/31 12:47:19.076439 [INFO] Start cfn-hup
2024/01/31 12:47:19.076457 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 12:47:19.100054 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 12:47:19.111968 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 12:47:19.112129 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 12:47:19.112136 [INFO] Executing instruction: Start Docker
2024/01/31 12:47:19.112140 [INFO] Starting Docker...
2024/01/31 12:47:19.112191 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 12:47:19.113235 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 12:47:19.114163 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 12:47:19.402953 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 12:47:19.418297 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 12:47:19.418330 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 12:47:19.429935 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 12:47:19.439141 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 12:47:19.448977 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 12:47:19.481747 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 12:47:19.481791 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 12:47:19.830008 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 12:47:20.138425 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 12:47:20.159543 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 12:47:20.488575 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 12:47:20.504657 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 12:47:20.523890 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 12:47:20.536314 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 12:47:21.729807 [INFO] Skipping Setup Docker Options
2024/01/31 12:47:21.729835 [INFO] Skipping MarkBootstrapped
2024/01/31 12:47:21.729840 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 12:47:21.729958 [INFO] Starting SwitchCFNStack
2024/01/31 12:47:21.729963 [INFO] Executing instruction: stopSqsd
2024/01/31 12:47:21.729967 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 12:47:21.729970 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 12:47:21.729974 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 12:47:21.729991 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 12:47:22.214957 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 12:47:22.214980 [INFO] Executing instruction: StagedockerApplication
2024/01/31 12:47:22.214998 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 12:47:22.238334 [INFO] Pruning containers ...
2024/01/31 12:47:22.238369 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 12:47:22.262292 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
0888697abd4e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             jovial_sammet

2024/01/31 12:47:22.262339 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 12:47:22.298425 [INFO] Deleted Containers:
0888697abd4ea5ebff06c9e3d600e55183bcdf3076ea8bb99346700049bed073

Total reclaimed space: 0B

2024/01/31 12:47:22.298471 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 12:47:22.322437 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 12:47:22.322667 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 12:47:22.325870 [INFO] application/json

2024/01/31 12:47:22.325893 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 12:47:22.432945 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 12:47:22.433111 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 12:47:22.434494 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 12:47:22.434520 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 12:47:22.434539 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 12:47:22.434542 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 12:47:22.434546 [INFO] Executing instruction: Generate environment file
2024/01/31 12:47:22.434572 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 12:47:22.434575 [INFO] start build docker app
2024/01/31 12:47:22.434945 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 12:47:22.434949 [INFO] fetching image and ports
2024/01/31 12:47:22.436660 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 12:47:22.436730 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 12:47:22.436739 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 12:47:22.436753 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 12:47:23.511062 [INFO] Login Succeeded

2024/01/31 12:47:23.511084 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 12:47:23.511090 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 12:47:23.511112 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 12:47:23.701116 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 12:47:23.701140 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 12:47:23.701145 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 12:47:23.701149 [INFO] start to build docker image
2024/01/31 12:47:23.701167 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 12:47:24.010094 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 12:47:24.010119 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 12:47:24.010124 [INFO] successfully build docker image
2024/01/31 12:47:24.010127 [INFO] save staging docker image id
2024/01/31 12:47:24.010154 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 12:47:24.034836 [INFO] c176d18fbf65

2024/01/31 12:47:24.035047 [INFO] Executing instruction: configure X-Ray
2024/01/31 12:47:24.035055 [INFO] X-Ray is not enabled.
2024/01/31 12:47:24.035058 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 12:47:24.048715 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 12:47:24.050428 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 12:47:24.078186 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 12:47:24.078220 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 12:47:24.093625 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 12:47:24.109770 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 12:47:24.136488 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 12:47:24.239816 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 12:47:24.537717 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 12:47:24.537927 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 12:47:24.927779 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 12:47:24.939285 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 12:47:25.251605 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 12:47:25.260753 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 12:47:25.269853 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 12:47:25.592083 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 12:47:25.600725 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 12:47:25.943779 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 12:47:25.943856 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 12:47:25.958682 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 12:47:25.968719 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 12:47:26.031882 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 12:47:26.032821 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 12:47:26.033841 [INFO] Executing instruction: configure log streaming
2024/01/31 12:47:26.033852 [INFO] log streaming is not enabled
2024/01/31 12:47:26.033856 [INFO] disable log stream
2024/01/31 12:47:26.033870 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 12:47:26.053384 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 12:47:26.070411 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 12:47:26.070591 [INFO] Checking if logs need forced rotation
2024/01/31 12:47:26.070618 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 12:47:26.654377 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 12:47:27.177060 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 12:47:27.178875 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 12:47:27.671270 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 12:47:27.688602 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 12:47:27.688617 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 12:47:27.688639 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 12:47:28.085552 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 12:47:28.085667 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 12:47:28.085693 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 12:47:28.085695 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 12:47:28.085720 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 12:47:28.085731 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 12:47:28.085733 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 12:47:28.085738 [INFO] Executing instruction: stop X-Ray
2024/01/31 12:47:28.085740 [INFO] stop X-Ray ...
2024/01/31 12:47:28.085752 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 12:47:28.104761 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 12:47:28.104793 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 12:47:28.127375 [INFO] Executing instruction: Run Docker Container
2024/01/31 12:47:28.127405 [INFO] stop currently running containers...
2024/01/31 12:47:28.127415 [INFO] detected old app is not docker compose app
2024/01/31 12:47:28.127428 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 12:47:28.202393 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 12:47:28.217808 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 12:47:28.217847 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 12:47:28.232942 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 12:47:28.232978 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 12:47:28.247602 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 12:47:28.247655 [INFO] stopping current container: 0888697abd4e
2024/01/31 12:47:28.247667 [INFO] Running command /bin/sh -c docker ps | grep -q 0888697abd4e
2024/01/31 12:47:28.289964 [INFO] Running command /bin/sh -c docker ps | grep -q 0888697abd4e
2024/01/31 12:47:28.311468 [INFO] Pruning containers ...
2024/01/31 12:47:28.311492 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 12:47:28.331343 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 12:47:28.331395 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 12:47:28.350113 [INFO] Total reclaimed space: 0B

2024/01/31 12:47:28.350146 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 12:47:28.369184 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 12:47:28.369217 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 12:47:28.393882 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 12:47:28.393903 [INFO] Removing /var/app/current/ if it exists
2024/01/31 12:47:28.394003 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 12:47:28.394021 [INFO] detected new app is not docker compose app
2024/01/31 12:47:28.394078 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 12:47:28.828716 [INFO] ff68c3032a626ffddd8f8564f84108012ddc6a16a717b6993feb99a8ab816ca9

2024/01/31 12:47:33.833075 [INFO] Running command /bin/sh -c docker ps | grep -q ff68c3032a62
2024/01/31 12:47:33.855068 [ERROR] docker container quit unexpectedly on 2024-01-31 12:47:33.855044169 +0000 UTC: Command /bin/sh -c docker ps | grep -q ff68c3032a62 failed with error exit status 1
2024/01/31 12:47:33.855097 [INFO] Running command /bin/sh -c docker logs ff68c3032a62
2024/01/31 12:47:33.885975 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container ff68c3032a62: Command /bin/sh -c docker ps | grep -q ff68c3032a62 failed with error exit status 1 

2024/01/31 12:47:33.885986 [INFO] Executing cleanup logic
2024/01/31 12:47:33.886218 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 13:47:34.939631 [INFO] Starting...
2024/01/31 13:47:34.939674 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 13:47:34.939701 [INFO] reading event message file
2024/01/31 13:47:34.940390 [INFO] Engine received EB command userdata-exec

2024/01/31 13:47:34.957591 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 13:47:35.365417 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 13:47:35.835157 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 13:47:35.835490 [INFO] Engine command: (self-startup)

2024/01/31 13:47:35.835508 [INFO] Downloading EB Application...
2024/01/31 13:47:35.835512 [INFO] Region: eu-west-1
2024/01/31 13:47:35.835515 [INFO] envID: e-8gmkc7rmw6
2024/01/31 13:47:35.835519 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 13:47:35.835522 [INFO] Using manifest file name from command request
2024/01/31 13:47:35.835539 [INFO] Unable to get version manifest file.
2024/01/31 13:47:35.835547 [INFO] Downloading latest manifest available.
2024/01/31 13:47:35.835560 [INFO] Download latest app version manifest
2024/01/31 13:47:35.835700 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 13:47:35.909178 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 13:47:35.909357 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 13:47:35.921684 [INFO] Download successful124bytes downloaded
2024/01/31 13:47:35.921827 [INFO] Trying to read and parse version manifest...
2024/01/31 13:47:35.921907 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 13:47:35.963394 [INFO] Download successful264bytes downloaded
2024/01/31 13:47:35.963707 [INFO] Executing instruction: SyncClock
2024/01/31 13:47:35.963712 [INFO] Starting SyncClock
2024/01/31 13:47:35.963727 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 13:47:35.969348 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 13:47:29 2024
System time     : 0.000005648 seconds fast of NTP time
Last offset     : +0.000006693 seconds
RMS offset      : 0.000005702 seconds
Frequency       : 0.298 ppm fast
Residual freq   : +0.009 ppm
Skew            : 0.240 ppm
Root delay      : 0.000449056 seconds
Root dispersion : 0.000460103 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 13:47:35.969366 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 13:47:35.973747 [INFO] 200 OK

2024/01/31 13:47:35.973843 [INFO] Skipping Configure OS
2024/01/31 13:47:35.973848 [INFO] Skipping LockRepo
2024/01/31 13:47:35.973855 [INFO] Skipping GenerateEBBanner
2024/01/31 13:47:35.973859 [INFO] Skipping Install Process Manager
2024/01/31 13:47:35.973863 [INFO] Skipping install syslog
2024/01/31 13:47:35.973867 [INFO] Skipping install cron
2024/01/31 13:47:35.973871 [INFO] Skipping install proxy
2024/01/31 13:47:35.973875 [INFO] Skipping installhealthd
2024/01/31 13:47:35.973879 [INFO] Skipping Install Log Streaming Manager
2024/01/31 13:47:35.973883 [INFO] Skipping install X-Ray
2024/01/31 13:47:35.973886 [INFO] Skipping install Third Party License
2024/01/31 13:47:35.973893 [INFO] Skipping installSqsd
2024/01/31 13:47:35.973897 [INFO] Skipping bootstraphealthd
2024/01/31 13:47:35.973901 [INFO] Skipping Install yum packages
2024/01/31 13:47:35.973905 [INFO] Skipping install docker-compose
2024/01/31 13:47:35.973909 [INFO] Skipping Configure Docker Daemon
2024/01/31 13:47:35.973913 [INFO] Skipping MarkBaked
2024/01/31 13:47:35.973920 [INFO] Skipping TuneSystemSettings
2024/01/31 13:47:35.973923 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 13:47:35.973925 [INFO] Initialize LogRotate files and directories
2024/01/31 13:47:35.989026 [INFO] Skipping BootstrapCFNHup
2024/01/31 13:47:35.989036 [INFO] Executing instruction: StartCFNHup
2024/01/31 13:47:35.989040 [INFO] Start cfn-hup
2024/01/31 13:47:35.989058 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 13:47:36.005273 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 13:47:36.014734 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 13:47:36.014759 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 13:47:36.014764 [INFO] Executing instruction: Start Docker
2024/01/31 13:47:36.014767 [INFO] Starting Docker...
2024/01/31 13:47:36.014850 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 13:47:36.015978 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 13:47:36.017230 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 13:47:36.452854 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 13:47:36.469881 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 13:47:36.469915 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 13:47:36.480662 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 13:47:36.490165 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 13:47:36.503957 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 13:47:36.587761 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 13:47:36.587828 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 13:47:36.910003 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 13:47:37.192330 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 13:47:37.204299 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 13:47:37.567795 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 13:47:37.579943 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 13:47:37.598318 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 13:47:37.610408 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 13:47:39.023652 [INFO] Skipping Setup Docker Options
2024/01/31 13:47:39.023677 [INFO] Skipping MarkBootstrapped
2024/01/31 13:47:39.023682 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 13:47:39.023795 [INFO] Starting SwitchCFNStack
2024/01/31 13:47:39.023800 [INFO] Executing instruction: stopSqsd
2024/01/31 13:47:39.023805 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 13:47:39.023808 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 13:47:39.023812 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 13:47:39.023833 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 13:47:39.430639 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 13:47:39.430663 [INFO] Executing instruction: StagedockerApplication
2024/01/31 13:47:39.430675 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 13:47:39.447398 [INFO] Pruning containers ...
2024/01/31 13:47:39.447427 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 13:47:39.465921 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
ff68c3032a62   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             optimistic_carson

2024/01/31 13:47:39.465950 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 13:47:39.490110 [INFO] Deleted Containers:
ff68c3032a626ffddd8f8564f84108012ddc6a16a717b6993feb99a8ab816ca9

Total reclaimed space: 0B

2024/01/31 13:47:39.490137 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 13:47:39.525931 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 13:47:39.526154 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 13:47:39.532676 [INFO] application/json

2024/01/31 13:47:39.532726 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 13:47:39.620505 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 13:47:39.620672 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 13:47:39.621911 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 13:47:39.621944 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 13:47:39.622111 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 13:47:39.622115 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 13:47:39.622121 [INFO] Executing instruction: Generate environment file
2024/01/31 13:47:39.622151 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 13:47:39.622155 [INFO] start build docker app
2024/01/31 13:47:39.622974 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 13:47:39.622979 [INFO] fetching image and ports
2024/01/31 13:47:39.624557 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 13:47:39.624622 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 13:47:39.624630 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 13:47:39.624640 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 13:47:40.685828 [INFO] Login Succeeded

2024/01/31 13:47:40.685894 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 13:47:40.685901 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 13:47:40.685917 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 13:47:40.824990 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 13:47:40.825013 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 13:47:40.825016 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 13:47:40.825019 [INFO] start to build docker image
2024/01/31 13:47:40.825035 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 13:47:41.068989 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 13:47:41.069028 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 13:47:41.069032 [INFO] successfully build docker image
2024/01/31 13:47:41.069034 [INFO] save staging docker image id
2024/01/31 13:47:41.069049 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 13:47:41.093560 [INFO] c176d18fbf65

2024/01/31 13:47:41.093692 [INFO] Executing instruction: configure X-Ray
2024/01/31 13:47:41.093699 [INFO] X-Ray is not enabled.
2024/01/31 13:47:41.093704 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 13:47:41.099687 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 13:47:41.101228 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 13:47:41.112900 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 13:47:41.112931 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 13:47:41.124139 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 13:47:41.136393 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 13:47:41.147251 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 13:47:41.213201 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 13:47:41.540419 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 13:47:41.540481 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 13:47:41.837233 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 13:47:41.858451 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 13:47:42.168087 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 13:47:42.180226 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 13:47:42.192436 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 13:47:42.565401 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 13:47:42.579422 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 13:47:42.906211 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 13:47:42.906246 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 13:47:42.918718 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 13:47:42.927491 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 13:47:43.006728 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 13:47:43.007790 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 13:47:43.008831 [INFO] Executing instruction: configure log streaming
2024/01/31 13:47:43.008840 [INFO] log streaming is not enabled
2024/01/31 13:47:43.008843 [INFO] disable log stream
2024/01/31 13:47:43.008855 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 13:47:43.047884 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 13:47:43.081715 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 13:47:43.081742 [INFO] Checking if logs need forced rotation
2024/01/31 13:47:43.081764 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 13:47:43.626768 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 13:47:44.100280 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 13:47:44.103117 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 13:47:44.673112 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 13:47:44.692014 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 13:47:44.692035 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 13:47:44.692050 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 13:47:45.095311 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 13:47:45.095346 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 13:47:45.095372 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 13:47:45.095376 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 13:47:45.095399 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 13:47:45.095412 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 13:47:45.095421 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 13:47:45.095427 [INFO] Executing instruction: stop X-Ray
2024/01/31 13:47:45.095430 [INFO] stop X-Ray ...
2024/01/31 13:47:45.095443 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 13:47:45.110570 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 13:47:45.110661 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 13:47:45.125976 [INFO] Executing instruction: Run Docker Container
2024/01/31 13:47:45.126007 [INFO] stop currently running containers...
2024/01/31 13:47:45.126024 [INFO] detected old app is not docker compose app
2024/01/31 13:47:45.126039 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 13:47:45.182506 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 13:47:45.197341 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 13:47:45.197405 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 13:47:45.226508 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 13:47:45.226543 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 13:47:45.246743 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 13:47:45.246793 [INFO] stopping current container: ff68c3032a62
2024/01/31 13:47:45.246806 [INFO] Running command /bin/sh -c docker ps | grep -q ff68c3032a62
2024/01/31 13:47:45.271032 [INFO] Running command /bin/sh -c docker ps | grep -q ff68c3032a62
2024/01/31 13:47:45.293785 [INFO] Pruning containers ...
2024/01/31 13:47:45.293812 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 13:47:45.312723 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 13:47:45.312771 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 13:47:45.336624 [INFO] Total reclaimed space: 0B

2024/01/31 13:47:45.336662 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 13:47:45.356692 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 13:47:45.356724 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 13:47:45.386347 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 13:47:45.386370 [INFO] Removing /var/app/current/ if it exists
2024/01/31 13:47:45.386467 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 13:47:45.386484 [INFO] detected new app is not docker compose app
2024/01/31 13:47:45.386530 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 13:47:45.829692 [INFO] f662e8747a110d4b322d36e1b55617fcd9936ed97ca4d52bfa7d4687303fb3ba

2024/01/31 13:47:50.829958 [INFO] Running command /bin/sh -c docker ps | grep -q f662e8747a11
2024/01/31 13:47:50.869460 [ERROR] docker container quit unexpectedly on 2024-01-31 13:47:50.869440111 +0000 UTC: Command /bin/sh -c docker ps | grep -q f662e8747a11 failed with error exit status 1
2024/01/31 13:47:50.869504 [INFO] Running command /bin/sh -c docker logs f662e8747a11
2024/01/31 13:47:50.918738 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f662e8747a11: Command /bin/sh -c docker ps | grep -q f662e8747a11 failed with error exit status 1 

2024/01/31 13:47:50.918750 [INFO] Executing cleanup logic
2024/01/31 13:47:50.918973 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 14:47:51.910043 [INFO] Starting...
2024/01/31 14:47:51.910088 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 14:47:51.910113 [INFO] reading event message file
2024/01/31 14:47:51.911829 [INFO] Engine received EB command userdata-exec

2024/01/31 14:47:51.917988 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 14:47:52.340497 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 14:47:52.752218 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 14:47:52.752308 [INFO] Engine command: (self-startup)

2024/01/31 14:47:52.752315 [INFO] Downloading EB Application...
2024/01/31 14:47:52.752325 [INFO] Region: eu-west-1
2024/01/31 14:47:52.752328 [INFO] envID: e-8gmkc7rmw6
2024/01/31 14:47:52.752331 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 14:47:52.752333 [INFO] Using manifest file name from command request
2024/01/31 14:47:52.752345 [INFO] Unable to get version manifest file.
2024/01/31 14:47:52.752347 [INFO] Downloading latest manifest available.
2024/01/31 14:47:52.752349 [INFO] Download latest app version manifest
2024/01/31 14:47:52.752462 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 14:47:52.795260 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 14:47:52.795561 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 14:47:52.809006 [INFO] Download successful124bytes downloaded
2024/01/31 14:47:52.809160 [INFO] Trying to read and parse version manifest...
2024/01/31 14:47:52.809232 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 14:47:52.832039 [INFO] Download successful264bytes downloaded
2024/01/31 14:47:52.832562 [INFO] Executing instruction: SyncClock
2024/01/31 14:47:52.832567 [INFO] Starting SyncClock
2024/01/31 14:47:52.832581 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 14:47:52.842872 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 14:47:37 2024
System time     : 0.000000175 seconds slow of NTP time
Last offset     : +0.000000073 seconds
RMS offset      : 0.000001633 seconds
Frequency       : 0.371 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.047 ppm
Root delay      : 0.000426311 seconds
Root dispersion : 0.000454350 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 14:47:52.843001 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 14:47:52.848028 [INFO] 200 OK

2024/01/31 14:47:52.848144 [INFO] Skipping Configure OS
2024/01/31 14:47:52.848152 [INFO] Skipping LockRepo
2024/01/31 14:47:52.848156 [INFO] Skipping GenerateEBBanner
2024/01/31 14:47:52.848160 [INFO] Skipping Install Process Manager
2024/01/31 14:47:52.848164 [INFO] Skipping install syslog
2024/01/31 14:47:52.848168 [INFO] Skipping install cron
2024/01/31 14:47:52.848171 [INFO] Skipping install proxy
2024/01/31 14:47:52.848175 [INFO] Skipping installhealthd
2024/01/31 14:47:52.848179 [INFO] Skipping Install Log Streaming Manager
2024/01/31 14:47:52.848183 [INFO] Skipping install X-Ray
2024/01/31 14:47:52.848186 [INFO] Skipping install Third Party License
2024/01/31 14:47:52.848192 [INFO] Skipping installSqsd
2024/01/31 14:47:52.848196 [INFO] Skipping bootstraphealthd
2024/01/31 14:47:52.848199 [INFO] Skipping Install yum packages
2024/01/31 14:47:52.848203 [INFO] Skipping install docker-compose
2024/01/31 14:47:52.848207 [INFO] Skipping Configure Docker Daemon
2024/01/31 14:47:52.848211 [INFO] Skipping MarkBaked
2024/01/31 14:47:52.848214 [INFO] Skipping TuneSystemSettings
2024/01/31 14:47:52.848217 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 14:47:52.848224 [INFO] Initialize LogRotate files and directories
2024/01/31 14:47:52.863972 [INFO] Skipping BootstrapCFNHup
2024/01/31 14:47:52.863986 [INFO] Executing instruction: StartCFNHup
2024/01/31 14:47:52.863989 [INFO] Start cfn-hup
2024/01/31 14:47:52.864041 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 14:47:52.880708 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 14:47:52.891604 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 14:47:52.891639 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 14:47:52.891643 [INFO] Executing instruction: Start Docker
2024/01/31 14:47:52.891646 [INFO] Starting Docker...
2024/01/31 14:47:52.891823 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 14:47:52.893074 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 14:47:52.894146 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 14:47:53.379799 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 14:47:53.394396 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 14:47:53.394431 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 14:47:53.405057 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 14:47:53.413979 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 14:47:53.434833 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 14:47:53.485057 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 14:47:53.485104 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 14:47:53.826005 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 14:47:54.105686 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 14:47:54.121774 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 14:47:54.395954 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 14:47:54.414466 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 14:47:54.441346 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 14:47:54.457097 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 14:47:55.706647 [INFO] Skipping Setup Docker Options
2024/01/31 14:47:55.706666 [INFO] Skipping MarkBootstrapped
2024/01/31 14:47:55.706673 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 14:47:55.706802 [INFO] Starting SwitchCFNStack
2024/01/31 14:47:55.706807 [INFO] Executing instruction: stopSqsd
2024/01/31 14:47:55.706811 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 14:47:55.706813 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 14:47:55.706815 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 14:47:55.706840 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 14:47:56.275740 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 14:47:56.275775 [INFO] Executing instruction: StagedockerApplication
2024/01/31 14:47:56.275790 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 14:47:56.295609 [INFO] Pruning containers ...
2024/01/31 14:47:56.295639 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 14:47:56.317537 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f662e8747a11   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             zen_aryabhata

2024/01/31 14:47:56.317587 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 14:47:56.343235 [INFO] Deleted Containers:
f662e8747a110d4b322d36e1b55617fcd9936ed97ca4d52bfa7d4687303fb3ba

Total reclaimed space: 0B

2024/01/31 14:47:56.343263 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 14:47:56.379020 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 14:47:56.379292 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 14:47:56.382146 [INFO] application/json

2024/01/31 14:47:56.382170 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 14:47:56.506803 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 14:47:56.507084 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 14:47:56.508452 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 14:47:56.508568 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 14:47:56.508586 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 14:47:56.508589 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 14:47:56.508594 [INFO] Executing instruction: Generate environment file
2024/01/31 14:47:56.508622 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 14:47:56.508627 [INFO] start build docker app
2024/01/31 14:47:56.509114 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 14:47:56.509119 [INFO] fetching image and ports
2024/01/31 14:47:56.513035 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 14:47:56.513118 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 14:47:56.513129 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 14:47:56.513139 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 14:47:57.506831 [INFO] Login Succeeded

2024/01/31 14:47:57.506859 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 14:47:57.506866 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 14:47:57.506883 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 14:47:57.656939 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 14:47:57.656994 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 14:47:57.656999 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 14:47:57.657004 [INFO] start to build docker image
2024/01/31 14:47:57.657042 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 14:47:57.943168 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 14:47:57.943187 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 14:47:57.943191 [INFO] successfully build docker image
2024/01/31 14:47:57.943193 [INFO] save staging docker image id
2024/01/31 14:47:57.943224 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 14:47:57.970838 [INFO] c176d18fbf65

2024/01/31 14:47:57.970988 [INFO] Executing instruction: configure X-Ray
2024/01/31 14:47:57.970995 [INFO] X-Ray is not enabled.
2024/01/31 14:47:57.970998 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 14:47:57.976417 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 14:47:57.978101 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 14:47:57.993701 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 14:47:57.993738 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 14:47:58.012076 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 14:47:58.028566 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 14:47:58.050610 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 14:47:58.129035 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 14:47:58.457697 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 14:47:58.457781 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 14:47:58.783582 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 14:47:58.797344 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 14:47:59.156695 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 14:47:59.168089 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 14:47:59.181325 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 14:47:59.520129 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 14:47:59.536340 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 14:47:59.862060 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 14:47:59.862094 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 14:47:59.875807 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 14:47:59.884578 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 14:47:59.968186 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 14:47:59.969672 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 14:47:59.970614 [INFO] Executing instruction: configure log streaming
2024/01/31 14:47:59.970625 [INFO] log streaming is not enabled
2024/01/31 14:47:59.970634 [INFO] disable log stream
2024/01/31 14:47:59.970649 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 14:47:59.989032 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 14:48:00.087166 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 14:48:00.087196 [INFO] Checking if logs need forced rotation
2024/01/31 14:48:00.087233 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 14:48:00.756058 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 14:48:01.330686 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 14:48:01.332436 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 14:48:01.925001 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 14:48:01.948464 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 14:48:01.948490 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 14:48:01.948512 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 14:48:02.599772 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 14:48:02.599799 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 14:48:02.599827 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 14:48:02.599831 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 14:48:02.599850 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 14:48:02.599861 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 14:48:02.599864 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 14:48:02.599873 [INFO] Executing instruction: stop X-Ray
2024/01/31 14:48:02.599875 [INFO] stop X-Ray ...
2024/01/31 14:48:02.599887 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 14:48:02.615603 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 14:48:02.615640 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 14:48:02.634262 [INFO] Executing instruction: Run Docker Container
2024/01/31 14:48:02.634293 [INFO] stop currently running containers...
2024/01/31 14:48:02.634307 [INFO] detected old app is not docker compose app
2024/01/31 14:48:02.634320 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 14:48:02.712604 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 14:48:02.746727 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 14:48:02.746768 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 14:48:02.778796 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 14:48:02.778828 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 14:48:02.796527 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 14:48:02.796581 [INFO] stopping current container: f662e8747a11
2024/01/31 14:48:02.796593 [INFO] Running command /bin/sh -c docker ps | grep -q f662e8747a11
2024/01/31 14:48:02.817985 [INFO] Running command /bin/sh -c docker ps | grep -q f662e8747a11
2024/01/31 14:48:02.842735 [INFO] Pruning containers ...
2024/01/31 14:48:02.842759 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 14:48:02.863118 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 14:48:02.863152 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 14:48:02.896945 [INFO] Total reclaimed space: 0B

2024/01/31 14:48:02.896974 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 14:48:02.930035 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 14:48:02.930072 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 14:48:02.949385 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 14:48:02.949407 [INFO] Removing /var/app/current/ if it exists
2024/01/31 14:48:02.949506 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 14:48:02.949524 [INFO] detected new app is not docker compose app
2024/01/31 14:48:02.949591 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 14:48:03.430381 [INFO] 61aa84534bae900e7658880e8618aa78057985aa1a845f4018977164086be14b

2024/01/31 14:48:08.434862 [INFO] Running command /bin/sh -c docker ps | grep -q 61aa84534bae
2024/01/31 14:48:08.468830 [ERROR] docker container quit unexpectedly on 2024-01-31 14:48:08.468819437 +0000 UTC: Command /bin/sh -c docker ps | grep -q 61aa84534bae failed with error exit status 1
2024/01/31 14:48:08.468858 [INFO] Running command /bin/sh -c docker logs 61aa84534bae
2024/01/31 14:48:08.491830 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 61aa84534bae: Command /bin/sh -c docker ps | grep -q 61aa84534bae failed with error exit status 1 

2024/01/31 14:48:08.491842 [INFO] Executing cleanup logic
2024/01/31 14:48:08.492029 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 15:48:09.503055 [INFO] Starting...
2024/01/31 15:48:09.503105 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 15:48:09.503130 [INFO] reading event message file
2024/01/31 15:48:09.504144 [INFO] Engine received EB command userdata-exec

2024/01/31 15:48:09.510974 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 15:48:09.922020 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 15:48:10.434424 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 15:48:10.434535 [INFO] Engine command: (self-startup)

2024/01/31 15:48:10.434543 [INFO] Downloading EB Application...
2024/01/31 15:48:10.434546 [INFO] Region: eu-west-1
2024/01/31 15:48:10.434549 [INFO] envID: e-8gmkc7rmw6
2024/01/31 15:48:10.434551 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 15:48:10.434553 [INFO] Using manifest file name from command request
2024/01/31 15:48:10.434569 [INFO] Unable to get version manifest file.
2024/01/31 15:48:10.434571 [INFO] Downloading latest manifest available.
2024/01/31 15:48:10.434573 [INFO] Download latest app version manifest
2024/01/31 15:48:10.434710 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 15:48:10.471325 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 15:48:10.471540 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 15:48:10.481658 [INFO] Download successful124bytes downloaded
2024/01/31 15:48:10.481808 [INFO] Trying to read and parse version manifest...
2024/01/31 15:48:10.481880 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 15:48:10.518163 [INFO] Download successful264bytes downloaded
2024/01/31 15:48:10.518539 [INFO] Executing instruction: SyncClock
2024/01/31 15:48:10.518544 [INFO] Starting SyncClock
2024/01/31 15:48:10.518554 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 15:48:10.524489 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 15:47:57 2024
System time     : 0.000000653 seconds slow of NTP time
Last offset     : -0.000000280 seconds
RMS offset      : 0.000003804 seconds
Frequency       : 0.100 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.111 ppm
Root delay      : 0.000439278 seconds
Root dispersion : 0.000426725 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 15:48:10.524512 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 15:48:10.529497 [INFO] 200 OK

2024/01/31 15:48:10.529684 [INFO] Skipping Configure OS
2024/01/31 15:48:10.529692 [INFO] Skipping LockRepo
2024/01/31 15:48:10.529696 [INFO] Skipping GenerateEBBanner
2024/01/31 15:48:10.529700 [INFO] Skipping Install Process Manager
2024/01/31 15:48:10.529704 [INFO] Skipping install syslog
2024/01/31 15:48:10.529708 [INFO] Skipping install cron
2024/01/31 15:48:10.529712 [INFO] Skipping install proxy
2024/01/31 15:48:10.529716 [INFO] Skipping installhealthd
2024/01/31 15:48:10.529719 [INFO] Skipping Install Log Streaming Manager
2024/01/31 15:48:10.529723 [INFO] Skipping install X-Ray
2024/01/31 15:48:10.529731 [INFO] Skipping install Third Party License
2024/01/31 15:48:10.529737 [INFO] Skipping installSqsd
2024/01/31 15:48:10.529741 [INFO] Skipping bootstraphealthd
2024/01/31 15:48:10.529745 [INFO] Skipping Install yum packages
2024/01/31 15:48:10.529749 [INFO] Skipping install docker-compose
2024/01/31 15:48:10.529753 [INFO] Skipping Configure Docker Daemon
2024/01/31 15:48:10.529757 [INFO] Skipping MarkBaked
2024/01/31 15:48:10.529853 [INFO] Skipping TuneSystemSettings
2024/01/31 15:48:10.529857 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 15:48:10.529860 [INFO] Initialize LogRotate files and directories
2024/01/31 15:48:10.547062 [INFO] Skipping BootstrapCFNHup
2024/01/31 15:48:10.547158 [INFO] Executing instruction: StartCFNHup
2024/01/31 15:48:10.547162 [INFO] Start cfn-hup
2024/01/31 15:48:10.547179 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 15:48:10.562409 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 15:48:10.574135 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 15:48:10.574168 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 15:48:10.574172 [INFO] Executing instruction: Start Docker
2024/01/31 15:48:10.574176 [INFO] Starting Docker...
2024/01/31 15:48:10.574256 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 15:48:10.575331 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 15:48:10.576456 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 15:48:10.963541 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 15:48:10.978383 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 15:48:10.978519 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 15:48:10.990468 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 15:48:11.000084 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 15:48:11.013338 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 15:48:11.100407 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 15:48:11.100466 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 15:48:11.428921 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 15:48:11.721774 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 15:48:11.733077 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 15:48:12.046945 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 15:48:12.056827 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 15:48:12.068875 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 15:48:12.079157 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 15:48:13.341812 [INFO] Skipping Setup Docker Options
2024/01/31 15:48:13.341832 [INFO] Skipping MarkBootstrapped
2024/01/31 15:48:13.341836 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 15:48:13.341949 [INFO] Starting SwitchCFNStack
2024/01/31 15:48:13.341955 [INFO] Executing instruction: stopSqsd
2024/01/31 15:48:13.341959 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 15:48:13.341962 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 15:48:13.341966 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 15:48:13.341988 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 15:48:13.798588 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 15:48:13.798620 [INFO] Executing instruction: StagedockerApplication
2024/01/31 15:48:13.798630 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 15:48:13.817464 [INFO] Pruning containers ...
2024/01/31 15:48:13.817496 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 15:48:13.836697 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
61aa84534bae   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             cool_mcnulty

2024/01/31 15:48:13.836731 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 15:48:13.866786 [INFO] Deleted Containers:
61aa84534bae900e7658880e8618aa78057985aa1a845f4018977164086be14b

Total reclaimed space: 0B

2024/01/31 15:48:13.866809 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 15:48:13.888812 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 15:48:13.889071 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 15:48:13.891714 [INFO] application/json

2024/01/31 15:48:13.891758 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 15:48:13.967895 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 15:48:13.968057 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 15:48:13.969184 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 15:48:13.969204 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 15:48:13.969218 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 15:48:13.969220 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 15:48:13.969224 [INFO] Executing instruction: Generate environment file
2024/01/31 15:48:13.969254 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 15:48:13.969257 [INFO] start build docker app
2024/01/31 15:48:13.969612 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 15:48:13.969619 [INFO] fetching image and ports
2024/01/31 15:48:13.971742 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 15:48:13.971813 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 15:48:13.971824 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 15:48:13.971838 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 15:48:14.947898 [INFO] Login Succeeded

2024/01/31 15:48:14.947919 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 15:48:14.947926 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 15:48:14.947946 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 15:48:15.113996 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 15:48:15.114023 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 15:48:15.114027 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 15:48:15.114032 [INFO] start to build docker image
2024/01/31 15:48:15.114051 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 15:48:15.433040 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 15:48:15.433061 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 15:48:15.433066 [INFO] successfully build docker image
2024/01/31 15:48:15.433069 [INFO] save staging docker image id
2024/01/31 15:48:15.433084 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 15:48:15.451769 [INFO] c176d18fbf65

2024/01/31 15:48:15.451890 [INFO] Executing instruction: configure X-Ray
2024/01/31 15:48:15.451924 [INFO] X-Ray is not enabled.
2024/01/31 15:48:15.451928 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 15:48:15.457665 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 15:48:15.459316 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 15:48:15.470500 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 15:48:15.470532 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 15:48:15.479907 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 15:48:15.488304 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 15:48:15.497693 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 15:48:15.576472 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 15:48:15.903915 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 15:48:15.903995 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 15:48:16.261251 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 15:48:16.275515 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 15:48:16.650271 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 15:48:16.661674 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 15:48:16.670744 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 15:48:16.991389 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 15:48:17.001210 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 15:48:17.417605 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 15:48:17.417640 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 15:48:17.437707 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 15:48:17.449789 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 15:48:17.558163 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 15:48:17.559132 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 15:48:17.560315 [INFO] Executing instruction: configure log streaming
2024/01/31 15:48:17.560325 [INFO] log streaming is not enabled
2024/01/31 15:48:17.560329 [INFO] disable log stream
2024/01/31 15:48:17.560349 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 15:48:17.580107 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 15:48:17.620695 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 15:48:17.620748 [INFO] Checking if logs need forced rotation
2024/01/31 15:48:17.620769 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 15:48:18.190125 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 15:48:18.746169 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 15:48:18.748169 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 15:48:19.169422 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 15:48:19.186999 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 15:48:19.187014 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 15:48:19.187038 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 15:48:19.656460 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 15:48:19.656493 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 15:48:19.656516 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 15:48:19.656519 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 15:48:19.656544 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 15:48:19.656554 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 15:48:19.656556 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 15:48:19.656561 [INFO] Executing instruction: stop X-Ray
2024/01/31 15:48:19.656564 [INFO] stop X-Ray ...
2024/01/31 15:48:19.656574 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 15:48:19.670800 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 15:48:19.670831 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 15:48:19.685420 [INFO] Executing instruction: Run Docker Container
2024/01/31 15:48:19.685457 [INFO] stop currently running containers...
2024/01/31 15:48:19.685466 [INFO] detected old app is not docker compose app
2024/01/31 15:48:19.685477 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 15:48:19.732685 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 15:48:19.747234 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 15:48:19.747340 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 15:48:19.761068 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 15:48:19.761100 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 15:48:19.776028 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 15:48:19.776081 [INFO] stopping current container: 61aa84534bae
2024/01/31 15:48:19.776093 [INFO] Running command /bin/sh -c docker ps | grep -q 61aa84534bae
2024/01/31 15:48:19.796891 [INFO] Running command /bin/sh -c docker ps | grep -q 61aa84534bae
2024/01/31 15:48:19.816483 [INFO] Pruning containers ...
2024/01/31 15:48:19.816506 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 15:48:19.839084 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 15:48:19.839112 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 15:48:19.860942 [INFO] Total reclaimed space: 0B

2024/01/31 15:48:19.860972 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 15:48:19.880994 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 15:48:19.881022 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 15:48:19.907948 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 15:48:19.907969 [INFO] Removing /var/app/current/ if it exists
2024/01/31 15:48:19.908063 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 15:48:19.908079 [INFO] detected new app is not docker compose app
2024/01/31 15:48:19.908127 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 15:48:20.292676 [INFO] f5c92d7547b745cb2a91a68925b1df271a7f4e238442e98a9b5078a5bd11cd31

2024/01/31 15:48:25.292967 [INFO] Running command /bin/sh -c docker ps | grep -q f5c92d7547b7
2024/01/31 15:48:25.330918 [ERROR] docker container quit unexpectedly on 2024-01-31 15:48:25.330875416 +0000 UTC: Command /bin/sh -c docker ps | grep -q f5c92d7547b7 failed with error exit status 1
2024/01/31 15:48:25.330954 [INFO] Running command /bin/sh -c docker logs f5c92d7547b7
2024/01/31 15:48:25.378219 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f5c92d7547b7: Command /bin/sh -c docker ps | grep -q f5c92d7547b7 failed with error exit status 1 

2024/01/31 15:48:25.378229 [INFO] Executing cleanup logic
2024/01/31 15:48:25.378574 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 16:48:26.500506 [INFO] Starting...
2024/01/31 16:48:26.500550 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 16:48:26.500582 [INFO] reading event message file
2024/01/31 16:48:26.501465 [INFO] Engine received EB command userdata-exec

2024/01/31 16:48:26.508879 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 16:48:26.901846 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 16:48:27.388492 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 16:48:27.390652 [INFO] Engine command: (self-startup)

2024/01/31 16:48:27.390665 [INFO] Downloading EB Application...
2024/01/31 16:48:27.390668 [INFO] Region: eu-west-1
2024/01/31 16:48:27.390672 [INFO] envID: e-8gmkc7rmw6
2024/01/31 16:48:27.390675 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 16:48:27.390679 [INFO] Using manifest file name from command request
2024/01/31 16:48:27.390695 [INFO] Unable to get version manifest file.
2024/01/31 16:48:27.390698 [INFO] Downloading latest manifest available.
2024/01/31 16:48:27.390701 [INFO] Download latest app version manifest
2024/01/31 16:48:27.390829 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 16:48:27.438388 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 16:48:27.438614 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 16:48:27.450184 [INFO] Download successful124bytes downloaded
2024/01/31 16:48:27.450403 [INFO] Trying to read and parse version manifest...
2024/01/31 16:48:27.450547 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 16:48:27.477275 [INFO] Download successful264bytes downloaded
2024/01/31 16:48:27.477679 [INFO] Executing instruction: SyncClock
2024/01/31 16:48:27.477687 [INFO] Starting SyncClock
2024/01/31 16:48:27.477747 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 16:48:27.483982 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 16:48:21 2024
System time     : 0.000000496 seconds slow of NTP time
Last offset     : -0.000001256 seconds
RMS offset      : 0.000002625 seconds
Frequency       : 0.342 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.145 ppm
Root delay      : 0.000449074 seconds
Root dispersion : 0.000399932 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/01/31 16:48:27.484009 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 16:48:27.488503 [INFO] 200 OK

2024/01/31 16:48:27.488669 [INFO] Skipping Configure OS
2024/01/31 16:48:27.488678 [INFO] Skipping LockRepo
2024/01/31 16:48:27.488682 [INFO] Skipping GenerateEBBanner
2024/01/31 16:48:27.488686 [INFO] Skipping Install Process Manager
2024/01/31 16:48:27.488690 [INFO] Skipping install syslog
2024/01/31 16:48:27.488694 [INFO] Skipping install cron
2024/01/31 16:48:27.488698 [INFO] Skipping install proxy
2024/01/31 16:48:27.488702 [INFO] Skipping installhealthd
2024/01/31 16:48:27.488706 [INFO] Skipping Install Log Streaming Manager
2024/01/31 16:48:27.488710 [INFO] Skipping install X-Ray
2024/01/31 16:48:27.488714 [INFO] Skipping install Third Party License
2024/01/31 16:48:27.488719 [INFO] Skipping installSqsd
2024/01/31 16:48:27.488723 [INFO] Skipping bootstraphealthd
2024/01/31 16:48:27.488727 [INFO] Skipping Install yum packages
2024/01/31 16:48:27.488731 [INFO] Skipping install docker-compose
2024/01/31 16:48:27.488735 [INFO] Skipping Configure Docker Daemon
2024/01/31 16:48:27.488738 [INFO] Skipping MarkBaked
2024/01/31 16:48:27.488747 [INFO] Skipping TuneSystemSettings
2024/01/31 16:48:27.488749 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 16:48:27.488752 [INFO] Initialize LogRotate files and directories
2024/01/31 16:48:27.513684 [INFO] Skipping BootstrapCFNHup
2024/01/31 16:48:27.513695 [INFO] Executing instruction: StartCFNHup
2024/01/31 16:48:27.513698 [INFO] Start cfn-hup
2024/01/31 16:48:27.513716 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 16:48:27.536784 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 16:48:27.547567 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 16:48:27.547603 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 16:48:27.547607 [INFO] Executing instruction: Start Docker
2024/01/31 16:48:27.547611 [INFO] Starting Docker...
2024/01/31 16:48:27.547702 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 16:48:27.548834 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 16:48:27.549902 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 16:48:27.922048 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 16:48:27.937101 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 16:48:27.937133 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 16:48:27.948859 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 16:48:27.959343 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 16:48:27.970318 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 16:48:28.020316 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 16:48:28.020352 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 16:48:28.323489 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 16:48:28.727893 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 16:48:28.739838 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 16:48:29.112115 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 16:48:29.122699 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 16:48:29.153441 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 16:48:29.169907 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 16:48:30.497417 [INFO] Skipping Setup Docker Options
2024/01/31 16:48:30.497441 [INFO] Skipping MarkBootstrapped
2024/01/31 16:48:30.497444 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 16:48:30.497562 [INFO] Starting SwitchCFNStack
2024/01/31 16:48:30.497567 [INFO] Executing instruction: stopSqsd
2024/01/31 16:48:30.497571 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 16:48:30.497574 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 16:48:30.497578 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 16:48:30.497595 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 16:48:31.077582 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 16:48:31.078215 [INFO] Executing instruction: StagedockerApplication
2024/01/31 16:48:31.078376 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 16:48:31.120867 [INFO] Pruning containers ...
2024/01/31 16:48:31.120897 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 16:48:31.143586 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f5c92d7547b7   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             cranky_kowalevski

2024/01/31 16:48:31.143614 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 16:48:31.175371 [INFO] Deleted Containers:
f5c92d7547b745cb2a91a68925b1df271a7f4e238442e98a9b5078a5bd11cd31

Total reclaimed space: 0B

2024/01/31 16:48:31.175395 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 16:48:31.200082 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 16:48:31.200542 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 16:48:31.204403 [INFO] application/json

2024/01/31 16:48:31.204431 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 16:48:31.294698 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 16:48:31.294865 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 16:48:31.296251 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 16:48:31.296275 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 16:48:31.296289 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 16:48:31.296291 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 16:48:31.296295 [INFO] Executing instruction: Generate environment file
2024/01/31 16:48:31.296328 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 16:48:31.296332 [INFO] start build docker app
2024/01/31 16:48:31.296738 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 16:48:31.296742 [INFO] fetching image and ports
2024/01/31 16:48:31.298786 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 16:48:31.298850 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 16:48:31.298860 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 16:48:31.298871 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 16:48:32.317553 [INFO] Login Succeeded

2024/01/31 16:48:32.317573 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 16:48:32.317580 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 16:48:32.317601 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 16:48:32.479109 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 16:48:32.479131 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 16:48:32.479134 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 16:48:32.479142 [INFO] start to build docker image
2024/01/31 16:48:32.479158 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 16:48:32.793216 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 16:48:32.793235 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 16:48:32.793239 [INFO] successfully build docker image
2024/01/31 16:48:32.793242 [INFO] save staging docker image id
2024/01/31 16:48:32.793256 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 16:48:32.816587 [INFO] c176d18fbf65

2024/01/31 16:48:32.816713 [INFO] Executing instruction: configure X-Ray
2024/01/31 16:48:32.816719 [INFO] X-Ray is not enabled.
2024/01/31 16:48:32.816722 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 16:48:32.822983 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 16:48:32.824695 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 16:48:32.839375 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 16:48:32.839404 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 16:48:32.850696 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 16:48:32.860759 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 16:48:32.872026 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 16:48:32.941987 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 16:48:33.241250 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 16:48:33.241448 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 16:48:33.636572 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 16:48:33.655043 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 16:48:33.991124 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 16:48:34.000865 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 16:48:34.010197 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 16:48:34.415967 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 16:48:34.427649 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 16:48:34.763174 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 16:48:34.763217 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 16:48:34.777836 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 16:48:34.789120 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 16:48:34.901567 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 16:48:34.902683 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 16:48:34.903673 [INFO] Executing instruction: configure log streaming
2024/01/31 16:48:34.903688 [INFO] log streaming is not enabled
2024/01/31 16:48:34.903692 [INFO] disable log stream
2024/01/31 16:48:34.903705 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 16:48:34.932628 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 16:48:34.951580 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 16:48:34.951615 [INFO] Checking if logs need forced rotation
2024/01/31 16:48:34.951636 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 16:48:35.585140 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 16:48:36.059169 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 16:48:36.061158 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 16:48:36.172063 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 16:48:36.204188 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 16:48:36.204208 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 16:48:36.204228 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 16:48:36.675189 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 16:48:36.675235 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 16:48:36.675262 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 16:48:36.675267 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 16:48:36.675292 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 16:48:36.675303 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 16:48:36.675306 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 16:48:36.675311 [INFO] Executing instruction: stop X-Ray
2024/01/31 16:48:36.675314 [INFO] stop X-Ray ...
2024/01/31 16:48:36.675329 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 16:48:36.690980 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 16:48:36.691015 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 16:48:36.708288 [INFO] Executing instruction: Run Docker Container
2024/01/31 16:48:36.708315 [INFO] stop currently running containers...
2024/01/31 16:48:36.708324 [INFO] detected old app is not docker compose app
2024/01/31 16:48:36.708336 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 16:48:36.762388 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 16:48:36.780588 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 16:48:36.780632 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 16:48:36.795469 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 16:48:36.795534 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 16:48:36.810525 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 16:48:36.810580 [INFO] stopping current container: f5c92d7547b7
2024/01/31 16:48:36.810593 [INFO] Running command /bin/sh -c docker ps | grep -q f5c92d7547b7
2024/01/31 16:48:36.834590 [INFO] Running command /bin/sh -c docker ps | grep -q f5c92d7547b7
2024/01/31 16:48:36.859243 [INFO] Pruning containers ...
2024/01/31 16:48:36.859334 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 16:48:36.883138 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 16:48:36.883169 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 16:48:36.935344 [INFO] Total reclaimed space: 0B

2024/01/31 16:48:36.935394 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 16:48:36.955489 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 16:48:36.955522 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 16:48:37.000606 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 16:48:37.000628 [INFO] Removing /var/app/current/ if it exists
2024/01/31 16:48:37.000773 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 16:48:37.000792 [INFO] detected new app is not docker compose app
2024/01/31 16:48:37.000959 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 16:48:37.393037 [INFO] f8d5094190ac76b86aa544b15ecb1dcd4c8278cc7656e8233c928cb661aa8e27

2024/01/31 16:48:42.397187 [INFO] Running command /bin/sh -c docker ps | grep -q f8d5094190ac
2024/01/31 16:48:42.417741 [ERROR] docker container quit unexpectedly on 2024-01-31 16:48:42.417725298 +0000 UTC: Command /bin/sh -c docker ps | grep -q f8d5094190ac failed with error exit status 1
2024/01/31 16:48:42.417766 [INFO] Running command /bin/sh -c docker logs f8d5094190ac
2024/01/31 16:48:42.436819 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f8d5094190ac: Command /bin/sh -c docker ps | grep -q f8d5094190ac failed with error exit status 1 

2024/01/31 16:48:42.436828 [INFO] Executing cleanup logic
2024/01/31 16:48:42.436994 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 17:48:43.472532 [INFO] Starting...
2024/01/31 17:48:43.472598 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 17:48:43.472624 [INFO] reading event message file
2024/01/31 17:48:43.473984 [INFO] Engine received EB command userdata-exec

2024/01/31 17:48:43.483755 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 17:48:43.902472 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 17:48:44.370041 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 17:48:44.370155 [INFO] Engine command: (self-startup)

2024/01/31 17:48:44.370165 [INFO] Downloading EB Application...
2024/01/31 17:48:44.370168 [INFO] Region: eu-west-1
2024/01/31 17:48:44.370181 [INFO] envID: e-8gmkc7rmw6
2024/01/31 17:48:44.370184 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 17:48:44.370187 [INFO] Using manifest file name from command request
2024/01/31 17:48:44.370201 [INFO] Unable to get version manifest file.
2024/01/31 17:48:44.370205 [INFO] Downloading latest manifest available.
2024/01/31 17:48:44.370207 [INFO] Download latest app version manifest
2024/01/31 17:48:44.370568 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 17:48:44.409137 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 17:48:44.409733 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 17:48:44.428274 [INFO] Download successful124bytes downloaded
2024/01/31 17:48:44.428418 [INFO] Trying to read and parse version manifest...
2024/01/31 17:48:44.428508 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 17:48:44.458408 [INFO] Download successful264bytes downloaded
2024/01/31 17:48:44.458933 [INFO] Executing instruction: SyncClock
2024/01/31 17:48:44.458940 [INFO] Starting SyncClock
2024/01/31 17:48:44.458953 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 17:48:44.467507 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 17:48:29 2024
System time     : 0.000000977 seconds fast of NTP time
Last offset     : +0.000001420 seconds
RMS offset      : 0.000005302 seconds
Frequency       : 0.197 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.103 ppm
Root delay      : 0.000442366 seconds
Root dispersion : 0.000398956 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 17:48:44.467536 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 17:48:44.472431 [INFO] 200 OK

2024/01/31 17:48:44.472605 [INFO] Skipping Configure OS
2024/01/31 17:48:44.472616 [INFO] Skipping LockRepo
2024/01/31 17:48:44.472624 [INFO] Skipping GenerateEBBanner
2024/01/31 17:48:44.472631 [INFO] Skipping Install Process Manager
2024/01/31 17:48:44.472637 [INFO] Skipping install syslog
2024/01/31 17:48:44.472642 [INFO] Skipping install cron
2024/01/31 17:48:44.472648 [INFO] Skipping install proxy
2024/01/31 17:48:44.472654 [INFO] Skipping installhealthd
2024/01/31 17:48:44.472660 [INFO] Skipping Install Log Streaming Manager
2024/01/31 17:48:44.472670 [INFO] Skipping install X-Ray
2024/01/31 17:48:44.472676 [INFO] Skipping install Third Party License
2024/01/31 17:48:44.472685 [INFO] Skipping installSqsd
2024/01/31 17:48:44.472691 [INFO] Skipping bootstraphealthd
2024/01/31 17:48:44.472697 [INFO] Skipping Install yum packages
2024/01/31 17:48:44.472704 [INFO] Skipping install docker-compose
2024/01/31 17:48:44.472710 [INFO] Skipping Configure Docker Daemon
2024/01/31 17:48:44.472718 [INFO] Skipping MarkBaked
2024/01/31 17:48:44.472724 [INFO] Skipping TuneSystemSettings
2024/01/31 17:48:44.472728 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 17:48:44.472731 [INFO] Initialize LogRotate files and directories
2024/01/31 17:48:44.487505 [INFO] Skipping BootstrapCFNHup
2024/01/31 17:48:44.487518 [INFO] Executing instruction: StartCFNHup
2024/01/31 17:48:44.487521 [INFO] Start cfn-hup
2024/01/31 17:48:44.487539 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 17:48:44.502034 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 17:48:44.513313 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 17:48:44.513347 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 17:48:44.513351 [INFO] Executing instruction: Start Docker
2024/01/31 17:48:44.513354 [INFO] Starting Docker...
2024/01/31 17:48:44.513442 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 17:48:44.514777 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 17:48:44.515969 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 17:48:44.906422 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 17:48:44.922074 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 17:48:44.922104 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 17:48:44.950880 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 17:48:44.964202 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 17:48:44.974195 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 17:48:45.062712 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 17:48:45.062774 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 17:48:45.433935 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 17:48:45.838190 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 17:48:45.850436 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 17:48:46.180535 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 17:48:46.196205 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 17:48:46.212191 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 17:48:46.221893 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 17:48:47.316240 [INFO] Skipping Setup Docker Options
2024/01/31 17:48:47.316272 [INFO] Skipping MarkBootstrapped
2024/01/31 17:48:47.316276 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 17:48:47.316409 [INFO] Starting SwitchCFNStack
2024/01/31 17:48:47.316415 [INFO] Executing instruction: stopSqsd
2024/01/31 17:48:47.316419 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 17:48:47.316423 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 17:48:47.316427 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 17:48:47.316442 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 17:48:47.857737 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 17:48:47.857791 [INFO] Executing instruction: StagedockerApplication
2024/01/31 17:48:47.857803 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 17:48:47.879887 [INFO] Pruning containers ...
2024/01/31 17:48:47.879921 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 17:48:47.900874 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f8d5094190ac   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             eager_noether

2024/01/31 17:48:47.900903 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 17:48:47.932519 [INFO] Deleted Containers:
f8d5094190ac76b86aa544b15ecb1dcd4c8278cc7656e8233c928cb661aa8e27

Total reclaimed space: 0B

2024/01/31 17:48:47.932546 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 17:48:47.955973 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 17:48:47.956220 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 17:48:47.959094 [INFO] application/json

2024/01/31 17:48:47.959114 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 17:48:48.033853 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 17:48:48.034044 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 17:48:48.035766 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 17:48:48.035792 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 17:48:48.035807 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 17:48:48.035810 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 17:48:48.035814 [INFO] Executing instruction: Generate environment file
2024/01/31 17:48:48.035850 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 17:48:48.035860 [INFO] start build docker app
2024/01/31 17:48:48.036213 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 17:48:48.036218 [INFO] fetching image and ports
2024/01/31 17:48:48.037833 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 17:48:48.037903 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 17:48:48.037913 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 17:48:48.037923 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 17:48:49.114410 [INFO] Login Succeeded

2024/01/31 17:48:49.114426 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 17:48:49.114431 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 17:48:49.114450 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 17:48:49.262551 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 17:48:49.262577 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 17:48:49.262580 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 17:48:49.262583 [INFO] start to build docker image
2024/01/31 17:48:49.262598 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 17:48:49.536624 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 17:48:49.536642 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 17:48:49.536646 [INFO] successfully build docker image
2024/01/31 17:48:49.536649 [INFO] save staging docker image id
2024/01/31 17:48:49.536661 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 17:48:49.562091 [INFO] c176d18fbf65

2024/01/31 17:48:49.562213 [INFO] Executing instruction: configure X-Ray
2024/01/31 17:48:49.562219 [INFO] X-Ray is not enabled.
2024/01/31 17:48:49.562222 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 17:48:49.567883 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 17:48:49.569719 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 17:48:49.582208 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 17:48:49.582249 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 17:48:49.594302 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 17:48:49.603537 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 17:48:49.614246 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 17:48:49.678136 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 17:48:50.020995 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 17:48:50.021094 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 17:48:50.451237 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 17:48:50.495063 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 17:48:50.832101 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 17:48:50.846292 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 17:48:50.856239 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 17:48:51.251599 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 17:48:51.263478 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 17:48:51.633920 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 17:48:51.633963 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 17:48:51.647579 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 17:48:51.656859 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 17:48:51.750922 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 17:48:51.752155 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 17:48:51.753378 [INFO] Executing instruction: configure log streaming
2024/01/31 17:48:51.753388 [INFO] log streaming is not enabled
2024/01/31 17:48:51.753392 [INFO] disable log stream
2024/01/31 17:48:51.753408 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 17:48:51.771596 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 17:48:51.791466 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 17:48:51.791489 [INFO] Checking if logs need forced rotation
2024/01/31 17:48:51.791512 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 17:48:52.397867 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 17:48:52.850064 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 17:48:52.851940 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 17:48:53.381445 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 17:48:53.399097 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 17:48:53.399112 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 17:48:53.399125 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 17:48:53.832359 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 17:48:53.832380 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 17:48:53.832409 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 17:48:53.832412 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 17:48:53.832432 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 17:48:53.832443 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 17:48:53.832446 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 17:48:53.832450 [INFO] Executing instruction: stop X-Ray
2024/01/31 17:48:53.832453 [INFO] stop X-Ray ...
2024/01/31 17:48:53.832462 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 17:48:53.848459 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 17:48:53.848514 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 17:48:53.866082 [INFO] Executing instruction: Run Docker Container
2024/01/31 17:48:53.866112 [INFO] stop currently running containers...
2024/01/31 17:48:53.866122 [INFO] detected old app is not docker compose app
2024/01/31 17:48:53.866134 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 17:48:53.942457 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 17:48:53.962048 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 17:48:53.962081 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 17:48:53.980547 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 17:48:53.980581 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 17:48:53.998628 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 17:48:53.998688 [INFO] stopping current container: f8d5094190ac
2024/01/31 17:48:53.998702 [INFO] Running command /bin/sh -c docker ps | grep -q f8d5094190ac
2024/01/31 17:48:54.025566 [INFO] Running command /bin/sh -c docker ps | grep -q f8d5094190ac
2024/01/31 17:48:54.048241 [INFO] Pruning containers ...
2024/01/31 17:48:54.048264 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 17:48:54.070288 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 17:48:54.070315 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 17:48:54.090186 [INFO] Total reclaimed space: 0B

2024/01/31 17:48:54.090209 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 17:48:54.110515 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 17:48:54.110554 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 17:48:54.132103 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 17:48:54.132127 [INFO] Removing /var/app/current/ if it exists
2024/01/31 17:48:54.132225 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 17:48:54.132242 [INFO] detected new app is not docker compose app
2024/01/31 17:48:54.132295 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 17:48:54.545226 [INFO] 4159176d9a46eeb5d6de852a14cd63cb6e3c23d6b3c32ffcd8f0ee9d20ed6a35

2024/01/31 17:48:59.545670 [INFO] Running command /bin/sh -c docker ps | grep -q 4159176d9a46
2024/01/31 17:48:59.584297 [ERROR] docker container quit unexpectedly on 2024-01-31 17:48:59.584286346 +0000 UTC: Command /bin/sh -c docker ps | grep -q 4159176d9a46 failed with error exit status 1
2024/01/31 17:48:59.584330 [INFO] Running command /bin/sh -c docker logs 4159176d9a46
2024/01/31 17:48:59.607465 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 4159176d9a46: Command /bin/sh -c docker ps | grep -q 4159176d9a46 failed with error exit status 1 

2024/01/31 17:48:59.607475 [INFO] Executing cleanup logic
2024/01/31 17:48:59.607652 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 18:49:00.755938 [INFO] Starting...
2024/01/31 18:49:00.755984 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 18:49:00.756011 [INFO] reading event message file
2024/01/31 18:49:00.757064 [INFO] Engine received EB command userdata-exec

2024/01/31 18:49:00.763254 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 18:49:01.255547 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 18:49:01.991545 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 18:49:01.991672 [INFO] Engine command: (self-startup)

2024/01/31 18:49:01.991681 [INFO] Downloading EB Application...
2024/01/31 18:49:01.991685 [INFO] Region: eu-west-1
2024/01/31 18:49:01.991688 [INFO] envID: e-8gmkc7rmw6
2024/01/31 18:49:01.991692 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 18:49:01.991695 [INFO] Using manifest file name from command request
2024/01/31 18:49:01.991712 [INFO] Unable to get version manifest file.
2024/01/31 18:49:01.991715 [INFO] Downloading latest manifest available.
2024/01/31 18:49:01.991718 [INFO] Download latest app version manifest
2024/01/31 18:49:01.991853 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 18:49:02.032086 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 18:49:02.032350 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 18:49:02.043963 [INFO] Download successful124bytes downloaded
2024/01/31 18:49:02.044113 [INFO] Trying to read and parse version manifest...
2024/01/31 18:49:02.044191 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 18:49:02.084364 [INFO] Download successful264bytes downloaded
2024/01/31 18:49:02.084724 [INFO] Executing instruction: SyncClock
2024/01/31 18:49:02.084730 [INFO] Starting SyncClock
2024/01/31 18:49:02.084740 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 18:49:02.102931 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 18:48:52 2024
System time     : 0.000002054 seconds slow of NTP time
Last offset     : +0.000002322 seconds
RMS offset      : 0.000003398 seconds
Frequency       : 0.560 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.289 ppm
Root delay      : 0.000465883 seconds
Root dispersion : 0.000306752 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/31 18:49:02.103111 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 18:49:02.116069 [INFO] 200 OK

2024/01/31 18:49:02.116173 [INFO] Skipping Configure OS
2024/01/31 18:49:02.116193 [INFO] Skipping LockRepo
2024/01/31 18:49:02.116199 [INFO] Skipping GenerateEBBanner
2024/01/31 18:49:02.116204 [INFO] Skipping Install Process Manager
2024/01/31 18:49:02.116211 [INFO] Skipping install syslog
2024/01/31 18:49:02.116223 [INFO] Skipping install cron
2024/01/31 18:49:02.116278 [INFO] Skipping install proxy
2024/01/31 18:49:02.116286 [INFO] Skipping installhealthd
2024/01/31 18:49:02.116292 [INFO] Skipping Install Log Streaming Manager
2024/01/31 18:49:02.116297 [INFO] Skipping install X-Ray
2024/01/31 18:49:02.116302 [INFO] Skipping install Third Party License
2024/01/31 18:49:02.116307 [INFO] Skipping installSqsd
2024/01/31 18:49:02.116311 [INFO] Skipping bootstraphealthd
2024/01/31 18:49:02.116321 [INFO] Skipping Install yum packages
2024/01/31 18:49:02.116325 [INFO] Skipping install docker-compose
2024/01/31 18:49:02.116339 [INFO] Skipping Configure Docker Daemon
2024/01/31 18:49:02.116343 [INFO] Skipping MarkBaked
2024/01/31 18:49:02.116347 [INFO] Skipping TuneSystemSettings
2024/01/31 18:49:02.116349 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 18:49:02.116352 [INFO] Initialize LogRotate files and directories
2024/01/31 18:49:02.139985 [INFO] Skipping BootstrapCFNHup
2024/01/31 18:49:02.140005 [INFO] Executing instruction: StartCFNHup
2024/01/31 18:49:02.140008 [INFO] Start cfn-hup
2024/01/31 18:49:02.140030 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 18:49:02.176482 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 18:49:02.205556 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 18:49:02.205594 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 18:49:02.205598 [INFO] Executing instruction: Start Docker
2024/01/31 18:49:02.205601 [INFO] Starting Docker...
2024/01/31 18:49:02.205689 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 18:49:02.206869 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 18:49:02.211010 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 18:49:02.639800 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 18:49:02.664231 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 18:49:02.664274 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 18:49:02.693011 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 18:49:02.714223 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 18:49:02.730892 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 18:49:02.802861 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 18:49:02.802910 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 18:49:03.188024 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 18:49:03.525866 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 18:49:03.538770 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 18:49:03.874519 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 18:49:03.887747 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 18:49:03.907944 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 18:49:03.929140 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 18:49:05.191651 [INFO] Skipping Setup Docker Options
2024/01/31 18:49:05.191680 [INFO] Skipping MarkBootstrapped
2024/01/31 18:49:05.191685 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 18:49:05.191857 [INFO] Starting SwitchCFNStack
2024/01/31 18:49:05.191869 [INFO] Executing instruction: stopSqsd
2024/01/31 18:49:05.191873 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 18:49:05.191877 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 18:49:05.191881 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 18:49:05.191904 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 18:49:05.759131 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 18:49:05.759154 [INFO] Executing instruction: StagedockerApplication
2024/01/31 18:49:05.759169 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 18:49:05.785092 [INFO] Pruning containers ...
2024/01/31 18:49:05.785222 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 18:49:05.814451 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
4159176d9a46   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             inspiring_williams

2024/01/31 18:49:05.814487 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 18:49:05.847680 [INFO] Deleted Containers:
4159176d9a46eeb5d6de852a14cd63cb6e3c23d6b3c32ffcd8f0ee9d20ed6a35

Total reclaimed space: 0B

2024/01/31 18:49:05.847705 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 18:49:05.888106 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 18:49:05.888722 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 18:49:05.892791 [INFO] application/json

2024/01/31 18:49:05.892813 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 18:49:05.988329 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 18:49:05.988498 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 18:49:05.989910 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 18:49:05.989938 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 18:49:05.989952 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 18:49:05.989954 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 18:49:05.989959 [INFO] Executing instruction: Generate environment file
2024/01/31 18:49:05.989984 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 18:49:05.989987 [INFO] start build docker app
2024/01/31 18:49:05.990483 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 18:49:05.990487 [INFO] fetching image and ports
2024/01/31 18:49:05.992134 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 18:49:05.992245 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 18:49:05.992256 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 18:49:05.992295 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 18:49:07.114396 [INFO] Login Succeeded

2024/01/31 18:49:07.114416 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 18:49:07.114422 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 18:49:07.114441 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 18:49:07.307978 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 18:49:07.308004 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 18:49:07.308019 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 18:49:07.308022 [INFO] start to build docker image
2024/01/31 18:49:07.308036 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 18:49:07.586157 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 18:49:07.586179 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 18:49:07.586183 [INFO] successfully build docker image
2024/01/31 18:49:07.586187 [INFO] save staging docker image id
2024/01/31 18:49:07.586200 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 18:49:07.609858 [INFO] c176d18fbf65

2024/01/31 18:49:07.609994 [INFO] Executing instruction: configure X-Ray
2024/01/31 18:49:07.610000 [INFO] X-Ray is not enabled.
2024/01/31 18:49:07.610003 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 18:49:07.616925 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 18:49:07.619670 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 18:49:07.654118 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 18:49:07.654695 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 18:49:07.677484 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 18:49:07.686272 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 18:49:07.696932 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 18:49:07.758522 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 18:49:08.105265 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 18:49:08.105379 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 18:49:08.380773 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 18:49:08.391444 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 18:49:08.772803 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 18:49:08.785661 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 18:49:08.808351 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 18:49:09.099726 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 18:49:09.114604 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 18:49:09.427004 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 18:49:09.427040 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 18:49:09.444719 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 18:49:09.455835 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 18:49:09.570706 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 18:49:09.572754 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 18:49:09.573700 [INFO] Executing instruction: configure log streaming
2024/01/31 18:49:09.573712 [INFO] log streaming is not enabled
2024/01/31 18:49:09.573716 [INFO] disable log stream
2024/01/31 18:49:09.573733 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 18:49:09.594960 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 18:49:09.624856 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 18:49:09.624878 [INFO] Checking if logs need forced rotation
2024/01/31 18:49:09.624904 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 18:49:10.228823 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 18:49:10.802807 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 18:49:10.805369 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 18:49:10.927508 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 18:49:10.952945 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 18:49:10.952961 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 18:49:10.953003 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 18:49:11.472906 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 18:49:11.472929 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 18:49:11.472954 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 18:49:11.472958 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 18:49:11.472981 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 18:49:11.472992 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 18:49:11.472994 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 18:49:11.472999 [INFO] Executing instruction: stop X-Ray
2024/01/31 18:49:11.473002 [INFO] stop X-Ray ...
2024/01/31 18:49:11.473012 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 18:49:11.487640 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 18:49:11.487672 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 18:49:11.508314 [INFO] Executing instruction: Run Docker Container
2024/01/31 18:49:11.512527 [INFO] stop currently running containers...
2024/01/31 18:49:11.512780 [INFO] detected old app is not docker compose app
2024/01/31 18:49:11.512949 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 18:49:11.582362 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 18:49:11.597851 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 18:49:11.597889 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 18:49:11.612710 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 18:49:11.612741 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 18:49:11.627749 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 18:49:11.627943 [INFO] stopping current container: 4159176d9a46
2024/01/31 18:49:11.627958 [INFO] Running command /bin/sh -c docker ps | grep -q 4159176d9a46
2024/01/31 18:49:11.652058 [INFO] Running command /bin/sh -c docker ps | grep -q 4159176d9a46
2024/01/31 18:49:11.693595 [INFO] Pruning containers ...
2024/01/31 18:49:11.693618 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 18:49:11.712730 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 18:49:11.712758 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 18:49:11.732439 [INFO] Total reclaimed space: 0B

2024/01/31 18:49:11.732468 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 18:49:11.751869 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 18:49:11.751903 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 18:49:11.770875 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 18:49:11.770894 [INFO] Removing /var/app/current/ if it exists
2024/01/31 18:49:11.770995 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 18:49:11.771017 [INFO] detected new app is not docker compose app
2024/01/31 18:49:11.771077 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 18:49:12.194099 [INFO] e3f9cc2de7d5f7bf73465b7d2c4eaac4415ead4b4352dda063a27860da05fa13

2024/01/31 18:49:17.195552 [INFO] Running command /bin/sh -c docker ps | grep -q e3f9cc2de7d5
2024/01/31 18:49:17.220527 [ERROR] docker container quit unexpectedly on 2024-01-31 18:49:17.220507955 +0000 UTC: Command /bin/sh -c docker ps | grep -q e3f9cc2de7d5 failed with error exit status 1
2024/01/31 18:49:17.220583 [INFO] Running command /bin/sh -c docker logs e3f9cc2de7d5
2024/01/31 18:49:17.254699 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container e3f9cc2de7d5: Command /bin/sh -c docker ps | grep -q e3f9cc2de7d5 failed with error exit status 1 

2024/01/31 18:49:17.254708 [INFO] Executing cleanup logic
2024/01/31 18:49:17.254904 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 19:16:10.161438 [INFO] Starting...
2024/01/31 19:16:10.161538 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 19:16:10.161564 [INFO] reading event message file
2024/01/31 19:16:10.161821 [INFO] Engine received EB command cfn-hup-exec

2024/01/31 19:16:10.237374 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 19:16:10.636254 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 19:16:11.033147 [INFO] checking whether command bundle-log is applicable to this instance...
2024/01/31 19:16:11.033164 [INFO] this command is applicable to the instance, thus instance should execute command
2024/01/31 19:16:11.033167 [INFO] Engine command: (bundle-log)

2024/01/31 19:16:11.033221 [INFO] Executing instruction: GetBundleLogs
2024/01/31 19:16:11.033224 [INFO] Bundle Logs...
2024/01/31 19:16:11.828724 [INFO] Executing cleanup logic
2024/01/31 19:16:11.828890 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1706728571828,"severity":"INFO"}]}]}

2024/01/31 19:16:11.828909 [INFO] Platform Engine finished execution on command: bundle-log

2024/01/31 19:49:18.289855 [INFO] Starting...
2024/01/31 19:49:18.289897 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 19:49:18.289920 [INFO] reading event message file
2024/01/31 19:49:18.290626 [INFO] Engine received EB command userdata-exec

2024/01/31 19:49:18.299003 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 19:49:18.748283 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 19:49:19.287600 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 19:49:19.287766 [INFO] Engine command: (self-startup)

2024/01/31 19:49:19.287777 [INFO] Downloading EB Application...
2024/01/31 19:49:19.287780 [INFO] Region: eu-west-1
2024/01/31 19:49:19.287783 [INFO] envID: e-8gmkc7rmw6
2024/01/31 19:49:19.287787 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 19:49:19.287790 [INFO] Using manifest file name from command request
2024/01/31 19:49:19.287807 [INFO] Unable to get version manifest file.
2024/01/31 19:49:19.287839 [INFO] Downloading latest manifest available.
2024/01/31 19:49:19.287842 [INFO] Download latest app version manifest
2024/01/31 19:49:19.287987 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 19:49:19.331202 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 19:49:19.331486 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 19:49:19.350441 [INFO] Download successful124bytes downloaded
2024/01/31 19:49:19.350627 [INFO] Trying to read and parse version manifest...
2024/01/31 19:49:19.350704 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 19:49:19.385424 [INFO] Download successful264bytes downloaded
2024/01/31 19:49:19.385816 [INFO] Executing instruction: SyncClock
2024/01/31 19:49:19.385822 [INFO] Starting SyncClock
2024/01/31 19:49:19.385836 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 19:49:19.391965 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 19:49:00 2024
System time     : 0.000000978 seconds fast of NTP time
Last offset     : +0.000000016 seconds
RMS offset      : 0.000001630 seconds
Frequency       : 0.842 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.046 ppm
Root delay      : 0.000406421 seconds
Root dispersion : 0.000339277 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/01/31 19:49:19.391991 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 19:49:19.396889 [INFO] 200 OK

2024/01/31 19:49:19.396983 [INFO] Skipping Configure OS
2024/01/31 19:49:19.396988 [INFO] Skipping LockRepo
2024/01/31 19:49:19.396992 [INFO] Skipping GenerateEBBanner
2024/01/31 19:49:19.396997 [INFO] Skipping Install Process Manager
2024/01/31 19:49:19.397001 [INFO] Skipping install syslog
2024/01/31 19:49:19.397005 [INFO] Skipping install cron
2024/01/31 19:49:19.397008 [INFO] Skipping install proxy
2024/01/31 19:49:19.397012 [INFO] Skipping installhealthd
2024/01/31 19:49:19.397017 [INFO] Skipping Install Log Streaming Manager
2024/01/31 19:49:19.397021 [INFO] Skipping install X-Ray
2024/01/31 19:49:19.397024 [INFO] Skipping install Third Party License
2024/01/31 19:49:19.397029 [INFO] Skipping installSqsd
2024/01/31 19:49:19.397033 [INFO] Skipping bootstraphealthd
2024/01/31 19:49:19.397037 [INFO] Skipping Install yum packages
2024/01/31 19:49:19.397041 [INFO] Skipping install docker-compose
2024/01/31 19:49:19.397045 [INFO] Skipping Configure Docker Daemon
2024/01/31 19:49:19.397048 [INFO] Skipping MarkBaked
2024/01/31 19:49:19.397052 [INFO] Skipping TuneSystemSettings
2024/01/31 19:49:19.397054 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 19:49:19.397056 [INFO] Initialize LogRotate files and directories
2024/01/31 19:49:19.413444 [INFO] Skipping BootstrapCFNHup
2024/01/31 19:49:19.413458 [INFO] Executing instruction: StartCFNHup
2024/01/31 19:49:19.413462 [INFO] Start cfn-hup
2024/01/31 19:49:19.413518 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 19:49:19.430205 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 19:49:19.440113 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 19:49:19.440142 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 19:49:19.440147 [INFO] Executing instruction: Start Docker
2024/01/31 19:49:19.440150 [INFO] Starting Docker...
2024/01/31 19:49:19.440224 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 19:49:19.441452 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 19:49:19.442512 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 19:49:19.921545 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 19:49:19.939080 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 19:49:19.939114 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 19:49:19.951549 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 19:49:19.962062 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 19:49:19.974440 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 19:49:20.063087 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 19:49:20.063117 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 19:49:20.428100 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 19:49:20.788632 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 19:49:20.804120 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 19:49:21.200494 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 19:49:21.212179 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 19:49:21.227592 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 19:49:21.240887 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 19:49:22.638645 [INFO] Skipping Setup Docker Options
2024/01/31 19:49:22.638676 [INFO] Skipping MarkBootstrapped
2024/01/31 19:49:22.638681 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 19:49:22.638794 [INFO] Starting SwitchCFNStack
2024/01/31 19:49:22.638799 [INFO] Executing instruction: stopSqsd
2024/01/31 19:49:22.638803 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 19:49:22.638806 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 19:49:22.638810 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 19:49:22.638826 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 19:49:23.111107 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 19:49:23.111131 [INFO] Executing instruction: StagedockerApplication
2024/01/31 19:49:23.111143 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 19:49:23.144135 [INFO] Pruning containers ...
2024/01/31 19:49:23.144166 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 19:49:23.166867 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
e3f9cc2de7d5   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             relaxed_margulis

2024/01/31 19:49:23.166901 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 19:49:23.193871 [INFO] Deleted Containers:
e3f9cc2de7d5f7bf73465b7d2c4eaac4415ead4b4352dda063a27860da05fa13

Total reclaimed space: 0B

2024/01/31 19:49:23.193895 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 19:49:23.212010 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 19:49:23.212491 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 19:49:23.216400 [INFO] application/json

2024/01/31 19:49:23.216419 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 19:49:23.319631 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 19:49:23.319795 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 19:49:23.320968 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 19:49:23.320991 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 19:49:23.321011 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 19:49:23.321013 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 19:49:23.321017 [INFO] Executing instruction: Generate environment file
2024/01/31 19:49:23.321042 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 19:49:23.321045 [INFO] start build docker app
2024/01/31 19:49:23.321412 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 19:49:23.321418 [INFO] fetching image and ports
2024/01/31 19:49:23.322982 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 19:49:23.323051 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 19:49:23.323060 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 19:49:23.323071 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 19:49:24.205254 [INFO] Login Succeeded

2024/01/31 19:49:24.205273 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 19:49:24.205281 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 19:49:24.205301 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 19:49:24.378642 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 19:49:24.378670 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 19:49:24.378676 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 19:49:24.378680 [INFO] start to build docker image
2024/01/31 19:49:24.378700 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 19:49:24.666693 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 19:49:24.666717 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 19:49:24.666721 [INFO] successfully build docker image
2024/01/31 19:49:24.666724 [INFO] save staging docker image id
2024/01/31 19:49:24.666736 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 19:49:24.686600 [INFO] c176d18fbf65

2024/01/31 19:49:24.686741 [INFO] Executing instruction: configure X-Ray
2024/01/31 19:49:24.686749 [INFO] X-Ray is not enabled.
2024/01/31 19:49:24.686752 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 19:49:24.692003 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 19:49:24.693802 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 19:49:24.705998 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 19:49:24.706026 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 19:49:24.717800 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 19:49:24.726781 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 19:49:24.737001 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 19:49:24.808197 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 19:49:25.167098 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 19:49:25.167387 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 19:49:25.475960 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 19:49:25.493694 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 19:49:25.817442 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 19:49:25.832055 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 19:49:25.845478 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 19:49:26.153430 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 19:49:26.170899 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 19:49:26.536675 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 19:49:26.536717 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 19:49:26.557623 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 19:49:26.567979 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 19:49:26.624957 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 19:49:26.625968 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 19:49:26.626812 [INFO] Executing instruction: configure log streaming
2024/01/31 19:49:26.626823 [INFO] log streaming is not enabled
2024/01/31 19:49:26.626827 [INFO] disable log stream
2024/01/31 19:49:26.626842 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 19:49:26.673393 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 19:49:26.694171 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 19:49:26.694196 [INFO] Checking if logs need forced rotation
2024/01/31 19:49:26.694216 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 19:49:27.193542 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 19:49:27.746760 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 19:49:27.748251 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 19:49:27.920003 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 19:49:27.945756 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 19:49:27.945777 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 19:49:27.945795 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 19:49:28.458680 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 19:49:28.458720 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 19:49:28.458747 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 19:49:28.458750 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 19:49:28.458775 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 19:49:28.458789 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 19:49:28.458792 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 19:49:28.458798 [INFO] Executing instruction: stop X-Ray
2024/01/31 19:49:28.458804 [INFO] stop X-Ray ...
2024/01/31 19:49:28.458816 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 19:49:28.478128 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 19:49:28.478162 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 19:49:28.494480 [INFO] Executing instruction: Run Docker Container
2024/01/31 19:49:28.494513 [INFO] stop currently running containers...
2024/01/31 19:49:28.494525 [INFO] detected old app is not docker compose app
2024/01/31 19:49:28.494540 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 19:49:28.572395 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 19:49:28.588721 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 19:49:28.588750 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 19:49:28.611848 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 19:49:28.611883 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 19:49:28.641147 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 19:49:28.641204 [INFO] stopping current container: e3f9cc2de7d5
2024/01/31 19:49:28.641218 [INFO] Running command /bin/sh -c docker ps | grep -q e3f9cc2de7d5
2024/01/31 19:49:28.662394 [INFO] Running command /bin/sh -c docker ps | grep -q e3f9cc2de7d5
2024/01/31 19:49:28.682871 [INFO] Pruning containers ...
2024/01/31 19:49:28.682896 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 19:49:28.701366 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 19:49:28.701408 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 19:49:28.719553 [INFO] Total reclaimed space: 0B

2024/01/31 19:49:28.719581 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 19:49:28.737499 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 19:49:28.737544 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 19:49:28.787417 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 19:49:28.787484 [INFO] Removing /var/app/current/ if it exists
2024/01/31 19:49:28.787593 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 19:49:28.787610 [INFO] detected new app is not docker compose app
2024/01/31 19:49:28.787668 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 19:49:29.194919 [INFO] 98da86c463058768caedc602c729a99882a1947f01766a6f6e2176b39b7a8e4f

2024/01/31 19:49:34.195296 [INFO] Running command /bin/sh -c docker ps | grep -q 98da86c46305
2024/01/31 19:49:34.222771 [ERROR] docker container quit unexpectedly on 2024-01-31 19:49:34.222760228 +0000 UTC: Command /bin/sh -c docker ps | grep -q 98da86c46305 failed with error exit status 1
2024/01/31 19:49:34.222800 [INFO] Running command /bin/sh -c docker logs 98da86c46305
2024/01/31 19:49:34.246100 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 98da86c46305: Command /bin/sh -c docker ps | grep -q 98da86c46305 failed with error exit status 1 

2024/01/31 19:49:34.246136 [INFO] Executing cleanup logic
2024/01/31 19:49:34.246475 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 20:49:35.205957 [INFO] Starting...
2024/01/31 20:49:35.205999 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 20:49:35.206027 [INFO] reading event message file
2024/01/31 20:49:35.206729 [INFO] Engine received EB command userdata-exec

2024/01/31 20:49:35.214870 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 20:49:35.645045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 20:49:36.081214 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 20:49:36.081306 [INFO] Engine command: (self-startup)

2024/01/31 20:49:36.081326 [INFO] Downloading EB Application...
2024/01/31 20:49:36.081329 [INFO] Region: eu-west-1
2024/01/31 20:49:36.081332 [INFO] envID: e-8gmkc7rmw6
2024/01/31 20:49:36.081335 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 20:49:36.081337 [INFO] Using manifest file name from command request
2024/01/31 20:49:36.081695 [INFO] Unable to get version manifest file.
2024/01/31 20:49:36.081708 [INFO] Downloading latest manifest available.
2024/01/31 20:49:36.081712 [INFO] Download latest app version manifest
2024/01/31 20:49:36.081865 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 20:49:36.123476 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 20:49:36.123709 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 20:49:36.134999 [INFO] Download successful124bytes downloaded
2024/01/31 20:49:36.135136 [INFO] Trying to read and parse version manifest...
2024/01/31 20:49:36.135225 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 20:49:36.161282 [INFO] Download successful264bytes downloaded
2024/01/31 20:49:36.161695 [INFO] Executing instruction: SyncClock
2024/01/31 20:49:36.161702 [INFO] Starting SyncClock
2024/01/31 20:49:36.161711 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 20:49:36.167549 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 20:49:11 2024
System time     : 0.000001574 seconds slow of NTP time
Last offset     : -0.000001564 seconds
RMS offset      : 0.000002123 seconds
Frequency       : 0.489 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.041 ppm
Root delay      : 0.000442177 seconds
Root dispersion : 0.000526917 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 20:49:36.167569 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 20:49:36.171613 [INFO] 200 OK

2024/01/31 20:49:36.171711 [INFO] Skipping Configure OS
2024/01/31 20:49:36.171716 [INFO] Skipping LockRepo
2024/01/31 20:49:36.171720 [INFO] Skipping GenerateEBBanner
2024/01/31 20:49:36.171725 [INFO] Skipping Install Process Manager
2024/01/31 20:49:36.171728 [INFO] Skipping install syslog
2024/01/31 20:49:36.171732 [INFO] Skipping install cron
2024/01/31 20:49:36.171736 [INFO] Skipping install proxy
2024/01/31 20:49:36.171740 [INFO] Skipping installhealthd
2024/01/31 20:49:36.171744 [INFO] Skipping Install Log Streaming Manager
2024/01/31 20:49:36.171747 [INFO] Skipping install X-Ray
2024/01/31 20:49:36.171752 [INFO] Skipping install Third Party License
2024/01/31 20:49:36.171757 [INFO] Skipping installSqsd
2024/01/31 20:49:36.171761 [INFO] Skipping bootstraphealthd
2024/01/31 20:49:36.171765 [INFO] Skipping Install yum packages
2024/01/31 20:49:36.171769 [INFO] Skipping install docker-compose
2024/01/31 20:49:36.171773 [INFO] Skipping Configure Docker Daemon
2024/01/31 20:49:36.171776 [INFO] Skipping MarkBaked
2024/01/31 20:49:36.171780 [INFO] Skipping TuneSystemSettings
2024/01/31 20:49:36.171783 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 20:49:36.171785 [INFO] Initialize LogRotate files and directories
2024/01/31 20:49:36.184975 [INFO] Skipping BootstrapCFNHup
2024/01/31 20:49:36.184986 [INFO] Executing instruction: StartCFNHup
2024/01/31 20:49:36.184989 [INFO] Start cfn-hup
2024/01/31 20:49:36.185005 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 20:49:36.201648 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 20:49:36.210895 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 20:49:36.210920 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 20:49:36.210924 [INFO] Executing instruction: Start Docker
2024/01/31 20:49:36.210927 [INFO] Starting Docker...
2024/01/31 20:49:36.211011 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 20:49:36.212263 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 20:49:36.213283 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 20:49:36.631029 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 20:49:36.647180 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 20:49:36.647235 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 20:49:36.658369 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 20:49:36.666275 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 20:49:36.676745 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 20:49:36.712418 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 20:49:36.712484 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 20:49:37.101887 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 20:49:37.379093 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 20:49:37.389120 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 20:49:37.704804 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 20:49:37.730673 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 20:49:37.753762 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 20:49:37.766517 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 20:49:38.969105 [INFO] Skipping Setup Docker Options
2024/01/31 20:49:38.969144 [INFO] Skipping MarkBootstrapped
2024/01/31 20:49:38.969148 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 20:49:38.969281 [INFO] Starting SwitchCFNStack
2024/01/31 20:49:38.969287 [INFO] Executing instruction: stopSqsd
2024/01/31 20:49:38.969290 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 20:49:38.969293 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 20:49:38.969297 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 20:49:38.969317 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 20:49:39.422355 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 20:49:39.422376 [INFO] Executing instruction: StagedockerApplication
2024/01/31 20:49:39.422392 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 20:49:39.461661 [INFO] Pruning containers ...
2024/01/31 20:49:39.461690 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 20:49:39.488534 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
98da86c46305   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             dreamy_hugle

2024/01/31 20:49:39.488562 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 20:49:39.519326 [INFO] Deleted Containers:
98da86c463058768caedc602c729a99882a1947f01766a6f6e2176b39b7a8e4f

Total reclaimed space: 0B

2024/01/31 20:49:39.519370 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 20:49:39.542715 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 20:49:39.542940 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 20:49:39.545946 [INFO] application/json

2024/01/31 20:49:39.545972 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 20:49:39.626321 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 20:49:39.626497 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 20:49:39.627782 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 20:49:39.627810 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 20:49:39.627825 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 20:49:39.627827 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 20:49:39.627831 [INFO] Executing instruction: Generate environment file
2024/01/31 20:49:39.627857 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 20:49:39.627860 [INFO] start build docker app
2024/01/31 20:49:39.628211 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 20:49:39.628215 [INFO] fetching image and ports
2024/01/31 20:49:39.630075 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 20:49:39.630124 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 20:49:39.630134 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 20:49:39.630145 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 20:49:40.543829 [INFO] Login Succeeded

2024/01/31 20:49:40.543847 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 20:49:40.543852 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 20:49:40.543873 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 20:49:40.703895 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 20:49:40.703915 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 20:49:40.703918 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 20:49:40.703921 [INFO] start to build docker image
2024/01/31 20:49:40.703936 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 20:49:40.977795 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 20:49:40.979366 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 20:49:40.979376 [INFO] successfully build docker image
2024/01/31 20:49:40.979380 [INFO] save staging docker image id
2024/01/31 20:49:40.979394 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 20:49:41.018162 [INFO] c176d18fbf65

2024/01/31 20:49:41.019492 [INFO] Executing instruction: configure X-Ray
2024/01/31 20:49:41.019576 [INFO] X-Ray is not enabled.
2024/01/31 20:49:41.019582 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 20:49:41.029339 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 20:49:41.031901 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 20:49:41.070127 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 20:49:41.070162 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 20:49:41.082248 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 20:49:41.091753 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 20:49:41.102631 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 20:49:41.158682 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 20:49:41.452592 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 20:49:41.452684 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 20:49:41.784669 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 20:49:41.796732 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 20:49:42.120764 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 20:49:42.135876 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 20:49:42.150202 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 20:49:42.482450 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 20:49:42.492850 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 20:49:42.846337 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 20:49:42.846374 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 20:49:42.858425 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 20:49:42.868690 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 20:49:42.953979 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 20:49:42.954975 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 20:49:42.955974 [INFO] Executing instruction: configure log streaming
2024/01/31 20:49:42.955984 [INFO] log streaming is not enabled
2024/01/31 20:49:42.955988 [INFO] disable log stream
2024/01/31 20:49:42.956002 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 20:49:42.982554 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 20:49:43.005554 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 20:49:43.005578 [INFO] Checking if logs need forced rotation
2024/01/31 20:49:43.005599 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 20:49:43.492252 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 20:49:43.943685 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 20:49:43.945380 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 20:49:44.014790 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 20:49:44.045754 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 20:49:44.045773 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 20:49:44.045826 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 20:49:44.573233 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 20:49:44.573268 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 20:49:44.573297 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 20:49:44.573300 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 20:49:44.573323 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 20:49:44.573344 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 20:49:44.573347 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 20:49:44.573352 [INFO] Executing instruction: stop X-Ray
2024/01/31 20:49:44.573356 [INFO] stop X-Ray ...
2024/01/31 20:49:44.573373 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 20:49:44.595477 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 20:49:44.595509 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 20:49:44.611746 [INFO] Executing instruction: Run Docker Container
2024/01/31 20:49:44.611778 [INFO] stop currently running containers...
2024/01/31 20:49:44.611790 [INFO] detected old app is not docker compose app
2024/01/31 20:49:44.611809 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 20:49:44.652434 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 20:49:44.666031 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 20:49:44.666059 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 20:49:44.678906 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 20:49:44.678933 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 20:49:44.692354 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 20:49:44.692476 [INFO] stopping current container: 98da86c46305
2024/01/31 20:49:44.692490 [INFO] Running command /bin/sh -c docker ps | grep -q 98da86c46305
2024/01/31 20:49:44.711836 [INFO] Running command /bin/sh -c docker ps | grep -q 98da86c46305
2024/01/31 20:49:44.729539 [INFO] Pruning containers ...
2024/01/31 20:49:44.729568 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 20:49:44.748061 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 20:49:44.748090 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 20:49:44.766347 [INFO] Total reclaimed space: 0B

2024/01/31 20:49:44.766372 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 20:49:44.788681 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 20:49:44.788711 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 20:49:44.806791 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 20:49:44.806811 [INFO] Removing /var/app/current/ if it exists
2024/01/31 20:49:44.806898 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 20:49:44.806915 [INFO] detected new app is not docker compose app
2024/01/31 20:49:44.806960 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 20:49:45.150701 [INFO] dc3e06b9a539fc9c7494659928cdce908a4b4f1d53c022cade99d8e27e15a26b

2024/01/31 20:49:50.155015 [INFO] Running command /bin/sh -c docker ps | grep -q dc3e06b9a539
2024/01/31 20:49:50.195917 [ERROR] docker container quit unexpectedly on 2024-01-31 20:49:50.195901055 +0000 UTC: Command /bin/sh -c docker ps | grep -q dc3e06b9a539 failed with error exit status 1
2024/01/31 20:49:50.195944 [INFO] Running command /bin/sh -c docker logs dc3e06b9a539
2024/01/31 20:49:50.217875 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container dc3e06b9a539: Command /bin/sh -c docker ps | grep -q dc3e06b9a539 failed with error exit status 1 

2024/01/31 20:49:50.217884 [INFO] Executing cleanup logic
2024/01/31 20:49:50.218054 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 21:49:51.322179 [INFO] Starting...
2024/01/31 21:49:51.322221 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 21:49:51.322245 [INFO] reading event message file
2024/01/31 21:49:51.322936 [INFO] Engine received EB command userdata-exec

2024/01/31 21:49:51.328684 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 21:49:51.713018 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 21:49:52.233611 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 21:49:52.233855 [INFO] Engine command: (self-startup)

2024/01/31 21:49:52.233914 [INFO] Downloading EB Application...
2024/01/31 21:49:52.233918 [INFO] Region: eu-west-1
2024/01/31 21:49:52.233922 [INFO] envID: e-8gmkc7rmw6
2024/01/31 21:49:52.233932 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 21:49:52.233936 [INFO] Using manifest file name from command request
2024/01/31 21:49:52.233952 [INFO] Unable to get version manifest file.
2024/01/31 21:49:52.233955 [INFO] Downloading latest manifest available.
2024/01/31 21:49:52.233958 [INFO] Download latest app version manifest
2024/01/31 21:49:52.234133 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 21:49:52.276650 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 21:49:52.276831 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 21:49:52.286901 [INFO] Download successful124bytes downloaded
2024/01/31 21:49:52.287044 [INFO] Trying to read and parse version manifest...
2024/01/31 21:49:52.287119 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 21:49:52.311736 [INFO] Download successful264bytes downloaded
2024/01/31 21:49:52.312173 [INFO] Executing instruction: SyncClock
2024/01/31 21:49:52.312180 [INFO] Starting SyncClock
2024/01/31 21:49:52.312217 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 21:49:52.318489 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 21:49:35 2024
System time     : 0.000000016 seconds slow of NTP time
Last offset     : +0.000020448 seconds
RMS offset      : 0.000008747 seconds
Frequency       : 0.657 ppm fast
Residual freq   : +0.254 ppm
Skew            : 0.339 ppm
Root delay      : 0.000463713 seconds
Root dispersion : 0.000459392 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 21:49:52.318508 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 21:49:52.322482 [INFO] 200 OK

2024/01/31 21:49:52.322618 [INFO] Skipping Configure OS
2024/01/31 21:49:52.322627 [INFO] Skipping LockRepo
2024/01/31 21:49:52.322633 [INFO] Skipping GenerateEBBanner
2024/01/31 21:49:52.322639 [INFO] Skipping Install Process Manager
2024/01/31 21:49:52.322645 [INFO] Skipping install syslog
2024/01/31 21:49:52.322651 [INFO] Skipping install cron
2024/01/31 21:49:52.322656 [INFO] Skipping install proxy
2024/01/31 21:49:52.322662 [INFO] Skipping installhealthd
2024/01/31 21:49:52.322667 [INFO] Skipping Install Log Streaming Manager
2024/01/31 21:49:52.322673 [INFO] Skipping install X-Ray
2024/01/31 21:49:52.322677 [INFO] Skipping install Third Party License
2024/01/31 21:49:52.322685 [INFO] Skipping installSqsd
2024/01/31 21:49:52.322690 [INFO] Skipping bootstraphealthd
2024/01/31 21:49:52.322701 [INFO] Skipping Install yum packages
2024/01/31 21:49:52.322706 [INFO] Skipping install docker-compose
2024/01/31 21:49:52.322712 [INFO] Skipping Configure Docker Daemon
2024/01/31 21:49:52.322717 [INFO] Skipping MarkBaked
2024/01/31 21:49:52.322724 [INFO] Skipping TuneSystemSettings
2024/01/31 21:49:52.322735 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 21:49:52.322738 [INFO] Initialize LogRotate files and directories
2024/01/31 21:49:52.338434 [INFO] Skipping BootstrapCFNHup
2024/01/31 21:49:52.338448 [INFO] Executing instruction: StartCFNHup
2024/01/31 21:49:52.338452 [INFO] Start cfn-hup
2024/01/31 21:49:52.338471 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 21:49:52.352729 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 21:49:52.361343 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 21:49:52.361460 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 21:49:52.361475 [INFO] Executing instruction: Start Docker
2024/01/31 21:49:52.361478 [INFO] Starting Docker...
2024/01/31 21:49:52.361836 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 21:49:52.363917 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 21:49:52.364783 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 21:49:52.651775 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 21:49:52.667882 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 21:49:52.667914 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 21:49:52.688788 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 21:49:52.713633 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 21:49:52.729320 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 21:49:52.791926 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 21:49:52.791960 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 21:49:53.098536 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 21:49:53.470692 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 21:49:53.483904 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 21:49:53.799666 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 21:49:53.810625 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 21:49:53.823602 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 21:49:53.832475 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 21:49:55.258537 [INFO] Skipping Setup Docker Options
2024/01/31 21:49:55.258567 [INFO] Skipping MarkBootstrapped
2024/01/31 21:49:55.258571 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 21:49:55.258692 [INFO] Starting SwitchCFNStack
2024/01/31 21:49:55.258698 [INFO] Executing instruction: stopSqsd
2024/01/31 21:49:55.258702 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 21:49:55.258706 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 21:49:55.258710 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 21:49:55.258733 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 21:49:55.716597 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 21:49:55.716672 [INFO] Executing instruction: StagedockerApplication
2024/01/31 21:49:55.716684 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 21:49:55.735705 [INFO] Pruning containers ...
2024/01/31 21:49:55.735734 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 21:49:55.758117 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
dc3e06b9a539   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             trusting_mahavira

2024/01/31 21:49:55.758153 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 21:49:55.784482 [INFO] Deleted Containers:
dc3e06b9a539fc9c7494659928cdce908a4b4f1d53c022cade99d8e27e15a26b

Total reclaimed space: 0B

2024/01/31 21:49:55.784507 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 21:49:55.805137 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 21:49:55.805740 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 21:49:55.809464 [INFO] application/json

2024/01/31 21:49:55.809481 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 21:49:55.891580 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 21:49:55.891794 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 21:49:55.893053 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 21:49:55.893076 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 21:49:55.893092 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 21:49:55.893094 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 21:49:55.893098 [INFO] Executing instruction: Generate environment file
2024/01/31 21:49:55.893122 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 21:49:55.893126 [INFO] start build docker app
2024/01/31 21:49:55.893493 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 21:49:55.893497 [INFO] fetching image and ports
2024/01/31 21:49:55.895529 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 21:49:55.895619 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 21:49:55.895628 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 21:49:55.895676 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 21:49:56.885609 [INFO] Login Succeeded

2024/01/31 21:49:56.885628 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 21:49:56.885635 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 21:49:56.885650 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 21:49:57.064475 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 21:49:57.064497 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 21:49:57.064501 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 21:49:57.064510 [INFO] start to build docker image
2024/01/31 21:49:57.064529 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 21:49:57.362307 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 21:49:57.362325 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 21:49:57.362328 [INFO] successfully build docker image
2024/01/31 21:49:57.362331 [INFO] save staging docker image id
2024/01/31 21:49:57.362360 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 21:49:57.386681 [INFO] c176d18fbf65

2024/01/31 21:49:57.386820 [INFO] Executing instruction: configure X-Ray
2024/01/31 21:49:57.386826 [INFO] X-Ray is not enabled.
2024/01/31 21:49:57.386829 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 21:49:57.392899 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 21:49:57.394709 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 21:49:57.408706 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 21:49:57.408801 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 21:49:57.428574 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 21:49:57.449950 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 21:49:57.467827 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 21:49:57.559597 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 21:49:57.877525 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 21:49:57.877603 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 21:49:58.218662 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 21:49:58.229633 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 21:49:58.582965 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 21:49:58.595211 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 21:49:58.606441 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 21:49:58.901184 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 21:49:58.910844 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 21:49:59.137137 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 21:49:59.137172 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 21:49:59.149502 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 21:49:59.158575 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 21:49:59.254840 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 21:49:59.255756 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 21:49:59.256884 [INFO] Executing instruction: configure log streaming
2024/01/31 21:49:59.256898 [INFO] log streaming is not enabled
2024/01/31 21:49:59.256902 [INFO] disable log stream
2024/01/31 21:49:59.256916 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 21:49:59.275408 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 21:49:59.298933 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 21:49:59.298959 [INFO] Checking if logs need forced rotation
2024/01/31 21:49:59.298979 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 21:49:59.823770 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 21:50:00.530090 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 21:50:00.531835 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 21:50:01.176449 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 21:50:01.198583 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 21:50:01.198616 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 21:50:01.198638 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 21:50:01.858774 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 21:50:01.858804 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 21:50:01.858970 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 21:50:01.859019 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 21:50:01.859085 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 21:50:01.859101 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 21:50:01.859104 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 21:50:01.859111 [INFO] Executing instruction: stop X-Ray
2024/01/31 21:50:01.859115 [INFO] stop X-Ray ...
2024/01/31 21:50:01.859129 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 21:50:01.883797 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 21:50:01.883850 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 21:50:01.904723 [INFO] Executing instruction: Run Docker Container
2024/01/31 21:50:01.904773 [INFO] stop currently running containers...
2024/01/31 21:50:01.904785 [INFO] detected old app is not docker compose app
2024/01/31 21:50:01.904798 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 21:50:01.972706 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 21:50:02.008720 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 21:50:02.008757 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 21:50:02.043203 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 21:50:02.043254 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 21:50:02.080717 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 21:50:02.080898 [INFO] stopping current container: dc3e06b9a539
2024/01/31 21:50:02.080917 [INFO] Running command /bin/sh -c docker ps | grep -q dc3e06b9a539
2024/01/31 21:50:02.129994 [INFO] Running command /bin/sh -c docker ps | grep -q dc3e06b9a539
2024/01/31 21:50:02.181967 [INFO] Pruning containers ...
2024/01/31 21:50:02.181993 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 21:50:02.242721 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 21:50:02.242771 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 21:50:02.273423 [INFO] Total reclaimed space: 0B

2024/01/31 21:50:02.273458 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 21:50:02.298983 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 21:50:02.299016 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 21:50:02.318137 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 21:50:02.318159 [INFO] Removing /var/app/current/ if it exists
2024/01/31 21:50:02.318313 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 21:50:02.318331 [INFO] detected new app is not docker compose app
2024/01/31 21:50:02.318385 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 21:50:02.870237 [INFO] 57264df2c4fa3119e70b02c7f5607430d70a25747bf618a0a2a198232dcf0a3b

2024/01/31 21:50:07.870615 [INFO] Running command /bin/sh -c docker ps | grep -q 57264df2c4fa
2024/01/31 21:50:07.894274 [ERROR] docker container quit unexpectedly on 2024-01-31 21:50:07.894260405 +0000 UTC: Command /bin/sh -c docker ps | grep -q 57264df2c4fa failed with error exit status 1
2024/01/31 21:50:07.894307 [INFO] Running command /bin/sh -c docker logs 57264df2c4fa
2024/01/31 21:50:07.920961 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 57264df2c4fa: Command /bin/sh -c docker ps | grep -q 57264df2c4fa failed with error exit status 1 

2024/01/31 21:50:07.920971 [INFO] Executing cleanup logic
2024/01/31 21:50:07.921151 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 22:50:09.041670 [INFO] Starting...
2024/01/31 22:50:09.041718 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 22:50:09.041746 [INFO] reading event message file
2024/01/31 22:50:09.043131 [INFO] Engine received EB command userdata-exec

2024/01/31 22:50:09.050690 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 22:50:09.565068 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 22:50:10.081072 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 22:50:10.081157 [INFO] Engine command: (self-startup)

2024/01/31 22:50:10.081164 [INFO] Downloading EB Application...
2024/01/31 22:50:10.081167 [INFO] Region: eu-west-1
2024/01/31 22:50:10.081170 [INFO] envID: e-8gmkc7rmw6
2024/01/31 22:50:10.081173 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 22:50:10.081176 [INFO] Using manifest file name from command request
2024/01/31 22:50:10.081192 [INFO] Unable to get version manifest file.
2024/01/31 22:50:10.081195 [INFO] Downloading latest manifest available.
2024/01/31 22:50:10.081198 [INFO] Download latest app version manifest
2024/01/31 22:50:10.081750 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 22:50:10.129690 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 22:50:10.129872 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 22:50:10.146091 [INFO] Download successful124bytes downloaded
2024/01/31 22:50:10.146335 [INFO] Trying to read and parse version manifest...
2024/01/31 22:50:10.146413 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 22:50:10.188694 [INFO] Download successful264bytes downloaded
2024/01/31 22:50:10.189086 [INFO] Executing instruction: SyncClock
2024/01/31 22:50:10.189092 [INFO] Starting SyncClock
2024/01/31 22:50:10.189102 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 22:50:10.199815 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 22:49:59 2024
System time     : 0.000002945 seconds slow of NTP time
Last offset     : -0.000003275 seconds
RMS offset      : 0.000003989 seconds
Frequency       : 0.583 ppm fast
Residual freq   : -0.002 ppm
Skew            : 0.065 ppm
Root delay      : 0.000428487 seconds
Root dispersion : 0.000385921 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/01/31 22:50:10.199843 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 22:50:10.204682 [INFO] 200 OK

2024/01/31 22:50:10.204799 [INFO] Skipping Configure OS
2024/01/31 22:50:10.204807 [INFO] Skipping LockRepo
2024/01/31 22:50:10.204813 [INFO] Skipping GenerateEBBanner
2024/01/31 22:50:10.204819 [INFO] Skipping Install Process Manager
2024/01/31 22:50:10.204825 [INFO] Skipping install syslog
2024/01/31 22:50:10.204829 [INFO] Skipping install cron
2024/01/31 22:50:10.204833 [INFO] Skipping install proxy
2024/01/31 22:50:10.204837 [INFO] Skipping installhealthd
2024/01/31 22:50:10.204841 [INFO] Skipping Install Log Streaming Manager
2024/01/31 22:50:10.204846 [INFO] Skipping install X-Ray
2024/01/31 22:50:10.204850 [INFO] Skipping install Third Party License
2024/01/31 22:50:10.204855 [INFO] Skipping installSqsd
2024/01/31 22:50:10.204859 [INFO] Skipping bootstraphealthd
2024/01/31 22:50:10.204862 [INFO] Skipping Install yum packages
2024/01/31 22:50:10.204867 [INFO] Skipping install docker-compose
2024/01/31 22:50:10.204871 [INFO] Skipping Configure Docker Daemon
2024/01/31 22:50:10.204874 [INFO] Skipping MarkBaked
2024/01/31 22:50:10.204881 [INFO] Skipping TuneSystemSettings
2024/01/31 22:50:10.204883 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 22:50:10.204886 [INFO] Initialize LogRotate files and directories
2024/01/31 22:50:10.218772 [INFO] Skipping BootstrapCFNHup
2024/01/31 22:50:10.218781 [INFO] Executing instruction: StartCFNHup
2024/01/31 22:50:10.218784 [INFO] Start cfn-hup
2024/01/31 22:50:10.218859 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 22:50:10.260526 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 22:50:10.278252 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 22:50:10.278301 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 22:50:10.278305 [INFO] Executing instruction: Start Docker
2024/01/31 22:50:10.278308 [INFO] Starting Docker...
2024/01/31 22:50:10.278395 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 22:50:10.281156 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 22:50:10.282715 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 22:50:10.676670 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 22:50:10.713389 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 22:50:10.713433 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 22:50:10.741703 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 22:50:10.761105 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 22:50:10.784000 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 22:50:10.858377 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 22:50:10.858427 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 22:50:11.251844 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 22:50:11.530268 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 22:50:11.558584 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 22:50:11.982845 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 22:50:11.996502 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 22:50:12.019671 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 22:50:12.029886 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 22:50:13.570320 [INFO] Skipping Setup Docker Options
2024/01/31 22:50:13.570342 [INFO] Skipping MarkBootstrapped
2024/01/31 22:50:13.570346 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 22:50:13.570451 [INFO] Starting SwitchCFNStack
2024/01/31 22:50:13.570456 [INFO] Executing instruction: stopSqsd
2024/01/31 22:50:13.570460 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 22:50:13.570463 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 22:50:13.570466 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 22:50:13.570483 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 22:50:14.000458 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 22:50:14.000555 [INFO] Executing instruction: StagedockerApplication
2024/01/31 22:50:14.000574 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 22:50:14.033539 [INFO] Pruning containers ...
2024/01/31 22:50:14.033569 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 22:50:14.055699 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
57264df2c4fa   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             funny_franklin

2024/01/31 22:50:14.055741 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 22:50:14.109418 [INFO] Deleted Containers:
57264df2c4fa3119e70b02c7f5607430d70a25747bf618a0a2a198232dcf0a3b

Total reclaimed space: 0B

2024/01/31 22:50:14.109441 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 22:50:14.132095 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 22:50:14.132385 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 22:50:14.135145 [INFO] application/json

2024/01/31 22:50:14.135166 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 22:50:14.200794 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/01/31 22:50:14.200976 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 22:50:14.202480 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 22:50:14.202508 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 22:50:14.202524 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 22:50:14.202527 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 22:50:14.202533 [INFO] Executing instruction: Generate environment file
2024/01/31 22:50:14.202565 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 22:50:14.202569 [INFO] start build docker app
2024/01/31 22:50:14.202909 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 22:50:14.202917 [INFO] fetching image and ports
2024/01/31 22:50:14.204925 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 22:50:14.204985 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 22:50:14.204994 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 22:50:14.205003 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 22:50:15.111672 [INFO] Login Succeeded

2024/01/31 22:50:15.111689 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 22:50:15.111695 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 22:50:15.111718 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 22:50:15.266875 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 22:50:15.266903 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 22:50:15.266908 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 22:50:15.266912 [INFO] start to build docker image
2024/01/31 22:50:15.266931 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 22:50:15.526464 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 22:50:15.526484 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 22:50:15.526488 [INFO] successfully build docker image
2024/01/31 22:50:15.526490 [INFO] save staging docker image id
2024/01/31 22:50:15.526501 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 22:50:15.545108 [INFO] c176d18fbf65

2024/01/31 22:50:15.545242 [INFO] Executing instruction: configure X-Ray
2024/01/31 22:50:15.545247 [INFO] X-Ray is not enabled.
2024/01/31 22:50:15.545250 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 22:50:15.551149 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 22:50:15.552856 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 22:50:15.564511 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 22:50:15.564537 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 22:50:15.574365 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 22:50:15.585054 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 22:50:15.594635 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 22:50:15.668894 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 22:50:15.977466 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 22:50:15.977551 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 22:50:16.338592 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 22:50:16.352096 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 22:50:16.668469 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 22:50:16.678720 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 22:50:16.688802 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 22:50:17.038942 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 22:50:17.054438 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 22:50:17.406322 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 22:50:17.406362 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 22:50:17.418451 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 22:50:17.428148 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 22:50:17.511138 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 22:50:17.512128 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 22:50:17.512989 [INFO] Executing instruction: configure log streaming
2024/01/31 22:50:17.512999 [INFO] log streaming is not enabled
2024/01/31 22:50:17.513003 [INFO] disable log stream
2024/01/31 22:50:17.513019 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 22:50:17.535870 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 22:50:17.558833 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 22:50:17.558857 [INFO] Checking if logs need forced rotation
2024/01/31 22:50:17.558877 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 22:50:18.094782 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 22:50:18.595408 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 22:50:18.597579 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 22:50:18.929446 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 22:50:18.953748 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 22:50:18.953778 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 22:50:18.953794 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 22:50:19.358252 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 22:50:19.358277 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 22:50:19.358360 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 22:50:19.358377 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 22:50:19.358406 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 22:50:19.358422 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 22:50:19.358425 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 22:50:19.358431 [INFO] Executing instruction: stop X-Ray
2024/01/31 22:50:19.358433 [INFO] stop X-Ray ...
2024/01/31 22:50:19.358442 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 22:50:19.391302 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 22:50:19.391336 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 22:50:19.408621 [INFO] Executing instruction: Run Docker Container
2024/01/31 22:50:19.408655 [INFO] stop currently running containers...
2024/01/31 22:50:19.408667 [INFO] detected old app is not docker compose app
2024/01/31 22:50:19.408681 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 22:50:19.477668 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 22:50:19.521039 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 22:50:19.521236 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 22:50:19.546456 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 22:50:19.546506 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 22:50:19.565019 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 22:50:19.565074 [INFO] stopping current container: 57264df2c4fa
2024/01/31 22:50:19.565087 [INFO] Running command /bin/sh -c docker ps | grep -q 57264df2c4fa
2024/01/31 22:50:19.595196 [INFO] Running command /bin/sh -c docker ps | grep -q 57264df2c4fa
2024/01/31 22:50:19.624341 [INFO] Pruning containers ...
2024/01/31 22:50:19.624374 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 22:50:19.647745 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 22:50:19.647777 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 22:50:19.674268 [INFO] Total reclaimed space: 0B

2024/01/31 22:50:19.674293 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 22:50:19.695310 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 22:50:19.695338 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 22:50:19.720740 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 22:50:19.720764 [INFO] Removing /var/app/current/ if it exists
2024/01/31 22:50:19.720865 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 22:50:19.720884 [INFO] detected new app is not docker compose app
2024/01/31 22:50:19.720943 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 22:50:20.138723 [INFO] fe60b49d5275808c092795db813065dd772a0e0bcdb9184eaeea63551dd2e568

2024/01/31 22:50:25.143137 [INFO] Running command /bin/sh -c docker ps | grep -q fe60b49d5275
2024/01/31 22:50:25.164482 [ERROR] docker container quit unexpectedly on 2024-01-31 22:50:25.164464558 +0000 UTC: Command /bin/sh -c docker ps | grep -q fe60b49d5275 failed with error exit status 1
2024/01/31 22:50:25.164513 [INFO] Running command /bin/sh -c docker logs fe60b49d5275
2024/01/31 22:50:25.186116 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container fe60b49d5275: Command /bin/sh -c docker ps | grep -q fe60b49d5275 failed with error exit status 1 

2024/01/31 22:50:25.186126 [INFO] Executing cleanup logic
2024/01/31 22:50:25.186332 [INFO] Platform Engine finished execution on command: self-startup

2024/01/31 23:50:26.212442 [INFO] Starting...
2024/01/31 23:50:26.212639 [INFO] Starting EBPlatform-PlatformEngine
2024/01/31 23:50:26.212679 [INFO] reading event message file
2024/01/31 23:50:26.213503 [INFO] Engine received EB command userdata-exec

2024/01/31 23:50:26.220280 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 23:50:26.690662 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 23:50:27.155640 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/01/31 23:50:27.155729 [INFO] Engine command: (self-startup)

2024/01/31 23:50:27.155736 [INFO] Downloading EB Application...
2024/01/31 23:50:27.155739 [INFO] Region: eu-west-1
2024/01/31 23:50:27.155743 [INFO] envID: e-8gmkc7rmw6
2024/01/31 23:50:27.155746 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/01/31 23:50:27.155750 [INFO] Using manifest file name from command request
2024/01/31 23:50:27.155764 [INFO] Unable to get version manifest file.
2024/01/31 23:50:27.155767 [INFO] Downloading latest manifest available.
2024/01/31 23:50:27.155769 [INFO] Download latest app version manifest
2024/01/31 23:50:27.156094 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/01/31 23:50:27.204456 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/01/31 23:50:27.204641 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/01/31 23:50:27.218612 [INFO] Download successful124bytes downloaded
2024/01/31 23:50:27.218754 [INFO] Trying to read and parse version manifest...
2024/01/31 23:50:27.218827 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 23:50:27.257012 [INFO] Download successful264bytes downloaded
2024/01/31 23:50:27.257394 [INFO] Executing instruction: SyncClock
2024/01/31 23:50:27.257401 [INFO] Starting SyncClock
2024/01/31 23:50:27.257414 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/31 23:50:27.263440 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Wed Jan 31 23:50:21 2024
System time     : 0.000000158 seconds fast of NTP time
Last offset     : -0.000001066 seconds
RMS offset      : 0.000003441 seconds
Frequency       : 0.758 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.110 ppm
Root delay      : 0.000418231 seconds
Root dispersion : 0.000507344 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/01/31 23:50:27.263466 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/31 23:50:27.268077 [INFO] 200 OK

2024/01/31 23:50:27.268176 [INFO] Skipping Configure OS
2024/01/31 23:50:27.268181 [INFO] Skipping LockRepo
2024/01/31 23:50:27.268185 [INFO] Skipping GenerateEBBanner
2024/01/31 23:50:27.268190 [INFO] Skipping Install Process Manager
2024/01/31 23:50:27.268194 [INFO] Skipping install syslog
2024/01/31 23:50:27.268198 [INFO] Skipping install cron
2024/01/31 23:50:27.268201 [INFO] Skipping install proxy
2024/01/31 23:50:27.268205 [INFO] Skipping installhealthd
2024/01/31 23:50:27.268209 [INFO] Skipping Install Log Streaming Manager
2024/01/31 23:50:27.268213 [INFO] Skipping install X-Ray
2024/01/31 23:50:27.268216 [INFO] Skipping install Third Party License
2024/01/31 23:50:27.268221 [INFO] Skipping installSqsd
2024/01/31 23:50:27.268225 [INFO] Skipping bootstraphealthd
2024/01/31 23:50:27.268229 [INFO] Skipping Install yum packages
2024/01/31 23:50:27.268233 [INFO] Skipping install docker-compose
2024/01/31 23:50:27.268237 [INFO] Skipping Configure Docker Daemon
2024/01/31 23:50:27.268253 [INFO] Skipping MarkBaked
2024/01/31 23:50:27.268257 [INFO] Skipping TuneSystemSettings
2024/01/31 23:50:27.268259 [INFO] Executing instruction: GetSetupLogRotate
2024/01/31 23:50:27.268262 [INFO] Initialize LogRotate files and directories
2024/01/31 23:50:27.281520 [INFO] Skipping BootstrapCFNHup
2024/01/31 23:50:27.281531 [INFO] Executing instruction: StartCFNHup
2024/01/31 23:50:27.281533 [INFO] Start cfn-hup
2024/01/31 23:50:27.281555 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/31 23:50:27.295065 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/31 23:50:27.303985 [INFO] cfn-hup process is already registered and up running, skip installation
2024/01/31 23:50:27.304018 [INFO] Skipping SetupPublishLogCronjob
2024/01/31 23:50:27.304022 [INFO] Executing instruction: Start Docker
2024/01/31 23:50:27.304026 [INFO] Starting Docker...
2024/01/31 23:50:27.304101 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/31 23:50:27.305088 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/31 23:50:27.306053 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 23:50:27.671905 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 23:50:27.688149 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/01/31 23:50:27.688182 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 23:50:27.699689 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 23:50:27.708631 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 23:50:27.720048 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/01/31 23:50:27.757035 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/01/31 23:50:27.757141 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/01/31 23:50:28.117331 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 23:50:28.452776 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 23:50:28.467650 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 23:50:28.821926 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 23:50:28.830333 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/31 23:50:28.843925 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/31 23:50:28.852926 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/31 23:50:29.969819 [INFO] Skipping Setup Docker Options
2024/01/31 23:50:29.969849 [INFO] Skipping MarkBootstrapped
2024/01/31 23:50:29.969854 [INFO] Executing instruction: Save CFN Stack Info
2024/01/31 23:50:29.969979 [INFO] Starting SwitchCFNStack
2024/01/31 23:50:29.969985 [INFO] Executing instruction: stopSqsd
2024/01/31 23:50:29.969989 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/31 23:50:29.969992 [INFO] Executing instruction: PreBuildEbExtension
2024/01/31 23:50:29.969996 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/31 23:50:29.970012 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/01/31 23:50:30.519513 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/31 23:50:30.519609 [INFO] Executing instruction: StagedockerApplication
2024/01/31 23:50:30.519622 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/31 23:50:30.565367 [INFO] Pruning containers ...
2024/01/31 23:50:30.567405 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 23:50:30.599821 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
fe60b49d5275   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             gallant_liskov

2024/01/31 23:50:30.599847 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 23:50:30.628714 [INFO] Deleted Containers:
fe60b49d5275808c092795db813065dd772a0e0bcdb9184eaeea63551dd2e568

Total reclaimed space: 0B

2024/01/31 23:50:30.628739 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 23:50:30.652021 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 23:50:30.652697 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/31 23:50:30.660748 [INFO] application/json

2024/01/31 23:50:30.660773 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/01/31 23:50:30.744577 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/01/31 23:50:30.744800 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/01/31 23:50:30.746035 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/31 23:50:30.746062 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/31 23:50:30.746079 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/31 23:50:30.746082 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/31 23:50:30.746087 [INFO] Executing instruction: Generate environment file
2024/01/31 23:50:30.746113 [INFO] Executing instruction: Docker Specific Build Application
2024/01/31 23:50:30.746117 [INFO] start build docker app
2024/01/31 23:50:30.746622 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/01/31 23:50:30.746626 [INFO] fetching image and ports
2024/01/31 23:50:30.748429 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/31 23:50:30.748486 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/01/31 23:50:30.748495 [INFO] authenticate with ECR if the image is in an ECR repo
2024/01/31 23:50:30.748505 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/01/31 23:50:31.679722 [INFO] Login Succeeded

2024/01/31 23:50:31.679741 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/01/31 23:50:31.679747 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/31 23:50:31.679763 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 23:50:31.828482 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/01/31 23:50:31.828503 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 23:50:31.828512 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/01/31 23:50:31.828515 [INFO] start to build docker image
2024/01/31 23:50:31.828532 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 23:50:32.166778 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/01/31 23:50:32.166801 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/31 23:50:32.166804 [INFO] successfully build docker image
2024/01/31 23:50:32.166807 [INFO] save staging docker image id
2024/01/31 23:50:32.166820 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/31 23:50:32.219488 [INFO] c176d18fbf65

2024/01/31 23:50:32.219614 [INFO] Executing instruction: configure X-Ray
2024/01/31 23:50:32.219620 [INFO] X-Ray is not enabled.
2024/01/31 23:50:32.219623 [INFO] Executing instruction: configure proxy Nginx
2024/01/31 23:50:32.229962 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/31 23:50:32.231619 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 23:50:32.244113 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/01/31 23:50:32.244147 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 23:50:32.255776 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 23:50:32.264588 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 23:50:32.275085 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/01/31 23:50:32.359002 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/01/31 23:50:32.717325 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/01/31 23:50:32.717406 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 23:50:33.035475 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 23:50:33.048495 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/31 23:50:33.422260 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/31 23:50:33.434427 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/31 23:50:33.444535 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/31 23:50:33.806923 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/31 23:50:33.818336 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/31 23:50:34.207891 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/31 23:50:34.207928 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/31 23:50:34.222460 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/31 23:50:34.232068 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/31 23:50:34.315814 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/31 23:50:34.316738 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/31 23:50:34.317786 [INFO] Executing instruction: configure log streaming
2024/01/31 23:50:34.317795 [INFO] log streaming is not enabled
2024/01/31 23:50:34.317798 [INFO] disable log stream
2024/01/31 23:50:34.317812 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/31 23:50:34.334361 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/31 23:50:34.348597 [INFO] Executing instruction: GetToggleForceRotate
2024/01/31 23:50:34.348624 [INFO] Checking if logs need forced rotation
2024/01/31 23:50:34.348647 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/01/31 23:50:34.956857 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/01/31 23:50:35.379327 [INFO] Procfile not found. Generating default rsyslog config
2024/01/31 23:50:35.380996 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/31 23:50:35.904564 [INFO] Executing instruction: Configure Docker Logging
2024/01/31 23:50:35.924625 [INFO] Executing instruction: PostBuildEbExtension
2024/01/31 23:50:35.924642 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/31 23:50:35.924661 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/01/31 23:50:36.381921 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/31 23:50:36.381985 [INFO] Executing instruction: CleanEbExtensions
2024/01/31 23:50:36.382010 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/31 23:50:36.382013 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/31 23:50:36.382032 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/31 23:50:36.382044 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/31 23:50:36.382047 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/31 23:50:36.382054 [INFO] Executing instruction: stop X-Ray
2024/01/31 23:50:36.382057 [INFO] stop X-Ray ...
2024/01/31 23:50:36.382076 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/31 23:50:36.396355 [WARN] stopProcess Warning: process xray is not registered 
2024/01/31 23:50:36.396392 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/31 23:50:36.411640 [INFO] Executing instruction: Run Docker Container
2024/01/31 23:50:36.411672 [INFO] stop currently running containers...
2024/01/31 23:50:36.411683 [INFO] detected old app is not docker compose app
2024/01/31 23:50:36.411698 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/31 23:50:36.462503 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/31 23:50:36.477448 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/01/31 23:50:36.477480 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/31 23:50:36.497609 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/01/31 23:50:36.497642 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/31 23:50:36.513517 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/01/31 23:50:36.513585 [INFO] stopping current container: fe60b49d5275
2024/01/31 23:50:36.513598 [INFO] Running command /bin/sh -c docker ps | grep -q fe60b49d5275
2024/01/31 23:50:36.537052 [INFO] Running command /bin/sh -c docker ps | grep -q fe60b49d5275
2024/01/31 23:50:36.556531 [INFO] Pruning containers ...
2024/01/31 23:50:36.556554 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 23:50:36.574192 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 23:50:36.574224 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/31 23:50:36.595296 [INFO] Total reclaimed space: 0B

2024/01/31 23:50:36.595384 [INFO] Running command /bin/sh -c docker ps -a
2024/01/31 23:50:36.614879 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/31 23:50:36.614928 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/01/31 23:50:36.636621 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/01/31 23:50:36.636645 [INFO] Removing /var/app/current/ if it exists
2024/01/31 23:50:36.636792 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/31 23:50:36.636809 [INFO] detected new app is not docker compose app
2024/01/31 23:50:36.636860 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/01/31 23:50:37.071005 [INFO] 20524db458f80d985e5bd973eb930ac2ba7d30f985ac5134d38b5f17a7e0dc3b

2024/01/31 23:50:42.071440 [INFO] Running command /bin/sh -c docker ps | grep -q 20524db458f8
2024/01/31 23:50:42.099004 [ERROR] docker container quit unexpectedly on 2024-01-31 23:50:42.098992943 +0000 UTC: Command /bin/sh -c docker ps | grep -q 20524db458f8 failed with error exit status 1
2024/01/31 23:50:42.099057 [INFO] Running command /bin/sh -c docker logs 20524db458f8
2024/01/31 23:50:42.132573 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 20524db458f8: Command /bin/sh -c docker ps | grep -q 20524db458f8 failed with error exit status 1 

2024/01/31 23:50:42.132586 [INFO] Executing cleanup logic
2024/01/31 23:50:42.132810 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 00:50:43.143256 [INFO] Starting...
2024/02/01 00:50:43.143298 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 00:50:43.143322 [INFO] reading event message file
2024/02/01 00:50:43.144968 [INFO] Engine received EB command userdata-exec

2024/02/01 00:50:43.151709 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 00:50:43.498340 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 00:50:43.954947 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 00:50:43.955042 [INFO] Engine command: (self-startup)

2024/02/01 00:50:43.955049 [INFO] Downloading EB Application...
2024/02/01 00:50:43.955053 [INFO] Region: eu-west-1
2024/02/01 00:50:43.955056 [INFO] envID: e-8gmkc7rmw6
2024/02/01 00:50:43.955059 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 00:50:43.955062 [INFO] Using manifest file name from command request
2024/02/01 00:50:43.955078 [INFO] Unable to get version manifest file.
2024/02/01 00:50:43.955081 [INFO] Downloading latest manifest available.
2024/02/01 00:50:43.955084 [INFO] Download latest app version manifest
2024/02/01 00:50:43.955216 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 00:50:43.990403 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 00:50:43.990598 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 00:50:44.005013 [INFO] Download successful124bytes downloaded
2024/02/01 00:50:44.005154 [INFO] Trying to read and parse version manifest...
2024/02/01 00:50:44.005234 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 00:50:44.041781 [INFO] Download successful264bytes downloaded
2024/02/01 00:50:44.042312 [INFO] Executing instruction: SyncClock
2024/02/01 00:50:44.042318 [INFO] Starting SyncClock
2024/02/01 00:50:44.042329 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 00:50:44.049367 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 00:50:28 2024
System time     : 0.000001792 seconds slow of NTP time
Last offset     : -0.000002950 seconds
RMS offset      : 0.000004035 seconds
Frequency       : 0.605 ppm fast
Residual freq   : -0.005 ppm
Skew            : 0.223 ppm
Root delay      : 0.000449283 seconds
Root dispersion : 0.000317750 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/01 00:50:44.049386 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 00:50:44.054160 [INFO] 200 OK

2024/02/01 00:50:44.054253 [INFO] Skipping Configure OS
2024/02/01 00:50:44.054259 [INFO] Skipping LockRepo
2024/02/01 00:50:44.054263 [INFO] Skipping GenerateEBBanner
2024/02/01 00:50:44.054268 [INFO] Skipping Install Process Manager
2024/02/01 00:50:44.054278 [INFO] Skipping install syslog
2024/02/01 00:50:44.054282 [INFO] Skipping install cron
2024/02/01 00:50:44.054286 [INFO] Skipping install proxy
2024/02/01 00:50:44.054290 [INFO] Skipping installhealthd
2024/02/01 00:50:44.054293 [INFO] Skipping Install Log Streaming Manager
2024/02/01 00:50:44.054297 [INFO] Skipping install X-Ray
2024/02/01 00:50:44.054301 [INFO] Skipping install Third Party License
2024/02/01 00:50:44.054306 [INFO] Skipping installSqsd
2024/02/01 00:50:44.054310 [INFO] Skipping bootstraphealthd
2024/02/01 00:50:44.054314 [INFO] Skipping Install yum packages
2024/02/01 00:50:44.054318 [INFO] Skipping install docker-compose
2024/02/01 00:50:44.054322 [INFO] Skipping Configure Docker Daemon
2024/02/01 00:50:44.054326 [INFO] Skipping MarkBaked
2024/02/01 00:50:44.054329 [INFO] Skipping TuneSystemSettings
2024/02/01 00:50:44.054332 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 00:50:44.054334 [INFO] Initialize LogRotate files and directories
2024/02/01 00:50:44.067660 [INFO] Skipping BootstrapCFNHup
2024/02/01 00:50:44.067670 [INFO] Executing instruction: StartCFNHup
2024/02/01 00:50:44.067673 [INFO] Start cfn-hup
2024/02/01 00:50:44.067690 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 00:50:44.082388 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 00:50:44.092656 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 00:50:44.092692 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 00:50:44.092695 [INFO] Executing instruction: Start Docker
2024/02/01 00:50:44.092699 [INFO] Starting Docker...
2024/02/01 00:50:44.092785 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 00:50:44.093980 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 00:50:44.095121 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 00:50:44.418365 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 00:50:44.449265 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 00:50:44.449301 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 00:50:44.465371 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 00:50:44.475028 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 00:50:44.486735 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 00:50:44.538386 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 00:50:44.538492 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 00:50:44.824426 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 00:50:45.198739 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 00:50:45.210288 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 00:50:45.478965 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 00:50:45.488832 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 00:50:45.508287 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 00:50:45.520006 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 00:50:46.704081 [INFO] Skipping Setup Docker Options
2024/02/01 00:50:46.704104 [INFO] Skipping MarkBootstrapped
2024/02/01 00:50:46.704108 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 00:50:46.704227 [INFO] Starting SwitchCFNStack
2024/02/01 00:50:46.704233 [INFO] Executing instruction: stopSqsd
2024/02/01 00:50:46.704237 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 00:50:46.704241 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 00:50:46.704245 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 00:50:46.704271 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 00:50:47.176908 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 00:50:47.176931 [INFO] Executing instruction: StagedockerApplication
2024/02/01 00:50:47.176942 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 00:50:47.202853 [INFO] Pruning containers ...
2024/02/01 00:50:47.202900 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 00:50:47.228678 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
20524db458f8   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             pensive_kalam

2024/02/01 00:50:47.228707 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 00:50:47.258497 [INFO] Deleted Containers:
20524db458f80d985e5bd973eb930ac2ba7d30f985ac5134d38b5f17a7e0dc3b

Total reclaimed space: 0B

2024/02/01 00:50:47.258526 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 00:50:47.280809 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 00:50:47.281088 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 00:50:47.284229 [INFO] application/json

2024/02/01 00:50:47.284256 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 00:50:47.357379 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/01 00:50:47.357550 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 00:50:47.358987 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 00:50:47.359012 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 00:50:47.359037 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 00:50:47.359041 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 00:50:47.359047 [INFO] Executing instruction: Generate environment file
2024/02/01 00:50:47.359073 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 00:50:47.359082 [INFO] start build docker app
2024/02/01 00:50:47.359496 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 00:50:47.359501 [INFO] fetching image and ports
2024/02/01 00:50:47.361538 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 00:50:47.361598 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 00:50:47.361609 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 00:50:47.361619 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 00:50:48.299548 [INFO] Login Succeeded

2024/02/01 00:50:48.299570 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 00:50:48.299576 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 00:50:48.299591 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 00:50:48.466211 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 00:50:48.466231 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 00:50:48.466235 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 00:50:48.466238 [INFO] start to build docker image
2024/02/01 00:50:48.466253 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 00:50:48.796861 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 00:50:48.796884 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 00:50:48.796888 [INFO] successfully build docker image
2024/02/01 00:50:48.796890 [INFO] save staging docker image id
2024/02/01 00:50:48.796901 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 00:50:48.816646 [INFO] c176d18fbf65

2024/02/01 00:50:48.816761 [INFO] Executing instruction: configure X-Ray
2024/02/01 00:50:48.816767 [INFO] X-Ray is not enabled.
2024/02/01 00:50:48.816770 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 00:50:48.821767 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 00:50:48.823466 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 00:50:48.835080 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 00:50:48.835112 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 00:50:48.844807 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 00:50:48.852870 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 00:50:48.862108 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 00:50:48.917378 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 00:50:49.186742 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 00:50:49.186826 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 00:50:49.530404 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 00:50:49.544266 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 00:50:49.834671 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 00:50:49.843115 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 00:50:49.856864 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 00:50:50.203663 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 00:50:50.216046 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 00:50:50.541022 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 00:50:50.541060 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 00:50:50.562958 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 00:50:50.571242 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 00:50:50.619821 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 00:50:50.620759 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 00:50:50.621569 [INFO] Executing instruction: configure log streaming
2024/02/01 00:50:50.621580 [INFO] log streaming is not enabled
2024/02/01 00:50:50.621583 [INFO] disable log stream
2024/02/01 00:50:50.621597 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 00:50:50.643225 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 00:50:50.661316 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 00:50:50.661339 [INFO] Checking if logs need forced rotation
2024/02/01 00:50:50.662737 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 00:50:51.215374 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 00:50:51.660410 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 00:50:51.662102 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 00:50:52.131991 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 00:50:52.149209 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 00:50:52.149224 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 00:50:52.149238 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 00:50:52.629342 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 00:50:52.629387 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 00:50:52.629419 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 00:50:52.629423 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 00:50:52.629452 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 00:50:52.629469 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 00:50:52.629471 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 00:50:52.629476 [INFO] Executing instruction: stop X-Ray
2024/02/01 00:50:52.629479 [INFO] stop X-Ray ...
2024/02/01 00:50:52.629489 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 00:50:52.647342 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 00:50:52.647375 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 00:50:52.669071 [INFO] Executing instruction: Run Docker Container
2024/02/01 00:50:52.669103 [INFO] stop currently running containers...
2024/02/01 00:50:52.669120 [INFO] detected old app is not docker compose app
2024/02/01 00:50:52.669132 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 00:50:52.732425 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 00:50:52.754963 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 00:50:52.754999 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 00:50:52.774810 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 00:50:52.774844 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 00:50:52.792203 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 00:50:52.792258 [INFO] stopping current container: 20524db458f8
2024/02/01 00:50:52.792271 [INFO] Running command /bin/sh -c docker ps | grep -q 20524db458f8
2024/02/01 00:50:52.823571 [INFO] Running command /bin/sh -c docker ps | grep -q 20524db458f8
2024/02/01 00:50:52.846008 [INFO] Pruning containers ...
2024/02/01 00:50:52.846032 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 00:50:52.868607 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 00:50:52.868637 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 00:50:52.890412 [INFO] Total reclaimed space: 0B

2024/02/01 00:50:52.890495 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 00:50:52.913704 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 00:50:52.913732 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 00:50:52.932259 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 00:50:52.932292 [INFO] Removing /var/app/current/ if it exists
2024/02/01 00:50:52.932392 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 00:50:52.932408 [INFO] detected new app is not docker compose app
2024/02/01 00:50:52.932460 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 00:50:53.367392 [INFO] 9a71223a7c2d95d8a97929cc3526009f1df409b41cfba896c7f73698d7f4f85b

2024/02/01 00:50:58.371492 [INFO] Running command /bin/sh -c docker ps | grep -q 9a71223a7c2d
2024/02/01 00:50:58.395024 [ERROR] docker container quit unexpectedly on 2024-02-01 00:50:58.395014215 +0000 UTC: Command /bin/sh -c docker ps | grep -q 9a71223a7c2d failed with error exit status 1
2024/02/01 00:50:58.395053 [INFO] Running command /bin/sh -c docker logs 9a71223a7c2d
2024/02/01 00:50:58.435849 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 9a71223a7c2d: Command /bin/sh -c docker ps | grep -q 9a71223a7c2d failed with error exit status 1 

2024/02/01 00:50:58.435866 [INFO] Executing cleanup logic
2024/02/01 00:50:58.436261 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 01:50:59.527455 [INFO] Starting...
2024/02/01 01:50:59.527500 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 01:50:59.527524 [INFO] reading event message file
2024/02/01 01:50:59.528467 [INFO] Engine received EB command userdata-exec

2024/02/01 01:50:59.534089 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 01:50:59.915555 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 01:51:00.496660 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 01:51:00.496757 [INFO] Engine command: (self-startup)

2024/02/01 01:51:00.496765 [INFO] Downloading EB Application...
2024/02/01 01:51:00.496768 [INFO] Region: eu-west-1
2024/02/01 01:51:00.496772 [INFO] envID: e-8gmkc7rmw6
2024/02/01 01:51:00.496774 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 01:51:00.496777 [INFO] Using manifest file name from command request
2024/02/01 01:51:00.496794 [INFO] Unable to get version manifest file.
2024/02/01 01:51:00.496797 [INFO] Downloading latest manifest available.
2024/02/01 01:51:00.496800 [INFO] Download latest app version manifest
2024/02/01 01:51:00.496934 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 01:51:00.549711 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 01:51:00.549897 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 01:51:00.564293 [INFO] Download successful124bytes downloaded
2024/02/01 01:51:00.564488 [INFO] Trying to read and parse version manifest...
2024/02/01 01:51:00.564589 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 01:51:00.585864 [INFO] Download successful264bytes downloaded
2024/02/01 01:51:00.586184 [INFO] Executing instruction: SyncClock
2024/02/01 01:51:00.586189 [INFO] Starting SyncClock
2024/02/01 01:51:00.586202 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 01:51:00.591936 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 01:50:51 2024
System time     : 0.000003634 seconds slow of NTP time
Last offset     : -0.000002575 seconds
RMS offset      : 0.000006029 seconds
Frequency       : 0.842 ppm fast
Residual freq   : -0.003 ppm
Skew            : 0.142 ppm
Root delay      : 0.000412278 seconds
Root dispersion : 0.000293432 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/01 01:51:00.591959 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 01:51:00.597171 [INFO] 200 OK

2024/02/01 01:51:00.597266 [INFO] Skipping Configure OS
2024/02/01 01:51:00.597272 [INFO] Skipping LockRepo
2024/02/01 01:51:00.597276 [INFO] Skipping GenerateEBBanner
2024/02/01 01:51:00.597281 [INFO] Skipping Install Process Manager
2024/02/01 01:51:00.597284 [INFO] Skipping install syslog
2024/02/01 01:51:00.597288 [INFO] Skipping install cron
2024/02/01 01:51:00.597292 [INFO] Skipping install proxy
2024/02/01 01:51:00.597296 [INFO] Skipping installhealthd
2024/02/01 01:51:00.597299 [INFO] Skipping Install Log Streaming Manager
2024/02/01 01:51:00.597303 [INFO] Skipping install X-Ray
2024/02/01 01:51:00.597307 [INFO] Skipping install Third Party License
2024/02/01 01:51:00.597312 [INFO] Skipping installSqsd
2024/02/01 01:51:00.597316 [INFO] Skipping bootstraphealthd
2024/02/01 01:51:00.597320 [INFO] Skipping Install yum packages
2024/02/01 01:51:00.597332 [INFO] Skipping install docker-compose
2024/02/01 01:51:00.597336 [INFO] Skipping Configure Docker Daemon
2024/02/01 01:51:00.597339 [INFO] Skipping MarkBaked
2024/02/01 01:51:00.597343 [INFO] Skipping TuneSystemSettings
2024/02/01 01:51:00.597345 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 01:51:00.597348 [INFO] Initialize LogRotate files and directories
2024/02/01 01:51:00.611249 [INFO] Skipping BootstrapCFNHup
2024/02/01 01:51:00.611276 [INFO] Executing instruction: StartCFNHup
2024/02/01 01:51:00.611278 [INFO] Start cfn-hup
2024/02/01 01:51:00.611296 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 01:51:00.624832 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 01:51:00.641724 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 01:51:00.641761 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 01:51:00.641766 [INFO] Executing instruction: Start Docker
2024/02/01 01:51:00.641769 [INFO] Starting Docker...
2024/02/01 01:51:00.641854 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 01:51:00.643081 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 01:51:00.650278 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 01:51:01.185012 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 01:51:01.205636 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 01:51:01.205674 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 01:51:01.222375 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 01:51:01.232420 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 01:51:01.245887 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 01:51:01.334151 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 01:51:01.334217 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 01:51:01.793994 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 01:51:02.244399 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 01:51:02.270182 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 01:51:02.600763 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 01:51:02.611659 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 01:51:02.627042 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 01:51:02.638331 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 01:51:03.832666 [INFO] Skipping Setup Docker Options
2024/02/01 01:51:03.832698 [INFO] Skipping MarkBootstrapped
2024/02/01 01:51:03.832703 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 01:51:03.832828 [INFO] Starting SwitchCFNStack
2024/02/01 01:51:03.832836 [INFO] Executing instruction: stopSqsd
2024/02/01 01:51:03.832840 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 01:51:03.832844 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 01:51:03.832848 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 01:51:03.832869 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 01:51:04.334117 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 01:51:04.334143 [INFO] Executing instruction: StagedockerApplication
2024/02/01 01:51:04.334163 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 01:51:04.355920 [INFO] Pruning containers ...
2024/02/01 01:51:04.355957 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 01:51:04.375747 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
9a71223a7c2d   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             dreamy_einstein

2024/02/01 01:51:04.375779 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 01:51:04.426180 [INFO] Deleted Containers:
9a71223a7c2d95d8a97929cc3526009f1df409b41cfba896c7f73698d7f4f85b

Total reclaimed space: 0B

2024/02/01 01:51:04.426207 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 01:51:04.449125 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 01:51:04.449463 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 01:51:04.452553 [INFO] application/json

2024/02/01 01:51:04.452580 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 01:51:04.528304 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/01 01:51:04.528472 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 01:51:04.529862 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 01:51:04.529890 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 01:51:04.529906 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 01:51:04.529908 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 01:51:04.529912 [INFO] Executing instruction: Generate environment file
2024/02/01 01:51:04.529937 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 01:51:04.529940 [INFO] start build docker app
2024/02/01 01:51:04.530305 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 01:51:04.530308 [INFO] fetching image and ports
2024/02/01 01:51:04.532039 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 01:51:04.532085 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 01:51:04.532095 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 01:51:04.532108 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 01:51:05.510254 [INFO] Login Succeeded

2024/02/01 01:51:05.510271 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 01:51:05.510276 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 01:51:05.510293 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 01:51:05.646693 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 01:51:05.646717 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 01:51:05.646727 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 01:51:05.646730 [INFO] start to build docker image
2024/02/01 01:51:05.646744 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 01:51:05.925318 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 01:51:05.925342 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 01:51:05.925345 [INFO] successfully build docker image
2024/02/01 01:51:05.925347 [INFO] save staging docker image id
2024/02/01 01:51:05.925361 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 01:51:05.946323 [INFO] c176d18fbf65

2024/02/01 01:51:05.946461 [INFO] Executing instruction: configure X-Ray
2024/02/01 01:51:05.946468 [INFO] X-Ray is not enabled.
2024/02/01 01:51:05.946471 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 01:51:05.954468 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 01:51:05.956522 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 01:51:05.973138 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 01:51:05.973184 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 01:51:05.988693 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 01:51:06.000052 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 01:51:06.018764 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 01:51:06.078343 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 01:51:06.442355 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 01:51:06.442440 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 01:51:06.795539 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 01:51:06.824226 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 01:51:07.172747 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 01:51:07.182896 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 01:51:07.194001 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 01:51:07.602039 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 01:51:07.612171 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 01:51:07.913703 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 01:51:07.913736 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 01:51:07.924555 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 01:51:07.934290 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 01:51:08.040187 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 01:51:08.041521 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 01:51:08.042466 [INFO] Executing instruction: configure log streaming
2024/02/01 01:51:08.042477 [INFO] log streaming is not enabled
2024/02/01 01:51:08.042480 [INFO] disable log stream
2024/02/01 01:51:08.042496 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 01:51:08.064876 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 01:51:08.086073 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 01:51:08.086109 [INFO] Checking if logs need forced rotation
2024/02/01 01:51:08.086134 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 01:51:08.695077 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 01:51:09.145218 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 01:51:09.146848 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 01:51:09.673984 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 01:51:09.694112 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 01:51:09.694126 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 01:51:09.694138 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 01:51:10.127921 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 01:51:10.127944 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 01:51:10.127966 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 01:51:10.127970 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 01:51:10.127994 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 01:51:10.128010 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 01:51:10.128013 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 01:51:10.128017 [INFO] Executing instruction: stop X-Ray
2024/02/01 01:51:10.128020 [INFO] stop X-Ray ...
2024/02/01 01:51:10.128031 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 01:51:10.144418 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 01:51:10.144462 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 01:51:10.161384 [INFO] Executing instruction: Run Docker Container
2024/02/01 01:51:10.161414 [INFO] stop currently running containers...
2024/02/01 01:51:10.161423 [INFO] detected old app is not docker compose app
2024/02/01 01:51:10.161434 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 01:51:10.192757 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 01:51:10.207888 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 01:51:10.207926 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 01:51:10.221289 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 01:51:10.221319 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 01:51:10.242209 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 01:51:10.242257 [INFO] stopping current container: 9a71223a7c2d
2024/02/01 01:51:10.242271 [INFO] Running command /bin/sh -c docker ps | grep -q 9a71223a7c2d
2024/02/01 01:51:10.274277 [INFO] Running command /bin/sh -c docker ps | grep -q 9a71223a7c2d
2024/02/01 01:51:10.300761 [INFO] Pruning containers ...
2024/02/01 01:51:10.300784 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 01:51:10.320491 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 01:51:10.320527 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 01:51:10.339845 [INFO] Total reclaimed space: 0B

2024/02/01 01:51:10.339871 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 01:51:10.360339 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 01:51:10.360372 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 01:51:10.386422 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 01:51:10.386443 [INFO] Removing /var/app/current/ if it exists
2024/02/01 01:51:10.387650 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 01:51:10.387675 [INFO] detected new app is not docker compose app
2024/02/01 01:51:10.387728 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 01:51:10.864087 [INFO] c4caf66c36ba61ae74c46626f3b9d14e3d9b3182fae954da2e93900a9d5c7058

2024/02/01 01:51:15.864568 [INFO] Running command /bin/sh -c docker ps | grep -q c4caf66c36ba
2024/02/01 01:51:15.887312 [ERROR] docker container quit unexpectedly on 2024-02-01 01:51:15.887298864 +0000 UTC: Command /bin/sh -c docker ps | grep -q c4caf66c36ba failed with error exit status 1
2024/02/01 01:51:15.887342 [INFO] Running command /bin/sh -c docker logs c4caf66c36ba
2024/02/01 01:51:15.911645 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c4caf66c36ba: Command /bin/sh -c docker ps | grep -q c4caf66c36ba failed with error exit status 1 

2024/02/01 01:51:15.911657 [INFO] Executing cleanup logic
2024/02/01 01:51:15.911802 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 02:51:17.092286 [INFO] Starting...
2024/02/01 02:51:17.092337 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 02:51:17.092368 [INFO] reading event message file
2024/02/01 02:51:17.093131 [INFO] Engine received EB command userdata-exec

2024/02/01 02:51:17.110037 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 02:51:17.536272 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 02:51:17.982267 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 02:51:17.982404 [INFO] Engine command: (self-startup)

2024/02/01 02:51:17.982421 [INFO] Downloading EB Application...
2024/02/01 02:51:17.982425 [INFO] Region: eu-west-1
2024/02/01 02:51:17.982427 [INFO] envID: e-8gmkc7rmw6
2024/02/01 02:51:17.982430 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 02:51:17.982434 [INFO] Using manifest file name from command request
2024/02/01 02:51:17.982450 [INFO] Unable to get version manifest file.
2024/02/01 02:51:17.982454 [INFO] Downloading latest manifest available.
2024/02/01 02:51:17.982456 [INFO] Download latest app version manifest
2024/02/01 02:51:17.982688 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 02:51:18.025611 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 02:51:18.025812 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 02:51:18.038280 [INFO] Download successful124bytes downloaded
2024/02/01 02:51:18.038675 [INFO] Trying to read and parse version manifest...
2024/02/01 02:51:18.038943 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 02:51:18.067990 [INFO] Download successful264bytes downloaded
2024/02/01 02:51:18.068729 [INFO] Executing instruction: SyncClock
2024/02/01 02:51:18.069147 [INFO] Starting SyncClock
2024/02/01 02:51:18.069167 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 02:51:18.075359 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 02:51:15 2024
System time     : 0.000000210 seconds fast of NTP time
Last offset     : +0.000001690 seconds
RMS offset      : 0.000002594 seconds
Frequency       : 0.975 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.160 ppm
Root delay      : 0.000447723 seconds
Root dispersion : 0.000486639 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/01 02:51:18.075384 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 02:51:18.080558 [INFO] 200 OK

2024/02/01 02:51:18.080652 [INFO] Skipping Configure OS
2024/02/01 02:51:18.080658 [INFO] Skipping LockRepo
2024/02/01 02:51:18.080662 [INFO] Skipping GenerateEBBanner
2024/02/01 02:51:18.080666 [INFO] Skipping Install Process Manager
2024/02/01 02:51:18.080670 [INFO] Skipping install syslog
2024/02/01 02:51:18.080673 [INFO] Skipping install cron
2024/02/01 02:51:18.080677 [INFO] Skipping install proxy
2024/02/01 02:51:18.080681 [INFO] Skipping installhealthd
2024/02/01 02:51:18.080684 [INFO] Skipping Install Log Streaming Manager
2024/02/01 02:51:18.080688 [INFO] Skipping install X-Ray
2024/02/01 02:51:18.080691 [INFO] Skipping install Third Party License
2024/02/01 02:51:18.080696 [INFO] Skipping installSqsd
2024/02/01 02:51:18.080700 [INFO] Skipping bootstraphealthd
2024/02/01 02:51:18.080704 [INFO] Skipping Install yum packages
2024/02/01 02:51:18.080708 [INFO] Skipping install docker-compose
2024/02/01 02:51:18.080712 [INFO] Skipping Configure Docker Daemon
2024/02/01 02:51:18.080715 [INFO] Skipping MarkBaked
2024/02/01 02:51:18.080719 [INFO] Skipping TuneSystemSettings
2024/02/01 02:51:18.080721 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 02:51:18.080723 [INFO] Initialize LogRotate files and directories
2024/02/01 02:51:18.096953 [INFO] Skipping BootstrapCFNHup
2024/02/01 02:51:18.096965 [INFO] Executing instruction: StartCFNHup
2024/02/01 02:51:18.096968 [INFO] Start cfn-hup
2024/02/01 02:51:18.096986 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 02:51:18.110981 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 02:51:18.121101 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 02:51:18.121138 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 02:51:18.121142 [INFO] Executing instruction: Start Docker
2024/02/01 02:51:18.121145 [INFO] Starting Docker...
2024/02/01 02:51:18.121224 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 02:51:18.122666 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 02:51:18.123738 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 02:51:18.392300 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 02:51:18.411488 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 02:51:18.411520 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 02:51:18.426340 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 02:51:18.435689 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 02:51:18.446790 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 02:51:18.516981 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 02:51:18.517031 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 02:51:18.815567 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 02:51:19.089611 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 02:51:19.111029 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 02:51:19.474531 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 02:51:19.484625 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 02:51:19.502486 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 02:51:19.513818 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 02:51:20.690762 [INFO] Skipping Setup Docker Options
2024/02/01 02:51:20.690790 [INFO] Skipping MarkBootstrapped
2024/02/01 02:51:20.690794 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 02:51:20.690926 [INFO] Starting SwitchCFNStack
2024/02/01 02:51:20.690932 [INFO] Executing instruction: stopSqsd
2024/02/01 02:51:20.690953 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 02:51:20.690956 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 02:51:20.690959 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 02:51:20.690982 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 02:51:21.251957 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 02:51:21.251982 [INFO] Executing instruction: StagedockerApplication
2024/02/01 02:51:21.251998 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 02:51:21.280853 [INFO] Pruning containers ...
2024/02/01 02:51:21.280882 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 02:51:21.299676 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c4caf66c36ba   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             busy_proskuriakova

2024/02/01 02:51:21.299707 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 02:51:21.324178 [INFO] Deleted Containers:
c4caf66c36ba61ae74c46626f3b9d14e3d9b3182fae954da2e93900a9d5c7058

Total reclaimed space: 0B

2024/02/01 02:51:21.324202 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 02:51:21.349360 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 02:51:21.349631 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 02:51:21.353914 [INFO] application/json

2024/02/01 02:51:21.353941 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 02:51:21.430487 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 02:51:21.430680 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 02:51:21.431918 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 02:51:21.431947 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 02:51:21.431961 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 02:51:21.431964 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 02:51:21.431973 [INFO] Executing instruction: Generate environment file
2024/02/01 02:51:21.432003 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 02:51:21.432007 [INFO] start build docker app
2024/02/01 02:51:21.432375 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 02:51:21.432378 [INFO] fetching image and ports
2024/02/01 02:51:21.434130 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 02:51:21.434193 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 02:51:21.434202 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 02:51:21.434211 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 02:51:22.390003 [INFO] Login Succeeded

2024/02/01 02:51:22.390021 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 02:51:22.390027 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 02:51:22.390058 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 02:51:22.537247 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 02:51:22.537275 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 02:51:22.537280 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 02:51:22.537284 [INFO] start to build docker image
2024/02/01 02:51:22.537302 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 02:51:22.776800 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 02:51:22.776825 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 02:51:22.776830 [INFO] successfully build docker image
2024/02/01 02:51:22.776832 [INFO] save staging docker image id
2024/02/01 02:51:22.776846 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 02:51:22.796567 [INFO] c176d18fbf65

2024/02/01 02:51:22.796702 [INFO] Executing instruction: configure X-Ray
2024/02/01 02:51:22.796774 [INFO] X-Ray is not enabled.
2024/02/01 02:51:22.796787 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 02:51:22.803971 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 02:51:22.805733 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 02:51:22.818929 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 02:51:22.818963 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 02:51:22.829425 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 02:51:22.846869 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 02:51:22.867410 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 02:51:22.937950 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 02:51:23.359127 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 02:51:23.359207 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 02:51:23.644757 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 02:51:23.660144 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 02:51:24.005092 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 02:51:24.015023 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 02:51:24.025447 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 02:51:24.419447 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 02:51:24.429208 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 02:51:24.765319 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 02:51:24.765355 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 02:51:24.778035 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 02:51:24.793908 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 02:51:24.879172 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 02:51:24.879992 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 02:51:24.880950 [INFO] Executing instruction: configure log streaming
2024/02/01 02:51:24.880960 [INFO] log streaming is not enabled
2024/02/01 02:51:24.880963 [INFO] disable log stream
2024/02/01 02:51:24.880997 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 02:51:24.901249 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 02:51:24.934611 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 02:51:24.934665 [INFO] Checking if logs need forced rotation
2024/02/01 02:51:24.934687 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 02:51:25.472223 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 02:51:25.931231 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 02:51:25.933085 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 02:51:26.041726 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 02:51:26.060553 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 02:51:26.060569 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 02:51:26.060581 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 02:51:26.550487 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 02:51:26.550631 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 02:51:26.550660 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 02:51:26.550664 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 02:51:26.550688 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 02:51:26.550709 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 02:51:26.550712 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 02:51:26.550718 [INFO] Executing instruction: stop X-Ray
2024/02/01 02:51:26.550721 [INFO] stop X-Ray ...
2024/02/01 02:51:26.550734 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 02:51:26.576448 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 02:51:26.576486 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 02:51:26.592133 [INFO] Executing instruction: Run Docker Container
2024/02/01 02:51:26.592161 [INFO] stop currently running containers...
2024/02/01 02:51:26.592172 [INFO] detected old app is not docker compose app
2024/02/01 02:51:26.592186 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 02:51:26.652413 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 02:51:26.667711 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 02:51:26.667745 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 02:51:26.681405 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 02:51:26.681436 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 02:51:26.695309 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 02:51:26.695356 [INFO] stopping current container: c4caf66c36ba
2024/02/01 02:51:26.695368 [INFO] Running command /bin/sh -c docker ps | grep -q c4caf66c36ba
2024/02/01 02:51:26.715963 [INFO] Running command /bin/sh -c docker ps | grep -q c4caf66c36ba
2024/02/01 02:51:26.741056 [INFO] Pruning containers ...
2024/02/01 02:51:26.741079 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 02:51:26.767224 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 02:51:26.767264 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 02:51:26.791797 [INFO] Total reclaimed space: 0B

2024/02/01 02:51:26.791829 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 02:51:26.829513 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 02:51:26.829547 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 02:51:26.853551 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 02:51:26.853574 [INFO] Removing /var/app/current/ if it exists
2024/02/01 02:51:26.853812 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 02:51:26.853831 [INFO] detected new app is not docker compose app
2024/02/01 02:51:26.853935 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 02:51:27.338958 [INFO] 8e40962f63743337fae46cdb8df6ff0e75b25c9dc9fe7ff76367bc91ef65f3f4

2024/02/01 02:51:32.343539 [INFO] Running command /bin/sh -c docker ps | grep -q 8e40962f6374
2024/02/01 02:51:32.366221 [ERROR] docker container quit unexpectedly on 2024-02-01 02:51:32.366206786 +0000 UTC: Command /bin/sh -c docker ps | grep -q 8e40962f6374 failed with error exit status 1
2024/02/01 02:51:32.366252 [INFO] Running command /bin/sh -c docker logs 8e40962f6374
2024/02/01 02:51:32.406044 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 8e40962f6374: Command /bin/sh -c docker ps | grep -q 8e40962f6374 failed with error exit status 1 

2024/02/01 02:51:32.406175 [INFO] Executing cleanup logic
2024/02/01 02:51:32.407703 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 03:51:33.485518 [INFO] Starting...
2024/02/01 03:51:33.485560 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 03:51:33.485586 [INFO] reading event message file
2024/02/01 03:51:33.486569 [INFO] Engine received EB command userdata-exec

2024/02/01 03:51:33.492131 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 03:51:34.054928 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 03:51:34.560472 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 03:51:34.560573 [INFO] Engine command: (self-startup)

2024/02/01 03:51:34.560582 [INFO] Downloading EB Application...
2024/02/01 03:51:34.560585 [INFO] Region: eu-west-1
2024/02/01 03:51:34.560589 [INFO] envID: e-8gmkc7rmw6
2024/02/01 03:51:34.560592 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 03:51:34.560595 [INFO] Using manifest file name from command request
2024/02/01 03:51:34.560609 [INFO] Unable to get version manifest file.
2024/02/01 03:51:34.560611 [INFO] Downloading latest manifest available.
2024/02/01 03:51:34.560613 [INFO] Download latest app version manifest
2024/02/01 03:51:34.560749 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 03:51:34.598910 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 03:51:34.599378 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 03:51:34.610175 [INFO] Download successful124bytes downloaded
2024/02/01 03:51:34.610325 [INFO] Trying to read and parse version manifest...
2024/02/01 03:51:34.610399 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 03:51:34.631048 [INFO] Download successful264bytes downloaded
2024/02/01 03:51:34.631454 [INFO] Executing instruction: SyncClock
2024/02/01 03:51:34.631462 [INFO] Starting SyncClock
2024/02/01 03:51:34.631474 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 03:51:34.637627 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 03:51:21 2024
System time     : 0.000002183 seconds slow of NTP time
Last offset     : -0.000002161 seconds
RMS offset      : 0.000002338 seconds
Frequency       : 0.602 ppm fast
Residual freq   : -0.002 ppm
Skew            : 0.059 ppm
Root delay      : 0.000409064 seconds
Root dispersion : 0.000511956 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/01 03:51:34.637645 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 03:51:34.641973 [INFO] 200 OK

2024/02/01 03:51:34.642053 [INFO] Skipping Configure OS
2024/02/01 03:51:34.642058 [INFO] Skipping LockRepo
2024/02/01 03:51:34.642061 [INFO] Skipping GenerateEBBanner
2024/02/01 03:51:34.642065 [INFO] Skipping Install Process Manager
2024/02/01 03:51:34.642069 [INFO] Skipping install syslog
2024/02/01 03:51:34.642073 [INFO] Skipping install cron
2024/02/01 03:51:34.642077 [INFO] Skipping install proxy
2024/02/01 03:51:34.642080 [INFO] Skipping installhealthd
2024/02/01 03:51:34.642084 [INFO] Skipping Install Log Streaming Manager
2024/02/01 03:51:34.642088 [INFO] Skipping install X-Ray
2024/02/01 03:51:34.642091 [INFO] Skipping install Third Party License
2024/02/01 03:51:34.642099 [INFO] Skipping installSqsd
2024/02/01 03:51:34.642111 [INFO] Skipping bootstraphealthd
2024/02/01 03:51:34.642116 [INFO] Skipping Install yum packages
2024/02/01 03:51:34.642120 [INFO] Skipping install docker-compose
2024/02/01 03:51:34.642123 [INFO] Skipping Configure Docker Daemon
2024/02/01 03:51:34.642127 [INFO] Skipping MarkBaked
2024/02/01 03:51:34.642132 [INFO] Skipping TuneSystemSettings
2024/02/01 03:51:34.642135 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 03:51:34.642137 [INFO] Initialize LogRotate files and directories
2024/02/01 03:51:34.657010 [INFO] Skipping BootstrapCFNHup
2024/02/01 03:51:34.657022 [INFO] Executing instruction: StartCFNHup
2024/02/01 03:51:34.657024 [INFO] Start cfn-hup
2024/02/01 03:51:34.657042 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 03:51:34.672497 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 03:51:34.682794 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 03:51:34.682822 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 03:51:34.682829 [INFO] Executing instruction: Start Docker
2024/02/01 03:51:34.682832 [INFO] Starting Docker...
2024/02/01 03:51:34.682887 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 03:51:34.686157 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 03:51:34.687262 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 03:51:35.171601 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 03:51:35.190926 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 03:51:35.190961 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 03:51:35.209695 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 03:51:35.225080 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 03:51:35.239014 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 03:51:35.315782 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 03:51:35.315864 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 03:51:35.611510 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 03:51:35.906236 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 03:51:35.918114 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 03:51:36.214793 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 03:51:36.228239 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 03:51:36.241378 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 03:51:36.250468 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 03:51:37.468853 [INFO] Skipping Setup Docker Options
2024/02/01 03:51:37.468885 [INFO] Skipping MarkBootstrapped
2024/02/01 03:51:37.468889 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 03:51:37.469085 [INFO] Starting SwitchCFNStack
2024/02/01 03:51:37.469092 [INFO] Executing instruction: stopSqsd
2024/02/01 03:51:37.469096 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 03:51:37.469100 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 03:51:37.469103 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 03:51:37.469126 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 03:51:37.977050 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 03:51:37.977073 [INFO] Executing instruction: StagedockerApplication
2024/02/01 03:51:37.977093 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 03:51:37.999943 [INFO] Pruning containers ...
2024/02/01 03:51:37.999976 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 03:51:38.025228 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
8e40962f6374   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             mystifying_benz

2024/02/01 03:51:38.025269 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 03:51:38.063068 [INFO] Deleted Containers:
8e40962f63743337fae46cdb8df6ff0e75b25c9dc9fe7ff76367bc91ef65f3f4

Total reclaimed space: 0B

2024/02/01 03:51:38.063100 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 03:51:38.083098 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 03:51:38.083363 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 03:51:38.088010 [INFO] application/json

2024/02/01 03:51:38.088032 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 03:51:38.163031 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/01 03:51:38.163432 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 03:51:38.164595 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 03:51:38.164623 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 03:51:38.164642 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 03:51:38.164646 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 03:51:38.164651 [INFO] Executing instruction: Generate environment file
2024/02/01 03:51:38.164683 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 03:51:38.164687 [INFO] start build docker app
2024/02/01 03:51:38.165039 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 03:51:38.165045 [INFO] fetching image and ports
2024/02/01 03:51:38.166521 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 03:51:38.166594 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 03:51:38.166603 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 03:51:38.166618 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 03:51:39.086006 [INFO] Login Succeeded

2024/02/01 03:51:39.086025 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 03:51:39.086031 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 03:51:39.086048 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 03:51:39.229618 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 03:51:39.229644 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 03:51:39.229647 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 03:51:39.229650 [INFO] start to build docker image
2024/02/01 03:51:39.229666 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 03:51:39.539338 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 03:51:39.539374 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 03:51:39.539378 [INFO] successfully build docker image
2024/02/01 03:51:39.539380 [INFO] save staging docker image id
2024/02/01 03:51:39.539391 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 03:51:39.560662 [INFO] c176d18fbf65

2024/02/01 03:51:39.560782 [INFO] Executing instruction: configure X-Ray
2024/02/01 03:51:39.560787 [INFO] X-Ray is not enabled.
2024/02/01 03:51:39.560790 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 03:51:39.565611 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 03:51:39.567159 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 03:51:39.579342 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 03:51:39.579430 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 03:51:39.594725 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 03:51:39.607517 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 03:51:39.620846 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 03:51:39.707938 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 03:51:40.038308 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 03:51:40.038390 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 03:51:40.381434 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 03:51:40.395607 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 03:51:40.795324 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 03:51:40.806404 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 03:51:40.816045 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 03:51:41.156323 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 03:51:41.173549 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 03:51:41.566700 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 03:51:41.566738 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 03:51:41.580013 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 03:51:41.591741 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 03:51:41.691926 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 03:51:41.692885 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 03:51:41.693704 [INFO] Executing instruction: configure log streaming
2024/02/01 03:51:41.693714 [INFO] log streaming is not enabled
2024/02/01 03:51:41.693718 [INFO] disable log stream
2024/02/01 03:51:41.693732 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 03:51:41.713242 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 03:51:41.736921 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 03:51:41.736945 [INFO] Checking if logs need forced rotation
2024/02/01 03:51:41.737068 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 03:51:42.289975 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 03:51:42.767594 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 03:51:42.769228 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 03:51:42.849761 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 03:51:42.866978 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 03:51:42.867116 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 03:51:42.867145 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 03:51:43.289283 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 03:51:43.289309 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 03:51:43.289338 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 03:51:43.289342 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 03:51:43.289365 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 03:51:43.289376 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 03:51:43.289379 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 03:51:43.289384 [INFO] Executing instruction: stop X-Ray
2024/02/01 03:51:43.289387 [INFO] stop X-Ray ...
2024/02/01 03:51:43.289396 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 03:51:43.305037 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 03:51:43.305078 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 03:51:43.326873 [INFO] Executing instruction: Run Docker Container
2024/02/01 03:51:43.327521 [INFO] stop currently running containers...
2024/02/01 03:51:43.327553 [INFO] detected old app is not docker compose app
2024/02/01 03:51:43.327569 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 03:51:43.382409 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 03:51:43.401217 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 03:51:43.401261 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 03:51:43.416872 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 03:51:43.416918 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 03:51:43.433294 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 03:51:43.433352 [INFO] stopping current container: 8e40962f6374
2024/02/01 03:51:43.433366 [INFO] Running command /bin/sh -c docker ps | grep -q 8e40962f6374
2024/02/01 03:51:43.460409 [INFO] Running command /bin/sh -c docker ps | grep -q 8e40962f6374
2024/02/01 03:51:43.487760 [INFO] Pruning containers ...
2024/02/01 03:51:43.487788 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 03:51:43.511776 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 03:51:43.511807 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 03:51:43.533887 [INFO] Total reclaimed space: 0B

2024/02/01 03:51:43.533917 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 03:51:43.560659 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 03:51:43.560690 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 03:51:43.588065 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 03:51:43.588080 [INFO] Removing /var/app/current/ if it exists
2024/02/01 03:51:43.588229 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 03:51:43.588246 [INFO] detected new app is not docker compose app
2024/02/01 03:51:43.588296 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 03:51:43.987434 [INFO] 724bb7b8dadec2d7a59457fb9cbe806b19185d3e0608e0ed759b587cb5b8378b

2024/02/01 03:51:48.987922 [INFO] Running command /bin/sh -c docker ps | grep -q 724bb7b8dade
2024/02/01 03:51:49.011245 [ERROR] docker container quit unexpectedly on 2024-02-01 03:51:49.011209696 +0000 UTC: Command /bin/sh -c docker ps | grep -q 724bb7b8dade failed with error exit status 1
2024/02/01 03:51:49.011279 [INFO] Running command /bin/sh -c docker logs 724bb7b8dade
2024/02/01 03:51:49.031631 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 724bb7b8dade: Command /bin/sh -c docker ps | grep -q 724bb7b8dade failed with error exit status 1 

2024/02/01 03:51:49.031640 [INFO] Executing cleanup logic
2024/02/01 03:51:49.031846 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 04:51:50.075748 [INFO] Starting...
2024/02/01 04:51:50.075797 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 04:51:50.075830 [INFO] reading event message file
2024/02/01 04:51:50.076517 [INFO] Engine received EB command userdata-exec

2024/02/01 04:51:50.084690 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 04:51:50.540431 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 04:51:51.050898 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 04:51:51.050995 [INFO] Engine command: (self-startup)

2024/02/01 04:51:51.051003 [INFO] Downloading EB Application...
2024/02/01 04:51:51.051006 [INFO] Region: eu-west-1
2024/02/01 04:51:51.051009 [INFO] envID: e-8gmkc7rmw6
2024/02/01 04:51:51.051012 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 04:51:51.051016 [INFO] Using manifest file name from command request
2024/02/01 04:51:51.051032 [INFO] Unable to get version manifest file.
2024/02/01 04:51:51.051035 [INFO] Downloading latest manifest available.
2024/02/01 04:51:51.051038 [INFO] Download latest app version manifest
2024/02/01 04:51:51.051167 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 04:51:51.093987 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 04:51:51.094168 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 04:51:51.105063 [INFO] Download successful124bytes downloaded
2024/02/01 04:51:51.105233 [INFO] Trying to read and parse version manifest...
2024/02/01 04:51:51.105311 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 04:51:51.120206 [INFO] Download successful264bytes downloaded
2024/02/01 04:51:51.120588 [INFO] Executing instruction: SyncClock
2024/02/01 04:51:51.120594 [INFO] Starting SyncClock
2024/02/01 04:51:51.120604 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 04:51:51.129889 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 04:51:46 2024
System time     : 0.000003170 seconds slow of NTP time
Last offset     : -0.000002216 seconds
RMS offset      : 0.000001365 seconds
Frequency       : 0.990 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.023 ppm
Root delay      : 0.000418141 seconds
Root dispersion : 0.000296525 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/01 04:51:51.130514 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 04:51:51.136408 [INFO] 200 OK

2024/02/01 04:51:51.136541 [INFO] Skipping Configure OS
2024/02/01 04:51:51.136552 [INFO] Skipping LockRepo
2024/02/01 04:51:51.136557 [INFO] Skipping GenerateEBBanner
2024/02/01 04:51:51.136564 [INFO] Skipping Install Process Manager
2024/02/01 04:51:51.136570 [INFO] Skipping install syslog
2024/02/01 04:51:51.136575 [INFO] Skipping install cron
2024/02/01 04:51:51.136580 [INFO] Skipping install proxy
2024/02/01 04:51:51.136586 [INFO] Skipping installhealthd
2024/02/01 04:51:51.136592 [INFO] Skipping Install Log Streaming Manager
2024/02/01 04:51:51.136597 [INFO] Skipping install X-Ray
2024/02/01 04:51:51.136603 [INFO] Skipping install Third Party License
2024/02/01 04:51:51.136609 [INFO] Skipping installSqsd
2024/02/01 04:51:51.136614 [INFO] Skipping bootstraphealthd
2024/02/01 04:51:51.136620 [INFO] Skipping Install yum packages
2024/02/01 04:51:51.136626 [INFO] Skipping install docker-compose
2024/02/01 04:51:51.136631 [INFO] Skipping Configure Docker Daemon
2024/02/01 04:51:51.136637 [INFO] Skipping MarkBaked
2024/02/01 04:51:51.136642 [INFO] Skipping TuneSystemSettings
2024/02/01 04:51:51.136646 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 04:51:51.136649 [INFO] Initialize LogRotate files and directories
2024/02/01 04:51:51.150636 [INFO] Skipping BootstrapCFNHup
2024/02/01 04:51:51.150648 [INFO] Executing instruction: StartCFNHup
2024/02/01 04:51:51.150670 [INFO] Start cfn-hup
2024/02/01 04:51:51.150696 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 04:51:51.167580 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 04:51:51.179305 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 04:51:51.179341 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 04:51:51.179345 [INFO] Executing instruction: Start Docker
2024/02/01 04:51:51.179348 [INFO] Starting Docker...
2024/02/01 04:51:51.179438 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 04:51:51.180585 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 04:51:51.181603 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 04:51:51.670779 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 04:51:51.685936 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 04:51:51.685968 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 04:51:51.698920 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 04:51:51.707687 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 04:51:51.720181 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 04:51:51.806058 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 04:51:51.806087 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 04:51:52.114370 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 04:51:52.477712 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 04:51:52.489136 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 04:51:52.808016 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 04:51:52.819016 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 04:51:52.834093 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 04:51:52.850789 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 04:51:53.963742 [INFO] Skipping Setup Docker Options
2024/02/01 04:51:53.963771 [INFO] Skipping MarkBootstrapped
2024/02/01 04:51:53.963775 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 04:51:53.963895 [INFO] Starting SwitchCFNStack
2024/02/01 04:51:53.963902 [INFO] Executing instruction: stopSqsd
2024/02/01 04:51:53.963906 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 04:51:53.963910 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 04:51:53.963914 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 04:51:53.963933 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 04:51:54.429858 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 04:51:54.429882 [INFO] Executing instruction: StagedockerApplication
2024/02/01 04:51:54.429894 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 04:51:54.451963 [INFO] Pruning containers ...
2024/02/01 04:51:54.452058 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 04:51:54.504638 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
724bb7b8dade   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             jolly_lumiere

2024/02/01 04:51:54.504668 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 04:51:54.532457 [INFO] Deleted Containers:
724bb7b8dadec2d7a59457fb9cbe806b19185d3e0608e0ed759b587cb5b8378b

Total reclaimed space: 0B

2024/02/01 04:51:54.532479 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 04:51:54.552055 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 04:51:54.552271 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 04:51:54.557248 [INFO] application/json

2024/02/01 04:51:54.557267 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 04:51:54.639765 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 04:51:54.639936 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 04:51:54.640966 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 04:51:54.641008 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 04:51:54.641023 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 04:51:54.641032 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 04:51:54.641036 [INFO] Executing instruction: Generate environment file
2024/02/01 04:51:54.641062 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 04:51:54.641065 [INFO] start build docker app
2024/02/01 04:51:54.641592 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 04:51:54.641601 [INFO] fetching image and ports
2024/02/01 04:51:54.643273 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 04:51:54.643329 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 04:51:54.643339 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 04:51:54.643348 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 04:51:55.550778 [INFO] Login Succeeded

2024/02/01 04:51:55.550796 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 04:51:55.550801 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 04:51:55.550817 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 04:51:55.688929 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 04:51:55.688956 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 04:51:55.688960 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 04:51:55.688963 [INFO] start to build docker image
2024/02/01 04:51:55.688979 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 04:51:55.938443 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 04:51:55.938466 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 04:51:55.938470 [INFO] successfully build docker image
2024/02/01 04:51:55.938472 [INFO] save staging docker image id
2024/02/01 04:51:55.938488 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 04:51:55.959964 [INFO] c176d18fbf65

2024/02/01 04:51:55.960206 [INFO] Executing instruction: configure X-Ray
2024/02/01 04:51:55.960214 [INFO] X-Ray is not enabled.
2024/02/01 04:51:55.960218 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 04:51:55.965102 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 04:51:55.967040 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 04:51:55.981244 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 04:51:55.981278 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 04:51:55.994056 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 04:51:56.015253 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 04:51:56.031267 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 04:51:56.121408 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 04:51:56.398001 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 04:51:56.398085 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 04:51:56.695799 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 04:51:56.707854 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 04:51:57.080506 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 04:51:57.105856 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 04:51:57.118699 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 04:51:57.475826 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 04:51:57.485649 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 04:51:57.849501 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 04:51:57.849539 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 04:51:57.864305 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 04:51:57.874450 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 04:51:57.956074 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 04:51:57.956903 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 04:51:57.957696 [INFO] Executing instruction: configure log streaming
2024/02/01 04:51:57.957706 [INFO] log streaming is not enabled
2024/02/01 04:51:57.957710 [INFO] disable log stream
2024/02/01 04:51:57.957729 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 04:51:57.983453 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 04:51:58.031753 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 04:51:58.031779 [INFO] Checking if logs need forced rotation
2024/02/01 04:51:58.031800 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 04:51:58.659232 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 04:51:59.080420 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 04:51:59.082174 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 04:51:59.681634 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 04:51:59.699450 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 04:51:59.699503 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 04:51:59.699514 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 04:52:00.350782 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 04:52:00.350807 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 04:52:00.350828 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 04:52:00.350831 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 04:52:00.350852 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 04:52:00.350866 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 04:52:00.350870 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 04:52:00.350875 [INFO] Executing instruction: stop X-Ray
2024/02/01 04:52:00.350878 [INFO] stop X-Ray ...
2024/02/01 04:52:00.350888 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 04:52:00.373011 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 04:52:00.373092 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 04:52:00.393290 [INFO] Executing instruction: Run Docker Container
2024/02/01 04:52:00.393319 [INFO] stop currently running containers...
2024/02/01 04:52:00.393328 [INFO] detected old app is not docker compose app
2024/02/01 04:52:00.393340 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 04:52:00.442461 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 04:52:00.462653 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 04:52:00.462688 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 04:52:00.476822 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 04:52:00.476858 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 04:52:00.491704 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 04:52:00.492038 [INFO] stopping current container: 724bb7b8dade
2024/02/01 04:52:00.492058 [INFO] Running command /bin/sh -c docker ps | grep -q 724bb7b8dade
2024/02/01 04:52:00.515430 [INFO] Running command /bin/sh -c docker ps | grep -q 724bb7b8dade
2024/02/01 04:52:00.542604 [INFO] Pruning containers ...
2024/02/01 04:52:00.542627 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 04:52:00.562256 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 04:52:00.562292 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 04:52:00.582522 [INFO] Total reclaimed space: 0B

2024/02/01 04:52:00.582553 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 04:52:00.601339 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 04:52:00.601413 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 04:52:00.622246 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 04:52:00.622266 [INFO] Removing /var/app/current/ if it exists
2024/02/01 04:52:00.622370 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 04:52:00.622389 [INFO] detected new app is not docker compose app
2024/02/01 04:52:00.622443 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 04:52:01.003856 [INFO] 7d1a42cf34bea57e9549b52e174d054c662e84639e2073c3aa8d17c587e482cf

2024/02/01 04:52:06.004300 [INFO] Running command /bin/sh -c docker ps | grep -q 7d1a42cf34be
2024/02/01 04:52:06.036680 [ERROR] docker container quit unexpectedly on 2024-02-01 04:52:06.036669992 +0000 UTC: Command /bin/sh -c docker ps | grep -q 7d1a42cf34be failed with error exit status 1
2024/02/01 04:52:06.036717 [INFO] Running command /bin/sh -c docker logs 7d1a42cf34be
2024/02/01 04:52:06.058184 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 7d1a42cf34be: Command /bin/sh -c docker ps | grep -q 7d1a42cf34be failed with error exit status 1 

2024/02/01 04:52:06.058199 [INFO] Executing cleanup logic
2024/02/01 04:52:06.058559 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 05:52:07.120907 [INFO] Starting...
2024/02/01 05:52:07.120949 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 05:52:07.120975 [INFO] reading event message file
2024/02/01 05:52:07.121761 [INFO] Engine received EB command userdata-exec

2024/02/01 05:52:07.129646 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 05:52:07.589083 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 05:52:08.049643 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 05:52:08.049749 [INFO] Engine command: (self-startup)

2024/02/01 05:52:08.049759 [INFO] Downloading EB Application...
2024/02/01 05:52:08.049762 [INFO] Region: eu-west-1
2024/02/01 05:52:08.049764 [INFO] envID: e-8gmkc7rmw6
2024/02/01 05:52:08.049774 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 05:52:08.049777 [INFO] Using manifest file name from command request
2024/02/01 05:52:08.049791 [INFO] Unable to get version manifest file.
2024/02/01 05:52:08.049794 [INFO] Downloading latest manifest available.
2024/02/01 05:52:08.049796 [INFO] Download latest app version manifest
2024/02/01 05:52:08.049942 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 05:52:08.091548 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 05:52:08.091796 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 05:52:08.103769 [INFO] Download successful124bytes downloaded
2024/02/01 05:52:08.103929 [INFO] Trying to read and parse version manifest...
2024/02/01 05:52:08.104004 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 05:52:08.128505 [INFO] Download successful264bytes downloaded
2024/02/01 05:52:08.128807 [INFO] Executing instruction: SyncClock
2024/02/01 05:52:08.128812 [INFO] Starting SyncClock
2024/02/01 05:52:08.128822 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 05:52:08.136649 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 05:51:51 2024
System time     : 0.000001623 seconds fast of NTP time
Last offset     : +0.000000732 seconds
RMS offset      : 0.000003943 seconds
Frequency       : 0.542 ppm fast
Residual freq   : +0.004 ppm
Skew            : 0.283 ppm
Root delay      : 0.000444942 seconds
Root dispersion : 0.000461624 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/01 05:52:08.136711 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 05:52:08.143163 [INFO] 200 OK

2024/02/01 05:52:08.143281 [INFO] Skipping Configure OS
2024/02/01 05:52:08.143288 [INFO] Skipping LockRepo
2024/02/01 05:52:08.143292 [INFO] Skipping GenerateEBBanner
2024/02/01 05:52:08.143297 [INFO] Skipping Install Process Manager
2024/02/01 05:52:08.143384 [INFO] Skipping install syslog
2024/02/01 05:52:08.143390 [INFO] Skipping install cron
2024/02/01 05:52:08.143394 [INFO] Skipping install proxy
2024/02/01 05:52:08.143398 [INFO] Skipping installhealthd
2024/02/01 05:52:08.143402 [INFO] Skipping Install Log Streaming Manager
2024/02/01 05:52:08.143474 [INFO] Skipping install X-Ray
2024/02/01 05:52:08.143480 [INFO] Skipping install Third Party License
2024/02/01 05:52:08.143486 [INFO] Skipping installSqsd
2024/02/01 05:52:08.143489 [INFO] Skipping bootstraphealthd
2024/02/01 05:52:08.143493 [INFO] Skipping Install yum packages
2024/02/01 05:52:08.143497 [INFO] Skipping install docker-compose
2024/02/01 05:52:08.143501 [INFO] Skipping Configure Docker Daemon
2024/02/01 05:52:08.143510 [INFO] Skipping MarkBaked
2024/02/01 05:52:08.143515 [INFO] Skipping TuneSystemSettings
2024/02/01 05:52:08.143518 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 05:52:08.143521 [INFO] Initialize LogRotate files and directories
2024/02/01 05:52:08.157834 [INFO] Skipping BootstrapCFNHup
2024/02/01 05:52:08.157846 [INFO] Executing instruction: StartCFNHup
2024/02/01 05:52:08.157849 [INFO] Start cfn-hup
2024/02/01 05:52:08.157889 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 05:52:08.180123 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 05:52:08.193714 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 05:52:08.196174 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 05:52:08.196188 [INFO] Executing instruction: Start Docker
2024/02/01 05:52:08.196193 [INFO] Starting Docker...
2024/02/01 05:52:08.196250 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 05:52:08.197487 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 05:52:08.198579 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 05:52:08.637636 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 05:52:08.655536 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 05:52:08.655569 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 05:52:08.666108 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 05:52:08.676451 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 05:52:08.690700 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 05:52:08.763490 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 05:52:08.763531 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 05:52:09.108450 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 05:52:09.510476 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 05:52:09.526881 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 05:52:09.894959 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 05:52:09.906675 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 05:52:09.921154 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 05:52:09.931186 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 05:52:11.140683 [INFO] Skipping Setup Docker Options
2024/02/01 05:52:11.140711 [INFO] Skipping MarkBootstrapped
2024/02/01 05:52:11.140715 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 05:52:11.140838 [INFO] Starting SwitchCFNStack
2024/02/01 05:52:11.140844 [INFO] Executing instruction: stopSqsd
2024/02/01 05:52:11.140848 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 05:52:11.140852 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 05:52:11.140859 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 05:52:11.140880 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 05:52:11.653604 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 05:52:11.653625 [INFO] Executing instruction: StagedockerApplication
2024/02/01 05:52:11.653635 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 05:52:11.683313 [INFO] Pruning containers ...
2024/02/01 05:52:11.683343 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 05:52:11.719744 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
7d1a42cf34be   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             cool_bose

2024/02/01 05:52:11.719773 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 05:52:11.743220 [INFO] Deleted Containers:
7d1a42cf34bea57e9549b52e174d054c662e84639e2073c3aa8d17c587e482cf

Total reclaimed space: 0B

2024/02/01 05:52:11.743253 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 05:52:11.761349 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 05:52:11.761781 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 05:52:11.765063 [INFO] application/json

2024/02/01 05:52:11.765079 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 05:52:11.835794 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/01 05:52:11.835964 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 05:52:11.837101 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 05:52:11.837121 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 05:52:11.837137 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 05:52:11.837146 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 05:52:11.837151 [INFO] Executing instruction: Generate environment file
2024/02/01 05:52:11.837176 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 05:52:11.837179 [INFO] start build docker app
2024/02/01 05:52:11.837711 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 05:52:11.837715 [INFO] fetching image and ports
2024/02/01 05:52:11.839236 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 05:52:11.839286 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 05:52:11.839300 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 05:52:11.839310 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 05:52:12.814106 [INFO] Login Succeeded

2024/02/01 05:52:12.814122 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 05:52:12.814130 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 05:52:12.814151 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 05:52:12.971797 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 05:52:12.971831 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 05:52:12.971835 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 05:52:12.971837 [INFO] start to build docker image
2024/02/01 05:52:12.971856 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 05:52:13.282023 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 05:52:13.282045 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 05:52:13.282049 [INFO] successfully build docker image
2024/02/01 05:52:13.282051 [INFO] save staging docker image id
2024/02/01 05:52:13.282063 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 05:52:13.302159 [INFO] c176d18fbf65

2024/02/01 05:52:13.302302 [INFO] Executing instruction: configure X-Ray
2024/02/01 05:52:13.302308 [INFO] X-Ray is not enabled.
2024/02/01 05:52:13.302311 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 05:52:13.307147 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 05:52:13.308683 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 05:52:13.320716 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 05:52:13.320746 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 05:52:13.331866 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 05:52:13.343138 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 05:52:13.353595 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 05:52:13.438089 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 05:52:13.777964 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 05:52:13.778144 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 05:52:14.154314 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 05:52:14.168849 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 05:52:14.552061 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 05:52:14.562796 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 05:52:14.572715 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 05:52:14.924986 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 05:52:14.951501 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 05:52:15.279495 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 05:52:15.279537 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 05:52:15.300724 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 05:52:15.310482 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 05:52:15.385315 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 05:52:15.386349 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 05:52:15.387329 [INFO] Executing instruction: configure log streaming
2024/02/01 05:52:15.387340 [INFO] log streaming is not enabled
2024/02/01 05:52:15.387344 [INFO] disable log stream
2024/02/01 05:52:15.387365 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 05:52:15.413596 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 05:52:15.434347 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 05:52:15.434676 [INFO] Checking if logs need forced rotation
2024/02/01 05:52:15.434700 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 05:52:16.058852 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 05:52:16.484540 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 05:52:16.486011 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 05:52:16.578563 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 05:52:16.600169 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 05:52:16.600186 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 05:52:16.600197 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 05:52:17.056254 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 05:52:17.056279 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 05:52:17.056303 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 05:52:17.056306 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 05:52:17.056329 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 05:52:17.056342 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 05:52:17.056345 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 05:52:17.056349 [INFO] Executing instruction: stop X-Ray
2024/02/01 05:52:17.056352 [INFO] stop X-Ray ...
2024/02/01 05:52:17.056362 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 05:52:17.074871 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 05:52:17.074929 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 05:52:17.094569 [INFO] Executing instruction: Run Docker Container
2024/02/01 05:52:17.094600 [INFO] stop currently running containers...
2024/02/01 05:52:17.094621 [INFO] detected old app is not docker compose app
2024/02/01 05:52:17.094636 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 05:52:17.152326 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 05:52:17.167574 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 05:52:17.167608 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 05:52:17.181524 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 05:52:17.181557 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 05:52:17.196339 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 05:52:17.196390 [INFO] stopping current container: 7d1a42cf34be
2024/02/01 05:52:17.196405 [INFO] Running command /bin/sh -c docker ps | grep -q 7d1a42cf34be
2024/02/01 05:52:17.215539 [INFO] Running command /bin/sh -c docker ps | grep -q 7d1a42cf34be
2024/02/01 05:52:17.234328 [INFO] Pruning containers ...
2024/02/01 05:52:17.234349 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 05:52:17.252259 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 05:52:17.252292 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 05:52:17.271951 [INFO] Total reclaimed space: 0B

2024/02/01 05:52:17.271975 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 05:52:17.305487 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 05:52:17.305523 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 05:52:17.331598 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 05:52:17.331623 [INFO] Removing /var/app/current/ if it exists
2024/02/01 05:52:17.331732 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 05:52:17.331754 [INFO] detected new app is not docker compose app
2024/02/01 05:52:17.331812 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 05:52:17.771323 [INFO] d2039a77ae62dcc291e5a313c1a408491574ddd6020bf3ded2326ab135a873d2

2024/02/01 05:52:22.771826 [INFO] Running command /bin/sh -c docker ps | grep -q d2039a77ae62
2024/02/01 05:52:22.797339 [ERROR] docker container quit unexpectedly on 2024-02-01 05:52:22.797328098 +0000 UTC: Command /bin/sh -c docker ps | grep -q d2039a77ae62 failed with error exit status 1
2024/02/01 05:52:22.797446 [INFO] Running command /bin/sh -c docker logs d2039a77ae62
2024/02/01 05:52:22.825292 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container d2039a77ae62: Command /bin/sh -c docker ps | grep -q d2039a77ae62 failed with error exit status 1 

2024/02/01 05:52:22.825302 [INFO] Executing cleanup logic
2024/02/01 05:52:22.825630 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 06:52:23.740529 [INFO] Starting...
2024/02/01 06:52:23.740571 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 06:52:23.740599 [INFO] reading event message file
2024/02/01 06:52:23.741430 [INFO] Engine received EB command userdata-exec

2024/02/01 06:52:23.747436 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 06:52:24.174961 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 06:52:24.687065 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 06:52:24.687146 [INFO] Engine command: (self-startup)

2024/02/01 06:52:24.687152 [INFO] Downloading EB Application...
2024/02/01 06:52:24.687155 [INFO] Region: eu-west-1
2024/02/01 06:52:24.687157 [INFO] envID: e-8gmkc7rmw6
2024/02/01 06:52:24.687160 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 06:52:24.687163 [INFO] Using manifest file name from command request
2024/02/01 06:52:24.687178 [INFO] Unable to get version manifest file.
2024/02/01 06:52:24.687181 [INFO] Downloading latest manifest available.
2024/02/01 06:52:24.687183 [INFO] Download latest app version manifest
2024/02/01 06:52:24.687394 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 06:52:24.734018 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 06:52:24.734204 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 06:52:24.745346 [INFO] Download successful124bytes downloaded
2024/02/01 06:52:24.745482 [INFO] Trying to read and parse version manifest...
2024/02/01 06:52:24.745565 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 06:52:24.765829 [INFO] Download successful264bytes downloaded
2024/02/01 06:52:24.766178 [INFO] Executing instruction: SyncClock
2024/02/01 06:52:24.766185 [INFO] Starting SyncClock
2024/02/01 06:52:24.766196 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 06:52:24.782067 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 06:52:14 2024
System time     : 0.000004177 seconds fast of NTP time
Last offset     : +0.000017873 seconds
RMS offset      : 0.000005757 seconds
Frequency       : 0.908 ppm fast
Residual freq   : +0.092 ppm
Skew            : 0.052 ppm
Root delay      : 0.000447937 seconds
Root dispersion : 0.000415078 seconds
Update interval : 48.6 seconds
Leap status     : Normal

2024/02/01 06:52:24.782098 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 06:52:24.787464 [INFO] 200 OK

2024/02/01 06:52:24.787586 [INFO] Skipping Configure OS
2024/02/01 06:52:24.787597 [INFO] Skipping LockRepo
2024/02/01 06:52:24.787603 [INFO] Skipping GenerateEBBanner
2024/02/01 06:52:24.787608 [INFO] Skipping Install Process Manager
2024/02/01 06:52:24.787612 [INFO] Skipping install syslog
2024/02/01 06:52:24.787617 [INFO] Skipping install cron
2024/02/01 06:52:24.787620 [INFO] Skipping install proxy
2024/02/01 06:52:24.787624 [INFO] Skipping installhealthd
2024/02/01 06:52:24.787629 [INFO] Skipping Install Log Streaming Manager
2024/02/01 06:52:24.787675 [INFO] Skipping install X-Ray
2024/02/01 06:52:24.787681 [INFO] Skipping install Third Party License
2024/02/01 06:52:24.787688 [INFO] Skipping installSqsd
2024/02/01 06:52:24.787694 [INFO] Skipping bootstraphealthd
2024/02/01 06:52:24.787699 [INFO] Skipping Install yum packages
2024/02/01 06:52:24.787703 [INFO] Skipping install docker-compose
2024/02/01 06:52:24.787707 [INFO] Skipping Configure Docker Daemon
2024/02/01 06:52:24.787711 [INFO] Skipping MarkBaked
2024/02/01 06:52:24.787715 [INFO] Skipping TuneSystemSettings
2024/02/01 06:52:24.787718 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 06:52:24.787721 [INFO] Initialize LogRotate files and directories
2024/02/01 06:52:24.802731 [INFO] Skipping BootstrapCFNHup
2024/02/01 06:52:24.802743 [INFO] Executing instruction: StartCFNHup
2024/02/01 06:52:24.802746 [INFO] Start cfn-hup
2024/02/01 06:52:24.802766 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 06:52:24.818780 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 06:52:24.831599 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 06:52:24.831670 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 06:52:24.831674 [INFO] Executing instruction: Start Docker
2024/02/01 06:52:24.831678 [INFO] Starting Docker...
2024/02/01 06:52:24.831873 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 06:52:24.833129 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 06:52:24.834411 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 06:52:25.132378 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 06:52:25.150136 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 06:52:25.150171 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 06:52:25.173678 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 06:52:25.188017 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 06:52:25.212206 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 06:52:25.328291 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 06:52:25.328358 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 06:52:25.653083 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 06:52:25.980503 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 06:52:25.997601 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 06:52:26.323716 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 06:52:26.333337 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 06:52:26.347767 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 06:52:26.358112 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 06:52:27.551086 [INFO] Skipping Setup Docker Options
2024/02/01 06:52:27.551116 [INFO] Skipping MarkBootstrapped
2024/02/01 06:52:27.551120 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 06:52:27.551252 [INFO] Starting SwitchCFNStack
2024/02/01 06:52:27.551258 [INFO] Executing instruction: stopSqsd
2024/02/01 06:52:27.551262 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 06:52:27.551266 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 06:52:27.551270 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 06:52:27.551297 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 06:52:27.963769 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 06:52:27.963794 [INFO] Executing instruction: StagedockerApplication
2024/02/01 06:52:27.963805 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 06:52:27.991597 [INFO] Pruning containers ...
2024/02/01 06:52:27.991627 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 06:52:28.019372 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
d2039a77ae62   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             agitated_mendeleev

2024/02/01 06:52:28.019402 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 06:52:28.047485 [INFO] Deleted Containers:
d2039a77ae62dcc291e5a313c1a408491574ddd6020bf3ded2326ab135a873d2

Total reclaimed space: 0B

2024/02/01 06:52:28.047513 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 06:52:28.069367 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 06:52:28.069628 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 06:52:28.072631 [INFO] application/json

2024/02/01 06:52:28.072657 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 06:52:28.144367 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 06:52:28.144559 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 06:52:28.145768 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 06:52:28.145802 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 06:52:28.145816 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 06:52:28.145818 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 06:52:28.145823 [INFO] Executing instruction: Generate environment file
2024/02/01 06:52:28.145853 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 06:52:28.145857 [INFO] start build docker app
2024/02/01 06:52:28.146210 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 06:52:28.146213 [INFO] fetching image and ports
2024/02/01 06:52:28.147960 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 06:52:28.148078 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 06:52:28.148088 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 06:52:28.148102 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 06:52:29.107004 [INFO] Login Succeeded

2024/02/01 06:52:29.107021 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 06:52:29.107027 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 06:52:29.107051 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 06:52:29.269222 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 06:52:29.269240 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 06:52:29.269243 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 06:52:29.269246 [INFO] start to build docker image
2024/02/01 06:52:29.269261 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 06:52:29.522369 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 06:52:29.522386 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 06:52:29.522390 [INFO] successfully build docker image
2024/02/01 06:52:29.522392 [INFO] save staging docker image id
2024/02/01 06:52:29.522404 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 06:52:29.543974 [INFO] c176d18fbf65

2024/02/01 06:52:29.544104 [INFO] Executing instruction: configure X-Ray
2024/02/01 06:52:29.544113 [INFO] X-Ray is not enabled.
2024/02/01 06:52:29.544116 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 06:52:29.549335 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 06:52:29.550785 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 06:52:29.568269 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 06:52:29.568299 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 06:52:29.578570 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 06:52:29.587833 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 06:52:29.597242 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 06:52:29.667553 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 06:52:30.013659 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 06:52:30.013741 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 06:52:30.335918 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 06:52:30.352156 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 06:52:30.661630 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 06:52:30.670457 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 06:52:30.681259 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 06:52:31.012047 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 06:52:31.021744 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 06:52:31.342735 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 06:52:31.342771 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 06:52:31.355274 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 06:52:31.364716 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 06:52:31.451653 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 06:52:31.452597 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 06:52:31.453625 [INFO] Executing instruction: configure log streaming
2024/02/01 06:52:31.453635 [INFO] log streaming is not enabled
2024/02/01 06:52:31.453639 [INFO] disable log stream
2024/02/01 06:52:31.453823 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 06:52:31.474152 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 06:52:31.495859 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 06:52:31.495885 [INFO] Checking if logs need forced rotation
2024/02/01 06:52:31.495904 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 06:52:32.093910 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 06:52:32.555604 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 06:52:32.557262 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 06:52:32.639528 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 06:52:32.657531 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 06:52:32.657547 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 06:52:32.657562 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 06:52:33.113801 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 06:52:33.113824 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 06:52:33.113853 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 06:52:33.113857 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 06:52:33.113877 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 06:52:33.113888 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 06:52:33.113890 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 06:52:33.113895 [INFO] Executing instruction: stop X-Ray
2024/02/01 06:52:33.113898 [INFO] stop X-Ray ...
2024/02/01 06:52:33.113908 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 06:52:33.127575 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 06:52:33.127607 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 06:52:33.149129 [INFO] Executing instruction: Run Docker Container
2024/02/01 06:52:33.149171 [INFO] stop currently running containers...
2024/02/01 06:52:33.149183 [INFO] detected old app is not docker compose app
2024/02/01 06:52:33.149199 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 06:52:33.192361 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 06:52:33.207677 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 06:52:33.207763 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 06:52:33.221456 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 06:52:33.221488 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 06:52:33.250885 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 06:52:33.250936 [INFO] stopping current container: d2039a77ae62
2024/02/01 06:52:33.250949 [INFO] Running command /bin/sh -c docker ps | grep -q d2039a77ae62
2024/02/01 06:52:33.300315 [INFO] Running command /bin/sh -c docker ps | grep -q d2039a77ae62
2024/02/01 06:52:33.319505 [INFO] Pruning containers ...
2024/02/01 06:52:33.319532 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 06:52:33.337558 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 06:52:33.337591 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 06:52:33.358395 [INFO] Total reclaimed space: 0B

2024/02/01 06:52:33.358418 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 06:52:33.383849 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 06:52:33.383878 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 06:52:33.411191 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 06:52:33.411215 [INFO] Removing /var/app/current/ if it exists
2024/02/01 06:52:33.411327 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 06:52:33.411344 [INFO] detected new app is not docker compose app
2024/02/01 06:52:33.411415 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 06:52:33.819378 [INFO] 48cb8e9ba1304849280db8cf62159f911403f134ff59305594f9b62c423bd13d

2024/02/01 06:52:38.823809 [INFO] Running command /bin/sh -c docker ps | grep -q 48cb8e9ba130
2024/02/01 06:52:38.846648 [ERROR] docker container quit unexpectedly on 2024-02-01 06:52:38.846636938 +0000 UTC: Command /bin/sh -c docker ps | grep -q 48cb8e9ba130 failed with error exit status 1
2024/02/01 06:52:38.846681 [INFO] Running command /bin/sh -c docker logs 48cb8e9ba130
2024/02/01 06:52:38.871181 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 48cb8e9ba130: Command /bin/sh -c docker ps | grep -q 48cb8e9ba130 failed with error exit status 1 

2024/02/01 06:52:38.871190 [INFO] Executing cleanup logic
2024/02/01 06:52:38.871589 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 07:52:39.843649 [INFO] Starting...
2024/02/01 07:52:39.843690 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 07:52:39.843718 [INFO] reading event message file
2024/02/01 07:52:39.844473 [INFO] Engine received EB command userdata-exec

2024/02/01 07:52:39.850810 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 07:52:40.319491 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 07:52:40.806006 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 07:52:40.806092 [INFO] Engine command: (self-startup)

2024/02/01 07:52:40.806099 [INFO] Downloading EB Application...
2024/02/01 07:52:40.806102 [INFO] Region: eu-west-1
2024/02/01 07:52:40.806106 [INFO] envID: e-8gmkc7rmw6
2024/02/01 07:52:40.806109 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 07:52:40.806113 [INFO] Using manifest file name from command request
2024/02/01 07:52:40.806127 [INFO] Unable to get version manifest file.
2024/02/01 07:52:40.806130 [INFO] Downloading latest manifest available.
2024/02/01 07:52:40.806133 [INFO] Download latest app version manifest
2024/02/01 07:52:40.806246 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 07:52:40.841674 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 07:52:40.841855 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 07:52:40.853139 [INFO] Download successful124bytes downloaded
2024/02/01 07:52:40.853275 [INFO] Trying to read and parse version manifest...
2024/02/01 07:52:40.853352 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 07:52:40.873636 [INFO] Download successful264bytes downloaded
2024/02/01 07:52:40.873997 [INFO] Executing instruction: SyncClock
2024/02/01 07:52:40.874004 [INFO] Starting SyncClock
2024/02/01 07:52:40.874015 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 07:52:40.879958 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 07:52:38 2024
System time     : 0.000001289 seconds fast of NTP time
Last offset     : +0.000002153 seconds
RMS offset      : 0.000006481 seconds
Frequency       : 0.758 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.099 ppm
Root delay      : 0.000424007 seconds
Root dispersion : 0.000423046 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/01 07:52:40.879976 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 07:52:40.884820 [INFO] 200 OK

2024/02/01 07:52:40.884912 [INFO] Skipping Configure OS
2024/02/01 07:52:40.884917 [INFO] Skipping LockRepo
2024/02/01 07:52:40.884921 [INFO] Skipping GenerateEBBanner
2024/02/01 07:52:40.884925 [INFO] Skipping Install Process Manager
2024/02/01 07:52:40.884929 [INFO] Skipping install syslog
2024/02/01 07:52:40.884997 [INFO] Skipping install cron
2024/02/01 07:52:40.885004 [INFO] Skipping install proxy
2024/02/01 07:52:40.885015 [INFO] Skipping installhealthd
2024/02/01 07:52:40.885019 [INFO] Skipping Install Log Streaming Manager
2024/02/01 07:52:40.885023 [INFO] Skipping install X-Ray
2024/02/01 07:52:40.885027 [INFO] Skipping install Third Party License
2024/02/01 07:52:40.885032 [INFO] Skipping installSqsd
2024/02/01 07:52:40.885036 [INFO] Skipping bootstraphealthd
2024/02/01 07:52:40.885040 [INFO] Skipping Install yum packages
2024/02/01 07:52:40.885049 [INFO] Skipping install docker-compose
2024/02/01 07:52:40.885053 [INFO] Skipping Configure Docker Daemon
2024/02/01 07:52:40.885057 [INFO] Skipping MarkBaked
2024/02/01 07:52:40.885063 [INFO] Skipping TuneSystemSettings
2024/02/01 07:52:40.885065 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 07:52:40.885068 [INFO] Initialize LogRotate files and directories
2024/02/01 07:52:40.898811 [INFO] Skipping BootstrapCFNHup
2024/02/01 07:52:40.898819 [INFO] Executing instruction: StartCFNHup
2024/02/01 07:52:40.898822 [INFO] Start cfn-hup
2024/02/01 07:52:40.898842 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 07:52:40.913284 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 07:52:40.923742 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 07:52:40.923776 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 07:52:40.923780 [INFO] Executing instruction: Start Docker
2024/02/01 07:52:40.923783 [INFO] Starting Docker...
2024/02/01 07:52:40.923869 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 07:52:40.925061 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 07:52:40.926100 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 07:52:41.390648 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 07:52:41.409035 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 07:52:41.409071 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 07:52:41.424338 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 07:52:41.441234 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 07:52:41.457892 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 07:52:41.519016 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 07:52:41.519066 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 07:52:41.860665 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 07:52:42.182780 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 07:52:42.194630 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 07:52:42.520685 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 07:52:42.529720 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 07:52:42.548024 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 07:52:42.557588 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 07:52:43.757161 [INFO] Skipping Setup Docker Options
2024/02/01 07:52:43.757180 [INFO] Skipping MarkBootstrapped
2024/02/01 07:52:43.757183 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 07:52:43.757266 [INFO] Starting SwitchCFNStack
2024/02/01 07:52:43.757271 [INFO] Executing instruction: stopSqsd
2024/02/01 07:52:43.757273 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 07:52:43.757280 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 07:52:43.757283 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 07:52:43.757297 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 07:52:44.334718 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 07:52:44.334772 [INFO] Executing instruction: StagedockerApplication
2024/02/01 07:52:44.334785 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 07:52:44.354854 [INFO] Pruning containers ...
2024/02/01 07:52:44.354908 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 07:52:44.375305 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
48cb8e9ba130   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             peaceful_kepler

2024/02/01 07:52:44.375331 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 07:52:44.404548 [INFO] Deleted Containers:
48cb8e9ba1304849280db8cf62159f911403f134ff59305594f9b62c423bd13d

Total reclaimed space: 0B

2024/02/01 07:52:44.404569 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 07:52:44.427486 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 07:52:44.427739 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 07:52:44.432744 [INFO] application/json

2024/02/01 07:52:44.432768 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 07:52:44.504491 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/01 07:52:44.504661 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 07:52:44.506153 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 07:52:44.506180 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 07:52:44.506195 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 07:52:44.506198 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 07:52:44.506202 [INFO] Executing instruction: Generate environment file
2024/02/01 07:52:44.506229 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 07:52:44.506232 [INFO] start build docker app
2024/02/01 07:52:44.506637 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 07:52:44.506640 [INFO] fetching image and ports
2024/02/01 07:52:44.508277 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 07:52:44.508330 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 07:52:44.508341 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 07:52:44.508353 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 07:52:45.462708 [INFO] Login Succeeded

2024/02/01 07:52:45.464460 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 07:52:45.464479 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 07:52:45.464497 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 07:52:45.605733 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 07:52:45.605768 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 07:52:45.605772 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 07:52:45.605776 [INFO] start to build docker image
2024/02/01 07:52:45.605792 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 07:52:45.881614 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 07:52:45.881632 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 07:52:45.881637 [INFO] successfully build docker image
2024/02/01 07:52:45.881640 [INFO] save staging docker image id
2024/02/01 07:52:45.881655 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 07:52:45.902801 [INFO] c176d18fbf65

2024/02/01 07:52:45.902916 [INFO] Executing instruction: configure X-Ray
2024/02/01 07:52:45.902921 [INFO] X-Ray is not enabled.
2024/02/01 07:52:45.902923 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 07:52:45.908748 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 07:52:45.910563 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 07:52:45.923875 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 07:52:45.923904 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 07:52:45.934083 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 07:52:45.942785 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 07:52:45.959808 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 07:52:46.007485 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 07:52:46.395773 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 07:52:46.396038 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 07:52:46.769232 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 07:52:46.781599 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 07:52:47.114938 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 07:52:47.123591 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 07:52:47.132356 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 07:52:47.473187 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 07:52:47.483580 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 07:52:47.889506 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 07:52:47.889544 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 07:52:47.902506 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 07:52:47.922130 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 07:52:48.020057 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 07:52:48.020938 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 07:52:48.021793 [INFO] Executing instruction: configure log streaming
2024/02/01 07:52:48.021805 [INFO] log streaming is not enabled
2024/02/01 07:52:48.021809 [INFO] disable log stream
2024/02/01 07:52:48.021823 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 07:52:48.044666 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 07:52:48.067076 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 07:52:48.067100 [INFO] Checking if logs need forced rotation
2024/02/01 07:52:48.067121 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 07:52:48.670441 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 07:52:49.176212 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 07:52:49.178115 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 07:52:49.628473 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 07:52:49.645055 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 07:52:49.645072 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 07:52:49.645086 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 07:52:50.026874 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 07:52:50.027477 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 07:52:50.027672 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 07:52:50.027756 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 07:52:50.027994 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 07:52:50.028020 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 07:52:50.028024 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 07:52:50.028032 [INFO] Executing instruction: stop X-Ray
2024/02/01 07:52:50.028035 [INFO] stop X-Ray ...
2024/02/01 07:52:50.028046 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 07:52:50.049549 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 07:52:50.049594 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 07:52:50.067083 [INFO] Executing instruction: Run Docker Container
2024/02/01 07:52:50.067115 [INFO] stop currently running containers...
2024/02/01 07:52:50.067127 [INFO] detected old app is not docker compose app
2024/02/01 07:52:50.067141 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 07:52:50.133360 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 07:52:50.151505 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 07:52:50.151571 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 07:52:50.165525 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 07:52:50.165562 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 07:52:50.179803 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 07:52:50.179861 [INFO] stopping current container: 48cb8e9ba130
2024/02/01 07:52:50.179874 [INFO] Running command /bin/sh -c docker ps | grep -q 48cb8e9ba130
2024/02/01 07:52:50.199843 [INFO] Running command /bin/sh -c docker ps | grep -q 48cb8e9ba130
2024/02/01 07:52:50.222514 [INFO] Pruning containers ...
2024/02/01 07:52:50.222542 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 07:52:50.244596 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 07:52:50.244625 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 07:52:50.265969 [INFO] Total reclaimed space: 0B

2024/02/01 07:52:50.266009 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 07:52:50.285080 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 07:52:50.285123 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 07:52:50.307037 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 07:52:50.307057 [INFO] Removing /var/app/current/ if it exists
2024/02/01 07:52:50.307153 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 07:52:50.307170 [INFO] detected new app is not docker compose app
2024/02/01 07:52:50.307217 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 07:52:50.831949 [INFO] 669e12296de8e61173105371494afc2a2f45ab1d20dc2d995e8b666695e05630

2024/02/01 07:52:55.836362 [INFO] Running command /bin/sh -c docker ps | grep -q 669e12296de8
2024/02/01 07:52:55.856950 [ERROR] docker container quit unexpectedly on 2024-02-01 07:52:55.856939428 +0000 UTC: Command /bin/sh -c docker ps | grep -q 669e12296de8 failed with error exit status 1
2024/02/01 07:52:55.856976 [INFO] Running command /bin/sh -c docker logs 669e12296de8
2024/02/01 07:52:55.886575 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 669e12296de8: Command /bin/sh -c docker ps | grep -q 669e12296de8 failed with error exit status 1 

2024/02/01 07:52:55.886585 [INFO] Executing cleanup logic
2024/02/01 07:52:55.886998 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 08:52:56.848577 [INFO] Starting...
2024/02/01 08:52:56.848623 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 08:52:56.848648 [INFO] reading event message file
2024/02/01 08:52:56.849441 [INFO] Engine received EB command userdata-exec

2024/02/01 08:52:56.855756 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 08:52:57.311728 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 08:52:57.749933 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 08:52:57.750018 [INFO] Engine command: (self-startup)

2024/02/01 08:52:57.750025 [INFO] Downloading EB Application...
2024/02/01 08:52:57.750028 [INFO] Region: eu-west-1
2024/02/01 08:52:57.750031 [INFO] envID: e-8gmkc7rmw6
2024/02/01 08:52:57.750035 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 08:52:57.750038 [INFO] Using manifest file name from command request
2024/02/01 08:52:57.750053 [INFO] Unable to get version manifest file.
2024/02/01 08:52:57.750056 [INFO] Downloading latest manifest available.
2024/02/01 08:52:57.750058 [INFO] Download latest app version manifest
2024/02/01 08:52:57.750189 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 08:52:57.803364 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 08:52:57.803554 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 08:52:57.828679 [INFO] Download successful124bytes downloaded
2024/02/01 08:52:57.828947 [INFO] Trying to read and parse version manifest...
2024/02/01 08:52:57.829034 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 08:52:57.871611 [INFO] Download successful264bytes downloaded
2024/02/01 08:52:57.872050 [INFO] Executing instruction: SyncClock
2024/02/01 08:52:57.872057 [INFO] Starting SyncClock
2024/02/01 08:52:57.872071 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 08:52:57.877105 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 08:52:45 2024
System time     : 0.000001403 seconds slow of NTP time
Last offset     : -0.000001986 seconds
RMS offset      : 0.000002098 seconds
Frequency       : 1.108 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.031 ppm
Root delay      : 0.000420482 seconds
Root dispersion : 0.000360508 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/01 08:52:57.877123 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 08:52:57.880844 [INFO] 200 OK

2024/02/01 08:52:57.880954 [INFO] Skipping Configure OS
2024/02/01 08:52:57.880963 [INFO] Skipping LockRepo
2024/02/01 08:52:57.880969 [INFO] Skipping GenerateEBBanner
2024/02/01 08:52:57.880974 [INFO] Skipping Install Process Manager
2024/02/01 08:52:57.880979 [INFO] Skipping install syslog
2024/02/01 08:52:57.880985 [INFO] Skipping install cron
2024/02/01 08:52:57.880990 [INFO] Skipping install proxy
2024/02/01 08:52:57.880996 [INFO] Skipping installhealthd
2024/02/01 08:52:57.881001 [INFO] Skipping Install Log Streaming Manager
2024/02/01 08:52:57.881007 [INFO] Skipping install X-Ray
2024/02/01 08:52:57.881013 [INFO] Skipping install Third Party License
2024/02/01 08:52:57.881053 [INFO] Skipping installSqsd
2024/02/01 08:52:57.881059 [INFO] Skipping bootstraphealthd
2024/02/01 08:52:57.881064 [INFO] Skipping Install yum packages
2024/02/01 08:52:57.881073 [INFO] Skipping install docker-compose
2024/02/01 08:52:57.881079 [INFO] Skipping Configure Docker Daemon
2024/02/01 08:52:57.881085 [INFO] Skipping MarkBaked
2024/02/01 08:52:57.881092 [INFO] Skipping TuneSystemSettings
2024/02/01 08:52:57.881095 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 08:52:57.881098 [INFO] Initialize LogRotate files and directories
2024/02/01 08:52:57.894326 [INFO] Skipping BootstrapCFNHup
2024/02/01 08:52:57.894337 [INFO] Executing instruction: StartCFNHup
2024/02/01 08:52:57.894340 [INFO] Start cfn-hup
2024/02/01 08:52:57.894357 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 08:52:57.907768 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 08:52:57.918079 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 08:52:57.918113 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 08:52:57.918117 [INFO] Executing instruction: Start Docker
2024/02/01 08:52:57.918121 [INFO] Starting Docker...
2024/02/01 08:52:57.918208 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 08:52:57.919327 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 08:52:57.920222 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 08:52:58.422100 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 08:52:58.444778 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 08:52:58.444813 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 08:52:58.459030 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 08:52:58.489900 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 08:52:58.503971 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 08:52:58.575627 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 08:52:58.575752 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 08:52:58.893050 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 08:52:59.197215 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 08:52:59.215233 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 08:52:59.511046 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 08:52:59.527509 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 08:52:59.541118 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 08:52:59.555607 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 08:53:01.000267 [INFO] Skipping Setup Docker Options
2024/02/01 08:53:01.000294 [INFO] Skipping MarkBootstrapped
2024/02/01 08:53:01.000298 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 08:53:01.000419 [INFO] Starting SwitchCFNStack
2024/02/01 08:53:01.000425 [INFO] Executing instruction: stopSqsd
2024/02/01 08:53:01.000429 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 08:53:01.000432 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 08:53:01.000436 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 08:53:01.000502 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 08:53:01.562031 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 08:53:01.562281 [INFO] Executing instruction: StagedockerApplication
2024/02/01 08:53:01.562378 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 08:53:01.582408 [INFO] Pruning containers ...
2024/02/01 08:53:01.582438 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 08:53:01.602193 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
669e12296de8   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             goofy_euler

2024/02/01 08:53:01.602225 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 08:53:01.627844 [INFO] Deleted Containers:
669e12296de8e61173105371494afc2a2f45ab1d20dc2d995e8b666695e05630

Total reclaimed space: 0B

2024/02/01 08:53:01.627869 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 08:53:01.679120 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 08:53:01.682910 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 08:53:01.693647 [INFO] application/json

2024/02/01 08:53:01.693683 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 08:53:01.890271 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 08:53:01.891319 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 08:53:01.894145 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 08:53:01.894366 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 08:53:01.894392 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 08:53:01.894396 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 08:53:01.894403 [INFO] Executing instruction: Generate environment file
2024/02/01 08:53:01.894578 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 08:53:01.894585 [INFO] start build docker app
2024/02/01 08:53:01.895768 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 08:53:01.895777 [INFO] fetching image and ports
2024/02/01 08:53:01.898808 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 08:53:01.899152 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 08:53:01.899162 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 08:53:01.899173 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 08:53:03.099528 [INFO] Login Succeeded

2024/02/01 08:53:03.099654 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 08:53:03.099733 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 08:53:03.099832 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 08:53:03.276881 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 08:53:03.276903 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 08:53:03.276907 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 08:53:03.276910 [INFO] start to build docker image
2024/02/01 08:53:03.276928 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 08:53:03.606827 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 08:53:03.606854 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 08:53:03.606857 [INFO] successfully build docker image
2024/02/01 08:53:03.606860 [INFO] save staging docker image id
2024/02/01 08:53:03.606872 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 08:53:03.675307 [INFO] c176d18fbf65

2024/02/01 08:53:03.677207 [INFO] Executing instruction: configure X-Ray
2024/02/01 08:53:03.677230 [INFO] X-Ray is not enabled.
2024/02/01 08:53:03.677234 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 08:53:03.682985 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 08:53:03.685246 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 08:53:03.699354 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 08:53:03.699387 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 08:53:03.728227 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 08:53:03.758100 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 08:53:03.790267 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 08:53:03.898436 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 08:53:04.283248 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 08:53:04.283481 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 08:53:04.557322 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 08:53:04.570393 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 08:53:04.891987 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 08:53:04.902870 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 08:53:04.912880 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 08:53:05.268651 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 08:53:05.279140 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 08:53:05.580138 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 08:53:05.580174 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 08:53:05.593656 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 08:53:05.603681 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 08:53:05.671574 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 08:53:05.672392 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 08:53:05.673298 [INFO] Executing instruction: configure log streaming
2024/02/01 08:53:05.673307 [INFO] log streaming is not enabled
2024/02/01 08:53:05.673311 [INFO] disable log stream
2024/02/01 08:53:05.673324 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 08:53:05.701780 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 08:53:05.724293 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 08:53:05.724331 [INFO] Checking if logs need forced rotation
2024/02/01 08:53:05.724352 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 08:53:06.284639 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 08:53:06.823792 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 08:53:06.825555 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 08:53:06.919482 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 08:53:06.937469 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 08:53:06.937488 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 08:53:06.937503 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 08:53:07.403309 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 08:53:07.403359 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 08:53:07.403385 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 08:53:07.403389 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 08:53:07.403413 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 08:53:07.403425 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 08:53:07.403428 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 08:53:07.403434 [INFO] Executing instruction: stop X-Ray
2024/02/01 08:53:07.403437 [INFO] stop X-Ray ...
2024/02/01 08:53:07.403451 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 08:53:07.417962 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 08:53:07.417995 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 08:53:07.434309 [INFO] Executing instruction: Run Docker Container
2024/02/01 08:53:07.434339 [INFO] stop currently running containers...
2024/02/01 08:53:07.434352 [INFO] detected old app is not docker compose app
2024/02/01 08:53:07.434364 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 08:53:07.472491 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 08:53:07.487543 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 08:53:07.487615 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 08:53:07.507676 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 08:53:07.507715 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 08:53:07.524566 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 08:53:07.524631 [INFO] stopping current container: 669e12296de8
2024/02/01 08:53:07.524644 [INFO] Running command /bin/sh -c docker ps | grep -q 669e12296de8
2024/02/01 08:53:07.545073 [INFO] Running command /bin/sh -c docker ps | grep -q 669e12296de8
2024/02/01 08:53:07.570224 [INFO] Pruning containers ...
2024/02/01 08:53:07.570248 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 08:53:07.590524 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 08:53:07.590558 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 08:53:07.611845 [INFO] Total reclaimed space: 0B

2024/02/01 08:53:07.611871 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 08:53:07.631190 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 08:53:07.631240 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 08:53:07.650981 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 08:53:07.651000 [INFO] Removing /var/app/current/ if it exists
2024/02/01 08:53:07.651088 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 08:53:07.651234 [INFO] detected new app is not docker compose app
2024/02/01 08:53:07.651299 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 08:53:08.085014 [INFO] 8bea55147082017c46b4c591051cad510f25ad504a162f817380ea52adb4831c

2024/02/01 08:53:13.089367 [INFO] Running command /bin/sh -c docker ps | grep -q 8bea55147082
2024/02/01 08:53:13.110714 [ERROR] docker container quit unexpectedly on 2024-02-01 08:53:13.110703241 +0000 UTC: Command /bin/sh -c docker ps | grep -q 8bea55147082 failed with error exit status 1
2024/02/01 08:53:13.110750 [INFO] Running command /bin/sh -c docker logs 8bea55147082
2024/02/01 08:53:13.136086 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 8bea55147082: Command /bin/sh -c docker ps | grep -q 8bea55147082 failed with error exit status 1 

2024/02/01 08:53:13.136096 [INFO] Executing cleanup logic
2024/02/01 08:53:13.136323 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 09:53:14.280153 [INFO] Starting...
2024/02/01 09:53:14.280195 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 09:53:14.280224 [INFO] reading event message file
2024/02/01 09:53:14.280944 [INFO] Engine received EB command userdata-exec

2024/02/01 09:53:14.286991 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 09:53:14.707293 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 09:53:15.184351 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 09:53:15.184456 [INFO] Engine command: (self-startup)

2024/02/01 09:53:15.184462 [INFO] Downloading EB Application...
2024/02/01 09:53:15.184466 [INFO] Region: eu-west-1
2024/02/01 09:53:15.184468 [INFO] envID: e-8gmkc7rmw6
2024/02/01 09:53:15.184470 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 09:53:15.184473 [INFO] Using manifest file name from command request
2024/02/01 09:53:15.184486 [INFO] Unable to get version manifest file.
2024/02/01 09:53:15.184488 [INFO] Downloading latest manifest available.
2024/02/01 09:53:15.184490 [INFO] Download latest app version manifest
2024/02/01 09:53:15.184607 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 09:53:15.225529 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 09:53:15.225717 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 09:53:15.236846 [INFO] Download successful124bytes downloaded
2024/02/01 09:53:15.237031 [INFO] Trying to read and parse version manifest...
2024/02/01 09:53:15.237112 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 09:53:15.260240 [INFO] Download successful264bytes downloaded
2024/02/01 09:53:15.260595 [INFO] Executing instruction: SyncClock
2024/02/01 09:53:15.260601 [INFO] Starting SyncClock
2024/02/01 09:53:15.260614 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 09:53:15.266886 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 09:53:06 2024
System time     : 0.000002040 seconds fast of NTP time
Last offset     : +0.000001512 seconds
RMS offset      : 0.000004976 seconds
Frequency       : 0.636 ppm fast
Residual freq   : +0.003 ppm
Skew            : 0.130 ppm
Root delay      : 0.000403689 seconds
Root dispersion : 0.000332065 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/01 09:53:15.266908 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 09:53:15.271016 [INFO] 200 OK

2024/02/01 09:53:15.271106 [INFO] Skipping Configure OS
2024/02/01 09:53:15.271111 [INFO] Skipping LockRepo
2024/02/01 09:53:15.271115 [INFO] Skipping GenerateEBBanner
2024/02/01 09:53:15.271119 [INFO] Skipping Install Process Manager
2024/02/01 09:53:15.271123 [INFO] Skipping install syslog
2024/02/01 09:53:15.271135 [INFO] Skipping install cron
2024/02/01 09:53:15.271139 [INFO] Skipping install proxy
2024/02/01 09:53:15.271142 [INFO] Skipping installhealthd
2024/02/01 09:53:15.271147 [INFO] Skipping Install Log Streaming Manager
2024/02/01 09:53:15.271151 [INFO] Skipping install X-Ray
2024/02/01 09:53:15.271155 [INFO] Skipping install Third Party License
2024/02/01 09:53:15.271159 [INFO] Skipping installSqsd
2024/02/01 09:53:15.271163 [INFO] Skipping bootstraphealthd
2024/02/01 09:53:15.271167 [INFO] Skipping Install yum packages
2024/02/01 09:53:15.271171 [INFO] Skipping install docker-compose
2024/02/01 09:53:15.271175 [INFO] Skipping Configure Docker Daemon
2024/02/01 09:53:15.271178 [INFO] Skipping MarkBaked
2024/02/01 09:53:15.271184 [INFO] Skipping TuneSystemSettings
2024/02/01 09:53:15.271186 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 09:53:15.271189 [INFO] Initialize LogRotate files and directories
2024/02/01 09:53:15.285542 [INFO] Skipping BootstrapCFNHup
2024/02/01 09:53:15.285551 [INFO] Executing instruction: StartCFNHup
2024/02/01 09:53:15.285554 [INFO] Start cfn-hup
2024/02/01 09:53:15.285571 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 09:53:15.298523 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 09:53:15.308586 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 09:53:15.308735 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 09:53:15.308740 [INFO] Executing instruction: Start Docker
2024/02/01 09:53:15.308743 [INFO] Starting Docker...
2024/02/01 09:53:15.308790 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 09:53:15.309822 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 09:53:15.310878 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 09:53:15.674881 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 09:53:15.691104 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 09:53:15.691138 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 09:53:15.703629 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 09:53:15.714382 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 09:53:15.726714 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 09:53:15.764485 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 09:53:15.764528 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 09:53:16.095197 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 09:53:16.495369 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 09:53:16.509474 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 09:53:16.810392 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 09:53:16.821017 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 09:53:16.834172 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 09:53:16.844014 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 09:53:17.991347 [INFO] Skipping Setup Docker Options
2024/02/01 09:53:17.991415 [INFO] Skipping MarkBootstrapped
2024/02/01 09:53:17.991423 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 09:53:17.991556 [INFO] Starting SwitchCFNStack
2024/02/01 09:53:17.991562 [INFO] Executing instruction: stopSqsd
2024/02/01 09:53:17.991566 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 09:53:17.991569 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 09:53:17.991576 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 09:53:17.991593 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 09:53:18.470081 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 09:53:18.470115 [INFO] Executing instruction: StagedockerApplication
2024/02/01 09:53:18.470130 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 09:53:18.508350 [INFO] Pruning containers ...
2024/02/01 09:53:18.508381 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 09:53:18.540483 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
8bea55147082   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             kind_pike

2024/02/01 09:53:18.540514 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 09:53:18.569819 [INFO] Deleted Containers:
8bea55147082017c46b4c591051cad510f25ad504a162f817380ea52adb4831c

Total reclaimed space: 0B

2024/02/01 09:53:18.571545 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 09:53:18.590819 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 09:53:18.591153 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 09:53:18.594001 [INFO] application/json

2024/02/01 09:53:18.594217 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 09:53:18.669154 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/01 09:53:18.669307 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 09:53:18.670769 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 09:53:18.670791 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 09:53:18.670805 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 09:53:18.670808 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 09:53:18.670812 [INFO] Executing instruction: Generate environment file
2024/02/01 09:53:18.670837 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 09:53:18.670840 [INFO] start build docker app
2024/02/01 09:53:18.671225 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 09:53:18.671229 [INFO] fetching image and ports
2024/02/01 09:53:18.673152 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 09:53:18.673275 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 09:53:18.673338 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 09:53:18.673351 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 09:53:19.610329 [INFO] Login Succeeded

2024/02/01 09:53:19.610351 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 09:53:19.610357 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 09:53:19.610372 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 09:53:19.758179 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 09:53:19.758203 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 09:53:19.758213 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 09:53:19.758216 [INFO] start to build docker image
2024/02/01 09:53:19.758234 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 09:53:20.059610 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 09:53:20.059633 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 09:53:20.059636 [INFO] successfully build docker image
2024/02/01 09:53:20.059639 [INFO] save staging docker image id
2024/02/01 09:53:20.059652 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 09:53:20.097213 [INFO] c176d18fbf65

2024/02/01 09:53:20.097371 [INFO] Executing instruction: configure X-Ray
2024/02/01 09:53:20.097378 [INFO] X-Ray is not enabled.
2024/02/01 09:53:20.097382 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 09:53:20.107953 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 09:53:20.111563 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 09:53:20.126723 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 09:53:20.126759 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 09:53:20.137394 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 09:53:20.147377 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 09:53:20.160927 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 09:53:20.220197 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 09:53:20.525031 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 09:53:20.525164 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 09:53:20.853870 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 09:53:20.865804 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 09:53:21.202315 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 09:53:21.213397 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 09:53:21.222109 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 09:53:21.576417 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 09:53:21.585848 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 09:53:21.907416 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 09:53:21.907458 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 09:53:21.920871 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 09:53:21.929532 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 09:53:21.989842 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 09:53:21.990880 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 09:53:21.991827 [INFO] Executing instruction: configure log streaming
2024/02/01 09:53:21.991839 [INFO] log streaming is not enabled
2024/02/01 09:53:21.991843 [INFO] disable log stream
2024/02/01 09:53:21.991859 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 09:53:22.010836 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 09:53:22.032615 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 09:53:22.032646 [INFO] Checking if logs need forced rotation
2024/02/01 09:53:22.032667 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 09:53:22.595502 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 09:53:23.094174 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 09:53:23.096326 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 09:53:23.650559 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 09:53:23.668317 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 09:53:23.668332 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 09:53:23.668347 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 09:53:24.101820 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 09:53:24.101877 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 09:53:24.101901 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 09:53:24.101904 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 09:53:24.101924 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 09:53:24.101934 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 09:53:24.101937 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 09:53:24.101942 [INFO] Executing instruction: stop X-Ray
2024/02/01 09:53:24.101944 [INFO] stop X-Ray ...
2024/02/01 09:53:24.101955 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 09:53:24.118129 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 09:53:24.118169 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 09:53:24.134483 [INFO] Executing instruction: Run Docker Container
2024/02/01 09:53:24.134512 [INFO] stop currently running containers...
2024/02/01 09:53:24.134525 [INFO] detected old app is not docker compose app
2024/02/01 09:53:24.134539 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 09:53:24.162561 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 09:53:24.178909 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 09:53:24.178987 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 09:53:24.192570 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 09:53:24.192603 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 09:53:24.207342 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 09:53:24.207389 [INFO] stopping current container: 8bea55147082
2024/02/01 09:53:24.207402 [INFO] Running command /bin/sh -c docker ps | grep -q 8bea55147082
2024/02/01 09:53:24.227768 [INFO] Running command /bin/sh -c docker ps | grep -q 8bea55147082
2024/02/01 09:53:24.247303 [INFO] Pruning containers ...
2024/02/01 09:53:24.247326 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 09:53:24.266017 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 09:53:24.266052 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 09:53:24.287338 [INFO] Total reclaimed space: 0B

2024/02/01 09:53:24.287365 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 09:53:24.307895 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 09:53:24.307941 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 09:53:24.330855 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 09:53:24.330880 [INFO] Removing /var/app/current/ if it exists
2024/02/01 09:53:24.330984 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 09:53:24.331001 [INFO] detected new app is not docker compose app
2024/02/01 09:53:24.331066 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 09:53:24.759932 [INFO] b82d368309d1839bda37f36d880178220c29b9d85f6db9b64394ea5247fd1a9c

2024/02/01 09:53:29.764193 [INFO] Running command /bin/sh -c docker ps | grep -q b82d368309d1
2024/02/01 09:53:29.783306 [ERROR] docker container quit unexpectedly on 2024-02-01 09:53:29.783295731 +0000 UTC: Command /bin/sh -c docker ps | grep -q b82d368309d1 failed with error exit status 1
2024/02/01 09:53:29.783333 [INFO] Running command /bin/sh -c docker logs b82d368309d1
2024/02/01 09:53:29.806346 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b82d368309d1: Command /bin/sh -c docker ps | grep -q b82d368309d1 failed with error exit status 1 

2024/02/01 09:53:29.806355 [INFO] Executing cleanup logic
2024/02/01 09:53:29.806574 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 10:53:30.825426 [INFO] Starting...
2024/02/01 10:53:30.825464 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 10:53:30.825492 [INFO] reading event message file
2024/02/01 10:53:30.826205 [INFO] Engine received EB command userdata-exec

2024/02/01 10:53:30.833063 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 10:53:31.269786 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 10:53:31.744279 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 10:53:31.744429 [INFO] Engine command: (self-startup)

2024/02/01 10:53:31.744444 [INFO] Downloading EB Application...
2024/02/01 10:53:31.744448 [INFO] Region: eu-west-1
2024/02/01 10:53:31.744451 [INFO] envID: e-8gmkc7rmw6
2024/02/01 10:53:31.744454 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 10:53:31.744457 [INFO] Using manifest file name from command request
2024/02/01 10:53:31.744473 [INFO] Unable to get version manifest file.
2024/02/01 10:53:31.744484 [INFO] Downloading latest manifest available.
2024/02/01 10:53:31.744487 [INFO] Download latest app version manifest
2024/02/01 10:53:31.744616 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 10:53:31.791119 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 10:53:31.791353 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 10:53:31.807734 [INFO] Download successful124bytes downloaded
2024/02/01 10:53:31.807877 [INFO] Trying to read and parse version manifest...
2024/02/01 10:53:31.807951 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 10:53:31.843933 [INFO] Download successful264bytes downloaded
2024/02/01 10:53:31.844256 [INFO] Executing instruction: SyncClock
2024/02/01 10:53:31.844261 [INFO] Starting SyncClock
2024/02/01 10:53:31.844273 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 10:53:31.849652 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 10:53:28 2024
System time     : 0.000002356 seconds fast of NTP time
Last offset     : +0.000002440 seconds
RMS offset      : 0.000004170 seconds
Frequency       : 0.761 ppm fast
Residual freq   : +0.002 ppm
Skew            : 0.087 ppm
Root delay      : 0.000426216 seconds
Root dispersion : 0.000507337 seconds
Update interval : 32.5 seconds
Leap status     : Normal

2024/02/01 10:53:31.849670 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 10:53:31.853659 [INFO] 200 OK

2024/02/01 10:53:31.853782 [INFO] Skipping Configure OS
2024/02/01 10:53:31.853791 [INFO] Skipping LockRepo
2024/02/01 10:53:31.853796 [INFO] Skipping GenerateEBBanner
2024/02/01 10:53:31.853803 [INFO] Skipping Install Process Manager
2024/02/01 10:53:31.853809 [INFO] Skipping install syslog
2024/02/01 10:53:31.853814 [INFO] Skipping install cron
2024/02/01 10:53:31.853820 [INFO] Skipping install proxy
2024/02/01 10:53:31.853825 [INFO] Skipping installhealthd
2024/02/01 10:53:31.853830 [INFO] Skipping Install Log Streaming Manager
2024/02/01 10:53:31.853836 [INFO] Skipping install X-Ray
2024/02/01 10:53:31.853844 [INFO] Skipping install Third Party License
2024/02/01 10:53:31.853852 [INFO] Skipping installSqsd
2024/02/01 10:53:31.853858 [INFO] Skipping bootstraphealthd
2024/02/01 10:53:31.853864 [INFO] Skipping Install yum packages
2024/02/01 10:53:31.853870 [INFO] Skipping install docker-compose
2024/02/01 10:53:31.853876 [INFO] Skipping Configure Docker Daemon
2024/02/01 10:53:31.853881 [INFO] Skipping MarkBaked
2024/02/01 10:53:31.853887 [INFO] Skipping TuneSystemSettings
2024/02/01 10:53:31.853890 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 10:53:31.853894 [INFO] Initialize LogRotate files and directories
2024/02/01 10:53:31.868979 [INFO] Skipping BootstrapCFNHup
2024/02/01 10:53:31.868988 [INFO] Executing instruction: StartCFNHup
2024/02/01 10:53:31.868991 [INFO] Start cfn-hup
2024/02/01 10:53:31.869009 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 10:53:31.882714 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 10:53:31.890866 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 10:53:31.890890 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 10:53:31.890894 [INFO] Executing instruction: Start Docker
2024/02/01 10:53:31.890909 [INFO] Starting Docker...
2024/02/01 10:53:31.890990 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 10:53:31.892158 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 10:53:31.893420 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 10:53:32.415823 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 10:53:32.451570 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 10:53:32.451604 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 10:53:32.480165 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 10:53:32.492818 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 10:53:32.521919 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 10:53:32.621329 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 10:53:32.621523 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 10:53:32.951015 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 10:53:33.236023 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 10:53:33.247729 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 10:53:33.601194 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 10:53:33.611523 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 10:53:33.624292 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 10:53:33.633356 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 10:53:35.000429 [INFO] Skipping Setup Docker Options
2024/02/01 10:53:35.000458 [INFO] Skipping MarkBootstrapped
2024/02/01 10:53:35.000462 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 10:53:35.000591 [INFO] Starting SwitchCFNStack
2024/02/01 10:53:35.000597 [INFO] Executing instruction: stopSqsd
2024/02/01 10:53:35.000604 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 10:53:35.000608 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 10:53:35.000612 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 10:53:35.000627 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 10:53:35.482699 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 10:53:35.482796 [INFO] Executing instruction: StagedockerApplication
2024/02/01 10:53:35.482808 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 10:53:35.520553 [INFO] Pruning containers ...
2024/02/01 10:53:35.520582 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 10:53:35.569134 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b82d368309d1   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             keen_kapitsa

2024/02/01 10:53:35.569171 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 10:53:35.604490 [INFO] Deleted Containers:
b82d368309d1839bda37f36d880178220c29b9d85f6db9b64394ea5247fd1a9c

Total reclaimed space: 0B

2024/02/01 10:53:35.604520 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 10:53:35.625053 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 10:53:35.625309 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 10:53:35.628087 [INFO] application/json

2024/02/01 10:53:35.628113 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 10:53:35.707879 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 10:53:35.708228 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 10:53:35.709552 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 10:53:35.709579 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 10:53:35.709608 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 10:53:35.709612 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 10:53:35.709618 [INFO] Executing instruction: Generate environment file
2024/02/01 10:53:35.709647 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 10:53:35.709650 [INFO] start build docker app
2024/02/01 10:53:35.710332 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 10:53:35.710339 [INFO] fetching image and ports
2024/02/01 10:53:35.712201 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 10:53:35.712272 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 10:53:35.712281 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 10:53:35.712297 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 10:53:36.644045 [INFO] Login Succeeded

2024/02/01 10:53:36.644064 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 10:53:36.644070 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 10:53:36.644088 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 10:53:36.799617 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 10:53:36.799645 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 10:53:36.799650 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 10:53:36.799654 [INFO] start to build docker image
2024/02/01 10:53:36.799699 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 10:53:37.135716 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 10:53:37.135736 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 10:53:37.135740 [INFO] successfully build docker image
2024/02/01 10:53:37.135748 [INFO] save staging docker image id
2024/02/01 10:53:37.135767 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 10:53:37.158732 [INFO] c176d18fbf65

2024/02/01 10:53:37.158870 [INFO] Executing instruction: configure X-Ray
2024/02/01 10:53:37.158877 [INFO] X-Ray is not enabled.
2024/02/01 10:53:37.158879 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 10:53:37.165039 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 10:53:37.166821 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 10:53:37.178921 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 10:53:37.178950 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 10:53:37.189754 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 10:53:37.199173 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 10:53:37.209611 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 10:53:37.326330 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 10:53:37.700259 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 10:53:37.700358 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 10:53:38.044056 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 10:53:38.059190 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 10:53:38.421207 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 10:53:38.431321 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 10:53:38.440027 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 10:53:38.760214 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 10:53:38.771690 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 10:53:39.134719 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 10:53:39.134750 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 10:53:39.149690 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 10:53:39.159710 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 10:53:39.232068 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 10:53:39.233121 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 10:53:39.234077 [INFO] Executing instruction: configure log streaming
2024/02/01 10:53:39.234088 [INFO] log streaming is not enabled
2024/02/01 10:53:39.234091 [INFO] disable log stream
2024/02/01 10:53:39.234106 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 10:53:39.257901 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 10:53:39.276020 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 10:53:39.276043 [INFO] Checking if logs need forced rotation
2024/02/01 10:53:39.276063 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 10:53:39.838616 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 10:53:40.320366 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 10:53:40.322078 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 10:53:40.894150 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 10:53:40.927002 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 10:53:40.927021 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 10:53:40.927042 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 10:53:41.409306 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 10:53:41.409334 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 10:53:41.409379 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 10:53:41.409661 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 10:53:41.409720 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 10:53:41.409736 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 10:53:41.409738 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 10:53:41.409745 [INFO] Executing instruction: stop X-Ray
2024/02/01 10:53:41.409748 [INFO] stop X-Ray ...
2024/02/01 10:53:41.409764 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 10:53:41.436078 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 10:53:41.436108 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 10:53:41.454908 [INFO] Executing instruction: Run Docker Container
2024/02/01 10:53:41.454951 [INFO] stop currently running containers...
2024/02/01 10:53:41.454968 [INFO] detected old app is not docker compose app
2024/02/01 10:53:41.454984 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 10:53:41.512422 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 10:53:41.528820 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 10:53:41.528853 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 10:53:41.542855 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 10:53:41.542888 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 10:53:41.556850 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 10:53:41.556909 [INFO] stopping current container: b82d368309d1
2024/02/01 10:53:41.556922 [INFO] Running command /bin/sh -c docker ps | grep -q b82d368309d1
2024/02/01 10:53:41.578278 [INFO] Running command /bin/sh -c docker ps | grep -q b82d368309d1
2024/02/01 10:53:41.600202 [INFO] Pruning containers ...
2024/02/01 10:53:41.600227 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 10:53:41.620381 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 10:53:41.620413 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 10:53:41.639588 [INFO] Total reclaimed space: 0B

2024/02/01 10:53:41.639628 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 10:53:41.659352 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 10:53:41.659384 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 10:53:41.677460 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 10:53:41.677484 [INFO] Removing /var/app/current/ if it exists
2024/02/01 10:53:41.677585 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 10:53:41.677602 [INFO] detected new app is not docker compose app
2024/02/01 10:53:41.677662 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 10:53:42.076462 [INFO] 3c65f637731232346abc497c2c6c317af248d4dab0adbf7a36c0ee6779e787d4

2024/02/01 10:53:47.080823 [INFO] Running command /bin/sh -c docker ps | grep -q 3c65f6377312
2024/02/01 10:53:47.103143 [ERROR] docker container quit unexpectedly on 2024-02-01 10:53:47.103131955 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3c65f6377312 failed with error exit status 1
2024/02/01 10:53:47.103183 [INFO] Running command /bin/sh -c docker logs 3c65f6377312
2024/02/01 10:53:47.125072 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3c65f6377312: Command /bin/sh -c docker ps | grep -q 3c65f6377312 failed with error exit status 1 

2024/02/01 10:53:47.125084 [INFO] Executing cleanup logic
2024/02/01 10:53:47.125314 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 11:53:48.129722 [INFO] Starting...
2024/02/01 11:53:48.129764 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 11:53:48.129788 [INFO] reading event message file
2024/02/01 11:53:48.130507 [INFO] Engine received EB command userdata-exec

2024/02/01 11:53:48.148592 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 11:53:48.561325 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 11:53:49.032853 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 11:53:49.032947 [INFO] Engine command: (self-startup)

2024/02/01 11:53:49.032954 [INFO] Downloading EB Application...
2024/02/01 11:53:49.032958 [INFO] Region: eu-west-1
2024/02/01 11:53:49.032961 [INFO] envID: e-8gmkc7rmw6
2024/02/01 11:53:49.032964 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 11:53:49.032968 [INFO] Using manifest file name from command request
2024/02/01 11:53:49.032985 [INFO] Unable to get version manifest file.
2024/02/01 11:53:49.032988 [INFO] Downloading latest manifest available.
2024/02/01 11:53:49.032996 [INFO] Download latest app version manifest
2024/02/01 11:53:49.033183 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 11:53:49.078353 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 11:53:49.078567 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 11:53:49.090578 [INFO] Download successful124bytes downloaded
2024/02/01 11:53:49.090716 [INFO] Trying to read and parse version manifest...
2024/02/01 11:53:49.090793 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 11:53:49.118189 [INFO] Download successful264bytes downloaded
2024/02/01 11:53:49.118643 [INFO] Executing instruction: SyncClock
2024/02/01 11:53:49.118649 [INFO] Starting SyncClock
2024/02/01 11:53:49.118661 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 11:53:49.125666 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 11:53:35 2024
System time     : 0.000004840 seconds fast of NTP time
Last offset     : +0.000003751 seconds
RMS offset      : 0.000010786 seconds
Frequency       : 0.646 ppm fast
Residual freq   : +0.021 ppm
Skew            : 0.331 ppm
Root delay      : 0.000414431 seconds
Root dispersion : 0.000501467 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/01 11:53:49.125693 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 11:53:49.130617 [INFO] 200 OK

2024/02/01 11:53:49.130713 [INFO] Skipping Configure OS
2024/02/01 11:53:49.130718 [INFO] Skipping LockRepo
2024/02/01 11:53:49.130722 [INFO] Skipping GenerateEBBanner
2024/02/01 11:53:49.130734 [INFO] Skipping Install Process Manager
2024/02/01 11:53:49.130738 [INFO] Skipping install syslog
2024/02/01 11:53:49.130742 [INFO] Skipping install cron
2024/02/01 11:53:49.130746 [INFO] Skipping install proxy
2024/02/01 11:53:49.130750 [INFO] Skipping installhealthd
2024/02/01 11:53:49.130754 [INFO] Skipping Install Log Streaming Manager
2024/02/01 11:53:49.130758 [INFO] Skipping install X-Ray
2024/02/01 11:53:49.130761 [INFO] Skipping install Third Party License
2024/02/01 11:53:49.130767 [INFO] Skipping installSqsd
2024/02/01 11:53:49.130771 [INFO] Skipping bootstraphealthd
2024/02/01 11:53:49.130774 [INFO] Skipping Install yum packages
2024/02/01 11:53:49.130778 [INFO] Skipping install docker-compose
2024/02/01 11:53:49.130782 [INFO] Skipping Configure Docker Daemon
2024/02/01 11:53:49.130786 [INFO] Skipping MarkBaked
2024/02/01 11:53:49.130790 [INFO] Skipping TuneSystemSettings
2024/02/01 11:53:49.130792 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 11:53:49.130795 [INFO] Initialize LogRotate files and directories
2024/02/01 11:53:49.145560 [INFO] Skipping BootstrapCFNHup
2024/02/01 11:53:49.145573 [INFO] Executing instruction: StartCFNHup
2024/02/01 11:53:49.145576 [INFO] Start cfn-hup
2024/02/01 11:53:49.145597 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 11:53:49.241980 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 11:53:49.273343 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 11:53:49.273378 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 11:53:49.273382 [INFO] Executing instruction: Start Docker
2024/02/01 11:53:49.273386 [INFO] Starting Docker...
2024/02/01 11:53:49.273438 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 11:53:49.275963 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 11:53:49.277102 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 11:53:49.434080 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 11:53:49.448191 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 11:53:49.448224 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 11:53:49.458253 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 11:53:49.467720 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 11:53:49.490858 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 11:53:49.576571 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 11:53:49.576642 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 11:53:49.927591 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 11:53:50.213322 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 11:53:50.225920 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 11:53:50.574286 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 11:53:50.585603 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 11:53:50.598816 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 11:53:50.608732 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 11:53:51.900250 [INFO] Skipping Setup Docker Options
2024/02/01 11:53:51.900286 [INFO] Skipping MarkBootstrapped
2024/02/01 11:53:51.900290 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 11:53:51.900422 [INFO] Starting SwitchCFNStack
2024/02/01 11:53:51.900428 [INFO] Executing instruction: stopSqsd
2024/02/01 11:53:51.900431 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 11:53:51.900438 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 11:53:51.900444 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 11:53:51.900466 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 11:53:52.467454 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 11:53:52.467483 [INFO] Executing instruction: StagedockerApplication
2024/02/01 11:53:52.467494 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 11:53:52.498205 [INFO] Pruning containers ...
2024/02/01 11:53:52.498239 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 11:53:52.525250 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
3c65f6377312   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             hopeful_kowalevski

2024/02/01 11:53:52.525279 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 11:53:52.566267 [INFO] Deleted Containers:
3c65f637731232346abc497c2c6c317af248d4dab0adbf7a36c0ee6779e787d4

Total reclaimed space: 0B

2024/02/01 11:53:52.566291 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 11:53:52.618213 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 11:53:52.618764 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 11:53:52.624416 [INFO] application/json

2024/02/01 11:53:52.624443 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 11:53:52.723393 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/01 11:53:52.723548 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 11:53:52.724914 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 11:53:52.724942 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 11:53:52.724957 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 11:53:52.724959 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 11:53:52.724964 [INFO] Executing instruction: Generate environment file
2024/02/01 11:53:52.724989 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 11:53:52.724993 [INFO] start build docker app
2024/02/01 11:53:52.725388 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 11:53:52.725393 [INFO] fetching image and ports
2024/02/01 11:53:52.727357 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 11:53:52.727415 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 11:53:52.727426 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 11:53:52.727437 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 11:53:53.613236 [INFO] Login Succeeded

2024/02/01 11:53:53.613259 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 11:53:53.613265 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 11:53:53.613289 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 11:53:53.784845 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 11:53:53.784868 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 11:53:53.784873 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 11:53:53.784876 [INFO] start to build docker image
2024/02/01 11:53:53.784892 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 11:53:54.070274 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 11:53:54.070493 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 11:53:54.070501 [INFO] successfully build docker image
2024/02/01 11:53:54.070504 [INFO] save staging docker image id
2024/02/01 11:53:54.070518 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 11:53:54.114342 [INFO] c176d18fbf65

2024/02/01 11:53:54.114498 [INFO] Executing instruction: configure X-Ray
2024/02/01 11:53:54.114505 [INFO] X-Ray is not enabled.
2024/02/01 11:53:54.114508 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 11:53:54.120447 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 11:53:54.122062 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 11:53:54.140963 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 11:53:54.140987 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 11:53:54.153001 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 11:53:54.162972 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 11:53:54.172668 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 11:53:54.217125 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 11:53:54.533326 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 11:53:54.533407 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 11:53:54.853970 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 11:53:54.866836 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 11:53:55.243984 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 11:53:55.253747 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 11:53:55.262650 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 11:53:55.604774 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 11:53:55.615291 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 11:53:56.023846 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 11:53:56.023886 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 11:53:56.036757 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 11:53:56.045920 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 11:53:56.132125 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 11:53:56.133054 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 11:53:56.134098 [INFO] Executing instruction: configure log streaming
2024/02/01 11:53:56.134108 [INFO] log streaming is not enabled
2024/02/01 11:53:56.134112 [INFO] disable log stream
2024/02/01 11:53:56.134126 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 11:53:56.150758 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 11:53:56.170380 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 11:53:56.170406 [INFO] Checking if logs need forced rotation
2024/02/01 11:53:56.170426 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 11:53:56.777062 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 11:53:57.330920 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 11:53:57.332681 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 11:53:57.911575 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 11:53:57.930080 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 11:53:57.930098 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 11:53:57.930111 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 11:53:58.371992 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 11:53:58.372018 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 11:53:58.372046 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 11:53:58.372050 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 11:53:58.372149 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 11:53:58.372166 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 11:53:58.372169 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 11:53:58.372175 [INFO] Executing instruction: stop X-Ray
2024/02/01 11:53:58.372178 [INFO] stop X-Ray ...
2024/02/01 11:53:58.372189 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 11:53:58.388566 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 11:53:58.388597 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 11:53:58.408605 [INFO] Executing instruction: Run Docker Container
2024/02/01 11:53:58.408679 [INFO] stop currently running containers...
2024/02/01 11:53:58.408689 [INFO] detected old app is not docker compose app
2024/02/01 11:53:58.408700 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 11:53:58.462520 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 11:53:58.479756 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 11:53:58.479791 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 11:53:58.498169 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 11:53:58.498201 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 11:53:58.518194 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 11:53:58.518392 [INFO] stopping current container: 3c65f6377312
2024/02/01 11:53:58.518407 [INFO] Running command /bin/sh -c docker ps | grep -q 3c65f6377312
2024/02/01 11:53:58.540521 [INFO] Running command /bin/sh -c docker ps | grep -q 3c65f6377312
2024/02/01 11:53:58.561478 [INFO] Pruning containers ...
2024/02/01 11:53:58.561502 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 11:53:58.583583 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 11:53:58.583615 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 11:53:58.606906 [INFO] Total reclaimed space: 0B

2024/02/01 11:53:58.606937 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 11:53:58.637918 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 11:53:58.637951 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 11:53:58.682620 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 11:53:58.682641 [INFO] Removing /var/app/current/ if it exists
2024/02/01 11:53:58.682742 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 11:53:58.682763 [INFO] detected new app is not docker compose app
2024/02/01 11:53:58.682815 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 11:53:59.103885 [INFO] 75515afdfc65902124ead7367e582d0ead0c29bf5ac6e6307621fd025670ebcf

2024/02/01 11:54:04.104232 [INFO] Running command /bin/sh -c docker ps | grep -q 75515afdfc65
2024/02/01 11:54:04.129026 [ERROR] docker container quit unexpectedly on 2024-02-01 11:54:04.129013564 +0000 UTC: Command /bin/sh -c docker ps | grep -q 75515afdfc65 failed with error exit status 1
2024/02/01 11:54:04.129057 [INFO] Running command /bin/sh -c docker logs 75515afdfc65
2024/02/01 11:54:04.149703 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 75515afdfc65: Command /bin/sh -c docker ps | grep -q 75515afdfc65 failed with error exit status 1 

2024/02/01 11:54:04.149712 [INFO] Executing cleanup logic
2024/02/01 11:54:04.149944 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 12:54:05.279152 [INFO] Starting...
2024/02/01 12:54:05.279226 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 12:54:05.279263 [INFO] reading event message file
2024/02/01 12:54:05.280226 [INFO] Engine received EB command userdata-exec

2024/02/01 12:54:05.285767 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 12:54:05.711560 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 12:54:06.178443 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 12:54:06.178552 [INFO] Engine command: (self-startup)

2024/02/01 12:54:06.178561 [INFO] Downloading EB Application...
2024/02/01 12:54:06.178565 [INFO] Region: eu-west-1
2024/02/01 12:54:06.178568 [INFO] envID: e-8gmkc7rmw6
2024/02/01 12:54:06.178571 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 12:54:06.178575 [INFO] Using manifest file name from command request
2024/02/01 12:54:06.178599 [INFO] Unable to get version manifest file.
2024/02/01 12:54:06.178601 [INFO] Downloading latest manifest available.
2024/02/01 12:54:06.178603 [INFO] Download latest app version manifest
2024/02/01 12:54:06.178717 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 12:54:06.214090 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 12:54:06.214284 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 12:54:06.228742 [INFO] Download successful124bytes downloaded
2024/02/01 12:54:06.228887 [INFO] Trying to read and parse version manifest...
2024/02/01 12:54:06.228971 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 12:54:06.255109 [INFO] Download successful264bytes downloaded
2024/02/01 12:54:06.255873 [INFO] Executing instruction: SyncClock
2024/02/01 12:54:06.255881 [INFO] Starting SyncClock
2024/02/01 12:54:06.255896 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 12:54:06.267448 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 12:53:57 2024
System time     : 0.000002041 seconds fast of NTP time
Last offset     : +0.000003606 seconds
RMS offset      : 0.000005454 seconds
Frequency       : 0.160 ppm fast
Residual freq   : +0.003 ppm
Skew            : 0.302 ppm
Root delay      : 0.000409408 seconds
Root dispersion : 0.000478787 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/01 12:54:06.267474 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 12:54:06.272067 [INFO] 200 OK

2024/02/01 12:54:06.272182 [INFO] Skipping Configure OS
2024/02/01 12:54:06.272190 [INFO] Skipping LockRepo
2024/02/01 12:54:06.272194 [INFO] Skipping GenerateEBBanner
2024/02/01 12:54:06.272198 [INFO] Skipping Install Process Manager
2024/02/01 12:54:06.272203 [INFO] Skipping install syslog
2024/02/01 12:54:06.272208 [INFO] Skipping install cron
2024/02/01 12:54:06.272214 [INFO] Skipping install proxy
2024/02/01 12:54:06.272219 [INFO] Skipping installhealthd
2024/02/01 12:54:06.272225 [INFO] Skipping Install Log Streaming Manager
2024/02/01 12:54:06.272229 [INFO] Skipping install X-Ray
2024/02/01 12:54:06.272233 [INFO] Skipping install Third Party License
2024/02/01 12:54:06.272238 [INFO] Skipping installSqsd
2024/02/01 12:54:06.272243 [INFO] Skipping bootstraphealthd
2024/02/01 12:54:06.272324 [INFO] Skipping Install yum packages
2024/02/01 12:54:06.272330 [INFO] Skipping install docker-compose
2024/02/01 12:54:06.272337 [INFO] Skipping Configure Docker Daemon
2024/02/01 12:54:06.272342 [INFO] Skipping MarkBaked
2024/02/01 12:54:06.272346 [INFO] Skipping TuneSystemSettings
2024/02/01 12:54:06.272349 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 12:54:06.272352 [INFO] Initialize LogRotate files and directories
2024/02/01 12:54:06.287601 [INFO] Skipping BootstrapCFNHup
2024/02/01 12:54:06.287612 [INFO] Executing instruction: StartCFNHup
2024/02/01 12:54:06.287615 [INFO] Start cfn-hup
2024/02/01 12:54:06.287634 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 12:54:06.301341 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 12:54:06.310780 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 12:54:06.310805 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 12:54:06.310809 [INFO] Executing instruction: Start Docker
2024/02/01 12:54:06.310813 [INFO] Starting Docker...
2024/02/01 12:54:06.310888 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 12:54:06.311949 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 12:54:06.313131 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 12:54:06.672899 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 12:54:06.692085 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 12:54:06.692114 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 12:54:06.705816 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 12:54:06.715614 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 12:54:06.726769 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 12:54:06.808950 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 12:54:06.809006 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 12:54:07.198741 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 12:54:07.553893 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 12:54:07.565829 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 12:54:07.886892 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 12:54:07.897917 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 12:54:07.925638 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 12:54:07.937257 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 12:54:09.119231 [INFO] Skipping Setup Docker Options
2024/02/01 12:54:09.119288 [INFO] Skipping MarkBootstrapped
2024/02/01 12:54:09.119292 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 12:54:09.119421 [INFO] Starting SwitchCFNStack
2024/02/01 12:54:09.119427 [INFO] Executing instruction: stopSqsd
2024/02/01 12:54:09.119430 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 12:54:09.119434 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 12:54:09.119437 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 12:54:09.119455 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 12:54:09.604247 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 12:54:09.604287 [INFO] Executing instruction: StagedockerApplication
2024/02/01 12:54:09.604302 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 12:54:09.628389 [INFO] Pruning containers ...
2024/02/01 12:54:09.628423 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 12:54:09.652500 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
75515afdfc65   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             magical_hodgkin

2024/02/01 12:54:09.652544 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 12:54:09.682192 [INFO] Deleted Containers:
75515afdfc65902124ead7367e582d0ead0c29bf5ac6e6307621fd025670ebcf

Total reclaimed space: 0B

2024/02/01 12:54:09.682255 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 12:54:09.702748 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 12:54:09.702975 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 12:54:09.706010 [INFO] application/json

2024/02/01 12:54:09.706030 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 12:54:09.815618 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 12:54:09.815791 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 12:54:09.817055 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 12:54:09.817081 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 12:54:09.817095 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 12:54:09.817098 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 12:54:09.817102 [INFO] Executing instruction: Generate environment file
2024/02/01 12:54:09.817128 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 12:54:09.817133 [INFO] start build docker app
2024/02/01 12:54:09.817529 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 12:54:09.817534 [INFO] fetching image and ports
2024/02/01 12:54:09.819512 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 12:54:09.819570 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 12:54:09.819579 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 12:54:09.819589 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 12:54:10.872522 [INFO] Login Succeeded

2024/02/01 12:54:10.872539 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 12:54:10.872545 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 12:54:10.872562 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 12:54:11.096292 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 12:54:11.096324 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 12:54:11.096328 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 12:54:11.096333 [INFO] start to build docker image
2024/02/01 12:54:11.096352 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 12:54:11.420677 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 12:54:11.420706 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 12:54:11.420718 [INFO] successfully build docker image
2024/02/01 12:54:11.420722 [INFO] save staging docker image id
2024/02/01 12:54:11.420736 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 12:54:11.456035 [INFO] c176d18fbf65

2024/02/01 12:54:11.456207 [INFO] Executing instruction: configure X-Ray
2024/02/01 12:54:11.456213 [INFO] X-Ray is not enabled.
2024/02/01 12:54:11.456216 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 12:54:11.463524 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 12:54:11.465121 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 12:54:11.479055 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 12:54:11.479083 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 12:54:11.489172 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 12:54:11.498049 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 12:54:11.508357 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 12:54:11.610704 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 12:54:11.942929 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 12:54:11.943020 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 12:54:12.299848 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 12:54:12.313559 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 12:54:12.743233 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 12:54:12.753880 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 12:54:12.770865 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 12:54:13.104622 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 12:54:13.118592 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 12:54:13.442464 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 12:54:13.442499 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 12:54:13.455457 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 12:54:13.464111 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 12:54:13.529845 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 12:54:13.530753 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 12:54:13.531743 [INFO] Executing instruction: configure log streaming
2024/02/01 12:54:13.531756 [INFO] log streaming is not enabled
2024/02/01 12:54:13.531760 [INFO] disable log stream
2024/02/01 12:54:13.531779 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 12:54:13.555900 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 12:54:13.582543 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 12:54:13.582567 [INFO] Checking if logs need forced rotation
2024/02/01 12:54:13.582588 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 12:54:14.176941 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 12:54:14.680448 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 12:54:14.682258 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 12:54:15.175516 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 12:54:15.197873 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 12:54:15.197895 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 12:54:15.197912 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 12:54:15.631583 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 12:54:15.631617 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 12:54:15.631642 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 12:54:15.631645 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 12:54:15.631665 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 12:54:15.631676 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 12:54:15.631678 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 12:54:15.631683 [INFO] Executing instruction: stop X-Ray
2024/02/01 12:54:15.631686 [INFO] stop X-Ray ...
2024/02/01 12:54:15.631696 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 12:54:15.653039 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 12:54:15.653075 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 12:54:15.672808 [INFO] Executing instruction: Run Docker Container
2024/02/01 12:54:15.672838 [INFO] stop currently running containers...
2024/02/01 12:54:15.672850 [INFO] detected old app is not docker compose app
2024/02/01 12:54:15.672863 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 12:54:15.722520 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 12:54:15.743502 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 12:54:15.743537 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 12:54:15.772990 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 12:54:15.773025 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 12:54:15.789429 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 12:54:15.789591 [INFO] stopping current container: 75515afdfc65
2024/02/01 12:54:15.789604 [INFO] Running command /bin/sh -c docker ps | grep -q 75515afdfc65
2024/02/01 12:54:15.809391 [INFO] Running command /bin/sh -c docker ps | grep -q 75515afdfc65
2024/02/01 12:54:15.827839 [INFO] Pruning containers ...
2024/02/01 12:54:15.827866 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 12:54:15.847468 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 12:54:15.847498 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 12:54:15.885123 [INFO] Total reclaimed space: 0B

2024/02/01 12:54:15.885151 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 12:54:15.905293 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 12:54:15.905335 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 12:54:15.928861 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 12:54:15.928883 [INFO] Removing /var/app/current/ if it exists
2024/02/01 12:54:15.929050 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 12:54:15.929071 [INFO] detected new app is not docker compose app
2024/02/01 12:54:15.929123 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 12:54:16.345691 [INFO] 505813db5d81aa4e134f3a45ff5959ed06bb329facee49f16e71dd533bfc6d85

2024/02/01 12:54:21.346343 [INFO] Running command /bin/sh -c docker ps | grep -q 505813db5d81
2024/02/01 12:54:21.368549 [ERROR] docker container quit unexpectedly on 2024-02-01 12:54:21.368537885 +0000 UTC: Command /bin/sh -c docker ps | grep -q 505813db5d81 failed with error exit status 1
2024/02/01 12:54:21.368579 [INFO] Running command /bin/sh -c docker logs 505813db5d81
2024/02/01 12:54:21.389742 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 505813db5d81: Command /bin/sh -c docker ps | grep -q 505813db5d81 failed with error exit status 1 

2024/02/01 12:54:21.389752 [INFO] Executing cleanup logic
2024/02/01 12:54:21.389951 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 13:54:22.421169 [INFO] Starting...
2024/02/01 13:54:22.421216 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 13:54:22.421242 [INFO] reading event message file
2024/02/01 13:54:22.421963 [INFO] Engine received EB command userdata-exec

2024/02/01 13:54:22.429213 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 13:54:22.924280 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 13:54:23.467885 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 13:54:23.467987 [INFO] Engine command: (self-startup)

2024/02/01 13:54:23.467995 [INFO] Downloading EB Application...
2024/02/01 13:54:23.467999 [INFO] Region: eu-west-1
2024/02/01 13:54:23.468002 [INFO] envID: e-8gmkc7rmw6
2024/02/01 13:54:23.468005 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 13:54:23.468009 [INFO] Using manifest file name from command request
2024/02/01 13:54:23.468030 [INFO] Unable to get version manifest file.
2024/02/01 13:54:23.468033 [INFO] Downloading latest manifest available.
2024/02/01 13:54:23.468036 [INFO] Download latest app version manifest
2024/02/01 13:54:23.468204 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 13:54:23.510672 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 13:54:23.510856 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 13:54:23.522399 [INFO] Download successful124bytes downloaded
2024/02/01 13:54:23.522540 [INFO] Trying to read and parse version manifest...
2024/02/01 13:54:23.522624 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 13:54:23.542196 [INFO] Download successful264bytes downloaded
2024/02/01 13:54:23.542559 [INFO] Executing instruction: SyncClock
2024/02/01 13:54:23.542564 [INFO] Starting SyncClock
2024/02/01 13:54:23.542575 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 13:54:23.547939 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 13:54:19 2024
System time     : 0.000000543 seconds slow of NTP time
Last offset     : +0.000001315 seconds
RMS offset      : 0.000004886 seconds
Frequency       : 0.572 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.063 ppm
Root delay      : 0.000439704 seconds
Root dispersion : 0.000366266 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/01 13:54:23.547959 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 13:54:23.551775 [INFO] 200 OK

2024/02/01 13:54:23.551910 [INFO] Skipping Configure OS
2024/02/01 13:54:23.551930 [INFO] Skipping LockRepo
2024/02/01 13:54:23.551936 [INFO] Skipping GenerateEBBanner
2024/02/01 13:54:23.551942 [INFO] Skipping Install Process Manager
2024/02/01 13:54:23.551948 [INFO] Skipping install syslog
2024/02/01 13:54:23.551958 [INFO] Skipping install cron
2024/02/01 13:54:23.551963 [INFO] Skipping install proxy
2024/02/01 13:54:23.551969 [INFO] Skipping installhealthd
2024/02/01 13:54:23.551974 [INFO] Skipping Install Log Streaming Manager
2024/02/01 13:54:23.551979 [INFO] Skipping install X-Ray
2024/02/01 13:54:23.551985 [INFO] Skipping install Third Party License
2024/02/01 13:54:23.551991 [INFO] Skipping installSqsd
2024/02/01 13:54:23.551997 [INFO] Skipping bootstraphealthd
2024/02/01 13:54:23.552003 [INFO] Skipping Install yum packages
2024/02/01 13:54:23.552008 [INFO] Skipping install docker-compose
2024/02/01 13:54:23.552013 [INFO] Skipping Configure Docker Daemon
2024/02/01 13:54:23.552019 [INFO] Skipping MarkBaked
2024/02/01 13:54:23.552027 [INFO] Skipping TuneSystemSettings
2024/02/01 13:54:23.552031 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 13:54:23.552034 [INFO] Initialize LogRotate files and directories
2024/02/01 13:54:23.566243 [INFO] Skipping BootstrapCFNHup
2024/02/01 13:54:23.566253 [INFO] Executing instruction: StartCFNHup
2024/02/01 13:54:23.566256 [INFO] Start cfn-hup
2024/02/01 13:54:23.566274 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 13:54:23.578995 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 13:54:23.588829 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 13:54:23.588865 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 13:54:23.588869 [INFO] Executing instruction: Start Docker
2024/02/01 13:54:23.588873 [INFO] Starting Docker...
2024/02/01 13:54:23.589040 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 13:54:23.590110 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 13:54:23.591094 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 13:54:23.949042 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 13:54:23.966631 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 13:54:23.966663 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 13:54:23.979255 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 13:54:23.990734 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 13:54:24.009112 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 13:54:24.138683 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 13:54:24.138751 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 13:54:24.460713 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 13:54:24.792244 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 13:54:24.804933 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 13:54:25.122420 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 13:54:25.134441 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 13:54:25.149122 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 13:54:25.157574 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 13:54:26.485925 [INFO] Skipping Setup Docker Options
2024/02/01 13:54:26.485947 [INFO] Skipping MarkBootstrapped
2024/02/01 13:54:26.485951 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 13:54:26.486061 [INFO] Starting SwitchCFNStack
2024/02/01 13:54:26.486071 [INFO] Executing instruction: stopSqsd
2024/02/01 13:54:26.486077 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 13:54:26.486080 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 13:54:26.486085 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 13:54:26.486102 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 13:54:26.955290 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 13:54:26.955365 [INFO] Executing instruction: StagedockerApplication
2024/02/01 13:54:26.955376 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 13:54:26.980746 [INFO] Pruning containers ...
2024/02/01 13:54:26.980912 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 13:54:27.021494 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
505813db5d81   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             cool_herschel

2024/02/01 13:54:27.021629 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 13:54:27.056425 [INFO] Deleted Containers:
505813db5d81aa4e134f3a45ff5959ed06bb329facee49f16e71dd533bfc6d85

Total reclaimed space: 0B

2024/02/01 13:54:27.056447 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 13:54:27.077066 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 13:54:27.077307 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 13:54:27.080159 [INFO] application/json

2024/02/01 13:54:27.080177 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 13:54:27.151592 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 13:54:27.151765 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 13:54:27.152994 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 13:54:27.153016 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 13:54:27.153030 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 13:54:27.153034 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 13:54:27.153039 [INFO] Executing instruction: Generate environment file
2024/02/01 13:54:27.153072 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 13:54:27.153076 [INFO] start build docker app
2024/02/01 13:54:27.153427 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 13:54:27.153431 [INFO] fetching image and ports
2024/02/01 13:54:27.155627 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 13:54:27.155684 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 13:54:27.155693 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 13:54:27.155701 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 13:54:28.136297 [INFO] Login Succeeded

2024/02/01 13:54:28.136325 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 13:54:28.136339 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 13:54:28.136357 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 13:54:28.312256 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 13:54:28.312279 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 13:54:28.312283 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 13:54:28.312286 [INFO] start to build docker image
2024/02/01 13:54:28.312303 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 13:54:28.625046 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 13:54:28.625070 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 13:54:28.625075 [INFO] successfully build docker image
2024/02/01 13:54:28.625078 [INFO] save staging docker image id
2024/02/01 13:54:28.625092 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 13:54:28.666459 [INFO] c176d18fbf65

2024/02/01 13:54:28.666576 [INFO] Executing instruction: configure X-Ray
2024/02/01 13:54:28.666582 [INFO] X-Ray is not enabled.
2024/02/01 13:54:28.666585 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 13:54:28.674646 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 13:54:28.676674 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 13:54:28.698510 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 13:54:28.698546 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 13:54:28.710296 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 13:54:28.723612 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 13:54:28.746549 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 13:54:28.847768 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 13:54:29.198649 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 13:54:29.198738 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 13:54:29.532470 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 13:54:29.543778 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 13:54:29.829147 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 13:54:29.899813 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 13:54:29.913491 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 13:54:30.419897 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 13:54:30.468840 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 13:54:30.893847 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 13:54:30.893885 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 13:54:30.907374 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 13:54:30.916316 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 13:54:30.974828 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 13:54:30.975874 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 13:54:30.976823 [INFO] Executing instruction: configure log streaming
2024/02/01 13:54:30.976834 [INFO] log streaming is not enabled
2024/02/01 13:54:30.976838 [INFO] disable log stream
2024/02/01 13:54:30.976853 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 13:54:31.003552 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 13:54:31.025565 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 13:54:31.025591 [INFO] Checking if logs need forced rotation
2024/02/01 13:54:31.025611 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 13:54:31.584516 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 13:54:32.188893 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 13:54:32.190935 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 13:54:32.641343 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 13:54:32.660754 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 13:54:32.660770 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 13:54:32.660788 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 13:54:33.235716 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 13:54:33.235749 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 13:54:33.235773 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 13:54:33.235776 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 13:54:33.235796 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 13:54:33.235806 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 13:54:33.235809 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 13:54:33.235814 [INFO] Executing instruction: stop X-Ray
2024/02/01 13:54:33.235816 [INFO] stop X-Ray ...
2024/02/01 13:54:33.235825 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 13:54:33.251192 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 13:54:33.251253 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 13:54:33.268344 [INFO] Executing instruction: Run Docker Container
2024/02/01 13:54:33.268380 [INFO] stop currently running containers...
2024/02/01 13:54:33.268489 [INFO] detected old app is not docker compose app
2024/02/01 13:54:33.268509 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 13:54:33.313208 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 13:54:33.328903 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 13:54:33.328938 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 13:54:33.343110 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 13:54:33.343144 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 13:54:33.358204 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 13:54:33.358253 [INFO] stopping current container: 505813db5d81
2024/02/01 13:54:33.358266 [INFO] Running command /bin/sh -c docker ps | grep -q 505813db5d81
2024/02/01 13:54:33.378982 [INFO] Running command /bin/sh -c docker ps | grep -q 505813db5d81
2024/02/01 13:54:33.400164 [INFO] Pruning containers ...
2024/02/01 13:54:33.400188 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 13:54:33.423472 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 13:54:33.423502 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 13:54:33.442682 [INFO] Total reclaimed space: 0B

2024/02/01 13:54:33.442720 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 13:54:33.461845 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 13:54:33.461883 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 13:54:33.482974 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 13:54:33.483007 [INFO] Removing /var/app/current/ if it exists
2024/02/01 13:54:33.483109 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 13:54:33.483127 [INFO] detected new app is not docker compose app
2024/02/01 13:54:33.483183 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 13:54:33.887959 [INFO] 0b908746afa12acde566e985bd10fcb0a27a151c6f34881c416f9483763eb27b

2024/02/01 13:54:38.888341 [INFO] Running command /bin/sh -c docker ps | grep -q 0b908746afa1
2024/02/01 13:54:38.926724 [ERROR] docker container quit unexpectedly on 2024-02-01 13:54:38.926710999 +0000 UTC: Command /bin/sh -c docker ps | grep -q 0b908746afa1 failed with error exit status 1
2024/02/01 13:54:38.926754 [INFO] Running command /bin/sh -c docker logs 0b908746afa1
2024/02/01 13:54:38.947134 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 0b908746afa1: Command /bin/sh -c docker ps | grep -q 0b908746afa1 failed with error exit status 1 

2024/02/01 13:54:38.947143 [INFO] Executing cleanup logic
2024/02/01 13:54:38.947342 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 14:54:39.891914 [INFO] Starting...
2024/02/01 14:54:39.891956 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 14:54:39.891980 [INFO] reading event message file
2024/02/01 14:54:39.892718 [INFO] Engine received EB command userdata-exec

2024/02/01 14:54:39.899585 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 14:54:40.355725 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 14:54:40.789685 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 14:54:40.789788 [INFO] Engine command: (self-startup)

2024/02/01 14:54:40.789795 [INFO] Downloading EB Application...
2024/02/01 14:54:40.789798 [INFO] Region: eu-west-1
2024/02/01 14:54:40.789801 [INFO] envID: e-8gmkc7rmw6
2024/02/01 14:54:40.789816 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 14:54:40.789819 [INFO] Using manifest file name from command request
2024/02/01 14:54:40.789833 [INFO] Unable to get version manifest file.
2024/02/01 14:54:40.789836 [INFO] Downloading latest manifest available.
2024/02/01 14:54:40.789839 [INFO] Download latest app version manifest
2024/02/01 14:54:40.789963 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 14:54:40.832732 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 14:54:40.834267 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 14:54:40.848036 [INFO] Download successful124bytes downloaded
2024/02/01 14:54:40.848186 [INFO] Trying to read and parse version manifest...
2024/02/01 14:54:40.848438 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 14:54:40.871810 [INFO] Download successful264bytes downloaded
2024/02/01 14:54:40.872174 [INFO] Executing instruction: SyncClock
2024/02/01 14:54:40.872179 [INFO] Starting SyncClock
2024/02/01 14:54:40.872191 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 14:54:40.878464 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 14:54:29 2024
System time     : 0.000002435 seconds slow of NTP time
Last offset     : -0.000002389 seconds
RMS offset      : 0.000011830 seconds
Frequency       : 0.533 ppm fast
Residual freq   : -0.006 ppm
Skew            : 0.512 ppm
Root delay      : 0.000493901 seconds
Root dispersion : 0.000425407 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/01 14:54:40.878484 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 14:54:40.883315 [INFO] 200 OK

2024/02/01 14:54:40.883525 [INFO] Skipping Configure OS
2024/02/01 14:54:40.883534 [INFO] Skipping LockRepo
2024/02/01 14:54:40.883538 [INFO] Skipping GenerateEBBanner
2024/02/01 14:54:40.883543 [INFO] Skipping Install Process Manager
2024/02/01 14:54:40.883546 [INFO] Skipping install syslog
2024/02/01 14:54:40.883550 [INFO] Skipping install cron
2024/02/01 14:54:40.883554 [INFO] Skipping install proxy
2024/02/01 14:54:40.883584 [INFO] Skipping installhealthd
2024/02/01 14:54:40.883590 [INFO] Skipping Install Log Streaming Manager
2024/02/01 14:54:40.883594 [INFO] Skipping install X-Ray
2024/02/01 14:54:40.883600 [INFO] Skipping install Third Party License
2024/02/01 14:54:40.883605 [INFO] Skipping installSqsd
2024/02/01 14:54:40.883611 [INFO] Skipping bootstraphealthd
2024/02/01 14:54:40.883615 [INFO] Skipping Install yum packages
2024/02/01 14:54:40.883619 [INFO] Skipping install docker-compose
2024/02/01 14:54:40.883623 [INFO] Skipping Configure Docker Daemon
2024/02/01 14:54:40.883627 [INFO] Skipping MarkBaked
2024/02/01 14:54:40.883631 [INFO] Skipping TuneSystemSettings
2024/02/01 14:54:40.883634 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 14:54:40.883636 [INFO] Initialize LogRotate files and directories
2024/02/01 14:54:40.899810 [INFO] Skipping BootstrapCFNHup
2024/02/01 14:54:40.899820 [INFO] Executing instruction: StartCFNHup
2024/02/01 14:54:40.899823 [INFO] Start cfn-hup
2024/02/01 14:54:40.899840 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 14:54:40.918498 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 14:54:40.930703 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 14:54:40.930735 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 14:54:40.930738 [INFO] Executing instruction: Start Docker
2024/02/01 14:54:40.930741 [INFO] Starting Docker...
2024/02/01 14:54:40.930753 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 14:54:40.931775 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 14:54:40.932742 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 14:54:41.433962 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 14:54:41.448442 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 14:54:41.448475 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 14:54:41.470720 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 14:54:41.486969 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 14:54:41.500544 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 14:54:41.620346 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 14:54:41.620376 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 14:54:41.960338 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 14:54:42.244083 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 14:54:42.256854 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 14:54:42.603351 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 14:54:42.614623 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 14:54:42.627141 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 14:54:42.636909 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 14:54:43.905194 [INFO] Skipping Setup Docker Options
2024/02/01 14:54:43.905215 [INFO] Skipping MarkBootstrapped
2024/02/01 14:54:43.905219 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 14:54:43.905343 [INFO] Starting SwitchCFNStack
2024/02/01 14:54:43.905349 [INFO] Executing instruction: stopSqsd
2024/02/01 14:54:43.905354 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 14:54:43.905357 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 14:54:43.905360 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 14:54:43.905378 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 14:54:44.348990 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 14:54:44.349013 [INFO] Executing instruction: StagedockerApplication
2024/02/01 14:54:44.349027 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 14:54:44.369237 [INFO] Pruning containers ...
2024/02/01 14:54:44.369263 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 14:54:44.399590 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
0b908746afa1   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             dreamy_leavitt

2024/02/01 14:54:44.399621 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 14:54:44.428436 [INFO] Deleted Containers:
0b908746afa12acde566e985bd10fcb0a27a151c6f34881c416f9483763eb27b

Total reclaimed space: 0B

2024/02/01 14:54:44.428459 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 14:54:44.449967 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 14:54:44.450250 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 14:54:44.453521 [INFO] application/json

2024/02/01 14:54:44.453550 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 14:54:44.529791 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/01 14:54:44.530005 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 14:54:44.531340 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 14:54:44.531403 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 14:54:44.531423 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 14:54:44.531441 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 14:54:44.531447 [INFO] Executing instruction: Generate environment file
2024/02/01 14:54:44.531475 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 14:54:44.531479 [INFO] start build docker app
2024/02/01 14:54:44.531859 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 14:54:44.531863 [INFO] fetching image and ports
2024/02/01 14:54:44.533515 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 14:54:44.533567 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 14:54:44.533575 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 14:54:44.533585 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 14:54:45.441450 [INFO] Login Succeeded

2024/02/01 14:54:45.441469 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 14:54:45.441474 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 14:54:45.441490 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 14:54:45.592085 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 14:54:45.592109 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 14:54:45.592112 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 14:54:45.592116 [INFO] start to build docker image
2024/02/01 14:54:45.592135 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 14:54:45.844657 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 14:54:45.845005 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 14:54:45.845015 [INFO] successfully build docker image
2024/02/01 14:54:45.845018 [INFO] save staging docker image id
2024/02/01 14:54:45.845278 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 14:54:45.887925 [INFO] c176d18fbf65

2024/02/01 14:54:45.888060 [INFO] Executing instruction: configure X-Ray
2024/02/01 14:54:45.888066 [INFO] X-Ray is not enabled.
2024/02/01 14:54:45.888069 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 14:54:45.893691 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 14:54:45.895643 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 14:54:45.907603 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 14:54:45.907640 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 14:54:45.918397 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 14:54:45.951982 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 14:54:45.981871 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 14:54:46.088609 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 14:54:46.441294 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 14:54:46.441405 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 14:54:46.786461 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 14:54:46.805352 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 14:54:47.063042 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 14:54:47.073100 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 14:54:47.081730 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 14:54:47.336881 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 14:54:47.346654 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 14:54:47.669390 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 14:54:47.669434 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 14:54:47.681259 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 14:54:47.692504 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 14:54:47.774689 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 14:54:47.775832 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 14:54:47.776867 [INFO] Executing instruction: configure log streaming
2024/02/01 14:54:47.776878 [INFO] log streaming is not enabled
2024/02/01 14:54:47.776882 [INFO] disable log stream
2024/02/01 14:54:47.776896 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 14:54:47.804478 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 14:54:47.829500 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 14:54:47.829524 [INFO] Checking if logs need forced rotation
2024/02/01 14:54:47.829547 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 14:54:48.370965 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 14:54:48.861189 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 14:54:48.864257 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 14:54:49.383103 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 14:54:49.400567 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 14:54:49.400582 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 14:54:49.400601 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 14:54:49.854647 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 14:54:49.854683 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 14:54:49.854709 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 14:54:49.854713 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 14:54:49.854736 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 14:54:49.854748 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 14:54:49.854751 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 14:54:49.854757 [INFO] Executing instruction: stop X-Ray
2024/02/01 14:54:49.854761 [INFO] stop X-Ray ...
2024/02/01 14:54:49.854774 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 14:54:49.869905 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 14:54:49.869936 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 14:54:49.894529 [INFO] Executing instruction: Run Docker Container
2024/02/01 14:54:49.894564 [INFO] stop currently running containers...
2024/02/01 14:54:49.894575 [INFO] detected old app is not docker compose app
2024/02/01 14:54:49.894590 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 14:54:49.955122 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 14:54:49.979831 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 14:54:49.979868 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 14:54:50.005368 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 14:54:50.005403 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 14:54:50.020196 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 14:54:50.020254 [INFO] stopping current container: 0b908746afa1
2024/02/01 14:54:50.020268 [INFO] Running command /bin/sh -c docker ps | grep -q 0b908746afa1
2024/02/01 14:54:50.045580 [INFO] Running command /bin/sh -c docker ps | grep -q 0b908746afa1
2024/02/01 14:54:50.076038 [INFO] Pruning containers ...
2024/02/01 14:54:50.076062 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 14:54:50.129362 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 14:54:50.129517 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 14:54:50.157115 [INFO] Total reclaimed space: 0B

2024/02/01 14:54:50.157147 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 14:54:50.176943 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 14:54:50.176976 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 14:54:50.198384 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 14:54:50.198404 [INFO] Removing /var/app/current/ if it exists
2024/02/01 14:54:50.198557 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 14:54:50.198574 [INFO] detected new app is not docker compose app
2024/02/01 14:54:50.198627 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 14:54:50.667979 [INFO] 21b1e1d36fdd3037e675a83e4064c5d7bb2c6990950fabfee422ebebda8391b4

2024/02/01 14:54:55.672577 [INFO] Running command /bin/sh -c docker ps | grep -q 21b1e1d36fdd
2024/02/01 14:54:55.700857 [ERROR] docker container quit unexpectedly on 2024-02-01 14:54:55.700838455 +0000 UTC: Command /bin/sh -c docker ps | grep -q 21b1e1d36fdd failed with error exit status 1
2024/02/01 14:54:55.700883 [INFO] Running command /bin/sh -c docker logs 21b1e1d36fdd
2024/02/01 14:54:55.723147 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 21b1e1d36fdd: Command /bin/sh -c docker ps | grep -q 21b1e1d36fdd failed with error exit status 1 

2024/02/01 14:54:55.723157 [INFO] Executing cleanup logic
2024/02/01 14:54:55.723365 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 15:54:56.785419 [INFO] Starting...
2024/02/01 15:54:56.785458 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 15:54:56.785486 [INFO] reading event message file
2024/02/01 15:54:56.786166 [INFO] Engine received EB command userdata-exec

2024/02/01 15:54:56.792337 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 15:54:57.190401 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 15:54:57.697610 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 15:54:57.697721 [INFO] Engine command: (self-startup)

2024/02/01 15:54:57.697730 [INFO] Downloading EB Application...
2024/02/01 15:54:57.697734 [INFO] Region: eu-west-1
2024/02/01 15:54:57.697736 [INFO] envID: e-8gmkc7rmw6
2024/02/01 15:54:57.697738 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 15:54:57.697741 [INFO] Using manifest file name from command request
2024/02/01 15:54:57.697753 [INFO] Unable to get version manifest file.
2024/02/01 15:54:57.697759 [INFO] Downloading latest manifest available.
2024/02/01 15:54:57.697762 [INFO] Download latest app version manifest
2024/02/01 15:54:57.698159 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 15:54:57.740602 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 15:54:57.740878 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 15:54:57.756833 [INFO] Download successful124bytes downloaded
2024/02/01 15:54:57.757046 [INFO] Trying to read and parse version manifest...
2024/02/01 15:54:57.757137 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 15:54:57.786825 [INFO] Download successful264bytes downloaded
2024/02/01 15:54:57.787186 [INFO] Executing instruction: SyncClock
2024/02/01 15:54:57.787193 [INFO] Starting SyncClock
2024/02/01 15:54:57.787211 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 15:54:57.797904 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 15:54:53 2024
System time     : 0.000000407 seconds fast of NTP time
Last offset     : +0.000001485 seconds
RMS offset      : 0.000003055 seconds
Frequency       : 0.706 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.059 ppm
Root delay      : 0.000442189 seconds
Root dispersion : 0.000414923 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/01 15:54:57.797940 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 15:54:57.806354 [INFO] 200 OK

2024/02/01 15:54:57.806455 [INFO] Skipping Configure OS
2024/02/01 15:54:57.806460 [INFO] Skipping LockRepo
2024/02/01 15:54:57.806464 [INFO] Skipping GenerateEBBanner
2024/02/01 15:54:57.806468 [INFO] Skipping Install Process Manager
2024/02/01 15:54:57.806472 [INFO] Skipping install syslog
2024/02/01 15:54:57.806476 [INFO] Skipping install cron
2024/02/01 15:54:57.806481 [INFO] Skipping install proxy
2024/02/01 15:54:57.806485 [INFO] Skipping installhealthd
2024/02/01 15:54:57.806489 [INFO] Skipping Install Log Streaming Manager
2024/02/01 15:54:57.806495 [INFO] Skipping install X-Ray
2024/02/01 15:54:57.806499 [INFO] Skipping install Third Party License
2024/02/01 15:54:57.806504 [INFO] Skipping installSqsd
2024/02/01 15:54:57.806508 [INFO] Skipping bootstraphealthd
2024/02/01 15:54:57.806512 [INFO] Skipping Install yum packages
2024/02/01 15:54:57.806516 [INFO] Skipping install docker-compose
2024/02/01 15:54:57.806520 [INFO] Skipping Configure Docker Daemon
2024/02/01 15:54:57.806523 [INFO] Skipping MarkBaked
2024/02/01 15:54:57.806527 [INFO] Skipping TuneSystemSettings
2024/02/01 15:54:57.806530 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 15:54:57.806532 [INFO] Initialize LogRotate files and directories
2024/02/01 15:54:57.821085 [INFO] Skipping BootstrapCFNHup
2024/02/01 15:54:57.821095 [INFO] Executing instruction: StartCFNHup
2024/02/01 15:54:57.821098 [INFO] Start cfn-hup
2024/02/01 15:54:57.821115 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 15:54:57.839560 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 15:54:57.847877 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 15:54:57.847904 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 15:54:57.847907 [INFO] Executing instruction: Start Docker
2024/02/01 15:54:57.847909 [INFO] Starting Docker...
2024/02/01 15:54:57.847970 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 15:54:57.848898 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 15:54:57.850014 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 15:54:58.192311 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 15:54:58.210083 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 15:54:58.210206 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 15:54:58.221770 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 15:54:58.230286 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 15:54:58.247739 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 15:54:58.342947 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 15:54:58.342988 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 15:54:58.709317 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 15:54:59.083643 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 15:54:59.121950 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 15:54:59.402700 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 15:54:59.417386 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 15:54:59.431914 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 15:54:59.442704 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 15:55:00.946370 [INFO] Skipping Setup Docker Options
2024/02/01 15:55:00.946403 [INFO] Skipping MarkBootstrapped
2024/02/01 15:55:00.946413 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 15:55:00.946534 [INFO] Starting SwitchCFNStack
2024/02/01 15:55:00.946539 [INFO] Executing instruction: stopSqsd
2024/02/01 15:55:00.946543 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 15:55:00.946546 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 15:55:00.946551 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 15:55:00.946568 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 15:55:01.490678 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 15:55:01.490762 [INFO] Executing instruction: StagedockerApplication
2024/02/01 15:55:01.490774 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 15:55:01.519449 [INFO] Pruning containers ...
2024/02/01 15:55:01.519484 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 15:55:01.546120 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
21b1e1d36fdd   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             xenodochial_goldberg

2024/02/01 15:55:01.546152 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 15:55:01.580782 [INFO] Deleted Containers:
21b1e1d36fdd3037e675a83e4064c5d7bb2c6990950fabfee422ebebda8391b4

Total reclaimed space: 0B

2024/02/01 15:55:01.580812 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 15:55:01.612586 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 15:55:01.612848 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 15:55:01.619103 [INFO] application/json

2024/02/01 15:55:01.619129 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 15:55:01.745031 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 15:55:01.745325 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 15:55:01.747180 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 15:55:01.748686 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 15:55:01.748728 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 15:55:01.748731 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 15:55:01.748742 [INFO] Executing instruction: Generate environment file
2024/02/01 15:55:01.748787 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 15:55:01.748791 [INFO] start build docker app
2024/02/01 15:55:01.749470 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 15:55:01.749481 [INFO] fetching image and ports
2024/02/01 15:55:01.751514 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 15:55:01.751612 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 15:55:01.751622 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 15:55:01.751632 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 15:55:03.089630 [INFO] Login Succeeded

2024/02/01 15:55:03.089652 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 15:55:03.089664 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 15:55:03.089680 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 15:55:03.244144 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 15:55:03.244167 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 15:55:03.244178 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 15:55:03.244182 [INFO] start to build docker image
2024/02/01 15:55:03.244204 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 15:55:03.555741 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 15:55:03.555761 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 15:55:03.555764 [INFO] successfully build docker image
2024/02/01 15:55:03.555767 [INFO] save staging docker image id
2024/02/01 15:55:03.555778 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 15:55:03.575558 [INFO] c176d18fbf65

2024/02/01 15:55:03.575704 [INFO] Executing instruction: configure X-Ray
2024/02/01 15:55:03.575712 [INFO] X-Ray is not enabled.
2024/02/01 15:55:03.575715 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 15:55:03.586986 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 15:55:03.589543 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 15:55:03.602473 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 15:55:03.602518 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 15:55:03.613490 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 15:55:03.622390 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 15:55:03.634263 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 15:55:03.709369 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 15:55:04.171985 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 15:55:04.172077 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 15:55:04.446879 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 15:55:04.458015 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 15:55:04.815772 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 15:55:04.825350 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 15:55:04.834233 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 15:55:05.240553 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 15:55:05.256595 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 15:55:05.652533 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 15:55:05.652574 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 15:55:05.665894 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 15:55:05.674842 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 15:55:05.761199 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 15:55:05.762141 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 15:55:05.764145 [INFO] Executing instruction: configure log streaming
2024/02/01 15:55:05.764159 [INFO] log streaming is not enabled
2024/02/01 15:55:05.764163 [INFO] disable log stream
2024/02/01 15:55:05.764179 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 15:55:05.789070 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 15:55:05.820969 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 15:55:05.820994 [INFO] Checking if logs need forced rotation
2024/02/01 15:55:05.821025 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 15:55:06.356473 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 15:55:07.026525 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 15:55:07.028544 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 15:55:07.400479 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 15:55:07.419142 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 15:55:07.419158 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 15:55:07.419170 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 15:55:07.899706 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 15:55:07.899735 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 15:55:07.899764 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 15:55:07.899767 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 15:55:07.899791 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 15:55:07.899803 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 15:55:07.899806 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 15:55:07.899812 [INFO] Executing instruction: stop X-Ray
2024/02/01 15:55:07.899815 [INFO] stop X-Ray ...
2024/02/01 15:55:07.899827 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 15:55:07.929030 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 15:55:07.929063 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 15:55:07.952296 [INFO] Executing instruction: Run Docker Container
2024/02/01 15:55:07.952341 [INFO] stop currently running containers...
2024/02/01 15:55:07.952365 [INFO] detected old app is not docker compose app
2024/02/01 15:55:07.952382 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 15:55:08.004324 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 15:55:08.021752 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 15:55:08.021791 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 15:55:08.036854 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 15:55:08.036890 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 15:55:08.051831 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 15:55:08.051890 [INFO] stopping current container: 21b1e1d36fdd
2024/02/01 15:55:08.051903 [INFO] Running command /bin/sh -c docker ps | grep -q 21b1e1d36fdd
2024/02/01 15:55:08.072053 [INFO] Running command /bin/sh -c docker ps | grep -q 21b1e1d36fdd
2024/02/01 15:55:08.094357 [INFO] Pruning containers ...
2024/02/01 15:55:08.094381 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 15:55:08.119259 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 15:55:08.119290 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 15:55:08.147533 [INFO] Total reclaimed space: 0B

2024/02/01 15:55:08.147562 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 15:55:08.172707 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 15:55:08.172794 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 15:55:08.191902 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 15:55:08.192010 [INFO] Removing /var/app/current/ if it exists
2024/02/01 15:55:08.192233 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 15:55:08.192254 [INFO] detected new app is not docker compose app
2024/02/01 15:55:08.192358 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 15:55:08.644115 [INFO] 00034b3459319513d573967f00021973be0f2310e06b552d448967596be00e35

2024/02/01 15:55:13.648311 [INFO] Running command /bin/sh -c docker ps | grep -q 00034b345931
2024/02/01 15:55:13.672835 [ERROR] docker container quit unexpectedly on 2024-02-01 15:55:13.672824217 +0000 UTC: Command /bin/sh -c docker ps | grep -q 00034b345931 failed with error exit status 1
2024/02/01 15:55:13.672862 [INFO] Running command /bin/sh -c docker logs 00034b345931
2024/02/01 15:55:13.694749 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 00034b345931: Command /bin/sh -c docker ps | grep -q 00034b345931 failed with error exit status 1 

2024/02/01 15:55:13.694759 [INFO] Executing cleanup logic
2024/02/01 15:55:13.694950 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 16:55:14.770177 [INFO] Starting...
2024/02/01 16:55:14.770219 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 16:55:14.770243 [INFO] reading event message file
2024/02/01 16:55:14.770984 [INFO] Engine received EB command userdata-exec

2024/02/01 16:55:14.778009 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 16:55:15.141705 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 16:55:15.604765 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 16:55:15.604882 [INFO] Engine command: (self-startup)

2024/02/01 16:55:15.604902 [INFO] Downloading EB Application...
2024/02/01 16:55:15.604906 [INFO] Region: eu-west-1
2024/02/01 16:55:15.604909 [INFO] envID: e-8gmkc7rmw6
2024/02/01 16:55:15.604912 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 16:55:15.604916 [INFO] Using manifest file name from command request
2024/02/01 16:55:15.604929 [INFO] Unable to get version manifest file.
2024/02/01 16:55:15.604931 [INFO] Downloading latest manifest available.
2024/02/01 16:55:15.604933 [INFO] Download latest app version manifest
2024/02/01 16:55:15.605066 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 16:55:15.646236 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 16:55:15.646426 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 16:55:15.657060 [INFO] Download successful124bytes downloaded
2024/02/01 16:55:15.657280 [INFO] Trying to read and parse version manifest...
2024/02/01 16:55:15.657362 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 16:55:15.685147 [INFO] Download successful264bytes downloaded
2024/02/01 16:55:15.685525 [INFO] Executing instruction: SyncClock
2024/02/01 16:55:15.685531 [INFO] Starting SyncClock
2024/02/01 16:55:15.685543 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 16:55:15.691477 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 16:55:00 2024
System time     : 0.000001156 seconds fast of NTP time
Last offset     : +0.000001206 seconds
RMS offset      : 0.000001851 seconds
Frequency       : 0.535 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.029 ppm
Root delay      : 0.000419855 seconds
Root dispersion : 0.000472029 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/01 16:55:15.691503 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 16:55:15.695895 [INFO] 200 OK

2024/02/01 16:55:15.696081 [INFO] Skipping Configure OS
2024/02/01 16:55:15.696092 [INFO] Skipping LockRepo
2024/02/01 16:55:15.696098 [INFO] Skipping GenerateEBBanner
2024/02/01 16:55:15.696104 [INFO] Skipping Install Process Manager
2024/02/01 16:55:15.696109 [INFO] Skipping install syslog
2024/02/01 16:55:15.696114 [INFO] Skipping install cron
2024/02/01 16:55:15.696119 [INFO] Skipping install proxy
2024/02/01 16:55:15.696125 [INFO] Skipping installhealthd
2024/02/01 16:55:15.696130 [INFO] Skipping Install Log Streaming Manager
2024/02/01 16:55:15.696136 [INFO] Skipping install X-Ray
2024/02/01 16:55:15.696141 [INFO] Skipping install Third Party License
2024/02/01 16:55:15.696149 [INFO] Skipping installSqsd
2024/02/01 16:55:15.696156 [INFO] Skipping bootstraphealthd
2024/02/01 16:55:15.696162 [INFO] Skipping Install yum packages
2024/02/01 16:55:15.696169 [INFO] Skipping install docker-compose
2024/02/01 16:55:15.696175 [INFO] Skipping Configure Docker Daemon
2024/02/01 16:55:15.696181 [INFO] Skipping MarkBaked
2024/02/01 16:55:15.696187 [INFO] Skipping TuneSystemSettings
2024/02/01 16:55:15.696196 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 16:55:15.696200 [INFO] Initialize LogRotate files and directories
2024/02/01 16:55:15.711535 [INFO] Skipping BootstrapCFNHup
2024/02/01 16:55:15.711547 [INFO] Executing instruction: StartCFNHup
2024/02/01 16:55:15.711551 [INFO] Start cfn-hup
2024/02/01 16:55:15.711568 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 16:55:15.729537 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 16:55:15.741648 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 16:55:15.741690 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 16:55:15.741695 [INFO] Executing instruction: Start Docker
2024/02/01 16:55:15.741704 [INFO] Starting Docker...
2024/02/01 16:55:15.741786 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 16:55:15.742842 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 16:55:15.743833 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 16:55:16.155570 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 16:55:16.192187 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 16:55:16.192231 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 16:55:16.206315 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 16:55:16.216882 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 16:55:16.226804 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 16:55:16.312059 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 16:55:16.312095 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 16:55:16.750687 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 16:55:17.118013 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 16:55:17.131229 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 16:55:17.501181 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 16:55:17.516454 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 16:55:17.534149 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 16:55:17.562706 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 16:55:18.940504 [INFO] Skipping Setup Docker Options
2024/02/01 16:55:18.940532 [INFO] Skipping MarkBootstrapped
2024/02/01 16:55:18.940537 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 16:55:18.940656 [INFO] Starting SwitchCFNStack
2024/02/01 16:55:18.940661 [INFO] Executing instruction: stopSqsd
2024/02/01 16:55:18.940665 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 16:55:18.940669 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 16:55:18.940673 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 16:55:18.940690 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 16:55:19.512950 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 16:55:19.513052 [INFO] Executing instruction: StagedockerApplication
2024/02/01 16:55:19.513063 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 16:55:19.534930 [INFO] Pruning containers ...
2024/02/01 16:55:19.534961 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 16:55:19.554096 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
00034b345931   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             sad_euler

2024/02/01 16:55:19.554124 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 16:55:19.580361 [INFO] Deleted Containers:
00034b3459319513d573967f00021973be0f2310e06b552d448967596be00e35

Total reclaimed space: 0B

2024/02/01 16:55:19.580398 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 16:55:19.598886 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 16:55:19.599148 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 16:55:19.602498 [INFO] application/json

2024/02/01 16:55:19.602524 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 16:55:19.681865 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/01 16:55:19.682025 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 16:55:19.683375 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 16:55:19.683402 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 16:55:19.683417 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 16:55:19.683419 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 16:55:19.683423 [INFO] Executing instruction: Generate environment file
2024/02/01 16:55:19.683450 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 16:55:19.683454 [INFO] start build docker app
2024/02/01 16:55:19.683856 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 16:55:19.683861 [INFO] fetching image and ports
2024/02/01 16:55:19.686010 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 16:55:19.686063 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 16:55:19.686074 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 16:55:19.686086 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 16:55:20.622510 [INFO] Login Succeeded

2024/02/01 16:55:20.622530 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 16:55:20.622537 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 16:55:20.622552 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 16:55:20.780377 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 16:55:20.780470 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 16:55:20.780475 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 16:55:20.780497 [INFO] start to build docker image
2024/02/01 16:55:20.780513 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 16:55:21.094938 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 16:55:21.094967 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 16:55:21.094971 [INFO] successfully build docker image
2024/02/01 16:55:21.094973 [INFO] save staging docker image id
2024/02/01 16:55:21.094984 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 16:55:21.125182 [INFO] c176d18fbf65

2024/02/01 16:55:21.125308 [INFO] Executing instruction: configure X-Ray
2024/02/01 16:55:21.125314 [INFO] X-Ray is not enabled.
2024/02/01 16:55:21.125317 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 16:55:21.131452 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 16:55:21.133458 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 16:55:21.146537 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 16:55:21.146569 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 16:55:21.156992 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 16:55:21.165600 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 16:55:21.175890 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 16:55:21.250585 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 16:55:21.633402 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 16:55:21.633483 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 16:55:21.922011 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 16:55:21.933694 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 16:55:22.293408 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 16:55:22.303000 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 16:55:22.312404 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 16:55:22.634546 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 16:55:22.646449 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 16:55:22.994187 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 16:55:22.994226 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 16:55:23.008321 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 16:55:23.017523 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 16:55:23.091632 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 16:55:23.092606 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 16:55:23.093653 [INFO] Executing instruction: configure log streaming
2024/02/01 16:55:23.093664 [INFO] log streaming is not enabled
2024/02/01 16:55:23.093668 [INFO] disable log stream
2024/02/01 16:55:23.093682 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 16:55:23.117187 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 16:55:23.139490 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 16:55:23.139516 [INFO] Checking if logs need forced rotation
2024/02/01 16:55:23.139537 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 16:55:23.730059 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 16:55:24.282029 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 16:55:24.284277 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 16:55:24.380939 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 16:55:24.410226 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 16:55:24.410258 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 16:55:24.410274 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 16:55:24.866264 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 16:55:24.866287 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 16:55:24.866315 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 16:55:24.866319 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 16:55:24.866340 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 16:55:24.866351 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 16:55:24.866354 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 16:55:24.866358 [INFO] Executing instruction: stop X-Ray
2024/02/01 16:55:24.866361 [INFO] stop X-Ray ...
2024/02/01 16:55:24.866371 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 16:55:24.892038 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 16:55:24.892077 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 16:55:24.917596 [INFO] Executing instruction: Run Docker Container
2024/02/01 16:55:24.917628 [INFO] stop currently running containers...
2024/02/01 16:55:24.917639 [INFO] detected old app is not docker compose app
2024/02/01 16:55:24.917653 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 16:55:24.973249 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 16:55:24.989825 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 16:55:24.989861 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 16:55:25.006241 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 16:55:25.006278 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 16:55:25.023917 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 16:55:25.023980 [INFO] stopping current container: 00034b345931
2024/02/01 16:55:25.023993 [INFO] Running command /bin/sh -c docker ps | grep -q 00034b345931
2024/02/01 16:55:25.047607 [INFO] Running command /bin/sh -c docker ps | grep -q 00034b345931
2024/02/01 16:55:25.069823 [INFO] Pruning containers ...
2024/02/01 16:55:25.069848 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 16:55:25.092084 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 16:55:25.092115 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 16:55:25.119649 [INFO] Total reclaimed space: 0B

2024/02/01 16:55:25.119678 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 16:55:25.149606 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 16:55:25.149641 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 16:55:25.178996 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 16:55:25.179017 [INFO] Removing /var/app/current/ if it exists
2024/02/01 16:55:25.179267 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 16:55:25.179292 [INFO] detected new app is not docker compose app
2024/02/01 16:55:25.179369 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 16:55:25.631238 [INFO] cecb55c5eb103b5d3a2b451441fa44e8f2707bca00d1c4fa5814d66905304f44

2024/02/01 16:55:30.635711 [INFO] Running command /bin/sh -c docker ps | grep -q cecb55c5eb10
2024/02/01 16:55:30.691779 [ERROR] docker container quit unexpectedly on 2024-02-01 16:55:30.691763558 +0000 UTC: Command /bin/sh -c docker ps | grep -q cecb55c5eb10 failed with error exit status 1
2024/02/01 16:55:30.691813 [INFO] Running command /bin/sh -c docker logs cecb55c5eb10
2024/02/01 16:55:30.714159 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container cecb55c5eb10: Command /bin/sh -c docker ps | grep -q cecb55c5eb10 failed with error exit status 1 

2024/02/01 16:55:30.714169 [INFO] Executing cleanup logic
2024/02/01 16:55:30.714400 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 17:55:31.721329 [INFO] Starting...
2024/02/01 17:55:31.721394 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 17:55:31.721423 [INFO] reading event message file
2024/02/01 17:55:31.722111 [INFO] Engine received EB command userdata-exec

2024/02/01 17:55:31.730980 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 17:55:32.163322 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 17:55:32.610111 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 17:55:32.610394 [INFO] Engine command: (self-startup)

2024/02/01 17:55:32.610406 [INFO] Downloading EB Application...
2024/02/01 17:55:32.610410 [INFO] Region: eu-west-1
2024/02/01 17:55:32.610413 [INFO] envID: e-8gmkc7rmw6
2024/02/01 17:55:32.610416 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 17:55:32.610419 [INFO] Using manifest file name from command request
2024/02/01 17:55:32.610436 [INFO] Unable to get version manifest file.
2024/02/01 17:55:32.610501 [INFO] Downloading latest manifest available.
2024/02/01 17:55:32.610506 [INFO] Download latest app version manifest
2024/02/01 17:55:32.611082 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 17:55:32.657347 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 17:55:32.657541 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 17:55:32.670887 [INFO] Download successful124bytes downloaded
2024/02/01 17:55:32.671034 [INFO] Trying to read and parse version manifest...
2024/02/01 17:55:32.671100 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 17:55:32.698448 [INFO] Download successful264bytes downloaded
2024/02/01 17:55:32.698738 [INFO] Executing instruction: SyncClock
2024/02/01 17:55:32.698744 [INFO] Starting SyncClock
2024/02/01 17:55:32.698755 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 17:55:32.704200 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 17:55:21 2024
System time     : 0.000000320 seconds fast of NTP time
Last offset     : -0.000000602 seconds
RMS offset      : 0.000001449 seconds
Frequency       : 0.587 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.029 ppm
Root delay      : 0.000421693 seconds
Root dispersion : 0.000433198 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/01 17:55:32.704234 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 17:55:32.708672 [INFO] 200 OK

2024/02/01 17:55:32.708765 [INFO] Skipping Configure OS
2024/02/01 17:55:32.708769 [INFO] Skipping LockRepo
2024/02/01 17:55:32.708773 [INFO] Skipping GenerateEBBanner
2024/02/01 17:55:32.708778 [INFO] Skipping Install Process Manager
2024/02/01 17:55:32.708782 [INFO] Skipping install syslog
2024/02/01 17:55:32.708786 [INFO] Skipping install cron
2024/02/01 17:55:32.708789 [INFO] Skipping install proxy
2024/02/01 17:55:32.708793 [INFO] Skipping installhealthd
2024/02/01 17:55:32.708797 [INFO] Skipping Install Log Streaming Manager
2024/02/01 17:55:32.708801 [INFO] Skipping install X-Ray
2024/02/01 17:55:32.708809 [INFO] Skipping install Third Party License
2024/02/01 17:55:32.708814 [INFO] Skipping installSqsd
2024/02/01 17:55:32.708818 [INFO] Skipping bootstraphealthd
2024/02/01 17:55:32.708822 [INFO] Skipping Install yum packages
2024/02/01 17:55:32.708826 [INFO] Skipping install docker-compose
2024/02/01 17:55:32.708830 [INFO] Skipping Configure Docker Daemon
2024/02/01 17:55:32.708834 [INFO] Skipping MarkBaked
2024/02/01 17:55:32.708838 [INFO] Skipping TuneSystemSettings
2024/02/01 17:55:32.708840 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 17:55:32.708842 [INFO] Initialize LogRotate files and directories
2024/02/01 17:55:32.722845 [INFO] Skipping BootstrapCFNHup
2024/02/01 17:55:32.722855 [INFO] Executing instruction: StartCFNHup
2024/02/01 17:55:32.722858 [INFO] Start cfn-hup
2024/02/01 17:55:32.722876 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 17:55:32.735738 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 17:55:32.744648 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 17:55:32.744682 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 17:55:32.744686 [INFO] Executing instruction: Start Docker
2024/02/01 17:55:32.744690 [INFO] Starting Docker...
2024/02/01 17:55:32.744770 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 17:55:32.746067 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 17:55:32.747010 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 17:55:33.183570 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 17:55:33.201454 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 17:55:33.201490 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 17:55:33.215299 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 17:55:33.224908 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 17:55:33.237376 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 17:55:33.342047 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 17:55:33.342076 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 17:55:33.657864 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 17:55:33.957573 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 17:55:33.969409 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 17:55:34.269538 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 17:55:34.278514 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 17:55:34.293612 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 17:55:34.301995 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 17:55:35.540879 [INFO] Skipping Setup Docker Options
2024/02/01 17:55:35.540905 [INFO] Skipping MarkBootstrapped
2024/02/01 17:55:35.540909 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 17:55:35.541026 [INFO] Starting SwitchCFNStack
2024/02/01 17:55:35.541032 [INFO] Executing instruction: stopSqsd
2024/02/01 17:55:35.541036 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 17:55:35.541039 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 17:55:35.541042 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 17:55:35.541060 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 17:55:36.055833 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 17:55:36.055913 [INFO] Executing instruction: StagedockerApplication
2024/02/01 17:55:36.055926 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 17:55:36.077593 [INFO] Pruning containers ...
2024/02/01 17:55:36.077629 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 17:55:36.099838 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
cecb55c5eb10   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             beautiful_gagarin

2024/02/01 17:55:36.099867 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 17:55:36.126814 [INFO] Deleted Containers:
cecb55c5eb103b5d3a2b451441fa44e8f2707bca00d1c4fa5814d66905304f44

Total reclaimed space: 0B

2024/02/01 17:55:36.126838 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 17:55:36.146224 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 17:55:36.146481 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 17:55:36.149234 [INFO] application/json

2024/02/01 17:55:36.149254 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 17:55:36.235756 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 17:55:36.235945 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 17:55:36.237373 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 17:55:36.237407 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 17:55:36.237601 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 17:55:36.237607 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 17:55:36.237613 [INFO] Executing instruction: Generate environment file
2024/02/01 17:55:36.237645 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 17:55:36.237649 [INFO] start build docker app
2024/02/01 17:55:36.238098 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 17:55:36.238102 [INFO] fetching image and ports
2024/02/01 17:55:36.239598 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 17:55:36.239696 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 17:55:36.239707 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 17:55:36.239719 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 17:55:37.230725 [INFO] Login Succeeded

2024/02/01 17:55:37.230748 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 17:55:37.230754 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 17:55:37.230770 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 17:55:37.372393 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 17:55:37.372419 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 17:55:37.372423 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 17:55:37.372427 [INFO] start to build docker image
2024/02/01 17:55:37.372443 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 17:55:37.640871 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 17:55:37.640892 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 17:55:37.640896 [INFO] successfully build docker image
2024/02/01 17:55:37.640898 [INFO] save staging docker image id
2024/02/01 17:55:37.640908 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 17:55:37.666027 [INFO] c176d18fbf65

2024/02/01 17:55:37.666235 [INFO] Executing instruction: configure X-Ray
2024/02/01 17:55:37.666242 [INFO] X-Ray is not enabled.
2024/02/01 17:55:37.666245 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 17:55:37.671658 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 17:55:37.673266 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 17:55:37.688742 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 17:55:37.688777 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 17:55:37.701696 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 17:55:37.711056 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 17:55:37.724048 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 17:55:37.818263 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 17:55:38.184638 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 17:55:38.184720 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 17:55:38.489271 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 17:55:38.502251 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 17:55:38.829411 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 17:55:38.846169 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 17:55:38.859357 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 17:55:39.164505 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 17:55:39.174217 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 17:55:39.517551 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 17:55:39.517586 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 17:55:39.533096 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 17:55:39.544847 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 17:55:39.624480 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 17:55:39.625495 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 17:55:39.626652 [INFO] Executing instruction: configure log streaming
2024/02/01 17:55:39.626663 [INFO] log streaming is not enabled
2024/02/01 17:55:39.626667 [INFO] disable log stream
2024/02/01 17:55:39.626682 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 17:55:39.650856 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 17:55:39.680516 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 17:55:39.680540 [INFO] Checking if logs need forced rotation
2024/02/01 17:55:39.680559 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 17:55:40.165675 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 17:55:40.679232 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 17:55:40.681004 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 17:55:41.188832 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 17:55:41.205205 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 17:55:41.205219 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 17:55:41.205231 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 17:55:41.697948 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 17:55:41.697975 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 17:55:41.698004 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 17:55:41.698008 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 17:55:41.698030 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 17:55:41.698041 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 17:55:41.698044 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 17:55:41.698049 [INFO] Executing instruction: stop X-Ray
2024/02/01 17:55:41.698051 [INFO] stop X-Ray ...
2024/02/01 17:55:41.698060 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 17:55:41.712513 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 17:55:41.712544 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 17:55:41.728711 [INFO] Executing instruction: Run Docker Container
2024/02/01 17:55:41.728740 [INFO] stop currently running containers...
2024/02/01 17:55:41.728751 [INFO] detected old app is not docker compose app
2024/02/01 17:55:41.728766 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 17:55:41.812449 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 17:55:41.828997 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 17:55:41.829025 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 17:55:41.844824 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 17:55:41.844857 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 17:55:41.859413 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 17:55:41.859467 [INFO] stopping current container: cecb55c5eb10
2024/02/01 17:55:41.859480 [INFO] Running command /bin/sh -c docker ps | grep -q cecb55c5eb10
2024/02/01 17:55:41.880743 [INFO] Running command /bin/sh -c docker ps | grep -q cecb55c5eb10
2024/02/01 17:55:41.901161 [INFO] Pruning containers ...
2024/02/01 17:55:41.901213 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 17:55:41.937525 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 17:55:41.937561 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 17:55:41.958124 [INFO] Total reclaimed space: 0B

2024/02/01 17:55:41.958150 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 17:55:41.980313 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 17:55:41.980350 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 17:55:42.011769 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 17:55:42.011793 [INFO] Removing /var/app/current/ if it exists
2024/02/01 17:55:42.012052 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 17:55:42.012102 [INFO] detected new app is not docker compose app
2024/02/01 17:55:42.012308 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 17:55:42.404890 [INFO] ca0d652e2a2955067362a07c6b116307325aa1871ef08e45517938074d2fcafa

2024/02/01 17:55:47.405294 [INFO] Running command /bin/sh -c docker ps | grep -q ca0d652e2a29
2024/02/01 17:55:47.433450 [ERROR] docker container quit unexpectedly on 2024-02-01 17:55:47.433431361 +0000 UTC: Command /bin/sh -c docker ps | grep -q ca0d652e2a29 failed with error exit status 1
2024/02/01 17:55:47.433565 [INFO] Running command /bin/sh -c docker logs ca0d652e2a29
2024/02/01 17:55:47.463056 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container ca0d652e2a29: Command /bin/sh -c docker ps | grep -q ca0d652e2a29 failed with error exit status 1 

2024/02/01 17:55:47.463067 [INFO] Executing cleanup logic
2024/02/01 17:55:47.463305 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 18:55:48.523398 [INFO] Starting...
2024/02/01 18:55:48.523441 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 18:55:48.523464 [INFO] reading event message file
2024/02/01 18:55:48.524434 [INFO] Engine received EB command userdata-exec

2024/02/01 18:55:48.532854 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 18:55:48.921538 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 18:55:49.492394 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 18:55:49.492552 [INFO] Engine command: (self-startup)

2024/02/01 18:55:49.492559 [INFO] Downloading EB Application...
2024/02/01 18:55:49.492561 [INFO] Region: eu-west-1
2024/02/01 18:55:49.492563 [INFO] envID: e-8gmkc7rmw6
2024/02/01 18:55:49.492566 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 18:55:49.492568 [INFO] Using manifest file name from command request
2024/02/01 18:55:49.492580 [INFO] Unable to get version manifest file.
2024/02/01 18:55:49.492582 [INFO] Downloading latest manifest available.
2024/02/01 18:55:49.492584 [INFO] Download latest app version manifest
2024/02/01 18:55:49.492709 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 18:55:49.539190 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 18:55:49.539392 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 18:55:49.552647 [INFO] Download successful124bytes downloaded
2024/02/01 18:55:49.552792 [INFO] Trying to read and parse version manifest...
2024/02/01 18:55:49.552877 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 18:55:49.584315 [INFO] Download successful264bytes downloaded
2024/02/01 18:55:49.584688 [INFO] Executing instruction: SyncClock
2024/02/01 18:55:49.584695 [INFO] Starting SyncClock
2024/02/01 18:55:49.584705 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 18:55:49.595011 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 18:55:45 2024
System time     : 0.000009911 seconds slow of NTP time
Last offset     : -0.000012330 seconds
RMS offset      : 0.000008751 seconds
Frequency       : 0.641 ppm fast
Residual freq   : -0.007 ppm
Skew            : 0.190 ppm
Root delay      : 0.000421601 seconds
Root dispersion : 0.000399901 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/01 18:55:49.595040 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 18:55:49.599285 [INFO] 200 OK

2024/02/01 18:55:49.599448 [INFO] Skipping Configure OS
2024/02/01 18:55:49.599458 [INFO] Skipping LockRepo
2024/02/01 18:55:49.599472 [INFO] Skipping GenerateEBBanner
2024/02/01 18:55:49.599478 [INFO] Skipping Install Process Manager
2024/02/01 18:55:49.599483 [INFO] Skipping install syslog
2024/02/01 18:55:49.599487 [INFO] Skipping install cron
2024/02/01 18:55:49.599493 [INFO] Skipping install proxy
2024/02/01 18:55:49.599506 [INFO] Skipping installhealthd
2024/02/01 18:55:49.599512 [INFO] Skipping Install Log Streaming Manager
2024/02/01 18:55:49.599526 [INFO] Skipping install X-Ray
2024/02/01 18:55:49.599538 [INFO] Skipping install Third Party License
2024/02/01 18:55:49.599551 [INFO] Skipping installSqsd
2024/02/01 18:55:49.599563 [INFO] Skipping bootstraphealthd
2024/02/01 18:55:49.599580 [INFO] Skipping Install yum packages
2024/02/01 18:55:49.599593 [INFO] Skipping install docker-compose
2024/02/01 18:55:49.599606 [INFO] Skipping Configure Docker Daemon
2024/02/01 18:55:49.599618 [INFO] Skipping MarkBaked
2024/02/01 18:55:49.599630 [INFO] Skipping TuneSystemSettings
2024/02/01 18:55:49.599634 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 18:55:49.599644 [INFO] Initialize LogRotate files and directories
2024/02/01 18:55:49.630696 [INFO] Skipping BootstrapCFNHup
2024/02/01 18:55:49.630706 [INFO] Executing instruction: StartCFNHup
2024/02/01 18:55:49.630709 [INFO] Start cfn-hup
2024/02/01 18:55:49.630725 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 18:55:49.660867 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 18:55:49.690868 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 18:55:49.690922 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 18:55:49.691036 [INFO] Executing instruction: Start Docker
2024/02/01 18:55:49.691041 [INFO] Starting Docker...
2024/02/01 18:55:49.691242 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 18:55:49.693589 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 18:55:49.696159 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 18:55:50.169571 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 18:55:50.185783 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 18:55:50.185830 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 18:55:50.196305 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 18:55:50.204916 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 18:55:50.216253 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 18:55:50.259785 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 18:55:50.259818 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 18:55:50.586440 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 18:55:50.890395 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 18:55:50.901518 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 18:55:51.251315 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 18:55:51.261978 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 18:55:51.276094 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 18:55:51.285083 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 18:55:52.520605 [INFO] Skipping Setup Docker Options
2024/02/01 18:55:52.520627 [INFO] Skipping MarkBootstrapped
2024/02/01 18:55:52.520632 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 18:55:52.520752 [INFO] Starting SwitchCFNStack
2024/02/01 18:55:52.520757 [INFO] Executing instruction: stopSqsd
2024/02/01 18:55:52.520761 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 18:55:52.520764 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 18:55:52.520768 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 18:55:52.520786 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 18:55:53.019954 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 18:55:53.019978 [INFO] Executing instruction: StagedockerApplication
2024/02/01 18:55:53.019998 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 18:55:53.043958 [INFO] Pruning containers ...
2024/02/01 18:55:53.043987 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 18:55:53.064361 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
ca0d652e2a29   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             sleepy_dhawan

2024/02/01 18:55:53.064394 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 18:55:53.093987 [INFO] Deleted Containers:
ca0d652e2a2955067362a07c6b116307325aa1871ef08e45517938074d2fcafa

Total reclaimed space: 0B

2024/02/01 18:55:53.094011 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 18:55:53.123341 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 18:55:53.124839 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 18:55:53.128171 [INFO] application/json

2024/02/01 18:55:53.128189 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 18:55:53.219125 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/01 18:55:53.219315 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 18:55:53.220692 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 18:55:53.220886 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 18:55:53.220909 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 18:55:53.220912 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 18:55:53.220918 [INFO] Executing instruction: Generate environment file
2024/02/01 18:55:53.220946 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 18:55:53.220949 [INFO] start build docker app
2024/02/01 18:55:53.221308 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 18:55:53.221312 [INFO] fetching image and ports
2024/02/01 18:55:53.222957 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 18:55:53.223030 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 18:55:53.223039 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 18:55:53.223048 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 18:55:54.098655 [INFO] Login Succeeded

2024/02/01 18:55:54.098673 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 18:55:54.098678 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 18:55:54.098695 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 18:55:54.265062 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 18:55:54.265090 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 18:55:54.265095 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 18:55:54.265098 [INFO] start to build docker image
2024/02/01 18:55:54.265114 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 18:55:54.552679 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 18:55:54.552708 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 18:55:54.552712 [INFO] successfully build docker image
2024/02/01 18:55:54.552714 [INFO] save staging docker image id
2024/02/01 18:55:54.552728 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 18:55:54.573820 [INFO] c176d18fbf65

2024/02/01 18:55:54.573957 [INFO] Executing instruction: configure X-Ray
2024/02/01 18:55:54.573964 [INFO] X-Ray is not enabled.
2024/02/01 18:55:54.573968 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 18:55:54.579566 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 18:55:54.581496 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 18:55:54.594504 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 18:55:54.594568 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 18:55:54.609833 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 18:55:54.618741 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 18:55:54.628453 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 18:55:54.710496 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 18:55:55.062633 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 18:55:55.062716 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 18:55:55.436067 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 18:55:55.450834 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 18:55:55.719567 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 18:55:55.728871 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 18:55:55.737236 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 18:55:56.030856 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 18:55:56.041785 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 18:55:56.382847 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 18:55:56.382894 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 18:55:56.398592 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 18:55:56.408076 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 18:55:56.483303 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 18:55:56.484240 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 18:55:56.485107 [INFO] Executing instruction: configure log streaming
2024/02/01 18:55:56.485117 [INFO] log streaming is not enabled
2024/02/01 18:55:56.485121 [INFO] disable log stream
2024/02/01 18:55:56.485135 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 18:55:56.508682 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 18:55:56.531985 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 18:55:56.532019 [INFO] Checking if logs need forced rotation
2024/02/01 18:55:56.532038 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 18:55:57.132764 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 18:55:57.577301 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 18:55:57.579669 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 18:55:58.200408 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 18:55:58.218091 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 18:55:58.218106 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 18:55:58.218119 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 18:55:58.651208 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 18:55:58.651242 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 18:55:58.651265 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 18:55:58.651268 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 18:55:58.651290 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 18:55:58.651300 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 18:55:58.651303 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 18:55:58.651309 [INFO] Executing instruction: stop X-Ray
2024/02/01 18:55:58.651312 [INFO] stop X-Ray ...
2024/02/01 18:55:58.651322 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 18:55:58.665279 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 18:55:58.665307 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 18:55:58.683259 [INFO] Executing instruction: Run Docker Container
2024/02/01 18:55:58.683285 [INFO] stop currently running containers...
2024/02/01 18:55:58.683294 [INFO] detected old app is not docker compose app
2024/02/01 18:55:58.683305 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 18:55:58.702636 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 18:55:58.719617 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 18:55:58.719704 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 18:55:58.739020 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 18:55:58.739062 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 18:55:58.759069 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 18:55:58.759124 [INFO] stopping current container: ca0d652e2a29
2024/02/01 18:55:58.759136 [INFO] Running command /bin/sh -c docker ps | grep -q ca0d652e2a29
2024/02/01 18:55:58.784043 [INFO] Running command /bin/sh -c docker ps | grep -q ca0d652e2a29
2024/02/01 18:55:58.805240 [INFO] Pruning containers ...
2024/02/01 18:55:58.805268 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 18:55:58.828904 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 18:55:58.828953 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 18:55:58.853156 [INFO] Total reclaimed space: 0B

2024/02/01 18:55:58.853184 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 18:55:58.900477 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 18:55:58.900511 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 18:55:58.919474 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 18:55:58.919498 [INFO] Removing /var/app/current/ if it exists
2024/02/01 18:55:58.919644 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 18:55:58.919662 [INFO] detected new app is not docker compose app
2024/02/01 18:55:58.919708 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 18:55:59.313294 [INFO] 254b626f7aecf113b7cdc885b78846fb2a0fb13d01a7bb5271183eb97141320f

2024/02/01 18:56:04.317730 [INFO] Running command /bin/sh -c docker ps | grep -q 254b626f7aec
2024/02/01 18:56:04.346880 [ERROR] docker container quit unexpectedly on 2024-02-01 18:56:04.346862657 +0000 UTC: Command /bin/sh -c docker ps | grep -q 254b626f7aec failed with error exit status 1
2024/02/01 18:56:04.346908 [INFO] Running command /bin/sh -c docker logs 254b626f7aec
2024/02/01 18:56:04.373415 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 254b626f7aec: Command /bin/sh -c docker ps | grep -q 254b626f7aec failed with error exit status 1 

2024/02/01 18:56:04.373424 [INFO] Executing cleanup logic
2024/02/01 18:56:04.373624 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 19:56:05.453362 [INFO] Starting...
2024/02/01 19:56:05.453451 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 19:56:05.453483 [INFO] reading event message file
2024/02/01 19:56:05.455723 [INFO] Engine received EB command userdata-exec

2024/02/01 19:56:05.461340 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 19:56:05.910568 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 19:56:06.374697 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 19:56:06.374808 [INFO] Engine command: (self-startup)

2024/02/01 19:56:06.374817 [INFO] Downloading EB Application...
2024/02/01 19:56:06.374822 [INFO] Region: eu-west-1
2024/02/01 19:56:06.374825 [INFO] envID: e-8gmkc7rmw6
2024/02/01 19:56:06.374828 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 19:56:06.374831 [INFO] Using manifest file name from command request
2024/02/01 19:56:06.374845 [INFO] Unable to get version manifest file.
2024/02/01 19:56:06.374847 [INFO] Downloading latest manifest available.
2024/02/01 19:56:06.374849 [INFO] Download latest app version manifest
2024/02/01 19:56:06.374969 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 19:56:06.412980 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 19:56:06.413266 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 19:56:06.424521 [INFO] Download successful124bytes downloaded
2024/02/01 19:56:06.424666 [INFO] Trying to read and parse version manifest...
2024/02/01 19:56:06.424991 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 19:56:06.449609 [INFO] Download successful264bytes downloaded
2024/02/01 19:56:06.450050 [INFO] Executing instruction: SyncClock
2024/02/01 19:56:06.450057 [INFO] Starting SyncClock
2024/02/01 19:56:06.450067 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 19:56:06.456139 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 19:55:52 2024
System time     : 0.000000515 seconds fast of NTP time
Last offset     : +0.000001947 seconds
RMS offset      : 0.000004549 seconds
Frequency       : 0.462 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.099 ppm
Root delay      : 0.000440206 seconds
Root dispersion : 0.000430044 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/01 19:56:06.456172 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 19:56:06.460902 [INFO] 200 OK

2024/02/01 19:56:06.461136 [INFO] Skipping Configure OS
2024/02/01 19:56:06.461148 [INFO] Skipping LockRepo
2024/02/01 19:56:06.461153 [INFO] Skipping GenerateEBBanner
2024/02/01 19:56:06.461157 [INFO] Skipping Install Process Manager
2024/02/01 19:56:06.461161 [INFO] Skipping install syslog
2024/02/01 19:56:06.461165 [INFO] Skipping install cron
2024/02/01 19:56:06.461168 [INFO] Skipping install proxy
2024/02/01 19:56:06.461172 [INFO] Skipping installhealthd
2024/02/01 19:56:06.461176 [INFO] Skipping Install Log Streaming Manager
2024/02/01 19:56:06.461179 [INFO] Skipping install X-Ray
2024/02/01 19:56:06.461183 [INFO] Skipping install Third Party License
2024/02/01 19:56:06.461188 [INFO] Skipping installSqsd
2024/02/01 19:56:06.461192 [INFO] Skipping bootstraphealthd
2024/02/01 19:56:06.461196 [INFO] Skipping Install yum packages
2024/02/01 19:56:06.461200 [INFO] Skipping install docker-compose
2024/02/01 19:56:06.461203 [INFO] Skipping Configure Docker Daemon
2024/02/01 19:56:06.461207 [INFO] Skipping MarkBaked
2024/02/01 19:56:06.461211 [INFO] Skipping TuneSystemSettings
2024/02/01 19:56:06.461214 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 19:56:06.461216 [INFO] Initialize LogRotate files and directories
2024/02/01 19:56:06.505957 [INFO] Skipping BootstrapCFNHup
2024/02/01 19:56:06.505968 [INFO] Executing instruction: StartCFNHup
2024/02/01 19:56:06.505970 [INFO] Start cfn-hup
2024/02/01 19:56:06.505991 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 19:56:06.520252 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 19:56:06.529845 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 19:56:06.529881 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 19:56:06.529885 [INFO] Executing instruction: Start Docker
2024/02/01 19:56:06.529889 [INFO] Starting Docker...
2024/02/01 19:56:06.529971 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 19:56:06.531270 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 19:56:06.532187 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 19:56:06.934240 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 19:56:06.949716 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 19:56:06.949754 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 19:56:06.960957 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 19:56:06.970658 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 19:56:06.985034 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 19:56:07.082709 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 19:56:07.082822 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 19:56:07.505390 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 19:56:07.836955 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 19:56:07.848615 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 19:56:08.203953 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 19:56:08.215236 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 19:56:08.229922 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 19:56:08.241670 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 19:56:09.368575 [INFO] Skipping Setup Docker Options
2024/02/01 19:56:09.368602 [INFO] Skipping MarkBootstrapped
2024/02/01 19:56:09.368605 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 19:56:09.368725 [INFO] Starting SwitchCFNStack
2024/02/01 19:56:09.368730 [INFO] Executing instruction: stopSqsd
2024/02/01 19:56:09.368734 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 19:56:09.368738 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 19:56:09.368741 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 19:56:09.368760 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 19:56:09.847143 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 19:56:09.847196 [INFO] Executing instruction: StagedockerApplication
2024/02/01 19:56:09.849994 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 19:56:09.892512 [INFO] Pruning containers ...
2024/02/01 19:56:09.892541 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 19:56:09.920667 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
254b626f7aec   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             jovial_feistel

2024/02/01 19:56:09.920699 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 19:56:09.948667 [INFO] Deleted Containers:
254b626f7aecf113b7cdc885b78846fb2a0fb13d01a7bb5271183eb97141320f

Total reclaimed space: 0B

2024/02/01 19:56:09.948691 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 19:56:09.968360 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 19:56:09.968635 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 19:56:09.971676 [INFO] application/json

2024/02/01 19:56:09.971701 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 19:56:10.043695 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/01 19:56:10.043874 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 19:56:10.045190 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 19:56:10.045212 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 19:56:10.045229 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 19:56:10.045233 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 19:56:10.045239 [INFO] Executing instruction: Generate environment file
2024/02/01 19:56:10.045270 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 19:56:10.045274 [INFO] start build docker app
2024/02/01 19:56:10.045739 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 19:56:10.045742 [INFO] fetching image and ports
2024/02/01 19:56:10.051111 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 19:56:10.051222 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 19:56:10.051232 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 19:56:10.051542 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 19:56:11.038056 [INFO] Login Succeeded

2024/02/01 19:56:11.038072 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 19:56:11.038080 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 19:56:11.038100 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 19:56:11.198679 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 19:56:11.199093 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 19:56:11.199100 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 19:56:11.199104 [INFO] start to build docker image
2024/02/01 19:56:11.199129 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 19:56:11.458241 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 19:56:11.458268 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 19:56:11.458273 [INFO] successfully build docker image
2024/02/01 19:56:11.458276 [INFO] save staging docker image id
2024/02/01 19:56:11.458358 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 19:56:11.493222 [INFO] c176d18fbf65

2024/02/01 19:56:11.493361 [INFO] Executing instruction: configure X-Ray
2024/02/01 19:56:11.493367 [INFO] X-Ray is not enabled.
2024/02/01 19:56:11.493370 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 19:56:11.511114 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 19:56:11.515285 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 19:56:11.534537 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 19:56:11.534573 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 19:56:11.551064 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 19:56:11.568133 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 19:56:11.591152 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 19:56:11.708471 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 19:56:12.009615 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 19:56:12.009704 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 19:56:12.331005 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 19:56:12.343568 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 19:56:12.653316 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 19:56:12.663841 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 19:56:12.675245 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 19:56:13.016104 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 19:56:13.026379 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 19:56:13.324067 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 19:56:13.324105 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 19:56:13.336249 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 19:56:13.344612 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 19:56:13.422746 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 19:56:13.423847 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 19:56:13.424918 [INFO] Executing instruction: configure log streaming
2024/02/01 19:56:13.424928 [INFO] log streaming is not enabled
2024/02/01 19:56:13.424932 [INFO] disable log stream
2024/02/01 19:56:13.424949 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 19:56:13.446134 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 19:56:13.470673 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 19:56:13.470699 [INFO] Checking if logs need forced rotation
2024/02/01 19:56:13.470725 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 19:56:13.969332 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 19:56:14.476337 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 19:56:14.478156 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 19:56:14.891039 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 19:56:14.907423 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 19:56:14.907437 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 19:56:14.907448 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 19:56:15.393613 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 19:56:15.393653 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 19:56:15.393679 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 19:56:15.393682 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 19:56:15.393702 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 19:56:15.393715 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 19:56:15.393719 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 19:56:15.393726 [INFO] Executing instruction: stop X-Ray
2024/02/01 19:56:15.393729 [INFO] stop X-Ray ...
2024/02/01 19:56:15.393741 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 19:56:15.411796 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 19:56:15.411833 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 19:56:15.430273 [INFO] Executing instruction: Run Docker Container
2024/02/01 19:56:15.430304 [INFO] stop currently running containers...
2024/02/01 19:56:15.430318 [INFO] detected old app is not docker compose app
2024/02/01 19:56:15.430331 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 19:56:15.502632 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 19:56:15.519962 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 19:56:15.519996 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 19:56:15.534250 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 19:56:15.534285 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 19:56:15.548365 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 19:56:15.548418 [INFO] stopping current container: 254b626f7aec
2024/02/01 19:56:15.548432 [INFO] Running command /bin/sh -c docker ps | grep -q 254b626f7aec
2024/02/01 19:56:15.570256 [INFO] Running command /bin/sh -c docker ps | grep -q 254b626f7aec
2024/02/01 19:56:15.593209 [INFO] Pruning containers ...
2024/02/01 19:56:15.593233 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 19:56:15.616682 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 19:56:15.616724 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 19:56:15.636027 [INFO] Total reclaimed space: 0B

2024/02/01 19:56:15.636051 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 19:56:15.660583 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 19:56:15.660614 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 19:56:15.681196 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 19:56:15.681218 [INFO] Removing /var/app/current/ if it exists
2024/02/01 19:56:15.681305 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 19:56:15.681334 [INFO] detected new app is not docker compose app
2024/02/01 19:56:15.681513 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 19:56:16.112694 [INFO] 10d9fdceebcee2ce435c99810284ef138750ae2bad1777d0099bdf9b6fcbb5ba

2024/02/01 19:56:21.113075 [INFO] Running command /bin/sh -c docker ps | grep -q 10d9fdceebce
2024/02/01 19:56:21.153748 [ERROR] docker container quit unexpectedly on 2024-02-01 19:56:21.153737288 +0000 UTC: Command /bin/sh -c docker ps | grep -q 10d9fdceebce failed with error exit status 1
2024/02/01 19:56:21.153774 [INFO] Running command /bin/sh -c docker logs 10d9fdceebce
2024/02/01 19:56:21.178446 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 10d9fdceebce: Command /bin/sh -c docker ps | grep -q 10d9fdceebce failed with error exit status 1 

2024/02/01 19:56:21.178457 [INFO] Executing cleanup logic
2024/02/01 19:56:21.178658 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 20:56:22.080429 [INFO] Starting...
2024/02/01 20:56:22.080469 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 20:56:22.080493 [INFO] reading event message file
2024/02/01 20:56:22.081200 [INFO] Engine received EB command userdata-exec

2024/02/01 20:56:22.086377 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 20:56:22.550402 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 20:56:22.972852 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 20:56:22.972953 [INFO] Engine command: (self-startup)

2024/02/01 20:56:22.972962 [INFO] Downloading EB Application...
2024/02/01 20:56:22.972965 [INFO] Region: eu-west-1
2024/02/01 20:56:22.972969 [INFO] envID: e-8gmkc7rmw6
2024/02/01 20:56:22.972972 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 20:56:22.972975 [INFO] Using manifest file name from command request
2024/02/01 20:56:22.972990 [INFO] Unable to get version manifest file.
2024/02/01 20:56:22.972992 [INFO] Downloading latest manifest available.
2024/02/01 20:56:22.972994 [INFO] Download latest app version manifest
2024/02/01 20:56:22.973262 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 20:56:23.024338 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 20:56:23.024567 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 20:56:23.035742 [INFO] Download successful124bytes downloaded
2024/02/01 20:56:23.035983 [INFO] Trying to read and parse version manifest...
2024/02/01 20:56:23.036063 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 20:56:23.093270 [INFO] Download successful264bytes downloaded
2024/02/01 20:56:23.093678 [INFO] Executing instruction: SyncClock
2024/02/01 20:56:23.093684 [INFO] Starting SyncClock
2024/02/01 20:56:23.093694 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 20:56:23.099880 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 20:56:15 2024
System time     : 0.000004287 seconds slow of NTP time
Last offset     : -0.000004715 seconds
RMS offset      : 0.000002963 seconds
Frequency       : 0.445 ppm fast
Residual freq   : -0.003 ppm
Skew            : 0.074 ppm
Root delay      : 0.000407868 seconds
Root dispersion : 0.000424453 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/01 20:56:23.099983 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 20:56:23.104352 [INFO] 200 OK

2024/02/01 20:56:23.104464 [INFO] Skipping Configure OS
2024/02/01 20:56:23.104470 [INFO] Skipping LockRepo
2024/02/01 20:56:23.104474 [INFO] Skipping GenerateEBBanner
2024/02/01 20:56:23.104479 [INFO] Skipping Install Process Manager
2024/02/01 20:56:23.104483 [INFO] Skipping install syslog
2024/02/01 20:56:23.104487 [INFO] Skipping install cron
2024/02/01 20:56:23.104490 [INFO] Skipping install proxy
2024/02/01 20:56:23.104494 [INFO] Skipping installhealthd
2024/02/01 20:56:23.104498 [INFO] Skipping Install Log Streaming Manager
2024/02/01 20:56:23.104502 [INFO] Skipping install X-Ray
2024/02/01 20:56:23.104505 [INFO] Skipping install Third Party License
2024/02/01 20:56:23.104510 [INFO] Skipping installSqsd
2024/02/01 20:56:23.104517 [INFO] Skipping bootstraphealthd
2024/02/01 20:56:23.104521 [INFO] Skipping Install yum packages
2024/02/01 20:56:23.104525 [INFO] Skipping install docker-compose
2024/02/01 20:56:23.104529 [INFO] Skipping Configure Docker Daemon
2024/02/01 20:56:23.104534 [INFO] Skipping MarkBaked
2024/02/01 20:56:23.104550 [INFO] Skipping TuneSystemSettings
2024/02/01 20:56:23.104554 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 20:56:23.104557 [INFO] Initialize LogRotate files and directories
2024/02/01 20:56:23.115713 [INFO] Skipping BootstrapCFNHup
2024/02/01 20:56:23.115722 [INFO] Executing instruction: StartCFNHup
2024/02/01 20:56:23.115724 [INFO] Start cfn-hup
2024/02/01 20:56:23.115742 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 20:56:23.129529 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 20:56:23.138647 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 20:56:23.138678 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 20:56:23.138681 [INFO] Executing instruction: Start Docker
2024/02/01 20:56:23.138684 [INFO] Starting Docker...
2024/02/01 20:56:23.138742 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 20:56:23.139653 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 20:56:23.140527 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 20:56:23.675953 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 20:56:23.705193 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 20:56:23.705229 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 20:56:23.719522 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 20:56:23.734346 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 20:56:23.752472 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 20:56:23.815743 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 20:56:23.815769 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 20:56:24.185027 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 20:56:24.542660 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 20:56:24.555391 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 20:56:24.898641 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 20:56:24.907874 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 20:56:24.921157 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 20:56:24.930042 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 20:56:26.338514 [INFO] Skipping Setup Docker Options
2024/02/01 20:56:26.338545 [INFO] Skipping MarkBootstrapped
2024/02/01 20:56:26.338549 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 20:56:26.338670 [INFO] Starting SwitchCFNStack
2024/02/01 20:56:26.338675 [INFO] Executing instruction: stopSqsd
2024/02/01 20:56:26.338680 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 20:56:26.338684 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 20:56:26.338687 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 20:56:26.338706 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 20:56:26.877937 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 20:56:26.878025 [INFO] Executing instruction: StagedockerApplication
2024/02/01 20:56:26.878044 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 20:56:26.910015 [INFO] Pruning containers ...
2024/02/01 20:56:26.910056 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 20:56:26.934684 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
10d9fdceebce   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             focused_aryabhata

2024/02/01 20:56:26.934715 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 20:56:26.977471 [INFO] Deleted Containers:
10d9fdceebcee2ce435c99810284ef138750ae2bad1777d0099bdf9b6fcbb5ba

Total reclaimed space: 0B

2024/02/01 20:56:26.977532 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 20:56:27.002401 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 20:56:27.002700 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 20:56:27.006768 [INFO] application/json

2024/02/01 20:56:27.006788 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 20:56:27.093216 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 20:56:27.093389 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 20:56:27.094585 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 20:56:27.094607 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 20:56:27.094622 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 20:56:27.094626 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 20:56:27.094631 [INFO] Executing instruction: Generate environment file
2024/02/01 20:56:27.094663 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 20:56:27.094667 [INFO] start build docker app
2024/02/01 20:56:27.095062 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 20:56:27.095066 [INFO] fetching image and ports
2024/02/01 20:56:27.096524 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 20:56:27.096572 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 20:56:27.096580 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 20:56:27.096638 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 20:56:27.989194 [INFO] Login Succeeded

2024/02/01 20:56:27.989212 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 20:56:27.989218 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 20:56:27.989234 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 20:56:28.161922 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 20:56:28.161944 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 20:56:28.161948 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 20:56:28.161951 [INFO] start to build docker image
2024/02/01 20:56:28.161969 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 20:56:28.432146 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 20:56:28.432169 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 20:56:28.432172 [INFO] successfully build docker image
2024/02/01 20:56:28.432174 [INFO] save staging docker image id
2024/02/01 20:56:28.432186 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 20:56:28.454108 [INFO] c176d18fbf65

2024/02/01 20:56:28.454226 [INFO] Executing instruction: configure X-Ray
2024/02/01 20:56:28.454243 [INFO] X-Ray is not enabled.
2024/02/01 20:56:28.454246 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 20:56:28.459732 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 20:56:28.461611 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 20:56:28.478382 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 20:56:28.478410 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 20:56:28.489864 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 20:56:28.498437 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 20:56:28.515289 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 20:56:28.601646 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 20:56:29.022747 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 20:56:29.022978 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 20:56:29.322990 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 20:56:29.347181 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 20:56:29.697067 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 20:56:29.709275 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 20:56:29.733945 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 20:56:30.046597 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 20:56:30.056357 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 20:56:30.404277 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 20:56:30.404346 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 20:56:30.420724 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 20:56:30.435355 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 20:56:30.506301 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 20:56:30.507713 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 20:56:30.508504 [INFO] Executing instruction: configure log streaming
2024/02/01 20:56:30.508515 [INFO] log streaming is not enabled
2024/02/01 20:56:30.508519 [INFO] disable log stream
2024/02/01 20:56:30.508534 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 20:56:30.534886 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 20:56:30.561902 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 20:56:30.561930 [INFO] Checking if logs need forced rotation
2024/02/01 20:56:30.561964 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 20:56:31.127946 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 20:56:31.613091 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 20:56:31.615538 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 20:56:32.175329 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 20:56:32.194739 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 20:56:32.194755 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 20:56:32.194767 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 20:56:32.662591 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 20:56:32.662619 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 20:56:32.662648 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 20:56:32.662651 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 20:56:32.662677 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 20:56:32.662690 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 20:56:32.662696 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 20:56:32.662702 [INFO] Executing instruction: stop X-Ray
2024/02/01 20:56:32.662705 [INFO] stop X-Ray ...
2024/02/01 20:56:32.662717 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 20:56:32.683122 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 20:56:32.683155 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 20:56:32.722719 [INFO] Executing instruction: Run Docker Container
2024/02/01 20:56:32.722872 [INFO] stop currently running containers...
2024/02/01 20:56:32.722898 [INFO] detected old app is not docker compose app
2024/02/01 20:56:32.722911 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 20:56:32.785786 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 20:56:32.813568 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 20:56:32.813603 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 20:56:32.829226 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 20:56:32.829260 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 20:56:32.847013 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 20:56:32.847068 [INFO] stopping current container: 10d9fdceebce
2024/02/01 20:56:32.847082 [INFO] Running command /bin/sh -c docker ps | grep -q 10d9fdceebce
2024/02/01 20:56:32.872790 [INFO] Running command /bin/sh -c docker ps | grep -q 10d9fdceebce
2024/02/01 20:56:32.898065 [INFO] Pruning containers ...
2024/02/01 20:56:32.898089 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 20:56:32.930256 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 20:56:32.930287 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 20:56:32.957625 [INFO] Total reclaimed space: 0B

2024/02/01 20:56:32.957743 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 20:56:32.999944 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 20:56:32.999975 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 20:56:33.021835 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 20:56:33.021856 [INFO] Removing /var/app/current/ if it exists
2024/02/01 20:56:33.021946 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 20:56:33.021964 [INFO] detected new app is not docker compose app
2024/02/01 20:56:33.022012 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 20:56:33.378966 [INFO] 6ea73e27261361db6e7c3ead7209310903457656ce622bbb2d9531f2a1d87b51

2024/02/01 20:56:38.379261 [INFO] Running command /bin/sh -c docker ps | grep -q 6ea73e272613
2024/02/01 20:56:38.412348 [ERROR] docker container quit unexpectedly on 2024-02-01 20:56:38.412333868 +0000 UTC: Command /bin/sh -c docker ps | grep -q 6ea73e272613 failed with error exit status 1
2024/02/01 20:56:38.412380 [INFO] Running command /bin/sh -c docker logs 6ea73e272613
2024/02/01 20:56:38.440159 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 6ea73e272613: Command /bin/sh -c docker ps | grep -q 6ea73e272613 failed with error exit status 1 

2024/02/01 20:56:38.440168 [INFO] Executing cleanup logic
2024/02/01 20:56:38.440404 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 21:56:39.469985 [INFO] Starting...
2024/02/01 21:56:39.470028 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 21:56:39.470056 [INFO] reading event message file
2024/02/01 21:56:39.470970 [INFO] Engine received EB command userdata-exec

2024/02/01 21:56:39.477508 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 21:56:39.888771 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 21:56:40.361945 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 21:56:40.362046 [INFO] Engine command: (self-startup)

2024/02/01 21:56:40.362053 [INFO] Downloading EB Application...
2024/02/01 21:56:40.362056 [INFO] Region: eu-west-1
2024/02/01 21:56:40.362059 [INFO] envID: e-8gmkc7rmw6
2024/02/01 21:56:40.362062 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 21:56:40.362065 [INFO] Using manifest file name from command request
2024/02/01 21:56:40.362082 [INFO] Unable to get version manifest file.
2024/02/01 21:56:40.362084 [INFO] Downloading latest manifest available.
2024/02/01 21:56:40.362086 [INFO] Download latest app version manifest
2024/02/01 21:56:40.362218 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 21:56:40.408697 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 21:56:40.409214 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 21:56:40.427812 [INFO] Download successful124bytes downloaded
2024/02/01 21:56:40.428136 [INFO] Trying to read and parse version manifest...
2024/02/01 21:56:40.428237 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 21:56:40.453277 [INFO] Download successful264bytes downloaded
2024/02/01 21:56:40.453800 [INFO] Executing instruction: SyncClock
2024/02/01 21:56:40.453807 [INFO] Starting SyncClock
2024/02/01 21:56:40.453819 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 21:56:40.460469 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 21:56:39 2024
System time     : 0.000002653 seconds fast of NTP time
Last offset     : +0.000001344 seconds
RMS offset      : 0.000003113 seconds
Frequency       : 0.154 ppm fast
Residual freq   : +0.005 ppm
Skew            : 0.104 ppm
Root delay      : 0.000432080 seconds
Root dispersion : 0.000411277 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/01 21:56:40.460493 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 21:56:40.465091 [INFO] 200 OK

2024/02/01 21:56:40.465228 [INFO] Skipping Configure OS
2024/02/01 21:56:40.465235 [INFO] Skipping LockRepo
2024/02/01 21:56:40.465239 [INFO] Skipping GenerateEBBanner
2024/02/01 21:56:40.465244 [INFO] Skipping Install Process Manager
2024/02/01 21:56:40.465248 [INFO] Skipping install syslog
2024/02/01 21:56:40.465253 [INFO] Skipping install cron
2024/02/01 21:56:40.465256 [INFO] Skipping install proxy
2024/02/01 21:56:40.465260 [INFO] Skipping installhealthd
2024/02/01 21:56:40.465264 [INFO] Skipping Install Log Streaming Manager
2024/02/01 21:56:40.465268 [INFO] Skipping install X-Ray
2024/02/01 21:56:40.465271 [INFO] Skipping install Third Party License
2024/02/01 21:56:40.465276 [INFO] Skipping installSqsd
2024/02/01 21:56:40.465280 [INFO] Skipping bootstraphealthd
2024/02/01 21:56:40.465284 [INFO] Skipping Install yum packages
2024/02/01 21:56:40.465290 [INFO] Skipping install docker-compose
2024/02/01 21:56:40.465294 [INFO] Skipping Configure Docker Daemon
2024/02/01 21:56:40.465299 [INFO] Skipping MarkBaked
2024/02/01 21:56:40.465303 [INFO] Skipping TuneSystemSettings
2024/02/01 21:56:40.465305 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 21:56:40.465308 [INFO] Initialize LogRotate files and directories
2024/02/01 21:56:40.478595 [INFO] Skipping BootstrapCFNHup
2024/02/01 21:56:40.478604 [INFO] Executing instruction: StartCFNHup
2024/02/01 21:56:40.478607 [INFO] Start cfn-hup
2024/02/01 21:56:40.478624 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 21:56:40.492235 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 21:56:40.500230 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 21:56:40.500255 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 21:56:40.500259 [INFO] Executing instruction: Start Docker
2024/02/01 21:56:40.500262 [INFO] Starting Docker...
2024/02/01 21:56:40.500346 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 21:56:40.501642 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 21:56:40.502692 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 21:56:40.900085 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 21:56:40.924971 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 21:56:40.924995 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 21:56:40.942534 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 21:56:40.954847 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 21:56:40.970859 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 21:56:41.043132 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 21:56:41.043371 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 21:56:41.364971 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 21:56:41.794175 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 21:56:41.806243 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 21:56:42.113024 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 21:56:42.135529 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 21:56:42.164800 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 21:56:42.182203 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 21:56:43.596260 [INFO] Skipping Setup Docker Options
2024/02/01 21:56:43.596288 [INFO] Skipping MarkBootstrapped
2024/02/01 21:56:43.596293 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 21:56:43.596414 [INFO] Starting SwitchCFNStack
2024/02/01 21:56:43.596419 [INFO] Executing instruction: stopSqsd
2024/02/01 21:56:43.596423 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 21:56:43.596426 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 21:56:43.596430 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 21:56:43.596451 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 21:56:44.051142 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 21:56:44.051166 [INFO] Executing instruction: StagedockerApplication
2024/02/01 21:56:44.051177 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 21:56:44.077740 [INFO] Pruning containers ...
2024/02/01 21:56:44.077769 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 21:56:44.102317 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
6ea73e272613   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             dreamy_shockley

2024/02/01 21:56:44.102351 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 21:56:44.130119 [INFO] Deleted Containers:
6ea73e27261361db6e7c3ead7209310903457656ce622bbb2d9531f2a1d87b51

Total reclaimed space: 0B

2024/02/01 21:56:44.130144 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 21:56:44.153882 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 21:56:44.154178 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 21:56:44.157444 [INFO] application/json

2024/02/01 21:56:44.157461 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 21:56:44.230413 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/01 21:56:44.230572 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 21:56:44.231834 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 21:56:44.231860 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 21:56:44.231875 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 21:56:44.231877 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 21:56:44.231881 [INFO] Executing instruction: Generate environment file
2024/02/01 21:56:44.231909 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 21:56:44.231912 [INFO] start build docker app
2024/02/01 21:56:44.232382 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 21:56:44.232387 [INFO] fetching image and ports
2024/02/01 21:56:44.234003 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 21:56:44.234049 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 21:56:44.234059 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 21:56:44.234072 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 21:56:45.156399 [INFO] Login Succeeded

2024/02/01 21:56:45.156419 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 21:56:45.156425 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 21:56:45.156440 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 21:56:45.291429 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 21:56:45.291452 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 21:56:45.291456 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 21:56:45.291459 [INFO] start to build docker image
2024/02/01 21:56:45.291474 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 21:56:45.565277 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 21:56:45.565301 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 21:56:45.565304 [INFO] successfully build docker image
2024/02/01 21:56:45.565306 [INFO] save staging docker image id
2024/02/01 21:56:45.565316 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 21:56:45.604043 [INFO] c176d18fbf65

2024/02/01 21:56:45.604176 [INFO] Executing instruction: configure X-Ray
2024/02/01 21:56:45.604183 [INFO] X-Ray is not enabled.
2024/02/01 21:56:45.604186 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 21:56:45.609718 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 21:56:45.611160 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 21:56:45.648707 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 21:56:45.648742 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 21:56:45.668765 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 21:56:45.679574 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 21:56:45.691708 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 21:56:45.745595 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 21:56:46.140236 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 21:56:46.140332 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 21:56:46.472919 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 21:56:46.485405 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 21:56:46.797588 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 21:56:46.811991 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 21:56:46.829726 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 21:56:47.124385 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 21:56:47.141897 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 21:56:47.485471 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 21:56:47.485505 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 21:56:47.498811 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 21:56:47.508185 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 21:56:47.561188 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 21:56:47.562133 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 21:56:47.563072 [INFO] Executing instruction: configure log streaming
2024/02/01 21:56:47.563080 [INFO] log streaming is not enabled
2024/02/01 21:56:47.563083 [INFO] disable log stream
2024/02/01 21:56:47.563094 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 21:56:47.589518 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 21:56:47.611572 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 21:56:47.611610 [INFO] Checking if logs need forced rotation
2024/02/01 21:56:47.611630 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 21:56:48.173265 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 21:56:48.673471 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 21:56:48.675346 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 21:56:49.128755 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 21:56:49.146337 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 21:56:49.146353 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 21:56:49.146364 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 21:56:49.555095 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 21:56:49.555119 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 21:56:49.555152 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 21:56:49.555156 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 21:56:49.555176 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 21:56:49.555267 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 21:56:49.555273 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 21:56:49.555280 [INFO] Executing instruction: stop X-Ray
2024/02/01 21:56:49.555284 [INFO] stop X-Ray ...
2024/02/01 21:56:49.555296 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 21:56:49.569887 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 21:56:49.569921 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 21:56:49.586585 [INFO] Executing instruction: Run Docker Container
2024/02/01 21:56:49.586634 [INFO] stop currently running containers...
2024/02/01 21:56:49.586645 [INFO] detected old app is not docker compose app
2024/02/01 21:56:49.586660 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 21:56:49.632545 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 21:56:49.650740 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 21:56:49.650769 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 21:56:49.665980 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 21:56:49.666007 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 21:56:49.680531 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 21:56:49.680573 [INFO] stopping current container: 6ea73e272613
2024/02/01 21:56:49.680584 [INFO] Running command /bin/sh -c docker ps | grep -q 6ea73e272613
2024/02/01 21:56:49.702073 [INFO] Running command /bin/sh -c docker ps | grep -q 6ea73e272613
2024/02/01 21:56:49.728521 [INFO] Pruning containers ...
2024/02/01 21:56:49.728543 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 21:56:49.749462 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 21:56:49.749493 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 21:56:49.769809 [INFO] Total reclaimed space: 0B

2024/02/01 21:56:49.769840 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 21:56:49.790955 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 21:56:49.791005 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 21:56:49.825190 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 21:56:49.825211 [INFO] Removing /var/app/current/ if it exists
2024/02/01 21:56:49.825369 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 21:56:49.825386 [INFO] detected new app is not docker compose app
2024/02/01 21:56:49.825436 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 21:56:50.245140 [INFO] 5056e090a4e9465d126013c11bb024fbf86a026371c9ec3876d0372a75d6d8ae

2024/02/01 21:56:55.245554 [INFO] Running command /bin/sh -c docker ps | grep -q 5056e090a4e9
2024/02/01 21:56:55.276759 [ERROR] docker container quit unexpectedly on 2024-02-01 21:56:55.276741437 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5056e090a4e9 failed with error exit status 1
2024/02/01 21:56:55.276791 [INFO] Running command /bin/sh -c docker logs 5056e090a4e9
2024/02/01 21:56:55.300083 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5056e090a4e9: Command /bin/sh -c docker ps | grep -q 5056e090a4e9 failed with error exit status 1 

2024/02/01 21:56:55.300093 [INFO] Executing cleanup logic
2024/02/01 21:56:55.300294 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 22:56:56.207684 [INFO] Starting...
2024/02/01 22:56:56.207728 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 22:56:56.207828 [INFO] reading event message file
2024/02/01 22:56:56.208544 [INFO] Engine received EB command userdata-exec

2024/02/01 22:56:56.217935 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 22:56:56.652889 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 22:56:57.103606 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 22:56:57.103718 [INFO] Engine command: (self-startup)

2024/02/01 22:56:57.103726 [INFO] Downloading EB Application...
2024/02/01 22:56:57.103731 [INFO] Region: eu-west-1
2024/02/01 22:56:57.103734 [INFO] envID: e-8gmkc7rmw6
2024/02/01 22:56:57.103737 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 22:56:57.103741 [INFO] Using manifest file name from command request
2024/02/01 22:56:57.103756 [INFO] Unable to get version manifest file.
2024/02/01 22:56:57.103758 [INFO] Downloading latest manifest available.
2024/02/01 22:56:57.103760 [INFO] Download latest app version manifest
2024/02/01 22:56:57.103902 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 22:56:57.145914 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 22:56:57.146105 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 22:56:57.157806 [INFO] Download successful124bytes downloaded
2024/02/01 22:56:57.157958 [INFO] Trying to read and parse version manifest...
2024/02/01 22:56:57.158033 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 22:56:57.187297 [INFO] Download successful264bytes downloaded
2024/02/01 22:56:57.187645 [INFO] Executing instruction: SyncClock
2024/02/01 22:56:57.187652 [INFO] Starting SyncClock
2024/02/01 22:56:57.187664 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 22:56:57.193501 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 22:56:46 2024
System time     : 0.000001516 seconds fast of NTP time
Last offset     : +0.000000832 seconds
RMS offset      : 0.000000723 seconds
Frequency       : 0.189 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.023 ppm
Root delay      : 0.000413304 seconds
Root dispersion : 0.000331199 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/01 22:56:57.193530 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 22:56:57.197545 [INFO] 200 OK

2024/02/01 22:56:57.197644 [INFO] Skipping Configure OS
2024/02/01 22:56:57.197650 [INFO] Skipping LockRepo
2024/02/01 22:56:57.197654 [INFO] Skipping GenerateEBBanner
2024/02/01 22:56:57.197658 [INFO] Skipping Install Process Manager
2024/02/01 22:56:57.197662 [INFO] Skipping install syslog
2024/02/01 22:56:57.197666 [INFO] Skipping install cron
2024/02/01 22:56:57.197670 [INFO] Skipping install proxy
2024/02/01 22:56:57.197674 [INFO] Skipping installhealthd
2024/02/01 22:56:57.197678 [INFO] Skipping Install Log Streaming Manager
2024/02/01 22:56:57.197682 [INFO] Skipping install X-Ray
2024/02/01 22:56:57.197686 [INFO] Skipping install Third Party License
2024/02/01 22:56:57.197691 [INFO] Skipping installSqsd
2024/02/01 22:56:57.197695 [INFO] Skipping bootstraphealthd
2024/02/01 22:56:57.197698 [INFO] Skipping Install yum packages
2024/02/01 22:56:57.197702 [INFO] Skipping install docker-compose
2024/02/01 22:56:57.197708 [INFO] Skipping Configure Docker Daemon
2024/02/01 22:56:57.197712 [INFO] Skipping MarkBaked
2024/02/01 22:56:57.197717 [INFO] Skipping TuneSystemSettings
2024/02/01 22:56:57.197719 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 22:56:57.197721 [INFO] Initialize LogRotate files and directories
2024/02/01 22:56:57.215766 [INFO] Skipping BootstrapCFNHup
2024/02/01 22:56:57.215779 [INFO] Executing instruction: StartCFNHup
2024/02/01 22:56:57.215782 [INFO] Start cfn-hup
2024/02/01 22:56:57.215802 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 22:56:57.229765 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 22:56:57.238590 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 22:56:57.238622 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 22:56:57.238627 [INFO] Executing instruction: Start Docker
2024/02/01 22:56:57.238630 [INFO] Starting Docker...
2024/02/01 22:56:57.238712 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 22:56:57.239818 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 22:56:57.240830 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 22:56:57.671305 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 22:56:57.687800 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 22:56:57.687834 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 22:56:57.704740 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 22:56:57.717683 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 22:56:57.732383 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 22:56:57.810992 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 22:56:57.811061 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 22:56:58.143711 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 22:56:58.477074 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 22:56:58.488539 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 22:56:58.789823 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 22:56:58.802156 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 22:56:58.815480 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 22:56:58.823933 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 22:57:00.017282 [INFO] Skipping Setup Docker Options
2024/02/01 22:57:00.017320 [INFO] Skipping MarkBootstrapped
2024/02/01 22:57:00.017324 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 22:57:00.017469 [INFO] Starting SwitchCFNStack
2024/02/01 22:57:00.017476 [INFO] Executing instruction: stopSqsd
2024/02/01 22:57:00.017480 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 22:57:00.017483 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 22:57:00.017487 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 22:57:00.017507 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 22:57:00.629341 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 22:57:00.629366 [INFO] Executing instruction: StagedockerApplication
2024/02/01 22:57:00.629381 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 22:57:00.667286 [INFO] Pruning containers ...
2024/02/01 22:57:00.667316 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 22:57:00.695404 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
5056e090a4e9   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             funny_kilby

2024/02/01 22:57:00.695434 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 22:57:00.741968 [INFO] Deleted Containers:
5056e090a4e9465d126013c11bb024fbf86a026371c9ec3876d0372a75d6d8ae

Total reclaimed space: 0B

2024/02/01 22:57:00.742024 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 22:57:00.769688 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 22:57:00.769994 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 22:57:00.773367 [INFO] application/json

2024/02/01 22:57:00.773393 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 22:57:00.866774 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 22:57:00.866943 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 22:57:00.868100 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 22:57:00.868124 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 22:57:00.868144 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 22:57:00.868147 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 22:57:00.868151 [INFO] Executing instruction: Generate environment file
2024/02/01 22:57:00.868175 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 22:57:00.868179 [INFO] start build docker app
2024/02/01 22:57:00.868559 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 22:57:00.868562 [INFO] fetching image and ports
2024/02/01 22:57:00.870084 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 22:57:00.870137 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 22:57:00.870145 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 22:57:00.870155 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 22:57:02.009906 [INFO] Login Succeeded

2024/02/01 22:57:02.009973 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 22:57:02.009982 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 22:57:02.009999 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 22:57:02.163436 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 22:57:02.163535 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 22:57:02.163539 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 22:57:02.163542 [INFO] start to build docker image
2024/02/01 22:57:02.163559 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 22:57:02.461270 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 22:57:02.461306 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 22:57:02.461312 [INFO] successfully build docker image
2024/02/01 22:57:02.461314 [INFO] save staging docker image id
2024/02/01 22:57:02.461331 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 22:57:02.483143 [INFO] c176d18fbf65

2024/02/01 22:57:02.483318 [INFO] Executing instruction: configure X-Ray
2024/02/01 22:57:02.483325 [INFO] X-Ray is not enabled.
2024/02/01 22:57:02.483329 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 22:57:02.495073 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 22:57:02.498359 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 22:57:02.524193 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 22:57:02.524237 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 22:57:02.554621 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 22:57:02.582387 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 22:57:02.609272 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 22:57:02.697650 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 22:57:03.097815 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 22:57:03.097898 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 22:57:03.463120 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 22:57:03.531533 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 22:57:03.888665 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 22:57:03.910285 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 22:57:03.924048 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 22:57:04.265306 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 22:57:04.288466 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 22:57:04.667921 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 22:57:04.667947 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 22:57:04.679774 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 22:57:04.691264 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 22:57:04.780035 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 22:57:04.781185 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 22:57:04.781978 [INFO] Executing instruction: configure log streaming
2024/02/01 22:57:04.781991 [INFO] log streaming is not enabled
2024/02/01 22:57:04.781995 [INFO] disable log stream
2024/02/01 22:57:04.782009 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 22:57:04.807597 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 22:57:04.832839 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 22:57:04.832880 [INFO] Checking if logs need forced rotation
2024/02/01 22:57:04.832901 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 22:57:05.455052 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 22:57:05.930843 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 22:57:05.932461 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 22:57:06.019711 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 22:57:06.044282 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 22:57:06.044312 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 22:57:06.044325 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 22:57:06.473202 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 22:57:06.473238 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 22:57:06.473268 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 22:57:06.473271 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 22:57:06.473291 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 22:57:06.473302 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 22:57:06.473305 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 22:57:06.473310 [INFO] Executing instruction: stop X-Ray
2024/02/01 22:57:06.473314 [INFO] stop X-Ray ...
2024/02/01 22:57:06.473326 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 22:57:06.489793 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 22:57:06.489823 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 22:57:06.516853 [INFO] Executing instruction: Run Docker Container
2024/02/01 22:57:06.516887 [INFO] stop currently running containers...
2024/02/01 22:57:06.516906 [INFO] detected old app is not docker compose app
2024/02/01 22:57:06.516919 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 22:57:06.592530 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 22:57:06.626109 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 22:57:06.626163 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 22:57:06.641931 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 22:57:06.641967 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 22:57:06.662208 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 22:57:06.662262 [INFO] stopping current container: 5056e090a4e9
2024/02/01 22:57:06.662273 [INFO] Running command /bin/sh -c docker ps | grep -q 5056e090a4e9
2024/02/01 22:57:06.693268 [INFO] Running command /bin/sh -c docker ps | grep -q 5056e090a4e9
2024/02/01 22:57:06.734773 [INFO] Pruning containers ...
2024/02/01 22:57:06.734796 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 22:57:06.755935 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 22:57:06.755966 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 22:57:06.799977 [INFO] Total reclaimed space: 0B

2024/02/01 22:57:06.800022 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 22:57:06.825092 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 22:57:06.825124 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 22:57:06.850358 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 22:57:06.850381 [INFO] Removing /var/app/current/ if it exists
2024/02/01 22:57:06.850484 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 22:57:06.850501 [INFO] detected new app is not docker compose app
2024/02/01 22:57:06.850561 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 22:57:07.365399 [INFO] bbe25a7011f66ea078fed679d26f4c516d0b9f0738786e3c5d5023b9bfcaa7dc

2024/02/01 22:57:12.365891 [INFO] Running command /bin/sh -c docker ps | grep -q bbe25a7011f6
2024/02/01 22:57:12.387501 [ERROR] docker container quit unexpectedly on 2024-02-01 22:57:12.387483873 +0000 UTC: Command /bin/sh -c docker ps | grep -q bbe25a7011f6 failed with error exit status 1
2024/02/01 22:57:12.387527 [INFO] Running command /bin/sh -c docker logs bbe25a7011f6
2024/02/01 22:57:12.410874 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container bbe25a7011f6: Command /bin/sh -c docker ps | grep -q bbe25a7011f6 failed with error exit status 1 

2024/02/01 22:57:12.410884 [INFO] Executing cleanup logic
2024/02/01 22:57:12.411079 [INFO] Platform Engine finished execution on command: self-startup

2024/02/01 23:57:13.458446 [INFO] Starting...
2024/02/01 23:57:13.458491 [INFO] Starting EBPlatform-PlatformEngine
2024/02/01 23:57:13.458515 [INFO] reading event message file
2024/02/01 23:57:13.459560 [INFO] Engine received EB command userdata-exec

2024/02/01 23:57:13.465115 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 23:57:13.949893 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 23:57:14.388376 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/01 23:57:14.388447 [INFO] Engine command: (self-startup)

2024/02/01 23:57:14.388456 [INFO] Downloading EB Application...
2024/02/01 23:57:14.388460 [INFO] Region: eu-west-1
2024/02/01 23:57:14.388463 [INFO] envID: e-8gmkc7rmw6
2024/02/01 23:57:14.388467 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/01 23:57:14.388470 [INFO] Using manifest file name from command request
2024/02/01 23:57:14.388504 [INFO] Unable to get version manifest file.
2024/02/01 23:57:14.388509 [INFO] Downloading latest manifest available.
2024/02/01 23:57:14.388512 [INFO] Download latest app version manifest
2024/02/01 23:57:14.388688 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/01 23:57:14.431062 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/01 23:57:14.431264 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/01 23:57:14.441912 [INFO] Download successful124bytes downloaded
2024/02/01 23:57:14.442463 [INFO] Trying to read and parse version manifest...
2024/02/01 23:57:14.442811 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 23:57:14.475483 [INFO] Download successful264bytes downloaded
2024/02/01 23:57:14.476084 [INFO] Executing instruction: SyncClock
2024/02/01 23:57:14.476091 [INFO] Starting SyncClock
2024/02/01 23:57:14.476101 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/01 23:57:14.483419 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu Feb 01 23:57:08 2024
System time     : 0.000003215 seconds slow of NTP time
Last offset     : -0.000004137 seconds
RMS offset      : 0.000003572 seconds
Frequency       : 0.328 ppm fast
Residual freq   : -0.006 ppm
Skew            : 0.248 ppm
Root delay      : 0.000451363 seconds
Root dispersion : 0.000549980 seconds
Update interval : 32.1 seconds
Leap status     : Normal

2024/02/01 23:57:14.483445 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/01 23:57:14.488102 [INFO] 200 OK

2024/02/01 23:57:14.488194 [INFO] Skipping Configure OS
2024/02/01 23:57:14.488199 [INFO] Skipping LockRepo
2024/02/01 23:57:14.488203 [INFO] Skipping GenerateEBBanner
2024/02/01 23:57:14.488207 [INFO] Skipping Install Process Manager
2024/02/01 23:57:14.488211 [INFO] Skipping install syslog
2024/02/01 23:57:14.488215 [INFO] Skipping install cron
2024/02/01 23:57:14.488219 [INFO] Skipping install proxy
2024/02/01 23:57:14.488223 [INFO] Skipping installhealthd
2024/02/01 23:57:14.488226 [INFO] Skipping Install Log Streaming Manager
2024/02/01 23:57:14.488230 [INFO] Skipping install X-Ray
2024/02/01 23:57:14.488234 [INFO] Skipping install Third Party License
2024/02/01 23:57:14.488239 [INFO] Skipping installSqsd
2024/02/01 23:57:14.488243 [INFO] Skipping bootstraphealthd
2024/02/01 23:57:14.488247 [INFO] Skipping Install yum packages
2024/02/01 23:57:14.488250 [INFO] Skipping install docker-compose
2024/02/01 23:57:14.488254 [INFO] Skipping Configure Docker Daemon
2024/02/01 23:57:14.488258 [INFO] Skipping MarkBaked
2024/02/01 23:57:14.488262 [INFO] Skipping TuneSystemSettings
2024/02/01 23:57:14.488264 [INFO] Executing instruction: GetSetupLogRotate
2024/02/01 23:57:14.488267 [INFO] Initialize LogRotate files and directories
2024/02/01 23:57:14.504575 [INFO] Skipping BootstrapCFNHup
2024/02/01 23:57:14.504588 [INFO] Executing instruction: StartCFNHup
2024/02/01 23:57:14.504591 [INFO] Start cfn-hup
2024/02/01 23:57:14.504609 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/01 23:57:14.524628 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/01 23:57:14.537795 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/01 23:57:14.537830 [INFO] Skipping SetupPublishLogCronjob
2024/02/01 23:57:14.537834 [INFO] Executing instruction: Start Docker
2024/02/01 23:57:14.537837 [INFO] Starting Docker...
2024/02/01 23:57:14.538307 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/01 23:57:14.539586 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/01 23:57:14.540614 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 23:57:14.884285 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 23:57:14.900036 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/01 23:57:14.900074 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 23:57:14.912196 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 23:57:14.928231 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 23:57:14.942610 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/01 23:57:15.024377 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/01 23:57:15.024415 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/01 23:57:15.373545 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 23:57:15.727794 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 23:57:15.739414 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 23:57:16.013730 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 23:57:16.023447 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/01 23:57:16.037256 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/01 23:57:16.046634 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/01 23:57:17.289949 [INFO] Skipping Setup Docker Options
2024/02/01 23:57:17.289973 [INFO] Skipping MarkBootstrapped
2024/02/01 23:57:17.289977 [INFO] Executing instruction: Save CFN Stack Info
2024/02/01 23:57:17.290097 [INFO] Starting SwitchCFNStack
2024/02/01 23:57:17.290102 [INFO] Executing instruction: stopSqsd
2024/02/01 23:57:17.290106 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/01 23:57:17.290109 [INFO] Executing instruction: PreBuildEbExtension
2024/02/01 23:57:17.290113 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/01 23:57:17.290131 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/01 23:57:17.746545 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/01 23:57:17.746582 [INFO] Executing instruction: StagedockerApplication
2024/02/01 23:57:17.746594 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/01 23:57:17.770233 [INFO] Pruning containers ...
2024/02/01 23:57:17.770267 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 23:57:17.790517 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
bbe25a7011f6   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             youthful_perlman

2024/02/01 23:57:17.790552 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 23:57:17.818958 [INFO] Deleted Containers:
bbe25a7011f66ea078fed679d26f4c516d0b9f0738786e3c5d5023b9bfcaa7dc

Total reclaimed space: 0B

2024/02/01 23:57:17.819057 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 23:57:17.841209 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 23:57:17.841587 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/01 23:57:17.844733 [INFO] application/json

2024/02/01 23:57:17.844751 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/01 23:57:17.936093 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/01 23:57:17.936247 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/01 23:57:17.937575 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/01 23:57:17.937597 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/01 23:57:17.937610 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/01 23:57:17.937613 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/01 23:57:17.937617 [INFO] Executing instruction: Generate environment file
2024/02/01 23:57:17.937641 [INFO] Executing instruction: Docker Specific Build Application
2024/02/01 23:57:17.937644 [INFO] start build docker app
2024/02/01 23:57:17.938090 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/01 23:57:17.938094 [INFO] fetching image and ports
2024/02/01 23:57:17.939897 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/01 23:57:17.939938 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/01 23:57:17.939950 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/01 23:57:17.939958 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/01 23:57:18.843121 [INFO] Login Succeeded

2024/02/01 23:57:18.843143 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/01 23:57:18.843150 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/01 23:57:18.843172 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 23:57:18.989412 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/01 23:57:18.989440 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 23:57:18.989444 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/01 23:57:18.989448 [INFO] start to build docker image
2024/02/01 23:57:18.989465 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 23:57:19.276461 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/01 23:57:19.276485 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/01 23:57:19.276489 [INFO] successfully build docker image
2024/02/01 23:57:19.276491 [INFO] save staging docker image id
2024/02/01 23:57:19.276503 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/01 23:57:19.307383 [INFO] c176d18fbf65

2024/02/01 23:57:19.307546 [INFO] Executing instruction: configure X-Ray
2024/02/01 23:57:19.307552 [INFO] X-Ray is not enabled.
2024/02/01 23:57:19.307555 [INFO] Executing instruction: configure proxy Nginx
2024/02/01 23:57:19.313824 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/01 23:57:19.316000 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 23:57:19.331314 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/01 23:57:19.331352 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 23:57:19.346312 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 23:57:19.357158 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 23:57:19.368289 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/01 23:57:19.459737 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/01 23:57:19.809163 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/01 23:57:19.809248 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 23:57:20.153927 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 23:57:20.164690 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/01 23:57:20.460664 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/01 23:57:20.469994 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/01 23:57:20.479229 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/01 23:57:20.815203 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/01 23:57:20.825960 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/01 23:57:21.136983 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/01 23:57:21.137029 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/01 23:57:21.149485 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/01 23:57:21.159457 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/01 23:57:21.241804 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/01 23:57:21.242860 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/01 23:57:21.243887 [INFO] Executing instruction: configure log streaming
2024/02/01 23:57:21.243897 [INFO] log streaming is not enabled
2024/02/01 23:57:21.243901 [INFO] disable log stream
2024/02/01 23:57:21.243916 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/01 23:57:21.262888 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/01 23:57:21.282063 [INFO] Executing instruction: GetToggleForceRotate
2024/02/01 23:57:21.282088 [INFO] Checking if logs need forced rotation
2024/02/01 23:57:21.282112 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/01 23:57:21.846956 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/01 23:57:22.315751 [INFO] Procfile not found. Generating default rsyslog config
2024/02/01 23:57:22.317433 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/01 23:57:22.679548 [INFO] Executing instruction: Configure Docker Logging
2024/02/01 23:57:22.700004 [INFO] Executing instruction: PostBuildEbExtension
2024/02/01 23:57:22.700020 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/01 23:57:22.700032 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/01 23:57:23.177340 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/01 23:57:23.177361 [INFO] Executing instruction: CleanEbExtensions
2024/02/01 23:57:23.177388 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/01 23:57:23.177393 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/01 23:57:23.177414 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/01 23:57:23.177424 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/01 23:57:23.177427 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/01 23:57:23.177437 [INFO] Executing instruction: stop X-Ray
2024/02/01 23:57:23.177440 [INFO] stop X-Ray ...
2024/02/01 23:57:23.177449 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/01 23:57:23.194700 [WARN] stopProcess Warning: process xray is not registered 
2024/02/01 23:57:23.194733 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/01 23:57:23.215920 [INFO] Executing instruction: Run Docker Container
2024/02/01 23:57:23.215948 [INFO] stop currently running containers...
2024/02/01 23:57:23.215957 [INFO] detected old app is not docker compose app
2024/02/01 23:57:23.215971 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/01 23:57:23.262513 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/01 23:57:23.284116 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/01 23:57:23.284151 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/01 23:57:23.301284 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/01 23:57:23.301321 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/01 23:57:23.318253 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/01 23:57:23.318310 [INFO] stopping current container: bbe25a7011f6
2024/02/01 23:57:23.318328 [INFO] Running command /bin/sh -c docker ps | grep -q bbe25a7011f6
2024/02/01 23:57:23.342182 [INFO] Running command /bin/sh -c docker ps | grep -q bbe25a7011f6
2024/02/01 23:57:23.368389 [INFO] Pruning containers ...
2024/02/01 23:57:23.368424 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 23:57:23.392007 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 23:57:23.392040 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/01 23:57:23.421486 [INFO] Total reclaimed space: 0B

2024/02/01 23:57:23.421513 [INFO] Running command /bin/sh -c docker ps -a
2024/02/01 23:57:23.447637 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/01 23:57:23.447669 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/01 23:57:23.480423 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/01 23:57:23.480445 [INFO] Removing /var/app/current/ if it exists
2024/02/01 23:57:23.480671 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/01 23:57:23.480691 [INFO] detected new app is not docker compose app
2024/02/01 23:57:23.480740 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/01 23:57:23.933922 [INFO] 2c6b8a19075a93af176fc0435cf43b5edada22ff47bb74a8f05921bcc33ad44b

2024/02/01 23:57:28.938267 [INFO] Running command /bin/sh -c docker ps | grep -q 2c6b8a19075a
2024/02/01 23:57:28.964875 [ERROR] docker container quit unexpectedly on 2024-02-01 23:57:28.964860675 +0000 UTC: Command /bin/sh -c docker ps | grep -q 2c6b8a19075a failed with error exit status 1
2024/02/01 23:57:28.964920 [INFO] Running command /bin/sh -c docker logs 2c6b8a19075a
2024/02/01 23:57:28.985802 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 2c6b8a19075a: Command /bin/sh -c docker ps | grep -q 2c6b8a19075a failed with error exit status 1 

2024/02/01 23:57:28.985815 [INFO] Executing cleanup logic
2024/02/01 23:57:28.986034 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 00:57:30.073476 [INFO] Starting...
2024/02/02 00:57:30.073520 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 00:57:30.073544 [INFO] reading event message file
2024/02/02 00:57:30.074249 [INFO] Engine received EB command userdata-exec

2024/02/02 00:57:30.079876 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 00:57:30.461191 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 00:57:30.892493 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 00:57:30.892648 [INFO] Engine command: (self-startup)

2024/02/02 00:57:30.892656 [INFO] Downloading EB Application...
2024/02/02 00:57:30.892660 [INFO] Region: eu-west-1
2024/02/02 00:57:30.892664 [INFO] envID: e-8gmkc7rmw6
2024/02/02 00:57:30.892668 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 00:57:30.892671 [INFO] Using manifest file name from command request
2024/02/02 00:57:30.892687 [INFO] Unable to get version manifest file.
2024/02/02 00:57:30.892690 [INFO] Downloading latest manifest available.
2024/02/02 00:57:30.892692 [INFO] Download latest app version manifest
2024/02/02 00:57:30.892886 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 00:57:30.943369 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 00:57:30.943554 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 00:57:30.957670 [INFO] Download successful124bytes downloaded
2024/02/02 00:57:30.957796 [INFO] Trying to read and parse version manifest...
2024/02/02 00:57:30.957865 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 00:57:30.977817 [INFO] Download successful264bytes downloaded
2024/02/02 00:57:30.978357 [INFO] Executing instruction: SyncClock
2024/02/02 00:57:30.978363 [INFO] Starting SyncClock
2024/02/02 00:57:30.978375 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 00:57:30.984326 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 00:57:29 2024
System time     : 0.000000281 seconds fast of NTP time
Last offset     : +0.000000566 seconds
RMS offset      : 0.000003181 seconds
Frequency       : 0.433 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.042 ppm
Root delay      : 0.000381772 seconds
Root dispersion : 0.000428327 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/02 00:57:30.984349 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 00:57:30.989120 [INFO] 200 OK

2024/02/02 00:57:30.989281 [INFO] Skipping Configure OS
2024/02/02 00:57:30.989287 [INFO] Skipping LockRepo
2024/02/02 00:57:30.989291 [INFO] Skipping GenerateEBBanner
2024/02/02 00:57:30.989295 [INFO] Skipping Install Process Manager
2024/02/02 00:57:30.989299 [INFO] Skipping install syslog
2024/02/02 00:57:30.989303 [INFO] Skipping install cron
2024/02/02 00:57:30.989306 [INFO] Skipping install proxy
2024/02/02 00:57:30.989310 [INFO] Skipping installhealthd
2024/02/02 00:57:30.989314 [INFO] Skipping Install Log Streaming Manager
2024/02/02 00:57:30.989321 [INFO] Skipping install X-Ray
2024/02/02 00:57:30.989325 [INFO] Skipping install Third Party License
2024/02/02 00:57:30.989330 [INFO] Skipping installSqsd
2024/02/02 00:57:30.989334 [INFO] Skipping bootstraphealthd
2024/02/02 00:57:30.989338 [INFO] Skipping Install yum packages
2024/02/02 00:57:30.989342 [INFO] Skipping install docker-compose
2024/02/02 00:57:30.989346 [INFO] Skipping Configure Docker Daemon
2024/02/02 00:57:30.989350 [INFO] Skipping MarkBaked
2024/02/02 00:57:30.989354 [INFO] Skipping TuneSystemSettings
2024/02/02 00:57:30.989356 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 00:57:30.989359 [INFO] Initialize LogRotate files and directories
2024/02/02 00:57:31.007221 [INFO] Skipping BootstrapCFNHup
2024/02/02 00:57:31.007239 [INFO] Executing instruction: StartCFNHup
2024/02/02 00:57:31.007242 [INFO] Start cfn-hup
2024/02/02 00:57:31.007266 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 00:57:31.020917 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 00:57:31.030354 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 00:57:31.030387 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 00:57:31.030391 [INFO] Executing instruction: Start Docker
2024/02/02 00:57:31.030394 [INFO] Starting Docker...
2024/02/02 00:57:31.030492 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 00:57:31.031657 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 00:57:31.032935 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 00:57:31.420871 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 00:57:31.436955 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 00:57:31.437031 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 00:57:31.448989 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 00:57:31.457503 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 00:57:31.467899 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 00:57:31.514494 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 00:57:31.514551 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 00:57:31.865898 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 00:57:32.206511 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 00:57:32.217914 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 00:57:32.563455 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 00:57:32.580604 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 00:57:32.594879 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 00:57:32.604138 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 00:57:33.973317 [INFO] Skipping Setup Docker Options
2024/02/02 00:57:33.973478 [INFO] Skipping MarkBootstrapped
2024/02/02 00:57:33.973485 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 00:57:33.973938 [INFO] Starting SwitchCFNStack
2024/02/02 00:57:33.973948 [INFO] Executing instruction: stopSqsd
2024/02/02 00:57:33.973952 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 00:57:33.973956 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 00:57:33.973960 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 00:57:33.974006 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 00:57:34.403467 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 00:57:34.403502 [INFO] Executing instruction: StagedockerApplication
2024/02/02 00:57:34.403513 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 00:57:34.425112 [INFO] Pruning containers ...
2024/02/02 00:57:34.425142 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 00:57:34.445438 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
2c6b8a19075a   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             amazing_morse

2024/02/02 00:57:34.445473 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 00:57:34.475144 [INFO] Deleted Containers:
2c6b8a19075a93af176fc0435cf43b5edada22ff47bb74a8f05921bcc33ad44b

Total reclaimed space: 0B

2024/02/02 00:57:34.475167 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 00:57:34.499652 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 00:57:34.500138 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 00:57:34.503692 [INFO] application/json

2024/02/02 00:57:34.503716 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 00:57:34.584483 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/02 00:57:34.584636 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 00:57:34.586050 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 00:57:34.586078 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 00:57:34.586093 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 00:57:34.586096 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 00:57:34.586100 [INFO] Executing instruction: Generate environment file
2024/02/02 00:57:34.586127 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 00:57:34.586131 [INFO] start build docker app
2024/02/02 00:57:34.586491 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 00:57:34.586494 [INFO] fetching image and ports
2024/02/02 00:57:34.588482 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 00:57:34.588536 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 00:57:34.588545 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 00:57:34.588555 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 00:57:35.512717 [INFO] Login Succeeded

2024/02/02 00:57:35.512733 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 00:57:35.512740 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 00:57:35.512757 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 00:57:35.664522 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 00:57:35.664545 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 00:57:35.664550 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 00:57:35.664554 [INFO] start to build docker image
2024/02/02 00:57:35.664571 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 00:57:35.970773 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 00:57:35.970800 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 00:57:35.970803 [INFO] successfully build docker image
2024/02/02 00:57:35.970806 [INFO] save staging docker image id
2024/02/02 00:57:35.970833 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 00:57:35.994429 [INFO] c176d18fbf65

2024/02/02 00:57:35.994559 [INFO] Executing instruction: configure X-Ray
2024/02/02 00:57:35.994565 [INFO] X-Ray is not enabled.
2024/02/02 00:57:35.994569 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 00:57:36.000636 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 00:57:36.002316 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 00:57:36.016352 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 00:57:36.016380 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 00:57:36.028398 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 00:57:36.039715 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 00:57:36.050434 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 00:57:36.143289 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 00:57:36.494799 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 00:57:36.494883 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 00:57:36.853150 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 00:57:36.865309 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 00:57:37.192016 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 00:57:37.215022 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 00:57:37.237706 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 00:57:37.604166 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 00:57:37.615358 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 00:57:37.890939 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 00:57:37.891041 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 00:57:37.904504 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 00:57:37.914976 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 00:57:38.011112 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 00:57:38.012242 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 00:57:38.013031 [INFO] Executing instruction: configure log streaming
2024/02/02 00:57:38.013042 [INFO] log streaming is not enabled
2024/02/02 00:57:38.013047 [INFO] disable log stream
2024/02/02 00:57:38.013061 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 00:57:38.037122 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 00:57:38.063227 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 00:57:38.063262 [INFO] Checking if logs need forced rotation
2024/02/02 00:57:38.063282 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 00:57:38.636852 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 00:57:39.148914 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 00:57:39.151056 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 00:57:39.650016 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 00:57:39.674040 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 00:57:39.674060 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 00:57:39.674078 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 00:57:40.167520 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 00:57:40.167555 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 00:57:40.167582 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 00:57:40.167586 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 00:57:40.167609 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 00:57:40.167622 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 00:57:40.167625 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 00:57:40.167631 [INFO] Executing instruction: stop X-Ray
2024/02/02 00:57:40.167635 [INFO] stop X-Ray ...
2024/02/02 00:57:40.167648 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 00:57:40.192639 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 00:57:40.192673 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 00:57:40.220346 [INFO] Executing instruction: Run Docker Container
2024/02/02 00:57:40.220831 [INFO] stop currently running containers...
2024/02/02 00:57:40.221217 [INFO] detected old app is not docker compose app
2024/02/02 00:57:40.221559 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 00:57:40.272488 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 00:57:40.294571 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 00:57:40.294606 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 00:57:40.316986 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 00:57:40.317021 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 00:57:40.341324 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 00:57:40.341587 [INFO] stopping current container: 2c6b8a19075a
2024/02/02 00:57:40.341603 [INFO] Running command /bin/sh -c docker ps | grep -q 2c6b8a19075a
2024/02/02 00:57:40.382891 [INFO] Running command /bin/sh -c docker ps | grep -q 2c6b8a19075a
2024/02/02 00:57:40.406359 [INFO] Pruning containers ...
2024/02/02 00:57:40.406382 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 00:57:40.428633 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 00:57:40.429039 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 00:57:40.451582 [INFO] Total reclaimed space: 0B

2024/02/02 00:57:40.451611 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 00:57:40.474649 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 00:57:40.474683 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 00:57:40.495940 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 00:57:40.495961 [INFO] Removing /var/app/current/ if it exists
2024/02/02 00:57:40.496057 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 00:57:40.496075 [INFO] detected new app is not docker compose app
2024/02/02 00:57:40.496185 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 00:57:40.934243 [INFO] 556d28e0ef11d726ea89e1c99e4ef51b0124ef57be17a7f2b39f0c85b83e4f27

2024/02/02 00:57:45.938630 [INFO] Running command /bin/sh -c docker ps | grep -q 556d28e0ef11
2024/02/02 00:57:45.973611 [ERROR] docker container quit unexpectedly on 2024-02-02 00:57:45.973599712 +0000 UTC: Command /bin/sh -c docker ps | grep -q 556d28e0ef11 failed with error exit status 1
2024/02/02 00:57:45.973637 [INFO] Running command /bin/sh -c docker logs 556d28e0ef11
2024/02/02 00:57:46.003616 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 556d28e0ef11: Command /bin/sh -c docker ps | grep -q 556d28e0ef11 failed with error exit status 1 

2024/02/02 00:57:46.003626 [INFO] Executing cleanup logic
2024/02/02 00:57:46.003804 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 01:57:46.937829 [INFO] Starting...
2024/02/02 01:57:46.937873 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 01:57:46.937901 [INFO] reading event message file
2024/02/02 01:57:46.938720 [INFO] Engine received EB command userdata-exec

2024/02/02 01:57:46.944748 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 01:57:47.392095 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 01:57:47.897021 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 01:57:47.897121 [INFO] Engine command: (self-startup)

2024/02/02 01:57:47.897129 [INFO] Downloading EB Application...
2024/02/02 01:57:47.897132 [INFO] Region: eu-west-1
2024/02/02 01:57:47.897135 [INFO] envID: e-8gmkc7rmw6
2024/02/02 01:57:47.897139 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 01:57:47.897143 [INFO] Using manifest file name from command request
2024/02/02 01:57:47.897156 [INFO] Unable to get version manifest file.
2024/02/02 01:57:47.897159 [INFO] Downloading latest manifest available.
2024/02/02 01:57:47.897161 [INFO] Download latest app version manifest
2024/02/02 01:57:47.897288 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 01:57:47.943566 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 01:57:47.944172 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 01:57:47.963571 [INFO] Download successful124bytes downloaded
2024/02/02 01:57:47.963775 [INFO] Trying to read and parse version manifest...
2024/02/02 01:57:47.963855 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 01:57:47.996987 [INFO] Download successful264bytes downloaded
2024/02/02 01:57:47.997347 [INFO] Executing instruction: SyncClock
2024/02/02 01:57:47.997357 [INFO] Starting SyncClock
2024/02/02 01:57:47.997367 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 01:57:48.008473 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 01:57:33 2024
System time     : 0.000004133 seconds slow of NTP time
Last offset     : -0.000005096 seconds
RMS offset      : 0.000007982 seconds
Frequency       : 0.272 ppm fast
Residual freq   : +0.012 ppm
Skew            : 0.481 ppm
Root delay      : 0.000482444 seconds
Root dispersion : 0.000406829 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/02 01:57:48.008501 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 01:57:48.013402 [INFO] 200 OK

2024/02/02 01:57:48.013562 [INFO] Skipping Configure OS
2024/02/02 01:57:48.013573 [INFO] Skipping LockRepo
2024/02/02 01:57:48.013580 [INFO] Skipping GenerateEBBanner
2024/02/02 01:57:48.013587 [INFO] Skipping Install Process Manager
2024/02/02 01:57:48.013594 [INFO] Skipping install syslog
2024/02/02 01:57:48.013600 [INFO] Skipping install cron
2024/02/02 01:57:48.013606 [INFO] Skipping install proxy
2024/02/02 01:57:48.013611 [INFO] Skipping installhealthd
2024/02/02 01:57:48.013617 [INFO] Skipping Install Log Streaming Manager
2024/02/02 01:57:48.013622 [INFO] Skipping install X-Ray
2024/02/02 01:57:48.013643 [INFO] Skipping install Third Party License
2024/02/02 01:57:48.013651 [INFO] Skipping installSqsd
2024/02/02 01:57:48.013657 [INFO] Skipping bootstraphealthd
2024/02/02 01:57:48.013662 [INFO] Skipping Install yum packages
2024/02/02 01:57:48.013666 [INFO] Skipping install docker-compose
2024/02/02 01:57:48.013670 [INFO] Skipping Configure Docker Daemon
2024/02/02 01:57:48.013677 [INFO] Skipping MarkBaked
2024/02/02 01:57:48.013681 [INFO] Skipping TuneSystemSettings
2024/02/02 01:57:48.013685 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 01:57:48.013687 [INFO] Initialize LogRotate files and directories
2024/02/02 01:57:48.029171 [INFO] Skipping BootstrapCFNHup
2024/02/02 01:57:48.029185 [INFO] Executing instruction: StartCFNHup
2024/02/02 01:57:48.029188 [INFO] Start cfn-hup
2024/02/02 01:57:48.029208 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 01:57:48.047712 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 01:57:48.057222 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 01:57:48.057258 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 01:57:48.057261 [INFO] Executing instruction: Start Docker
2024/02/02 01:57:48.057265 [INFO] Starting Docker...
2024/02/02 01:57:48.057349 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 01:57:48.058363 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 01:57:48.059391 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 01:57:48.407196 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 01:57:48.422122 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 01:57:48.422151 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 01:57:48.431945 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 01:57:48.440676 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 01:57:48.450262 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 01:57:48.487252 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 01:57:48.487299 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 01:57:48.833510 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 01:57:49.111111 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 01:57:49.139934 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 01:57:49.394110 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 01:57:49.404804 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 01:57:49.417021 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 01:57:49.425731 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 01:57:50.584948 [INFO] Skipping Setup Docker Options
2024/02/02 01:57:50.584978 [INFO] Skipping MarkBootstrapped
2024/02/02 01:57:50.584982 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 01:57:50.585164 [INFO] Starting SwitchCFNStack
2024/02/02 01:57:50.585171 [INFO] Executing instruction: stopSqsd
2024/02/02 01:57:50.585175 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 01:57:50.585179 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 01:57:50.585183 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 01:57:50.585201 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 01:57:51.071796 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 01:57:51.071822 [INFO] Executing instruction: StagedockerApplication
2024/02/02 01:57:51.071833 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 01:57:51.098223 [INFO] Pruning containers ...
2024/02/02 01:57:51.098265 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 01:57:51.126586 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
556d28e0ef11   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             awesome_mccarthy

2024/02/02 01:57:51.127294 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 01:57:51.160442 [INFO] Deleted Containers:
556d28e0ef11d726ea89e1c99e4ef51b0124ef57be17a7f2b39f0c85b83e4f27

Total reclaimed space: 0B

2024/02/02 01:57:51.160470 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 01:57:51.187488 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 01:57:51.187768 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 01:57:51.191539 [INFO] application/json

2024/02/02 01:57:51.191568 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 01:57:51.282696 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 01:57:51.282870 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 01:57:51.284153 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 01:57:51.284182 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 01:57:51.284197 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 01:57:51.284200 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 01:57:51.284204 [INFO] Executing instruction: Generate environment file
2024/02/02 01:57:51.284230 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 01:57:51.284238 [INFO] start build docker app
2024/02/02 01:57:51.284593 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 01:57:51.284597 [INFO] fetching image and ports
2024/02/02 01:57:51.286603 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 01:57:51.286670 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 01:57:51.286713 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 01:57:51.286727 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 01:57:52.291603 [INFO] Login Succeeded

2024/02/02 01:57:52.291624 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 01:57:52.291632 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 01:57:52.291662 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 01:57:52.421881 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 01:57:52.421905 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 01:57:52.421909 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 01:57:52.421912 [INFO] start to build docker image
2024/02/02 01:57:52.421928 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 01:57:52.733508 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 01:57:52.733530 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 01:57:52.733535 [INFO] successfully build docker image
2024/02/02 01:57:52.733538 [INFO] save staging docker image id
2024/02/02 01:57:52.734146 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 01:57:52.786992 [INFO] c176d18fbf65

2024/02/02 01:57:52.787141 [INFO] Executing instruction: configure X-Ray
2024/02/02 01:57:52.787149 [INFO] X-Ray is not enabled.
2024/02/02 01:57:52.787152 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 01:57:52.795130 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 01:57:52.796685 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 01:57:52.809591 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 01:57:52.809625 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 01:57:52.823487 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 01:57:52.833252 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 01:57:52.843997 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 01:57:52.917680 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 01:57:53.294448 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 01:57:53.294532 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 01:57:53.664171 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 01:57:53.676119 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 01:57:53.991594 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 01:57:54.016745 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 01:57:54.033802 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 01:57:54.390154 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 01:57:54.399760 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 01:57:54.715780 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 01:57:54.715818 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 01:57:54.729529 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 01:57:54.740263 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 01:57:54.843832 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 01:57:54.844814 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 01:57:54.845750 [INFO] Executing instruction: configure log streaming
2024/02/02 01:57:54.845759 [INFO] log streaming is not enabled
2024/02/02 01:57:54.845763 [INFO] disable log stream
2024/02/02 01:57:54.845778 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 01:57:54.865639 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 01:57:54.888238 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 01:57:54.888265 [INFO] Checking if logs need forced rotation
2024/02/02 01:57:54.888286 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 01:57:55.471462 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 01:57:55.903180 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 01:57:55.904868 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 01:57:55.999362 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 01:57:56.020546 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 01:57:56.020562 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 01:57:56.020578 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 01:57:56.478862 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 01:57:56.478889 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 01:57:56.478913 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 01:57:56.478915 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 01:57:56.478942 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 01:57:56.478957 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 01:57:56.478966 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 01:57:56.478972 [INFO] Executing instruction: stop X-Ray
2024/02/02 01:57:56.478975 [INFO] stop X-Ray ...
2024/02/02 01:57:56.478985 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 01:57:56.494064 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 01:57:56.494096 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 01:57:56.510732 [INFO] Executing instruction: Run Docker Container
2024/02/02 01:57:56.510761 [INFO] stop currently running containers...
2024/02/02 01:57:56.510775 [INFO] detected old app is not docker compose app
2024/02/02 01:57:56.510789 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 01:57:56.562822 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 01:57:56.578480 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 01:57:56.578515 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 01:57:56.592370 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 01:57:56.592408 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 01:57:56.606940 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 01:57:56.606989 [INFO] stopping current container: 556d28e0ef11
2024/02/02 01:57:56.607002 [INFO] Running command /bin/sh -c docker ps | grep -q 556d28e0ef11
2024/02/02 01:57:56.628349 [INFO] Running command /bin/sh -c docker ps | grep -q 556d28e0ef11
2024/02/02 01:57:56.648212 [INFO] Pruning containers ...
2024/02/02 01:57:56.648238 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 01:57:56.672455 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 01:57:56.672487 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 01:57:56.717364 [INFO] Total reclaimed space: 0B

2024/02/02 01:57:56.717393 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 01:57:56.741879 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 01:57:56.741912 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 01:57:56.761100 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 01:57:56.761121 [INFO] Removing /var/app/current/ if it exists
2024/02/02 01:57:56.761209 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 01:57:56.761225 [INFO] detected new app is not docker compose app
2024/02/02 01:57:56.761278 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 01:57:57.164854 [INFO] 5f4d7f05915f42467c68f1ad820635feca08a8d1cb383d244cf97efeb4e593d7

2024/02/02 01:58:02.165411 [INFO] Running command /bin/sh -c docker ps | grep -q 5f4d7f05915f
2024/02/02 01:58:02.225766 [ERROR] docker container quit unexpectedly on 2024-02-02 01:58:02.225677213 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5f4d7f05915f failed with error exit status 1
2024/02/02 01:58:02.226031 [INFO] Running command /bin/sh -c docker logs 5f4d7f05915f
2024/02/02 01:58:02.295871 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5f4d7f05915f: Command /bin/sh -c docker ps | grep -q 5f4d7f05915f failed with error exit status 1 

2024/02/02 01:58:02.295963 [INFO] Executing cleanup logic
2024/02/02 01:58:02.297290 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 02:58:03.684443 [INFO] Starting...
2024/02/02 02:58:03.684484 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 02:58:03.684509 [INFO] reading event message file
2024/02/02 02:58:03.685461 [INFO] Engine received EB command userdata-exec

2024/02/02 02:58:03.691099 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 02:58:04.154540 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 02:58:04.571985 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 02:58:04.572088 [INFO] Engine command: (self-startup)

2024/02/02 02:58:04.572096 [INFO] Downloading EB Application...
2024/02/02 02:58:04.572100 [INFO] Region: eu-west-1
2024/02/02 02:58:04.572103 [INFO] envID: e-8gmkc7rmw6
2024/02/02 02:58:04.572105 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 02:58:04.572108 [INFO] Using manifest file name from command request
2024/02/02 02:58:04.572122 [INFO] Unable to get version manifest file.
2024/02/02 02:58:04.572143 [INFO] Downloading latest manifest available.
2024/02/02 02:58:04.572146 [INFO] Download latest app version manifest
2024/02/02 02:58:04.572273 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 02:58:04.615800 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 02:58:04.615977 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 02:58:04.630048 [INFO] Download successful124bytes downloaded
2024/02/02 02:58:04.630202 [INFO] Trying to read and parse version manifest...
2024/02/02 02:58:04.630277 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 02:58:04.663612 [INFO] Download successful264bytes downloaded
2024/02/02 02:58:04.664033 [INFO] Executing instruction: SyncClock
2024/02/02 02:58:04.664041 [INFO] Starting SyncClock
2024/02/02 02:58:04.664054 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 02:58:04.669890 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 02:57:53 2024
System time     : 0.000003668 seconds slow of NTP time
Last offset     : -0.000004092 seconds
RMS offset      : 0.000006890 seconds
Frequency       : 0.353 ppm fast
Residual freq   : -0.005 ppm
Skew            : 0.156 ppm
Root delay      : 0.000413613 seconds
Root dispersion : 0.000393898 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/02 02:58:04.669909 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 02:58:04.674455 [INFO] 200 OK

2024/02/02 02:58:04.674548 [INFO] Skipping Configure OS
2024/02/02 02:58:04.674553 [INFO] Skipping LockRepo
2024/02/02 02:58:04.674557 [INFO] Skipping GenerateEBBanner
2024/02/02 02:58:04.674562 [INFO] Skipping Install Process Manager
2024/02/02 02:58:04.674566 [INFO] Skipping install syslog
2024/02/02 02:58:04.674569 [INFO] Skipping install cron
2024/02/02 02:58:04.674573 [INFO] Skipping install proxy
2024/02/02 02:58:04.674577 [INFO] Skipping installhealthd
2024/02/02 02:58:04.674581 [INFO] Skipping Install Log Streaming Manager
2024/02/02 02:58:04.674585 [INFO] Skipping install X-Ray
2024/02/02 02:58:04.674589 [INFO] Skipping install Third Party License
2024/02/02 02:58:04.674593 [INFO] Skipping installSqsd
2024/02/02 02:58:04.674597 [INFO] Skipping bootstraphealthd
2024/02/02 02:58:04.674601 [INFO] Skipping Install yum packages
2024/02/02 02:58:04.674605 [INFO] Skipping install docker-compose
2024/02/02 02:58:04.674608 [INFO] Skipping Configure Docker Daemon
2024/02/02 02:58:04.674612 [INFO] Skipping MarkBaked
2024/02/02 02:58:04.674616 [INFO] Skipping TuneSystemSettings
2024/02/02 02:58:04.674618 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 02:58:04.674624 [INFO] Initialize LogRotate files and directories
2024/02/02 02:58:04.690827 [INFO] Skipping BootstrapCFNHup
2024/02/02 02:58:04.690838 [INFO] Executing instruction: StartCFNHup
2024/02/02 02:58:04.690841 [INFO] Start cfn-hup
2024/02/02 02:58:04.690860 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 02:58:04.704382 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 02:58:04.712663 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 02:58:04.712696 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 02:58:04.712700 [INFO] Executing instruction: Start Docker
2024/02/02 02:58:04.712703 [INFO] Starting Docker...
2024/02/02 02:58:04.712784 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 02:58:04.714102 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 02:58:04.715421 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 02:58:05.154200 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 02:58:05.173239 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 02:58:05.173280 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 02:58:05.188705 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 02:58:05.199294 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 02:58:05.219202 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 02:58:05.292183 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 02:58:05.292238 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 02:58:05.703798 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 02:58:06.006507 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 02:58:06.017841 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 02:58:06.370882 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 02:58:06.379401 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 02:58:06.393529 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 02:58:06.402972 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 02:58:07.820738 [INFO] Skipping Setup Docker Options
2024/02/02 02:58:07.820768 [INFO] Skipping MarkBootstrapped
2024/02/02 02:58:07.820825 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 02:58:07.820952 [INFO] Starting SwitchCFNStack
2024/02/02 02:58:07.820958 [INFO] Executing instruction: stopSqsd
2024/02/02 02:58:07.820962 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 02:58:07.820965 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 02:58:07.820969 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 02:58:07.820987 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 02:58:08.282719 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 02:58:08.282745 [INFO] Executing instruction: StagedockerApplication
2024/02/02 02:58:08.282757 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 02:58:08.307523 [INFO] Pruning containers ...
2024/02/02 02:58:08.307556 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 02:58:08.329649 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
5f4d7f05915f   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             priceless_payne

2024/02/02 02:58:08.329688 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 02:58:08.361842 [INFO] Deleted Containers:
5f4d7f05915f42467c68f1ad820635feca08a8d1cb383d244cf97efeb4e593d7

Total reclaimed space: 0B

2024/02/02 02:58:08.361864 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 02:58:08.386693 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 02:58:08.387049 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 02:58:08.395679 [INFO] application/json

2024/02/02 02:58:08.395724 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 02:58:08.462946 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 02:58:08.463116 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 02:58:08.464300 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 02:58:08.464326 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 02:58:08.464341 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 02:58:08.464343 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 02:58:08.464347 [INFO] Executing instruction: Generate environment file
2024/02/02 02:58:08.464374 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 02:58:08.464377 [INFO] start build docker app
2024/02/02 02:58:08.464847 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 02:58:08.464850 [INFO] fetching image and ports
2024/02/02 02:58:08.466589 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 02:58:08.466637 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 02:58:08.466646 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 02:58:08.466655 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 02:58:09.389530 [INFO] Login Succeeded

2024/02/02 02:58:09.389548 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 02:58:09.389556 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 02:58:09.389668 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 02:58:09.566155 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 02:58:09.566190 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 02:58:09.566195 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 02:58:09.566199 [INFO] start to build docker image
2024/02/02 02:58:09.566227 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 02:58:09.936836 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 02:58:09.936862 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 02:58:09.936867 [INFO] successfully build docker image
2024/02/02 02:58:09.936870 [INFO] save staging docker image id
2024/02/02 02:58:09.936884 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 02:58:09.983293 [INFO] c176d18fbf65

2024/02/02 02:58:09.983430 [INFO] Executing instruction: configure X-Ray
2024/02/02 02:58:09.983437 [INFO] X-Ray is not enabled.
2024/02/02 02:58:09.983439 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 02:58:09.989126 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 02:58:09.990689 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 02:58:10.019167 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 02:58:10.021002 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 02:58:10.048456 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 02:58:10.062210 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 02:58:10.072901 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 02:58:10.150431 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 02:58:10.604699 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 02:58:10.604912 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 02:58:10.869820 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 02:58:10.879893 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 02:58:11.252259 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 02:58:11.261668 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 02:58:11.270195 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 02:58:11.559335 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 02:58:11.573133 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 02:58:11.899516 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 02:58:11.899556 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 02:58:11.912400 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 02:58:11.920590 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 02:58:11.982792 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 02:58:11.983746 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 02:58:11.984719 [INFO] Executing instruction: configure log streaming
2024/02/02 02:58:11.984731 [INFO] log streaming is not enabled
2024/02/02 02:58:11.984734 [INFO] disable log stream
2024/02/02 02:58:11.984755 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 02:58:12.007188 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 02:58:12.027196 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 02:58:12.027221 [INFO] Checking if logs need forced rotation
2024/02/02 02:58:12.027252 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 02:58:12.556307 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 02:58:13.032305 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 02:58:13.034181 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 02:58:13.087982 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 02:58:13.106695 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 02:58:13.106713 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 02:58:13.106725 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 02:58:13.567374 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 02:58:13.567399 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 02:58:13.567424 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 02:58:13.567427 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 02:58:13.567450 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 02:58:13.567464 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 02:58:13.567467 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 02:58:13.567472 [INFO] Executing instruction: stop X-Ray
2024/02/02 02:58:13.567474 [INFO] stop X-Ray ...
2024/02/02 02:58:13.567483 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 02:58:13.583109 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 02:58:13.583185 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 02:58:13.598885 [INFO] Executing instruction: Run Docker Container
2024/02/02 02:58:13.598918 [INFO] stop currently running containers...
2024/02/02 02:58:13.598930 [INFO] detected old app is not docker compose app
2024/02/02 02:58:13.598944 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 02:58:13.682569 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 02:58:13.702091 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 02:58:13.702131 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 02:58:13.724669 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 02:58:13.724751 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 02:58:13.747571 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 02:58:13.747741 [INFO] stopping current container: 5f4d7f05915f
2024/02/02 02:58:13.747754 [INFO] Running command /bin/sh -c docker ps | grep -q 5f4d7f05915f
2024/02/02 02:58:13.774349 [INFO] Running command /bin/sh -c docker ps | grep -q 5f4d7f05915f
2024/02/02 02:58:13.816682 [INFO] Pruning containers ...
2024/02/02 02:58:13.816707 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 02:58:13.839879 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 02:58:13.839915 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 02:58:13.863357 [INFO] Total reclaimed space: 0B

2024/02/02 02:58:13.863390 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 02:58:13.886127 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 02:58:13.886160 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 02:58:13.938337 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 02:58:13.938359 [INFO] Removing /var/app/current/ if it exists
2024/02/02 02:58:13.938603 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 02:58:13.938622 [INFO] detected new app is not docker compose app
2024/02/02 02:58:13.938672 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 02:58:14.406215 [INFO] d7697e2f016c1d38cb2975739ee4380869cdffc89642b6c0abad915b502d4daa

2024/02/02 02:58:19.410575 [INFO] Running command /bin/sh -c docker ps | grep -q d7697e2f016c
2024/02/02 02:58:19.431435 [ERROR] docker container quit unexpectedly on 2024-02-02 02:58:19.431359721 +0000 UTC: Command /bin/sh -c docker ps | grep -q d7697e2f016c failed with error exit status 1
2024/02/02 02:58:19.431470 [INFO] Running command /bin/sh -c docker logs d7697e2f016c
2024/02/02 02:58:19.455919 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container d7697e2f016c: Command /bin/sh -c docker ps | grep -q d7697e2f016c failed with error exit status 1 

2024/02/02 02:58:19.455929 [INFO] Executing cleanup logic
2024/02/02 02:58:19.456145 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 03:58:20.425594 [INFO] Starting...
2024/02/02 03:58:20.425637 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 03:58:20.425667 [INFO] reading event message file
2024/02/02 03:58:20.426348 [INFO] Engine received EB command userdata-exec

2024/02/02 03:58:20.432551 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 03:58:20.938897 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 03:58:21.403871 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 03:58:21.403962 [INFO] Engine command: (self-startup)

2024/02/02 03:58:21.403970 [INFO] Downloading EB Application...
2024/02/02 03:58:21.403973 [INFO] Region: eu-west-1
2024/02/02 03:58:21.403977 [INFO] envID: e-8gmkc7rmw6
2024/02/02 03:58:21.403980 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 03:58:21.403983 [INFO] Using manifest file name from command request
2024/02/02 03:58:21.403997 [INFO] Unable to get version manifest file.
2024/02/02 03:58:21.404000 [INFO] Downloading latest manifest available.
2024/02/02 03:58:21.404002 [INFO] Download latest app version manifest
2024/02/02 03:58:21.404167 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 03:58:21.448372 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 03:58:21.448591 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 03:58:21.458764 [INFO] Download successful124bytes downloaded
2024/02/02 03:58:21.458904 [INFO] Trying to read and parse version manifest...
2024/02/02 03:58:21.458978 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 03:58:21.482843 [INFO] Download successful264bytes downloaded
2024/02/02 03:58:21.483229 [INFO] Executing instruction: SyncClock
2024/02/02 03:58:21.483235 [INFO] Starting SyncClock
2024/02/02 03:58:21.483246 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 03:58:21.489137 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 03:58:19 2024
System time     : 0.000001324 seconds slow of NTP time
Last offset     : -0.000000073 seconds
RMS offset      : 0.000005143 seconds
Frequency       : 0.557 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.093 ppm
Root delay      : 0.000435108 seconds
Root dispersion : 0.000394230 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/02 03:58:21.489157 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 03:58:21.493631 [INFO] 200 OK

2024/02/02 03:58:21.493782 [INFO] Skipping Configure OS
2024/02/02 03:58:21.493788 [INFO] Skipping LockRepo
2024/02/02 03:58:21.493792 [INFO] Skipping GenerateEBBanner
2024/02/02 03:58:21.493796 [INFO] Skipping Install Process Manager
2024/02/02 03:58:21.493811 [INFO] Skipping install syslog
2024/02/02 03:58:21.493815 [INFO] Skipping install cron
2024/02/02 03:58:21.493819 [INFO] Skipping install proxy
2024/02/02 03:58:21.493822 [INFO] Skipping installhealthd
2024/02/02 03:58:21.493826 [INFO] Skipping Install Log Streaming Manager
2024/02/02 03:58:21.493830 [INFO] Skipping install X-Ray
2024/02/02 03:58:21.493833 [INFO] Skipping install Third Party License
2024/02/02 03:58:21.493839 [INFO] Skipping installSqsd
2024/02/02 03:58:21.493842 [INFO] Skipping bootstraphealthd
2024/02/02 03:58:21.493846 [INFO] Skipping Install yum packages
2024/02/02 03:58:21.493849 [INFO] Skipping install docker-compose
2024/02/02 03:58:21.493853 [INFO] Skipping Configure Docker Daemon
2024/02/02 03:58:21.493857 [INFO] Skipping MarkBaked
2024/02/02 03:58:21.493863 [INFO] Skipping TuneSystemSettings
2024/02/02 03:58:21.493866 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 03:58:21.493868 [INFO] Initialize LogRotate files and directories
2024/02/02 03:58:21.515730 [INFO] Skipping BootstrapCFNHup
2024/02/02 03:58:21.515746 [INFO] Executing instruction: StartCFNHup
2024/02/02 03:58:21.515750 [INFO] Start cfn-hup
2024/02/02 03:58:21.515768 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 03:58:21.529604 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 03:58:21.545300 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 03:58:21.545337 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 03:58:21.545341 [INFO] Executing instruction: Start Docker
2024/02/02 03:58:21.545345 [INFO] Starting Docker...
2024/02/02 03:58:21.545429 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 03:58:21.546984 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 03:58:21.548253 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 03:58:21.922196 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 03:58:21.945511 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 03:58:21.945606 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 03:58:21.968020 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 03:58:21.983538 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 03:58:22.006093 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 03:58:22.099364 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 03:58:22.099404 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 03:58:22.497057 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 03:58:22.865125 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 03:58:22.878414 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 03:58:23.235012 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 03:58:23.248750 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 03:58:23.268599 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 03:58:23.279422 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 03:58:24.450062 [INFO] Skipping Setup Docker Options
2024/02/02 03:58:24.450079 [INFO] Skipping MarkBootstrapped
2024/02/02 03:58:24.450082 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 03:58:24.450168 [INFO] Starting SwitchCFNStack
2024/02/02 03:58:24.450172 [INFO] Executing instruction: stopSqsd
2024/02/02 03:58:24.450175 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 03:58:24.450178 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 03:58:24.450180 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 03:58:24.450199 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 03:58:24.883675 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 03:58:24.883766 [INFO] Executing instruction: StagedockerApplication
2024/02/02 03:58:24.883783 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 03:58:24.905232 [INFO] Pruning containers ...
2024/02/02 03:58:24.905267 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 03:58:24.941492 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
d7697e2f016c   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             exciting_taussig

2024/02/02 03:58:24.941603 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 03:58:24.971801 [INFO] Deleted Containers:
d7697e2f016c1d38cb2975739ee4380869cdffc89642b6c0abad915b502d4daa

Total reclaimed space: 0B

2024/02/02 03:58:24.971822 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 03:58:24.996653 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 03:58:24.996913 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 03:58:24.999827 [INFO] application/json

2024/02/02 03:58:24.999846 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 03:58:25.090025 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 03:58:25.090192 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 03:58:25.091664 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 03:58:25.091693 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 03:58:25.091712 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 03:58:25.091715 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 03:58:25.091719 [INFO] Executing instruction: Generate environment file
2024/02/02 03:58:25.091753 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 03:58:25.091757 [INFO] start build docker app
2024/02/02 03:58:25.092124 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 03:58:25.092133 [INFO] fetching image and ports
2024/02/02 03:58:25.094420 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 03:58:25.094481 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 03:58:25.094493 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 03:58:25.094504 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 03:58:26.066969 [INFO] Login Succeeded

2024/02/02 03:58:26.066984 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 03:58:26.066992 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 03:58:26.067009 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 03:58:26.234873 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 03:58:26.234898 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 03:58:26.234903 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 03:58:26.234906 [INFO] start to build docker image
2024/02/02 03:58:26.234926 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 03:58:26.518597 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 03:58:26.518618 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 03:58:26.518622 [INFO] successfully build docker image
2024/02/02 03:58:26.518624 [INFO] save staging docker image id
2024/02/02 03:58:26.518637 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 03:58:26.539330 [INFO] c176d18fbf65

2024/02/02 03:58:26.539471 [INFO] Executing instruction: configure X-Ray
2024/02/02 03:58:26.539478 [INFO] X-Ray is not enabled.
2024/02/02 03:58:26.539482 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 03:58:26.545225 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 03:58:26.547016 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 03:58:26.559431 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 03:58:26.559467 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 03:58:26.572004 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 03:58:26.580932 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 03:58:26.590966 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 03:58:26.658869 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 03:58:26.976743 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 03:58:26.976827 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 03:58:27.284157 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 03:58:27.296204 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 03:58:27.574768 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 03:58:27.586674 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 03:58:27.598121 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 03:58:27.905601 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 03:58:27.915467 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 03:58:28.335344 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 03:58:28.335372 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 03:58:28.348855 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 03:58:28.357472 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 03:58:28.491045 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 03:58:28.492191 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 03:58:28.493090 [INFO] Executing instruction: configure log streaming
2024/02/02 03:58:28.493101 [INFO] log streaming is not enabled
2024/02/02 03:58:28.493105 [INFO] disable log stream
2024/02/02 03:58:28.493120 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 03:58:28.515842 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 03:58:28.534575 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 03:58:28.534598 [INFO] Checking if logs need forced rotation
2024/02/02 03:58:28.534622 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 03:58:29.090754 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 03:58:29.541424 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 03:58:29.543284 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 03:58:29.670084 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 03:58:29.688480 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 03:58:29.688495 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 03:58:29.688507 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 03:58:30.154084 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 03:58:30.154107 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 03:58:30.154140 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 03:58:30.154143 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 03:58:30.154169 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 03:58:30.154180 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 03:58:30.154183 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 03:58:30.154187 [INFO] Executing instruction: stop X-Ray
2024/02/02 03:58:30.154190 [INFO] stop X-Ray ...
2024/02/02 03:58:30.154204 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 03:58:30.177321 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 03:58:30.177349 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 03:58:30.202603 [INFO] Executing instruction: Run Docker Container
2024/02/02 03:58:30.202710 [INFO] stop currently running containers...
2024/02/02 03:58:30.202722 [INFO] detected old app is not docker compose app
2024/02/02 03:58:30.202737 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 03:58:30.263119 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 03:58:30.284485 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 03:58:30.284519 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 03:58:30.300081 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 03:58:30.300112 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 03:58:30.341540 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 03:58:30.341608 [INFO] stopping current container: d7697e2f016c
2024/02/02 03:58:30.341621 [INFO] Running command /bin/sh -c docker ps | grep -q d7697e2f016c
2024/02/02 03:58:30.370020 [INFO] Running command /bin/sh -c docker ps | grep -q d7697e2f016c
2024/02/02 03:58:30.388388 [INFO] Pruning containers ...
2024/02/02 03:58:30.388412 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 03:58:30.406227 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 03:58:30.406253 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 03:58:30.424364 [INFO] Total reclaimed space: 0B

2024/02/02 03:58:30.424399 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 03:58:30.440860 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 03:58:30.440895 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 03:58:30.483287 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 03:58:30.483306 [INFO] Removing /var/app/current/ if it exists
2024/02/02 03:58:30.483476 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 03:58:30.483494 [INFO] detected new app is not docker compose app
2024/02/02 03:58:30.483547 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 03:58:30.966177 [INFO] 5b8d04cb901b2e48af4b98808cbfed50e9a17708547272b64583c4e81d5b88da

2024/02/02 03:58:35.969550 [INFO] Running command /bin/sh -c docker ps | grep -q 5b8d04cb901b
2024/02/02 03:58:35.989469 [ERROR] docker container quit unexpectedly on 2024-02-02 03:58:35.989452301 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5b8d04cb901b failed with error exit status 1
2024/02/02 03:58:35.989501 [INFO] Running command /bin/sh -c docker logs 5b8d04cb901b
2024/02/02 03:58:36.014085 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5b8d04cb901b: Command /bin/sh -c docker ps | grep -q 5b8d04cb901b failed with error exit status 1 

2024/02/02 03:58:36.014096 [INFO] Executing cleanup logic
2024/02/02 03:58:36.014321 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 04:58:37.066455 [INFO] Starting...
2024/02/02 04:58:37.066507 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 04:58:37.066544 [INFO] reading event message file
2024/02/02 04:58:37.067387 [INFO] Engine received EB command userdata-exec

2024/02/02 04:58:37.072735 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 04:58:37.522553 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 04:58:37.989752 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 04:58:37.989848 [INFO] Engine command: (self-startup)

2024/02/02 04:58:37.989855 [INFO] Downloading EB Application...
2024/02/02 04:58:37.989858 [INFO] Region: eu-west-1
2024/02/02 04:58:37.989862 [INFO] envID: e-8gmkc7rmw6
2024/02/02 04:58:37.989865 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 04:58:37.989868 [INFO] Using manifest file name from command request
2024/02/02 04:58:37.989883 [INFO] Unable to get version manifest file.
2024/02/02 04:58:37.989891 [INFO] Downloading latest manifest available.
2024/02/02 04:58:37.989894 [INFO] Download latest app version manifest
2024/02/02 04:58:37.990023 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 04:58:38.029629 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 04:58:38.029827 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 04:58:38.040407 [INFO] Download successful124bytes downloaded
2024/02/02 04:58:38.040650 [INFO] Trying to read and parse version manifest...
2024/02/02 04:58:38.040729 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 04:58:38.065285 [INFO] Download successful264bytes downloaded
2024/02/02 04:58:38.065647 [INFO] Executing instruction: SyncClock
2024/02/02 04:58:38.065654 [INFO] Starting SyncClock
2024/02/02 04:58:38.065668 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 04:58:38.071640 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 04:58:24 2024
System time     : 0.000000672 seconds fast of NTP time
Last offset     : -0.000001961 seconds
RMS offset      : 0.000006422 seconds
Frequency       : 0.469 ppm fast
Residual freq   : +0.015 ppm
Skew            : 0.640 ppm
Root delay      : 0.000440217 seconds
Root dispersion : 0.000353401 seconds
Update interval : 16.4 seconds
Leap status     : Normal

2024/02/02 04:58:38.071669 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 04:58:38.075848 [INFO] 200 OK

2024/02/02 04:58:38.076112 [INFO] Skipping Configure OS
2024/02/02 04:58:38.076122 [INFO] Skipping LockRepo
2024/02/02 04:58:38.076126 [INFO] Skipping GenerateEBBanner
2024/02/02 04:58:38.076130 [INFO] Skipping Install Process Manager
2024/02/02 04:58:38.076134 [INFO] Skipping install syslog
2024/02/02 04:58:38.076138 [INFO] Skipping install cron
2024/02/02 04:58:38.076142 [INFO] Skipping install proxy
2024/02/02 04:58:38.076145 [INFO] Skipping installhealthd
2024/02/02 04:58:38.076149 [INFO] Skipping Install Log Streaming Manager
2024/02/02 04:58:38.076153 [INFO] Skipping install X-Ray
2024/02/02 04:58:38.076157 [INFO] Skipping install Third Party License
2024/02/02 04:58:38.076162 [INFO] Skipping installSqsd
2024/02/02 04:58:38.076166 [INFO] Skipping bootstraphealthd
2024/02/02 04:58:38.076170 [INFO] Skipping Install yum packages
2024/02/02 04:58:38.076174 [INFO] Skipping install docker-compose
2024/02/02 04:58:38.076178 [INFO] Skipping Configure Docker Daemon
2024/02/02 04:58:38.076182 [INFO] Skipping MarkBaked
2024/02/02 04:58:38.076193 [INFO] Skipping TuneSystemSettings
2024/02/02 04:58:38.076195 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 04:58:38.076198 [INFO] Initialize LogRotate files and directories
2024/02/02 04:58:38.089952 [INFO] Skipping BootstrapCFNHup
2024/02/02 04:58:38.089961 [INFO] Executing instruction: StartCFNHup
2024/02/02 04:58:38.089964 [INFO] Start cfn-hup
2024/02/02 04:58:38.089980 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 04:58:38.103901 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 04:58:38.114086 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 04:58:38.114120 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 04:58:38.114124 [INFO] Executing instruction: Start Docker
2024/02/02 04:58:38.114128 [INFO] Starting Docker...
2024/02/02 04:58:38.114207 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 04:58:38.115209 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 04:58:38.116410 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 04:58:38.423937 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 04:58:38.442246 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 04:58:38.442279 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 04:58:38.454036 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 04:58:38.464912 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 04:58:38.476653 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 04:58:38.577610 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 04:58:38.577641 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 04:58:38.885032 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 04:58:39.190209 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 04:58:39.202670 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 04:58:39.469134 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 04:58:39.479893 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 04:58:39.492886 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 04:58:39.501005 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 04:58:40.639375 [INFO] Skipping Setup Docker Options
2024/02/02 04:58:40.639456 [INFO] Skipping MarkBootstrapped
2024/02/02 04:58:40.639460 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 04:58:40.639577 [INFO] Starting SwitchCFNStack
2024/02/02 04:58:40.639583 [INFO] Executing instruction: stopSqsd
2024/02/02 04:58:40.639587 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 04:58:40.639590 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 04:58:40.639593 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 04:58:40.639610 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 04:58:41.117076 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 04:58:41.117148 [INFO] Executing instruction: StagedockerApplication
2024/02/02 04:58:41.117161 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 04:58:41.138316 [INFO] Pruning containers ...
2024/02/02 04:58:41.138349 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 04:58:41.162697 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
5b8d04cb901b   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             blissful_ride

2024/02/02 04:58:41.162732 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 04:58:41.187353 [INFO] Deleted Containers:
5b8d04cb901b2e48af4b98808cbfed50e9a17708547272b64583c4e81d5b88da

Total reclaimed space: 0B

2024/02/02 04:58:41.187378 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 04:58:41.206244 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 04:58:41.206516 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 04:58:41.210277 [INFO] application/json

2024/02/02 04:58:41.210300 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 04:58:41.280970 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 04:58:41.281136 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 04:58:41.282338 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 04:58:41.282360 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 04:58:41.282373 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 04:58:41.282379 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 04:58:41.282383 [INFO] Executing instruction: Generate environment file
2024/02/02 04:58:41.282415 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 04:58:41.282419 [INFO] start build docker app
2024/02/02 04:58:41.282801 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 04:58:41.282806 [INFO] fetching image and ports
2024/02/02 04:58:41.284356 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 04:58:41.284410 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 04:58:41.284418 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 04:58:41.284429 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 04:58:42.211264 [INFO] Login Succeeded

2024/02/02 04:58:42.211292 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 04:58:42.211299 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 04:58:42.211322 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 04:58:42.401622 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 04:58:42.401648 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 04:58:42.401654 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 04:58:42.401664 [INFO] start to build docker image
2024/02/02 04:58:42.401681 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 04:58:42.685288 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 04:58:42.685313 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 04:58:42.685316 [INFO] successfully build docker image
2024/02/02 04:58:42.685319 [INFO] save staging docker image id
2024/02/02 04:58:42.685333 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 04:58:42.714138 [INFO] c176d18fbf65

2024/02/02 04:58:42.714261 [INFO] Executing instruction: configure X-Ray
2024/02/02 04:58:42.714267 [INFO] X-Ray is not enabled.
2024/02/02 04:58:42.714270 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 04:58:42.721193 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 04:58:42.723128 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 04:58:42.747607 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 04:58:42.747755 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 04:58:42.760402 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 04:58:42.772342 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 04:58:42.782435 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 04:58:42.858426 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 04:58:43.162287 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 04:58:43.162379 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 04:58:43.499666 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 04:58:43.511905 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 04:58:43.797578 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 04:58:43.807192 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 04:58:43.818552 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 04:58:44.104457 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 04:58:44.115359 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 04:58:44.411914 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 04:58:44.411949 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 04:58:44.423760 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 04:58:44.432102 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 04:58:44.499802 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 04:58:44.500883 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 04:58:44.502006 [INFO] Executing instruction: configure log streaming
2024/02/02 04:58:44.502024 [INFO] log streaming is not enabled
2024/02/02 04:58:44.502029 [INFO] disable log stream
2024/02/02 04:58:44.502045 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 04:58:44.527363 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 04:58:44.555323 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 04:58:44.555348 [INFO] Checking if logs need forced rotation
2024/02/02 04:58:44.555371 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 04:58:45.132215 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 04:58:45.612323 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 04:58:45.614582 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 04:58:46.149829 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 04:58:46.168842 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 04:58:46.168857 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 04:58:46.168868 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 04:58:46.584989 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 04:58:46.585025 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 04:58:46.585053 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 04:58:46.585057 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 04:58:46.585080 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 04:58:46.585093 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 04:58:46.585097 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 04:58:46.585103 [INFO] Executing instruction: stop X-Ray
2024/02/02 04:58:46.585107 [INFO] stop X-Ray ...
2024/02/02 04:58:46.585120 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 04:58:46.599368 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 04:58:46.599401 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 04:58:46.615574 [INFO] Executing instruction: Run Docker Container
2024/02/02 04:58:46.615611 [INFO] stop currently running containers...
2024/02/02 04:58:46.615622 [INFO] detected old app is not docker compose app
2024/02/02 04:58:46.615636 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 04:58:46.692466 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 04:58:46.706987 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 04:58:46.707024 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 04:58:46.721992 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 04:58:46.722025 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 04:58:46.737670 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 04:58:46.737726 [INFO] stopping current container: 5b8d04cb901b
2024/02/02 04:58:46.737740 [INFO] Running command /bin/sh -c docker ps | grep -q 5b8d04cb901b
2024/02/02 04:58:46.758430 [INFO] Running command /bin/sh -c docker ps | grep -q 5b8d04cb901b
2024/02/02 04:58:46.781458 [INFO] Pruning containers ...
2024/02/02 04:58:46.781486 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 04:58:46.801670 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 04:58:46.801698 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 04:58:46.821335 [INFO] Total reclaimed space: 0B

2024/02/02 04:58:46.821365 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 04:58:46.841093 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 04:58:46.841129 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 04:58:46.863749 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 04:58:46.863769 [INFO] Removing /var/app/current/ if it exists
2024/02/02 04:58:46.863930 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 04:58:46.863948 [INFO] detected new app is not docker compose app
2024/02/02 04:58:46.864008 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 04:58:47.279566 [INFO] c55ce8a603ece08392b12ef942cdad66efe7b4cb661c856907260583166fc385

2024/02/02 04:58:52.284079 [INFO] Running command /bin/sh -c docker ps | grep -q c55ce8a603ec
2024/02/02 04:58:52.326931 [ERROR] docker container quit unexpectedly on 2024-02-02 04:58:52.326910917 +0000 UTC: Command /bin/sh -c docker ps | grep -q c55ce8a603ec failed with error exit status 1
2024/02/02 04:58:52.326959 [INFO] Running command /bin/sh -c docker logs c55ce8a603ec
2024/02/02 04:58:52.350504 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c55ce8a603ec: Command /bin/sh -c docker ps | grep -q c55ce8a603ec failed with error exit status 1 

2024/02/02 04:58:52.350512 [INFO] Executing cleanup logic
2024/02/02 04:58:52.350721 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 05:58:53.355074 [INFO] Starting...
2024/02/02 05:58:53.355114 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 05:58:53.355138 [INFO] reading event message file
2024/02/02 05:58:53.355814 [INFO] Engine received EB command userdata-exec

2024/02/02 05:58:53.360680 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 05:58:53.844018 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 05:58:54.265822 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 05:58:54.265989 [INFO] Engine command: (self-startup)

2024/02/02 05:58:54.265999 [INFO] Downloading EB Application...
2024/02/02 05:58:54.266003 [INFO] Region: eu-west-1
2024/02/02 05:58:54.266006 [INFO] envID: e-8gmkc7rmw6
2024/02/02 05:58:54.266010 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 05:58:54.266043 [INFO] Using manifest file name from command request
2024/02/02 05:58:54.266074 [INFO] Unable to get version manifest file.
2024/02/02 05:58:54.266078 [INFO] Downloading latest manifest available.
2024/02/02 05:58:54.266081 [INFO] Download latest app version manifest
2024/02/02 05:58:54.266427 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 05:58:54.303025 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 05:58:54.303336 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 05:58:54.317588 [INFO] Download successful124bytes downloaded
2024/02/02 05:58:54.317762 [INFO] Trying to read and parse version manifest...
2024/02/02 05:58:54.317835 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 05:58:54.356736 [INFO] Download successful264bytes downloaded
2024/02/02 05:58:54.357082 [INFO] Executing instruction: SyncClock
2024/02/02 05:58:54.357086 [INFO] Starting SyncClock
2024/02/02 05:58:54.357103 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 05:58:54.364736 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 05:58:46 2024
System time     : 0.000000959 seconds slow of NTP time
Last offset     : -0.000000066 seconds
RMS offset      : 0.000001323 seconds
Frequency       : 0.128 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.028 ppm
Root delay      : 0.000435972 seconds
Root dispersion : 0.000307777 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/02 05:58:54.364773 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 05:58:54.370943 [INFO] 200 OK

2024/02/02 05:58:54.371110 [INFO] Skipping Configure OS
2024/02/02 05:58:54.371116 [INFO] Skipping LockRepo
2024/02/02 05:58:54.371120 [INFO] Skipping GenerateEBBanner
2024/02/02 05:58:54.371124 [INFO] Skipping Install Process Manager
2024/02/02 05:58:54.371128 [INFO] Skipping install syslog
2024/02/02 05:58:54.371132 [INFO] Skipping install cron
2024/02/02 05:58:54.371135 [INFO] Skipping install proxy
2024/02/02 05:58:54.371139 [INFO] Skipping installhealthd
2024/02/02 05:58:54.371143 [INFO] Skipping Install Log Streaming Manager
2024/02/02 05:58:54.371147 [INFO] Skipping install X-Ray
2024/02/02 05:58:54.371151 [INFO] Skipping install Third Party License
2024/02/02 05:58:54.371156 [INFO] Skipping installSqsd
2024/02/02 05:58:54.371160 [INFO] Skipping bootstraphealthd
2024/02/02 05:58:54.371164 [INFO] Skipping Install yum packages
2024/02/02 05:58:54.371175 [INFO] Skipping install docker-compose
2024/02/02 05:58:54.371179 [INFO] Skipping Configure Docker Daemon
2024/02/02 05:58:54.371183 [INFO] Skipping MarkBaked
2024/02/02 05:58:54.371187 [INFO] Skipping TuneSystemSettings
2024/02/02 05:58:54.371190 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 05:58:54.371192 [INFO] Initialize LogRotate files and directories
2024/02/02 05:58:54.383956 [INFO] Skipping BootstrapCFNHup
2024/02/02 05:58:54.383971 [INFO] Executing instruction: StartCFNHup
2024/02/02 05:58:54.383974 [INFO] Start cfn-hup
2024/02/02 05:58:54.383991 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 05:58:54.401694 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 05:58:54.414372 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 05:58:54.414408 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 05:58:54.414412 [INFO] Executing instruction: Start Docker
2024/02/02 05:58:54.414415 [INFO] Starting Docker...
2024/02/02 05:58:54.414501 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 05:58:54.415733 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 05:58:54.416746 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 05:58:54.913917 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 05:58:54.931157 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 05:58:54.931192 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 05:58:54.942939 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 05:58:54.952576 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 05:58:54.965645 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 05:58:55.042781 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 05:58:55.042853 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 05:58:55.331752 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 05:58:55.602657 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 05:58:55.620512 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 05:58:55.914699 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 05:58:55.924261 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 05:58:55.936664 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 05:58:55.946416 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 05:58:57.118338 [INFO] Skipping Setup Docker Options
2024/02/02 05:58:57.118364 [INFO] Skipping MarkBootstrapped
2024/02/02 05:58:57.118369 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 05:58:57.118484 [INFO] Starting SwitchCFNStack
2024/02/02 05:58:57.118490 [INFO] Executing instruction: stopSqsd
2024/02/02 05:58:57.118494 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 05:58:57.118497 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 05:58:57.118500 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 05:58:57.118517 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 05:58:57.570676 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 05:58:57.570711 [INFO] Executing instruction: StagedockerApplication
2024/02/02 05:58:57.570728 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 05:58:57.594568 [INFO] Pruning containers ...
2024/02/02 05:58:57.594609 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 05:58:57.616461 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c55ce8a603ec   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             intelligent_albattani

2024/02/02 05:58:57.616504 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 05:58:57.645643 [INFO] Deleted Containers:
c55ce8a603ece08392b12ef942cdad66efe7b4cb661c856907260583166fc385

Total reclaimed space: 0B

2024/02/02 05:58:57.645667 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 05:58:57.667187 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 05:58:57.667560 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 05:58:57.671283 [INFO] application/json

2024/02/02 05:58:57.671303 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 05:58:57.775815 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 05:58:57.775984 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 05:58:57.777372 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 05:58:57.777400 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 05:58:57.777417 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 05:58:57.777420 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 05:58:57.777425 [INFO] Executing instruction: Generate environment file
2024/02/02 05:58:57.777455 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 05:58:57.777463 [INFO] start build docker app
2024/02/02 05:58:57.777893 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 05:58:57.777897 [INFO] fetching image and ports
2024/02/02 05:58:57.780294 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 05:58:57.780393 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 05:58:57.780403 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 05:58:57.780411 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 05:58:58.709979 [INFO] Login Succeeded

2024/02/02 05:58:58.709996 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 05:58:58.710002 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 05:58:58.710018 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 05:58:58.858328 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 05:58:58.858356 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 05:58:58.858360 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 05:58:58.858363 [INFO] start to build docker image
2024/02/02 05:58:58.858378 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 05:58:59.135762 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 05:58:59.135817 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 05:58:59.135823 [INFO] successfully build docker image
2024/02/02 05:58:59.135826 [INFO] save staging docker image id
2024/02/02 05:58:59.135841 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 05:58:59.162364 [INFO] c176d18fbf65

2024/02/02 05:58:59.162584 [INFO] Executing instruction: configure X-Ray
2024/02/02 05:58:59.162591 [INFO] X-Ray is not enabled.
2024/02/02 05:58:59.162594 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 05:58:59.168354 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 05:58:59.170009 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 05:58:59.186344 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 05:58:59.186386 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 05:58:59.198970 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 05:58:59.207626 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 05:58:59.218883 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 05:58:59.296816 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 05:58:59.597347 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 05:58:59.597494 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 05:58:59.872799 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 05:58:59.882406 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 05:59:00.271659 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 05:59:00.281267 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 05:59:00.290057 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 05:59:00.696358 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 05:59:00.706817 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 05:59:01.024345 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 05:59:01.024383 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 05:59:01.039141 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 05:59:01.048090 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 05:59:01.179835 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 05:59:01.180759 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 05:59:01.181908 [INFO] Executing instruction: configure log streaming
2024/02/02 05:59:01.181922 [INFO] log streaming is not enabled
2024/02/02 05:59:01.181926 [INFO] disable log stream
2024/02/02 05:59:01.181940 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 05:59:01.211467 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 05:59:01.231512 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 05:59:01.231536 [INFO] Checking if logs need forced rotation
2024/02/02 05:59:01.231563 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 05:59:02.194150 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 05:59:02.859361 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 05:59:02.861187 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 05:59:03.419769 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 05:59:03.438306 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 05:59:03.438323 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 05:59:03.438335 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 05:59:03.817381 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 05:59:03.817405 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 05:59:03.817429 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 05:59:03.817437 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 05:59:03.817633 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 05:59:03.817652 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 05:59:03.817655 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 05:59:03.817708 [INFO] Executing instruction: stop X-Ray
2024/02/02 05:59:03.817713 [INFO] stop X-Ray ...
2024/02/02 05:59:03.817726 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 05:59:03.839246 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 05:59:03.839280 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 05:59:03.864615 [INFO] Executing instruction: Run Docker Container
2024/02/02 05:59:03.864650 [INFO] stop currently running containers...
2024/02/02 05:59:03.864661 [INFO] detected old app is not docker compose app
2024/02/02 05:59:03.864733 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 05:59:03.932480 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 05:59:03.951459 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 05:59:03.951547 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 05:59:03.970054 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 05:59:03.970090 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 05:59:03.987573 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 05:59:03.987623 [INFO] stopping current container: c55ce8a603ec
2024/02/02 05:59:03.987637 [INFO] Running command /bin/sh -c docker ps | grep -q c55ce8a603ec
2024/02/02 05:59:04.012820 [INFO] Running command /bin/sh -c docker ps | grep -q c55ce8a603ec
2024/02/02 05:59:04.035896 [INFO] Pruning containers ...
2024/02/02 05:59:04.035918 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 05:59:04.059432 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 05:59:04.059482 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 05:59:04.081522 [INFO] Total reclaimed space: 0B

2024/02/02 05:59:04.081563 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 05:59:04.145342 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 05:59:04.145374 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 05:59:04.169168 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 05:59:04.169188 [INFO] Removing /var/app/current/ if it exists
2024/02/02 05:59:04.169281 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 05:59:04.169297 [INFO] detected new app is not docker compose app
2024/02/02 05:59:04.169344 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 05:59:04.658904 [INFO] 1bc5c967b7277996b6a5e1d4bbb6a158c7a0ea6849713dc0f837954f242d8827

2024/02/02 05:59:09.661450 [INFO] Running command /bin/sh -c docker ps | grep -q 1bc5c967b727
2024/02/02 05:59:09.683959 [ERROR] docker container quit unexpectedly on 2024-02-02 05:59:09.683941606 +0000 UTC: Command /bin/sh -c docker ps | grep -q 1bc5c967b727 failed with error exit status 1
2024/02/02 05:59:09.683990 [INFO] Running command /bin/sh -c docker logs 1bc5c967b727
2024/02/02 05:59:09.715025 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 1bc5c967b727: Command /bin/sh -c docker ps | grep -q 1bc5c967b727 failed with error exit status 1 

2024/02/02 05:59:09.715038 [INFO] Executing cleanup logic
2024/02/02 05:59:09.716446 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 06:59:10.740577 [INFO] Starting...
2024/02/02 06:59:10.740620 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 06:59:10.740646 [INFO] reading event message file
2024/02/02 06:59:10.742141 [INFO] Engine received EB command userdata-exec

2024/02/02 06:59:10.752568 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 06:59:11.255364 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 06:59:11.643924 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 06:59:11.643983 [INFO] Engine command: (self-startup)

2024/02/02 06:59:11.643992 [INFO] Downloading EB Application...
2024/02/02 06:59:11.643996 [INFO] Region: eu-west-1
2024/02/02 06:59:11.643999 [INFO] envID: e-8gmkc7rmw6
2024/02/02 06:59:11.644003 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 06:59:11.644007 [INFO] Using manifest file name from command request
2024/02/02 06:59:11.644021 [INFO] Unable to get version manifest file.
2024/02/02 06:59:11.644025 [INFO] Downloading latest manifest available.
2024/02/02 06:59:11.644028 [INFO] Download latest app version manifest
2024/02/02 06:59:11.644157 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 06:59:11.692405 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 06:59:11.692586 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 06:59:11.704567 [INFO] Download successful124bytes downloaded
2024/02/02 06:59:11.704708 [INFO] Trying to read and parse version manifest...
2024/02/02 06:59:11.704782 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 06:59:11.730081 [INFO] Download successful264bytes downloaded
2024/02/02 06:59:11.730382 [INFO] Executing instruction: SyncClock
2024/02/02 06:59:11.730388 [INFO] Starting SyncClock
2024/02/02 06:59:11.730398 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 06:59:11.739241 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 06:59:08 2024
System time     : 0.000007170 seconds fast of NTP time
Last offset     : +0.000006949 seconds
RMS offset      : 0.000005459 seconds
Frequency       : 0.166 ppm fast
Residual freq   : +0.009 ppm
Skew            : 0.231 ppm
Root delay      : 0.000436665 seconds
Root dispersion : 0.000465745 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/02 06:59:11.739266 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 06:59:11.743886 [INFO] 200 OK

2024/02/02 06:59:11.744002 [INFO] Skipping Configure OS
2024/02/02 06:59:11.744010 [INFO] Skipping LockRepo
2024/02/02 06:59:11.744016 [INFO] Skipping GenerateEBBanner
2024/02/02 06:59:11.744022 [INFO] Skipping Install Process Manager
2024/02/02 06:59:11.744028 [INFO] Skipping install syslog
2024/02/02 06:59:11.744033 [INFO] Skipping install cron
2024/02/02 06:59:11.744037 [INFO] Skipping install proxy
2024/02/02 06:59:11.744041 [INFO] Skipping installhealthd
2024/02/02 06:59:11.744044 [INFO] Skipping Install Log Streaming Manager
2024/02/02 06:59:11.744048 [INFO] Skipping install X-Ray
2024/02/02 06:59:11.744052 [INFO] Skipping install Third Party License
2024/02/02 06:59:11.744057 [INFO] Skipping installSqsd
2024/02/02 06:59:11.744061 [INFO] Skipping bootstraphealthd
2024/02/02 06:59:11.744065 [INFO] Skipping Install yum packages
2024/02/02 06:59:11.744071 [INFO] Skipping install docker-compose
2024/02/02 06:59:11.744083 [INFO] Skipping Configure Docker Daemon
2024/02/02 06:59:11.744088 [INFO] Skipping MarkBaked
2024/02/02 06:59:11.744093 [INFO] Skipping TuneSystemSettings
2024/02/02 06:59:11.744096 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 06:59:11.744099 [INFO] Initialize LogRotate files and directories
2024/02/02 06:59:11.758661 [INFO] Skipping BootstrapCFNHup
2024/02/02 06:59:11.758669 [INFO] Executing instruction: StartCFNHup
2024/02/02 06:59:11.758672 [INFO] Start cfn-hup
2024/02/02 06:59:11.758694 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 06:59:11.773808 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 06:59:11.782593 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 06:59:11.782626 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 06:59:11.782631 [INFO] Executing instruction: Start Docker
2024/02/02 06:59:11.782634 [INFO] Starting Docker...
2024/02/02 06:59:11.782716 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 06:59:11.783814 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 06:59:11.785096 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 06:59:12.159961 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 06:59:12.175978 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 06:59:12.176018 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 06:59:12.189655 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 06:59:12.204522 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 06:59:12.216183 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 06:59:12.304524 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 06:59:12.304570 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 06:59:12.749473 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 06:59:13.105547 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 06:59:13.117087 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 06:59:13.469361 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 06:59:13.478835 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 06:59:13.492024 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 06:59:13.502202 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 06:59:14.663083 [INFO] Skipping Setup Docker Options
2024/02/02 06:59:14.663110 [INFO] Skipping MarkBootstrapped
2024/02/02 06:59:14.663115 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 06:59:14.663255 [INFO] Starting SwitchCFNStack
2024/02/02 06:59:14.663263 [INFO] Executing instruction: stopSqsd
2024/02/02 06:59:14.663267 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 06:59:14.663271 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 06:59:14.663276 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 06:59:14.663297 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 06:59:15.092276 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 06:59:15.092363 [INFO] Executing instruction: StagedockerApplication
2024/02/02 06:59:15.092378 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 06:59:15.116897 [INFO] Pruning containers ...
2024/02/02 06:59:15.116939 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 06:59:15.143056 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
1bc5c967b727   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             boring_moser

2024/02/02 06:59:15.143084 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 06:59:15.171243 [INFO] Deleted Containers:
1bc5c967b7277996b6a5e1d4bbb6a158c7a0ea6849713dc0f837954f242d8827

Total reclaimed space: 0B

2024/02/02 06:59:15.171265 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 06:59:15.191485 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 06:59:15.191760 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 06:59:15.194938 [INFO] application/json

2024/02/02 06:59:15.194955 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 06:59:15.272608 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 06:59:15.272797 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 06:59:15.274106 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 06:59:15.274130 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 06:59:15.274145 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 06:59:15.274147 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 06:59:15.274151 [INFO] Executing instruction: Generate environment file
2024/02/02 06:59:15.274184 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 06:59:15.274188 [INFO] start build docker app
2024/02/02 06:59:15.283140 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 06:59:15.283159 [INFO] fetching image and ports
2024/02/02 06:59:15.284855 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 06:59:15.284936 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 06:59:15.284945 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 06:59:15.284955 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 06:59:16.246243 [INFO] Login Succeeded

2024/02/02 06:59:16.246266 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 06:59:16.246273 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 06:59:16.246291 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 06:59:16.394688 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 06:59:16.394719 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 06:59:16.394728 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 06:59:16.394731 [INFO] start to build docker image
2024/02/02 06:59:16.394750 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 06:59:16.665322 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 06:59:16.665345 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 06:59:16.665350 [INFO] successfully build docker image
2024/02/02 06:59:16.665353 [INFO] save staging docker image id
2024/02/02 06:59:16.665366 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 06:59:16.686920 [INFO] c176d18fbf65

2024/02/02 06:59:16.687050 [INFO] Executing instruction: configure X-Ray
2024/02/02 06:59:16.687055 [INFO] X-Ray is not enabled.
2024/02/02 06:59:16.687058 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 06:59:16.692362 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 06:59:16.693945 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 06:59:16.707718 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 06:59:16.707752 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 06:59:16.717943 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 06:59:16.726943 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 06:59:16.738056 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 06:59:16.821678 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 06:59:17.134716 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 06:59:17.134933 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 06:59:17.396019 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 06:59:17.408345 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 06:59:17.691578 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 06:59:17.711201 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 06:59:17.722763 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 06:59:18.096125 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 06:59:18.106011 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 06:59:18.456596 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 06:59:18.456636 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 06:59:18.469369 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 06:59:18.478041 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 06:59:18.576727 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 06:59:18.577709 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 06:59:18.578582 [INFO] Executing instruction: configure log streaming
2024/02/02 06:59:18.578591 [INFO] log streaming is not enabled
2024/02/02 06:59:18.578595 [INFO] disable log stream
2024/02/02 06:59:18.578609 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 06:59:18.601025 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 06:59:18.624512 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 06:59:18.624548 [INFO] Checking if logs need forced rotation
2024/02/02 06:59:18.624570 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 06:59:19.206712 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 06:59:19.758031 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 06:59:19.760521 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 06:59:20.143169 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 06:59:20.162861 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 06:59:20.162881 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 06:59:20.162893 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 06:59:20.710665 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 06:59:20.710726 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 06:59:20.710751 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 06:59:20.710756 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 06:59:20.710780 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 06:59:20.710796 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 06:59:20.710798 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 06:59:20.710803 [INFO] Executing instruction: stop X-Ray
2024/02/02 06:59:20.710806 [INFO] stop X-Ray ...
2024/02/02 06:59:20.710817 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 06:59:20.730173 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 06:59:20.730209 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 06:59:20.747889 [INFO] Executing instruction: Run Docker Container
2024/02/02 06:59:20.747921 [INFO] stop currently running containers...
2024/02/02 06:59:20.747932 [INFO] detected old app is not docker compose app
2024/02/02 06:59:20.747950 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 06:59:20.812657 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 06:59:20.843599 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 06:59:20.843643 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 06:59:20.867156 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 06:59:20.867200 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 06:59:20.896321 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 06:59:20.896369 [INFO] stopping current container: 1bc5c967b727
2024/02/02 06:59:20.896379 [INFO] Running command /bin/sh -c docker ps | grep -q 1bc5c967b727
2024/02/02 06:59:20.931640 [INFO] Running command /bin/sh -c docker ps | grep -q 1bc5c967b727
2024/02/02 06:59:20.951868 [INFO] Pruning containers ...
2024/02/02 06:59:20.951891 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 06:59:20.970117 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 06:59:20.970148 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 06:59:20.988793 [INFO] Total reclaimed space: 0B

2024/02/02 06:59:20.988820 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 06:59:21.006743 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 06:59:21.006775 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 06:59:21.025063 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 06:59:21.025173 [INFO] Removing /var/app/current/ if it exists
2024/02/02 06:59:21.025273 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 06:59:21.025290 [INFO] detected new app is not docker compose app
2024/02/02 06:59:21.025346 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 06:59:21.438835 [INFO] b4451195558291da1c8a28a5247dab171142d9bb3911cbefaf3d4085ace390f2

2024/02/02 06:59:26.443168 [INFO] Running command /bin/sh -c docker ps | grep -q b44511955582
2024/02/02 06:59:26.464394 [ERROR] docker container quit unexpectedly on 2024-02-02 06:59:26.464383507 +0000 UTC: Command /bin/sh -c docker ps | grep -q b44511955582 failed with error exit status 1
2024/02/02 06:59:26.464524 [INFO] Running command /bin/sh -c docker logs b44511955582
2024/02/02 06:59:26.485756 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b44511955582: Command /bin/sh -c docker ps | grep -q b44511955582 failed with error exit status 1 

2024/02/02 06:59:26.485767 [INFO] Executing cleanup logic
2024/02/02 06:59:26.486044 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 07:59:27.526259 [INFO] Starting...
2024/02/02 07:59:27.526302 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 07:59:27.526329 [INFO] reading event message file
2024/02/02 07:59:27.533880 [INFO] Engine received EB command userdata-exec

2024/02/02 07:59:27.541759 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 07:59:27.970766 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 07:59:28.511400 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 07:59:28.511504 [INFO] Engine command: (self-startup)

2024/02/02 07:59:28.511511 [INFO] Downloading EB Application...
2024/02/02 07:59:28.511515 [INFO] Region: eu-west-1
2024/02/02 07:59:28.511518 [INFO] envID: e-8gmkc7rmw6
2024/02/02 07:59:28.511522 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 07:59:28.511524 [INFO] Using manifest file name from command request
2024/02/02 07:59:28.511538 [INFO] Unable to get version manifest file.
2024/02/02 07:59:28.511540 [INFO] Downloading latest manifest available.
2024/02/02 07:59:28.511542 [INFO] Download latest app version manifest
2024/02/02 07:59:28.511680 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 07:59:28.552421 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 07:59:28.552670 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 07:59:28.563548 [INFO] Download successful124bytes downloaded
2024/02/02 07:59:28.563736 [INFO] Trying to read and parse version manifest...
2024/02/02 07:59:28.563813 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 07:59:28.582939 [INFO] Download successful264bytes downloaded
2024/02/02 07:59:28.583507 [INFO] Executing instruction: SyncClock
2024/02/02 07:59:28.583512 [INFO] Starting SyncClock
2024/02/02 07:59:28.583524 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 07:59:28.590682 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 07:58:59 2024
System time     : 0.000000447 seconds fast of NTP time
Last offset     : +0.000003597 seconds
RMS offset      : 0.000007320 seconds
Frequency       : 0.193 ppm fast
Residual freq   : +0.048 ppm
Skew            : 0.222 ppm
Root delay      : 0.000415698 seconds
Root dispersion : 0.000369867 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/02 07:59:28.590728 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 07:59:28.597310 [INFO] 200 OK

2024/02/02 07:59:28.597410 [INFO] Skipping Configure OS
2024/02/02 07:59:28.597415 [INFO] Skipping LockRepo
2024/02/02 07:59:28.597419 [INFO] Skipping GenerateEBBanner
2024/02/02 07:59:28.597424 [INFO] Skipping Install Process Manager
2024/02/02 07:59:28.597428 [INFO] Skipping install syslog
2024/02/02 07:59:28.597431 [INFO] Skipping install cron
2024/02/02 07:59:28.597435 [INFO] Skipping install proxy
2024/02/02 07:59:28.597439 [INFO] Skipping installhealthd
2024/02/02 07:59:28.597443 [INFO] Skipping Install Log Streaming Manager
2024/02/02 07:59:28.597446 [INFO] Skipping install X-Ray
2024/02/02 07:59:28.597450 [INFO] Skipping install Third Party License
2024/02/02 07:59:28.597455 [INFO] Skipping installSqsd
2024/02/02 07:59:28.597459 [INFO] Skipping bootstraphealthd
2024/02/02 07:59:28.597463 [INFO] Skipping Install yum packages
2024/02/02 07:59:28.597468 [INFO] Skipping install docker-compose
2024/02/02 07:59:28.597636 [INFO] Skipping Configure Docker Daemon
2024/02/02 07:59:28.597641 [INFO] Skipping MarkBaked
2024/02/02 07:59:28.597646 [INFO] Skipping TuneSystemSettings
2024/02/02 07:59:28.597649 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 07:59:28.597651 [INFO] Initialize LogRotate files and directories
2024/02/02 07:59:28.612460 [INFO] Skipping BootstrapCFNHup
2024/02/02 07:59:28.612471 [INFO] Executing instruction: StartCFNHup
2024/02/02 07:59:28.612474 [INFO] Start cfn-hup
2024/02/02 07:59:28.612491 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 07:59:28.629209 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 07:59:28.638473 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 07:59:28.638580 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 07:59:28.638584 [INFO] Executing instruction: Start Docker
2024/02/02 07:59:28.638586 [INFO] Starting Docker...
2024/02/02 07:59:28.638634 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 07:59:28.639771 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 07:59:28.640710 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 07:59:29.153266 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 07:59:29.167724 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 07:59:29.167760 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 07:59:29.178260 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 07:59:29.186599 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 07:59:29.197946 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 07:59:29.312732 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 07:59:29.312801 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 07:59:29.653173 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 07:59:30.113900 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 07:59:30.129646 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 07:59:30.547613 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 07:59:30.558546 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 07:59:30.573429 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 07:59:30.586135 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 07:59:31.750139 [INFO] Skipping Setup Docker Options
2024/02/02 07:59:31.750159 [INFO] Skipping MarkBootstrapped
2024/02/02 07:59:31.750163 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 07:59:31.750284 [INFO] Starting SwitchCFNStack
2024/02/02 07:59:31.750289 [INFO] Executing instruction: stopSqsd
2024/02/02 07:59:31.750293 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 07:59:31.750296 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 07:59:31.750300 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 07:59:31.750317 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 07:59:32.264511 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 07:59:32.264539 [INFO] Executing instruction: StagedockerApplication
2024/02/02 07:59:32.264550 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 07:59:32.296308 [INFO] Pruning containers ...
2024/02/02 07:59:32.296337 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 07:59:32.330328 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b44511955582   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             loving_bhaskara

2024/02/02 07:59:32.330363 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 07:59:32.365378 [INFO] Deleted Containers:
b4451195558291da1c8a28a5247dab171142d9bb3911cbefaf3d4085ace390f2

Total reclaimed space: 0B

2024/02/02 07:59:32.365706 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 07:59:32.395871 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 07:59:32.396215 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 07:59:32.400288 [INFO] application/json

2024/02/02 07:59:32.400314 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 07:59:32.511069 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 07:59:32.511644 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 07:59:32.513278 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 07:59:32.513305 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 07:59:32.513322 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 07:59:32.513324 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 07:59:32.513329 [INFO] Executing instruction: Generate environment file
2024/02/02 07:59:32.513361 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 07:59:32.513364 [INFO] start build docker app
2024/02/02 07:59:32.513965 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 07:59:32.513971 [INFO] fetching image and ports
2024/02/02 07:59:32.515712 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 07:59:32.516186 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 07:59:32.516200 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 07:59:32.516211 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 07:59:33.441586 [INFO] Login Succeeded

2024/02/02 07:59:33.441603 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 07:59:33.441610 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 07:59:33.441626 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 07:59:33.611580 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 07:59:33.611602 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 07:59:33.611606 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 07:59:33.611609 [INFO] start to build docker image
2024/02/02 07:59:33.611625 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 07:59:33.941411 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 07:59:33.941432 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 07:59:33.941435 [INFO] successfully build docker image
2024/02/02 07:59:33.941437 [INFO] save staging docker image id
2024/02/02 07:59:33.941448 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 07:59:33.961205 [INFO] c176d18fbf65

2024/02/02 07:59:33.961443 [INFO] Executing instruction: configure X-Ray
2024/02/02 07:59:33.961453 [INFO] X-Ray is not enabled.
2024/02/02 07:59:33.961457 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 07:59:33.966363 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 07:59:33.967894 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 07:59:33.979854 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 07:59:33.979888 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 07:59:33.989756 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 07:59:33.998788 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 07:59:34.028003 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 07:59:34.098049 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 07:59:34.436916 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 07:59:34.437210 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 07:59:34.746452 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 07:59:34.763500 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 07:59:35.174708 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 07:59:35.187239 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 07:59:35.199485 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 07:59:35.606174 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 07:59:35.618710 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 07:59:35.980492 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 07:59:35.980528 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 07:59:35.993099 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 07:59:36.004181 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 07:59:36.070298 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 07:59:36.071126 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 07:59:36.072116 [INFO] Executing instruction: configure log streaming
2024/02/02 07:59:36.072127 [INFO] log streaming is not enabled
2024/02/02 07:59:36.072131 [INFO] disable log stream
2024/02/02 07:59:36.072145 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 07:59:36.093127 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 07:59:36.112776 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 07:59:36.112803 [INFO] Checking if logs need forced rotation
2024/02/02 07:59:36.112828 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 07:59:36.668424 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 07:59:37.126076 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 07:59:37.127968 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 07:59:37.669716 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 07:59:37.692989 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 07:59:37.693004 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 07:59:37.693017 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 07:59:38.185479 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 07:59:38.185543 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 07:59:38.185573 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 07:59:38.185576 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 07:59:38.185798 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 07:59:38.185827 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 07:59:38.185830 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 07:59:38.185837 [INFO] Executing instruction: stop X-Ray
2024/02/02 07:59:38.185841 [INFO] stop X-Ray ...
2024/02/02 07:59:38.187059 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 07:59:38.209976 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 07:59:38.210010 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 07:59:38.231812 [INFO] Executing instruction: Run Docker Container
2024/02/02 07:59:38.231875 [INFO] stop currently running containers...
2024/02/02 07:59:38.231890 [INFO] detected old app is not docker compose app
2024/02/02 07:59:38.231905 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 07:59:38.272624 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 07:59:38.299318 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 07:59:38.299350 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 07:59:38.319855 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 07:59:38.319899 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 07:59:38.338973 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 07:59:38.339032 [INFO] stopping current container: b44511955582
2024/02/02 07:59:38.339044 [INFO] Running command /bin/sh -c docker ps | grep -q b44511955582
2024/02/02 07:59:38.360804 [INFO] Running command /bin/sh -c docker ps | grep -q b44511955582
2024/02/02 07:59:38.387722 [INFO] Pruning containers ...
2024/02/02 07:59:38.387750 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 07:59:38.435525 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 07:59:38.435558 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 07:59:38.458920 [INFO] Total reclaimed space: 0B

2024/02/02 07:59:38.458950 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 07:59:38.483029 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 07:59:38.483067 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 07:59:38.521023 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 07:59:38.521044 [INFO] Removing /var/app/current/ if it exists
2024/02/02 07:59:38.521143 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 07:59:38.521160 [INFO] detected new app is not docker compose app
2024/02/02 07:59:38.521218 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 07:59:38.948130 [INFO] 3b085d2c86a1e5408c8f38fd248169b3f3bc5331cf3185b8e91ca7e951494f7f

2024/02/02 07:59:43.951439 [INFO] Running command /bin/sh -c docker ps | grep -q 3b085d2c86a1
2024/02/02 07:59:43.996795 [ERROR] docker container quit unexpectedly on 2024-02-02 07:59:43.996777809 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3b085d2c86a1 failed with error exit status 1
2024/02/02 07:59:43.996822 [INFO] Running command /bin/sh -c docker logs 3b085d2c86a1
2024/02/02 07:59:44.034175 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3b085d2c86a1: Command /bin/sh -c docker ps | grep -q 3b085d2c86a1 failed with error exit status 1 

2024/02/02 07:59:44.034189 [INFO] Executing cleanup logic
2024/02/02 07:59:44.034401 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 08:59:45.126744 [INFO] Starting...
2024/02/02 08:59:45.126795 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 08:59:45.126821 [INFO] reading event message file
2024/02/02 08:59:45.127538 [INFO] Engine received EB command userdata-exec

2024/02/02 08:59:45.136925 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 08:59:45.592023 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 08:59:46.004533 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 08:59:46.004621 [INFO] Engine command: (self-startup)

2024/02/02 08:59:46.004630 [INFO] Downloading EB Application...
2024/02/02 08:59:46.004634 [INFO] Region: eu-west-1
2024/02/02 08:59:46.004637 [INFO] envID: e-8gmkc7rmw6
2024/02/02 08:59:46.004640 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 08:59:46.004644 [INFO] Using manifest file name from command request
2024/02/02 08:59:46.004713 [INFO] Unable to get version manifest file.
2024/02/02 08:59:46.004719 [INFO] Downloading latest manifest available.
2024/02/02 08:59:46.004961 [INFO] Download latest app version manifest
2024/02/02 08:59:46.005117 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 08:59:46.043729 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 08:59:46.043965 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 08:59:46.055885 [INFO] Download successful124bytes downloaded
2024/02/02 08:59:46.056025 [INFO] Trying to read and parse version manifest...
2024/02/02 08:59:46.056103 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 08:59:46.074876 [INFO] Download successful264bytes downloaded
2024/02/02 08:59:46.075329 [INFO] Executing instruction: SyncClock
2024/02/02 08:59:46.075335 [INFO] Starting SyncClock
2024/02/02 08:59:46.075347 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 08:59:46.081231 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 08:59:37 2024
System time     : 0.000000967 seconds fast of NTP time
Last offset     : +0.000001755 seconds
RMS offset      : 0.000004827 seconds
Frequency       : 0.140 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.082 ppm
Root delay      : 0.000426217 seconds
Root dispersion : 0.000318081 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/02 08:59:46.081250 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 08:59:46.085830 [INFO] 200 OK

2024/02/02 08:59:46.085929 [INFO] Skipping Configure OS
2024/02/02 08:59:46.085934 [INFO] Skipping LockRepo
2024/02/02 08:59:46.085938 [INFO] Skipping GenerateEBBanner
2024/02/02 08:59:46.085942 [INFO] Skipping Install Process Manager
2024/02/02 08:59:46.085946 [INFO] Skipping install syslog
2024/02/02 08:59:46.085950 [INFO] Skipping install cron
2024/02/02 08:59:46.085953 [INFO] Skipping install proxy
2024/02/02 08:59:46.085957 [INFO] Skipping installhealthd
2024/02/02 08:59:46.085961 [INFO] Skipping Install Log Streaming Manager
2024/02/02 08:59:46.085965 [INFO] Skipping install X-Ray
2024/02/02 08:59:46.085969 [INFO] Skipping install Third Party License
2024/02/02 08:59:46.085974 [INFO] Skipping installSqsd
2024/02/02 08:59:46.085987 [INFO] Skipping bootstraphealthd
2024/02/02 08:59:46.085992 [INFO] Skipping Install yum packages
2024/02/02 08:59:46.085995 [INFO] Skipping install docker-compose
2024/02/02 08:59:46.086000 [INFO] Skipping Configure Docker Daemon
2024/02/02 08:59:46.086003 [INFO] Skipping MarkBaked
2024/02/02 08:59:46.086007 [INFO] Skipping TuneSystemSettings
2024/02/02 08:59:46.086010 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 08:59:46.086012 [INFO] Initialize LogRotate files and directories
2024/02/02 08:59:46.105558 [INFO] Skipping BootstrapCFNHup
2024/02/02 08:59:46.105572 [INFO] Executing instruction: StartCFNHup
2024/02/02 08:59:46.105576 [INFO] Start cfn-hup
2024/02/02 08:59:46.105596 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 08:59:46.119183 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 08:59:46.128500 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 08:59:46.128534 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 08:59:46.128543 [INFO] Executing instruction: Start Docker
2024/02/02 08:59:46.128546 [INFO] Starting Docker...
2024/02/02 08:59:46.128637 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 08:59:46.129623 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 08:59:46.130602 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 08:59:46.420787 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 08:59:46.435333 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 08:59:46.435365 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 08:59:46.450460 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 08:59:46.460283 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 08:59:46.470596 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 08:59:46.549691 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 08:59:46.549798 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 08:59:46.909059 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 08:59:47.237637 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 08:59:47.249310 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 08:59:47.541122 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 08:59:47.554902 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 08:59:47.580864 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 08:59:47.591580 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 08:59:48.807153 [INFO] Skipping Setup Docker Options
2024/02/02 08:59:48.807176 [INFO] Skipping MarkBootstrapped
2024/02/02 08:59:48.807180 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 08:59:48.807341 [INFO] Starting SwitchCFNStack
2024/02/02 08:59:48.807348 [INFO] Executing instruction: stopSqsd
2024/02/02 08:59:48.807351 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 08:59:48.807355 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 08:59:48.807358 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 08:59:48.807387 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 08:59:49.285086 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 08:59:49.285186 [INFO] Executing instruction: StagedockerApplication
2024/02/02 08:59:49.285199 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 08:59:49.311313 [INFO] Pruning containers ...
2024/02/02 08:59:49.311345 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 08:59:49.334220 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
3b085d2c86a1   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             upbeat_moser

2024/02/02 08:59:49.334258 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 08:59:49.359322 [INFO] Deleted Containers:
3b085d2c86a1e5408c8f38fd248169b3f3bc5331cf3185b8e91ca7e951494f7f

Total reclaimed space: 0B

2024/02/02 08:59:49.359343 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 08:59:49.394660 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 08:59:49.395001 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 08:59:49.401109 [INFO] application/json

2024/02/02 08:59:49.401128 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 08:59:49.498480 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 08:59:49.498652 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 08:59:49.500150 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 08:59:49.500173 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 08:59:49.500191 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 08:59:49.500195 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 08:59:49.500200 [INFO] Executing instruction: Generate environment file
2024/02/02 08:59:49.500226 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 08:59:49.500229 [INFO] start build docker app
2024/02/02 08:59:49.500692 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 08:59:49.500695 [INFO] fetching image and ports
2024/02/02 08:59:49.502327 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 08:59:49.502454 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 08:59:49.502463 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 08:59:49.502472 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 08:59:50.493784 [INFO] Login Succeeded

2024/02/02 08:59:50.493802 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 08:59:50.493808 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 08:59:50.493829 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 08:59:50.736835 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 08:59:50.736861 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 08:59:50.736865 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 08:59:50.736868 [INFO] start to build docker image
2024/02/02 08:59:50.736887 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 08:59:51.019669 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 08:59:51.019695 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 08:59:51.019700 [INFO] successfully build docker image
2024/02/02 08:59:51.019702 [INFO] save staging docker image id
2024/02/02 08:59:51.019836 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 08:59:51.045235 [INFO] c176d18fbf65

2024/02/02 08:59:51.045370 [INFO] Executing instruction: configure X-Ray
2024/02/02 08:59:51.045377 [INFO] X-Ray is not enabled.
2024/02/02 08:59:51.045380 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 08:59:51.051351 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 08:59:51.053038 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 08:59:51.065844 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 08:59:51.065877 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 08:59:51.077215 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 08:59:51.087323 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 08:59:51.102333 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 08:59:51.159373 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 08:59:51.484282 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 08:59:51.484360 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 08:59:51.816426 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 08:59:51.827352 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 08:59:52.155463 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 08:59:52.170011 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 08:59:52.181254 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 08:59:52.527420 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 08:59:52.539887 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 08:59:52.888977 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 08:59:52.889020 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 08:59:52.904440 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 08:59:52.914509 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 08:59:52.990045 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 08:59:52.991410 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 08:59:52.992212 [INFO] Executing instruction: configure log streaming
2024/02/02 08:59:52.992222 [INFO] log streaming is not enabled
2024/02/02 08:59:52.992225 [INFO] disable log stream
2024/02/02 08:59:52.992236 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 08:59:53.014629 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 08:59:53.058021 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 08:59:53.058046 [INFO] Checking if logs need forced rotation
2024/02/02 08:59:53.058069 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 08:59:53.626120 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 08:59:54.195341 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 08:59:54.197734 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 08:59:54.630317 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 08:59:54.650987 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 08:59:54.651002 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 08:59:54.651014 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 08:59:55.082870 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 08:59:55.082892 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 08:59:55.082915 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 08:59:55.082919 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 08:59:55.082942 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 08:59:55.082954 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 08:59:55.082959 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 08:59:55.082964 [INFO] Executing instruction: stop X-Ray
2024/02/02 08:59:55.082967 [INFO] stop X-Ray ...
2024/02/02 08:59:55.083053 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 08:59:55.100764 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 08:59:55.100799 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 08:59:55.125745 [INFO] Executing instruction: Run Docker Container
2024/02/02 08:59:55.125772 [INFO] stop currently running containers...
2024/02/02 08:59:55.125781 [INFO] detected old app is not docker compose app
2024/02/02 08:59:55.125795 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 08:59:55.143357 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 08:59:55.163995 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 08:59:55.164031 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 08:59:55.200011 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 08:59:55.200048 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 08:59:55.224798 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 08:59:55.224866 [INFO] stopping current container: 3b085d2c86a1
2024/02/02 08:59:55.224879 [INFO] Running command /bin/sh -c docker ps | grep -q 3b085d2c86a1
2024/02/02 08:59:55.249920 [INFO] Running command /bin/sh -c docker ps | grep -q 3b085d2c86a1
2024/02/02 08:59:55.277208 [INFO] Pruning containers ...
2024/02/02 08:59:55.277232 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 08:59:55.299669 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 08:59:55.299705 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 08:59:55.373555 [INFO] Total reclaimed space: 0B

2024/02/02 08:59:55.373599 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 08:59:55.398992 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 08:59:55.399021 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 08:59:55.424539 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 08:59:55.424566 [INFO] Removing /var/app/current/ if it exists
2024/02/02 08:59:55.424663 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 08:59:55.424681 [INFO] detected new app is not docker compose app
2024/02/02 08:59:55.424733 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 08:59:55.923616 [INFO] f1bc55bd889af9625d297ee858600691f933c8578bbdbe1566b71371d56f4566

2024/02/02 09:00:00.924634 [INFO] Running command /bin/sh -c docker ps | grep -q f1bc55bd889a
2024/02/02 09:00:00.972681 [ERROR] docker container quit unexpectedly on 2024-02-02 09:00:00.972659402 +0000 UTC: Command /bin/sh -c docker ps | grep -q f1bc55bd889a failed with error exit status 1
2024/02/02 09:00:00.972712 [INFO] Running command /bin/sh -c docker logs f1bc55bd889a
2024/02/02 09:00:01.011313 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f1bc55bd889a: Command /bin/sh -c docker ps | grep -q f1bc55bd889a failed with error exit status 1 

2024/02/02 09:00:01.011324 [INFO] Executing cleanup logic
2024/02/02 09:00:01.011563 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 10:00:03.017256 [INFO] Starting...
2024/02/02 10:00:03.017300 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 10:00:03.018504 [INFO] reading event message file
2024/02/02 10:00:03.024544 [INFO] Engine received EB command userdata-exec

2024/02/02 10:00:03.044486 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 10:00:03.786735 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 10:00:04.600051 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 10:00:04.600212 [INFO] Engine command: (self-startup)

2024/02/02 10:00:04.600222 [INFO] Downloading EB Application...
2024/02/02 10:00:04.600225 [INFO] Region: eu-west-1
2024/02/02 10:00:04.600228 [INFO] envID: e-8gmkc7rmw6
2024/02/02 10:00:04.600237 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 10:00:04.600245 [INFO] Using manifest file name from command request
2024/02/02 10:00:04.600261 [INFO] Unable to get version manifest file.
2024/02/02 10:00:04.600263 [INFO] Downloading latest manifest available.
2024/02/02 10:00:04.600265 [INFO] Download latest app version manifest
2024/02/02 10:00:04.601757 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 10:00:04.663023 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 10:00:04.665131 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 10:00:04.692942 [INFO] Download successful124bytes downloaded
2024/02/02 10:00:04.693101 [INFO] Trying to read and parse version manifest...
2024/02/02 10:00:04.693175 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 10:00:04.721054 [INFO] Download successful264bytes downloaded
2024/02/02 10:00:04.721464 [INFO] Executing instruction: SyncClock
2024/02/02 10:00:04.721472 [INFO] Starting SyncClock
2024/02/02 10:00:04.721486 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 10:00:04.736631 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 10:00:02 2024
System time     : 0.000002773 seconds slow of NTP time
Last offset     : -0.000002824 seconds
RMS offset      : 0.000008813 seconds
Frequency       : 0.006 ppm slow
Residual freq   : -0.116 ppm
Skew            : 0.795 ppm
Root delay      : 0.000434453 seconds
Root dispersion : 0.000337489 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/02 10:00:04.736657 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 10:00:04.750296 [INFO] 200 OK

2024/02/02 10:00:04.750461 [INFO] Skipping Configure OS
2024/02/02 10:00:04.750472 [INFO] Skipping LockRepo
2024/02/02 10:00:04.750477 [INFO] Skipping GenerateEBBanner
2024/02/02 10:00:04.750482 [INFO] Skipping Install Process Manager
2024/02/02 10:00:04.750487 [INFO] Skipping install syslog
2024/02/02 10:00:04.750492 [INFO] Skipping install cron
2024/02/02 10:00:04.750497 [INFO] Skipping install proxy
2024/02/02 10:00:04.750501 [INFO] Skipping installhealthd
2024/02/02 10:00:04.750506 [INFO] Skipping Install Log Streaming Manager
2024/02/02 10:00:04.750511 [INFO] Skipping install X-Ray
2024/02/02 10:00:04.750516 [INFO] Skipping install Third Party License
2024/02/02 10:00:04.750523 [INFO] Skipping installSqsd
2024/02/02 10:00:04.750539 [INFO] Skipping bootstraphealthd
2024/02/02 10:00:04.750545 [INFO] Skipping Install yum packages
2024/02/02 10:00:04.750550 [INFO] Skipping install docker-compose
2024/02/02 10:00:04.750555 [INFO] Skipping Configure Docker Daemon
2024/02/02 10:00:04.750560 [INFO] Skipping MarkBaked
2024/02/02 10:00:04.750566 [INFO] Skipping TuneSystemSettings
2024/02/02 10:00:04.750576 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 10:00:04.750593 [INFO] Initialize LogRotate files and directories
2024/02/02 10:00:04.774191 [INFO] Skipping BootstrapCFNHup
2024/02/02 10:00:04.774206 [INFO] Executing instruction: StartCFNHup
2024/02/02 10:00:04.774209 [INFO] Start cfn-hup
2024/02/02 10:00:04.774227 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 10:00:04.842466 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 10:00:04.870892 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 10:00:04.870932 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 10:00:04.870936 [INFO] Executing instruction: Start Docker
2024/02/02 10:00:04.870939 [INFO] Starting Docker...
2024/02/02 10:00:04.871024 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 10:00:04.876251 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 10:00:04.878759 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 10:00:05.177435 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 10:00:05.209762 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 10:00:05.209831 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 10:00:05.235129 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 10:00:05.257954 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 10:00:05.290812 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 10:00:05.413825 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 10:00:05.413933 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 10:00:06.048195 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 10:00:06.578752 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 10:00:06.597660 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 10:00:07.087057 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 10:00:07.098488 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 10:00:07.116889 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 10:00:07.128200 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 10:00:08.748875 [INFO] Skipping Setup Docker Options
2024/02/02 10:00:08.748901 [INFO] Skipping MarkBootstrapped
2024/02/02 10:00:08.748905 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 10:00:08.749050 [INFO] Starting SwitchCFNStack
2024/02/02 10:00:08.749055 [INFO] Executing instruction: stopSqsd
2024/02/02 10:00:08.749059 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 10:00:08.749063 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 10:00:08.749066 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 10:00:08.749088 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 10:00:09.210866 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 10:00:09.210889 [INFO] Executing instruction: StagedockerApplication
2024/02/02 10:00:09.210914 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 10:00:09.237439 [INFO] Pruning containers ...
2024/02/02 10:00:09.237473 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 10:00:09.264616 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f1bc55bd889a   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             musing_tu

2024/02/02 10:00:09.264732 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 10:00:09.315092 [INFO] Deleted Containers:
f1bc55bd889af9625d297ee858600691f933c8578bbdbe1566b71371d56f4566

Total reclaimed space: 0B

2024/02/02 10:00:09.315126 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 10:00:09.351713 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 10:00:09.353159 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 10:00:09.357480 [INFO] application/json

2024/02/02 10:00:09.357499 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 10:00:09.444677 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 10:00:09.444856 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 10:00:09.446164 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 10:00:09.446189 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 10:00:09.446203 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 10:00:09.446211 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 10:00:09.446215 [INFO] Executing instruction: Generate environment file
2024/02/02 10:00:09.446240 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 10:00:09.446243 [INFO] start build docker app
2024/02/02 10:00:09.446678 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 10:00:09.446682 [INFO] fetching image and ports
2024/02/02 10:00:09.448634 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 10:00:09.448702 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 10:00:09.448710 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 10:00:09.448719 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 10:00:10.466532 [INFO] Login Succeeded

2024/02/02 10:00:10.466556 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 10:00:10.466562 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 10:00:10.466580 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 10:00:10.637660 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 10:00:10.637699 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 10:00:10.637703 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 10:00:10.637706 [INFO] start to build docker image
2024/02/02 10:00:10.637721 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 10:00:10.942564 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 10:00:10.942585 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 10:00:10.942590 [INFO] successfully build docker image
2024/02/02 10:00:10.942592 [INFO] save staging docker image id
2024/02/02 10:00:10.942607 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 10:00:10.964050 [INFO] c176d18fbf65

2024/02/02 10:00:10.964185 [INFO] Executing instruction: configure X-Ray
2024/02/02 10:00:10.964192 [INFO] X-Ray is not enabled.
2024/02/02 10:00:10.964196 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 10:00:10.969621 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 10:00:10.971339 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 10:00:10.983488 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 10:00:10.983519 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 10:00:10.999085 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 10:00:11.014956 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 10:00:11.026687 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 10:00:11.109813 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 10:00:11.449845 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 10:00:11.449930 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 10:00:11.784160 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 10:00:11.797325 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 10:00:12.126370 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 10:00:12.137845 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 10:00:12.152297 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 10:00:12.508768 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 10:00:12.518184 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 10:00:12.863254 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 10:00:12.863291 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 10:00:12.877158 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 10:00:12.887096 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 10:00:12.969917 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 10:00:12.971121 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 10:00:12.972239 [INFO] Executing instruction: configure log streaming
2024/02/02 10:00:12.972259 [INFO] log streaming is not enabled
2024/02/02 10:00:12.972263 [INFO] disable log stream
2024/02/02 10:00:12.972278 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 10:00:12.994394 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 10:00:13.019199 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 10:00:13.019232 [INFO] Checking if logs need forced rotation
2024/02/02 10:00:13.019255 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 10:00:13.566052 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 10:00:13.961016 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 10:00:13.962624 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 10:00:14.049527 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 10:00:14.072495 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 10:00:14.072527 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 10:00:14.072541 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 10:00:14.521144 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 10:00:14.521169 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 10:00:14.521193 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 10:00:14.521196 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 10:00:14.521259 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 10:00:14.521271 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 10:00:14.521273 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 10:00:14.521278 [INFO] Executing instruction: stop X-Ray
2024/02/02 10:00:14.521281 [INFO] stop X-Ray ...
2024/02/02 10:00:14.521290 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 10:00:14.547147 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 10:00:14.547223 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 10:00:14.587379 [INFO] Executing instruction: Run Docker Container
2024/02/02 10:00:14.587416 [INFO] stop currently running containers...
2024/02/02 10:00:14.587427 [INFO] detected old app is not docker compose app
2024/02/02 10:00:14.587441 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 10:00:14.652581 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 10:00:14.670471 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 10:00:14.670503 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 10:00:14.686873 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 10:00:14.686904 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 10:00:14.706763 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 10:00:14.706852 [INFO] stopping current container: f1bc55bd889a
2024/02/02 10:00:14.706864 [INFO] Running command /bin/sh -c docker ps | grep -q f1bc55bd889a
2024/02/02 10:00:14.729011 [INFO] Running command /bin/sh -c docker ps | grep -q f1bc55bd889a
2024/02/02 10:00:14.757021 [INFO] Pruning containers ...
2024/02/02 10:00:14.757044 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 10:00:14.780067 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 10:00:14.780104 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 10:00:14.802364 [INFO] Total reclaimed space: 0B

2024/02/02 10:00:14.802393 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 10:00:14.820820 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 10:00:14.820853 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 10:00:14.840259 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 10:00:14.840283 [INFO] Removing /var/app/current/ if it exists
2024/02/02 10:00:14.840435 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 10:00:14.840453 [INFO] detected new app is not docker compose app
2024/02/02 10:00:14.840501 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 10:00:15.218041 [INFO] d99c7319a39398465dfbf33431347a6faca01e2aa981b9e51f10e92aa7e73a1b

2024/02/02 10:00:20.222358 [INFO] Running command /bin/sh -c docker ps | grep -q d99c7319a393
2024/02/02 10:00:20.241845 [ERROR] docker container quit unexpectedly on 2024-02-02 10:00:20.241834216 +0000 UTC: Command /bin/sh -c docker ps | grep -q d99c7319a393 failed with error exit status 1
2024/02/02 10:00:20.241871 [INFO] Running command /bin/sh -c docker logs d99c7319a393
2024/02/02 10:00:20.262678 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container d99c7319a393: Command /bin/sh -c docker ps | grep -q d99c7319a393 failed with error exit status 1 

2024/02/02 10:00:20.262694 [INFO] Executing cleanup logic
2024/02/02 10:00:20.262896 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 11:00:21.212997 [INFO] Starting...
2024/02/02 11:00:21.213041 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 11:00:21.213066 [INFO] reading event message file
2024/02/02 11:00:21.213866 [INFO] Engine received EB command userdata-exec

2024/02/02 11:00:21.221087 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 11:00:21.627844 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 11:00:22.094468 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 11:00:22.094546 [INFO] Engine command: (self-startup)

2024/02/02 11:00:22.094551 [INFO] Downloading EB Application...
2024/02/02 11:00:22.094553 [INFO] Region: eu-west-1
2024/02/02 11:00:22.094556 [INFO] envID: e-8gmkc7rmw6
2024/02/02 11:00:22.094558 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 11:00:22.094560 [INFO] Using manifest file name from command request
2024/02/02 11:00:22.094573 [INFO] Unable to get version manifest file.
2024/02/02 11:00:22.094575 [INFO] Downloading latest manifest available.
2024/02/02 11:00:22.094577 [INFO] Download latest app version manifest
2024/02/02 11:00:22.094701 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 11:00:22.139234 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 11:00:22.139429 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 11:00:22.151995 [INFO] Download successful124bytes downloaded
2024/02/02 11:00:22.152188 [INFO] Trying to read and parse version manifest...
2024/02/02 11:00:22.152266 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 11:00:22.193385 [INFO] Download successful264bytes downloaded
2024/02/02 11:00:22.193695 [INFO] Executing instruction: SyncClock
2024/02/02 11:00:22.193700 [INFO] Starting SyncClock
2024/02/02 11:00:22.193710 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 11:00:22.199942 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 11:00:10 2024
System time     : 0.000001319 seconds fast of NTP time
Last offset     : +0.000000920 seconds
RMS offset      : 0.000001765 seconds
Frequency       : 0.100 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.036 ppm
Root delay      : 0.000432716 seconds
Root dispersion : 0.000327935 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/02 11:00:22.199961 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 11:00:22.204442 [INFO] 200 OK

2024/02/02 11:00:22.204644 [INFO] Skipping Configure OS
2024/02/02 11:00:22.204654 [INFO] Skipping LockRepo
2024/02/02 11:00:22.204658 [INFO] Skipping GenerateEBBanner
2024/02/02 11:00:22.204662 [INFO] Skipping Install Process Manager
2024/02/02 11:00:22.204667 [INFO] Skipping install syslog
2024/02/02 11:00:22.204671 [INFO] Skipping install cron
2024/02/02 11:00:22.204675 [INFO] Skipping install proxy
2024/02/02 11:00:22.204679 [INFO] Skipping installhealthd
2024/02/02 11:00:22.204683 [INFO] Skipping Install Log Streaming Manager
2024/02/02 11:00:22.204687 [INFO] Skipping install X-Ray
2024/02/02 11:00:22.204700 [INFO] Skipping install Third Party License
2024/02/02 11:00:22.204706 [INFO] Skipping installSqsd
2024/02/02 11:00:22.204710 [INFO] Skipping bootstraphealthd
2024/02/02 11:00:22.204714 [INFO] Skipping Install yum packages
2024/02/02 11:00:22.204720 [INFO] Skipping install docker-compose
2024/02/02 11:00:22.204724 [INFO] Skipping Configure Docker Daemon
2024/02/02 11:00:22.204729 [INFO] Skipping MarkBaked
2024/02/02 11:00:22.204733 [INFO] Skipping TuneSystemSettings
2024/02/02 11:00:22.204736 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 11:00:22.204739 [INFO] Initialize LogRotate files and directories
2024/02/02 11:00:22.219246 [INFO] Skipping BootstrapCFNHup
2024/02/02 11:00:22.219256 [INFO] Executing instruction: StartCFNHup
2024/02/02 11:00:22.219260 [INFO] Start cfn-hup
2024/02/02 11:00:22.219281 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 11:00:22.235793 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 11:00:22.245922 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 11:00:22.245970 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 11:00:22.245975 [INFO] Executing instruction: Start Docker
2024/02/02 11:00:22.245979 [INFO] Starting Docker...
2024/02/02 11:00:22.246062 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 11:00:22.247185 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 11:00:22.248155 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 11:00:22.641245 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 11:00:22.661318 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 11:00:22.661347 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 11:00:22.683625 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 11:00:22.698404 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 11:00:22.717163 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 11:00:22.805753 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 11:00:22.805804 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 11:00:23.203449 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 11:00:23.585746 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 11:00:23.598502 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 11:00:23.895265 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 11:00:23.907529 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 11:00:23.920413 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 11:00:23.928875 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 11:00:25.160812 [INFO] Skipping Setup Docker Options
2024/02/02 11:00:25.160846 [INFO] Skipping MarkBootstrapped
2024/02/02 11:00:25.160851 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 11:00:25.160981 [INFO] Starting SwitchCFNStack
2024/02/02 11:00:25.160987 [INFO] Executing instruction: stopSqsd
2024/02/02 11:00:25.160991 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 11:00:25.160995 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 11:00:25.160998 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 11:00:25.161016 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 11:00:25.698650 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 11:00:25.700084 [INFO] Executing instruction: StagedockerApplication
2024/02/02 11:00:25.700102 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 11:00:25.726054 [INFO] Pruning containers ...
2024/02/02 11:00:25.726083 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 11:00:25.747647 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
d99c7319a393   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             brave_spence

2024/02/02 11:00:25.747686 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 11:00:25.774888 [INFO] Deleted Containers:
d99c7319a39398465dfbf33431347a6faca01e2aa981b9e51f10e92aa7e73a1b

Total reclaimed space: 0B

2024/02/02 11:00:25.774923 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 11:00:25.792938 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 11:00:25.793179 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 11:00:25.796125 [INFO] application/json

2024/02/02 11:00:25.796142 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 11:00:25.883390 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 11:00:25.883707 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 11:00:25.885135 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 11:00:25.885158 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 11:00:25.885176 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 11:00:25.885180 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 11:00:25.885186 [INFO] Executing instruction: Generate environment file
2024/02/02 11:00:25.885213 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 11:00:25.885216 [INFO] start build docker app
2024/02/02 11:00:25.885609 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 11:00:25.885612 [INFO] fetching image and ports
2024/02/02 11:00:25.887279 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 11:00:25.887339 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 11:00:25.887348 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 11:00:25.887446 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 11:00:26.837751 [INFO] Login Succeeded

2024/02/02 11:00:26.837770 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 11:00:26.837777 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 11:00:26.837792 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 11:00:27.029124 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 11:00:27.029153 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 11:00:27.029158 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 11:00:27.029162 [INFO] start to build docker image
2024/02/02 11:00:27.029179 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 11:00:27.341913 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 11:00:27.341932 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 11:00:27.341937 [INFO] successfully build docker image
2024/02/02 11:00:27.341940 [INFO] save staging docker image id
2024/02/02 11:00:27.341954 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 11:00:27.365887 [INFO] c176d18fbf65

2024/02/02 11:00:27.366018 [INFO] Executing instruction: configure X-Ray
2024/02/02 11:00:27.366105 [INFO] X-Ray is not enabled.
2024/02/02 11:00:27.366110 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 11:00:27.372117 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 11:00:27.374143 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 11:00:27.387067 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 11:00:27.387100 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 11:00:27.399062 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 11:00:27.409275 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 11:00:27.421205 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 11:00:27.508726 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 11:00:27.894416 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 11:00:27.894601 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 11:00:28.215959 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 11:00:28.227576 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 11:00:28.527027 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 11:00:28.536926 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 11:00:28.552294 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 11:00:28.900779 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 11:00:28.910138 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 11:00:29.203743 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 11:00:29.203779 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 11:00:29.216895 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 11:00:29.229405 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 11:00:29.330793 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 11:00:29.331904 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 11:00:29.333024 [INFO] Executing instruction: configure log streaming
2024/02/02 11:00:29.333034 [INFO] log streaming is not enabled
2024/02/02 11:00:29.333038 [INFO] disable log stream
2024/02/02 11:00:29.333053 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 11:00:29.355499 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 11:00:29.383044 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 11:00:29.383069 [INFO] Checking if logs need forced rotation
2024/02/02 11:00:29.383091 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 11:00:29.945615 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 11:00:30.429171 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 11:00:30.431564 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 11:00:30.901252 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 11:00:30.923251 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 11:00:30.923270 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 11:00:30.923287 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 11:00:31.339509 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 11:00:31.339542 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 11:00:31.339570 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 11:00:31.339574 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 11:00:31.339593 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 11:00:31.339604 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 11:00:31.339607 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 11:00:31.339611 [INFO] Executing instruction: stop X-Ray
2024/02/02 11:00:31.339614 [INFO] stop X-Ray ...
2024/02/02 11:00:31.339625 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 11:00:31.358678 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 11:00:31.358711 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 11:00:31.374351 [INFO] Executing instruction: Run Docker Container
2024/02/02 11:00:31.374385 [INFO] stop currently running containers...
2024/02/02 11:00:31.374397 [INFO] detected old app is not docker compose app
2024/02/02 11:00:31.374416 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 11:00:31.432488 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 11:00:31.450664 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 11:00:31.450694 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 11:00:31.466528 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 11:00:31.466562 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 11:00:31.499393 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 11:00:31.499454 [INFO] stopping current container: d99c7319a393
2024/02/02 11:00:31.499466 [INFO] Running command /bin/sh -c docker ps | grep -q d99c7319a393
2024/02/02 11:00:31.519556 [INFO] Running command /bin/sh -c docker ps | grep -q d99c7319a393
2024/02/02 11:00:31.539160 [INFO] Pruning containers ...
2024/02/02 11:00:31.539183 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 11:00:31.561784 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 11:00:31.561854 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 11:00:31.584074 [INFO] Total reclaimed space: 0B

2024/02/02 11:00:31.584101 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 11:00:31.603697 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 11:00:31.603732 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 11:00:31.624576 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 11:00:31.624598 [INFO] Removing /var/app/current/ if it exists
2024/02/02 11:00:31.625381 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 11:00:31.625426 [INFO] detected new app is not docker compose app
2024/02/02 11:00:31.625499 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 11:00:32.063246 [INFO] f9685cc369a0e23b95a90deb61ca93b4ab0558c3764e6a485f21324a00bda099

2024/02/02 11:00:37.063625 [INFO] Running command /bin/sh -c docker ps | grep -q f9685cc369a0
2024/02/02 11:00:37.088715 [ERROR] docker container quit unexpectedly on 2024-02-02 11:00:37.088697875 +0000 UTC: Command /bin/sh -c docker ps | grep -q f9685cc369a0 failed with error exit status 1
2024/02/02 11:00:37.088741 [INFO] Running command /bin/sh -c docker logs f9685cc369a0
2024/02/02 11:00:37.133119 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f9685cc369a0: Command /bin/sh -c docker ps | grep -q f9685cc369a0 failed with error exit status 1 

2024/02/02 11:00:37.133127 [INFO] Executing cleanup logic
2024/02/02 11:00:37.133298 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 12:00:38.109234 [INFO] Starting...
2024/02/02 12:00:38.109283 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 12:00:38.109308 [INFO] reading event message file
2024/02/02 12:00:38.110625 [INFO] Engine received EB command userdata-exec

2024/02/02 12:00:38.123622 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 12:00:38.573771 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 12:00:39.054451 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 12:00:39.054581 [INFO] Engine command: (self-startup)

2024/02/02 12:00:39.054593 [INFO] Downloading EB Application...
2024/02/02 12:00:39.054596 [INFO] Region: eu-west-1
2024/02/02 12:00:39.054599 [INFO] envID: e-8gmkc7rmw6
2024/02/02 12:00:39.054601 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 12:00:39.054604 [INFO] Using manifest file name from command request
2024/02/02 12:00:39.054617 [INFO] Unable to get version manifest file.
2024/02/02 12:00:39.054620 [INFO] Downloading latest manifest available.
2024/02/02 12:00:39.054622 [INFO] Download latest app version manifest
2024/02/02 12:00:39.054917 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 12:00:39.097816 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 12:00:39.098067 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 12:00:39.110291 [INFO] Download successful124bytes downloaded
2024/02/02 12:00:39.110455 [INFO] Trying to read and parse version manifest...
2024/02/02 12:00:39.110532 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 12:00:39.130619 [INFO] Download successful264bytes downloaded
2024/02/02 12:00:39.131055 [INFO] Executing instruction: SyncClock
2024/02/02 12:00:39.131062 [INFO] Starting SyncClock
2024/02/02 12:00:39.131072 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 12:00:39.137051 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 12:00:31 2024
System time     : 0.000004562 seconds slow of NTP time
Last offset     : -0.000007012 seconds
RMS offset      : 0.000003585 seconds
Frequency       : 0.140 ppm fast
Residual freq   : -0.007 ppm
Skew            : 0.196 ppm
Root delay      : 0.000438945 seconds
Root dispersion : 0.000329149 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/02 12:00:39.137076 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 12:00:39.141699 [INFO] 200 OK

2024/02/02 12:00:39.141907 [INFO] Skipping Configure OS
2024/02/02 12:00:39.141919 [INFO] Skipping LockRepo
2024/02/02 12:00:39.141925 [INFO] Skipping GenerateEBBanner
2024/02/02 12:00:39.141931 [INFO] Skipping Install Process Manager
2024/02/02 12:00:39.141937 [INFO] Skipping install syslog
2024/02/02 12:00:39.141943 [INFO] Skipping install cron
2024/02/02 12:00:39.141948 [INFO] Skipping install proxy
2024/02/02 12:00:39.141952 [INFO] Skipping installhealthd
2024/02/02 12:00:39.141956 [INFO] Skipping Install Log Streaming Manager
2024/02/02 12:00:39.141960 [INFO] Skipping install X-Ray
2024/02/02 12:00:39.141964 [INFO] Skipping install Third Party License
2024/02/02 12:00:39.141969 [INFO] Skipping installSqsd
2024/02/02 12:00:39.141973 [INFO] Skipping bootstraphealthd
2024/02/02 12:00:39.141976 [INFO] Skipping Install yum packages
2024/02/02 12:00:39.141980 [INFO] Skipping install docker-compose
2024/02/02 12:00:39.141984 [INFO] Skipping Configure Docker Daemon
2024/02/02 12:00:39.141990 [INFO] Skipping MarkBaked
2024/02/02 12:00:39.141994 [INFO] Skipping TuneSystemSettings
2024/02/02 12:00:39.141997 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 12:00:39.141999 [INFO] Initialize LogRotate files and directories
2024/02/02 12:00:39.156129 [INFO] Skipping BootstrapCFNHup
2024/02/02 12:00:39.156141 [INFO] Executing instruction: StartCFNHup
2024/02/02 12:00:39.156144 [INFO] Start cfn-hup
2024/02/02 12:00:39.156164 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 12:00:39.175905 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 12:00:39.188452 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 12:00:39.188489 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 12:00:39.188492 [INFO] Executing instruction: Start Docker
2024/02/02 12:00:39.188496 [INFO] Starting Docker...
2024/02/02 12:00:39.188589 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 12:00:39.189855 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 12:00:39.191048 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 12:00:39.650505 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 12:00:39.665468 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 12:00:39.665500 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 12:00:39.675514 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 12:00:39.684502 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 12:00:39.695555 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 12:00:39.732917 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 12:00:39.733109 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 12:00:40.063671 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 12:00:40.404753 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 12:00:40.420653 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 12:00:40.798381 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 12:00:40.807815 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 12:00:40.821313 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 12:00:40.829740 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 12:00:42.105757 [INFO] Skipping Setup Docker Options
2024/02/02 12:00:42.105781 [INFO] Skipping MarkBootstrapped
2024/02/02 12:00:42.105785 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 12:00:42.105903 [INFO] Starting SwitchCFNStack
2024/02/02 12:00:42.105910 [INFO] Executing instruction: stopSqsd
2024/02/02 12:00:42.105914 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 12:00:42.105918 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 12:00:42.105923 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 12:00:42.105943 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 12:00:42.622914 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 12:00:42.622950 [INFO] Executing instruction: StagedockerApplication
2024/02/02 12:00:42.623028 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 12:00:42.644348 [INFO] Pruning containers ...
2024/02/02 12:00:42.644379 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 12:00:42.666896 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f9685cc369a0   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             condescending_goldberg

2024/02/02 12:00:42.666926 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 12:00:42.709045 [INFO] Deleted Containers:
f9685cc369a0e23b95a90deb61ca93b4ab0558c3764e6a485f21324a00bda099

Total reclaimed space: 0B

2024/02/02 12:00:42.709066 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 12:00:42.752141 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 12:00:42.752400 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 12:00:42.755434 [INFO] application/json

2024/02/02 12:00:42.755468 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 12:00:42.874894 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 12:00:42.875548 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 12:00:42.877536 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 12:00:42.877628 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 12:00:42.877703 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 12:00:42.877708 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 12:00:42.877715 [INFO] Executing instruction: Generate environment file
2024/02/02 12:00:42.877861 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 12:00:42.877869 [INFO] start build docker app
2024/02/02 12:00:42.878461 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 12:00:42.878469 [INFO] fetching image and ports
2024/02/02 12:00:42.880340 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 12:00:42.880402 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 12:00:42.880414 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 12:00:42.880483 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 12:00:43.739204 [INFO] Login Succeeded

2024/02/02 12:00:43.739241 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 12:00:43.739248 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 12:00:43.739267 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 12:00:43.886742 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 12:00:43.886765 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 12:00:43.886769 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 12:00:43.886772 [INFO] start to build docker image
2024/02/02 12:00:43.886787 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 12:00:44.218439 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 12:00:44.218594 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 12:00:44.218601 [INFO] successfully build docker image
2024/02/02 12:00:44.218604 [INFO] save staging docker image id
2024/02/02 12:00:44.218618 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 12:00:44.243486 [INFO] c176d18fbf65

2024/02/02 12:00:44.243606 [INFO] Executing instruction: configure X-Ray
2024/02/02 12:00:44.243614 [INFO] X-Ray is not enabled.
2024/02/02 12:00:44.243617 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 12:00:44.249605 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 12:00:44.251410 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 12:00:44.267432 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 12:00:44.267467 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 12:00:44.281310 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 12:00:44.292444 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 12:00:44.304897 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 12:00:44.383968 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 12:00:44.720048 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 12:00:44.720137 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 12:00:45.065977 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 12:00:45.080243 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 12:00:45.422663 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 12:00:45.434890 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 12:00:45.447568 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 12:00:45.774970 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 12:00:45.785105 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 12:00:46.129470 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 12:00:46.129509 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 12:00:46.148952 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 12:00:46.163632 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 12:00:46.243131 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 12:00:46.244044 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 12:00:46.244980 [INFO] Executing instruction: configure log streaming
2024/02/02 12:00:46.244990 [INFO] log streaming is not enabled
2024/02/02 12:00:46.244994 [INFO] disable log stream
2024/02/02 12:00:46.245008 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 12:00:46.262316 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 12:00:46.280182 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 12:00:46.280204 [INFO] Checking if logs need forced rotation
2024/02/02 12:00:46.280221 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 12:00:46.874201 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 12:00:47.378662 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 12:00:47.380461 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 12:00:47.922807 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 12:00:47.942819 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 12:00:47.942837 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 12:00:47.942849 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 12:00:48.430477 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 12:00:48.430575 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 12:00:48.430598 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 12:00:48.430601 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 12:00:48.430624 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 12:00:48.430635 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 12:00:48.430637 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 12:00:48.430643 [INFO] Executing instruction: stop X-Ray
2024/02/02 12:00:48.430645 [INFO] stop X-Ray ...
2024/02/02 12:00:48.430655 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 12:00:48.455790 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 12:00:48.455874 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 12:00:48.473154 [INFO] Executing instruction: Run Docker Container
2024/02/02 12:00:48.473184 [INFO] stop currently running containers...
2024/02/02 12:00:48.473193 [INFO] detected old app is not docker compose app
2024/02/02 12:00:48.473210 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 12:00:48.513364 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 12:00:48.536240 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 12:00:48.536283 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 12:00:48.557759 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 12:00:48.557809 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 12:00:48.575296 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 12:00:48.575354 [INFO] stopping current container: f9685cc369a0
2024/02/02 12:00:48.575368 [INFO] Running command /bin/sh -c docker ps | grep -q f9685cc369a0
2024/02/02 12:00:48.598388 [INFO] Running command /bin/sh -c docker ps | grep -q f9685cc369a0
2024/02/02 12:00:48.623136 [INFO] Pruning containers ...
2024/02/02 12:00:48.623160 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 12:00:48.646330 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 12:00:48.646364 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 12:00:48.668600 [INFO] Total reclaimed space: 0B

2024/02/02 12:00:48.668639 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 12:00:48.687897 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 12:00:48.687931 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 12:00:48.712617 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 12:00:48.712636 [INFO] Removing /var/app/current/ if it exists
2024/02/02 12:00:48.712816 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 12:00:48.712838 [INFO] detected new app is not docker compose app
2024/02/02 12:00:48.712896 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 12:00:49.128536 [INFO] e4e59ef1bd87374dcaf9c3bd16559c26a11ea26a326d4b074349c19f79a6ad50

2024/02/02 12:00:54.131504 [INFO] Running command /bin/sh -c docker ps | grep -q e4e59ef1bd87
2024/02/02 12:00:54.152955 [ERROR] docker container quit unexpectedly on 2024-02-02 12:00:54.152944372 +0000 UTC: Command /bin/sh -c docker ps | grep -q e4e59ef1bd87 failed with error exit status 1
2024/02/02 12:00:54.152985 [INFO] Running command /bin/sh -c docker logs e4e59ef1bd87
2024/02/02 12:00:54.174245 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container e4e59ef1bd87: Command /bin/sh -c docker ps | grep -q e4e59ef1bd87 failed with error exit status 1 

2024/02/02 12:00:54.174255 [INFO] Executing cleanup logic
2024/02/02 12:00:54.174452 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 13:00:55.261829 [INFO] Starting...
2024/02/02 13:00:55.261874 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 13:00:55.261899 [INFO] reading event message file
2024/02/02 13:00:55.262617 [INFO] Engine received EB command userdata-exec

2024/02/02 13:00:55.268429 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 13:00:55.600984 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 13:00:56.040538 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 13:00:56.040626 [INFO] Engine command: (self-startup)

2024/02/02 13:00:56.040632 [INFO] Downloading EB Application...
2024/02/02 13:00:56.040635 [INFO] Region: eu-west-1
2024/02/02 13:00:56.040638 [INFO] envID: e-8gmkc7rmw6
2024/02/02 13:00:56.040641 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 13:00:56.040645 [INFO] Using manifest file name from command request
2024/02/02 13:00:56.040660 [INFO] Unable to get version manifest file.
2024/02/02 13:00:56.040663 [INFO] Downloading latest manifest available.
2024/02/02 13:00:56.040665 [INFO] Download latest app version manifest
2024/02/02 13:00:56.040787 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 13:00:56.084527 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 13:00:56.084836 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 13:00:56.100458 [INFO] Download successful124bytes downloaded
2024/02/02 13:00:56.100821 [INFO] Trying to read and parse version manifest...
2024/02/02 13:00:56.100950 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 13:00:56.132895 [INFO] Download successful264bytes downloaded
2024/02/02 13:00:56.133198 [INFO] Executing instruction: SyncClock
2024/02/02 13:00:56.133202 [INFO] Starting SyncClock
2024/02/02 13:00:56.133277 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 13:00:56.152794 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 13:00:38 2024
System time     : 0.000000899 seconds slow of NTP time
Last offset     : -0.000001634 seconds
RMS offset      : 0.000004945 seconds
Frequency       : 0.020 ppm slow
Residual freq   : -0.002 ppm
Skew            : 0.065 ppm
Root delay      : 0.000405715 seconds
Root dispersion : 0.000335232 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/02 13:00:56.152826 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 13:00:56.161675 [INFO] 200 OK

2024/02/02 13:00:56.161934 [INFO] Skipping Configure OS
2024/02/02 13:00:56.161945 [INFO] Skipping LockRepo
2024/02/02 13:00:56.161950 [INFO] Skipping GenerateEBBanner
2024/02/02 13:00:56.161955 [INFO] Skipping Install Process Manager
2024/02/02 13:00:56.161959 [INFO] Skipping install syslog
2024/02/02 13:00:56.161968 [INFO] Skipping install cron
2024/02/02 13:00:56.161972 [INFO] Skipping install proxy
2024/02/02 13:00:56.161977 [INFO] Skipping installhealthd
2024/02/02 13:00:56.161993 [INFO] Skipping Install Log Streaming Manager
2024/02/02 13:00:56.161998 [INFO] Skipping install X-Ray
2024/02/02 13:00:56.162002 [INFO] Skipping install Third Party License
2024/02/02 13:00:56.162007 [INFO] Skipping installSqsd
2024/02/02 13:00:56.162011 [INFO] Skipping bootstraphealthd
2024/02/02 13:00:56.162015 [INFO] Skipping Install yum packages
2024/02/02 13:00:56.162018 [INFO] Skipping install docker-compose
2024/02/02 13:00:56.162023 [INFO] Skipping Configure Docker Daemon
2024/02/02 13:00:56.162026 [INFO] Skipping MarkBaked
2024/02/02 13:00:56.162030 [INFO] Skipping TuneSystemSettings
2024/02/02 13:00:56.162033 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 13:00:56.162035 [INFO] Initialize LogRotate files and directories
2024/02/02 13:00:56.180497 [INFO] Skipping BootstrapCFNHup
2024/02/02 13:00:56.180513 [INFO] Executing instruction: StartCFNHup
2024/02/02 13:00:56.180516 [INFO] Start cfn-hup
2024/02/02 13:00:56.180533 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 13:00:56.201529 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 13:00:56.213480 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 13:00:56.213516 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 13:00:56.213520 [INFO] Executing instruction: Start Docker
2024/02/02 13:00:56.213523 [INFO] Starting Docker...
2024/02/02 13:00:56.213605 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 13:00:56.214866 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 13:00:56.215862 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 13:00:56.671839 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 13:00:56.686074 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 13:00:56.686105 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 13:00:56.699436 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 13:00:56.720580 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 13:00:56.740835 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 13:00:56.841563 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 13:00:56.841595 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 13:00:57.272312 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 13:00:57.588904 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 13:00:57.599708 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 13:00:57.891830 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 13:00:57.900951 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 13:00:57.914510 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 13:00:57.922826 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 13:00:59.150700 [INFO] Skipping Setup Docker Options
2024/02/02 13:00:59.150722 [INFO] Skipping MarkBootstrapped
2024/02/02 13:00:59.150726 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 13:00:59.150845 [INFO] Starting SwitchCFNStack
2024/02/02 13:00:59.150851 [INFO] Executing instruction: stopSqsd
2024/02/02 13:00:59.150854 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 13:00:59.150858 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 13:00:59.150862 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 13:00:59.150883 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 13:00:59.615587 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 13:00:59.615614 [INFO] Executing instruction: StagedockerApplication
2024/02/02 13:00:59.615630 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 13:00:59.649744 [INFO] Pruning containers ...
2024/02/02 13:00:59.649784 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 13:00:59.671695 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
e4e59ef1bd87   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             agitated_khorana

2024/02/02 13:00:59.671729 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 13:00:59.698363 [INFO] Deleted Containers:
e4e59ef1bd87374dcaf9c3bd16559c26a11ea26a326d4b074349c19f79a6ad50

Total reclaimed space: 0B

2024/02/02 13:00:59.698392 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 13:00:59.717718 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 13:00:59.717955 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 13:00:59.720957 [INFO] application/json

2024/02/02 13:00:59.720977 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 13:00:59.796204 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 13:00:59.796378 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 13:00:59.797744 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 13:00:59.797768 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 13:00:59.797784 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 13:00:59.797788 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 13:00:59.797794 [INFO] Executing instruction: Generate environment file
2024/02/02 13:00:59.797820 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 13:00:59.797824 [INFO] start build docker app
2024/02/02 13:00:59.798241 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 13:00:59.798246 [INFO] fetching image and ports
2024/02/02 13:00:59.799827 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 13:00:59.799875 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 13:00:59.799883 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 13:00:59.799892 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 13:01:01.064872 [INFO] Login Succeeded

2024/02/02 13:01:01.064928 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 13:01:01.064935 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 13:01:01.065534 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 13:01:01.435598 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 13:01:01.435637 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 13:01:01.435642 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 13:01:01.435646 [INFO] start to build docker image
2024/02/02 13:01:01.435668 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 13:01:02.444619 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 13:01:02.444651 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 13:01:02.444655 [INFO] successfully build docker image
2024/02/02 13:01:02.444659 [INFO] save staging docker image id
2024/02/02 13:01:02.444673 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 13:01:02.489009 [INFO] c176d18fbf65

2024/02/02 13:01:02.489235 [INFO] Executing instruction: configure X-Ray
2024/02/02 13:01:02.489243 [INFO] X-Ray is not enabled.
2024/02/02 13:01:02.489247 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 13:01:02.496190 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 13:01:02.497969 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 13:01:02.513798 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 13:01:02.513831 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 13:01:02.536763 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 13:01:02.567601 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 13:01:02.602334 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 13:01:02.692720 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 13:01:03.159740 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 13:01:03.159832 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 13:01:03.572443 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 13:01:03.587538 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 13:01:03.902326 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 13:01:03.914111 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 13:01:03.923059 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 13:01:04.264297 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 13:01:04.279943 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 13:01:04.598538 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 13:01:04.598574 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 13:01:04.619891 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 13:01:04.644480 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 13:01:04.777574 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 13:01:04.778772 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 13:01:04.780099 [INFO] Executing instruction: configure log streaming
2024/02/02 13:01:04.780109 [INFO] log streaming is not enabled
2024/02/02 13:01:04.780112 [INFO] disable log stream
2024/02/02 13:01:04.780128 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 13:01:04.797674 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 13:01:04.824006 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 13:01:04.824035 [INFO] Checking if logs need forced rotation
2024/02/02 13:01:04.824057 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 13:01:05.449833 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 13:01:05.862649 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 13:01:05.865318 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 13:01:06.398959 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 13:01:06.419567 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 13:01:06.419582 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 13:01:06.419594 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 13:01:06.825979 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 13:01:06.826019 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 13:01:06.826045 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 13:01:06.826047 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 13:01:06.826068 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 13:01:06.826081 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 13:01:06.826084 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 13:01:06.826090 [INFO] Executing instruction: stop X-Ray
2024/02/02 13:01:06.826094 [INFO] stop X-Ray ...
2024/02/02 13:01:06.826108 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 13:01:06.844267 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 13:01:06.844294 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 13:01:06.863244 [INFO] Executing instruction: Run Docker Container
2024/02/02 13:01:06.863280 [INFO] stop currently running containers...
2024/02/02 13:01:06.863292 [INFO] detected old app is not docker compose app
2024/02/02 13:01:06.863306 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 13:01:06.885300 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 13:01:06.901063 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 13:01:06.901092 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 13:01:06.917126 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 13:01:06.918460 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 13:01:06.933510 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 13:01:06.933555 [INFO] stopping current container: e4e59ef1bd87
2024/02/02 13:01:06.933566 [INFO] Running command /bin/sh -c docker ps | grep -q e4e59ef1bd87
2024/02/02 13:01:06.955615 [INFO] Running command /bin/sh -c docker ps | grep -q e4e59ef1bd87
2024/02/02 13:01:06.977249 [INFO] Pruning containers ...
2024/02/02 13:01:06.977277 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 13:01:07.033767 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 13:01:07.033798 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 13:01:07.056387 [INFO] Total reclaimed space: 0B

2024/02/02 13:01:07.056416 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 13:01:07.075268 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 13:01:07.075298 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 13:01:07.094765 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 13:01:07.094785 [INFO] Removing /var/app/current/ if it exists
2024/02/02 13:01:07.094882 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 13:01:07.094903 [INFO] detected new app is not docker compose app
2024/02/02 13:01:07.094953 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 13:01:07.527512 [INFO] e6615a0210f5392d6dfa93a889d796b9673ea7b68eac595db3b53ef641de9ccb

2024/02/02 13:01:12.531919 [INFO] Running command /bin/sh -c docker ps | grep -q e6615a0210f5
2024/02/02 13:01:12.559688 [ERROR] docker container quit unexpectedly on 2024-02-02 13:01:12.559670495 +0000 UTC: Command /bin/sh -c docker ps | grep -q e6615a0210f5 failed with error exit status 1
2024/02/02 13:01:12.559719 [INFO] Running command /bin/sh -c docker logs e6615a0210f5
2024/02/02 13:01:12.584405 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container e6615a0210f5: Command /bin/sh -c docker ps | grep -q e6615a0210f5 failed with error exit status 1 

2024/02/02 13:01:12.584415 [INFO] Executing cleanup logic
2024/02/02 13:01:12.584620 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 14:01:13.729985 [INFO] Starting...
2024/02/02 14:01:13.730027 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 14:01:13.730052 [INFO] reading event message file
2024/02/02 14:01:13.731242 [INFO] Engine received EB command userdata-exec

2024/02/02 14:01:13.736550 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 14:01:14.210259 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 14:01:14.698235 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 14:01:14.698314 [INFO] Engine command: (self-startup)

2024/02/02 14:01:14.698319 [INFO] Downloading EB Application...
2024/02/02 14:01:14.698322 [INFO] Region: eu-west-1
2024/02/02 14:01:14.698324 [INFO] envID: e-8gmkc7rmw6
2024/02/02 14:01:14.698326 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 14:01:14.698329 [INFO] Using manifest file name from command request
2024/02/02 14:01:14.698341 [INFO] Unable to get version manifest file.
2024/02/02 14:01:14.698343 [INFO] Downloading latest manifest available.
2024/02/02 14:01:14.698345 [INFO] Download latest app version manifest
2024/02/02 14:01:14.698496 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 14:01:14.772816 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 14:01:14.773177 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 14:01:14.792361 [INFO] Download successful124bytes downloaded
2024/02/02 14:01:14.792499 [INFO] Trying to read and parse version manifest...
2024/02/02 14:01:14.792574 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 14:01:14.813607 [INFO] Download successful264bytes downloaded
2024/02/02 14:01:14.813963 [INFO] Executing instruction: SyncClock
2024/02/02 14:01:14.813969 [INFO] Starting SyncClock
2024/02/02 14:01:14.813980 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 14:01:14.819593 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 14:01:02 2024
System time     : 0.000000863 seconds slow of NTP time
Last offset     : -0.000001184 seconds
RMS offset      : 0.000002772 seconds
Frequency       : 0.174 ppm slow
Residual freq   : -0.001 ppm
Skew            : 0.052 ppm
Root delay      : 0.000404374 seconds
Root dispersion : 0.000322747 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/02 14:01:14.819612 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 14:01:14.824093 [INFO] 200 OK

2024/02/02 14:01:14.824187 [INFO] Skipping Configure OS
2024/02/02 14:01:14.824192 [INFO] Skipping LockRepo
2024/02/02 14:01:14.824196 [INFO] Skipping GenerateEBBanner
2024/02/02 14:01:14.824200 [INFO] Skipping Install Process Manager
2024/02/02 14:01:14.824204 [INFO] Skipping install syslog
2024/02/02 14:01:14.824208 [INFO] Skipping install cron
2024/02/02 14:01:14.824212 [INFO] Skipping install proxy
2024/02/02 14:01:14.824215 [INFO] Skipping installhealthd
2024/02/02 14:01:14.824219 [INFO] Skipping Install Log Streaming Manager
2024/02/02 14:01:14.824223 [INFO] Skipping install X-Ray
2024/02/02 14:01:14.824227 [INFO] Skipping install Third Party License
2024/02/02 14:01:14.824232 [INFO] Skipping installSqsd
2024/02/02 14:01:14.824236 [INFO] Skipping bootstraphealthd
2024/02/02 14:01:14.824240 [INFO] Skipping Install yum packages
2024/02/02 14:01:14.824243 [INFO] Skipping install docker-compose
2024/02/02 14:01:14.824247 [INFO] Skipping Configure Docker Daemon
2024/02/02 14:01:14.824251 [INFO] Skipping MarkBaked
2024/02/02 14:01:14.824255 [INFO] Skipping TuneSystemSettings
2024/02/02 14:01:14.824257 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 14:01:14.824259 [INFO] Initialize LogRotate files and directories
2024/02/02 14:01:14.837343 [INFO] Skipping BootstrapCFNHup
2024/02/02 14:01:14.837351 [INFO] Executing instruction: StartCFNHup
2024/02/02 14:01:14.837355 [INFO] Start cfn-hup
2024/02/02 14:01:14.837372 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 14:01:14.850468 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 14:01:14.859458 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 14:01:14.859488 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 14:01:14.859491 [INFO] Executing instruction: Start Docker
2024/02/02 14:01:14.859493 [INFO] Starting Docker...
2024/02/02 14:01:14.859552 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 14:01:14.862333 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 14:01:14.863365 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 14:01:15.130166 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 14:01:15.143924 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 14:01:15.143954 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 14:01:15.157955 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 14:01:15.173299 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 14:01:15.183567 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 14:01:15.267801 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 14:01:15.267842 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 14:01:15.558206 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 14:01:15.876406 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 14:01:15.888171 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 14:01:16.223133 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 14:01:16.273795 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 14:01:16.299128 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 14:01:16.314889 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 14:01:17.592567 [INFO] Skipping Setup Docker Options
2024/02/02 14:01:17.592596 [INFO] Skipping MarkBootstrapped
2024/02/02 14:01:17.592601 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 14:01:17.592720 [INFO] Starting SwitchCFNStack
2024/02/02 14:01:17.592730 [INFO] Executing instruction: stopSqsd
2024/02/02 14:01:17.592735 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 14:01:17.592738 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 14:01:17.592741 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 14:01:17.592762 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 14:01:18.039362 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 14:01:18.039384 [INFO] Executing instruction: StagedockerApplication
2024/02/02 14:01:18.039395 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 14:01:18.069455 [INFO] Pruning containers ...
2024/02/02 14:01:18.069834 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 14:01:18.131769 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
e6615a0210f5   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             confident_brahmagupta

2024/02/02 14:01:18.131804 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 14:01:18.162050 [INFO] Deleted Containers:
e6615a0210f5392d6dfa93a889d796b9673ea7b68eac595db3b53ef641de9ccb

Total reclaimed space: 0B

2024/02/02 14:01:18.162077 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 14:01:18.181521 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 14:01:18.181771 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 14:01:18.184913 [INFO] application/json

2024/02/02 14:01:18.184932 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 14:01:18.271026 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/02 14:01:18.271223 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 14:01:18.272625 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 14:01:18.272655 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 14:01:18.272673 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 14:01:18.272678 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 14:01:18.272683 [INFO] Executing instruction: Generate environment file
2024/02/02 14:01:18.272709 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 14:01:18.272712 [INFO] start build docker app
2024/02/02 14:01:18.273104 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 14:01:18.273109 [INFO] fetching image and ports
2024/02/02 14:01:18.274846 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 14:01:18.274898 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 14:01:18.274907 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 14:01:18.274917 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 14:01:19.212367 [INFO] Login Succeeded

2024/02/02 14:01:19.212384 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 14:01:19.212391 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 14:01:19.212410 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 14:01:19.392772 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 14:01:19.392798 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 14:01:19.392802 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 14:01:19.392805 [INFO] start to build docker image
2024/02/02 14:01:19.392820 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 14:01:19.666271 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 14:01:19.666293 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 14:01:19.666297 [INFO] successfully build docker image
2024/02/02 14:01:19.666300 [INFO] save staging docker image id
2024/02/02 14:01:19.666314 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 14:01:19.692696 [INFO] c176d18fbf65

2024/02/02 14:01:19.692805 [INFO] Executing instruction: configure X-Ray
2024/02/02 14:01:19.692811 [INFO] X-Ray is not enabled.
2024/02/02 14:01:19.692815 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 14:01:19.698384 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 14:01:19.700166 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 14:01:19.713519 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 14:01:19.713589 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 14:01:19.723743 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 14:01:19.732383 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 14:01:19.744234 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 14:01:19.799001 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 14:01:20.157170 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 14:01:20.157252 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 14:01:20.482373 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 14:01:20.493623 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 14:01:20.818894 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 14:01:20.829148 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 14:01:20.838161 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 14:01:21.161579 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 14:01:21.182183 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 14:01:21.511399 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 14:01:21.511437 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 14:01:21.525426 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 14:01:21.534760 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 14:01:21.616996 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 14:01:21.618422 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 14:01:21.619517 [INFO] Executing instruction: configure log streaming
2024/02/02 14:01:21.619526 [INFO] log streaming is not enabled
2024/02/02 14:01:21.619528 [INFO] disable log stream
2024/02/02 14:01:21.619539 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 14:01:21.640624 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 14:01:21.667416 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 14:01:21.667442 [INFO] Checking if logs need forced rotation
2024/02/02 14:01:21.667466 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 14:01:22.297867 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 14:01:22.757344 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 14:01:22.759350 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 14:01:22.818694 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 14:01:22.839493 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 14:01:22.839511 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 14:01:22.839579 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 14:01:23.367877 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 14:01:23.367915 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 14:01:23.367940 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 14:01:23.367943 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 14:01:23.367963 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 14:01:23.367975 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 14:01:23.367979 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 14:01:23.367985 [INFO] Executing instruction: stop X-Ray
2024/02/02 14:01:23.367989 [INFO] stop X-Ray ...
2024/02/02 14:01:23.368000 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 14:01:23.383837 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 14:01:23.383870 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 14:01:23.400918 [INFO] Executing instruction: Run Docker Container
2024/02/02 14:01:23.400946 [INFO] stop currently running containers...
2024/02/02 14:01:23.400955 [INFO] detected old app is not docker compose app
2024/02/02 14:01:23.400968 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 14:01:23.442523 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 14:01:23.458285 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 14:01:23.458319 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 14:01:23.473003 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 14:01:23.473031 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 14:01:23.490159 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 14:01:23.490208 [INFO] stopping current container: e6615a0210f5
2024/02/02 14:01:23.490220 [INFO] Running command /bin/sh -c docker ps | grep -q e6615a0210f5
2024/02/02 14:01:23.513722 [INFO] Running command /bin/sh -c docker ps | grep -q e6615a0210f5
2024/02/02 14:01:23.538992 [INFO] Pruning containers ...
2024/02/02 14:01:23.539014 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 14:01:23.577125 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 14:01:23.577154 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 14:01:23.596154 [INFO] Total reclaimed space: 0B

2024/02/02 14:01:23.596179 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 14:01:23.616938 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 14:01:23.616973 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 14:01:23.642313 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 14:01:23.642333 [INFO] Removing /var/app/current/ if it exists
2024/02/02 14:01:23.642479 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 14:01:23.642495 [INFO] detected new app is not docker compose app
2024/02/02 14:01:23.642545 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 14:01:24.134136 [INFO] 2707a1ec3cbe5b2722918f8eb95503b33eb652b74f52145ee106129caac11834

2024/02/02 14:01:29.138535 [INFO] Running command /bin/sh -c docker ps | grep -q 2707a1ec3cbe
2024/02/02 14:01:29.161494 [ERROR] docker container quit unexpectedly on 2024-02-02 14:01:29.161478396 +0000 UTC: Command /bin/sh -c docker ps | grep -q 2707a1ec3cbe failed with error exit status 1
2024/02/02 14:01:29.161527 [INFO] Running command /bin/sh -c docker logs 2707a1ec3cbe
2024/02/02 14:01:29.188957 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 2707a1ec3cbe: Command /bin/sh -c docker ps | grep -q 2707a1ec3cbe failed with error exit status 1 

2024/02/02 14:01:29.188966 [INFO] Executing cleanup logic
2024/02/02 14:01:29.189169 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 15:01:30.263617 [INFO] Starting...
2024/02/02 15:01:30.263661 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 15:01:30.263688 [INFO] reading event message file
2024/02/02 15:01:30.266899 [INFO] Engine received EB command userdata-exec

2024/02/02 15:01:30.272280 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 15:01:30.758731 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 15:01:31.332638 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 15:01:31.332820 [INFO] Engine command: (self-startup)

2024/02/02 15:01:31.332831 [INFO] Downloading EB Application...
2024/02/02 15:01:31.332835 [INFO] Region: eu-west-1
2024/02/02 15:01:31.332837 [INFO] envID: e-8gmkc7rmw6
2024/02/02 15:01:31.332840 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 15:01:31.332842 [INFO] Using manifest file name from command request
2024/02/02 15:01:31.332863 [INFO] Unable to get version manifest file.
2024/02/02 15:01:31.332866 [INFO] Downloading latest manifest available.
2024/02/02 15:01:31.332868 [INFO] Download latest app version manifest
2024/02/02 15:01:31.332981 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 15:01:31.377145 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 15:01:31.377451 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 15:01:31.394410 [INFO] Download successful124bytes downloaded
2024/02/02 15:01:31.394563 [INFO] Trying to read and parse version manifest...
2024/02/02 15:01:31.394645 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 15:01:31.422344 [INFO] Download successful264bytes downloaded
2024/02/02 15:01:31.422684 [INFO] Executing instruction: SyncClock
2024/02/02 15:01:31.422689 [INFO] Starting SyncClock
2024/02/02 15:01:31.422701 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 15:01:31.436890 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 15:01:22 2024
System time     : 0.000004608 seconds slow of NTP time
Last offset     : -0.000001349 seconds
RMS offset      : 0.000005082 seconds
Frequency       : 0.151 ppm slow
Residual freq   : -0.002 ppm
Skew            : 0.196 ppm
Root delay      : 0.000455347 seconds
Root dispersion : 0.000498731 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/02 15:01:31.436921 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 15:01:31.444304 [INFO] 200 OK

2024/02/02 15:01:31.444525 [INFO] Skipping Configure OS
2024/02/02 15:01:31.444537 [INFO] Skipping LockRepo
2024/02/02 15:01:31.444543 [INFO] Skipping GenerateEBBanner
2024/02/02 15:01:31.444548 [INFO] Skipping Install Process Manager
2024/02/02 15:01:31.444554 [INFO] Skipping install syslog
2024/02/02 15:01:31.444568 [INFO] Skipping install cron
2024/02/02 15:01:31.444571 [INFO] Skipping install proxy
2024/02/02 15:01:31.444575 [INFO] Skipping installhealthd
2024/02/02 15:01:31.444579 [INFO] Skipping Install Log Streaming Manager
2024/02/02 15:01:31.444587 [INFO] Skipping install X-Ray
2024/02/02 15:01:31.444591 [INFO] Skipping install Third Party License
2024/02/02 15:01:31.444596 [INFO] Skipping installSqsd
2024/02/02 15:01:31.444600 [INFO] Skipping bootstraphealthd
2024/02/02 15:01:31.444604 [INFO] Skipping Install yum packages
2024/02/02 15:01:31.444608 [INFO] Skipping install docker-compose
2024/02/02 15:01:31.444612 [INFO] Skipping Configure Docker Daemon
2024/02/02 15:01:31.444616 [INFO] Skipping MarkBaked
2024/02/02 15:01:31.444698 [INFO] Skipping TuneSystemSettings
2024/02/02 15:01:31.444703 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 15:01:31.444752 [INFO] Initialize LogRotate files and directories
2024/02/02 15:01:31.488474 [INFO] Skipping BootstrapCFNHup
2024/02/02 15:01:31.488489 [INFO] Executing instruction: StartCFNHup
2024/02/02 15:01:31.488494 [INFO] Start cfn-hup
2024/02/02 15:01:31.488514 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 15:01:31.518079 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 15:01:31.532625 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 15:01:31.532663 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 15:01:31.532667 [INFO] Executing instruction: Start Docker
2024/02/02 15:01:31.532671 [INFO] Starting Docker...
2024/02/02 15:01:31.533147 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 15:01:31.534539 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 15:01:31.535923 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 15:01:31.906142 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 15:01:31.927765 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 15:01:31.927812 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 15:01:31.940640 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 15:01:31.956183 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 15:01:31.967752 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 15:01:32.034103 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 15:01:32.034191 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 15:01:32.337920 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 15:01:32.753700 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 15:01:32.767741 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 15:01:33.134970 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 15:01:33.146363 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 15:01:33.159547 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 15:01:33.168124 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 15:01:34.442834 [INFO] Skipping Setup Docker Options
2024/02/02 15:01:34.442853 [INFO] Skipping MarkBootstrapped
2024/02/02 15:01:34.442858 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 15:01:34.443027 [INFO] Starting SwitchCFNStack
2024/02/02 15:01:34.443034 [INFO] Executing instruction: stopSqsd
2024/02/02 15:01:34.443038 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 15:01:34.443041 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 15:01:34.443049 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 15:01:34.443066 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 15:01:34.882481 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 15:01:34.882504 [INFO] Executing instruction: StagedockerApplication
2024/02/02 15:01:34.882519 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 15:01:34.903879 [INFO] Pruning containers ...
2024/02/02 15:01:34.903913 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 15:01:34.927532 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
2707a1ec3cbe   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             gifted_stonebraker

2024/02/02 15:01:34.927574 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 15:01:34.958415 [INFO] Deleted Containers:
2707a1ec3cbe5b2722918f8eb95503b33eb652b74f52145ee106129caac11834

Total reclaimed space: 0B

2024/02/02 15:01:34.958455 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 15:01:34.983629 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 15:01:34.983933 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 15:01:34.986915 [INFO] application/json

2024/02/02 15:01:34.986935 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 15:01:35.071298 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 15:01:35.071813 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 15:01:35.073443 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 15:01:35.073472 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 15:01:35.073488 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 15:01:35.073491 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 15:01:35.073495 [INFO] Executing instruction: Generate environment file
2024/02/02 15:01:35.073524 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 15:01:35.073529 [INFO] start build docker app
2024/02/02 15:01:35.073926 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 15:01:35.073931 [INFO] fetching image and ports
2024/02/02 15:01:35.077067 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 15:01:35.077119 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 15:01:35.077128 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 15:01:35.077138 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 15:01:36.033357 [INFO] Login Succeeded

2024/02/02 15:01:36.033380 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 15:01:36.033385 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 15:01:36.033402 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 15:01:36.212325 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 15:01:36.212352 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 15:01:36.212361 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 15:01:36.212364 [INFO] start to build docker image
2024/02/02 15:01:36.212382 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 15:01:36.474595 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 15:01:36.474617 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 15:01:36.474622 [INFO] successfully build docker image
2024/02/02 15:01:36.474625 [INFO] save staging docker image id
2024/02/02 15:01:36.474638 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 15:01:36.495149 [INFO] c176d18fbf65

2024/02/02 15:01:36.495311 [INFO] Executing instruction: configure X-Ray
2024/02/02 15:01:36.495319 [INFO] X-Ray is not enabled.
2024/02/02 15:01:36.495323 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 15:01:36.501513 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 15:01:36.503055 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 15:01:36.514974 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 15:01:36.515008 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 15:01:36.525099 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 15:01:36.533788 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 15:01:36.544050 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 15:01:36.638202 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 15:01:37.037364 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 15:01:37.037443 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 15:01:37.300258 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 15:01:37.313384 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 15:01:37.650974 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 15:01:37.661427 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 15:01:37.672467 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 15:01:38.039814 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 15:01:38.055898 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 15:01:38.380448 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 15:01:38.380490 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 15:01:38.394445 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 15:01:38.404001 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 15:01:38.477470 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 15:01:38.478485 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 15:01:38.479413 [INFO] Executing instruction: configure log streaming
2024/02/02 15:01:38.479423 [INFO] log streaming is not enabled
2024/02/02 15:01:38.479426 [INFO] disable log stream
2024/02/02 15:01:38.479440 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 15:01:38.501186 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 15:01:38.520590 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 15:01:38.520614 [INFO] Checking if logs need forced rotation
2024/02/02 15:01:38.520638 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 15:01:39.146009 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 15:01:39.658768 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 15:01:39.660526 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 15:01:40.171451 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 15:01:40.191503 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 15:01:40.191518 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 15:01:40.191536 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 15:01:40.588572 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 15:01:40.588608 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 15:01:40.588634 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 15:01:40.588637 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 15:01:40.588655 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 15:01:40.588666 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 15:01:40.588668 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 15:01:40.588673 [INFO] Executing instruction: stop X-Ray
2024/02/02 15:01:40.588676 [INFO] stop X-Ray ...
2024/02/02 15:01:40.588700 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 15:01:40.607039 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 15:01:40.607068 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 15:01:40.625096 [INFO] Executing instruction: Run Docker Container
2024/02/02 15:01:40.625128 [INFO] stop currently running containers...
2024/02/02 15:01:40.625141 [INFO] detected old app is not docker compose app
2024/02/02 15:01:40.625152 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 15:01:40.672894 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 15:01:40.689939 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 15:01:40.689980 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 15:01:40.709625 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 15:01:40.709660 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 15:01:40.734844 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 15:01:40.734904 [INFO] stopping current container: 2707a1ec3cbe
2024/02/02 15:01:40.734926 [INFO] Running command /bin/sh -c docker ps | grep -q 2707a1ec3cbe
2024/02/02 15:01:40.761805 [INFO] Running command /bin/sh -c docker ps | grep -q 2707a1ec3cbe
2024/02/02 15:01:40.783537 [INFO] Pruning containers ...
2024/02/02 15:01:40.783560 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 15:01:40.808933 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 15:01:40.808964 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 15:01:40.828544 [INFO] Total reclaimed space: 0B

2024/02/02 15:01:40.828647 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 15:01:40.864173 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 15:01:40.864206 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 15:01:40.884763 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 15:01:40.884786 [INFO] Removing /var/app/current/ if it exists
2024/02/02 15:01:40.884882 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 15:01:40.884904 [INFO] detected new app is not docker compose app
2024/02/02 15:01:40.885018 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 15:01:41.301495 [INFO] c69778a7e5ad06e92725fd101484b7e5831f7186d2124d9db1ffd0116e7a7c23

2024/02/02 15:01:46.302063 [INFO] Running command /bin/sh -c docker ps | grep -q c69778a7e5ad
2024/02/02 15:01:46.333304 [ERROR] docker container quit unexpectedly on 2024-02-02 15:01:46.333292358 +0000 UTC: Command /bin/sh -c docker ps | grep -q c69778a7e5ad failed with error exit status 1
2024/02/02 15:01:46.333330 [INFO] Running command /bin/sh -c docker logs c69778a7e5ad
2024/02/02 15:01:46.354791 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c69778a7e5ad: Command /bin/sh -c docker ps | grep -q c69778a7e5ad failed with error exit status 1 

2024/02/02 15:01:46.354803 [INFO] Executing cleanup logic
2024/02/02 15:01:46.355054 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 16:01:47.414348 [INFO] Starting...
2024/02/02 16:01:47.414390 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 16:01:47.414418 [INFO] reading event message file
2024/02/02 16:01:47.415249 [INFO] Engine received EB command userdata-exec

2024/02/02 16:01:47.424359 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 16:01:47.841974 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 16:01:48.314420 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 16:01:48.314516 [INFO] Engine command: (self-startup)

2024/02/02 16:01:48.314524 [INFO] Downloading EB Application...
2024/02/02 16:01:48.314528 [INFO] Region: eu-west-1
2024/02/02 16:01:48.314531 [INFO] envID: e-8gmkc7rmw6
2024/02/02 16:01:48.314534 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 16:01:48.314537 [INFO] Using manifest file name from command request
2024/02/02 16:01:48.314551 [INFO] Unable to get version manifest file.
2024/02/02 16:01:48.314566 [INFO] Downloading latest manifest available.
2024/02/02 16:01:48.314569 [INFO] Download latest app version manifest
2024/02/02 16:01:48.314697 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 16:01:48.358300 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 16:01:48.358478 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 16:01:48.373522 [INFO] Download successful124bytes downloaded
2024/02/02 16:01:48.373664 [INFO] Trying to read and parse version manifest...
2024/02/02 16:01:48.373738 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 16:01:48.391873 [INFO] Download successful264bytes downloaded
2024/02/02 16:01:48.392264 [INFO] Executing instruction: SyncClock
2024/02/02 16:01:48.392270 [INFO] Starting SyncClock
2024/02/02 16:01:48.392281 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 16:01:48.403284 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 16:01:46 2024
System time     : 0.000001609 seconds fast of NTP time
Last offset     : +0.000000476 seconds
RMS offset      : 0.000004147 seconds
Frequency       : 0.237 ppm slow
Residual freq   : +0.001 ppm
Skew            : 0.049 ppm
Root delay      : 0.000429215 seconds
Root dispersion : 0.000481392 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/02 16:01:48.403326 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 16:01:48.412070 [INFO] 200 OK

2024/02/02 16:01:48.412192 [INFO] Skipping Configure OS
2024/02/02 16:01:48.412199 [INFO] Skipping LockRepo
2024/02/02 16:01:48.412203 [INFO] Skipping GenerateEBBanner
2024/02/02 16:01:48.412208 [INFO] Skipping Install Process Manager
2024/02/02 16:01:48.412212 [INFO] Skipping install syslog
2024/02/02 16:01:48.412215 [INFO] Skipping install cron
2024/02/02 16:01:48.412219 [INFO] Skipping install proxy
2024/02/02 16:01:48.412223 [INFO] Skipping installhealthd
2024/02/02 16:01:48.412227 [INFO] Skipping Install Log Streaming Manager
2024/02/02 16:01:48.412230 [INFO] Skipping install X-Ray
2024/02/02 16:01:48.412234 [INFO] Skipping install Third Party License
2024/02/02 16:01:48.412239 [INFO] Skipping installSqsd
2024/02/02 16:01:48.412243 [INFO] Skipping bootstraphealthd
2024/02/02 16:01:48.412247 [INFO] Skipping Install yum packages
2024/02/02 16:01:48.412251 [INFO] Skipping install docker-compose
2024/02/02 16:01:48.412254 [INFO] Skipping Configure Docker Daemon
2024/02/02 16:01:48.412260 [INFO] Skipping MarkBaked
2024/02/02 16:01:48.412264 [INFO] Skipping TuneSystemSettings
2024/02/02 16:01:48.412266 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 16:01:48.412268 [INFO] Initialize LogRotate files and directories
2024/02/02 16:01:48.427532 [INFO] Skipping BootstrapCFNHup
2024/02/02 16:01:48.427544 [INFO] Executing instruction: StartCFNHup
2024/02/02 16:01:48.427548 [INFO] Start cfn-hup
2024/02/02 16:01:48.427569 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 16:01:48.441081 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 16:01:48.450653 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 16:01:48.450686 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 16:01:48.450690 [INFO] Executing instruction: Start Docker
2024/02/02 16:01:48.450693 [INFO] Starting Docker...
2024/02/02 16:01:48.450849 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 16:01:48.452320 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 16:01:48.453331 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 16:01:48.936603 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 16:01:48.958507 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 16:01:48.958542 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 16:01:48.972405 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 16:01:48.985582 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 16:01:48.997915 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 16:01:49.049541 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 16:01:49.049593 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 16:01:49.385716 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 16:01:49.736452 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 16:01:49.755642 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 16:01:50.106686 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 16:01:50.117630 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 16:01:50.133448 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 16:01:50.145946 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 16:01:51.448783 [INFO] Skipping Setup Docker Options
2024/02/02 16:01:51.448811 [INFO] Skipping MarkBootstrapped
2024/02/02 16:01:51.448815 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 16:01:51.448940 [INFO] Starting SwitchCFNStack
2024/02/02 16:01:51.448946 [INFO] Executing instruction: stopSqsd
2024/02/02 16:01:51.448949 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 16:01:51.448953 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 16:01:51.448956 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 16:01:51.448979 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 16:01:51.961112 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 16:01:51.961134 [INFO] Executing instruction: StagedockerApplication
2024/02/02 16:01:51.961145 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 16:01:51.987648 [INFO] Pruning containers ...
2024/02/02 16:01:51.987692 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 16:01:52.013005 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c69778a7e5ad   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             jovial_panini

2024/02/02 16:01:52.013036 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 16:01:52.043637 [INFO] Deleted Containers:
c69778a7e5ad06e92725fd101484b7e5831f7186d2124d9db1ffd0116e7a7c23

Total reclaimed space: 0B

2024/02/02 16:01:52.043659 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 16:01:52.066079 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 16:01:52.066691 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 16:01:52.069725 [INFO] application/json

2024/02/02 16:01:52.069742 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 16:01:52.155062 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 16:01:52.155246 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 16:01:52.156566 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 16:01:52.156593 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 16:01:52.156608 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 16:01:52.156611 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 16:01:52.156615 [INFO] Executing instruction: Generate environment file
2024/02/02 16:01:52.156641 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 16:01:52.156645 [INFO] start build docker app
2024/02/02 16:01:52.157090 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 16:01:52.157095 [INFO] fetching image and ports
2024/02/02 16:01:52.159446 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 16:01:52.159505 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 16:01:52.159518 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 16:01:52.159528 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 16:01:53.092998 [INFO] Login Succeeded

2024/02/02 16:01:53.093018 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 16:01:53.093028 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 16:01:53.093048 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 16:01:53.234768 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 16:01:53.234792 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 16:01:53.234796 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 16:01:53.234798 [INFO] start to build docker image
2024/02/02 16:01:53.234814 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 16:01:53.531250 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 16:01:53.531278 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 16:01:53.531283 [INFO] successfully build docker image
2024/02/02 16:01:53.531291 [INFO] save staging docker image id
2024/02/02 16:01:53.531313 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 16:01:53.568881 [INFO] c176d18fbf65

2024/02/02 16:01:53.569048 [INFO] Executing instruction: configure X-Ray
2024/02/02 16:01:53.569055 [INFO] X-Ray is not enabled.
2024/02/02 16:01:53.569059 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 16:01:53.575702 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 16:01:53.577262 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 16:01:53.594591 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 16:01:53.594634 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 16:01:53.613936 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 16:01:53.626674 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 16:01:53.648254 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 16:01:53.716304 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 16:01:54.047019 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 16:01:54.047184 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 16:01:54.346580 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 16:01:54.358784 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 16:01:54.618954 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 16:01:54.627896 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 16:01:54.637316 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 16:01:54.940714 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 16:01:54.955908 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 16:01:55.379988 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 16:01:55.380035 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 16:01:55.401352 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 16:01:55.410008 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 16:01:55.490273 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 16:01:55.491213 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 16:01:55.492361 [INFO] Executing instruction: configure log streaming
2024/02/02 16:01:55.492374 [INFO] log streaming is not enabled
2024/02/02 16:01:55.492378 [INFO] disable log stream
2024/02/02 16:01:55.492392 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 16:01:55.515187 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 16:01:55.536999 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 16:01:55.537023 [INFO] Checking if logs need forced rotation
2024/02/02 16:01:55.537043 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 16:01:56.135411 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 16:01:56.613923 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 16:01:56.615541 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 16:01:57.151437 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 16:01:57.172141 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 16:01:57.172158 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 16:01:57.172170 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 16:01:57.588397 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 16:01:57.588419 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 16:01:57.588440 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 16:01:57.588444 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 16:01:57.588464 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 16:01:57.588479 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 16:01:57.588481 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 16:01:57.588486 [INFO] Executing instruction: stop X-Ray
2024/02/02 16:01:57.588489 [INFO] stop X-Ray ...
2024/02/02 16:01:57.588499 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 16:01:57.606615 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 16:01:57.606647 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 16:01:57.623670 [INFO] Executing instruction: Run Docker Container
2024/02/02 16:01:57.623701 [INFO] stop currently running containers...
2024/02/02 16:01:57.623718 [INFO] detected old app is not docker compose app
2024/02/02 16:01:57.623732 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 16:01:57.672453 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 16:01:57.702738 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 16:01:57.702774 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 16:01:57.732306 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 16:01:57.732332 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 16:01:57.747895 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 16:01:57.747943 [INFO] stopping current container: c69778a7e5ad
2024/02/02 16:01:57.747953 [INFO] Running command /bin/sh -c docker ps | grep -q c69778a7e5ad
2024/02/02 16:01:57.765737 [INFO] Running command /bin/sh -c docker ps | grep -q c69778a7e5ad
2024/02/02 16:01:57.784671 [INFO] Pruning containers ...
2024/02/02 16:01:57.784694 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 16:01:57.803399 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 16:01:57.803428 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 16:01:57.821732 [INFO] Total reclaimed space: 0B

2024/02/02 16:01:57.821757 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 16:01:57.847463 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 16:01:57.847491 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 16:01:57.877802 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 16:01:57.878333 [INFO] Removing /var/app/current/ if it exists
2024/02/02 16:01:57.879543 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 16:01:57.880888 [INFO] detected new app is not docker compose app
2024/02/02 16:01:57.881486 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 16:01:58.310268 [INFO] 35726a760976835daf10cf49e9a5b6b812bb5a934ba6baa5587054c6e28b7fe6

2024/02/02 16:02:03.311454 [INFO] Running command /bin/sh -c docker ps | grep -q 35726a760976
2024/02/02 16:02:03.350628 [ERROR] docker container quit unexpectedly on 2024-02-02 16:02:03.350540097 +0000 UTC: Command /bin/sh -c docker ps | grep -q 35726a760976 failed with error exit status 1
2024/02/02 16:02:03.350880 [INFO] Running command /bin/sh -c docker logs 35726a760976
2024/02/02 16:02:03.383708 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 35726a760976: Command /bin/sh -c docker ps | grep -q 35726a760976 failed with error exit status 1 

2024/02/02 16:02:03.383720 [INFO] Executing cleanup logic
2024/02/02 16:02:03.384115 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 17:02:04.545785 [INFO] Starting...
2024/02/02 17:02:04.545828 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 17:02:04.545854 [INFO] reading event message file
2024/02/02 17:02:04.546647 [INFO] Engine received EB command userdata-exec

2024/02/02 17:02:04.551768 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 17:02:04.949834 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 17:02:05.435099 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 17:02:05.435208 [INFO] Engine command: (self-startup)

2024/02/02 17:02:05.435230 [INFO] Downloading EB Application...
2024/02/02 17:02:05.435235 [INFO] Region: eu-west-1
2024/02/02 17:02:05.435238 [INFO] envID: e-8gmkc7rmw6
2024/02/02 17:02:05.435240 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 17:02:05.435243 [INFO] Using manifest file name from command request
2024/02/02 17:02:05.435260 [INFO] Unable to get version manifest file.
2024/02/02 17:02:05.435262 [INFO] Downloading latest manifest available.
2024/02/02 17:02:05.435264 [INFO] Download latest app version manifest
2024/02/02 17:02:05.435420 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 17:02:05.479385 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 17:02:05.479565 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 17:02:05.491927 [INFO] Download successful124bytes downloaded
2024/02/02 17:02:05.492082 [INFO] Trying to read and parse version manifest...
2024/02/02 17:02:05.492158 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 17:02:05.515037 [INFO] Download successful264bytes downloaded
2024/02/02 17:02:05.515402 [INFO] Executing instruction: SyncClock
2024/02/02 17:02:05.515416 [INFO] Starting SyncClock
2024/02/02 17:02:05.515426 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 17:02:05.520680 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 17:01:36 2024
System time     : 0.000000646 seconds fast of NTP time
Last offset     : -0.000000604 seconds
RMS offset      : 0.000002272 seconds
Frequency       : 0.208 ppm slow
Residual freq   : -0.000 ppm
Skew            : 0.049 ppm
Root delay      : 0.000424337 seconds
Root dispersion : 0.000454223 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/02 17:02:05.520700 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 17:02:05.525180 [INFO] 200 OK

2024/02/02 17:02:05.525277 [INFO] Skipping Configure OS
2024/02/02 17:02:05.525281 [INFO] Skipping LockRepo
2024/02/02 17:02:05.525286 [INFO] Skipping GenerateEBBanner
2024/02/02 17:02:05.525299 [INFO] Skipping Install Process Manager
2024/02/02 17:02:05.525303 [INFO] Skipping install syslog
2024/02/02 17:02:05.525307 [INFO] Skipping install cron
2024/02/02 17:02:05.525310 [INFO] Skipping install proxy
2024/02/02 17:02:05.525315 [INFO] Skipping installhealthd
2024/02/02 17:02:05.525319 [INFO] Skipping Install Log Streaming Manager
2024/02/02 17:02:05.525323 [INFO] Skipping install X-Ray
2024/02/02 17:02:05.525330 [INFO] Skipping install Third Party License
2024/02/02 17:02:05.525335 [INFO] Skipping installSqsd
2024/02/02 17:02:05.525339 [INFO] Skipping bootstraphealthd
2024/02/02 17:02:05.525342 [INFO] Skipping Install yum packages
2024/02/02 17:02:05.525346 [INFO] Skipping install docker-compose
2024/02/02 17:02:05.525350 [INFO] Skipping Configure Docker Daemon
2024/02/02 17:02:05.525354 [INFO] Skipping MarkBaked
2024/02/02 17:02:05.525357 [INFO] Skipping TuneSystemSettings
2024/02/02 17:02:05.525360 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 17:02:05.525362 [INFO] Initialize LogRotate files and directories
2024/02/02 17:02:05.549030 [INFO] Skipping BootstrapCFNHup
2024/02/02 17:02:05.549041 [INFO] Executing instruction: StartCFNHup
2024/02/02 17:02:05.549044 [INFO] Start cfn-hup
2024/02/02 17:02:05.549065 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 17:02:05.563792 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 17:02:05.572038 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 17:02:05.572183 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 17:02:05.572188 [INFO] Executing instruction: Start Docker
2024/02/02 17:02:05.572192 [INFO] Starting Docker...
2024/02/02 17:02:05.572262 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 17:02:05.573693 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 17:02:05.575112 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 17:02:05.929543 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 17:02:05.957363 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 17:02:05.957400 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 17:02:05.980144 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 17:02:05.993198 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 17:02:06.006852 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 17:02:06.106604 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 17:02:06.106662 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 17:02:06.536541 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 17:02:06.835955 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 17:02:06.848330 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 17:02:07.147514 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 17:02:07.157492 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 17:02:07.172373 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 17:02:07.181618 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 17:02:08.435182 [INFO] Skipping Setup Docker Options
2024/02/02 17:02:08.435205 [INFO] Skipping MarkBootstrapped
2024/02/02 17:02:08.435210 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 17:02:08.435351 [INFO] Starting SwitchCFNStack
2024/02/02 17:02:08.435358 [INFO] Executing instruction: stopSqsd
2024/02/02 17:02:08.435365 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 17:02:08.435368 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 17:02:08.435372 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 17:02:08.435393 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 17:02:08.966193 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 17:02:08.966221 [INFO] Executing instruction: StagedockerApplication
2024/02/02 17:02:08.966233 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 17:02:09.010319 [INFO] Pruning containers ...
2024/02/02 17:02:09.010352 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 17:02:09.038465 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
35726a760976   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             hungry_driscoll

2024/02/02 17:02:09.038497 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 17:02:09.065260 [INFO] Deleted Containers:
35726a760976835daf10cf49e9a5b6b812bb5a934ba6baa5587054c6e28b7fe6

Total reclaimed space: 0B

2024/02/02 17:02:09.065387 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 17:02:09.099604 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 17:02:09.100524 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 17:02:09.105942 [INFO] application/json

2024/02/02 17:02:09.105979 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 17:02:09.178090 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 17:02:09.178264 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 17:02:09.179427 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 17:02:09.179458 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 17:02:09.179474 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 17:02:09.179477 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 17:02:09.179481 [INFO] Executing instruction: Generate environment file
2024/02/02 17:02:09.179510 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 17:02:09.179513 [INFO] start build docker app
2024/02/02 17:02:09.179887 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 17:02:09.179890 [INFO] fetching image and ports
2024/02/02 17:02:09.181664 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 17:02:09.181730 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 17:02:09.181739 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 17:02:09.181755 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 17:02:10.162134 [INFO] Login Succeeded

2024/02/02 17:02:10.162152 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 17:02:10.162157 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 17:02:10.162173 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 17:02:10.353461 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 17:02:10.353492 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 17:02:10.353497 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 17:02:10.353500 [INFO] start to build docker image
2024/02/02 17:02:10.353520 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 17:02:10.671682 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 17:02:10.671703 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 17:02:10.671706 [INFO] successfully build docker image
2024/02/02 17:02:10.671708 [INFO] save staging docker image id
2024/02/02 17:02:10.671721 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 17:02:10.691834 [INFO] c176d18fbf65

2024/02/02 17:02:10.692049 [INFO] Executing instruction: configure X-Ray
2024/02/02 17:02:10.692060 [INFO] X-Ray is not enabled.
2024/02/02 17:02:10.692066 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 17:02:10.697999 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 17:02:10.699625 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 17:02:10.714841 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 17:02:10.714875 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 17:02:10.734717 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 17:02:10.756443 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 17:02:10.772201 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 17:02:10.849714 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 17:02:11.254660 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 17:02:11.254880 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 17:02:11.650412 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 17:02:11.661866 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 17:02:11.958848 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 17:02:11.967897 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 17:02:11.980506 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 17:02:12.322363 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 17:02:12.333183 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 17:02:12.638938 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 17:02:12.638979 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 17:02:12.655419 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 17:02:12.666754 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 17:02:12.741446 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 17:02:12.742592 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 17:02:12.743556 [INFO] Executing instruction: configure log streaming
2024/02/02 17:02:12.743568 [INFO] log streaming is not enabled
2024/02/02 17:02:12.743571 [INFO] disable log stream
2024/02/02 17:02:12.743587 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 17:02:12.771713 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 17:02:12.792935 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 17:02:12.792959 [INFO] Checking if logs need forced rotation
2024/02/02 17:02:12.792979 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 17:02:13.367631 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 17:02:13.856685 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 17:02:13.858410 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 17:02:13.941540 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 17:02:13.959046 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 17:02:13.959064 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 17:02:13.959075 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 17:02:14.494273 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 17:02:14.494407 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 17:02:14.494443 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 17:02:14.494448 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 17:02:14.494485 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 17:02:14.494498 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 17:02:14.494500 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 17:02:14.494505 [INFO] Executing instruction: stop X-Ray
2024/02/02 17:02:14.494508 [INFO] stop X-Ray ...
2024/02/02 17:02:14.494519 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 17:02:14.549198 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 17:02:14.549232 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 17:02:14.579136 [INFO] Executing instruction: Run Docker Container
2024/02/02 17:02:14.579162 [INFO] stop currently running containers...
2024/02/02 17:02:14.579176 [INFO] detected old app is not docker compose app
2024/02/02 17:02:14.579188 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 17:02:14.622644 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 17:02:14.638411 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 17:02:14.638445 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 17:02:14.654429 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 17:02:14.654590 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 17:02:14.674238 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 17:02:14.674297 [INFO] stopping current container: 35726a760976
2024/02/02 17:02:14.674311 [INFO] Running command /bin/sh -c docker ps | grep -q 35726a760976
2024/02/02 17:02:14.696553 [INFO] Running command /bin/sh -c docker ps | grep -q 35726a760976
2024/02/02 17:02:14.725716 [INFO] Pruning containers ...
2024/02/02 17:02:14.725743 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 17:02:14.745315 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 17:02:14.745343 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 17:02:14.765858 [INFO] Total reclaimed space: 0B

2024/02/02 17:02:14.765884 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 17:02:14.784762 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 17:02:14.784794 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 17:02:14.806319 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 17:02:14.806339 [INFO] Removing /var/app/current/ if it exists
2024/02/02 17:02:14.806427 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 17:02:14.806443 [INFO] detected new app is not docker compose app
2024/02/02 17:02:14.806495 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 17:02:15.236630 [INFO] 016e14b641be05bc55bb0d227e4b30a077ef925da4ff5036f0e3b1ceae0ffd14

2024/02/02 17:02:20.237384 [INFO] Running command /bin/sh -c docker ps | grep -q 016e14b641be
2024/02/02 17:02:20.261089 [ERROR] docker container quit unexpectedly on 2024-02-02 17:02:20.261078659 +0000 UTC: Command /bin/sh -c docker ps | grep -q 016e14b641be failed with error exit status 1
2024/02/02 17:02:20.261116 [INFO] Running command /bin/sh -c docker logs 016e14b641be
2024/02/02 17:02:20.287342 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 016e14b641be: Command /bin/sh -c docker ps | grep -q 016e14b641be failed with error exit status 1 

2024/02/02 17:02:20.287352 [INFO] Executing cleanup logic
2024/02/02 17:02:20.287618 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 18:02:21.311707 [INFO] Starting...
2024/02/02 18:02:21.311749 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 18:02:21.311778 [INFO] reading event message file
2024/02/02 18:02:21.312710 [INFO] Engine received EB command userdata-exec

2024/02/02 18:02:21.320333 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 18:02:21.717954 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 18:02:22.208345 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 18:02:22.208438 [INFO] Engine command: (self-startup)

2024/02/02 18:02:22.208446 [INFO] Downloading EB Application...
2024/02/02 18:02:22.208449 [INFO] Region: eu-west-1
2024/02/02 18:02:22.208453 [INFO] envID: e-8gmkc7rmw6
2024/02/02 18:02:22.208456 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 18:02:22.208469 [INFO] Using manifest file name from command request
2024/02/02 18:02:22.208481 [INFO] Unable to get version manifest file.
2024/02/02 18:02:22.208495 [INFO] Downloading latest manifest available.
2024/02/02 18:02:22.208498 [INFO] Download latest app version manifest
2024/02/02 18:02:22.208617 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 18:02:22.253439 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 18:02:22.253653 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 18:02:22.268709 [INFO] Download successful124bytes downloaded
2024/02/02 18:02:22.268881 [INFO] Trying to read and parse version manifest...
2024/02/02 18:02:22.268963 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 18:02:22.285653 [INFO] Download successful264bytes downloaded
2024/02/02 18:02:22.286516 [INFO] Executing instruction: SyncClock
2024/02/02 18:02:22.286523 [INFO] Starting SyncClock
2024/02/02 18:02:22.286532 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 18:02:22.292170 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 18:02:17 2024
System time     : 0.000000611 seconds fast of NTP time
Last offset     : -0.000000510 seconds
RMS offset      : 0.000001993 seconds
Frequency       : 0.213 ppm slow
Residual freq   : -0.000 ppm
Skew            : 0.052 ppm
Root delay      : 0.000427741 seconds
Root dispersion : 0.000385691 seconds
Update interval : 32.4 seconds
Leap status     : Normal

2024/02/02 18:02:22.292193 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 18:02:22.297570 [INFO] 200 OK

2024/02/02 18:02:22.297667 [INFO] Skipping Configure OS
2024/02/02 18:02:22.297672 [INFO] Skipping LockRepo
2024/02/02 18:02:22.297676 [INFO] Skipping GenerateEBBanner
2024/02/02 18:02:22.297681 [INFO] Skipping Install Process Manager
2024/02/02 18:02:22.297684 [INFO] Skipping install syslog
2024/02/02 18:02:22.297688 [INFO] Skipping install cron
2024/02/02 18:02:22.297692 [INFO] Skipping install proxy
2024/02/02 18:02:22.297696 [INFO] Skipping installhealthd
2024/02/02 18:02:22.297700 [INFO] Skipping Install Log Streaming Manager
2024/02/02 18:02:22.297703 [INFO] Skipping install X-Ray
2024/02/02 18:02:22.297707 [INFO] Skipping install Third Party License
2024/02/02 18:02:22.297712 [INFO] Skipping installSqsd
2024/02/02 18:02:22.297716 [INFO] Skipping bootstraphealthd
2024/02/02 18:02:22.297719 [INFO] Skipping Install yum packages
2024/02/02 18:02:22.297723 [INFO] Skipping install docker-compose
2024/02/02 18:02:22.297727 [INFO] Skipping Configure Docker Daemon
2024/02/02 18:02:22.297730 [INFO] Skipping MarkBaked
2024/02/02 18:02:22.297737 [INFO] Skipping TuneSystemSettings
2024/02/02 18:02:22.297739 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 18:02:22.297741 [INFO] Initialize LogRotate files and directories
2024/02/02 18:02:22.312982 [INFO] Skipping BootstrapCFNHup
2024/02/02 18:02:22.312999 [INFO] Executing instruction: StartCFNHup
2024/02/02 18:02:22.313003 [INFO] Start cfn-hup
2024/02/02 18:02:22.313023 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 18:02:22.328619 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 18:02:22.338370 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 18:02:22.338404 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 18:02:22.338408 [INFO] Executing instruction: Start Docker
2024/02/02 18:02:22.338411 [INFO] Starting Docker...
2024/02/02 18:02:22.338511 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 18:02:22.339590 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 18:02:22.340597 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 18:02:22.661110 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 18:02:22.677838 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 18:02:22.677874 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 18:02:22.690100 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 18:02:22.698522 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 18:02:22.709215 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 18:02:22.796517 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 18:02:22.796578 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 18:02:23.163107 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 18:02:23.510278 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 18:02:23.523601 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 18:02:23.860103 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 18:02:23.878440 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 18:02:23.895621 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 18:02:23.905605 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 18:02:25.173500 [INFO] Skipping Setup Docker Options
2024/02/02 18:02:25.173527 [INFO] Skipping MarkBootstrapped
2024/02/02 18:02:25.173531 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 18:02:25.179351 [INFO] Starting SwitchCFNStack
2024/02/02 18:02:25.179372 [INFO] Executing instruction: stopSqsd
2024/02/02 18:02:25.179376 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 18:02:25.179380 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 18:02:25.179384 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 18:02:25.179413 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 18:02:25.619050 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 18:02:25.619129 [INFO] Executing instruction: StagedockerApplication
2024/02/02 18:02:25.619142 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 18:02:25.639898 [INFO] Pruning containers ...
2024/02/02 18:02:25.639928 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 18:02:25.661027 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
016e14b641be   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             exciting_jemison

2024/02/02 18:02:25.661055 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 18:02:25.694694 [INFO] Deleted Containers:
016e14b641be05bc55bb0d227e4b30a077ef925da4ff5036f0e3b1ceae0ffd14

Total reclaimed space: 0B

2024/02/02 18:02:25.695171 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 18:02:25.716237 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 18:02:25.716467 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 18:02:25.719645 [INFO] application/json

2024/02/02 18:02:25.719664 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 18:02:25.831347 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 18:02:25.831625 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 18:02:25.832873 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 18:02:25.832898 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 18:02:25.832921 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 18:02:25.832924 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 18:02:25.832928 [INFO] Executing instruction: Generate environment file
2024/02/02 18:02:25.832954 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 18:02:25.832957 [INFO] start build docker app
2024/02/02 18:02:25.833351 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 18:02:25.833358 [INFO] fetching image and ports
2024/02/02 18:02:25.835771 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 18:02:25.835819 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 18:02:25.835830 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 18:02:25.835842 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 18:02:26.782551 [INFO] Login Succeeded

2024/02/02 18:02:26.782568 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 18:02:26.782574 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 18:02:26.782591 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 18:02:26.926383 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 18:02:26.926537 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 18:02:26.926546 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 18:02:26.926551 [INFO] start to build docker image
2024/02/02 18:02:26.926605 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 18:02:27.194266 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 18:02:27.194289 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 18:02:27.194293 [INFO] successfully build docker image
2024/02/02 18:02:27.194295 [INFO] save staging docker image id
2024/02/02 18:02:27.194306 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 18:02:27.221596 [INFO] c176d18fbf65

2024/02/02 18:02:27.222068 [INFO] Executing instruction: configure X-Ray
2024/02/02 18:02:27.222076 [INFO] X-Ray is not enabled.
2024/02/02 18:02:27.222083 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 18:02:27.227156 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 18:02:27.229206 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 18:02:27.242010 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 18:02:27.242036 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 18:02:27.256010 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 18:02:27.266778 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 18:02:27.278631 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 18:02:27.343517 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 18:02:27.728520 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 18:02:27.728608 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 18:02:28.052603 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 18:02:28.063248 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 18:02:28.370738 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 18:02:28.386387 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 18:02:28.396529 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 18:02:28.691046 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 18:02:28.701543 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 18:02:28.979648 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 18:02:28.979694 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 18:02:28.997629 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 18:02:29.013737 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 18:02:29.113933 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 18:02:29.116228 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 18:02:29.117438 [INFO] Executing instruction: configure log streaming
2024/02/02 18:02:29.117450 [INFO] log streaming is not enabled
2024/02/02 18:02:29.117453 [INFO] disable log stream
2024/02/02 18:02:29.117473 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 18:02:29.141745 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 18:02:29.164051 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 18:02:29.164077 [INFO] Checking if logs need forced rotation
2024/02/02 18:02:29.164201 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 18:02:29.758709 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 18:02:30.241535 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 18:02:30.243789 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 18:02:30.288936 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 18:02:30.316477 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 18:02:30.316496 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 18:02:30.316509 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 18:02:30.910021 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 18:02:30.911419 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 18:02:30.911458 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 18:02:30.911461 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 18:02:30.911486 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 18:02:30.911718 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 18:02:30.911726 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 18:02:30.911735 [INFO] Executing instruction: stop X-Ray
2024/02/02 18:02:30.911739 [INFO] stop X-Ray ...
2024/02/02 18:02:30.912144 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 18:02:30.942756 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 18:02:30.942783 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 18:02:30.980546 [INFO] Executing instruction: Run Docker Container
2024/02/02 18:02:30.980634 [INFO] stop currently running containers...
2024/02/02 18:02:30.980648 [INFO] detected old app is not docker compose app
2024/02/02 18:02:30.980663 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 18:02:31.022391 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 18:02:31.039837 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 18:02:31.039895 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 18:02:31.056139 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 18:02:31.056180 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 18:02:31.071819 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 18:02:31.071870 [INFO] stopping current container: 016e14b641be
2024/02/02 18:02:31.071884 [INFO] Running command /bin/sh -c docker ps | grep -q 016e14b641be
2024/02/02 18:02:31.094709 [INFO] Running command /bin/sh -c docker ps | grep -q 016e14b641be
2024/02/02 18:02:31.118355 [INFO] Pruning containers ...
2024/02/02 18:02:31.118384 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 18:02:31.139377 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 18:02:31.139406 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 18:02:31.162815 [INFO] Total reclaimed space: 0B

2024/02/02 18:02:31.162841 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 18:02:31.184834 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 18:02:31.184877 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 18:02:31.210112 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 18:02:31.210222 [INFO] Removing /var/app/current/ if it exists
2024/02/02 18:02:31.210320 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 18:02:31.210338 [INFO] detected new app is not docker compose app
2024/02/02 18:02:31.210387 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 18:02:31.596542 [INFO] 106db3bd26845b157300043187f6671e8b7b3010a2d891b0a2b43fc6dcc6aa64

2024/02/02 18:02:36.600868 [INFO] Running command /bin/sh -c docker ps | grep -q 106db3bd2684
2024/02/02 18:02:36.622098 [ERROR] docker container quit unexpectedly on 2024-02-02 18:02:36.622080886 +0000 UTC: Command /bin/sh -c docker ps | grep -q 106db3bd2684 failed with error exit status 1
2024/02/02 18:02:36.622124 [INFO] Running command /bin/sh -c docker logs 106db3bd2684
2024/02/02 18:02:36.643109 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 106db3bd2684: Command /bin/sh -c docker ps | grep -q 106db3bd2684 failed with error exit status 1 

2024/02/02 18:02:36.643119 [INFO] Executing cleanup logic
2024/02/02 18:02:36.643354 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 19:02:37.639444 [INFO] Starting...
2024/02/02 19:02:37.639488 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 19:02:37.639515 [INFO] reading event message file
2024/02/02 19:02:37.640237 [INFO] Engine received EB command userdata-exec

2024/02/02 19:02:37.645804 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 19:02:38.029607 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 19:02:38.442518 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 19:02:38.442605 [INFO] Engine command: (self-startup)

2024/02/02 19:02:38.442613 [INFO] Downloading EB Application...
2024/02/02 19:02:38.442616 [INFO] Region: eu-west-1
2024/02/02 19:02:38.442620 [INFO] envID: e-8gmkc7rmw6
2024/02/02 19:02:38.442623 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 19:02:38.442627 [INFO] Using manifest file name from command request
2024/02/02 19:02:38.442642 [INFO] Unable to get version manifest file.
2024/02/02 19:02:38.442645 [INFO] Downloading latest manifest available.
2024/02/02 19:02:38.442647 [INFO] Download latest app version manifest
2024/02/02 19:02:38.442787 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 19:02:38.488050 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 19:02:38.488225 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 19:02:38.503397 [INFO] Download successful124bytes downloaded
2024/02/02 19:02:38.503567 [INFO] Trying to read and parse version manifest...
2024/02/02 19:02:38.503641 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 19:02:38.525377 [INFO] Download successful264bytes downloaded
2024/02/02 19:02:38.525743 [INFO] Executing instruction: SyncClock
2024/02/02 19:02:38.525749 [INFO] Starting SyncClock
2024/02/02 19:02:38.525759 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 19:02:38.532694 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 19:02:25 2024
System time     : 0.000001802 seconds slow of NTP time
Last offset     : -0.000002634 seconds
RMS offset      : 0.000002501 seconds
Frequency       : 0.156 ppm slow
Residual freq   : -0.002 ppm
Skew            : 0.049 ppm
Root delay      : 0.000436413 seconds
Root dispersion : 0.000378059 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/02 19:02:38.532718 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 19:02:38.536859 [INFO] 200 OK

2024/02/02 19:02:38.536953 [INFO] Skipping Configure OS
2024/02/02 19:02:38.536958 [INFO] Skipping LockRepo
2024/02/02 19:02:38.536962 [INFO] Skipping GenerateEBBanner
2024/02/02 19:02:38.536966 [INFO] Skipping Install Process Manager
2024/02/02 19:02:38.536970 [INFO] Skipping install syslog
2024/02/02 19:02:38.536974 [INFO] Skipping install cron
2024/02/02 19:02:38.536978 [INFO] Skipping install proxy
2024/02/02 19:02:38.536982 [INFO] Skipping installhealthd
2024/02/02 19:02:38.536985 [INFO] Skipping Install Log Streaming Manager
2024/02/02 19:02:38.536989 [INFO] Skipping install X-Ray
2024/02/02 19:02:38.536993 [INFO] Skipping install Third Party License
2024/02/02 19:02:38.536998 [INFO] Skipping installSqsd
2024/02/02 19:02:38.537001 [INFO] Skipping bootstraphealthd
2024/02/02 19:02:38.537005 [INFO] Skipping Install yum packages
2024/02/02 19:02:38.537009 [INFO] Skipping install docker-compose
2024/02/02 19:02:38.537013 [INFO] Skipping Configure Docker Daemon
2024/02/02 19:02:38.537016 [INFO] Skipping MarkBaked
2024/02/02 19:02:38.537020 [INFO] Skipping TuneSystemSettings
2024/02/02 19:02:38.537023 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 19:02:38.537025 [INFO] Initialize LogRotate files and directories
2024/02/02 19:02:38.551053 [INFO] Skipping BootstrapCFNHup
2024/02/02 19:02:38.551060 [INFO] Executing instruction: StartCFNHup
2024/02/02 19:02:38.551063 [INFO] Start cfn-hup
2024/02/02 19:02:38.551079 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 19:02:38.564286 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 19:02:38.575445 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 19:02:38.575480 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 19:02:38.575484 [INFO] Executing instruction: Start Docker
2024/02/02 19:02:38.575487 [INFO] Starting Docker...
2024/02/02 19:02:38.575575 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 19:02:38.576616 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 19:02:38.577634 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 19:02:38.881128 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 19:02:38.899694 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 19:02:38.899729 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 19:02:38.918065 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 19:02:38.928557 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 19:02:38.939720 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 19:02:39.015388 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 19:02:39.015435 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 19:02:39.375159 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 19:02:39.704446 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 19:02:39.720179 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 19:02:40.043883 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 19:02:40.055304 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 19:02:40.070448 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 19:02:40.080765 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 19:02:41.211679 [INFO] Skipping Setup Docker Options
2024/02/02 19:02:41.211702 [INFO] Skipping MarkBootstrapped
2024/02/02 19:02:41.211706 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 19:02:41.212037 [INFO] Starting SwitchCFNStack
2024/02/02 19:02:41.212048 [INFO] Executing instruction: stopSqsd
2024/02/02 19:02:41.212051 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 19:02:41.212055 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 19:02:41.212065 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 19:02:41.212084 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 19:02:41.750923 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 19:02:41.750947 [INFO] Executing instruction: StagedockerApplication
2024/02/02 19:02:41.750959 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 19:02:41.778769 [INFO] Pruning containers ...
2024/02/02 19:02:41.778797 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 19:02:41.802390 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
106db3bd2684   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             jolly_spence

2024/02/02 19:02:41.802433 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 19:02:41.833360 [INFO] Deleted Containers:
106db3bd26845b157300043187f6671e8b7b3010a2d891b0a2b43fc6dcc6aa64

Total reclaimed space: 0B

2024/02/02 19:02:41.833389 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 19:02:41.858539 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 19:02:41.858790 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 19:02:41.863114 [INFO] application/json

2024/02/02 19:02:41.863152 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 19:02:41.986401 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 19:02:41.986716 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 19:02:41.988208 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 19:02:41.988233 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 19:02:41.988255 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 19:02:41.988257 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 19:02:41.988262 [INFO] Executing instruction: Generate environment file
2024/02/02 19:02:41.988287 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 19:02:41.988291 [INFO] start build docker app
2024/02/02 19:02:41.988769 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 19:02:41.988774 [INFO] fetching image and ports
2024/02/02 19:02:41.990969 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 19:02:41.991040 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 19:02:41.991048 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 19:02:41.991064 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 19:02:43.212597 [INFO] Login Succeeded

2024/02/02 19:02:43.212616 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 19:02:43.212627 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 19:02:43.212657 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 19:02:43.362330 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 19:02:43.362352 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 19:02:43.362357 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 19:02:43.362362 [INFO] start to build docker image
2024/02/02 19:02:43.362378 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 19:02:43.658901 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 19:02:43.658925 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 19:02:43.658930 [INFO] successfully build docker image
2024/02/02 19:02:43.658932 [INFO] save staging docker image id
2024/02/02 19:02:43.658947 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 19:02:43.703055 [INFO] c176d18fbf65

2024/02/02 19:02:43.704130 [INFO] Executing instruction: configure X-Ray
2024/02/02 19:02:43.704218 [INFO] X-Ray is not enabled.
2024/02/02 19:02:43.704298 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 19:02:43.712837 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 19:02:43.714745 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 19:02:43.739027 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 19:02:43.739054 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 19:02:43.755094 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 19:02:43.770387 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 19:02:43.780576 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 19:02:43.837798 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 19:02:44.213564 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 19:02:44.213650 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 19:02:44.542807 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 19:02:44.554319 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 19:02:44.888313 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 19:02:44.897307 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 19:02:44.906028 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 19:02:45.252310 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 19:02:45.262365 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 19:02:45.555855 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 19:02:45.555887 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 19:02:45.577079 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 19:02:45.586401 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 19:02:45.675137 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 19:02:45.676157 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 19:02:45.677152 [INFO] Executing instruction: configure log streaming
2024/02/02 19:02:45.677162 [INFO] log streaming is not enabled
2024/02/02 19:02:45.677170 [INFO] disable log stream
2024/02/02 19:02:45.677184 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 19:02:45.699602 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 19:02:45.722604 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 19:02:45.722639 [INFO] Checking if logs need forced rotation
2024/02/02 19:02:45.722659 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 19:02:46.298122 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 19:02:46.739861 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 19:02:46.741788 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 19:02:46.839573 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 19:02:46.860088 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 19:02:46.860106 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 19:02:46.860128 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 19:02:47.342915 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 19:02:47.342937 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 19:02:47.342960 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 19:02:47.342963 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 19:02:47.342983 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 19:02:47.342994 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 19:02:47.342997 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 19:02:47.343001 [INFO] Executing instruction: stop X-Ray
2024/02/02 19:02:47.343004 [INFO] stop X-Ray ...
2024/02/02 19:02:47.343014 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 19:02:47.361496 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 19:02:47.361537 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 19:02:47.382888 [INFO] Executing instruction: Run Docker Container
2024/02/02 19:02:47.382921 [INFO] stop currently running containers...
2024/02/02 19:02:47.382932 [INFO] detected old app is not docker compose app
2024/02/02 19:02:47.382949 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 19:02:47.432756 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 19:02:47.449744 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 19:02:47.449772 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 19:02:47.467320 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 19:02:47.467390 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 19:02:47.482502 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 19:02:47.482555 [INFO] stopping current container: 106db3bd2684
2024/02/02 19:02:47.482569 [INFO] Running command /bin/sh -c docker ps | grep -q 106db3bd2684
2024/02/02 19:02:47.503556 [INFO] Running command /bin/sh -c docker ps | grep -q 106db3bd2684
2024/02/02 19:02:47.523299 [INFO] Pruning containers ...
2024/02/02 19:02:47.523323 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 19:02:47.542982 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 19:02:47.543015 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 19:02:47.576631 [INFO] Total reclaimed space: 0B

2024/02/02 19:02:47.576658 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 19:02:47.602990 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 19:02:47.603019 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 19:02:47.621937 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 19:02:47.621958 [INFO] Removing /var/app/current/ if it exists
2024/02/02 19:02:47.622118 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 19:02:47.622136 [INFO] detected new app is not docker compose app
2024/02/02 19:02:47.622195 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 19:02:48.041243 [INFO] fc353b1894cf9ac93472e0a0855e1232179b464173f2fa19096edc6a69e1cef7

2024/02/02 19:02:53.046062 [INFO] Running command /bin/sh -c docker ps | grep -q fc353b1894cf
2024/02/02 19:02:53.074215 [ERROR] docker container quit unexpectedly on 2024-02-02 19:02:53.074194036 +0000 UTC: Command /bin/sh -c docker ps | grep -q fc353b1894cf failed with error exit status 1
2024/02/02 19:02:53.074246 [INFO] Running command /bin/sh -c docker logs fc353b1894cf
2024/02/02 19:02:53.097674 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container fc353b1894cf: Command /bin/sh -c docker ps | grep -q fc353b1894cf failed with error exit status 1 

2024/02/02 19:02:53.097688 [INFO] Executing cleanup logic
2024/02/02 19:02:53.097909 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 20:02:54.064167 [INFO] Starting...
2024/02/02 20:02:54.064210 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 20:02:54.064237 [INFO] reading event message file
2024/02/02 20:02:54.064977 [INFO] Engine received EB command userdata-exec

2024/02/02 20:02:54.070421 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 20:02:54.461124 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 20:02:54.973489 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 20:02:54.973553 [INFO] Engine command: (self-startup)

2024/02/02 20:02:54.973560 [INFO] Downloading EB Application...
2024/02/02 20:02:54.973565 [INFO] Region: eu-west-1
2024/02/02 20:02:54.973579 [INFO] envID: e-8gmkc7rmw6
2024/02/02 20:02:54.973583 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 20:02:54.973586 [INFO] Using manifest file name from command request
2024/02/02 20:02:54.973600 [INFO] Unable to get version manifest file.
2024/02/02 20:02:54.973606 [INFO] Downloading latest manifest available.
2024/02/02 20:02:54.973608 [INFO] Download latest app version manifest
2024/02/02 20:02:54.973725 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 20:02:55.018633 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 20:02:55.018819 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 20:02:55.031698 [INFO] Download successful124bytes downloaded
2024/02/02 20:02:55.031843 [INFO] Trying to read and parse version manifest...
2024/02/02 20:02:55.031918 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 20:02:55.063521 [INFO] Download successful264bytes downloaded
2024/02/02 20:02:55.063866 [INFO] Executing instruction: SyncClock
2024/02/02 20:02:55.063872 [INFO] Starting SyncClock
2024/02/02 20:02:55.063886 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 20:02:55.069071 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 20:02:49 2024
System time     : 0.000001916 seconds fast of NTP time
Last offset     : +0.000001083 seconds
RMS offset      : 0.000003831 seconds
Frequency       : 0.273 ppm slow
Residual freq   : +0.001 ppm
Skew            : 0.051 ppm
Root delay      : 0.000441649 seconds
Root dispersion : 0.000337521 seconds
Update interval : 32.3 seconds
Leap status     : Normal

2024/02/02 20:02:55.069090 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 20:02:55.074221 [INFO] 200 OK

2024/02/02 20:02:55.074319 [INFO] Skipping Configure OS
2024/02/02 20:02:55.074324 [INFO] Skipping LockRepo
2024/02/02 20:02:55.074328 [INFO] Skipping GenerateEBBanner
2024/02/02 20:02:55.074333 [INFO] Skipping Install Process Manager
2024/02/02 20:02:55.074337 [INFO] Skipping install syslog
2024/02/02 20:02:55.074346 [INFO] Skipping install cron
2024/02/02 20:02:55.074349 [INFO] Skipping install proxy
2024/02/02 20:02:55.074353 [INFO] Skipping installhealthd
2024/02/02 20:02:55.074357 [INFO] Skipping Install Log Streaming Manager
2024/02/02 20:02:55.074361 [INFO] Skipping install X-Ray
2024/02/02 20:02:55.074365 [INFO] Skipping install Third Party License
2024/02/02 20:02:55.074371 [INFO] Skipping installSqsd
2024/02/02 20:02:55.074376 [INFO] Skipping bootstraphealthd
2024/02/02 20:02:55.074380 [INFO] Skipping Install yum packages
2024/02/02 20:02:55.074384 [INFO] Skipping install docker-compose
2024/02/02 20:02:55.074388 [INFO] Skipping Configure Docker Daemon
2024/02/02 20:02:55.074392 [INFO] Skipping MarkBaked
2024/02/02 20:02:55.074396 [INFO] Skipping TuneSystemSettings
2024/02/02 20:02:55.074399 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 20:02:55.074401 [INFO] Initialize LogRotate files and directories
2024/02/02 20:02:55.089560 [INFO] Skipping BootstrapCFNHup
2024/02/02 20:02:55.089574 [INFO] Executing instruction: StartCFNHup
2024/02/02 20:02:55.089578 [INFO] Start cfn-hup
2024/02/02 20:02:55.089598 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 20:02:55.102716 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 20:02:55.118975 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 20:02:55.119013 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 20:02:55.119016 [INFO] Executing instruction: Start Docker
2024/02/02 20:02:55.119020 [INFO] Starting Docker...
2024/02/02 20:02:55.119103 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 20:02:55.121666 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 20:02:55.122762 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 20:02:55.381748 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 20:02:55.397953 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 20:02:55.397983 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 20:02:55.410309 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 20:02:55.420982 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 20:02:55.438272 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 20:02:55.483930 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 20:02:55.483964 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 20:02:55.817921 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 20:02:56.110433 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 20:02:56.121455 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 20:02:56.453620 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 20:02:56.465472 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 20:02:56.477423 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 20:02:56.487276 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 20:02:57.797451 [INFO] Skipping Setup Docker Options
2024/02/02 20:02:57.797481 [INFO] Skipping MarkBootstrapped
2024/02/02 20:02:57.797485 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 20:02:57.797620 [INFO] Starting SwitchCFNStack
2024/02/02 20:02:57.797636 [INFO] Executing instruction: stopSqsd
2024/02/02 20:02:57.797640 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 20:02:57.797647 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 20:02:57.797651 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 20:02:57.797674 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 20:02:58.275919 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 20:02:58.276036 [INFO] Executing instruction: StagedockerApplication
2024/02/02 20:02:58.276049 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 20:02:58.312323 [INFO] Pruning containers ...
2024/02/02 20:02:58.312367 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 20:02:58.358012 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
fc353b1894cf   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             modest_brown

2024/02/02 20:02:58.358047 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 20:02:58.388442 [INFO] Deleted Containers:
fc353b1894cf9ac93472e0a0855e1232179b464173f2fa19096edc6a69e1cef7

Total reclaimed space: 0B

2024/02/02 20:02:58.388465 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 20:02:58.415366 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 20:02:58.415824 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 20:02:58.418959 [INFO] application/json

2024/02/02 20:02:58.418985 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 20:02:58.498642 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/02 20:02:58.498839 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 20:02:58.500086 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 20:02:58.500110 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 20:02:58.500128 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 20:02:58.500132 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 20:02:58.500136 [INFO] Executing instruction: Generate environment file
2024/02/02 20:02:58.500163 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 20:02:58.500167 [INFO] start build docker app
2024/02/02 20:02:58.500512 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 20:02:58.500516 [INFO] fetching image and ports
2024/02/02 20:02:58.502718 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 20:02:58.502776 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 20:02:58.502785 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 20:02:58.502804 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 20:02:59.440690 [INFO] Login Succeeded

2024/02/02 20:02:59.440708 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 20:02:59.440713 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 20:02:59.440730 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 20:02:59.578712 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 20:02:59.578734 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 20:02:59.578738 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 20:02:59.578741 [INFO] start to build docker image
2024/02/02 20:02:59.578759 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 20:02:59.887296 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 20:02:59.887329 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 20:02:59.887334 [INFO] successfully build docker image
2024/02/02 20:02:59.887337 [INFO] save staging docker image id
2024/02/02 20:02:59.887354 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 20:02:59.934567 [INFO] c176d18fbf65

2024/02/02 20:02:59.934795 [INFO] Executing instruction: configure X-Ray
2024/02/02 20:02:59.934805 [INFO] X-Ray is not enabled.
2024/02/02 20:02:59.934810 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 20:02:59.941480 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 20:02:59.944121 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 20:02:59.966341 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 20:02:59.966379 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 20:02:59.983850 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 20:02:59.997010 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 20:03:00.093484 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 20:03:00.252116 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 20:03:00.779736 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 20:03:00.779826 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 20:03:01.165260 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 20:03:01.180393 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 20:03:01.669418 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 20:03:01.679762 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 20:03:01.690142 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 20:03:02.243273 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 20:03:02.257943 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 20:03:02.631498 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 20:03:02.631534 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 20:03:02.644399 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 20:03:02.655131 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 20:03:02.781124 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 20:03:02.782710 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 20:03:02.784149 [INFO] Executing instruction: configure log streaming
2024/02/02 20:03:02.784162 [INFO] log streaming is not enabled
2024/02/02 20:03:02.784166 [INFO] disable log stream
2024/02/02 20:03:02.784182 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 20:03:02.809773 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 20:03:02.842428 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 20:03:02.842452 [INFO] Checking if logs need forced rotation
2024/02/02 20:03:02.842474 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 20:03:03.398084 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 20:03:03.871338 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 20:03:03.873908 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 20:03:04.422134 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 20:03:04.442557 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 20:03:04.442573 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 20:03:04.442584 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 20:03:04.832537 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 20:03:04.832565 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 20:03:04.832593 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 20:03:04.832596 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 20:03:04.832616 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 20:03:04.832631 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 20:03:04.832635 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 20:03:04.832641 [INFO] Executing instruction: stop X-Ray
2024/02/02 20:03:04.832644 [INFO] stop X-Ray ...
2024/02/02 20:03:04.832656 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 20:03:04.847614 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 20:03:04.847647 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 20:03:04.864208 [INFO] Executing instruction: Run Docker Container
2024/02/02 20:03:04.864239 [INFO] stop currently running containers...
2024/02/02 20:03:04.864258 [INFO] detected old app is not docker compose app
2024/02/02 20:03:04.864278 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 20:03:04.932748 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 20:03:04.948733 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 20:03:04.948767 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 20:03:04.964725 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 20:03:04.964756 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 20:03:04.978670 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 20:03:04.978721 [INFO] stopping current container: fc353b1894cf
2024/02/02 20:03:04.978733 [INFO] Running command /bin/sh -c docker ps | grep -q fc353b1894cf
2024/02/02 20:03:05.015959 [INFO] Running command /bin/sh -c docker ps | grep -q fc353b1894cf
2024/02/02 20:03:05.045444 [INFO] Pruning containers ...
2024/02/02 20:03:05.045522 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 20:03:05.070816 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 20:03:05.070848 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 20:03:05.103611 [INFO] Total reclaimed space: 0B

2024/02/02 20:03:05.103640 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 20:03:05.143522 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 20:03:05.143552 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 20:03:05.169643 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 20:03:05.169663 [INFO] Removing /var/app/current/ if it exists
2024/02/02 20:03:05.169779 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 20:03:05.169797 [INFO] detected new app is not docker compose app
2024/02/02 20:03:05.169849 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 20:03:05.584767 [INFO] 09e1182f5b8ace475c02747c0f95bc89825771f6057937fb221aa56c7c7eb110

2024/02/02 20:03:10.585093 [INFO] Running command /bin/sh -c docker ps | grep -q 09e1182f5b8a
2024/02/02 20:03:10.609549 [ERROR] docker container quit unexpectedly on 2024-02-02 20:03:10.609468291 +0000 UTC: Command /bin/sh -c docker ps | grep -q 09e1182f5b8a failed with error exit status 1
2024/02/02 20:03:10.609579 [INFO] Running command /bin/sh -c docker logs 09e1182f5b8a
2024/02/02 20:03:10.633638 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 09e1182f5b8a: Command /bin/sh -c docker ps | grep -q 09e1182f5b8a failed with error exit status 1 

2024/02/02 20:03:10.633648 [INFO] Executing cleanup logic
2024/02/02 20:03:10.633858 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 21:03:11.712664 [INFO] Starting...
2024/02/02 21:03:11.712707 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 21:03:11.712732 [INFO] reading event message file
2024/02/02 21:03:11.713413 [INFO] Engine received EB command userdata-exec

2024/02/02 21:03:11.719331 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 21:03:12.198179 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 21:03:12.689873 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 21:03:12.689950 [INFO] Engine command: (self-startup)

2024/02/02 21:03:12.689955 [INFO] Downloading EB Application...
2024/02/02 21:03:12.689957 [INFO] Region: eu-west-1
2024/02/02 21:03:12.689960 [INFO] envID: e-8gmkc7rmw6
2024/02/02 21:03:12.689962 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 21:03:12.689969 [INFO] Using manifest file name from command request
2024/02/02 21:03:12.689982 [INFO] Unable to get version manifest file.
2024/02/02 21:03:12.689984 [INFO] Downloading latest manifest available.
2024/02/02 21:03:12.689986 [INFO] Download latest app version manifest
2024/02/02 21:03:12.690107 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 21:03:12.730206 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 21:03:12.730361 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 21:03:12.743702 [INFO] Download successful124bytes downloaded
2024/02/02 21:03:12.743831 [INFO] Trying to read and parse version manifest...
2024/02/02 21:03:12.743894 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 21:03:12.766442 [INFO] Download successful264bytes downloaded
2024/02/02 21:03:12.766779 [INFO] Executing instruction: SyncClock
2024/02/02 21:03:12.766784 [INFO] Starting SyncClock
2024/02/02 21:03:12.766794 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 21:03:12.778491 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 21:02:57 2024
System time     : 0.000002110 seconds slow of NTP time
Last offset     : -0.000004055 seconds
RMS offset      : 0.000006394 seconds
Frequency       : 0.026 ppm slow
Residual freq   : -0.002 ppm
Skew            : 0.183 ppm
Root delay      : 0.000440285 seconds
Root dispersion : 0.000378840 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/02 21:03:12.778562 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 21:03:12.787378 [INFO] 200 OK

2024/02/02 21:03:12.788087 [INFO] Skipping Configure OS
2024/02/02 21:03:12.788101 [INFO] Skipping LockRepo
2024/02/02 21:03:12.788106 [INFO] Skipping GenerateEBBanner
2024/02/02 21:03:12.788111 [INFO] Skipping Install Process Manager
2024/02/02 21:03:12.788115 [INFO] Skipping install syslog
2024/02/02 21:03:12.788119 [INFO] Skipping install cron
2024/02/02 21:03:12.788123 [INFO] Skipping install proxy
2024/02/02 21:03:12.788127 [INFO] Skipping installhealthd
2024/02/02 21:03:12.788131 [INFO] Skipping Install Log Streaming Manager
2024/02/02 21:03:12.788134 [INFO] Skipping install X-Ray
2024/02/02 21:03:12.788138 [INFO] Skipping install Third Party License
2024/02/02 21:03:12.788143 [INFO] Skipping installSqsd
2024/02/02 21:03:12.788221 [INFO] Skipping bootstraphealthd
2024/02/02 21:03:12.788227 [INFO] Skipping Install yum packages
2024/02/02 21:03:12.788231 [INFO] Skipping install docker-compose
2024/02/02 21:03:12.788235 [INFO] Skipping Configure Docker Daemon
2024/02/02 21:03:12.788239 [INFO] Skipping MarkBaked
2024/02/02 21:03:12.788243 [INFO] Skipping TuneSystemSettings
2024/02/02 21:03:12.788245 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 21:03:12.788248 [INFO] Initialize LogRotate files and directories
2024/02/02 21:03:12.803672 [INFO] Skipping BootstrapCFNHup
2024/02/02 21:03:12.803759 [INFO] Executing instruction: StartCFNHup
2024/02/02 21:03:12.803764 [INFO] Start cfn-hup
2024/02/02 21:03:12.803861 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 21:03:12.838169 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 21:03:12.861614 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 21:03:12.861973 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 21:03:12.861980 [INFO] Executing instruction: Start Docker
2024/02/02 21:03:12.861983 [INFO] Starting Docker...
2024/02/02 21:03:12.862065 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 21:03:12.863295 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 21:03:12.864635 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 21:03:13.172108 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 21:03:13.190686 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 21:03:13.190733 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 21:03:13.204849 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 21:03:13.214182 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 21:03:13.226686 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 21:03:13.276781 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 21:03:13.276813 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 21:03:13.640205 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 21:03:14.009639 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 21:03:14.020965 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 21:03:14.342288 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 21:03:14.365051 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 21:03:14.411306 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 21:03:14.420598 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 21:03:15.622300 [INFO] Skipping Setup Docker Options
2024/02/02 21:03:15.622336 [INFO] Skipping MarkBootstrapped
2024/02/02 21:03:15.622340 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 21:03:15.622468 [INFO] Starting SwitchCFNStack
2024/02/02 21:03:15.622474 [INFO] Executing instruction: stopSqsd
2024/02/02 21:03:15.622478 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 21:03:15.622481 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 21:03:15.622485 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 21:03:15.622502 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 21:03:16.183426 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 21:03:16.183448 [INFO] Executing instruction: StagedockerApplication
2024/02/02 21:03:16.183459 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 21:03:16.206557 [INFO] Pruning containers ...
2024/02/02 21:03:16.206593 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 21:03:16.236933 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
09e1182f5b8a   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             laughing_kilby

2024/02/02 21:03:16.236968 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 21:03:16.269991 [INFO] Deleted Containers:
09e1182f5b8ace475c02747c0f95bc89825771f6057937fb221aa56c7c7eb110

Total reclaimed space: 0B

2024/02/02 21:03:16.270016 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 21:03:16.291088 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 21:03:16.291523 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 21:03:16.294661 [INFO] application/json

2024/02/02 21:03:16.294679 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 21:03:16.395997 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 21:03:16.396238 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 21:03:16.397484 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 21:03:16.397567 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 21:03:16.397584 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 21:03:16.397587 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 21:03:16.397592 [INFO] Executing instruction: Generate environment file
2024/02/02 21:03:16.397617 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 21:03:16.397621 [INFO] start build docker app
2024/02/02 21:03:16.398114 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 21:03:16.398156 [INFO] fetching image and ports
2024/02/02 21:03:16.400098 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 21:03:16.400152 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 21:03:16.400164 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 21:03:16.400173 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 21:03:17.362441 [INFO] Login Succeeded

2024/02/02 21:03:17.362464 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 21:03:17.362474 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 21:03:17.362491 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 21:03:17.512399 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 21:03:17.512423 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 21:03:17.512427 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 21:03:17.512430 [INFO] start to build docker image
2024/02/02 21:03:17.512445 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 21:03:17.788656 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 21:03:17.788678 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 21:03:17.788682 [INFO] successfully build docker image
2024/02/02 21:03:17.788685 [INFO] save staging docker image id
2024/02/02 21:03:17.788700 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 21:03:17.831876 [INFO] c176d18fbf65

2024/02/02 21:03:17.832038 [INFO] Executing instruction: configure X-Ray
2024/02/02 21:03:17.832045 [INFO] X-Ray is not enabled.
2024/02/02 21:03:17.832049 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 21:03:17.840213 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 21:03:17.841948 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 21:03:17.854345 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 21:03:17.854378 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 21:03:17.865712 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 21:03:17.875411 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 21:03:17.889542 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 21:03:17.948722 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 21:03:18.260830 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 21:03:18.261037 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 21:03:18.672393 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 21:03:18.683824 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 21:03:19.064250 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 21:03:19.073535 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 21:03:19.082853 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 21:03:19.446384 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 21:03:19.456857 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 21:03:19.783111 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 21:03:19.783148 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 21:03:19.796076 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 21:03:19.804576 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 21:03:19.881521 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 21:03:19.884361 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 21:03:19.886985 [INFO] Executing instruction: configure log streaming
2024/02/02 21:03:19.886999 [INFO] log streaming is not enabled
2024/02/02 21:03:19.887003 [INFO] disable log stream
2024/02/02 21:03:19.887018 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 21:03:19.913699 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 21:03:19.936154 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 21:03:19.936179 [INFO] Checking if logs need forced rotation
2024/02/02 21:03:19.936201 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 21:03:20.532661 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 21:03:20.980517 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 21:03:20.982570 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 21:03:21.062922 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 21:03:21.082025 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 21:03:21.082043 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 21:03:21.082054 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 21:03:21.609511 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 21:03:21.609821 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 21:03:21.609851 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 21:03:21.609853 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 21:03:21.609881 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 21:03:21.609894 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 21:03:21.609897 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 21:03:21.609902 [INFO] Executing instruction: stop X-Ray
2024/02/02 21:03:21.609905 [INFO] stop X-Ray ...
2024/02/02 21:03:21.609915 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 21:03:21.641597 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 21:03:21.641631 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 21:03:21.666672 [INFO] Executing instruction: Run Docker Container
2024/02/02 21:03:21.666714 [INFO] stop currently running containers...
2024/02/02 21:03:21.666734 [INFO] detected old app is not docker compose app
2024/02/02 21:03:21.666747 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 21:03:21.712665 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 21:03:21.728278 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 21:03:21.728307 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 21:03:21.742252 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 21:03:21.742282 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 21:03:21.757253 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 21:03:21.757414 [INFO] stopping current container: 09e1182f5b8a
2024/02/02 21:03:21.757428 [INFO] Running command /bin/sh -c docker ps | grep -q 09e1182f5b8a
2024/02/02 21:03:21.797055 [INFO] Running command /bin/sh -c docker ps | grep -q 09e1182f5b8a
2024/02/02 21:03:21.821115 [INFO] Pruning containers ...
2024/02/02 21:03:21.822246 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 21:03:21.843052 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 21:03:21.843084 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 21:03:21.862599 [INFO] Total reclaimed space: 0B

2024/02/02 21:03:21.862628 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 21:03:21.890499 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 21:03:21.890539 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 21:03:21.919701 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 21:03:21.919721 [INFO] Removing /var/app/current/ if it exists
2024/02/02 21:03:21.919818 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 21:03:21.919837 [INFO] detected new app is not docker compose app
2024/02/02 21:03:21.919891 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 21:03:22.370991 [INFO] 003c54178447c9d5ca4a338797e4df90621ef36b36be2b0dc75582196a86d0ae

2024/02/02 21:03:27.371369 [INFO] Running command /bin/sh -c docker ps | grep -q 003c54178447
2024/02/02 21:03:27.394775 [ERROR] docker container quit unexpectedly on 2024-02-02 21:03:27.394755103 +0000 UTC: Command /bin/sh -c docker ps | grep -q 003c54178447 failed with error exit status 1
2024/02/02 21:03:27.394811 [INFO] Running command /bin/sh -c docker logs 003c54178447
2024/02/02 21:03:27.415089 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 003c54178447: Command /bin/sh -c docker ps | grep -q 003c54178447 failed with error exit status 1 

2024/02/02 21:03:27.415099 [INFO] Executing cleanup logic
2024/02/02 21:03:27.415368 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 22:03:28.367454 [INFO] Starting...
2024/02/02 22:03:28.367496 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 22:03:28.367524 [INFO] reading event message file
2024/02/02 22:03:28.368661 [INFO] Engine received EB command userdata-exec

2024/02/02 22:03:28.376715 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 22:03:28.763503 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 22:03:29.272240 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 22:03:29.273092 [INFO] Engine command: (self-startup)

2024/02/02 22:03:29.273123 [INFO] Downloading EB Application...
2024/02/02 22:03:29.273127 [INFO] Region: eu-west-1
2024/02/02 22:03:29.273130 [INFO] envID: e-8gmkc7rmw6
2024/02/02 22:03:29.273134 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 22:03:29.273137 [INFO] Using manifest file name from command request
2024/02/02 22:03:29.273162 [INFO] Unable to get version manifest file.
2024/02/02 22:03:29.273166 [INFO] Downloading latest manifest available.
2024/02/02 22:03:29.273169 [INFO] Download latest app version manifest
2024/02/02 22:03:29.273340 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 22:03:29.316070 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 22:03:29.316266 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 22:03:29.327367 [INFO] Download successful124bytes downloaded
2024/02/02 22:03:29.327518 [INFO] Trying to read and parse version manifest...
2024/02/02 22:03:29.327591 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 22:03:29.356753 [INFO] Download successful264bytes downloaded
2024/02/02 22:03:29.357109 [INFO] Executing instruction: SyncClock
2024/02/02 22:03:29.357115 [INFO] Starting SyncClock
2024/02/02 22:03:29.357125 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 22:03:29.364051 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 22:03:19 2024
System time     : 0.000002653 seconds fast of NTP time
Last offset     : +0.000002902 seconds
RMS offset      : 0.000002995 seconds
Frequency       : 0.247 ppm slow
Residual freq   : +0.002 ppm
Skew            : 0.065 ppm
Root delay      : 0.000420341 seconds
Root dispersion : 0.000492877 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/02 22:03:29.364079 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 22:03:29.369373 [INFO] 200 OK

2024/02/02 22:03:29.369746 [INFO] Skipping Configure OS
2024/02/02 22:03:29.369806 [INFO] Skipping LockRepo
2024/02/02 22:03:29.369814 [INFO] Skipping GenerateEBBanner
2024/02/02 22:03:29.369819 [INFO] Skipping Install Process Manager
2024/02/02 22:03:29.369822 [INFO] Skipping install syslog
2024/02/02 22:03:29.369826 [INFO] Skipping install cron
2024/02/02 22:03:29.369830 [INFO] Skipping install proxy
2024/02/02 22:03:29.369834 [INFO] Skipping installhealthd
2024/02/02 22:03:29.369838 [INFO] Skipping Install Log Streaming Manager
2024/02/02 22:03:29.369956 [INFO] Skipping install X-Ray
2024/02/02 22:03:29.369962 [INFO] Skipping install Third Party License
2024/02/02 22:03:29.369968 [INFO] Skipping installSqsd
2024/02/02 22:03:29.369972 [INFO] Skipping bootstraphealthd
2024/02/02 22:03:29.369975 [INFO] Skipping Install yum packages
2024/02/02 22:03:29.369979 [INFO] Skipping install docker-compose
2024/02/02 22:03:29.369984 [INFO] Skipping Configure Docker Daemon
2024/02/02 22:03:29.369991 [INFO] Skipping MarkBaked
2024/02/02 22:03:29.369995 [INFO] Skipping TuneSystemSettings
2024/02/02 22:03:29.369998 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 22:03:29.370000 [INFO] Initialize LogRotate files and directories
2024/02/02 22:03:29.386738 [INFO] Skipping BootstrapCFNHup
2024/02/02 22:03:29.386756 [INFO] Executing instruction: StartCFNHup
2024/02/02 22:03:29.386759 [INFO] Start cfn-hup
2024/02/02 22:03:29.386777 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 22:03:29.405234 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 22:03:29.430088 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 22:03:29.430199 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 22:03:29.430206 [INFO] Executing instruction: Start Docker
2024/02/02 22:03:29.430216 [INFO] Starting Docker...
2024/02/02 22:03:29.430448 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 22:03:29.431983 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 22:03:29.433052 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 22:03:29.922661 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 22:03:29.936685 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 22:03:29.936718 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 22:03:29.946740 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 22:03:29.955954 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 22:03:29.966659 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 22:03:30.044475 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 22:03:30.044543 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 22:03:30.388401 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 22:03:30.757007 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 22:03:30.771186 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 22:03:31.105505 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 22:03:31.114988 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 22:03:31.127768 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 22:03:31.136862 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 22:03:32.300458 [INFO] Skipping Setup Docker Options
2024/02/02 22:03:32.300486 [INFO] Skipping MarkBootstrapped
2024/02/02 22:03:32.300491 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 22:03:32.300611 [INFO] Starting SwitchCFNStack
2024/02/02 22:03:32.300617 [INFO] Executing instruction: stopSqsd
2024/02/02 22:03:32.300620 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 22:03:32.300624 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 22:03:32.300627 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 22:03:32.300644 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 22:03:32.896967 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 22:03:32.897004 [INFO] Executing instruction: StagedockerApplication
2024/02/02 22:03:32.897032 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 22:03:32.923703 [INFO] Pruning containers ...
2024/02/02 22:03:32.923739 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 22:03:32.948746 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
003c54178447   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             priceless_neumann

2024/02/02 22:03:32.948778 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 22:03:32.976718 [INFO] Deleted Containers:
003c54178447c9d5ca4a338797e4df90621ef36b36be2b0dc75582196a86d0ae

Total reclaimed space: 0B

2024/02/02 22:03:32.976745 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 22:03:33.004062 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 22:03:33.005912 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 22:03:33.015934 [INFO] application/json

2024/02/02 22:03:33.015976 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 22:03:33.101092 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 22:03:33.101262 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 22:03:33.102854 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 22:03:33.102881 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 22:03:33.102896 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 22:03:33.102898 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 22:03:33.102902 [INFO] Executing instruction: Generate environment file
2024/02/02 22:03:33.102928 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 22:03:33.102931 [INFO] start build docker app
2024/02/02 22:03:33.103325 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 22:03:33.103330 [INFO] fetching image and ports
2024/02/02 22:03:33.105304 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 22:03:33.105356 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 22:03:33.105364 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 22:03:33.105380 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 22:03:34.025869 [INFO] Login Succeeded

2024/02/02 22:03:34.025889 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 22:03:34.025896 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 22:03:34.025914 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 22:03:34.176064 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 22:03:34.176085 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 22:03:34.176089 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 22:03:34.176091 [INFO] start to build docker image
2024/02/02 22:03:34.176108 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 22:03:34.479420 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 22:03:34.479446 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 22:03:34.479449 [INFO] successfully build docker image
2024/02/02 22:03:34.479451 [INFO] save staging docker image id
2024/02/02 22:03:34.479461 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 22:03:34.502276 [INFO] c176d18fbf65

2024/02/02 22:03:34.502466 [INFO] Executing instruction: configure X-Ray
2024/02/02 22:03:34.502472 [INFO] X-Ray is not enabled.
2024/02/02 22:03:34.502475 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 22:03:34.509377 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 22:03:34.511765 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 22:03:34.526774 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 22:03:34.526806 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 22:03:34.537342 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 22:03:34.546520 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 22:03:34.558567 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 22:03:34.628700 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 22:03:34.965856 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 22:03:34.966030 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 22:03:35.335048 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 22:03:35.346952 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 22:03:35.681460 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 22:03:35.699077 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 22:03:35.711098 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 22:03:35.991486 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 22:03:36.013589 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 22:03:36.355370 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 22:03:36.355422 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 22:03:36.375512 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 22:03:36.385451 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 22:03:36.447667 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 22:03:36.448505 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 22:03:36.449686 [INFO] Executing instruction: configure log streaming
2024/02/02 22:03:36.449696 [INFO] log streaming is not enabled
2024/02/02 22:03:36.449700 [INFO] disable log stream
2024/02/02 22:03:36.449713 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 22:03:36.474395 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 22:03:36.508706 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 22:03:36.508734 [INFO] Checking if logs need forced rotation
2024/02/02 22:03:36.508753 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 22:03:37.102716 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 22:03:37.625132 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 22:03:37.627040 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 22:03:38.180374 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 22:03:38.197773 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 22:03:38.197788 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 22:03:38.197800 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 22:03:38.581090 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 22:03:38.581119 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 22:03:38.581142 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 22:03:38.581145 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 22:03:38.581165 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 22:03:38.581185 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 22:03:38.581189 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 22:03:38.581195 [INFO] Executing instruction: stop X-Ray
2024/02/02 22:03:38.581198 [INFO] stop X-Ray ...
2024/02/02 22:03:38.581210 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 22:03:38.596644 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 22:03:38.596677 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 22:03:38.613890 [INFO] Executing instruction: Run Docker Container
2024/02/02 22:03:38.613919 [INFO] stop currently running containers...
2024/02/02 22:03:38.613929 [INFO] detected old app is not docker compose app
2024/02/02 22:03:38.613944 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 22:03:38.652895 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 22:03:38.677892 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 22:03:38.677926 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 22:03:38.698404 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 22:03:38.698438 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 22:03:38.719865 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 22:03:38.719926 [INFO] stopping current container: 003c54178447
2024/02/02 22:03:38.719940 [INFO] Running command /bin/sh -c docker ps | grep -q 003c54178447
2024/02/02 22:03:38.748959 [INFO] Running command /bin/sh -c docker ps | grep -q 003c54178447
2024/02/02 22:03:38.775661 [INFO] Pruning containers ...
2024/02/02 22:03:38.775712 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 22:03:38.797956 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 22:03:38.797984 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 22:03:38.820633 [INFO] Total reclaimed space: 0B

2024/02/02 22:03:38.820658 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 22:03:38.852620 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 22:03:38.852654 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 22:03:38.876417 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 22:03:38.876439 [INFO] Removing /var/app/current/ if it exists
2024/02/02 22:03:38.876550 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 22:03:38.876575 [INFO] detected new app is not docker compose app
2024/02/02 22:03:38.876625 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 22:03:39.346557 [INFO] 3d6fde43996c8d100a18be1d7238fb674b6fd705d9c34464f9dc84f855572aad

2024/02/02 22:03:44.346858 [INFO] Running command /bin/sh -c docker ps | grep -q 3d6fde43996c
2024/02/02 22:03:44.368596 [ERROR] docker container quit unexpectedly on 2024-02-02 22:03:44.368584721 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3d6fde43996c failed with error exit status 1
2024/02/02 22:03:44.368628 [INFO] Running command /bin/sh -c docker logs 3d6fde43996c
2024/02/02 22:03:44.395131 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3d6fde43996c: Command /bin/sh -c docker ps | grep -q 3d6fde43996c failed with error exit status 1 

2024/02/02 22:03:44.395140 [INFO] Executing cleanup logic
2024/02/02 22:03:44.395576 [INFO] Platform Engine finished execution on command: self-startup

2024/02/02 23:03:45.344593 [INFO] Starting...
2024/02/02 23:03:45.344641 [INFO] Starting EBPlatform-PlatformEngine
2024/02/02 23:03:45.344667 [INFO] reading event message file
2024/02/02 23:03:45.345427 [INFO] Engine received EB command userdata-exec

2024/02/02 23:03:45.355441 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 23:03:45.729650 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 23:03:46.157277 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/02 23:03:46.157368 [INFO] Engine command: (self-startup)

2024/02/02 23:03:46.157376 [INFO] Downloading EB Application...
2024/02/02 23:03:46.157380 [INFO] Region: eu-west-1
2024/02/02 23:03:46.157383 [INFO] envID: e-8gmkc7rmw6
2024/02/02 23:03:46.157386 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/02 23:03:46.157426 [INFO] Using manifest file name from command request
2024/02/02 23:03:46.157466 [INFO] Unable to get version manifest file.
2024/02/02 23:03:46.157470 [INFO] Downloading latest manifest available.
2024/02/02 23:03:46.157472 [INFO] Download latest app version manifest
2024/02/02 23:03:46.157616 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/02 23:03:46.197502 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/02 23:03:46.197685 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/02 23:03:46.213354 [INFO] Download successful124bytes downloaded
2024/02/02 23:03:46.213514 [INFO] Trying to read and parse version manifest...
2024/02/02 23:03:46.213579 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 23:03:46.236836 [INFO] Download successful264bytes downloaded
2024/02/02 23:03:46.237152 [INFO] Executing instruction: SyncClock
2024/02/02 23:03:46.237159 [INFO] Starting SyncClock
2024/02/02 23:03:46.237174 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/02 23:03:46.244361 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Feb 02 23:03:41 2024
System time     : 0.000000714 seconds slow of NTP time
Last offset     : -0.000001525 seconds
RMS offset      : 0.000002175 seconds
Frequency       : 0.195 ppm slow
Residual freq   : -0.001 ppm
Skew            : 0.036 ppm
Root delay      : 0.000422995 seconds
Root dispersion : 0.000442136 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/02 23:03:46.244402 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/02 23:03:46.248882 [INFO] 200 OK

2024/02/02 23:03:46.248973 [INFO] Skipping Configure OS
2024/02/02 23:03:46.248978 [INFO] Skipping LockRepo
2024/02/02 23:03:46.248982 [INFO] Skipping GenerateEBBanner
2024/02/02 23:03:46.248987 [INFO] Skipping Install Process Manager
2024/02/02 23:03:46.248991 [INFO] Skipping install syslog
2024/02/02 23:03:46.248995 [INFO] Skipping install cron
2024/02/02 23:03:46.248998 [INFO] Skipping install proxy
2024/02/02 23:03:46.249002 [INFO] Skipping installhealthd
2024/02/02 23:03:46.249205 [INFO] Skipping Install Log Streaming Manager
2024/02/02 23:03:46.249212 [INFO] Skipping install X-Ray
2024/02/02 23:03:46.249216 [INFO] Skipping install Third Party License
2024/02/02 23:03:46.249221 [INFO] Skipping installSqsd
2024/02/02 23:03:46.249225 [INFO] Skipping bootstraphealthd
2024/02/02 23:03:46.249235 [INFO] Skipping Install yum packages
2024/02/02 23:03:46.249240 [INFO] Skipping install docker-compose
2024/02/02 23:03:46.249244 [INFO] Skipping Configure Docker Daemon
2024/02/02 23:03:46.249248 [INFO] Skipping MarkBaked
2024/02/02 23:03:46.249252 [INFO] Skipping TuneSystemSettings
2024/02/02 23:03:46.249255 [INFO] Executing instruction: GetSetupLogRotate
2024/02/02 23:03:46.249257 [INFO] Initialize LogRotate files and directories
2024/02/02 23:03:46.265112 [INFO] Skipping BootstrapCFNHup
2024/02/02 23:03:46.265127 [INFO] Executing instruction: StartCFNHup
2024/02/02 23:03:46.265131 [INFO] Start cfn-hup
2024/02/02 23:03:46.265152 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/02 23:03:46.341869 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/02 23:03:46.358261 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/02 23:03:46.358298 [INFO] Skipping SetupPublishLogCronjob
2024/02/02 23:03:46.358304 [INFO] Executing instruction: Start Docker
2024/02/02 23:03:46.358307 [INFO] Starting Docker...
2024/02/02 23:03:46.358400 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/02 23:03:46.359485 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/02 23:03:46.360461 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 23:03:46.542873 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 23:03:46.563626 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/02 23:03:46.563658 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 23:03:46.576770 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 23:03:46.585570 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 23:03:46.597460 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/02 23:03:46.685215 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/02 23:03:46.685244 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/02 23:03:47.024221 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 23:03:47.296421 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 23:03:47.307491 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 23:03:47.574833 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 23:03:47.584935 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/02 23:03:47.598532 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/02 23:03:47.608548 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/02 23:03:48.791778 [INFO] Skipping Setup Docker Options
2024/02/02 23:03:48.791794 [INFO] Skipping MarkBootstrapped
2024/02/02 23:03:48.791798 [INFO] Executing instruction: Save CFN Stack Info
2024/02/02 23:03:48.791890 [INFO] Starting SwitchCFNStack
2024/02/02 23:03:48.791895 [INFO] Executing instruction: stopSqsd
2024/02/02 23:03:48.791898 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/02 23:03:48.791901 [INFO] Executing instruction: PreBuildEbExtension
2024/02/02 23:03:48.791903 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/02 23:03:48.791916 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/02 23:03:49.196385 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/02 23:03:49.196423 [INFO] Executing instruction: StagedockerApplication
2024/02/02 23:03:49.196437 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/02 23:03:49.216414 [INFO] Pruning containers ...
2024/02/02 23:03:49.216443 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 23:03:49.235545 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
3d6fde43996c   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             brave_booth

2024/02/02 23:03:49.235578 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 23:03:49.261056 [INFO] Deleted Containers:
3d6fde43996c8d100a18be1d7238fb674b6fd705d9c34464f9dc84f855572aad

Total reclaimed space: 0B

2024/02/02 23:03:49.261083 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 23:03:49.279501 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 23:03:49.279740 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/02 23:03:49.282651 [INFO] application/json

2024/02/02 23:03:49.282681 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/02 23:03:49.351413 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/02 23:03:49.351593 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/02 23:03:49.352768 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/02 23:03:49.352790 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/02 23:03:49.352807 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/02 23:03:49.352810 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/02 23:03:49.352816 [INFO] Executing instruction: Generate environment file
2024/02/02 23:03:49.352847 [INFO] Executing instruction: Docker Specific Build Application
2024/02/02 23:03:49.352850 [INFO] start build docker app
2024/02/02 23:03:49.353188 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/02 23:03:49.353192 [INFO] fetching image and ports
2024/02/02 23:03:49.354703 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/02 23:03:49.354763 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/02 23:03:49.354771 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/02 23:03:49.354781 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/02 23:03:50.289471 [INFO] Login Succeeded

2024/02/02 23:03:50.289490 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/02 23:03:50.289495 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/02 23:03:50.289511 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 23:03:50.441018 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/02 23:03:50.441050 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 23:03:50.441055 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/02 23:03:50.441059 [INFO] start to build docker image
2024/02/02 23:03:50.441116 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 23:03:50.740765 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/02 23:03:50.740789 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/02 23:03:50.740794 [INFO] successfully build docker image
2024/02/02 23:03:50.740797 [INFO] save staging docker image id
2024/02/02 23:03:50.740812 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/02 23:03:50.771944 [INFO] c176d18fbf65

2024/02/02 23:03:50.772088 [INFO] Executing instruction: configure X-Ray
2024/02/02 23:03:50.772095 [INFO] X-Ray is not enabled.
2024/02/02 23:03:50.772098 [INFO] Executing instruction: configure proxy Nginx
2024/02/02 23:03:50.777453 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/02 23:03:50.779186 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 23:03:50.794770 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/02 23:03:50.794803 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 23:03:50.805993 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 23:03:50.814672 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 23:03:50.825023 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/02 23:03:50.868295 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/02 23:03:51.276286 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/02 23:03:51.276458 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 23:03:51.621547 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 23:03:51.633130 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/02 23:03:51.976191 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/02 23:03:51.988352 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/02 23:03:51.997358 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/02 23:03:52.368158 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/02 23:03:52.380069 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/02 23:03:52.799183 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/02 23:03:52.799222 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/02 23:03:52.813506 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/02 23:03:52.823102 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/02 23:03:52.930370 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/02 23:03:52.931304 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/02 23:03:52.932397 [INFO] Executing instruction: configure log streaming
2024/02/02 23:03:52.932410 [INFO] log streaming is not enabled
2024/02/02 23:03:52.932418 [INFO] disable log stream
2024/02/02 23:03:52.932434 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/02 23:03:52.957749 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/02 23:03:52.983845 [INFO] Executing instruction: GetToggleForceRotate
2024/02/02 23:03:52.983868 [INFO] Checking if logs need forced rotation
2024/02/02 23:03:52.983892 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/02 23:03:53.552868 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/02 23:03:53.988144 [INFO] Procfile not found. Generating default rsyslog config
2024/02/02 23:03:53.989853 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/02 23:03:54.068875 [INFO] Executing instruction: Configure Docker Logging
2024/02/02 23:03:54.086702 [INFO] Executing instruction: PostBuildEbExtension
2024/02/02 23:03:54.086719 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/02 23:03:54.086731 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/02 23:03:54.485811 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/02 23:03:54.485833 [INFO] Executing instruction: CleanEbExtensions
2024/02/02 23:03:54.485856 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/02 23:03:54.485859 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/02 23:03:54.485878 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/02 23:03:54.485888 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/02 23:03:54.485890 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/02 23:03:54.485895 [INFO] Executing instruction: stop X-Ray
2024/02/02 23:03:54.485898 [INFO] stop X-Ray ...
2024/02/02 23:03:54.485908 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/02 23:03:54.500602 [WARN] stopProcess Warning: process xray is not registered 
2024/02/02 23:03:54.500642 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/02 23:03:54.515737 [INFO] Executing instruction: Run Docker Container
2024/02/02 23:03:54.515764 [INFO] stop currently running containers...
2024/02/02 23:03:54.515773 [INFO] detected old app is not docker compose app
2024/02/02 23:03:54.515786 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/02 23:03:54.572855 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/02 23:03:54.589835 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/02 23:03:54.589871 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/02 23:03:54.612768 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/02 23:03:54.612801 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/02 23:03:54.629164 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/02 23:03:54.629217 [INFO] stopping current container: 3d6fde43996c
2024/02/02 23:03:54.629230 [INFO] Running command /bin/sh -c docker ps | grep -q 3d6fde43996c
2024/02/02 23:03:54.651834 [INFO] Running command /bin/sh -c docker ps | grep -q 3d6fde43996c
2024/02/02 23:03:54.671174 [INFO] Pruning containers ...
2024/02/02 23:03:54.671198 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 23:03:54.691595 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 23:03:54.691628 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/02 23:03:54.713927 [INFO] Total reclaimed space: 0B

2024/02/02 23:03:54.713951 [INFO] Running command /bin/sh -c docker ps -a
2024/02/02 23:03:54.733813 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/02 23:03:54.733844 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/02 23:03:54.757890 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/02 23:03:54.757913 [INFO] Removing /var/app/current/ if it exists
2024/02/02 23:03:54.758028 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/02 23:03:54.758045 [INFO] detected new app is not docker compose app
2024/02/02 23:03:54.758095 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/02 23:03:55.133223 [INFO] 06d3c25685f2bda82b2abb8c7db5cfe81ec0362f4aba4ff07815e21c42aa9ba5

2024/02/02 23:04:00.134299 [INFO] Running command /bin/sh -c docker ps | grep -q 06d3c25685f2
2024/02/02 23:04:00.183988 [ERROR] docker container quit unexpectedly on 2024-02-02 23:04:00.183892757 +0000 UTC: Command /bin/sh -c docker ps | grep -q 06d3c25685f2 failed with error exit status 1
2024/02/02 23:04:00.184017 [INFO] Running command /bin/sh -c docker logs 06d3c25685f2
2024/02/02 23:04:00.220542 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 06d3c25685f2: Command /bin/sh -c docker ps | grep -q 06d3c25685f2 failed with error exit status 1 

2024/02/02 23:04:00.220553 [INFO] Executing cleanup logic
2024/02/02 23:04:00.220866 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 00:04:01.511585 [INFO] Starting...
2024/02/03 00:04:01.511775 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 00:04:01.511886 [INFO] reading event message file
2024/02/03 00:04:01.512648 [INFO] Engine received EB command userdata-exec

2024/02/03 00:04:01.518354 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 00:04:02.247418 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 00:04:02.822365 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 00:04:02.822450 [INFO] Engine command: (self-startup)

2024/02/03 00:04:02.822456 [INFO] Downloading EB Application...
2024/02/03 00:04:02.822459 [INFO] Region: eu-west-1
2024/02/03 00:04:02.822462 [INFO] envID: e-8gmkc7rmw6
2024/02/03 00:04:02.822466 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 00:04:02.822469 [INFO] Using manifest file name from command request
2024/02/03 00:04:02.822484 [INFO] Unable to get version manifest file.
2024/02/03 00:04:02.822488 [INFO] Downloading latest manifest available.
2024/02/03 00:04:02.822491 [INFO] Download latest app version manifest
2024/02/03 00:04:02.822636 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 00:04:02.862846 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 00:04:02.863028 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 00:04:02.873470 [INFO] Download successful124bytes downloaded
2024/02/03 00:04:02.873732 [INFO] Trying to read and parse version manifest...
2024/02/03 00:04:02.873810 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 00:04:02.894559 [INFO] Download successful264bytes downloaded
2024/02/03 00:04:02.895152 [INFO] Executing instruction: SyncClock
2024/02/03 00:04:02.895158 [INFO] Starting SyncClock
2024/02/03 00:04:02.895169 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 00:04:02.901990 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 00:03:48 2024
System time     : 0.000000729 seconds slow of NTP time
Last offset     : +0.000000555 seconds
RMS offset      : 0.000001770 seconds
Frequency       : 0.086 ppm slow
Residual freq   : +0.000 ppm
Skew            : 0.030 ppm
Root delay      : 0.000425056 seconds
Root dispersion : 0.000497456 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/03 00:04:02.902017 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 00:04:02.906478 [INFO] 200 OK

2024/02/03 00:04:02.906574 [INFO] Skipping Configure OS
2024/02/03 00:04:02.906579 [INFO] Skipping LockRepo
2024/02/03 00:04:02.906583 [INFO] Skipping GenerateEBBanner
2024/02/03 00:04:02.906588 [INFO] Skipping Install Process Manager
2024/02/03 00:04:02.906591 [INFO] Skipping install syslog
2024/02/03 00:04:02.906595 [INFO] Skipping install cron
2024/02/03 00:04:02.906599 [INFO] Skipping install proxy
2024/02/03 00:04:02.906603 [INFO] Skipping installhealthd
2024/02/03 00:04:02.906607 [INFO] Skipping Install Log Streaming Manager
2024/02/03 00:04:02.906610 [INFO] Skipping install X-Ray
2024/02/03 00:04:02.906614 [INFO] Skipping install Third Party License
2024/02/03 00:04:02.906619 [INFO] Skipping installSqsd
2024/02/03 00:04:02.906623 [INFO] Skipping bootstraphealthd
2024/02/03 00:04:02.906626 [INFO] Skipping Install yum packages
2024/02/03 00:04:02.906630 [INFO] Skipping install docker-compose
2024/02/03 00:04:02.906633 [INFO] Skipping Configure Docker Daemon
2024/02/03 00:04:02.906637 [INFO] Skipping MarkBaked
2024/02/03 00:04:02.906640 [INFO] Skipping TuneSystemSettings
2024/02/03 00:04:02.906643 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 00:04:02.906646 [INFO] Initialize LogRotate files and directories
2024/02/03 00:04:02.921871 [INFO] Skipping BootstrapCFNHup
2024/02/03 00:04:02.921886 [INFO] Executing instruction: StartCFNHup
2024/02/03 00:04:02.921890 [INFO] Start cfn-hup
2024/02/03 00:04:02.921911 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 00:04:02.937776 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 00:04:02.946822 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 00:04:02.946864 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 00:04:02.946868 [INFO] Executing instruction: Start Docker
2024/02/03 00:04:02.946871 [INFO] Starting Docker...
2024/02/03 00:04:02.946954 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 00:04:02.948411 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 00:04:02.949516 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 00:04:03.410477 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 00:04:03.443442 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 00:04:03.443482 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 00:04:03.469544 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 00:04:03.485192 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 00:04:03.496696 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 00:04:03.565772 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 00:04:03.565822 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 00:04:03.961005 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 00:04:04.369242 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 00:04:04.381525 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 00:04:04.695290 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 00:04:04.728931 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 00:04:04.751472 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 00:04:04.763531 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 00:04:05.989991 [INFO] Skipping Setup Docker Options
2024/02/03 00:04:05.990011 [INFO] Skipping MarkBootstrapped
2024/02/03 00:04:05.990015 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 00:04:05.990137 [INFO] Starting SwitchCFNStack
2024/02/03 00:04:05.990143 [INFO] Executing instruction: stopSqsd
2024/02/03 00:04:05.990146 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 00:04:05.990149 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 00:04:05.990153 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 00:04:05.990175 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 00:04:06.536056 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 00:04:06.536080 [INFO] Executing instruction: StagedockerApplication
2024/02/03 00:04:06.536096 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 00:04:06.588985 [INFO] Pruning containers ...
2024/02/03 00:04:06.589317 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 00:04:06.612128 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
06d3c25685f2   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             heuristic_cori

2024/02/03 00:04:06.612161 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 00:04:06.637127 [INFO] Deleted Containers:
06d3c25685f2bda82b2abb8c7db5cfe81ec0362f4aba4ff07815e21c42aa9ba5

Total reclaimed space: 0B

2024/02/03 00:04:06.637153 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 00:04:06.659895 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 00:04:06.660152 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 00:04:06.664032 [INFO] application/json

2024/02/03 00:04:06.664059 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 00:04:06.746555 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 00:04:06.746739 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 00:04:06.747905 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 00:04:06.747929 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 00:04:06.747944 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 00:04:06.747947 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 00:04:06.747953 [INFO] Executing instruction: Generate environment file
2024/02/03 00:04:06.747984 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 00:04:06.747988 [INFO] start build docker app
2024/02/03 00:04:06.748376 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 00:04:06.748381 [INFO] fetching image and ports
2024/02/03 00:04:06.750131 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 00:04:06.750178 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 00:04:06.750189 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 00:04:06.750201 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 00:04:07.759158 [INFO] Login Succeeded

2024/02/03 00:04:07.759364 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 00:04:07.759371 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 00:04:07.759387 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 00:04:07.914982 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 00:04:07.915005 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 00:04:07.915008 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 00:04:07.915012 [INFO] start to build docker image
2024/02/03 00:04:07.915032 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 00:04:08.213493 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 00:04:08.213528 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 00:04:08.213533 [INFO] successfully build docker image
2024/02/03 00:04:08.213536 [INFO] save staging docker image id
2024/02/03 00:04:08.213550 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 00:04:08.233236 [INFO] c176d18fbf65

2024/02/03 00:04:08.233376 [INFO] Executing instruction: configure X-Ray
2024/02/03 00:04:08.233382 [INFO] X-Ray is not enabled.
2024/02/03 00:04:08.233385 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 00:04:08.239312 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 00:04:08.241284 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 00:04:08.253383 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 00:04:08.253413 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 00:04:08.263751 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 00:04:08.273933 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 00:04:08.295751 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 00:04:08.371823 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 00:04:08.717022 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 00:04:08.717103 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 00:04:09.004142 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 00:04:09.015990 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 00:04:09.297604 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 00:04:09.306056 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 00:04:09.318143 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 00:04:09.652805 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 00:04:09.663195 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 00:04:09.996728 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 00:04:09.996765 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 00:04:10.010496 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 00:04:10.019605 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 00:04:10.102454 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 00:04:10.103569 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 00:04:10.104698 [INFO] Executing instruction: configure log streaming
2024/02/03 00:04:10.104709 [INFO] log streaming is not enabled
2024/02/03 00:04:10.104713 [INFO] disable log stream
2024/02/03 00:04:10.104728 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 00:04:10.138142 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 00:04:10.160730 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 00:04:10.160755 [INFO] Checking if logs need forced rotation
2024/02/03 00:04:10.160775 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 00:04:10.695905 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 00:04:11.192324 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 00:04:11.196177 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 00:04:11.669387 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 00:04:11.695587 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 00:04:11.695602 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 00:04:11.695618 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 00:04:12.133625 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 00:04:12.133661 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 00:04:12.133688 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 00:04:12.133690 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 00:04:12.133711 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 00:04:12.133723 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 00:04:12.133725 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 00:04:12.133730 [INFO] Executing instruction: stop X-Ray
2024/02/03 00:04:12.133733 [INFO] stop X-Ray ...
2024/02/03 00:04:12.133743 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 00:04:12.156756 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 00:04:12.156790 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 00:04:12.174737 [INFO] Executing instruction: Run Docker Container
2024/02/03 00:04:12.174765 [INFO] stop currently running containers...
2024/02/03 00:04:12.174778 [INFO] detected old app is not docker compose app
2024/02/03 00:04:12.174793 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 00:04:12.202511 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 00:04:12.219007 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 00:04:12.219041 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 00:04:12.233115 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 00:04:12.233149 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 00:04:12.246934 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 00:04:12.246984 [INFO] stopping current container: 06d3c25685f2
2024/02/03 00:04:12.246997 [INFO] Running command /bin/sh -c docker ps | grep -q 06d3c25685f2
2024/02/03 00:04:12.266858 [INFO] Running command /bin/sh -c docker ps | grep -q 06d3c25685f2
2024/02/03 00:04:12.286102 [INFO] Pruning containers ...
2024/02/03 00:04:12.286136 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 00:04:12.314560 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 00:04:12.314594 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 00:04:12.333978 [INFO] Total reclaimed space: 0B

2024/02/03 00:04:12.334010 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 00:04:12.354020 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 00:04:12.354055 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 00:04:12.377014 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 00:04:12.377037 [INFO] Removing /var/app/current/ if it exists
2024/02/03 00:04:12.377204 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 00:04:12.377222 [INFO] detected new app is not docker compose app
2024/02/03 00:04:12.377332 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 00:04:12.798531 [INFO] f284ea819ad9559a2af42d2d331538cb2eb1072232a8073ab23b813c3ee9898f

2024/02/03 00:04:17.803413 [INFO] Running command /bin/sh -c docker ps | grep -q f284ea819ad9
2024/02/03 00:04:17.824014 [ERROR] docker container quit unexpectedly on 2024-02-03 00:04:17.823999257 +0000 UTC: Command /bin/sh -c docker ps | grep -q f284ea819ad9 failed with error exit status 1
2024/02/03 00:04:17.824050 [INFO] Running command /bin/sh -c docker logs f284ea819ad9
2024/02/03 00:04:17.847184 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container f284ea819ad9: Command /bin/sh -c docker ps | grep -q f284ea819ad9 failed with error exit status 1 

2024/02/03 00:04:17.847193 [INFO] Executing cleanup logic
2024/02/03 00:04:17.847435 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 01:04:18.868615 [INFO] Starting...
2024/02/03 01:04:18.868658 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 01:04:18.868685 [INFO] reading event message file
2024/02/03 01:04:18.869426 [INFO] Engine received EB command userdata-exec

2024/02/03 01:04:18.877404 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 01:04:19.332067 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 01:04:19.763995 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 01:04:19.764088 [INFO] Engine command: (self-startup)

2024/02/03 01:04:19.764096 [INFO] Downloading EB Application...
2024/02/03 01:04:19.764100 [INFO] Region: eu-west-1
2024/02/03 01:04:19.764103 [INFO] envID: e-8gmkc7rmw6
2024/02/03 01:04:19.764107 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 01:04:19.764110 [INFO] Using manifest file name from command request
2024/02/03 01:04:19.764126 [INFO] Unable to get version manifest file.
2024/02/03 01:04:19.764139 [INFO] Downloading latest manifest available.
2024/02/03 01:04:19.764141 [INFO] Download latest app version manifest
2024/02/03 01:04:19.764343 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 01:04:19.807028 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 01:04:19.807339 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 01:04:19.819716 [INFO] Download successful124bytes downloaded
2024/02/03 01:04:19.819967 [INFO] Trying to read and parse version manifest...
2024/02/03 01:04:19.820048 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 01:04:19.854862 [INFO] Download successful264bytes downloaded
2024/02/03 01:04:19.855381 [INFO] Executing instruction: SyncClock
2024/02/03 01:04:19.855388 [INFO] Starting SyncClock
2024/02/03 01:04:19.855401 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 01:04:19.862317 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 01:04:10 2024
System time     : 0.000002326 seconds slow of NTP time
Last offset     : -0.000001497 seconds
RMS offset      : 0.000002653 seconds
Frequency       : 0.166 ppm slow
Residual freq   : -0.001 ppm
Skew            : 0.051 ppm
Root delay      : 0.000428707 seconds
Root dispersion : 0.000449176 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/03 01:04:19.862353 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 01:04:19.868012 [INFO] 200 OK

2024/02/03 01:04:19.868109 [INFO] Skipping Configure OS
2024/02/03 01:04:19.868115 [INFO] Skipping LockRepo
2024/02/03 01:04:19.868119 [INFO] Skipping GenerateEBBanner
2024/02/03 01:04:19.868123 [INFO] Skipping Install Process Manager
2024/02/03 01:04:19.868127 [INFO] Skipping install syslog
2024/02/03 01:04:19.868131 [INFO] Skipping install cron
2024/02/03 01:04:19.868135 [INFO] Skipping install proxy
2024/02/03 01:04:19.868139 [INFO] Skipping installhealthd
2024/02/03 01:04:19.868142 [INFO] Skipping Install Log Streaming Manager
2024/02/03 01:04:19.868146 [INFO] Skipping install X-Ray
2024/02/03 01:04:19.868150 [INFO] Skipping install Third Party License
2024/02/03 01:04:19.868155 [INFO] Skipping installSqsd
2024/02/03 01:04:19.868159 [INFO] Skipping bootstraphealthd
2024/02/03 01:04:19.868163 [INFO] Skipping Install yum packages
2024/02/03 01:04:19.868166 [INFO] Skipping install docker-compose
2024/02/03 01:04:19.868170 [INFO] Skipping Configure Docker Daemon
2024/02/03 01:04:19.868174 [INFO] Skipping MarkBaked
2024/02/03 01:04:19.868177 [INFO] Skipping TuneSystemSettings
2024/02/03 01:04:19.868180 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 01:04:19.868182 [INFO] Initialize LogRotate files and directories
2024/02/03 01:04:19.881820 [INFO] Skipping BootstrapCFNHup
2024/02/03 01:04:19.881833 [INFO] Executing instruction: StartCFNHup
2024/02/03 01:04:19.881836 [INFO] Start cfn-hup
2024/02/03 01:04:19.881855 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 01:04:19.897995 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 01:04:19.907045 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 01:04:19.907079 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 01:04:19.907083 [INFO] Executing instruction: Start Docker
2024/02/03 01:04:19.907087 [INFO] Starting Docker...
2024/02/03 01:04:19.908278 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 01:04:19.909396 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 01:04:19.910420 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 01:04:20.421930 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 01:04:20.440086 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 01:04:20.440115 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 01:04:20.470035 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 01:04:20.497422 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 01:04:20.528665 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 01:04:20.644186 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 01:04:20.644243 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 01:04:20.999961 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 01:04:21.320342 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 01:04:21.339850 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 01:04:21.611723 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 01:04:21.621561 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 01:04:21.636695 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 01:04:21.652035 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 01:04:22.976777 [INFO] Skipping Setup Docker Options
2024/02/03 01:04:22.976809 [INFO] Skipping MarkBootstrapped
2024/02/03 01:04:22.976813 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 01:04:22.976942 [INFO] Starting SwitchCFNStack
2024/02/03 01:04:22.976948 [INFO] Executing instruction: stopSqsd
2024/02/03 01:04:22.976953 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 01:04:22.976956 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 01:04:22.976960 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 01:04:22.976976 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 01:04:23.478481 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 01:04:23.478514 [INFO] Executing instruction: StagedockerApplication
2024/02/03 01:04:23.478527 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 01:04:23.499698 [INFO] Pruning containers ...
2024/02/03 01:04:23.499731 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 01:04:23.523336 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
f284ea819ad9   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             pedantic_margulis

2024/02/03 01:04:23.523368 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 01:04:23.560883 [INFO] Deleted Containers:
f284ea819ad9559a2af42d2d331538cb2eb1072232a8073ab23b813c3ee9898f

Total reclaimed space: 0B

2024/02/03 01:04:23.561012 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 01:04:23.584281 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 01:04:23.584516 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 01:04:23.588682 [INFO] application/json

2024/02/03 01:04:23.588703 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 01:04:23.655494 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 01:04:23.655661 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 01:04:23.657051 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 01:04:23.657075 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 01:04:23.657092 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 01:04:23.657094 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 01:04:23.657099 [INFO] Executing instruction: Generate environment file
2024/02/03 01:04:23.657128 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 01:04:23.657132 [INFO] start build docker app
2024/02/03 01:04:23.657580 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 01:04:23.657591 [INFO] fetching image and ports
2024/02/03 01:04:23.659411 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 01:04:23.659455 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 01:04:23.659463 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 01:04:23.659475 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 01:04:24.620137 [INFO] Login Succeeded

2024/02/03 01:04:24.620157 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 01:04:24.620164 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 01:04:24.620183 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 01:04:24.800229 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 01:04:24.800253 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 01:04:24.800257 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 01:04:24.800260 [INFO] start to build docker image
2024/02/03 01:04:24.800276 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 01:04:25.112422 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 01:04:25.112511 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 01:04:25.112519 [INFO] successfully build docker image
2024/02/03 01:04:25.112522 [INFO] save staging docker image id
2024/02/03 01:04:25.112537 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 01:04:25.157750 [INFO] c176d18fbf65

2024/02/03 01:04:25.157983 [INFO] Executing instruction: configure X-Ray
2024/02/03 01:04:25.157990 [INFO] X-Ray is not enabled.
2024/02/03 01:04:25.157993 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 01:04:25.167708 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 01:04:25.169462 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 01:04:25.185127 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 01:04:25.185163 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 01:04:25.195629 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 01:04:25.204133 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 01:04:25.214525 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 01:04:25.278436 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 01:04:25.612601 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 01:04:25.612780 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 01:04:25.929843 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 01:04:25.941583 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 01:04:26.285503 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 01:04:26.295011 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 01:04:26.305681 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 01:04:26.619387 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 01:04:26.632250 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 01:04:26.929672 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 01:04:26.929708 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 01:04:26.944008 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 01:04:26.953739 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 01:04:27.068405 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 01:04:27.069310 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 01:04:27.070192 [INFO] Executing instruction: configure log streaming
2024/02/03 01:04:27.070202 [INFO] log streaming is not enabled
2024/02/03 01:04:27.070206 [INFO] disable log stream
2024/02/03 01:04:27.070220 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 01:04:27.097330 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 01:04:27.122218 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 01:04:27.122244 [INFO] Checking if logs need forced rotation
2024/02/03 01:04:27.122264 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 01:04:27.691452 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 01:04:28.160951 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 01:04:28.163240 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 01:04:28.635321 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 01:04:28.657334 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 01:04:28.657363 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 01:04:28.657375 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 01:04:29.102817 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 01:04:29.102886 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 01:04:29.102910 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 01:04:29.102912 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 01:04:29.102934 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 01:04:29.102949 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 01:04:29.102952 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 01:04:29.102957 [INFO] Executing instruction: stop X-Ray
2024/02/03 01:04:29.102959 [INFO] stop X-Ray ...
2024/02/03 01:04:29.102969 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 01:04:29.119351 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 01:04:29.119390 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 01:04:29.136095 [INFO] Executing instruction: Run Docker Container
2024/02/03 01:04:29.136123 [INFO] stop currently running containers...
2024/02/03 01:04:29.136131 [INFO] detected old app is not docker compose app
2024/02/03 01:04:29.136142 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 01:04:29.182627 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 01:04:29.197395 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 01:04:29.197429 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 01:04:29.210558 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 01:04:29.210590 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 01:04:29.223686 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 01:04:29.223743 [INFO] stopping current container: f284ea819ad9
2024/02/03 01:04:29.223755 [INFO] Running command /bin/sh -c docker ps | grep -q f284ea819ad9
2024/02/03 01:04:29.259265 [INFO] Running command /bin/sh -c docker ps | grep -q f284ea819ad9
2024/02/03 01:04:29.277820 [INFO] Pruning containers ...
2024/02/03 01:04:29.277845 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 01:04:29.296406 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 01:04:29.296435 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 01:04:29.314702 [INFO] Total reclaimed space: 0B

2024/02/03 01:04:29.314728 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 01:04:29.332529 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 01:04:29.332561 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 01:04:29.350633 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 01:04:29.350655 [INFO] Removing /var/app/current/ if it exists
2024/02/03 01:04:29.350757 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 01:04:29.350774 [INFO] detected new app is not docker compose app
2024/02/03 01:04:29.350837 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 01:04:29.662498 [INFO] b8629a7946995d20feaa2e3f6acf29dd3a67603080751e4fb7e83cee669568c2

2024/02/03 01:04:34.662884 [INFO] Running command /bin/sh -c docker ps | grep -q b8629a794699
2024/02/03 01:04:34.684531 [ERROR] docker container quit unexpectedly on 2024-02-03 01:04:34.684513999 +0000 UTC: Command /bin/sh -c docker ps | grep -q b8629a794699 failed with error exit status 1
2024/02/03 01:04:34.684640 [INFO] Running command /bin/sh -c docker logs b8629a794699
2024/02/03 01:04:34.706866 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b8629a794699: Command /bin/sh -c docker ps | grep -q b8629a794699 failed with error exit status 1 

2024/02/03 01:04:34.706876 [INFO] Executing cleanup logic
2024/02/03 01:04:34.707166 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 02:04:35.732924 [INFO] Starting...
2024/02/03 02:04:35.732966 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 02:04:35.732993 [INFO] reading event message file
2024/02/03 02:04:35.733669 [INFO] Engine received EB command userdata-exec

2024/02/03 02:04:35.739975 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 02:04:36.189708 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 02:04:36.661891 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 02:04:36.661983 [INFO] Engine command: (self-startup)

2024/02/03 02:04:36.661990 [INFO] Downloading EB Application...
2024/02/03 02:04:36.661994 [INFO] Region: eu-west-1
2024/02/03 02:04:36.661997 [INFO] envID: e-8gmkc7rmw6
2024/02/03 02:04:36.662000 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 02:04:36.662004 [INFO] Using manifest file name from command request
2024/02/03 02:04:36.662019 [INFO] Unable to get version manifest file.
2024/02/03 02:04:36.662022 [INFO] Downloading latest manifest available.
2024/02/03 02:04:36.662025 [INFO] Download latest app version manifest
2024/02/03 02:04:36.662139 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 02:04:36.701453 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 02:04:36.701636 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 02:04:36.717127 [INFO] Download successful124bytes downloaded
2024/02/03 02:04:36.717278 [INFO] Trying to read and parse version manifest...
2024/02/03 02:04:36.717357 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 02:04:36.745333 [INFO] Download successful264bytes downloaded
2024/02/03 02:04:36.745653 [INFO] Executing instruction: SyncClock
2024/02/03 02:04:36.745658 [INFO] Starting SyncClock
2024/02/03 02:04:36.745668 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 02:04:36.751089 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 02:04:33 2024
System time     : 0.000003142 seconds slow of NTP time
Last offset     : -0.000001759 seconds
RMS offset      : 0.000008017 seconds
Frequency       : 0.233 ppm slow
Residual freq   : -0.002 ppm
Skew            : 0.164 ppm
Root delay      : 0.000441813 seconds
Root dispersion : 0.000373511 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/03 02:04:36.751110 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 02:04:36.756501 [INFO] 200 OK

2024/02/03 02:04:36.756678 [INFO] Skipping Configure OS
2024/02/03 02:04:36.756687 [INFO] Skipping LockRepo
2024/02/03 02:04:36.756691 [INFO] Skipping GenerateEBBanner
2024/02/03 02:04:36.756695 [INFO] Skipping Install Process Manager
2024/02/03 02:04:36.756699 [INFO] Skipping install syslog
2024/02/03 02:04:36.756703 [INFO] Skipping install cron
2024/02/03 02:04:36.756707 [INFO] Skipping install proxy
2024/02/03 02:04:36.756711 [INFO] Skipping installhealthd
2024/02/03 02:04:36.756714 [INFO] Skipping Install Log Streaming Manager
2024/02/03 02:04:36.756718 [INFO] Skipping install X-Ray
2024/02/03 02:04:36.756722 [INFO] Skipping install Third Party License
2024/02/03 02:04:36.756727 [INFO] Skipping installSqsd
2024/02/03 02:04:36.756731 [INFO] Skipping bootstraphealthd
2024/02/03 02:04:36.756740 [INFO] Skipping Install yum packages
2024/02/03 02:04:36.756743 [INFO] Skipping install docker-compose
2024/02/03 02:04:36.756749 [INFO] Skipping Configure Docker Daemon
2024/02/03 02:04:36.756753 [INFO] Skipping MarkBaked
2024/02/03 02:04:36.756757 [INFO] Skipping TuneSystemSettings
2024/02/03 02:04:36.756760 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 02:04:36.756762 [INFO] Initialize LogRotate files and directories
2024/02/03 02:04:36.773829 [INFO] Skipping BootstrapCFNHup
2024/02/03 02:04:36.773840 [INFO] Executing instruction: StartCFNHup
2024/02/03 02:04:36.773843 [INFO] Start cfn-hup
2024/02/03 02:04:36.773861 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 02:04:36.787896 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 02:04:36.796436 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 02:04:36.796469 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 02:04:36.796472 [INFO] Executing instruction: Start Docker
2024/02/03 02:04:36.796476 [INFO] Starting Docker...
2024/02/03 02:04:36.796556 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 02:04:36.797745 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 02:04:36.798904 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 02:04:37.173263 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 02:04:37.192664 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 02:04:37.192698 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 02:04:37.208535 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 02:04:37.220997 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 02:04:37.231041 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 02:04:37.329782 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 02:04:37.329834 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 02:04:37.632441 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 02:04:37.975810 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 02:04:37.987595 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 02:04:38.309410 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 02:04:38.325371 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 02:04:38.341745 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 02:04:38.366393 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 02:04:39.654825 [INFO] Skipping Setup Docker Options
2024/02/03 02:04:39.654848 [INFO] Skipping MarkBootstrapped
2024/02/03 02:04:39.654857 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 02:04:39.654979 [INFO] Starting SwitchCFNStack
2024/02/03 02:04:39.654985 [INFO] Executing instruction: stopSqsd
2024/02/03 02:04:39.654989 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 02:04:39.654992 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 02:04:39.654996 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 02:04:39.655016 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 02:04:40.136058 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 02:04:40.136083 [INFO] Executing instruction: StagedockerApplication
2024/02/03 02:04:40.136095 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 02:04:40.160547 [INFO] Pruning containers ...
2024/02/03 02:04:40.160635 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 02:04:40.186290 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b8629a794699   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             great_swartz

2024/02/03 02:04:40.186321 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 02:04:40.215980 [INFO] Deleted Containers:
b8629a7946995d20feaa2e3f6acf29dd3a67603080751e4fb7e83cee669568c2

Total reclaimed space: 0B

2024/02/03 02:04:40.216013 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 02:04:40.235367 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 02:04:40.235732 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 02:04:40.238758 [INFO] application/json

2024/02/03 02:04:40.238777 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 02:04:40.339081 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/03 02:04:40.339355 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 02:04:40.340664 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 02:04:40.340688 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 02:04:40.340709 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 02:04:40.340712 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 02:04:40.340716 [INFO] Executing instruction: Generate environment file
2024/02/03 02:04:40.340742 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 02:04:40.340745 [INFO] start build docker app
2024/02/03 02:04:40.341206 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 02:04:40.341210 [INFO] fetching image and ports
2024/02/03 02:04:40.343015 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 02:04:40.343100 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 02:04:40.343109 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 02:04:40.343144 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 02:04:41.368113 [INFO] Login Succeeded

2024/02/03 02:04:41.368133 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 02:04:41.368140 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 02:04:41.368156 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 02:04:41.507359 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 02:04:41.507386 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 02:04:41.507398 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 02:04:41.507401 [INFO] start to build docker image
2024/02/03 02:04:41.507418 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 02:04:41.798289 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 02:04:41.798313 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 02:04:41.798316 [INFO] successfully build docker image
2024/02/03 02:04:41.798318 [INFO] save staging docker image id
2024/02/03 02:04:41.798330 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 02:04:41.819359 [INFO] c176d18fbf65

2024/02/03 02:04:41.819508 [INFO] Executing instruction: configure X-Ray
2024/02/03 02:04:41.819514 [INFO] X-Ray is not enabled.
2024/02/03 02:04:41.819517 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 02:04:41.824947 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 02:04:41.826789 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 02:04:41.840148 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 02:04:41.840179 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 02:04:41.850105 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 02:04:41.859183 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 02:04:41.868356 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 02:04:41.918967 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 02:04:42.247824 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 02:04:42.248036 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 02:04:42.536870 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 02:04:42.550807 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 02:04:42.840218 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 02:04:42.850398 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 02:04:42.859337 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 02:04:43.175574 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 02:04:43.186042 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 02:04:43.556049 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 02:04:43.556084 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 02:04:43.568507 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 02:04:43.576875 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 02:04:43.626898 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 02:04:43.627825 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 02:04:43.628852 [INFO] Executing instruction: configure log streaming
2024/02/03 02:04:43.628862 [INFO] log streaming is not enabled
2024/02/03 02:04:43.628866 [INFO] disable log stream
2024/02/03 02:04:43.628880 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 02:04:43.654012 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 02:04:43.688285 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 02:04:43.688311 [INFO] Checking if logs need forced rotation
2024/02/03 02:04:43.688337 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 02:04:44.276795 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 02:04:44.787612 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 02:04:44.789817 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 02:04:44.921432 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 02:04:44.946022 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 02:04:44.946039 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 02:04:44.946053 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 02:04:45.416910 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 02:04:45.417002 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 02:04:45.417061 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 02:04:45.417066 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 02:04:45.417092 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 02:04:45.417104 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 02:04:45.417108 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 02:04:45.417114 [INFO] Executing instruction: stop X-Ray
2024/02/03 02:04:45.417117 [INFO] stop X-Ray ...
2024/02/03 02:04:45.417127 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 02:04:45.456656 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 02:04:45.456709 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 02:04:45.491269 [INFO] Executing instruction: Run Docker Container
2024/02/03 02:04:45.491301 [INFO] stop currently running containers...
2024/02/03 02:04:45.491312 [INFO] detected old app is not docker compose app
2024/02/03 02:04:45.491327 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 02:04:45.543674 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 02:04:45.565968 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 02:04:45.566004 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 02:04:45.587004 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 02:04:45.587038 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 02:04:45.607879 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 02:04:45.607927 [INFO] stopping current container: b8629a794699
2024/02/03 02:04:45.607945 [INFO] Running command /bin/sh -c docker ps | grep -q b8629a794699
2024/02/03 02:04:45.630241 [INFO] Running command /bin/sh -c docker ps | grep -q b8629a794699
2024/02/03 02:04:45.651792 [INFO] Pruning containers ...
2024/02/03 02:04:45.651823 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 02:04:45.671698 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 02:04:45.671729 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 02:04:45.691967 [INFO] Total reclaimed space: 0B

2024/02/03 02:04:45.691992 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 02:04:45.721748 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 02:04:45.721787 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 02:04:45.743411 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 02:04:45.743433 [INFO] Removing /var/app/current/ if it exists
2024/02/03 02:04:45.743577 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 02:04:45.743599 [INFO] detected new app is not docker compose app
2024/02/03 02:04:45.743654 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 02:04:46.112755 [INFO] 956d454b48fa5a789101bafd06dc15c17cbfcc3f3860c3ac67e7476bc87d721b

2024/02/03 02:04:51.117093 [INFO] Running command /bin/sh -c docker ps | grep -q 956d454b48fa
2024/02/03 02:04:51.139093 [ERROR] docker container quit unexpectedly on 2024-02-03 02:04:51.139076473 +0000 UTC: Command /bin/sh -c docker ps | grep -q 956d454b48fa failed with error exit status 1
2024/02/03 02:04:51.139120 [INFO] Running command /bin/sh -c docker logs 956d454b48fa
2024/02/03 02:04:51.159770 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 956d454b48fa: Command /bin/sh -c docker ps | grep -q 956d454b48fa failed with error exit status 1 

2024/02/03 02:04:51.159780 [INFO] Executing cleanup logic
2024/02/03 02:04:51.159969 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 03:04:52.235507 [INFO] Starting...
2024/02/03 03:04:52.235546 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 03:04:52.235570 [INFO] reading event message file
2024/02/03 03:04:52.236439 [INFO] Engine received EB command userdata-exec

2024/02/03 03:04:52.243622 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 03:04:52.688215 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 03:04:53.141168 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 03:04:53.141743 [INFO] Engine command: (self-startup)

2024/02/03 03:04:53.141766 [INFO] Downloading EB Application...
2024/02/03 03:04:53.141771 [INFO] Region: eu-west-1
2024/02/03 03:04:53.141774 [INFO] envID: e-8gmkc7rmw6
2024/02/03 03:04:53.141779 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 03:04:53.141783 [INFO] Using manifest file name from command request
2024/02/03 03:04:53.141800 [INFO] Unable to get version manifest file.
2024/02/03 03:04:53.141810 [INFO] Downloading latest manifest available.
2024/02/03 03:04:53.141813 [INFO] Download latest app version manifest
2024/02/03 03:04:53.142043 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 03:04:53.180486 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 03:04:53.180666 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 03:04:53.193166 [INFO] Download successful124bytes downloaded
2024/02/03 03:04:53.193384 [INFO] Trying to read and parse version manifest...
2024/02/03 03:04:53.193461 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 03:04:53.220115 [INFO] Download successful264bytes downloaded
2024/02/03 03:04:53.220472 [INFO] Executing instruction: SyncClock
2024/02/03 03:04:53.220477 [INFO] Starting SyncClock
2024/02/03 03:04:53.220487 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 03:04:53.225579 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 03:04:38 2024
System time     : 0.000002857 seconds slow of NTP time
Last offset     : -0.000002357 seconds
RMS offset      : 0.000001622 seconds
Frequency       : 0.129 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.047 ppm
Root delay      : 0.000408554 seconds
Root dispersion : 0.000304021 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/03 03:04:53.225610 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 03:04:53.230172 [INFO] 200 OK

2024/02/03 03:04:53.230268 [INFO] Skipping Configure OS
2024/02/03 03:04:53.230274 [INFO] Skipping LockRepo
2024/02/03 03:04:53.230278 [INFO] Skipping GenerateEBBanner
2024/02/03 03:04:53.230282 [INFO] Skipping Install Process Manager
2024/02/03 03:04:53.230286 [INFO] Skipping install syslog
2024/02/03 03:04:53.230290 [INFO] Skipping install cron
2024/02/03 03:04:53.230294 [INFO] Skipping install proxy
2024/02/03 03:04:53.230298 [INFO] Skipping installhealthd
2024/02/03 03:04:53.230301 [INFO] Skipping Install Log Streaming Manager
2024/02/03 03:04:53.230305 [INFO] Skipping install X-Ray
2024/02/03 03:04:53.230309 [INFO] Skipping install Third Party License
2024/02/03 03:04:53.230314 [INFO] Skipping installSqsd
2024/02/03 03:04:53.230317 [INFO] Skipping bootstraphealthd
2024/02/03 03:04:53.230321 [INFO] Skipping Install yum packages
2024/02/03 03:04:53.230325 [INFO] Skipping install docker-compose
2024/02/03 03:04:53.230329 [INFO] Skipping Configure Docker Daemon
2024/02/03 03:04:53.230332 [INFO] Skipping MarkBaked
2024/02/03 03:04:53.230338 [INFO] Skipping TuneSystemSettings
2024/02/03 03:04:53.230341 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 03:04:53.230343 [INFO] Initialize LogRotate files and directories
2024/02/03 03:04:53.242656 [INFO] Skipping BootstrapCFNHup
2024/02/03 03:04:53.242668 [INFO] Executing instruction: StartCFNHup
2024/02/03 03:04:53.242671 [INFO] Start cfn-hup
2024/02/03 03:04:53.242689 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 03:04:53.260154 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 03:04:53.270700 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 03:04:53.270734 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 03:04:53.270738 [INFO] Executing instruction: Start Docker
2024/02/03 03:04:53.270742 [INFO] Starting Docker...
2024/02/03 03:04:53.270821 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 03:04:53.271890 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 03:04:53.273269 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 03:04:53.642187 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 03:04:53.664011 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 03:04:53.664091 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 03:04:53.690038 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 03:04:53.699647 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 03:04:53.711754 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 03:04:53.814033 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 03:04:53.814141 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 03:04:54.200261 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 03:04:54.588173 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 03:04:54.600780 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 03:04:54.904042 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 03:04:54.914429 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 03:04:54.930889 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 03:04:54.942239 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 03:04:56.111950 [INFO] Skipping Setup Docker Options
2024/02/03 03:04:56.111971 [INFO] Skipping MarkBootstrapped
2024/02/03 03:04:56.111974 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 03:04:56.112067 [INFO] Starting SwitchCFNStack
2024/02/03 03:04:56.112072 [INFO] Executing instruction: stopSqsd
2024/02/03 03:04:56.112075 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 03:04:56.112078 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 03:04:56.112081 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 03:04:56.112095 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 03:04:56.621828 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 03:04:56.621874 [INFO] Executing instruction: StagedockerApplication
2024/02/03 03:04:56.621891 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 03:04:56.643608 [INFO] Pruning containers ...
2024/02/03 03:04:56.643640 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 03:04:56.674541 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
956d454b48fa   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             peaceful_hawking

2024/02/03 03:04:56.674573 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 03:04:56.700876 [INFO] Deleted Containers:
956d454b48fa5a789101bafd06dc15c17cbfcc3f3860c3ac67e7476bc87d721b

Total reclaimed space: 0B

2024/02/03 03:04:56.700902 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 03:04:56.720792 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 03:04:56.721012 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 03:04:56.724476 [INFO] application/json

2024/02/03 03:04:56.724504 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 03:04:56.807455 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/03 03:04:56.807621 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 03:04:56.811041 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 03:04:56.811331 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 03:04:56.811436 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 03:04:56.811517 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 03:04:56.811595 [INFO] Executing instruction: Generate environment file
2024/02/03 03:04:56.812274 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 03:04:56.812366 [INFO] start build docker app
2024/02/03 03:04:56.813355 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 03:04:56.813434 [INFO] fetching image and ports
2024/02/03 03:04:56.815953 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 03:04:56.816011 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 03:04:56.816025 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 03:04:56.816034 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 03:04:57.808217 [INFO] Login Succeeded

2024/02/03 03:04:57.808239 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 03:04:57.808247 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 03:04:57.808268 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 03:04:57.969817 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 03:04:57.969839 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 03:04:57.969843 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 03:04:57.969846 [INFO] start to build docker image
2024/02/03 03:04:57.969860 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 03:04:58.252222 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 03:04:58.252271 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 03:04:58.252277 [INFO] successfully build docker image
2024/02/03 03:04:58.252280 [INFO] save staging docker image id
2024/02/03 03:04:58.252299 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 03:04:58.298744 [INFO] c176d18fbf65

2024/02/03 03:04:58.298936 [INFO] Executing instruction: configure X-Ray
2024/02/03 03:04:58.298943 [INFO] X-Ray is not enabled.
2024/02/03 03:04:58.298947 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 03:04:58.310653 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 03:04:58.315533 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 03:04:58.341450 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 03:04:58.341549 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 03:04:58.352863 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 03:04:58.362437 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 03:04:58.380419 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 03:04:58.429655 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 03:04:58.779046 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 03:04:58.779134 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 03:04:59.152218 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 03:04:59.191262 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 03:04:59.542379 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 03:04:59.554635 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 03:04:59.565623 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 03:04:59.843868 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 03:04:59.855435 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 03:05:00.433256 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 03:05:00.433296 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 03:05:00.455703 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 03:05:00.465185 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 03:05:00.545146 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 03:05:00.546245 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 03:05:00.547098 [INFO] Executing instruction: configure log streaming
2024/02/03 03:05:00.547109 [INFO] log streaming is not enabled
2024/02/03 03:05:00.547112 [INFO] disable log stream
2024/02/03 03:05:00.547127 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 03:05:00.577436 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 03:05:00.602240 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 03:05:00.602265 [INFO] Checking if logs need forced rotation
2024/02/03 03:05:00.602285 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 03:05:01.336727 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 03:05:02.140707 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 03:05:02.143182 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 03:05:02.645130 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 03:05:02.664638 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 03:05:02.664654 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 03:05:02.664667 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 03:05:03.152540 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 03:05:03.152596 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 03:05:03.152620 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 03:05:03.152623 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 03:05:03.152643 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 03:05:03.152655 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 03:05:03.152658 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 03:05:03.152664 [INFO] Executing instruction: stop X-Ray
2024/02/03 03:05:03.152674 [INFO] stop X-Ray ...
2024/02/03 03:05:03.152775 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 03:05:03.169327 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 03:05:03.169404 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 03:05:03.186183 [INFO] Executing instruction: Run Docker Container
2024/02/03 03:05:03.186212 [INFO] stop currently running containers...
2024/02/03 03:05:03.186221 [INFO] detected old app is not docker compose app
2024/02/03 03:05:03.186234 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 03:05:03.212590 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 03:05:03.230205 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 03:05:03.230240 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 03:05:03.244994 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 03:05:03.245033 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 03:05:03.258559 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 03:05:03.258607 [INFO] stopping current container: 956d454b48fa
2024/02/03 03:05:03.258618 [INFO] Running command /bin/sh -c docker ps | grep -q 956d454b48fa
2024/02/03 03:05:03.280863 [INFO] Running command /bin/sh -c docker ps | grep -q 956d454b48fa
2024/02/03 03:05:03.337501 [INFO] Pruning containers ...
2024/02/03 03:05:03.338685 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 03:05:03.377118 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 03:05:03.377153 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 03:05:03.395505 [INFO] Total reclaimed space: 0B

2024/02/03 03:05:03.395530 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 03:05:03.417213 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 03:05:03.417247 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 03:05:03.440172 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 03:05:03.440193 [INFO] Removing /var/app/current/ if it exists
2024/02/03 03:05:03.440302 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 03:05:03.440322 [INFO] detected new app is not docker compose app
2024/02/03 03:05:03.440375 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 03:05:03.949065 [INFO] 7b75abbc2f5c581846a6db5a35690064330375bb6417c8087ea1c939077dd3c1

2024/02/03 03:05:08.953608 [INFO] Running command /bin/sh -c docker ps | grep -q 7b75abbc2f5c
2024/02/03 03:05:08.995534 [ERROR] docker container quit unexpectedly on 2024-02-03 03:05:08.995425782 +0000 UTC: Command /bin/sh -c docker ps | grep -q 7b75abbc2f5c failed with error exit status 1
2024/02/03 03:05:08.995726 [INFO] Running command /bin/sh -c docker logs 7b75abbc2f5c
2024/02/03 03:05:09.052703 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 7b75abbc2f5c: Command /bin/sh -c docker ps | grep -q 7b75abbc2f5c failed with error exit status 1 

2024/02/03 03:05:09.052712 [INFO] Executing cleanup logic
2024/02/03 03:05:09.053142 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 04:05:10.090842 [INFO] Starting...
2024/02/03 04:05:10.090892 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 04:05:10.090920 [INFO] reading event message file
2024/02/03 04:05:10.093347 [INFO] Engine received EB command userdata-exec

2024/02/03 04:05:10.102647 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 04:05:10.652530 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 04:05:11.179475 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 04:05:11.179566 [INFO] Engine command: (self-startup)

2024/02/03 04:05:11.179574 [INFO] Downloading EB Application...
2024/02/03 04:05:11.179578 [INFO] Region: eu-west-1
2024/02/03 04:05:11.179581 [INFO] envID: e-8gmkc7rmw6
2024/02/03 04:05:11.179584 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 04:05:11.179588 [INFO] Using manifest file name from command request
2024/02/03 04:05:11.179608 [INFO] Unable to get version manifest file.
2024/02/03 04:05:11.179610 [INFO] Downloading latest manifest available.
2024/02/03 04:05:11.179612 [INFO] Download latest app version manifest
2024/02/03 04:05:11.179822 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 04:05:11.226476 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 04:05:11.226861 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 04:05:11.240598 [INFO] Download successful124bytes downloaded
2024/02/03 04:05:11.240803 [INFO] Trying to read and parse version manifest...
2024/02/03 04:05:11.240880 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 04:05:11.280905 [INFO] Download successful264bytes downloaded
2024/02/03 04:05:11.281260 [INFO] Executing instruction: SyncClock
2024/02/03 04:05:11.281266 [INFO] Starting SyncClock
2024/02/03 04:05:11.281276 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 04:05:11.287509 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 04:05:00 2024
System time     : 0.000001166 seconds fast of NTP time
Last offset     : -0.000000180 seconds
RMS offset      : 0.000002605 seconds
Frequency       : 0.263 ppm slow
Residual freq   : +0.000 ppm
Skew            : 0.041 ppm
Root delay      : 0.000429277 seconds
Root dispersion : 0.000449699 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/03 04:05:11.287535 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 04:05:11.293194 [INFO] 200 OK

2024/02/03 04:05:11.293291 [INFO] Skipping Configure OS
2024/02/03 04:05:11.293296 [INFO] Skipping LockRepo
2024/02/03 04:05:11.293300 [INFO] Skipping GenerateEBBanner
2024/02/03 04:05:11.293304 [INFO] Skipping Install Process Manager
2024/02/03 04:05:11.293309 [INFO] Skipping install syslog
2024/02/03 04:05:11.293313 [INFO] Skipping install cron
2024/02/03 04:05:11.293316 [INFO] Skipping install proxy
2024/02/03 04:05:11.293320 [INFO] Skipping installhealthd
2024/02/03 04:05:11.293324 [INFO] Skipping Install Log Streaming Manager
2024/02/03 04:05:11.293327 [INFO] Skipping install X-Ray
2024/02/03 04:05:11.293331 [INFO] Skipping install Third Party License
2024/02/03 04:05:11.293339 [INFO] Skipping installSqsd
2024/02/03 04:05:11.293343 [INFO] Skipping bootstraphealthd
2024/02/03 04:05:11.293347 [INFO] Skipping Install yum packages
2024/02/03 04:05:11.293351 [INFO] Skipping install docker-compose
2024/02/03 04:05:11.293356 [INFO] Skipping Configure Docker Daemon
2024/02/03 04:05:11.293360 [INFO] Skipping MarkBaked
2024/02/03 04:05:11.293366 [INFO] Skipping TuneSystemSettings
2024/02/03 04:05:11.293369 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 04:05:11.293371 [INFO] Initialize LogRotate files and directories
2024/02/03 04:05:11.308832 [INFO] Skipping BootstrapCFNHup
2024/02/03 04:05:11.308844 [INFO] Executing instruction: StartCFNHup
2024/02/03 04:05:11.308847 [INFO] Start cfn-hup
2024/02/03 04:05:11.308923 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 04:05:11.325865 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 04:05:11.336651 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 04:05:11.336687 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 04:05:11.336691 [INFO] Executing instruction: Start Docker
2024/02/03 04:05:11.336694 [INFO] Starting Docker...
2024/02/03 04:05:11.336781 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 04:05:11.338072 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 04:05:11.339411 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 04:05:11.662228 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 04:05:11.679968 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 04:05:11.680005 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 04:05:11.693399 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 04:05:11.704409 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 04:05:11.718830 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 04:05:11.765723 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 04:05:11.765784 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 04:05:12.142683 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 04:05:12.542774 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 04:05:12.557177 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 04:05:12.866838 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 04:05:12.876054 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 04:05:12.892860 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 04:05:12.902045 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 04:05:14.340295 [INFO] Skipping Setup Docker Options
2024/02/03 04:05:14.340314 [INFO] Skipping MarkBootstrapped
2024/02/03 04:05:14.340318 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 04:05:14.340438 [INFO] Starting SwitchCFNStack
2024/02/03 04:05:14.340444 [INFO] Executing instruction: stopSqsd
2024/02/03 04:05:14.340450 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 04:05:14.340508 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 04:05:14.340514 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 04:05:14.340536 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 04:05:14.907415 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 04:05:14.908022 [INFO] Executing instruction: StagedockerApplication
2024/02/03 04:05:14.908255 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 04:05:14.955946 [INFO] Pruning containers ...
2024/02/03 04:05:14.955978 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 04:05:14.976552 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
7b75abbc2f5c   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             vibrant_saha

2024/02/03 04:05:14.976582 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 04:05:15.021842 [INFO] Deleted Containers:
7b75abbc2f5c581846a6db5a35690064330375bb6417c8087ea1c939077dd3c1

Total reclaimed space: 0B

2024/02/03 04:05:15.021868 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 04:05:15.053737 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 04:05:15.054036 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 04:05:15.058692 [INFO] application/json

2024/02/03 04:05:15.058712 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 04:05:15.191553 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 04:05:15.191745 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 04:05:15.193040 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 04:05:15.193142 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 04:05:15.193162 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 04:05:15.193165 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 04:05:15.193171 [INFO] Executing instruction: Generate environment file
2024/02/03 04:05:15.193204 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 04:05:15.193208 [INFO] start build docker app
2024/02/03 04:05:15.193637 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 04:05:15.193643 [INFO] fetching image and ports
2024/02/03 04:05:15.195215 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 04:05:15.195370 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 04:05:15.195380 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 04:05:15.195389 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 04:05:16.293233 [INFO] Login Succeeded

2024/02/03 04:05:16.293275 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 04:05:16.293280 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 04:05:16.293300 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 04:05:16.436012 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 04:05:16.436039 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 04:05:16.436042 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 04:05:16.436045 [INFO] start to build docker image
2024/02/03 04:05:16.436060 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 04:05:16.709088 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 04:05:16.709117 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 04:05:16.709122 [INFO] successfully build docker image
2024/02/03 04:05:16.709125 [INFO] save staging docker image id
2024/02/03 04:05:16.709139 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 04:05:16.734710 [INFO] c176d18fbf65

2024/02/03 04:05:16.734919 [INFO] Executing instruction: configure X-Ray
2024/02/03 04:05:16.734925 [INFO] X-Ray is not enabled.
2024/02/03 04:05:16.734928 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 04:05:16.746978 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 04:05:16.748861 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 04:05:16.780120 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 04:05:16.780156 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 04:05:16.795180 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 04:05:16.806400 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 04:05:16.820000 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 04:05:16.889391 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 04:05:17.212758 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 04:05:17.212971 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 04:05:17.472776 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 04:05:17.484220 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 04:05:17.815761 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 04:05:17.825312 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 04:05:17.834193 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 04:05:18.183010 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 04:05:18.193671 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 04:05:18.507294 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 04:05:18.507331 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 04:05:18.523155 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 04:05:18.533945 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 04:05:18.658819 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 04:05:18.660074 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 04:05:18.661172 [INFO] Executing instruction: configure log streaming
2024/02/03 04:05:18.661184 [INFO] log streaming is not enabled
2024/02/03 04:05:18.661187 [INFO] disable log stream
2024/02/03 04:05:18.661202 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 04:05:18.693436 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 04:05:18.717224 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 04:05:18.717292 [INFO] Checking if logs need forced rotation
2024/02/03 04:05:18.717316 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 04:05:19.297201 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 04:05:19.717582 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 04:05:19.719158 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 04:05:19.799705 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 04:05:19.816584 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 04:05:19.816598 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 04:05:19.816609 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 04:05:20.274785 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 04:05:20.274815 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 04:05:20.274838 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 04:05:20.274841 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 04:05:20.274862 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 04:05:20.274876 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 04:05:20.274879 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 04:05:20.274886 [INFO] Executing instruction: stop X-Ray
2024/02/03 04:05:20.274889 [INFO] stop X-Ray ...
2024/02/03 04:05:20.274901 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 04:05:20.291034 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 04:05:20.291066 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 04:05:20.308809 [INFO] Executing instruction: Run Docker Container
2024/02/03 04:05:20.308843 [INFO] stop currently running containers...
2024/02/03 04:05:20.308854 [INFO] detected old app is not docker compose app
2024/02/03 04:05:20.308865 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 04:05:20.382539 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 04:05:20.400585 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 04:05:20.400615 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 04:05:20.414384 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 04:05:20.414428 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 04:05:20.428806 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 04:05:20.428856 [INFO] stopping current container: 7b75abbc2f5c
2024/02/03 04:05:20.428866 [INFO] Running command /bin/sh -c docker ps | grep -q 7b75abbc2f5c
2024/02/03 04:05:20.453556 [INFO] Running command /bin/sh -c docker ps | grep -q 7b75abbc2f5c
2024/02/03 04:05:20.476311 [INFO] Pruning containers ...
2024/02/03 04:05:20.476336 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 04:05:20.496728 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 04:05:20.496756 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 04:05:20.524452 [INFO] Total reclaimed space: 0B

2024/02/03 04:05:20.524481 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 04:05:20.561872 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 04:05:20.561901 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 04:05:20.584585 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 04:05:20.584606 [INFO] Removing /var/app/current/ if it exists
2024/02/03 04:05:20.584702 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 04:05:20.584720 [INFO] detected new app is not docker compose app
2024/02/03 04:05:20.584777 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 04:05:21.060827 [INFO] 82f7c4b7d9d94579d1b0c690cbbb8a5586b0be39fb75b3adec27d7bc8373db8a

2024/02/03 04:05:26.065128 [INFO] Running command /bin/sh -c docker ps | grep -q 82f7c4b7d9d9
2024/02/03 04:05:26.097219 [ERROR] docker container quit unexpectedly on 2024-02-03 04:05:26.097199964 +0000 UTC: Command /bin/sh -c docker ps | grep -q 82f7c4b7d9d9 failed with error exit status 1
2024/02/03 04:05:26.097251 [INFO] Running command /bin/sh -c docker logs 82f7c4b7d9d9
2024/02/03 04:05:26.123901 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 82f7c4b7d9d9: Command /bin/sh -c docker ps | grep -q 82f7c4b7d9d9 failed with error exit status 1 

2024/02/03 04:05:26.123985 [INFO] Executing cleanup logic
2024/02/03 04:05:26.124341 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 05:05:27.315153 [INFO] Starting...
2024/02/03 05:05:27.315199 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 05:05:27.315224 [INFO] reading event message file
2024/02/03 05:05:27.316005 [INFO] Engine received EB command userdata-exec

2024/02/03 05:05:27.321999 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 05:05:27.757581 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 05:05:28.257181 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 05:05:28.257279 [INFO] Engine command: (self-startup)

2024/02/03 05:05:28.257287 [INFO] Downloading EB Application...
2024/02/03 05:05:28.257290 [INFO] Region: eu-west-1
2024/02/03 05:05:28.257294 [INFO] envID: e-8gmkc7rmw6
2024/02/03 05:05:28.257297 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 05:05:28.257300 [INFO] Using manifest file name from command request
2024/02/03 05:05:28.257312 [INFO] Unable to get version manifest file.
2024/02/03 05:05:28.257314 [INFO] Downloading latest manifest available.
2024/02/03 05:05:28.257316 [INFO] Download latest app version manifest
2024/02/03 05:05:28.257435 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 05:05:28.295312 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 05:05:28.295498 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 05:05:28.306355 [INFO] Download successful124bytes downloaded
2024/02/03 05:05:28.306493 [INFO] Trying to read and parse version manifest...
2024/02/03 05:05:28.306564 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 05:05:28.329371 [INFO] Download successful264bytes downloaded
2024/02/03 05:05:28.329761 [INFO] Executing instruction: SyncClock
2024/02/03 05:05:28.329767 [INFO] Starting SyncClock
2024/02/03 05:05:28.329782 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 05:05:28.335878 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 05:05:23 2024
System time     : 0.000002134 seconds slow of NTP time
Last offset     : -0.000000990 seconds
RMS offset      : 0.000001083 seconds
Frequency       : 0.119 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.020 ppm
Root delay      : 0.000439298 seconds
Root dispersion : 0.000454760 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/03 05:05:28.335904 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 05:05:28.340426 [INFO] 200 OK

2024/02/03 05:05:28.340523 [INFO] Skipping Configure OS
2024/02/03 05:05:28.340529 [INFO] Skipping LockRepo
2024/02/03 05:05:28.340533 [INFO] Skipping GenerateEBBanner
2024/02/03 05:05:28.340538 [INFO] Skipping Install Process Manager
2024/02/03 05:05:28.340541 [INFO] Skipping install syslog
2024/02/03 05:05:28.340545 [INFO] Skipping install cron
2024/02/03 05:05:28.340549 [INFO] Skipping install proxy
2024/02/03 05:05:28.340553 [INFO] Skipping installhealthd
2024/02/03 05:05:28.340556 [INFO] Skipping Install Log Streaming Manager
2024/02/03 05:05:28.340560 [INFO] Skipping install X-Ray
2024/02/03 05:05:28.340568 [INFO] Skipping install Third Party License
2024/02/03 05:05:28.340573 [INFO] Skipping installSqsd
2024/02/03 05:05:28.340577 [INFO] Skipping bootstraphealthd
2024/02/03 05:05:28.340581 [INFO] Skipping Install yum packages
2024/02/03 05:05:28.340587 [INFO] Skipping install docker-compose
2024/02/03 05:05:28.340591 [INFO] Skipping Configure Docker Daemon
2024/02/03 05:05:28.340595 [INFO] Skipping MarkBaked
2024/02/03 05:05:28.340599 [INFO] Skipping TuneSystemSettings
2024/02/03 05:05:28.340602 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 05:05:28.340605 [INFO] Initialize LogRotate files and directories
2024/02/03 05:05:28.355340 [INFO] Skipping BootstrapCFNHup
2024/02/03 05:05:28.355352 [INFO] Executing instruction: StartCFNHup
2024/02/03 05:05:28.355355 [INFO] Start cfn-hup
2024/02/03 05:05:28.355373 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 05:05:28.369105 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 05:05:28.377990 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 05:05:28.378021 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 05:05:28.378024 [INFO] Executing instruction: Start Docker
2024/02/03 05:05:28.378027 [INFO] Starting Docker...
2024/02/03 05:05:28.378084 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 05:05:28.378987 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 05:05:28.380022 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 05:05:28.632567 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 05:05:28.651598 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 05:05:28.651639 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 05:05:28.663920 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 05:05:28.673617 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 05:05:28.686649 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 05:05:28.783825 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 05:05:28.783879 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 05:05:29.107994 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 05:05:29.393529 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 05:05:29.405729 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 05:05:29.755760 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 05:05:29.766440 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 05:05:29.781558 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 05:05:29.791054 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 05:05:31.159668 [INFO] Skipping Setup Docker Options
2024/02/03 05:05:31.159689 [INFO] Skipping MarkBootstrapped
2024/02/03 05:05:31.159694 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 05:05:31.159900 [INFO] Starting SwitchCFNStack
2024/02/03 05:05:31.159910 [INFO] Executing instruction: stopSqsd
2024/02/03 05:05:31.159914 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 05:05:31.159918 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 05:05:31.159922 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 05:05:31.160107 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 05:05:31.574271 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 05:05:31.574298 [INFO] Executing instruction: StagedockerApplication
2024/02/03 05:05:31.574310 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 05:05:31.596783 [INFO] Pruning containers ...
2024/02/03 05:05:31.596814 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 05:05:31.620567 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
82f7c4b7d9d9   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             epic_williams

2024/02/03 05:05:31.620595 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 05:05:31.647306 [INFO] Deleted Containers:
82f7c4b7d9d94579d1b0c690cbbb8a5586b0be39fb75b3adec27d7bc8373db8a

Total reclaimed space: 0B

2024/02/03 05:05:31.647341 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 05:05:31.669232 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 05:05:31.669453 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 05:05:31.674964 [INFO] application/json

2024/02/03 05:05:31.674996 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 05:05:31.784103 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 05:05:31.784330 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 05:05:31.785707 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 05:05:31.785734 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 05:05:31.785761 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 05:05:31.785764 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 05:05:31.785768 [INFO] Executing instruction: Generate environment file
2024/02/03 05:05:31.785795 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 05:05:31.785799 [INFO] start build docker app
2024/02/03 05:05:31.786157 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 05:05:31.786161 [INFO] fetching image and ports
2024/02/03 05:05:31.787939 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 05:05:31.787999 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 05:05:31.788013 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 05:05:31.788086 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 05:05:32.759063 [INFO] Login Succeeded

2024/02/03 05:05:32.759081 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 05:05:32.759087 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 05:05:32.759105 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 05:05:32.919595 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 05:05:32.919618 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 05:05:32.919621 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 05:05:32.919624 [INFO] start to build docker image
2024/02/03 05:05:32.919639 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 05:05:33.212557 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 05:05:33.212578 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 05:05:33.212583 [INFO] successfully build docker image
2024/02/03 05:05:33.212586 [INFO] save staging docker image id
2024/02/03 05:05:33.212620 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 05:05:33.238563 [INFO] c176d18fbf65

2024/02/03 05:05:33.238709 [INFO] Executing instruction: configure X-Ray
2024/02/03 05:05:33.238716 [INFO] X-Ray is not enabled.
2024/02/03 05:05:33.238719 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 05:05:33.244209 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 05:05:33.246180 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 05:05:33.260567 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 05:05:33.260601 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 05:05:33.271755 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 05:05:33.281572 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 05:05:33.297527 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 05:05:33.388230 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 05:05:33.734369 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 05:05:33.734435 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 05:05:34.048361 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 05:05:34.059171 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 05:05:34.386327 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 05:05:34.398658 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 05:05:34.408882 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 05:05:34.747287 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 05:05:34.762490 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 05:05:35.085148 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 05:05:35.085185 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 05:05:35.096711 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 05:05:35.106718 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 05:05:35.185412 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 05:05:35.186516 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 05:05:35.187532 [INFO] Executing instruction: configure log streaming
2024/02/03 05:05:35.187542 [INFO] log streaming is not enabled
2024/02/03 05:05:35.187546 [INFO] disable log stream
2024/02/03 05:05:35.187560 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 05:05:35.209471 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 05:05:35.238207 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 05:05:35.238232 [INFO] Checking if logs need forced rotation
2024/02/03 05:05:35.238250 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 05:05:35.799158 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 05:05:36.228251 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 05:05:36.230139 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 05:05:36.330099 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 05:05:36.345745 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 05:05:36.345759 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 05:05:36.345772 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 05:05:36.790717 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 05:05:36.790741 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 05:05:36.790766 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 05:05:36.790771 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 05:05:36.790792 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 05:05:36.790803 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 05:05:36.790806 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 05:05:36.790819 [INFO] Executing instruction: stop X-Ray
2024/02/03 05:05:36.790822 [INFO] stop X-Ray ...
2024/02/03 05:05:36.790832 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 05:05:36.807354 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 05:05:36.807393 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 05:05:36.825511 [INFO] Executing instruction: Run Docker Container
2024/02/03 05:05:36.825540 [INFO] stop currently running containers...
2024/02/03 05:05:36.825550 [INFO] detected old app is not docker compose app
2024/02/03 05:05:36.825572 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 05:05:36.852697 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 05:05:36.868798 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 05:05:36.868854 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 05:05:36.883617 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 05:05:36.883651 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 05:05:36.901545 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 05:05:36.901598 [INFO] stopping current container: 82f7c4b7d9d9
2024/02/03 05:05:36.901613 [INFO] Running command /bin/sh -c docker ps | grep -q 82f7c4b7d9d9
2024/02/03 05:05:36.926494 [INFO] Running command /bin/sh -c docker ps | grep -q 82f7c4b7d9d9
2024/02/03 05:05:36.946054 [INFO] Pruning containers ...
2024/02/03 05:05:36.946082 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 05:05:36.965135 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 05:05:36.965170 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 05:05:36.986441 [INFO] Total reclaimed space: 0B

2024/02/03 05:05:36.986467 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 05:05:37.009814 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 05:05:37.009846 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 05:05:37.034536 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 05:05:37.034558 [INFO] Removing /var/app/current/ if it exists
2024/02/03 05:05:37.034650 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 05:05:37.034666 [INFO] detected new app is not docker compose app
2024/02/03 05:05:37.034713 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 05:05:37.455353 [INFO] 85b8723c033506ff87555349f69339dc42e29ce6db0424b6c88a91650404cd11

2024/02/03 05:05:42.455938 [INFO] Running command /bin/sh -c docker ps | grep -q 85b8723c0335
2024/02/03 05:05:42.513736 [ERROR] docker container quit unexpectedly on 2024-02-03 05:05:42.513560088 +0000 UTC: Command /bin/sh -c docker ps | grep -q 85b8723c0335 failed with error exit status 1
2024/02/03 05:05:42.514412 [INFO] Running command /bin/sh -c docker logs 85b8723c0335
2024/02/03 05:05:42.545223 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 85b8723c0335: Command /bin/sh -c docker ps | grep -q 85b8723c0335 failed with error exit status 1 

2024/02/03 05:05:42.545232 [INFO] Executing cleanup logic
2024/02/03 05:05:42.545412 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 06:05:43.561100 [INFO] Starting...
2024/02/03 06:05:43.561138 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 06:05:43.561163 [INFO] reading event message file
2024/02/03 06:05:43.562042 [INFO] Engine received EB command userdata-exec

2024/02/03 06:05:43.572483 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 06:05:43.970606 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 06:05:44.458360 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 06:05:44.458450 [INFO] Engine command: (self-startup)

2024/02/03 06:05:44.458457 [INFO] Downloading EB Application...
2024/02/03 06:05:44.458505 [INFO] Region: eu-west-1
2024/02/03 06:05:44.458509 [INFO] envID: e-8gmkc7rmw6
2024/02/03 06:05:44.458512 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 06:05:44.458516 [INFO] Using manifest file name from command request
2024/02/03 06:05:44.458532 [INFO] Unable to get version manifest file.
2024/02/03 06:05:44.458535 [INFO] Downloading latest manifest available.
2024/02/03 06:05:44.458537 [INFO] Download latest app version manifest
2024/02/03 06:05:44.458642 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 06:05:44.504274 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 06:05:44.504495 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 06:05:44.516744 [INFO] Download successful124bytes downloaded
2024/02/03 06:05:44.516966 [INFO] Trying to read and parse version manifest...
2024/02/03 06:05:44.517044 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 06:05:44.550792 [INFO] Download successful264bytes downloaded
2024/02/03 06:05:44.551370 [INFO] Executing instruction: SyncClock
2024/02/03 06:05:44.551377 [INFO] Starting SyncClock
2024/02/03 06:05:44.551412 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 06:05:44.558122 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 06:05:13 2024
System time     : 0.000000002 seconds fast of NTP time
Last offset     : -0.000004044 seconds
RMS offset      : 0.000003399 seconds
Frequency       : 0.008 ppm fast
Residual freq   : -0.004 ppm
Skew            : 0.166 ppm
Root delay      : 0.000435165 seconds
Root dispersion : 0.000443375 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/03 06:05:44.558141 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 06:05:44.563347 [INFO] 200 OK

2024/02/03 06:05:44.563541 [INFO] Skipping Configure OS
2024/02/03 06:05:44.563562 [INFO] Skipping LockRepo
2024/02/03 06:05:44.563567 [INFO] Skipping GenerateEBBanner
2024/02/03 06:05:44.563572 [INFO] Skipping Install Process Manager
2024/02/03 06:05:44.563576 [INFO] Skipping install syslog
2024/02/03 06:05:44.563580 [INFO] Skipping install cron
2024/02/03 06:05:44.563584 [INFO] Skipping install proxy
2024/02/03 06:05:44.563588 [INFO] Skipping installhealthd
2024/02/03 06:05:44.563592 [INFO] Skipping Install Log Streaming Manager
2024/02/03 06:05:44.563595 [INFO] Skipping install X-Ray
2024/02/03 06:05:44.563599 [INFO] Skipping install Third Party License
2024/02/03 06:05:44.563604 [INFO] Skipping installSqsd
2024/02/03 06:05:44.563608 [INFO] Skipping bootstraphealthd
2024/02/03 06:05:44.563613 [INFO] Skipping Install yum packages
2024/02/03 06:05:44.563617 [INFO] Skipping install docker-compose
2024/02/03 06:05:44.563623 [INFO] Skipping Configure Docker Daemon
2024/02/03 06:05:44.563628 [INFO] Skipping MarkBaked
2024/02/03 06:05:44.563633 [INFO] Skipping TuneSystemSettings
2024/02/03 06:05:44.563637 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 06:05:44.563641 [INFO] Initialize LogRotate files and directories
2024/02/03 06:05:44.584405 [INFO] Skipping BootstrapCFNHup
2024/02/03 06:05:44.584418 [INFO] Executing instruction: StartCFNHup
2024/02/03 06:05:44.584421 [INFO] Start cfn-hup
2024/02/03 06:05:44.584437 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 06:05:44.597368 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 06:05:44.611809 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 06:05:44.611842 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 06:05:44.611845 [INFO] Executing instruction: Start Docker
2024/02/03 06:05:44.611848 [INFO] Starting Docker...
2024/02/03 06:05:44.611908 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 06:05:44.612921 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 06:05:44.614249 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 06:05:44.900422 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 06:05:44.914113 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 06:05:44.914142 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 06:05:44.928930 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 06:05:44.941468 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 06:05:44.952436 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 06:05:45.048790 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 06:05:45.048898 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 06:05:45.378360 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 06:05:45.794734 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 06:05:45.810940 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 06:05:46.135302 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 06:05:46.145944 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 06:05:46.162025 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 06:05:46.170745 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 06:05:47.397275 [INFO] Skipping Setup Docker Options
2024/02/03 06:05:47.397297 [INFO] Skipping MarkBootstrapped
2024/02/03 06:05:47.397302 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 06:05:47.397425 [INFO] Starting SwitchCFNStack
2024/02/03 06:05:47.397431 [INFO] Executing instruction: stopSqsd
2024/02/03 06:05:47.397435 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 06:05:47.397438 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 06:05:47.397442 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 06:05:47.397460 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 06:05:47.871577 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 06:05:47.871668 [INFO] Executing instruction: StagedockerApplication
2024/02/03 06:05:47.871682 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 06:05:47.894578 [INFO] Pruning containers ...
2024/02/03 06:05:47.894614 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 06:05:47.927158 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
85b8723c0335   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             practical_raman

2024/02/03 06:05:47.927620 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 06:05:47.956702 [INFO] Deleted Containers:
85b8723c033506ff87555349f69339dc42e29ce6db0424b6c88a91650404cd11

Total reclaimed space: 0B

2024/02/03 06:05:47.956726 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 06:05:47.977144 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 06:05:47.977396 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 06:05:47.980358 [INFO] application/json

2024/02/03 06:05:47.980382 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 06:05:48.060281 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/03 06:05:48.060447 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 06:05:48.061718 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 06:05:48.061748 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 06:05:48.061764 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 06:05:48.061766 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 06:05:48.061770 [INFO] Executing instruction: Generate environment file
2024/02/03 06:05:48.061798 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 06:05:48.061801 [INFO] start build docker app
2024/02/03 06:05:48.062293 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 06:05:48.062297 [INFO] fetching image and ports
2024/02/03 06:05:48.064062 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 06:05:48.064124 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 06:05:48.064132 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 06:05:48.064147 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 06:05:49.099776 [INFO] Login Succeeded

2024/02/03 06:05:49.099794 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 06:05:49.099800 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 06:05:49.099819 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 06:05:49.233328 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 06:05:49.233355 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 06:05:49.233366 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 06:05:49.233370 [INFO] start to build docker image
2024/02/03 06:05:49.233387 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 06:05:49.512674 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 06:05:49.512693 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 06:05:49.512697 [INFO] successfully build docker image
2024/02/03 06:05:49.512699 [INFO] save staging docker image id
2024/02/03 06:05:49.512711 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 06:05:49.536982 [INFO] c176d18fbf65

2024/02/03 06:05:49.537116 [INFO] Executing instruction: configure X-Ray
2024/02/03 06:05:49.537122 [INFO] X-Ray is not enabled.
2024/02/03 06:05:49.537125 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 06:05:49.543268 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 06:05:49.545307 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 06:05:49.557519 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 06:05:49.557551 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 06:05:49.568508 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 06:05:49.583344 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 06:05:49.602342 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 06:05:49.679418 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 06:05:49.970331 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 06:05:49.970395 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 06:05:50.290625 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 06:05:50.308312 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 06:05:50.613937 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 06:05:50.623529 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 06:05:50.633060 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 06:05:50.984520 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 06:05:50.994648 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 06:05:51.321423 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 06:05:51.321465 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 06:05:51.335189 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 06:05:51.345321 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 06:05:51.454814 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 06:05:51.455873 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 06:05:51.457275 [INFO] Executing instruction: configure log streaming
2024/02/03 06:05:51.457289 [INFO] log streaming is not enabled
2024/02/03 06:05:51.457292 [INFO] disable log stream
2024/02/03 06:05:51.457317 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 06:05:51.486483 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 06:05:51.507873 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 06:05:51.507899 [INFO] Checking if logs need forced rotation
2024/02/03 06:05:51.507924 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 06:05:52.090810 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 06:05:52.591869 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 06:05:52.593588 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 06:05:53.162022 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 06:05:53.180097 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 06:05:53.180112 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 06:05:53.180124 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 06:05:53.718687 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 06:05:53.718714 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 06:05:53.718743 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 06:05:53.718746 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 06:05:53.718766 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 06:05:53.718778 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 06:05:53.718781 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 06:05:53.718787 [INFO] Executing instruction: stop X-Ray
2024/02/03 06:05:53.718790 [INFO] stop X-Ray ...
2024/02/03 06:05:53.718804 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 06:05:53.735768 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 06:05:53.735803 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 06:05:53.757996 [INFO] Executing instruction: Run Docker Container
2024/02/03 06:05:53.758030 [INFO] stop currently running containers...
2024/02/03 06:05:53.758039 [INFO] detected old app is not docker compose app
2024/02/03 06:05:53.758050 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 06:05:53.782996 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 06:05:53.797848 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 06:05:53.797875 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 06:05:53.824409 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 06:05:53.824443 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 06:05:53.842195 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 06:05:53.842278 [INFO] stopping current container: 85b8723c0335
2024/02/03 06:05:53.842293 [INFO] Running command /bin/sh -c docker ps | grep -q 85b8723c0335
2024/02/03 06:05:53.867373 [INFO] Running command /bin/sh -c docker ps | grep -q 85b8723c0335
2024/02/03 06:05:53.896334 [INFO] Pruning containers ...
2024/02/03 06:05:53.896359 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 06:05:53.927060 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 06:05:53.927090 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 06:05:53.949548 [INFO] Total reclaimed space: 0B

2024/02/03 06:05:53.949581 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 06:05:53.981190 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 06:05:53.981294 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 06:05:54.002594 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 06:05:54.002625 [INFO] Removing /var/app/current/ if it exists
2024/02/03 06:05:54.002729 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 06:05:54.002746 [INFO] detected new app is not docker compose app
2024/02/03 06:05:54.002830 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 06:05:54.450668 [INFO] 0af99fbbb92ea3110695b22848f958e5581b245405aaf6c894f3259d8b2982a0

2024/02/03 06:05:59.451465 [INFO] Running command /bin/sh -c docker ps | grep -q 0af99fbbb92e
2024/02/03 06:05:59.476258 [ERROR] docker container quit unexpectedly on 2024-02-03 06:05:59.476240396 +0000 UTC: Command /bin/sh -c docker ps | grep -q 0af99fbbb92e failed with error exit status 1
2024/02/03 06:05:59.476284 [INFO] Running command /bin/sh -c docker logs 0af99fbbb92e
2024/02/03 06:05:59.500058 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 0af99fbbb92e: Command /bin/sh -c docker ps | grep -q 0af99fbbb92e failed with error exit status 1 

2024/02/03 06:05:59.500068 [INFO] Executing cleanup logic
2024/02/03 06:05:59.500273 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 07:06:00.801314 [INFO] Starting...
2024/02/03 07:06:00.801358 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 07:06:00.801469 [INFO] reading event message file
2024/02/03 07:06:00.802283 [INFO] Engine received EB command userdata-exec

2024/02/03 07:06:00.809038 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 07:06:01.336800 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 07:06:02.380806 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 07:06:02.380895 [INFO] Engine command: (self-startup)

2024/02/03 07:06:02.380903 [INFO] Downloading EB Application...
2024/02/03 07:06:02.380906 [INFO] Region: eu-west-1
2024/02/03 07:06:02.380909 [INFO] envID: e-8gmkc7rmw6
2024/02/03 07:06:02.380912 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 07:06:02.380915 [INFO] Using manifest file name from command request
2024/02/03 07:06:02.380928 [INFO] Unable to get version manifest file.
2024/02/03 07:06:02.380931 [INFO] Downloading latest manifest available.
2024/02/03 07:06:02.380935 [INFO] Download latest app version manifest
2024/02/03 07:06:02.381116 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 07:06:02.428920 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 07:06:02.429204 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 07:06:02.443238 [INFO] Download successful124bytes downloaded
2024/02/03 07:06:02.443594 [INFO] Trying to read and parse version manifest...
2024/02/03 07:06:02.443801 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 07:06:02.468316 [INFO] Download successful264bytes downloaded
2024/02/03 07:06:02.469280 [INFO] Executing instruction: SyncClock
2024/02/03 07:06:02.469288 [INFO] Starting SyncClock
2024/02/03 07:06:02.469305 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 07:06:02.490346 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 07:05:52 2024
System time     : 0.000000772 seconds fast of NTP time
Last offset     : -0.000000447 seconds
RMS offset      : 0.000005416 seconds
Frequency       : 0.270 ppm slow
Residual freq   : -0.000 ppm
Skew            : 0.124 ppm
Root delay      : 0.000409360 seconds
Root dispersion : 0.000398430 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/03 07:06:02.490440 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 07:06:02.504452 [INFO] 200 OK

2024/02/03 07:06:02.507333 [INFO] Skipping Configure OS
2024/02/03 07:06:02.507372 [INFO] Skipping LockRepo
2024/02/03 07:06:02.507379 [INFO] Skipping GenerateEBBanner
2024/02/03 07:06:02.507386 [INFO] Skipping Install Process Manager
2024/02/03 07:06:02.507391 [INFO] Skipping install syslog
2024/02/03 07:06:02.507397 [INFO] Skipping install cron
2024/02/03 07:06:02.507402 [INFO] Skipping install proxy
2024/02/03 07:06:02.507408 [INFO] Skipping installhealthd
2024/02/03 07:06:02.507414 [INFO] Skipping Install Log Streaming Manager
2024/02/03 07:06:02.507420 [INFO] Skipping install X-Ray
2024/02/03 07:06:02.507426 [INFO] Skipping install Third Party License
2024/02/03 07:06:02.507434 [INFO] Skipping installSqsd
2024/02/03 07:06:02.507441 [INFO] Skipping bootstraphealthd
2024/02/03 07:06:02.507449 [INFO] Skipping Install yum packages
2024/02/03 07:06:02.507455 [INFO] Skipping install docker-compose
2024/02/03 07:06:02.507462 [INFO] Skipping Configure Docker Daemon
2024/02/03 07:06:02.507468 [INFO] Skipping MarkBaked
2024/02/03 07:06:02.507479 [INFO] Skipping TuneSystemSettings
2024/02/03 07:06:02.507483 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 07:06:02.507486 [INFO] Initialize LogRotate files and directories
2024/02/03 07:06:02.523163 [INFO] Skipping BootstrapCFNHup
2024/02/03 07:06:02.523182 [INFO] Executing instruction: StartCFNHup
2024/02/03 07:06:02.523187 [INFO] Start cfn-hup
2024/02/03 07:06:02.523239 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 07:06:02.551330 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 07:06:02.577039 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 07:06:02.577186 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 07:06:02.577193 [INFO] Executing instruction: Start Docker
2024/02/03 07:06:02.577196 [INFO] Starting Docker...
2024/02/03 07:06:02.578374 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 07:06:02.579476 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 07:06:02.580733 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 07:06:03.191131 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 07:06:03.237208 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 07:06:03.237246 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 07:06:03.249546 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 07:06:03.272031 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 07:06:03.296062 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 07:06:03.416391 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 07:06:03.416427 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 07:06:03.775598 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 07:06:04.124128 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 07:06:04.136479 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 07:06:04.464928 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 07:06:04.473348 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 07:06:04.488721 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 07:06:04.497350 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 07:06:05.859056 [INFO] Skipping Setup Docker Options
2024/02/03 07:06:05.859077 [INFO] Skipping MarkBootstrapped
2024/02/03 07:06:05.859082 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 07:06:05.859201 [INFO] Starting SwitchCFNStack
2024/02/03 07:06:05.859207 [INFO] Executing instruction: stopSqsd
2024/02/03 07:06:05.859234 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 07:06:05.859238 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 07:06:05.859241 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 07:06:05.859259 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 07:06:06.307552 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 07:06:06.307576 [INFO] Executing instruction: StagedockerApplication
2024/02/03 07:06:06.307587 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 07:06:06.355809 [INFO] Pruning containers ...
2024/02/03 07:06:06.355838 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 07:06:06.406088 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
0af99fbbb92e   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             inspiring_johnson

2024/02/03 07:06:06.406122 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 07:06:06.447108 [INFO] Deleted Containers:
0af99fbbb92ea3110695b22848f958e5581b245405aaf6c894f3259d8b2982a0

Total reclaimed space: 0B

2024/02/03 07:06:06.447133 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 07:06:06.475079 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 07:06:06.475365 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 07:06:06.478410 [INFO] application/json

2024/02/03 07:06:06.478434 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 07:06:06.550745 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 07:06:06.550904 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 07:06:06.552045 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 07:06:06.552068 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 07:06:06.552081 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 07:06:06.552084 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 07:06:06.552088 [INFO] Executing instruction: Generate environment file
2024/02/03 07:06:06.552112 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 07:06:06.552115 [INFO] start build docker app
2024/02/03 07:06:06.552598 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 07:06:06.552602 [INFO] fetching image and ports
2024/02/03 07:06:06.554205 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 07:06:06.554255 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 07:06:06.554262 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 07:06:06.554272 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 07:06:07.620247 [INFO] Login Succeeded

2024/02/03 07:06:07.620267 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 07:06:07.620275 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 07:06:07.620296 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 07:06:07.771512 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 07:06:07.771548 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 07:06:07.771552 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 07:06:07.771556 [INFO] start to build docker image
2024/02/03 07:06:07.771569 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 07:06:08.055936 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 07:06:08.055960 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 07:06:08.055965 [INFO] successfully build docker image
2024/02/03 07:06:08.055967 [INFO] save staging docker image id
2024/02/03 07:06:08.055980 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 07:06:08.091436 [INFO] c176d18fbf65

2024/02/03 07:06:08.092167 [INFO] Executing instruction: configure X-Ray
2024/02/03 07:06:08.092176 [INFO] X-Ray is not enabled.
2024/02/03 07:06:08.092180 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 07:06:08.100713 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 07:06:08.103013 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 07:06:08.128055 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 07:06:08.128104 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 07:06:08.143020 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 07:06:08.154749 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 07:06:08.165734 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 07:06:08.261734 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 07:06:08.601047 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 07:06:08.601149 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 07:06:08.884408 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 07:06:08.895009 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 07:06:09.155096 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 07:06:09.164805 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 07:06:09.174061 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 07:06:09.487563 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 07:06:09.499478 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 07:06:09.817311 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 07:06:09.817347 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 07:06:09.836129 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 07:06:09.852580 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 07:06:09.969592 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 07:06:09.970733 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 07:06:09.971908 [INFO] Executing instruction: configure log streaming
2024/02/03 07:06:09.971922 [INFO] log streaming is not enabled
2024/02/03 07:06:09.971926 [INFO] disable log stream
2024/02/03 07:06:09.971942 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 07:06:09.995457 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 07:06:10.028261 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 07:06:10.028286 [INFO] Checking if logs need forced rotation
2024/02/03 07:06:10.028307 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 07:06:10.564849 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 07:06:11.086542 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 07:06:11.088382 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 07:06:11.649411 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 07:06:11.665914 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 07:06:11.665942 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 07:06:11.665958 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 07:06:12.105785 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 07:06:12.105814 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 07:06:12.106452 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 07:06:12.106464 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 07:06:12.106682 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 07:06:12.106775 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 07:06:12.106782 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 07:06:12.106861 [INFO] Executing instruction: stop X-Ray
2024/02/03 07:06:12.106867 [INFO] stop X-Ray ...
2024/02/03 07:06:12.106954 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 07:06:12.131815 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 07:06:12.131847 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 07:06:12.166240 [INFO] Executing instruction: Run Docker Container
2024/02/03 07:06:12.166271 [INFO] stop currently running containers...
2024/02/03 07:06:12.166288 [INFO] detected old app is not docker compose app
2024/02/03 07:06:12.166301 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 07:06:12.222490 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 07:06:12.248782 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 07:06:12.248820 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 07:06:12.267628 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 07:06:12.267660 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 07:06:12.283689 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 07:06:12.283736 [INFO] stopping current container: 0af99fbbb92e
2024/02/03 07:06:12.283746 [INFO] Running command /bin/sh -c docker ps | grep -q 0af99fbbb92e
2024/02/03 07:06:12.303645 [INFO] Running command /bin/sh -c docker ps | grep -q 0af99fbbb92e
2024/02/03 07:06:12.321913 [INFO] Pruning containers ...
2024/02/03 07:06:12.321939 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 07:06:12.352946 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 07:06:12.352975 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 07:06:12.374347 [INFO] Total reclaimed space: 0B

2024/02/03 07:06:12.374375 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 07:06:12.398697 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 07:06:12.398729 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 07:06:12.425833 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 07:06:12.425855 [INFO] Removing /var/app/current/ if it exists
2024/02/03 07:06:12.426021 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 07:06:12.426040 [INFO] detected new app is not docker compose app
2024/02/03 07:06:12.426097 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 07:06:12.862772 [INFO] 7195985f49b6d3a17e858b266690c82f8b5b6275ac403e74d050b809eb47e1bc

2024/02/03 07:06:17.863372 [INFO] Running command /bin/sh -c docker ps | grep -q 7195985f49b6
2024/02/03 07:06:17.892526 [ERROR] docker container quit unexpectedly on 2024-02-03 07:06:17.892514104 +0000 UTC: Command /bin/sh -c docker ps | grep -q 7195985f49b6 failed with error exit status 1
2024/02/03 07:06:17.892553 [INFO] Running command /bin/sh -c docker logs 7195985f49b6
2024/02/03 07:06:17.917196 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 7195985f49b6: Command /bin/sh -c docker ps | grep -q 7195985f49b6 failed with error exit status 1 

2024/02/03 07:06:17.917209 [INFO] Executing cleanup logic
2024/02/03 07:06:17.917591 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 08:06:19.060652 [INFO] Starting...
2024/02/03 08:06:19.060696 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 08:06:19.060725 [INFO] reading event message file
2024/02/03 08:06:19.061469 [INFO] Engine received EB command userdata-exec

2024/02/03 08:06:19.067061 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 08:06:19.519008 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 08:06:19.967940 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 08:06:19.968023 [INFO] Engine command: (self-startup)

2024/02/03 08:06:19.968029 [INFO] Downloading EB Application...
2024/02/03 08:06:19.968032 [INFO] Region: eu-west-1
2024/02/03 08:06:19.968034 [INFO] envID: e-8gmkc7rmw6
2024/02/03 08:06:19.968036 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 08:06:19.968039 [INFO] Using manifest file name from command request
2024/02/03 08:06:19.968052 [INFO] Unable to get version manifest file.
2024/02/03 08:06:19.968054 [INFO] Downloading latest manifest available.
2024/02/03 08:06:19.968056 [INFO] Download latest app version manifest
2024/02/03 08:06:19.968157 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 08:06:20.006355 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 08:06:20.006648 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 08:06:20.022267 [INFO] Download successful124bytes downloaded
2024/02/03 08:06:20.022636 [INFO] Trying to read and parse version manifest...
2024/02/03 08:06:20.022721 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 08:06:20.046760 [INFO] Download successful264bytes downloaded
2024/02/03 08:06:20.047074 [INFO] Executing instruction: SyncClock
2024/02/03 08:06:20.047079 [INFO] Starting SyncClock
2024/02/03 08:06:20.047091 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 08:06:20.054845 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 08:06:15 2024
System time     : 0.000002030 seconds slow of NTP time
Last offset     : +0.000000898 seconds
RMS offset      : 0.000003710 seconds
Frequency       : 0.173 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.061 ppm
Root delay      : 0.000438757 seconds
Root dispersion : 0.000314309 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/03 08:06:20.054874 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 08:06:20.063053 [INFO] 200 OK

2024/02/03 08:06:20.063168 [INFO] Skipping Configure OS
2024/02/03 08:06:20.063174 [INFO] Skipping LockRepo
2024/02/03 08:06:20.063180 [INFO] Skipping GenerateEBBanner
2024/02/03 08:06:20.063186 [INFO] Skipping Install Process Manager
2024/02/03 08:06:20.063199 [INFO] Skipping install syslog
2024/02/03 08:06:20.063205 [INFO] Skipping install cron
2024/02/03 08:06:20.063210 [INFO] Skipping install proxy
2024/02/03 08:06:20.063216 [INFO] Skipping installhealthd
2024/02/03 08:06:20.063224 [INFO] Skipping Install Log Streaming Manager
2024/02/03 08:06:20.063240 [INFO] Skipping install X-Ray
2024/02/03 08:06:20.064118 [INFO] Skipping install Third Party License
2024/02/03 08:06:20.064822 [INFO] Skipping installSqsd
2024/02/03 08:06:20.064835 [INFO] Skipping bootstraphealthd
2024/02/03 08:06:20.064842 [INFO] Skipping Install yum packages
2024/02/03 08:06:20.064846 [INFO] Skipping install docker-compose
2024/02/03 08:06:20.064853 [INFO] Skipping Configure Docker Daemon
2024/02/03 08:06:20.064857 [INFO] Skipping MarkBaked
2024/02/03 08:06:20.064864 [INFO] Skipping TuneSystemSettings
2024/02/03 08:06:20.064867 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 08:06:20.064875 [INFO] Initialize LogRotate files and directories
2024/02/03 08:06:20.078567 [INFO] Skipping BootstrapCFNHup
2024/02/03 08:06:20.078581 [INFO] Executing instruction: StartCFNHup
2024/02/03 08:06:20.078585 [INFO] Start cfn-hup
2024/02/03 08:06:20.078604 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 08:06:20.107242 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 08:06:20.119669 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 08:06:20.119705 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 08:06:20.119709 [INFO] Executing instruction: Start Docker
2024/02/03 08:06:20.119712 [INFO] Starting Docker...
2024/02/03 08:06:20.119800 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 08:06:20.120997 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 08:06:20.122055 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 08:06:20.426334 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 08:06:20.445768 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 08:06:20.445830 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 08:06:20.456523 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 08:06:20.466051 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 08:06:20.483444 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 08:06:20.548024 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 08:06:20.548069 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 08:06:20.907250 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 08:06:21.275038 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 08:06:21.287732 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 08:06:21.601990 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 08:06:21.610324 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 08:06:21.625449 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 08:06:21.634042 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 08:06:22.972813 [INFO] Skipping Setup Docker Options
2024/02/03 08:06:22.972838 [INFO] Skipping MarkBootstrapped
2024/02/03 08:06:22.972842 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 08:06:22.972974 [INFO] Starting SwitchCFNStack
2024/02/03 08:06:22.972981 [INFO] Executing instruction: stopSqsd
2024/02/03 08:06:22.972985 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 08:06:22.972988 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 08:06:22.972991 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 08:06:22.973008 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 08:06:23.520439 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 08:06:23.520539 [INFO] Executing instruction: StagedockerApplication
2024/02/03 08:06:23.520555 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 08:06:23.561047 [INFO] Pruning containers ...
2024/02/03 08:06:23.561077 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 08:06:23.601720 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
7195985f49b6   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             boring_poincare

2024/02/03 08:06:23.602114 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 08:06:23.638795 [INFO] Deleted Containers:
7195985f49b6d3a17e858b266690c82f8b5b6275ac403e74d050b809eb47e1bc

Total reclaimed space: 0B

2024/02/03 08:06:23.638824 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 08:06:23.668234 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 08:06:23.668490 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 08:06:23.674723 [INFO] application/json

2024/02/03 08:06:23.674755 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 08:06:23.773208 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/03 08:06:23.773393 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 08:06:23.774799 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 08:06:23.774823 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 08:06:23.774840 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 08:06:23.774842 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 08:06:23.774846 [INFO] Executing instruction: Generate environment file
2024/02/03 08:06:23.774872 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 08:06:23.774877 [INFO] start build docker app
2024/02/03 08:06:23.775358 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 08:06:23.775362 [INFO] fetching image and ports
2024/02/03 08:06:23.777016 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 08:06:23.777074 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 08:06:23.777083 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 08:06:23.777091 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 08:06:24.821923 [INFO] Login Succeeded

2024/02/03 08:06:24.821944 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 08:06:24.821951 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 08:06:24.821967 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 08:06:24.978192 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 08:06:24.978216 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 08:06:24.978220 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 08:06:24.978227 [INFO] start to build docker image
2024/02/03 08:06:24.978244 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 08:06:25.242624 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 08:06:25.242713 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 08:06:25.242718 [INFO] successfully build docker image
2024/02/03 08:06:25.242721 [INFO] save staging docker image id
2024/02/03 08:06:25.242738 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 08:06:25.261635 [INFO] c176d18fbf65

2024/02/03 08:06:25.261767 [INFO] Executing instruction: configure X-Ray
2024/02/03 08:06:25.261774 [INFO] X-Ray is not enabled.
2024/02/03 08:06:25.261777 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 08:06:25.267590 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 08:06:25.269301 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 08:06:25.280839 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 08:06:25.280872 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 08:06:25.290957 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 08:06:25.299599 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 08:06:25.309211 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 08:06:25.367920 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 08:06:25.716060 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 08:06:25.716258 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 08:06:26.083629 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 08:06:26.100175 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 08:06:26.412878 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 08:06:26.421460 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 08:06:26.434076 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 08:06:26.783090 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 08:06:26.793588 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 08:06:27.166208 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 08:06:27.166247 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 08:06:27.179816 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 08:06:27.188689 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 08:06:27.282839 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 08:06:27.283849 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 08:06:27.284779 [INFO] Executing instruction: configure log streaming
2024/02/03 08:06:27.284788 [INFO] log streaming is not enabled
2024/02/03 08:06:27.284797 [INFO] disable log stream
2024/02/03 08:06:27.284812 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 08:06:27.305339 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 08:06:27.325354 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 08:06:27.325381 [INFO] Checking if logs need forced rotation
2024/02/03 08:06:27.325404 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 08:06:27.875337 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 08:06:28.429070 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 08:06:28.430887 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 08:06:28.909641 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 08:06:28.928821 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 08:06:28.928836 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 08:06:28.928848 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 08:06:29.386303 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 08:06:29.386330 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 08:06:29.386356 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 08:06:29.386360 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 08:06:29.386383 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 08:06:29.386396 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 08:06:29.386400 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 08:06:29.386405 [INFO] Executing instruction: stop X-Ray
2024/02/03 08:06:29.386408 [INFO] stop X-Ray ...
2024/02/03 08:06:29.386421 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 08:06:29.403649 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 08:06:29.403685 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 08:06:29.421073 [INFO] Executing instruction: Run Docker Container
2024/02/03 08:06:29.421104 [INFO] stop currently running containers...
2024/02/03 08:06:29.421116 [INFO] detected old app is not docker compose app
2024/02/03 08:06:29.421129 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 08:06:29.452540 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 08:06:29.480526 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 08:06:29.480562 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 08:06:29.499833 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 08:06:29.499867 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 08:06:29.516976 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 08:06:29.517027 [INFO] stopping current container: 7195985f49b6
2024/02/03 08:06:29.517040 [INFO] Running command /bin/sh -c docker ps | grep -q 7195985f49b6
2024/02/03 08:06:29.540427 [INFO] Running command /bin/sh -c docker ps | grep -q 7195985f49b6
2024/02/03 08:06:29.564848 [INFO] Pruning containers ...
2024/02/03 08:06:29.564872 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 08:06:29.583961 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 08:06:29.583999 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 08:06:29.602349 [INFO] Total reclaimed space: 0B

2024/02/03 08:06:29.602377 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 08:06:29.622606 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 08:06:29.622638 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 08:06:29.641824 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 08:06:29.641847 [INFO] Removing /var/app/current/ if it exists
2024/02/03 08:06:29.641950 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 08:06:29.641968 [INFO] detected new app is not docker compose app
2024/02/03 08:06:29.642023 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 08:06:30.015142 [INFO] cdc3c1de5e99ae2677a84c3d6d7d633a0f21e83d211c8a29b6c7f58e79869ede

2024/02/03 08:06:35.019629 [INFO] Running command /bin/sh -c docker ps | grep -q cdc3c1de5e99
2024/02/03 08:06:35.042124 [ERROR] docker container quit unexpectedly on 2024-02-03 08:06:35.042110446 +0000 UTC: Command /bin/sh -c docker ps | grep -q cdc3c1de5e99 failed with error exit status 1
2024/02/03 08:06:35.042153 [INFO] Running command /bin/sh -c docker logs cdc3c1de5e99
2024/02/03 08:06:35.077596 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container cdc3c1de5e99: Command /bin/sh -c docker ps | grep -q cdc3c1de5e99 failed with error exit status 1 

2024/02/03 08:06:35.077607 [INFO] Executing cleanup logic
2024/02/03 08:06:35.077842 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 09:06:36.094916 [INFO] Starting...
2024/02/03 09:06:36.094957 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 09:06:36.094983 [INFO] reading event message file
2024/02/03 09:06:36.097200 [INFO] Engine received EB command userdata-exec

2024/02/03 09:06:36.108364 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 09:06:36.522259 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 09:06:37.051296 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 09:06:37.051418 [INFO] Engine command: (self-startup)

2024/02/03 09:06:37.051434 [INFO] Downloading EB Application...
2024/02/03 09:06:37.051441 [INFO] Region: eu-west-1
2024/02/03 09:06:37.051444 [INFO] envID: e-8gmkc7rmw6
2024/02/03 09:06:37.051446 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 09:06:37.051448 [INFO] Using manifest file name from command request
2024/02/03 09:06:37.051462 [INFO] Unable to get version manifest file.
2024/02/03 09:06:37.051464 [INFO] Downloading latest manifest available.
2024/02/03 09:06:37.051466 [INFO] Download latest app version manifest
2024/02/03 09:06:37.051586 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 09:06:37.095453 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 09:06:37.098082 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 09:06:37.117790 [INFO] Download successful124bytes downloaded
2024/02/03 09:06:37.118001 [INFO] Trying to read and parse version manifest...
2024/02/03 09:06:37.118169 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 09:06:37.142640 [INFO] Download successful264bytes downloaded
2024/02/03 09:06:37.142947 [INFO] Executing instruction: SyncClock
2024/02/03 09:06:37.142952 [INFO] Starting SyncClock
2024/02/03 09:06:37.142962 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 09:06:37.157591 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 09:06:23 2024
System time     : 0.000001925 seconds fast of NTP time
Last offset     : +0.000002786 seconds
RMS offset      : 0.000002185 seconds
Frequency       : 0.310 ppm fast
Residual freq   : +0.002 ppm
Skew            : 0.073 ppm
Root delay      : 0.000415865 seconds
Root dispersion : 0.000283643 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/03 09:06:37.157647 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 09:06:37.168290 [INFO] 200 OK

2024/02/03 09:06:37.168423 [INFO] Skipping Configure OS
2024/02/03 09:06:37.168432 [INFO] Skipping LockRepo
2024/02/03 09:06:37.168438 [INFO] Skipping GenerateEBBanner
2024/02/03 09:06:37.168444 [INFO] Skipping Install Process Manager
2024/02/03 09:06:37.168450 [INFO] Skipping install syslog
2024/02/03 09:06:37.168456 [INFO] Skipping install cron
2024/02/03 09:06:37.168461 [INFO] Skipping install proxy
2024/02/03 09:06:37.168468 [INFO] Skipping installhealthd
2024/02/03 09:06:37.168473 [INFO] Skipping Install Log Streaming Manager
2024/02/03 09:06:37.168480 [INFO] Skipping install X-Ray
2024/02/03 09:06:37.168486 [INFO] Skipping install Third Party License
2024/02/03 09:06:37.168494 [INFO] Skipping installSqsd
2024/02/03 09:06:37.168500 [INFO] Skipping bootstraphealthd
2024/02/03 09:06:37.168506 [INFO] Skipping Install yum packages
2024/02/03 09:06:37.168511 [INFO] Skipping install docker-compose
2024/02/03 09:06:37.168517 [INFO] Skipping Configure Docker Daemon
2024/02/03 09:06:37.168523 [INFO] Skipping MarkBaked
2024/02/03 09:06:37.168528 [INFO] Skipping TuneSystemSettings
2024/02/03 09:06:37.168532 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 09:06:37.168536 [INFO] Initialize LogRotate files and directories
2024/02/03 09:06:37.182089 [INFO] Skipping BootstrapCFNHup
2024/02/03 09:06:37.182132 [INFO] Executing instruction: StartCFNHup
2024/02/03 09:06:37.182137 [INFO] Start cfn-hup
2024/02/03 09:06:37.182157 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 09:06:37.214744 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 09:06:37.232283 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 09:06:37.232326 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 09:06:37.232331 [INFO] Executing instruction: Start Docker
2024/02/03 09:06:37.232334 [INFO] Starting Docker...
2024/02/03 09:06:37.232422 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 09:06:37.233460 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 09:06:37.234459 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 09:06:37.650984 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 09:06:37.667954 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 09:06:37.667992 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 09:06:37.682600 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 09:06:37.693255 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 09:06:37.703893 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 09:06:37.741503 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 09:06:37.741572 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 09:06:38.104111 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 09:06:38.456564 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 09:06:38.470968 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 09:06:38.810480 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 09:06:38.820389 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 09:06:38.834301 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 09:06:38.843685 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 09:06:40.098767 [INFO] Skipping Setup Docker Options
2024/02/03 09:06:40.098796 [INFO] Skipping MarkBootstrapped
2024/02/03 09:06:40.098800 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 09:06:40.098932 [INFO] Starting SwitchCFNStack
2024/02/03 09:06:40.098937 [INFO] Executing instruction: stopSqsd
2024/02/03 09:06:40.098941 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 09:06:40.098944 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 09:06:40.098948 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 09:06:40.098967 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 09:06:40.573543 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 09:06:40.573662 [INFO] Executing instruction: StagedockerApplication
2024/02/03 09:06:40.573679 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 09:06:40.598934 [INFO] Pruning containers ...
2024/02/03 09:06:40.598963 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 09:06:40.626932 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
cdc3c1de5e99   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             thirsty_elion

2024/02/03 09:06:40.626961 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 09:06:40.656524 [INFO] Deleted Containers:
cdc3c1de5e99ae2677a84c3d6d7d633a0f21e83d211c8a29b6c7f58e79869ede

Total reclaimed space: 0B

2024/02/03 09:06:40.656545 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 09:06:40.680313 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 09:06:40.680539 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 09:06:40.685296 [INFO] application/json

2024/02/03 09:06:40.685327 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 09:06:40.833945 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/03 09:06:40.834367 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 09:06:40.835620 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 09:06:40.835643 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 09:06:40.835658 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 09:06:40.835661 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 09:06:40.835665 [INFO] Executing instruction: Generate environment file
2024/02/03 09:06:40.835699 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 09:06:40.835703 [INFO] start build docker app
2024/02/03 09:06:40.836047 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 09:06:40.836055 [INFO] fetching image and ports
2024/02/03 09:06:40.837909 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 09:06:40.838022 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 09:06:40.838033 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 09:06:40.838044 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 09:06:41.853187 [INFO] Login Succeeded

2024/02/03 09:06:41.853207 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 09:06:41.853214 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 09:06:41.853232 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 09:06:42.035663 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 09:06:42.035690 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 09:06:42.035693 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 09:06:42.035696 [INFO] start to build docker image
2024/02/03 09:06:42.035712 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 09:06:42.339212 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 09:06:42.339237 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 09:06:42.339241 [INFO] successfully build docker image
2024/02/03 09:06:42.339244 [INFO] save staging docker image id
2024/02/03 09:06:42.339259 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 09:06:42.390696 [INFO] c176d18fbf65

2024/02/03 09:06:42.390970 [INFO] Executing instruction: configure X-Ray
2024/02/03 09:06:42.390980 [INFO] X-Ray is not enabled.
2024/02/03 09:06:42.390990 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 09:06:42.397138 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 09:06:42.398881 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 09:06:42.420552 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 09:06:42.420586 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 09:06:42.435519 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 09:06:42.456792 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 09:06:42.487592 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 09:06:42.582791 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 09:06:42.878898 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 09:06:42.879027 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 09:06:43.264799 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 09:06:43.277906 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 09:06:43.570303 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 09:06:43.579401 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 09:06:43.589711 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 09:06:43.968416 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 09:06:43.981760 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 09:06:44.314506 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 09:06:44.314542 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 09:06:44.327327 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 09:06:44.336524 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 09:06:44.420136 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 09:06:44.421225 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 09:06:44.422174 [INFO] Executing instruction: configure log streaming
2024/02/03 09:06:44.422188 [INFO] log streaming is not enabled
2024/02/03 09:06:44.422192 [INFO] disable log stream
2024/02/03 09:06:44.422208 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 09:06:44.442560 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 09:06:44.464911 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 09:06:44.464936 [INFO] Checking if logs need forced rotation
2024/02/03 09:06:44.464956 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 09:06:45.091807 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 09:06:45.560034 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 09:06:45.561796 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 09:06:45.628666 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 09:06:45.645491 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 09:06:45.645507 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 09:06:45.645519 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 09:06:46.139560 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 09:06:46.139595 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 09:06:46.139621 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 09:06:46.139625 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 09:06:46.139699 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 09:06:46.139717 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 09:06:46.139720 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 09:06:46.139727 [INFO] Executing instruction: stop X-Ray
2024/02/03 09:06:46.139730 [INFO] stop X-Ray ...
2024/02/03 09:06:46.139740 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 09:06:46.157051 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 09:06:46.157085 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 09:06:46.175942 [INFO] Executing instruction: Run Docker Container
2024/02/03 09:06:46.175986 [INFO] stop currently running containers...
2024/02/03 09:06:46.175999 [INFO] detected old app is not docker compose app
2024/02/03 09:06:46.176011 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 09:06:46.232526 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 09:06:46.253957 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 09:06:46.253988 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 09:06:46.267899 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 09:06:46.267927 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 09:06:46.305219 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 09:06:46.305296 [INFO] stopping current container: cdc3c1de5e99
2024/02/03 09:06:46.305311 [INFO] Running command /bin/sh -c docker ps | grep -q cdc3c1de5e99
2024/02/03 09:06:46.334514 [INFO] Running command /bin/sh -c docker ps | grep -q cdc3c1de5e99
2024/02/03 09:06:46.353320 [INFO] Pruning containers ...
2024/02/03 09:06:46.353343 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 09:06:46.376185 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 09:06:46.376222 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 09:06:46.396424 [INFO] Total reclaimed space: 0B

2024/02/03 09:06:46.396463 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 09:06:46.416976 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 09:06:46.417007 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 09:06:46.435794 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 09:06:46.435825 [INFO] Removing /var/app/current/ if it exists
2024/02/03 09:06:46.435926 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 09:06:46.435949 [INFO] detected new app is not docker compose app
2024/02/03 09:06:46.436001 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 09:06:46.799311 [INFO] 0a32e5d415d1f1f6661fa0654f2e66d0439c70bd84e5cc05aa7de459b7f56424

2024/02/03 09:06:51.804102 [INFO] Running command /bin/sh -c docker ps | grep -q 0a32e5d415d1
2024/02/03 09:06:51.829257 [ERROR] docker container quit unexpectedly on 2024-02-03 09:06:51.829242373 +0000 UTC: Command /bin/sh -c docker ps | grep -q 0a32e5d415d1 failed with error exit status 1
2024/02/03 09:06:51.829287 [INFO] Running command /bin/sh -c docker logs 0a32e5d415d1
2024/02/03 09:06:51.854926 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 0a32e5d415d1: Command /bin/sh -c docker ps | grep -q 0a32e5d415d1 failed with error exit status 1 

2024/02/03 09:06:51.854938 [INFO] Executing cleanup logic
2024/02/03 09:06:51.855301 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 10:06:52.960063 [INFO] Starting...
2024/02/03 10:06:52.960112 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 10:06:52.960140 [INFO] reading event message file
2024/02/03 10:06:52.962371 [INFO] Engine received EB command userdata-exec

2024/02/03 10:06:52.972122 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 10:06:53.563041 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 10:06:54.064979 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 10:06:54.065065 [INFO] Engine command: (self-startup)

2024/02/03 10:06:54.065072 [INFO] Downloading EB Application...
2024/02/03 10:06:54.065074 [INFO] Region: eu-west-1
2024/02/03 10:06:54.065077 [INFO] envID: e-8gmkc7rmw6
2024/02/03 10:06:54.065081 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 10:06:54.065084 [INFO] Using manifest file name from command request
2024/02/03 10:06:54.065100 [INFO] Unable to get version manifest file.
2024/02/03 10:06:54.065103 [INFO] Downloading latest manifest available.
2024/02/03 10:06:54.065106 [INFO] Download latest app version manifest
2024/02/03 10:06:54.065267 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 10:06:54.103873 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 10:06:54.104054 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 10:06:54.120468 [INFO] Download successful124bytes downloaded
2024/02/03 10:06:54.120610 [INFO] Trying to read and parse version manifest...
2024/02/03 10:06:54.120682 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 10:06:54.140836 [INFO] Download successful264bytes downloaded
2024/02/03 10:06:54.141150 [INFO] Executing instruction: SyncClock
2024/02/03 10:06:54.141156 [INFO] Starting SyncClock
2024/02/03 10:06:54.141165 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 10:06:54.151911 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 10:06:45 2024
System time     : 0.000000009 seconds slow of NTP time
Last offset     : +0.000025910 seconds
RMS offset      : 0.000009011 seconds
Frequency       : 0.674 ppm fast
Residual freq   : +0.300 ppm
Skew            : 0.097 ppm
Root delay      : 0.000455382 seconds
Root dispersion : 0.000282663 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/03 10:06:54.151940 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 10:06:54.155965 [INFO] 200 OK

2024/02/03 10:06:54.156092 [INFO] Skipping Configure OS
2024/02/03 10:06:54.156101 [INFO] Skipping LockRepo
2024/02/03 10:06:54.156106 [INFO] Skipping GenerateEBBanner
2024/02/03 10:06:54.156112 [INFO] Skipping Install Process Manager
2024/02/03 10:06:54.156118 [INFO] Skipping install syslog
2024/02/03 10:06:54.156123 [INFO] Skipping install cron
2024/02/03 10:06:54.156128 [INFO] Skipping install proxy
2024/02/03 10:06:54.156133 [INFO] Skipping installhealthd
2024/02/03 10:06:54.156139 [INFO] Skipping Install Log Streaming Manager
2024/02/03 10:06:54.156144 [INFO] Skipping install X-Ray
2024/02/03 10:06:54.156149 [INFO] Skipping install Third Party License
2024/02/03 10:06:54.156160 [INFO] Skipping installSqsd
2024/02/03 10:06:54.156165 [INFO] Skipping bootstraphealthd
2024/02/03 10:06:54.156172 [INFO] Skipping Install yum packages
2024/02/03 10:06:54.156176 [INFO] Skipping install docker-compose
2024/02/03 10:06:54.156180 [INFO] Skipping Configure Docker Daemon
2024/02/03 10:06:54.156190 [INFO] Skipping MarkBaked
2024/02/03 10:06:54.156197 [INFO] Skipping TuneSystemSettings
2024/02/03 10:06:54.156200 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 10:06:54.156202 [INFO] Initialize LogRotate files and directories
2024/02/03 10:06:54.169465 [INFO] Skipping BootstrapCFNHup
2024/02/03 10:06:54.169474 [INFO] Executing instruction: StartCFNHup
2024/02/03 10:06:54.169477 [INFO] Start cfn-hup
2024/02/03 10:06:54.169493 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 10:06:54.184682 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 10:06:54.196435 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 10:06:54.196470 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 10:06:54.196474 [INFO] Executing instruction: Start Docker
2024/02/03 10:06:54.196477 [INFO] Starting Docker...
2024/02/03 10:06:54.196487 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 10:06:54.198402 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 10:06:54.199316 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 10:06:54.651749 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 10:06:54.670111 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 10:06:54.670144 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 10:06:54.681926 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 10:06:54.691996 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 10:06:54.701977 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 10:06:54.738396 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 10:06:54.738421 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 10:06:55.047471 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 10:06:55.451100 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 10:06:55.502212 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 10:06:55.756880 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 10:06:55.767798 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 10:06:55.786390 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 10:06:55.797063 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 10:06:57.032695 [INFO] Skipping Setup Docker Options
2024/02/03 10:06:57.032724 [INFO] Skipping MarkBootstrapped
2024/02/03 10:06:57.032728 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 10:06:57.032856 [INFO] Starting SwitchCFNStack
2024/02/03 10:06:57.032861 [INFO] Executing instruction: stopSqsd
2024/02/03 10:06:57.032865 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 10:06:57.032869 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 10:06:57.032873 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 10:06:57.032890 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 10:06:57.473828 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 10:06:57.474044 [INFO] Executing instruction: StagedockerApplication
2024/02/03 10:06:57.474144 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 10:06:57.523625 [INFO] Pruning containers ...
2024/02/03 10:06:57.523663 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 10:06:57.544138 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
0a32e5d415d1   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             agitated_taussig

2024/02/03 10:06:57.544169 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 10:06:57.574568 [INFO] Deleted Containers:
0a32e5d415d1f1f6661fa0654f2e66d0439c70bd84e5cc05aa7de459b7f56424

Total reclaimed space: 0B

2024/02/03 10:06:57.574593 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 10:06:57.597698 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 10:06:57.598081 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 10:06:57.601173 [INFO] application/json

2024/02/03 10:06:57.601191 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 10:06:57.682868 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 10:06:57.683080 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 10:06:57.684288 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 10:06:57.684314 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 10:06:57.684329 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 10:06:57.684333 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 10:06:57.684339 [INFO] Executing instruction: Generate environment file
2024/02/03 10:06:57.684367 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 10:06:57.684371 [INFO] start build docker app
2024/02/03 10:06:57.684749 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 10:06:57.684754 [INFO] fetching image and ports
2024/02/03 10:06:57.686433 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 10:06:57.686489 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 10:06:57.686498 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 10:06:57.686507 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 10:06:58.637599 [INFO] Login Succeeded

2024/02/03 10:06:58.637618 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 10:06:58.637625 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 10:06:58.637640 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 10:06:58.789584 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 10:06:58.789624 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 10:06:58.789628 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 10:06:58.789637 [INFO] start to build docker image
2024/02/03 10:06:58.789656 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 10:06:59.060901 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 10:06:59.060925 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 10:06:59.060930 [INFO] successfully build docker image
2024/02/03 10:06:59.060933 [INFO] save staging docker image id
2024/02/03 10:06:59.060948 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 10:06:59.082371 [INFO] c176d18fbf65

2024/02/03 10:06:59.082662 [INFO] Executing instruction: configure X-Ray
2024/02/03 10:06:59.082670 [INFO] X-Ray is not enabled.
2024/02/03 10:06:59.082673 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 10:06:59.087864 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 10:06:59.089427 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 10:06:59.103093 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 10:06:59.103116 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 10:06:59.114829 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 10:06:59.125488 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 10:06:59.137356 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 10:06:59.219098 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 10:06:59.579067 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 10:06:59.579303 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 10:06:59.850997 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 10:06:59.862436 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 10:07:00.349547 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 10:07:00.359336 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 10:07:00.368619 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 10:07:00.707193 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 10:07:00.718440 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 10:07:01.084485 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 10:07:01.084535 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 10:07:01.108684 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 10:07:01.132128 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 10:07:01.269807 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 10:07:01.270919 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 10:07:01.272186 [INFO] Executing instruction: configure log streaming
2024/02/03 10:07:01.272199 [INFO] log streaming is not enabled
2024/02/03 10:07:01.272204 [INFO] disable log stream
2024/02/03 10:07:01.272220 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 10:07:01.292406 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 10:07:01.312368 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 10:07:01.312394 [INFO] Checking if logs need forced rotation
2024/02/03 10:07:01.312414 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 10:07:02.025693 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 10:07:02.617845 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 10:07:02.619540 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 10:07:03.161902 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 10:07:03.198896 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 10:07:03.198915 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 10:07:03.198940 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 10:07:03.629616 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 10:07:03.629655 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 10:07:03.629678 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 10:07:03.629680 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 10:07:03.629699 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 10:07:03.629710 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 10:07:03.629714 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 10:07:03.629721 [INFO] Executing instruction: stop X-Ray
2024/02/03 10:07:03.629724 [INFO] stop X-Ray ...
2024/02/03 10:07:03.629737 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 10:07:03.647035 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 10:07:03.647067 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 10:07:03.665053 [INFO] Executing instruction: Run Docker Container
2024/02/03 10:07:03.665093 [INFO] stop currently running containers...
2024/02/03 10:07:03.665106 [INFO] detected old app is not docker compose app
2024/02/03 10:07:03.665118 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 10:07:03.732628 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 10:07:03.749643 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 10:07:03.749679 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 10:07:03.768337 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 10:07:03.768371 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 10:07:03.784022 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 10:07:03.784073 [INFO] stopping current container: 0a32e5d415d1
2024/02/03 10:07:03.784086 [INFO] Running command /bin/sh -c docker ps | grep -q 0a32e5d415d1
2024/02/03 10:07:03.805991 [INFO] Running command /bin/sh -c docker ps | grep -q 0a32e5d415d1
2024/02/03 10:07:03.826006 [INFO] Pruning containers ...
2024/02/03 10:07:03.826029 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 10:07:03.842080 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 10:07:03.842118 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 10:07:03.863013 [INFO] Total reclaimed space: 0B

2024/02/03 10:07:03.863040 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 10:07:03.882117 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 10:07:03.882162 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 10:07:03.901830 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 10:07:03.901853 [INFO] Removing /var/app/current/ if it exists
2024/02/03 10:07:03.901940 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 10:07:03.901958 [INFO] detected new app is not docker compose app
2024/02/03 10:07:03.902004 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 10:07:04.355311 [INFO] 5062a22eaa4fa68bf4c57999a3989c2c0bcf8c415984f84c712885be2fde8568

2024/02/03 10:07:09.355783 [INFO] Running command /bin/sh -c docker ps | grep -q 5062a22eaa4f
2024/02/03 10:07:09.386119 [ERROR] docker container quit unexpectedly on 2024-02-03 10:07:09.386107914 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5062a22eaa4f failed with error exit status 1
2024/02/03 10:07:09.386146 [INFO] Running command /bin/sh -c docker logs 5062a22eaa4f
2024/02/03 10:07:09.415961 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5062a22eaa4f: Command /bin/sh -c docker ps | grep -q 5062a22eaa4f failed with error exit status 1 

2024/02/03 10:07:09.415973 [INFO] Executing cleanup logic
2024/02/03 10:07:09.416300 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 11:07:10.434494 [INFO] Starting...
2024/02/03 11:07:10.434534 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 11:07:10.434559 [INFO] reading event message file
2024/02/03 11:07:10.435327 [INFO] Engine received EB command userdata-exec

2024/02/03 11:07:10.440340 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 11:07:10.788561 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 11:07:11.356863 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 11:07:11.357023 [INFO] Engine command: (self-startup)

2024/02/03 11:07:11.357031 [INFO] Downloading EB Application...
2024/02/03 11:07:11.357034 [INFO] Region: eu-west-1
2024/02/03 11:07:11.357037 [INFO] envID: e-8gmkc7rmw6
2024/02/03 11:07:11.357041 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 11:07:11.357045 [INFO] Using manifest file name from command request
2024/02/03 11:07:11.357109 [INFO] Unable to get version manifest file.
2024/02/03 11:07:11.357115 [INFO] Downloading latest manifest available.
2024/02/03 11:07:11.357117 [INFO] Download latest app version manifest
2024/02/03 11:07:11.357315 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 11:07:11.404162 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 11:07:11.404344 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 11:07:11.416809 [INFO] Download successful124bytes downloaded
2024/02/03 11:07:11.416958 [INFO] Trying to read and parse version manifest...
2024/02/03 11:07:11.417041 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 11:07:11.445542 [INFO] Download successful264bytes downloaded
2024/02/03 11:07:11.445842 [INFO] Executing instruction: SyncClock
2024/02/03 11:07:11.445847 [INFO] Starting SyncClock
2024/02/03 11:07:11.445858 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 11:07:11.451636 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 11:07:09 2024
System time     : 0.000001148 seconds fast of NTP time
Last offset     : +0.000000410 seconds
RMS offset      : 0.000002403 seconds
Frequency       : 0.374 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.121 ppm
Root delay      : 0.000443952 seconds
Root dispersion : 0.000327084 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/03 11:07:11.451681 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 11:07:11.456487 [INFO] 200 OK

2024/02/03 11:07:11.456576 [INFO] Skipping Configure OS
2024/02/03 11:07:11.456582 [INFO] Skipping LockRepo
2024/02/03 11:07:11.456586 [INFO] Skipping GenerateEBBanner
2024/02/03 11:07:11.456591 [INFO] Skipping Install Process Manager
2024/02/03 11:07:11.456595 [INFO] Skipping install syslog
2024/02/03 11:07:11.456599 [INFO] Skipping install cron
2024/02/03 11:07:11.456603 [INFO] Skipping install proxy
2024/02/03 11:07:11.456606 [INFO] Skipping installhealthd
2024/02/03 11:07:11.456610 [INFO] Skipping Install Log Streaming Manager
2024/02/03 11:07:11.456614 [INFO] Skipping install X-Ray
2024/02/03 11:07:11.456618 [INFO] Skipping install Third Party License
2024/02/03 11:07:11.456623 [INFO] Skipping installSqsd
2024/02/03 11:07:11.456627 [INFO] Skipping bootstraphealthd
2024/02/03 11:07:11.456634 [INFO] Skipping Install yum packages
2024/02/03 11:07:11.456638 [INFO] Skipping install docker-compose
2024/02/03 11:07:11.456642 [INFO] Skipping Configure Docker Daemon
2024/02/03 11:07:11.456646 [INFO] Skipping MarkBaked
2024/02/03 11:07:11.456650 [INFO] Skipping TuneSystemSettings
2024/02/03 11:07:11.456653 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 11:07:11.456655 [INFO] Initialize LogRotate files and directories
2024/02/03 11:07:11.473267 [INFO] Skipping BootstrapCFNHup
2024/02/03 11:07:11.473290 [INFO] Executing instruction: StartCFNHup
2024/02/03 11:07:11.473293 [INFO] Start cfn-hup
2024/02/03 11:07:11.473309 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 11:07:11.493332 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 11:07:11.507382 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 11:07:11.507436 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 11:07:11.507441 [INFO] Executing instruction: Start Docker
2024/02/03 11:07:11.507444 [INFO] Starting Docker...
2024/02/03 11:07:11.507699 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 11:07:11.509259 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 11:07:11.510538 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 11:07:11.965900 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 11:07:11.998349 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 11:07:11.998386 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 11:07:12.019709 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 11:07:12.035839 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 11:07:12.048083 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 11:07:12.187524 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 11:07:12.187706 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 11:07:12.590293 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 11:07:12.996982 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 11:07:13.010427 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 11:07:13.322150 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 11:07:13.333382 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 11:07:13.349164 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 11:07:13.359334 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 11:07:14.784732 [INFO] Skipping Setup Docker Options
2024/02/03 11:07:14.784751 [INFO] Skipping MarkBootstrapped
2024/02/03 11:07:14.784755 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 11:07:14.784881 [INFO] Starting SwitchCFNStack
2024/02/03 11:07:14.784886 [INFO] Executing instruction: stopSqsd
2024/02/03 11:07:14.784890 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 11:07:14.784894 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 11:07:14.784898 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 11:07:14.784920 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 11:07:15.230366 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 11:07:15.230392 [INFO] Executing instruction: StagedockerApplication
2024/02/03 11:07:15.230407 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 11:07:15.251058 [INFO] Pruning containers ...
2024/02/03 11:07:15.251094 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 11:07:15.282829 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
5062a22eaa4f   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             confident_rhodes

2024/02/03 11:07:15.282862 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 11:07:15.341881 [INFO] Deleted Containers:
5062a22eaa4fa68bf4c57999a3989c2c0bcf8c415984f84c712885be2fde8568

Total reclaimed space: 0B

2024/02/03 11:07:15.341910 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 11:07:15.369431 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 11:07:15.369663 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 11:07:15.375001 [INFO] application/json

2024/02/03 11:07:15.375416 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 11:07:15.469628 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/03 11:07:15.469803 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 11:07:15.471138 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 11:07:15.471162 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 11:07:15.471178 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 11:07:15.471181 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 11:07:15.471185 [INFO] Executing instruction: Generate environment file
2024/02/03 11:07:15.471209 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 11:07:15.471217 [INFO] start build docker app
2024/02/03 11:07:15.471725 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 11:07:15.471734 [INFO] fetching image and ports
2024/02/03 11:07:15.474732 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 11:07:15.474803 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 11:07:15.474812 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 11:07:15.474822 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 11:07:16.415589 [INFO] Login Succeeded

2024/02/03 11:07:16.415609 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 11:07:16.415616 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 11:07:16.415634 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 11:07:16.585384 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 11:07:16.585681 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 11:07:16.585694 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 11:07:16.585698 [INFO] start to build docker image
2024/02/03 11:07:16.585937 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 11:07:16.867620 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 11:07:16.867643 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 11:07:16.867647 [INFO] successfully build docker image
2024/02/03 11:07:16.867649 [INFO] save staging docker image id
2024/02/03 11:07:16.867661 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 11:07:16.888040 [INFO] c176d18fbf65

2024/02/03 11:07:16.888161 [INFO] Executing instruction: configure X-Ray
2024/02/03 11:07:16.888166 [INFO] X-Ray is not enabled.
2024/02/03 11:07:16.888169 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 11:07:16.894017 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 11:07:16.896360 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 11:07:16.912146 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 11:07:16.912181 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 11:07:16.923790 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 11:07:16.949086 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 11:07:16.970765 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 11:07:17.038896 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 11:07:17.410510 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 11:07:17.410740 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 11:07:17.746098 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 11:07:17.759587 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 11:07:18.071352 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 11:07:18.082613 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 11:07:18.093244 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 11:07:18.424507 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 11:07:18.434657 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 11:07:18.743073 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 11:07:18.743109 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 11:07:18.755543 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 11:07:18.766526 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 11:07:18.880578 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 11:07:18.881539 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 11:07:18.883873 [INFO] Executing instruction: configure log streaming
2024/02/03 11:07:18.883885 [INFO] log streaming is not enabled
2024/02/03 11:07:18.883888 [INFO] disable log stream
2024/02/03 11:07:18.883901 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 11:07:18.910117 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 11:07:18.937011 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 11:07:18.937040 [INFO] Checking if logs need forced rotation
2024/02/03 11:07:18.937060 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 11:07:19.559991 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 11:07:20.235137 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 11:07:20.236998 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 11:07:20.649756 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 11:07:20.667729 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 11:07:20.667745 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 11:07:20.667757 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 11:07:21.076584 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 11:07:21.076606 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 11:07:21.076634 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 11:07:21.076637 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 11:07:21.076657 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 11:07:21.076668 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 11:07:21.076671 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 11:07:21.076675 [INFO] Executing instruction: stop X-Ray
2024/02/03 11:07:21.076677 [INFO] stop X-Ray ...
2024/02/03 11:07:21.076687 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 11:07:21.093993 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 11:07:21.094021 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 11:07:21.107577 [INFO] Executing instruction: Run Docker Container
2024/02/03 11:07:21.107603 [INFO] stop currently running containers...
2024/02/03 11:07:21.107612 [INFO] detected old app is not docker compose app
2024/02/03 11:07:21.107624 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 11:07:21.142697 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 11:07:21.177177 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 11:07:21.177216 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 11:07:21.199400 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 11:07:21.199439 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 11:07:21.222188 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 11:07:21.222241 [INFO] stopping current container: 5062a22eaa4f
2024/02/03 11:07:21.222254 [INFO] Running command /bin/sh -c docker ps | grep -q 5062a22eaa4f
2024/02/03 11:07:21.254495 [INFO] Running command /bin/sh -c docker ps | grep -q 5062a22eaa4f
2024/02/03 11:07:21.276350 [INFO] Pruning containers ...
2024/02/03 11:07:21.276724 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 11:07:21.296310 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 11:07:21.296340 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 11:07:21.316077 [INFO] Total reclaimed space: 0B

2024/02/03 11:07:21.316108 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 11:07:21.339996 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 11:07:21.340030 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 11:07:21.362509 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 11:07:21.362529 [INFO] Removing /var/app/current/ if it exists
2024/02/03 11:07:21.362621 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 11:07:21.362643 [INFO] detected new app is not docker compose app
2024/02/03 11:07:21.362689 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 11:07:21.771866 [INFO] 8915c7b9fa18d16a6176f464f8ba8c3ff51b0d1874588e5239f1f4f39d81971e

2024/02/03 11:07:26.772415 [INFO] Running command /bin/sh -c docker ps | grep -q 8915c7b9fa18
2024/02/03 11:07:26.793432 [ERROR] docker container quit unexpectedly on 2024-02-03 11:07:26.793414037 +0000 UTC: Command /bin/sh -c docker ps | grep -q 8915c7b9fa18 failed with error exit status 1
2024/02/03 11:07:26.793463 [INFO] Running command /bin/sh -c docker logs 8915c7b9fa18
2024/02/03 11:07:26.815563 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 8915c7b9fa18: Command /bin/sh -c docker ps | grep -q 8915c7b9fa18 failed with error exit status 1 

2024/02/03 11:07:26.815573 [INFO] Executing cleanup logic
2024/02/03 11:07:26.815848 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 12:07:27.799979 [INFO] Starting...
2024/02/03 12:07:27.800023 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 12:07:27.800051 [INFO] reading event message file
2024/02/03 12:07:27.801491 [INFO] Engine received EB command userdata-exec

2024/02/03 12:07:27.807211 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 12:07:28.232779 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 12:07:28.687291 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 12:07:28.687380 [INFO] Engine command: (self-startup)

2024/02/03 12:07:28.687389 [INFO] Downloading EB Application...
2024/02/03 12:07:28.687392 [INFO] Region: eu-west-1
2024/02/03 12:07:28.687395 [INFO] envID: e-8gmkc7rmw6
2024/02/03 12:07:28.687399 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 12:07:28.687402 [INFO] Using manifest file name from command request
2024/02/03 12:07:28.687470 [INFO] Unable to get version manifest file.
2024/02/03 12:07:28.687475 [INFO] Downloading latest manifest available.
2024/02/03 12:07:28.687478 [INFO] Download latest app version manifest
2024/02/03 12:07:28.687597 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 12:07:28.729565 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 12:07:28.729848 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 12:07:28.744312 [INFO] Download successful124bytes downloaded
2024/02/03 12:07:28.744450 [INFO] Trying to read and parse version manifest...
2024/02/03 12:07:28.744523 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 12:07:28.774851 [INFO] Download successful264bytes downloaded
2024/02/03 12:07:28.775748 [INFO] Executing instruction: SyncClock
2024/02/03 12:07:28.775756 [INFO] Starting SyncClock
2024/02/03 12:07:28.775769 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 12:07:28.781610 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 12:07:13 2024
System time     : 0.000002302 seconds fast of NTP time
Last offset     : +0.000001452 seconds
RMS offset      : 0.000010570 seconds
Frequency       : 0.713 ppm fast
Residual freq   : +0.005 ppm
Skew            : 0.430 ppm
Root delay      : 0.000514806 seconds
Root dispersion : 0.000555603 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/03 12:07:28.781632 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 12:07:28.786127 [INFO] 200 OK

2024/02/03 12:07:28.786224 [INFO] Skipping Configure OS
2024/02/03 12:07:28.786230 [INFO] Skipping LockRepo
2024/02/03 12:07:28.786233 [INFO] Skipping GenerateEBBanner
2024/02/03 12:07:28.786238 [INFO] Skipping Install Process Manager
2024/02/03 12:07:28.786241 [INFO] Skipping install syslog
2024/02/03 12:07:28.786245 [INFO] Skipping install cron
2024/02/03 12:07:28.786249 [INFO] Skipping install proxy
2024/02/03 12:07:28.786253 [INFO] Skipping installhealthd
2024/02/03 12:07:28.786256 [INFO] Skipping Install Log Streaming Manager
2024/02/03 12:07:28.786260 [INFO] Skipping install X-Ray
2024/02/03 12:07:28.786264 [INFO] Skipping install Third Party License
2024/02/03 12:07:28.786272 [INFO] Skipping installSqsd
2024/02/03 12:07:28.786276 [INFO] Skipping bootstraphealthd
2024/02/03 12:07:28.786280 [INFO] Skipping Install yum packages
2024/02/03 12:07:28.786295 [INFO] Skipping install docker-compose
2024/02/03 12:07:28.786299 [INFO] Skipping Configure Docker Daemon
2024/02/03 12:07:28.786303 [INFO] Skipping MarkBaked
2024/02/03 12:07:28.786312 [INFO] Skipping TuneSystemSettings
2024/02/03 12:07:28.786315 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 12:07:28.786318 [INFO] Initialize LogRotate files and directories
2024/02/03 12:07:28.812127 [INFO] Skipping BootstrapCFNHup
2024/02/03 12:07:28.812147 [INFO] Executing instruction: StartCFNHup
2024/02/03 12:07:28.812151 [INFO] Start cfn-hup
2024/02/03 12:07:28.812171 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 12:07:28.825570 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 12:07:28.833797 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 12:07:28.833935 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 12:07:28.833941 [INFO] Executing instruction: Start Docker
2024/02/03 12:07:28.833944 [INFO] Starting Docker...
2024/02/03 12:07:28.834026 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 12:07:28.843433 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 12:07:28.850274 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 12:07:29.170385 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 12:07:29.184284 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 12:07:29.184321 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 12:07:29.194290 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 12:07:29.203118 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 12:07:29.213173 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 12:07:29.284433 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 12:07:29.284532 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 12:07:29.596000 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 12:07:29.906860 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 12:07:29.920384 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 12:07:30.228662 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 12:07:30.243006 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 12:07:30.264929 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 12:07:30.277754 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 12:07:31.632939 [INFO] Skipping Setup Docker Options
2024/02/03 12:07:31.632968 [INFO] Skipping MarkBootstrapped
2024/02/03 12:07:31.632972 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 12:07:31.633346 [INFO] Starting SwitchCFNStack
2024/02/03 12:07:31.633356 [INFO] Executing instruction: stopSqsd
2024/02/03 12:07:31.633361 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 12:07:31.633364 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 12:07:31.633368 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 12:07:31.633422 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 12:07:32.106383 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 12:07:32.106415 [INFO] Executing instruction: StagedockerApplication
2024/02/03 12:07:32.106433 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 12:07:32.144007 [INFO] Pruning containers ...
2024/02/03 12:07:32.144036 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 12:07:32.164529 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
8915c7b9fa18   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             elegant_booth

2024/02/03 12:07:32.164564 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 12:07:32.188233 [INFO] Deleted Containers:
8915c7b9fa18d16a6176f464f8ba8c3ff51b0d1874588e5239f1f4f39d81971e

Total reclaimed space: 0B

2024/02/03 12:07:32.188276 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 12:07:32.205690 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 12:07:32.205931 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 12:07:32.208649 [INFO] application/json

2024/02/03 12:07:32.208668 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 12:07:32.288141 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 12:07:32.288390 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 12:07:32.289812 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 12:07:32.289837 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 12:07:32.289852 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 12:07:32.289854 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 12:07:32.289858 [INFO] Executing instruction: Generate environment file
2024/02/03 12:07:32.289882 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 12:07:32.289885 [INFO] start build docker app
2024/02/03 12:07:32.290391 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 12:07:32.290394 [INFO] fetching image and ports
2024/02/03 12:07:32.292367 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 12:07:32.292422 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 12:07:32.292429 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 12:07:32.292448 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 12:07:33.148609 [INFO] Login Succeeded

2024/02/03 12:07:33.148627 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 12:07:33.148633 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 12:07:33.148649 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 12:07:33.294200 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 12:07:33.294223 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 12:07:33.294232 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 12:07:33.294236 [INFO] start to build docker image
2024/02/03 12:07:33.294257 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 12:07:33.598963 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 12:07:33.598985 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 12:07:33.598989 [INFO] successfully build docker image
2024/02/03 12:07:33.598991 [INFO] save staging docker image id
2024/02/03 12:07:33.599045 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 12:07:33.622045 [INFO] c176d18fbf65

2024/02/03 12:07:33.622247 [INFO] Executing instruction: configure X-Ray
2024/02/03 12:07:33.622253 [INFO] X-Ray is not enabled.
2024/02/03 12:07:33.622256 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 12:07:33.629583 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 12:07:33.631552 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 12:07:33.643990 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 12:07:33.644023 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 12:07:33.655411 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 12:07:33.665183 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 12:07:33.676844 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 12:07:33.761562 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 12:07:34.168706 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 12:07:34.168860 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 12:07:34.463211 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 12:07:34.475424 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 12:07:34.824746 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 12:07:34.838019 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 12:07:34.849819 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 12:07:35.255431 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 12:07:35.268738 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 12:07:35.574823 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 12:07:35.574860 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 12:07:35.613552 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 12:07:35.631986 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 12:07:35.696169 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 12:07:35.697025 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 12:07:35.698097 [INFO] Executing instruction: configure log streaming
2024/02/03 12:07:35.698107 [INFO] log streaming is not enabled
2024/02/03 12:07:35.698111 [INFO] disable log stream
2024/02/03 12:07:35.698125 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 12:07:35.720375 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 12:07:35.766484 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 12:07:35.766509 [INFO] Checking if logs need forced rotation
2024/02/03 12:07:35.766528 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 12:07:36.427112 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 12:07:36.840933 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 12:07:36.842772 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 12:07:37.419113 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 12:07:37.453922 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 12:07:37.453943 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 12:07:37.453956 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 12:07:37.975556 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 12:07:37.975590 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 12:07:37.975619 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 12:07:37.975623 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 12:07:37.975644 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 12:07:37.975714 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 12:07:37.975719 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 12:07:37.975726 [INFO] Executing instruction: stop X-Ray
2024/02/03 12:07:37.975730 [INFO] stop X-Ray ...
2024/02/03 12:07:37.975743 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 12:07:37.991306 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 12:07:37.991339 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 12:07:38.009146 [INFO] Executing instruction: Run Docker Container
2024/02/03 12:07:38.009235 [INFO] stop currently running containers...
2024/02/03 12:07:38.009247 [INFO] detected old app is not docker compose app
2024/02/03 12:07:38.009329 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 12:07:38.092492 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 12:07:38.107110 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 12:07:38.107143 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 12:07:38.120869 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 12:07:38.120904 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 12:07:38.136336 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 12:07:38.136377 [INFO] stopping current container: 8915c7b9fa18
2024/02/03 12:07:38.136389 [INFO] Running command /bin/sh -c docker ps | grep -q 8915c7b9fa18
2024/02/03 12:07:38.160346 [INFO] Running command /bin/sh -c docker ps | grep -q 8915c7b9fa18
2024/02/03 12:07:38.179975 [INFO] Pruning containers ...
2024/02/03 12:07:38.179997 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 12:07:38.205245 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 12:07:38.205276 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 12:07:38.226894 [INFO] Total reclaimed space: 0B

2024/02/03 12:07:38.226931 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 12:07:38.245121 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 12:07:38.245153 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 12:07:38.267054 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 12:07:38.267074 [INFO] Removing /var/app/current/ if it exists
2024/02/03 12:07:38.267163 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 12:07:38.267180 [INFO] detected new app is not docker compose app
2024/02/03 12:07:38.267248 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 12:07:38.719472 [INFO] 0dc27213225823deea574fe068dd467748be7a9739ec9d9de05aa2c2335ef174

2024/02/03 12:07:43.721441 [INFO] Running command /bin/sh -c docker ps | grep -q 0dc272132258
2024/02/03 12:07:43.740594 [ERROR] docker container quit unexpectedly on 2024-02-03 12:07:43.740576873 +0000 UTC: Command /bin/sh -c docker ps | grep -q 0dc272132258 failed with error exit status 1
2024/02/03 12:07:43.740625 [INFO] Running command /bin/sh -c docker logs 0dc272132258
2024/02/03 12:07:43.760693 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 0dc272132258: Command /bin/sh -c docker ps | grep -q 0dc272132258 failed with error exit status 1 

2024/02/03 12:07:43.760703 [INFO] Executing cleanup logic
2024/02/03 12:07:43.760953 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 13:07:44.699652 [INFO] Starting...
2024/02/03 13:07:44.699692 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 13:07:44.699715 [INFO] reading event message file
2024/02/03 13:07:44.700516 [INFO] Engine received EB command userdata-exec

2024/02/03 13:07:44.706075 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 13:07:45.143903 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 13:07:45.615920 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 13:07:45.616022 [INFO] Engine command: (self-startup)

2024/02/03 13:07:45.616029 [INFO] Downloading EB Application...
2024/02/03 13:07:45.616032 [INFO] Region: eu-west-1
2024/02/03 13:07:45.616035 [INFO] envID: e-8gmkc7rmw6
2024/02/03 13:07:45.616039 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 13:07:45.616042 [INFO] Using manifest file name from command request
2024/02/03 13:07:45.616059 [INFO] Unable to get version manifest file.
2024/02/03 13:07:45.616062 [INFO] Downloading latest manifest available.
2024/02/03 13:07:45.616064 [INFO] Download latest app version manifest
2024/02/03 13:07:45.616338 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 13:07:45.662655 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 13:07:45.662837 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 13:07:45.678713 [INFO] Download successful124bytes downloaded
2024/02/03 13:07:45.678877 [INFO] Trying to read and parse version manifest...
2024/02/03 13:07:45.678951 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 13:07:45.704777 [INFO] Download successful264bytes downloaded
2024/02/03 13:07:45.705106 [INFO] Executing instruction: SyncClock
2024/02/03 13:07:45.705112 [INFO] Starting SyncClock
2024/02/03 13:07:45.705125 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 13:07:45.710610 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 13:07:35 2024
System time     : 0.000002668 seconds fast of NTP time
Last offset     : +0.000002010 seconds
RMS offset      : 0.000030176 seconds
Frequency       : 0.131 ppm fast
Residual freq   : +0.003 ppm
Skew            : 0.320 ppm
Root delay      : 0.000464136 seconds
Root dispersion : 0.000436109 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/03 13:07:45.710628 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 13:07:45.715702 [INFO] 200 OK

2024/02/03 13:07:45.715800 [INFO] Skipping Configure OS
2024/02/03 13:07:45.715805 [INFO] Skipping LockRepo
2024/02/03 13:07:45.715809 [INFO] Skipping GenerateEBBanner
2024/02/03 13:07:45.715813 [INFO] Skipping Install Process Manager
2024/02/03 13:07:45.715817 [INFO] Skipping install syslog
2024/02/03 13:07:45.715821 [INFO] Skipping install cron
2024/02/03 13:07:45.715825 [INFO] Skipping install proxy
2024/02/03 13:07:45.715829 [INFO] Skipping installhealthd
2024/02/03 13:07:45.715832 [INFO] Skipping Install Log Streaming Manager
2024/02/03 13:07:45.715836 [INFO] Skipping install X-Ray
2024/02/03 13:07:45.715840 [INFO] Skipping install Third Party License
2024/02/03 13:07:45.715845 [INFO] Skipping installSqsd
2024/02/03 13:07:45.715849 [INFO] Skipping bootstraphealthd
2024/02/03 13:07:45.715852 [INFO] Skipping Install yum packages
2024/02/03 13:07:45.715856 [INFO] Skipping install docker-compose
2024/02/03 13:07:45.715861 [INFO] Skipping Configure Docker Daemon
2024/02/03 13:07:45.715867 [INFO] Skipping MarkBaked
2024/02/03 13:07:45.715871 [INFO] Skipping TuneSystemSettings
2024/02/03 13:07:45.715873 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 13:07:45.715876 [INFO] Initialize LogRotate files and directories
2024/02/03 13:07:45.729394 [INFO] Skipping BootstrapCFNHup
2024/02/03 13:07:45.729403 [INFO] Executing instruction: StartCFNHup
2024/02/03 13:07:45.729405 [INFO] Start cfn-hup
2024/02/03 13:07:45.729421 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 13:07:45.747488 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 13:07:45.762353 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 13:07:45.762389 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 13:07:45.762394 [INFO] Executing instruction: Start Docker
2024/02/03 13:07:45.762416 [INFO] Starting Docker...
2024/02/03 13:07:45.762502 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 13:07:45.766297 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 13:07:45.770719 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 13:07:46.130649 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 13:07:46.155946 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 13:07:46.155980 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 13:07:46.172045 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 13:07:46.184231 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 13:07:46.197050 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 13:07:46.307541 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 13:07:46.307592 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 13:07:46.661058 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 13:07:47.068592 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 13:07:47.080176 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 13:07:47.373570 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 13:07:47.382898 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 13:07:47.396398 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 13:07:47.405465 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 13:07:48.717632 [INFO] Skipping Setup Docker Options
2024/02/03 13:07:48.717651 [INFO] Skipping MarkBootstrapped
2024/02/03 13:07:48.717655 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 13:07:48.717770 [INFO] Starting SwitchCFNStack
2024/02/03 13:07:48.717783 [INFO] Executing instruction: stopSqsd
2024/02/03 13:07:48.717789 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 13:07:48.717792 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 13:07:48.717796 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 13:07:48.717816 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 13:07:49.208103 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 13:07:49.208154 [INFO] Executing instruction: StagedockerApplication
2024/02/03 13:07:49.208182 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 13:07:49.244716 [INFO] Pruning containers ...
2024/02/03 13:07:49.244749 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 13:07:49.283354 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
0dc272132258   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             agitated_black

2024/02/03 13:07:49.283393 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 13:07:49.315588 [INFO] Deleted Containers:
0dc27213225823deea574fe068dd467748be7a9739ec9d9de05aa2c2335ef174

Total reclaimed space: 0B

2024/02/03 13:07:49.315613 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 13:07:49.378684 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 13:07:49.378941 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 13:07:49.382099 [INFO] application/json

2024/02/03 13:07:49.382127 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 13:07:49.484900 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 13:07:49.488806 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 13:07:49.491798 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 13:07:49.491840 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 13:07:49.491859 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 13:07:49.491861 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 13:07:49.491873 [INFO] Executing instruction: Generate environment file
2024/02/03 13:07:49.491901 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 13:07:49.491906 [INFO] start build docker app
2024/02/03 13:07:49.492337 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 13:07:49.492344 [INFO] fetching image and ports
2024/02/03 13:07:49.494673 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 13:07:49.494761 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 13:07:49.494770 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 13:07:49.494780 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 13:07:50.552721 [INFO] Login Succeeded

2024/02/03 13:07:50.552905 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 13:07:50.553233 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 13:07:50.554142 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 13:07:50.698196 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 13:07:50.698223 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 13:07:50.698228 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 13:07:50.698231 [INFO] start to build docker image
2024/02/03 13:07:50.698247 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 13:07:50.964946 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 13:07:50.964971 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 13:07:50.964976 [INFO] successfully build docker image
2024/02/03 13:07:50.964979 [INFO] save staging docker image id
2024/02/03 13:07:50.965021 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 13:07:50.985502 [INFO] c176d18fbf65

2024/02/03 13:07:50.985646 [INFO] Executing instruction: configure X-Ray
2024/02/03 13:07:50.985653 [INFO] X-Ray is not enabled.
2024/02/03 13:07:50.985655 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 13:07:50.990744 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 13:07:50.992223 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 13:07:51.010651 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 13:07:51.010688 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 13:07:51.020729 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 13:07:51.035829 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 13:07:51.046577 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 13:07:51.098107 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 13:07:51.367329 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 13:07:51.367425 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 13:07:51.690229 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 13:07:51.704728 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 13:07:51.999538 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 13:07:52.019687 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 13:07:52.031712 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 13:07:52.323984 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 13:07:52.334686 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 13:07:52.665570 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 13:07:52.665614 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 13:07:52.683230 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 13:07:52.693449 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 13:07:52.780339 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 13:07:52.781741 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 13:07:52.782648 [INFO] Executing instruction: configure log streaming
2024/02/03 13:07:52.782659 [INFO] log streaming is not enabled
2024/02/03 13:07:52.782662 [INFO] disable log stream
2024/02/03 13:07:52.782677 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 13:07:52.809097 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 13:07:52.832328 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 13:07:52.832352 [INFO] Checking if logs need forced rotation
2024/02/03 13:07:52.832374 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 13:07:53.447544 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 13:07:53.935235 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 13:07:53.937064 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 13:07:54.418824 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 13:07:54.434923 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 13:07:54.434940 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 13:07:54.434951 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 13:07:54.840253 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 13:07:54.840289 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 13:07:54.840315 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 13:07:54.840318 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 13:07:54.840342 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 13:07:54.840353 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 13:07:54.840356 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 13:07:54.840361 [INFO] Executing instruction: stop X-Ray
2024/02/03 13:07:54.840365 [INFO] stop X-Ray ...
2024/02/03 13:07:54.840378 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 13:07:54.857320 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 13:07:54.857352 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 13:07:54.877835 [INFO] Executing instruction: Run Docker Container
2024/02/03 13:07:54.877870 [INFO] stop currently running containers...
2024/02/03 13:07:54.877883 [INFO] detected old app is not docker compose app
2024/02/03 13:07:54.877897 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 13:07:54.933059 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 13:07:54.949836 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 13:07:54.949898 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 13:07:54.974679 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 13:07:54.974713 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 13:07:54.993840 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 13:07:54.993933 [INFO] stopping current container: 0dc272132258
2024/02/03 13:07:54.993947 [INFO] Running command /bin/sh -c docker ps | grep -q 0dc272132258
2024/02/03 13:07:55.046186 [INFO] Running command /bin/sh -c docker ps | grep -q 0dc272132258
2024/02/03 13:07:55.067648 [INFO] Pruning containers ...
2024/02/03 13:07:55.067671 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 13:07:55.095794 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 13:07:55.095826 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 13:07:55.124090 [INFO] Total reclaimed space: 0B

2024/02/03 13:07:55.124117 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 13:07:55.160796 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 13:07:55.160829 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 13:07:55.219992 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 13:07:55.220015 [INFO] Removing /var/app/current/ if it exists
2024/02/03 13:07:55.220107 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 13:07:55.220123 [INFO] detected new app is not docker compose app
2024/02/03 13:07:55.220181 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 13:07:55.563387 [INFO] 1d7f33d8a62233b75ee9d72a85f8b1f41d94db4aebed43c1c8684351822b90cf

2024/02/03 13:08:00.567253 [INFO] Running command /bin/sh -c docker ps | grep -q 1d7f33d8a622
2024/02/03 13:08:00.587839 [ERROR] docker container quit unexpectedly on 2024-02-03 13:08:00.587821397 +0000 UTC: Command /bin/sh -c docker ps | grep -q 1d7f33d8a622 failed with error exit status 1
2024/02/03 13:08:00.587870 [INFO] Running command /bin/sh -c docker logs 1d7f33d8a622
2024/02/03 13:08:00.608722 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 1d7f33d8a622: Command /bin/sh -c docker ps | grep -q 1d7f33d8a622 failed with error exit status 1 

2024/02/03 13:08:00.608734 [INFO] Executing cleanup logic
2024/02/03 13:08:00.608907 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 14:08:01.727463 [INFO] Starting...
2024/02/03 14:08:01.727514 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 14:08:01.727538 [INFO] reading event message file
2024/02/03 14:08:01.728284 [INFO] Engine received EB command userdata-exec

2024/02/03 14:08:01.734568 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 14:08:02.249612 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 14:08:02.796609 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 14:08:02.796718 [INFO] Engine command: (self-startup)

2024/02/03 14:08:02.796730 [INFO] Downloading EB Application...
2024/02/03 14:08:02.796733 [INFO] Region: eu-west-1
2024/02/03 14:08:02.796735 [INFO] envID: e-8gmkc7rmw6
2024/02/03 14:08:02.796738 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 14:08:02.796741 [INFO] Using manifest file name from command request
2024/02/03 14:08:02.797049 [INFO] Unable to get version manifest file.
2024/02/03 14:08:02.797060 [INFO] Downloading latest manifest available.
2024/02/03 14:08:02.797064 [INFO] Download latest app version manifest
2024/02/03 14:08:02.797305 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 14:08:02.843455 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 14:08:02.843701 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 14:08:02.854728 [INFO] Download successful124bytes downloaded
2024/02/03 14:08:02.854883 [INFO] Trying to read and parse version manifest...
2024/02/03 14:08:02.854959 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 14:08:02.892466 [INFO] Download successful264bytes downloaded
2024/02/03 14:08:02.893071 [INFO] Executing instruction: SyncClock
2024/02/03 14:08:02.893079 [INFO] Starting SyncClock
2024/02/03 14:08:02.893095 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 14:08:02.901708 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 14:07:54 2024
System time     : 0.000003661 seconds fast of NTP time
Last offset     : +0.000004185 seconds
RMS offset      : 0.000004749 seconds
Frequency       : 0.426 ppm fast
Residual freq   : +0.011 ppm
Skew            : 0.608 ppm
Root delay      : 0.000442430 seconds
Root dispersion : 0.000320101 seconds
Update interval : 32.3 seconds
Leap status     : Normal

2024/02/03 14:08:02.901740 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 14:08:02.909650 [INFO] 200 OK

2024/02/03 14:08:02.909757 [INFO] Skipping Configure OS
2024/02/03 14:08:02.909764 [INFO] Skipping LockRepo
2024/02/03 14:08:02.909768 [INFO] Skipping GenerateEBBanner
2024/02/03 14:08:02.909772 [INFO] Skipping Install Process Manager
2024/02/03 14:08:02.909776 [INFO] Skipping install syslog
2024/02/03 14:08:02.909780 [INFO] Skipping install cron
2024/02/03 14:08:02.909783 [INFO] Skipping install proxy
2024/02/03 14:08:02.909788 [INFO] Skipping installhealthd
2024/02/03 14:08:02.909793 [INFO] Skipping Install Log Streaming Manager
2024/02/03 14:08:02.909799 [INFO] Skipping install X-Ray
2024/02/03 14:08:02.909805 [INFO] Skipping install Third Party License
2024/02/03 14:08:02.909812 [INFO] Skipping installSqsd
2024/02/03 14:08:02.909826 [INFO] Skipping bootstraphealthd
2024/02/03 14:08:02.909832 [INFO] Skipping Install yum packages
2024/02/03 14:08:02.909836 [INFO] Skipping install docker-compose
2024/02/03 14:08:02.909841 [INFO] Skipping Configure Docker Daemon
2024/02/03 14:08:02.909845 [INFO] Skipping MarkBaked
2024/02/03 14:08:02.909849 [INFO] Skipping TuneSystemSettings
2024/02/03 14:08:02.909851 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 14:08:02.909854 [INFO] Initialize LogRotate files and directories
2024/02/03 14:08:02.926738 [INFO] Skipping BootstrapCFNHup
2024/02/03 14:08:02.926751 [INFO] Executing instruction: StartCFNHup
2024/02/03 14:08:02.926754 [INFO] Start cfn-hup
2024/02/03 14:08:02.926773 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 14:08:02.942636 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 14:08:02.952974 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 14:08:02.953009 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 14:08:02.953014 [INFO] Executing instruction: Start Docker
2024/02/03 14:08:02.953017 [INFO] Starting Docker...
2024/02/03 14:08:02.953100 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 14:08:02.960171 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 14:08:02.968736 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 14:08:03.435479 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 14:08:03.473544 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 14:08:03.473588 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 14:08:03.504533 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 14:08:03.514546 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 14:08:03.525685 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 14:08:03.590610 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 14:08:03.590643 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 14:08:03.968999 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 14:08:04.292936 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 14:08:04.304657 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 14:08:04.680204 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 14:08:04.690163 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 14:08:04.709896 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 14:08:04.719556 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 14:08:06.011920 [INFO] Skipping Setup Docker Options
2024/02/03 14:08:06.011953 [INFO] Skipping MarkBootstrapped
2024/02/03 14:08:06.011957 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 14:08:06.012152 [INFO] Starting SwitchCFNStack
2024/02/03 14:08:06.012159 [INFO] Executing instruction: stopSqsd
2024/02/03 14:08:06.012163 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 14:08:06.012167 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 14:08:06.012171 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 14:08:06.012195 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 14:08:06.472381 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 14:08:06.472469 [INFO] Executing instruction: StagedockerApplication
2024/02/03 14:08:06.472486 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 14:08:06.493712 [INFO] Pruning containers ...
2024/02/03 14:08:06.493755 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 14:08:06.513671 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
1d7f33d8a622   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             youthful_yonath

2024/02/03 14:08:06.513698 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 14:08:06.567475 [INFO] Deleted Containers:
1d7f33d8a62233b75ee9d72a85f8b1f41d94db4aebed43c1c8684351822b90cf

Total reclaimed space: 0B

2024/02/03 14:08:06.567497 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 14:08:06.586288 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 14:08:06.586507 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 14:08:06.590686 [INFO] application/json

2024/02/03 14:08:06.590707 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 14:08:06.689215 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 14:08:06.689395 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 14:08:06.690774 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 14:08:06.690801 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 14:08:06.690818 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 14:08:06.690820 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 14:08:06.690825 [INFO] Executing instruction: Generate environment file
2024/02/03 14:08:06.690852 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 14:08:06.690857 [INFO] start build docker app
2024/02/03 14:08:06.691290 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 14:08:06.691295 [INFO] fetching image and ports
2024/02/03 14:08:06.693852 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 14:08:06.693949 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 14:08:06.693959 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 14:08:06.693970 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 14:08:07.602630 [INFO] Login Succeeded

2024/02/03 14:08:07.602650 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 14:08:07.602658 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 14:08:07.602673 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 14:08:07.743725 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 14:08:07.743753 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 14:08:07.743757 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 14:08:07.743849 [INFO] start to build docker image
2024/02/03 14:08:07.743875 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 14:08:08.017624 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B 0.0s done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 14:08:08.017645 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 14:08:08.017649 [INFO] successfully build docker image
2024/02/03 14:08:08.017651 [INFO] save staging docker image id
2024/02/03 14:08:08.017662 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 14:08:08.037430 [INFO] c176d18fbf65

2024/02/03 14:08:08.037563 [INFO] Executing instruction: configure X-Ray
2024/02/03 14:08:08.037569 [INFO] X-Ray is not enabled.
2024/02/03 14:08:08.037572 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 14:08:08.043001 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 14:08:08.045044 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 14:08:08.059789 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 14:08:08.059822 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 14:08:08.069815 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 14:08:08.079969 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 14:08:08.092679 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 14:08:08.152880 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 14:08:08.514534 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 14:08:08.514717 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 14:08:08.906556 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 14:08:08.918972 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 14:08:09.266409 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 14:08:09.278322 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 14:08:09.288205 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 14:08:09.613829 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 14:08:09.635488 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 14:08:10.026138 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 14:08:10.026177 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 14:08:10.049767 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 14:08:10.073220 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 14:08:10.181942 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 14:08:10.182833 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 14:08:10.183675 [INFO] Executing instruction: configure log streaming
2024/02/03 14:08:10.183685 [INFO] log streaming is not enabled
2024/02/03 14:08:10.183689 [INFO] disable log stream
2024/02/03 14:08:10.183720 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 14:08:10.213170 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 14:08:10.246860 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 14:08:10.246886 [INFO] Checking if logs need forced rotation
2024/02/03 14:08:10.246907 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 14:08:10.820334 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 14:08:11.348239 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 14:08:11.350160 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 14:08:11.882053 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 14:08:11.900127 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 14:08:11.900145 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 14:08:11.900157 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 14:08:12.373776 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 14:08:12.373817 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 14:08:12.373853 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 14:08:12.373858 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 14:08:12.373878 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 14:08:12.373890 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 14:08:12.373895 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 14:08:12.373900 [INFO] Executing instruction: stop X-Ray
2024/02/03 14:08:12.373904 [INFO] stop X-Ray ...
2024/02/03 14:08:12.373916 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 14:08:12.392848 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 14:08:12.392883 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 14:08:12.411446 [INFO] Executing instruction: Run Docker Container
2024/02/03 14:08:12.411480 [INFO] stop currently running containers...
2024/02/03 14:08:12.411491 [INFO] detected old app is not docker compose app
2024/02/03 14:08:12.411505 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 14:08:12.432891 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 14:08:12.447808 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 14:08:12.447836 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 14:08:12.461638 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 14:08:12.461665 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 14:08:12.476191 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 14:08:12.476241 [INFO] stopping current container: 1d7f33d8a622
2024/02/03 14:08:12.476254 [INFO] Running command /bin/sh -c docker ps | grep -q 1d7f33d8a622
2024/02/03 14:08:12.498093 [INFO] Running command /bin/sh -c docker ps | grep -q 1d7f33d8a622
2024/02/03 14:08:12.520443 [INFO] Pruning containers ...
2024/02/03 14:08:12.520467 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 14:08:12.540259 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 14:08:12.540290 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 14:08:12.561132 [INFO] Total reclaimed space: 0B

2024/02/03 14:08:12.561259 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 14:08:12.580881 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 14:08:12.580917 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 14:08:12.600431 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 14:08:12.600456 [INFO] Removing /var/app/current/ if it exists
2024/02/03 14:08:12.600567 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 14:08:12.600587 [INFO] detected new app is not docker compose app
2024/02/03 14:08:12.600643 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 14:08:12.969537 [INFO] 9f9bb5526e61679d18ec490cbd1ba3338f0ceb0cfabdd93afc80c6ab09bcb8a5

2024/02/03 14:08:17.974170 [INFO] Running command /bin/sh -c docker ps | grep -q 9f9bb5526e61
2024/02/03 14:08:18.052462 [ERROR] docker container quit unexpectedly on 2024-02-03 14:08:18.052450661 +0000 UTC: Command /bin/sh -c docker ps | grep -q 9f9bb5526e61 failed with error exit status 1
2024/02/03 14:08:18.052491 [INFO] Running command /bin/sh -c docker logs 9f9bb5526e61
2024/02/03 14:08:18.079991 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 9f9bb5526e61: Command /bin/sh -c docker ps | grep -q 9f9bb5526e61 failed with error exit status 1 

2024/02/03 14:08:18.080021 [INFO] Executing cleanup logic
2024/02/03 14:08:18.080352 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 15:08:19.162071 [INFO] Starting...
2024/02/03 15:08:19.162113 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 15:08:19.162141 [INFO] reading event message file
2024/02/03 15:08:19.163005 [INFO] Engine received EB command userdata-exec

2024/02/03 15:08:19.167906 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 15:08:19.641324 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 15:08:20.110593 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 15:08:20.110727 [INFO] Engine command: (self-startup)

2024/02/03 15:08:20.110741 [INFO] Downloading EB Application...
2024/02/03 15:08:20.110745 [INFO] Region: eu-west-1
2024/02/03 15:08:20.110749 [INFO] envID: e-8gmkc7rmw6
2024/02/03 15:08:20.110753 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 15:08:20.110757 [INFO] Using manifest file name from command request
2024/02/03 15:08:20.110771 [INFO] Unable to get version manifest file.
2024/02/03 15:08:20.110773 [INFO] Downloading latest manifest available.
2024/02/03 15:08:20.110775 [INFO] Download latest app version manifest
2024/02/03 15:08:20.110917 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 15:08:20.151330 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 15:08:20.151634 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 15:08:20.167827 [INFO] Download successful124bytes downloaded
2024/02/03 15:08:20.168110 [INFO] Trying to read and parse version manifest...
2024/02/03 15:08:20.168216 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 15:08:20.203112 [INFO] Download successful264bytes downloaded
2024/02/03 15:08:20.203726 [INFO] Executing instruction: SyncClock
2024/02/03 15:08:20.203733 [INFO] Starting SyncClock
2024/02/03 15:08:20.203743 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 15:08:20.210127 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 15:08:16 2024
System time     : 0.000001164 seconds slow of NTP time
Last offset     : -0.000002140 seconds
RMS offset      : 0.000002069 seconds
Frequency       : 0.174 ppm fast
Residual freq   : -0.002 ppm
Skew            : 0.054 ppm
Root delay      : 0.000438353 seconds
Root dispersion : 0.000441593 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/03 15:08:20.210146 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 15:08:20.214688 [INFO] 200 OK

2024/02/03 15:08:20.214782 [INFO] Skipping Configure OS
2024/02/03 15:08:20.214787 [INFO] Skipping LockRepo
2024/02/03 15:08:20.214791 [INFO] Skipping GenerateEBBanner
2024/02/03 15:08:20.214796 [INFO] Skipping Install Process Manager
2024/02/03 15:08:20.214800 [INFO] Skipping install syslog
2024/02/03 15:08:20.214803 [INFO] Skipping install cron
2024/02/03 15:08:20.214807 [INFO] Skipping install proxy
2024/02/03 15:08:20.214811 [INFO] Skipping installhealthd
2024/02/03 15:08:20.214819 [INFO] Skipping Install Log Streaming Manager
2024/02/03 15:08:20.214823 [INFO] Skipping install X-Ray
2024/02/03 15:08:20.214827 [INFO] Skipping install Third Party License
2024/02/03 15:08:20.214834 [INFO] Skipping installSqsd
2024/02/03 15:08:20.214838 [INFO] Skipping bootstraphealthd
2024/02/03 15:08:20.214842 [INFO] Skipping Install yum packages
2024/02/03 15:08:20.214847 [INFO] Skipping install docker-compose
2024/02/03 15:08:20.214851 [INFO] Skipping Configure Docker Daemon
2024/02/03 15:08:20.214855 [INFO] Skipping MarkBaked
2024/02/03 15:08:20.214859 [INFO] Skipping TuneSystemSettings
2024/02/03 15:08:20.214862 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 15:08:20.214864 [INFO] Initialize LogRotate files and directories
2024/02/03 15:08:20.228004 [INFO] Skipping BootstrapCFNHup
2024/02/03 15:08:20.228013 [INFO] Executing instruction: StartCFNHup
2024/02/03 15:08:20.228016 [INFO] Start cfn-hup
2024/02/03 15:08:20.228033 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 15:08:20.245017 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 15:08:20.256751 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 15:08:20.256785 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 15:08:20.256789 [INFO] Executing instruction: Start Docker
2024/02/03 15:08:20.256792 [INFO] Starting Docker...
2024/02/03 15:08:20.256879 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 15:08:20.257976 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 15:08:20.259132 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 15:08:20.670638 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 15:08:20.685681 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 15:08:20.685715 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 15:08:20.698687 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 15:08:20.709370 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 15:08:20.734778 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 15:08:20.827382 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 15:08:20.827448 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 15:08:21.165593 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 15:08:21.525782 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 15:08:21.543563 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 15:08:21.882703 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 15:08:21.894565 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 15:08:21.908999 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 15:08:21.922856 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 15:08:23.211323 [INFO] Skipping Setup Docker Options
2024/02/03 15:08:23.211349 [INFO] Skipping MarkBootstrapped
2024/02/03 15:08:23.211353 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 15:08:23.211507 [INFO] Starting SwitchCFNStack
2024/02/03 15:08:23.211516 [INFO] Executing instruction: stopSqsd
2024/02/03 15:08:23.211520 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 15:08:23.211524 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 15:08:23.211528 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 15:08:23.211553 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 15:08:23.745667 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 15:08:23.745688 [INFO] Executing instruction: StagedockerApplication
2024/02/03 15:08:23.745702 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 15:08:23.767692 [INFO] Pruning containers ...
2024/02/03 15:08:23.767719 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 15:08:23.789049 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
9f9bb5526e61   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             zealous_ptolemy

2024/02/03 15:08:23.789078 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 15:08:23.828232 [INFO] Deleted Containers:
9f9bb5526e61679d18ec490cbd1ba3338f0ceb0cfabdd93afc80c6ab09bcb8a5

Total reclaimed space: 0B

2024/02/03 15:08:23.828490 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 15:08:23.849503 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 15:08:23.849744 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 15:08:23.853459 [INFO] application/json

2024/02/03 15:08:23.853488 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 15:08:23.940616 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 15:08:23.940801 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 15:08:23.941982 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 15:08:23.942010 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 15:08:23.942031 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 15:08:23.942039 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 15:08:23.942044 [INFO] Executing instruction: Generate environment file
2024/02/03 15:08:23.942070 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 15:08:23.942073 [INFO] start build docker app
2024/02/03 15:08:23.945050 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 15:08:23.945064 [INFO] fetching image and ports
2024/02/03 15:08:23.946680 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 15:08:23.946800 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 15:08:23.946811 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 15:08:23.946826 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 15:08:24.987959 [INFO] Login Succeeded

2024/02/03 15:08:24.988039 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 15:08:24.988048 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 15:08:24.988073 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 15:08:25.176476 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 15:08:25.176670 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 15:08:25.176677 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 15:08:25.176681 [INFO] start to build docker image
2024/02/03 15:08:25.176697 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 15:08:25.503596 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 15:08:25.503620 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 15:08:25.503624 [INFO] successfully build docker image
2024/02/03 15:08:25.504450 [INFO] save staging docker image id
2024/02/03 15:08:25.504470 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 15:08:25.534728 [INFO] c176d18fbf65

2024/02/03 15:08:25.534941 [INFO] Executing instruction: configure X-Ray
2024/02/03 15:08:25.534948 [INFO] X-Ray is not enabled.
2024/02/03 15:08:25.534951 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 15:08:25.540963 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 15:08:25.542512 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 15:08:25.555118 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 15:08:25.555151 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 15:08:25.565582 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 15:08:25.577479 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 15:08:25.591947 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 15:08:25.668440 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 15:08:26.020058 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 15:08:26.020144 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 15:08:26.394230 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 15:08:26.406317 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 15:08:26.767973 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 15:08:26.777623 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 15:08:26.787541 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 15:08:27.184046 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 15:08:27.194336 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 15:08:27.524973 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 15:08:27.525010 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 15:08:27.538749 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 15:08:27.552024 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 15:08:27.668685 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 15:08:27.670311 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 15:08:27.671203 [INFO] Executing instruction: configure log streaming
2024/02/03 15:08:27.671213 [INFO] log streaming is not enabled
2024/02/03 15:08:27.671217 [INFO] disable log stream
2024/02/03 15:08:27.671231 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 15:08:27.695360 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 15:08:27.714006 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 15:08:27.714041 [INFO] Checking if logs need forced rotation
2024/02/03 15:08:27.714061 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 15:08:28.225216 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 15:08:28.623971 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 15:08:28.625877 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 15:08:28.740478 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 15:08:28.759285 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 15:08:28.759300 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 15:08:28.759312 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 15:08:29.169023 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 15:08:29.169083 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 15:08:29.169109 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 15:08:29.169113 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 15:08:29.169135 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 15:08:29.169164 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 15:08:29.169166 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 15:08:29.169172 [INFO] Executing instruction: stop X-Ray
2024/02/03 15:08:29.169174 [INFO] stop X-Ray ...
2024/02/03 15:08:29.169185 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 15:08:29.186881 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 15:08:29.186914 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 15:08:29.204469 [INFO] Executing instruction: Run Docker Container
2024/02/03 15:08:29.204501 [INFO] stop currently running containers...
2024/02/03 15:08:29.204510 [INFO] detected old app is not docker compose app
2024/02/03 15:08:29.204522 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 15:08:29.293282 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 15:08:29.308896 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 15:08:29.308931 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 15:08:29.324418 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 15:08:29.324453 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 15:08:29.343083 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 15:08:29.343138 [INFO] stopping current container: 9f9bb5526e61
2024/02/03 15:08:29.343151 [INFO] Running command /bin/sh -c docker ps | grep -q 9f9bb5526e61
2024/02/03 15:08:29.371300 [INFO] Running command /bin/sh -c docker ps | grep -q 9f9bb5526e61
2024/02/03 15:08:29.397007 [INFO] Pruning containers ...
2024/02/03 15:08:29.397045 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 15:08:29.417438 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 15:08:29.417468 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 15:08:29.438045 [INFO] Total reclaimed space: 0B

2024/02/03 15:08:29.438072 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 15:08:29.472826 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 15:08:29.472861 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 15:08:29.519280 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 15:08:29.519310 [INFO] Removing /var/app/current/ if it exists
2024/02/03 15:08:29.519464 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 15:08:29.519483 [INFO] detected new app is not docker compose app
2024/02/03 15:08:29.519536 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 15:08:29.999635 [INFO] 9c24dd0f300459fc39a5460d05a33898dfa9117c117cfde03198e1cfa46007ab

2024/02/03 15:08:35.004270 [INFO] Running command /bin/sh -c docker ps | grep -q 9c24dd0f3004
2024/02/03 15:08:35.027478 [ERROR] docker container quit unexpectedly on 2024-02-03 15:08:35.027464837 +0000 UTC: Command /bin/sh -c docker ps | grep -q 9c24dd0f3004 failed with error exit status 1
2024/02/03 15:08:35.027505 [INFO] Running command /bin/sh -c docker logs 9c24dd0f3004
2024/02/03 15:08:35.049386 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 9c24dd0f3004: Command /bin/sh -c docker ps | grep -q 9c24dd0f3004 failed with error exit status 1 

2024/02/03 15:08:35.049398 [INFO] Executing cleanup logic
2024/02/03 15:08:35.049685 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 16:08:36.001763 [INFO] Starting...
2024/02/03 16:08:36.001803 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 16:08:36.001831 [INFO] reading event message file
2024/02/03 16:08:36.002683 [INFO] Engine received EB command userdata-exec

2024/02/03 16:08:36.011584 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 16:08:36.477806 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 16:08:36.962872 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 16:08:36.963178 [INFO] Engine command: (self-startup)

2024/02/03 16:08:36.963198 [INFO] Downloading EB Application...
2024/02/03 16:08:36.963201 [INFO] Region: eu-west-1
2024/02/03 16:08:36.963205 [INFO] envID: e-8gmkc7rmw6
2024/02/03 16:08:36.963221 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 16:08:36.963239 [INFO] Using manifest file name from command request
2024/02/03 16:08:36.963254 [INFO] Unable to get version manifest file.
2024/02/03 16:08:36.963257 [INFO] Downloading latest manifest available.
2024/02/03 16:08:36.963261 [INFO] Download latest app version manifest
2024/02/03 16:08:36.963509 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 16:08:37.002137 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 16:08:37.002364 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 16:08:37.013155 [INFO] Download successful124bytes downloaded
2024/02/03 16:08:37.013328 [INFO] Trying to read and parse version manifest...
2024/02/03 16:08:37.013406 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 16:08:37.037568 [INFO] Download successful264bytes downloaded
2024/02/03 16:08:37.037873 [INFO] Executing instruction: SyncClock
2024/02/03 16:08:37.037879 [INFO] Starting SyncClock
2024/02/03 16:08:37.037889 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 16:08:37.049066 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 16:08:24 2024
System time     : 0.000002564 seconds fast of NTP time
Last offset     : +0.000002422 seconds
RMS offset      : 0.000007552 seconds
Frequency       : 0.406 ppm fast
Residual freq   : +0.008 ppm
Skew            : 0.272 ppm
Root delay      : 0.000419309 seconds
Root dispersion : 0.000438356 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/03 16:08:37.049092 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 16:08:37.053252 [INFO] 200 OK

2024/02/03 16:08:37.053449 [INFO] Skipping Configure OS
2024/02/03 16:08:37.053460 [INFO] Skipping LockRepo
2024/02/03 16:08:37.053466 [INFO] Skipping GenerateEBBanner
2024/02/03 16:08:37.053472 [INFO] Skipping Install Process Manager
2024/02/03 16:08:37.053486 [INFO] Skipping install syslog
2024/02/03 16:08:37.053492 [INFO] Skipping install cron
2024/02/03 16:08:37.053505 [INFO] Skipping install proxy
2024/02/03 16:08:37.053519 [INFO] Skipping installhealthd
2024/02/03 16:08:37.053532 [INFO] Skipping Install Log Streaming Manager
2024/02/03 16:08:37.053557 [INFO] Skipping install X-Ray
2024/02/03 16:08:37.053570 [INFO] Skipping install Third Party License
2024/02/03 16:08:37.053584 [INFO] Skipping installSqsd
2024/02/03 16:08:37.053597 [INFO] Skipping bootstraphealthd
2024/02/03 16:08:37.053610 [INFO] Skipping Install yum packages
2024/02/03 16:08:37.053622 [INFO] Skipping install docker-compose
2024/02/03 16:08:37.053628 [INFO] Skipping Configure Docker Daemon
2024/02/03 16:08:37.053633 [INFO] Skipping MarkBaked
2024/02/03 16:08:37.053638 [INFO] Skipping TuneSystemSettings
2024/02/03 16:08:37.053641 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 16:08:37.053646 [INFO] Initialize LogRotate files and directories
2024/02/03 16:08:37.067382 [INFO] Skipping BootstrapCFNHup
2024/02/03 16:08:37.067392 [INFO] Executing instruction: StartCFNHup
2024/02/03 16:08:37.067395 [INFO] Start cfn-hup
2024/02/03 16:08:37.067440 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 16:08:37.083085 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 16:08:37.097292 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 16:08:37.097330 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 16:08:37.097334 [INFO] Executing instruction: Start Docker
2024/02/03 16:08:37.097337 [INFO] Starting Docker...
2024/02/03 16:08:37.097424 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 16:08:37.099026 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 16:08:37.100135 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 16:08:37.384403 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 16:08:37.400881 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 16:08:37.400916 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 16:08:37.414561 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 16:08:37.428335 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 16:08:37.444653 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 16:08:37.533075 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 16:08:37.533118 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 16:08:37.886488 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 16:08:38.170488 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 16:08:38.182593 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 16:08:38.512191 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 16:08:38.525323 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 16:08:38.539261 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 16:08:38.549300 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 16:08:39.892010 [INFO] Skipping Setup Docker Options
2024/02/03 16:08:39.892040 [INFO] Skipping MarkBootstrapped
2024/02/03 16:08:39.892044 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 16:08:39.892534 [INFO] Starting SwitchCFNStack
2024/02/03 16:08:39.892545 [INFO] Executing instruction: stopSqsd
2024/02/03 16:08:39.892549 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 16:08:39.892552 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 16:08:39.892556 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 16:08:39.892573 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 16:08:40.326986 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 16:08:40.327041 [INFO] Executing instruction: StagedockerApplication
2024/02/03 16:08:40.327056 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 16:08:40.346033 [INFO] Pruning containers ...
2024/02/03 16:08:40.346062 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 16:08:40.373761 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
9c24dd0f3004   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             xenodochial_cerf

2024/02/03 16:08:40.373794 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 16:08:40.401528 [INFO] Deleted Containers:
9c24dd0f300459fc39a5460d05a33898dfa9117c117cfde03198e1cfa46007ab

Total reclaimed space: 0B

2024/02/03 16:08:40.401554 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 16:08:40.432147 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 16:08:40.432610 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 16:08:40.447035 [INFO] application/json

2024/02/03 16:08:40.447063 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 16:08:40.539004 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 16:08:40.539237 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 16:08:40.541155 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 16:08:40.541181 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 16:08:40.541196 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 16:08:40.541199 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 16:08:40.541203 [INFO] Executing instruction: Generate environment file
2024/02/03 16:08:40.541287 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 16:08:40.541294 [INFO] start build docker app
2024/02/03 16:08:40.541683 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 16:08:40.541699 [INFO] fetching image and ports
2024/02/03 16:08:40.543253 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 16:08:40.543378 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 16:08:40.543389 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 16:08:40.543398 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 16:08:41.385919 [INFO] Login Succeeded

2024/02/03 16:08:41.386564 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 16:08:41.386577 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 16:08:41.386598 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 16:08:41.541887 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 16:08:41.541918 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 16:08:41.541923 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 16:08:41.541926 [INFO] start to build docker image
2024/02/03 16:08:41.541946 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 16:08:41.830655 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 16:08:41.830680 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 16:08:41.830685 [INFO] successfully build docker image
2024/02/03 16:08:41.830688 [INFO] save staging docker image id
2024/02/03 16:08:41.830701 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 16:08:41.866439 [INFO] c176d18fbf65

2024/02/03 16:08:41.866726 [INFO] Executing instruction: configure X-Ray
2024/02/03 16:08:41.866734 [INFO] X-Ray is not enabled.
2024/02/03 16:08:41.866737 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 16:08:41.873425 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 16:08:41.875075 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 16:08:41.889808 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 16:08:41.889840 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 16:08:41.902801 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 16:08:41.914742 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 16:08:41.930634 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 16:08:41.975155 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 16:08:42.331424 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 16:08:42.331520 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 16:08:42.634828 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 16:08:42.650833 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 16:08:42.995917 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 16:08:43.005899 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 16:08:43.016851 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 16:08:43.285925 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 16:08:43.295735 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 16:08:43.600245 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 16:08:43.600279 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 16:08:43.612017 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 16:08:43.620716 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 16:08:43.701047 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 16:08:43.702032 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 16:08:43.702999 [INFO] Executing instruction: configure log streaming
2024/02/03 16:08:43.703009 [INFO] log streaming is not enabled
2024/02/03 16:08:43.703013 [INFO] disable log stream
2024/02/03 16:08:43.703028 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 16:08:43.721255 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 16:08:43.741146 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 16:08:43.741173 [INFO] Checking if logs need forced rotation
2024/02/03 16:08:43.741194 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 16:08:44.233006 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 16:08:44.645721 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 16:08:44.647531 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 16:08:45.170407 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 16:08:45.202932 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 16:08:45.202953 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 16:08:45.202969 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 16:08:45.659735 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 16:08:45.659759 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 16:08:45.659783 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 16:08:45.659786 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 16:08:45.659809 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 16:08:45.659819 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 16:08:45.659821 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 16:08:45.659826 [INFO] Executing instruction: stop X-Ray
2024/02/03 16:08:45.659828 [INFO] stop X-Ray ...
2024/02/03 16:08:45.659839 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 16:08:45.696722 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 16:08:45.697531 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 16:08:45.719568 [INFO] Executing instruction: Run Docker Container
2024/02/03 16:08:45.719688 [INFO] stop currently running containers...
2024/02/03 16:08:45.719707 [INFO] detected old app is not docker compose app
2024/02/03 16:08:45.719721 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 16:08:45.752600 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 16:08:45.769233 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 16:08:45.769262 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 16:08:45.788441 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 16:08:45.788477 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 16:08:45.807222 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 16:08:45.807272 [INFO] stopping current container: 9c24dd0f3004
2024/02/03 16:08:45.807285 [INFO] Running command /bin/sh -c docker ps | grep -q 9c24dd0f3004
2024/02/03 16:08:45.830911 [INFO] Running command /bin/sh -c docker ps | grep -q 9c24dd0f3004
2024/02/03 16:08:45.852475 [INFO] Pruning containers ...
2024/02/03 16:08:45.852499 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 16:08:45.871923 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 16:08:45.871957 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 16:08:45.893849 [INFO] Total reclaimed space: 0B

2024/02/03 16:08:45.893924 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 16:08:45.914089 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 16:08:45.914117 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 16:08:45.957871 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 16:08:45.957900 [INFO] Removing /var/app/current/ if it exists
2024/02/03 16:08:45.958080 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 16:08:45.958102 [INFO] detected new app is not docker compose app
2024/02/03 16:08:45.958164 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 16:08:46.384553 [INFO] 2e02b2521b61454f86565f76b22be087dd6064885b00ace5c84823670af29a24

2024/02/03 16:08:51.385217 [INFO] Running command /bin/sh -c docker ps | grep -q 2e02b2521b61
2024/02/03 16:08:51.410065 [ERROR] docker container quit unexpectedly on 2024-02-03 16:08:51.4100535 +0000 UTC: Command /bin/sh -c docker ps | grep -q 2e02b2521b61 failed with error exit status 1
2024/02/03 16:08:51.410091 [INFO] Running command /bin/sh -c docker logs 2e02b2521b61
2024/02/03 16:08:51.448086 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 2e02b2521b61: Command /bin/sh -c docker ps | grep -q 2e02b2521b61 failed with error exit status 1 

2024/02/03 16:08:51.448097 [INFO] Executing cleanup logic
2024/02/03 16:08:51.448391 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 17:08:52.373743 [INFO] Starting...
2024/02/03 17:08:52.373785 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 17:08:52.373815 [INFO] reading event message file
2024/02/03 17:08:52.374692 [INFO] Engine received EB command userdata-exec

2024/02/03 17:08:52.379713 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 17:08:52.714437 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 17:08:53.178862 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 17:08:53.178977 [INFO] Engine command: (self-startup)

2024/02/03 17:08:53.178997 [INFO] Downloading EB Application...
2024/02/03 17:08:53.179001 [INFO] Region: eu-west-1
2024/02/03 17:08:53.179004 [INFO] envID: e-8gmkc7rmw6
2024/02/03 17:08:53.179014 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 17:08:53.179018 [INFO] Using manifest file name from command request
2024/02/03 17:08:53.179034 [INFO] Unable to get version manifest file.
2024/02/03 17:08:53.179037 [INFO] Downloading latest manifest available.
2024/02/03 17:08:53.179040 [INFO] Download latest app version manifest
2024/02/03 17:08:53.179167 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 17:08:53.222950 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 17:08:53.223139 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 17:08:53.234984 [INFO] Download successful124bytes downloaded
2024/02/03 17:08:53.235132 [INFO] Trying to read and parse version manifest...
2024/02/03 17:08:53.235204 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 17:08:53.260382 [INFO] Download successful264bytes downloaded
2024/02/03 17:08:53.260883 [INFO] Executing instruction: SyncClock
2024/02/03 17:08:53.260891 [INFO] Starting SyncClock
2024/02/03 17:08:53.260903 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 17:08:53.268042 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 17:08:45 2024
System time     : 0.000002502 seconds slow of NTP time
Last offset     : -0.000002262 seconds
RMS offset      : 0.000003200 seconds
Frequency       : 0.449 ppm fast
Residual freq   : -0.003 ppm
Skew            : 0.126 ppm
Root delay      : 0.000439340 seconds
Root dispersion : 0.000413183 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/03 17:08:53.268070 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 17:08:53.272924 [INFO] 200 OK

2024/02/03 17:08:53.273022 [INFO] Skipping Configure OS
2024/02/03 17:08:53.273026 [INFO] Skipping LockRepo
2024/02/03 17:08:53.273030 [INFO] Skipping GenerateEBBanner
2024/02/03 17:08:53.273035 [INFO] Skipping Install Process Manager
2024/02/03 17:08:53.273038 [INFO] Skipping install syslog
2024/02/03 17:08:53.273042 [INFO] Skipping install cron
2024/02/03 17:08:53.273046 [INFO] Skipping install proxy
2024/02/03 17:08:53.273050 [INFO] Skipping installhealthd
2024/02/03 17:08:53.273054 [INFO] Skipping Install Log Streaming Manager
2024/02/03 17:08:53.273061 [INFO] Skipping install X-Ray
2024/02/03 17:08:53.273065 [INFO] Skipping install Third Party License
2024/02/03 17:08:53.273070 [INFO] Skipping installSqsd
2024/02/03 17:08:53.273074 [INFO] Skipping bootstraphealthd
2024/02/03 17:08:53.273078 [INFO] Skipping Install yum packages
2024/02/03 17:08:53.273082 [INFO] Skipping install docker-compose
2024/02/03 17:08:53.273088 [INFO] Skipping Configure Docker Daemon
2024/02/03 17:08:53.273092 [INFO] Skipping MarkBaked
2024/02/03 17:08:53.273096 [INFO] Skipping TuneSystemSettings
2024/02/03 17:08:53.273099 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 17:08:53.273101 [INFO] Initialize LogRotate files and directories
2024/02/03 17:08:53.287425 [INFO] Skipping BootstrapCFNHup
2024/02/03 17:08:53.287438 [INFO] Executing instruction: StartCFNHup
2024/02/03 17:08:53.287500 [INFO] Start cfn-hup
2024/02/03 17:08:53.287519 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 17:08:53.309951 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 17:08:53.323708 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 17:08:53.323746 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 17:08:53.323754 [INFO] Executing instruction: Start Docker
2024/02/03 17:08:53.323757 [INFO] Starting Docker...
2024/02/03 17:08:53.323842 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 17:08:53.325172 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 17:08:53.326409 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 17:08:53.632902 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 17:08:53.669031 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 17:08:53.669068 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 17:08:53.703177 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 17:08:53.731878 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 17:08:53.760415 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 17:08:53.826154 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 17:08:53.826618 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 17:08:54.203863 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 17:08:54.588278 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 17:08:54.600354 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 17:08:54.964458 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 17:08:54.979223 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 17:08:54.996245 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 17:08:55.015988 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 17:08:56.349776 [INFO] Skipping Setup Docker Options
2024/02/03 17:08:56.349801 [INFO] Skipping MarkBootstrapped
2024/02/03 17:08:56.349805 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 17:08:56.350011 [INFO] Starting SwitchCFNStack
2024/02/03 17:08:56.350019 [INFO] Executing instruction: stopSqsd
2024/02/03 17:08:56.350024 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 17:08:56.350028 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 17:08:56.350031 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 17:08:56.350050 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 17:08:56.921852 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 17:08:56.921880 [INFO] Executing instruction: StagedockerApplication
2024/02/03 17:08:56.921894 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 17:08:56.961525 [INFO] Pruning containers ...
2024/02/03 17:08:56.961564 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 17:08:56.981312 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
2e02b2521b61   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             agitated_kowalevski

2024/02/03 17:08:56.981342 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 17:08:57.006436 [INFO] Deleted Containers:
2e02b2521b61454f86565f76b22be087dd6064885b00ace5c84823670af29a24

Total reclaimed space: 0B

2024/02/03 17:08:57.006459 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 17:08:57.024478 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 17:08:57.024697 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 17:08:57.027934 [INFO] application/json

2024/02/03 17:08:57.027955 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 17:08:57.100795 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 17:08:57.100979 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 17:08:57.102293 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 17:08:57.102333 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 17:08:57.102348 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 17:08:57.102350 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 17:08:57.102355 [INFO] Executing instruction: Generate environment file
2024/02/03 17:08:57.102386 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 17:08:57.102391 [INFO] start build docker app
2024/02/03 17:08:57.102840 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 17:08:57.102844 [INFO] fetching image and ports
2024/02/03 17:08:57.104400 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 17:08:57.104446 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 17:08:57.104457 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 17:08:57.104470 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 17:08:58.197853 [INFO] Login Succeeded

2024/02/03 17:08:58.198411 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 17:08:58.198422 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 17:08:58.198589 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 17:08:58.353983 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 17:08:58.354008 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 17:08:58.354013 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 17:08:58.354017 [INFO] start to build docker image
2024/02/03 17:08:58.354697 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 17:08:58.669017 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 17:08:58.669041 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 17:08:58.669044 [INFO] successfully build docker image
2024/02/03 17:08:58.669046 [INFO] save staging docker image id
2024/02/03 17:08:58.669056 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 17:08:58.694230 [INFO] c176d18fbf65

2024/02/03 17:08:58.694350 [INFO] Executing instruction: configure X-Ray
2024/02/03 17:08:58.694358 [INFO] X-Ray is not enabled.
2024/02/03 17:08:58.694361 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 17:08:58.700025 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 17:08:58.701700 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 17:08:58.714547 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 17:08:58.714578 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 17:08:58.724215 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 17:08:58.734608 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 17:08:58.744716 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 17:08:58.820885 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 17:08:59.115662 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 17:08:59.115774 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 17:08:59.435061 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 17:08:59.446639 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 17:08:59.723667 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 17:08:59.734453 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 17:08:59.747543 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 17:09:00.250206 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 17:09:00.281143 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 17:09:00.642253 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 17:09:00.642291 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 17:09:00.655699 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 17:09:00.664674 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 17:09:00.780457 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 17:09:00.781237 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 17:09:00.782092 [INFO] Executing instruction: configure log streaming
2024/02/03 17:09:00.782106 [INFO] log streaming is not enabled
2024/02/03 17:09:00.782110 [INFO] disable log stream
2024/02/03 17:09:00.782124 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 17:09:00.803570 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 17:09:00.825047 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 17:09:00.825073 [INFO] Checking if logs need forced rotation
2024/02/03 17:09:00.825093 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 17:09:01.498645 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 17:09:02.109549 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 17:09:02.111269 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 17:09:02.671748 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 17:09:02.692183 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 17:09:02.692200 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 17:09:02.692223 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 17:09:03.211975 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 17:09:03.212001 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 17:09:03.212029 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 17:09:03.212033 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 17:09:03.212056 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 17:09:03.212070 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 17:09:03.212074 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 17:09:03.212079 [INFO] Executing instruction: stop X-Ray
2024/02/03 17:09:03.212082 [INFO] stop X-Ray ...
2024/02/03 17:09:03.212095 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 17:09:03.232571 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 17:09:03.232605 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 17:09:03.256421 [INFO] Executing instruction: Run Docker Container
2024/02/03 17:09:03.256565 [INFO] stop currently running containers...
2024/02/03 17:09:03.256578 [INFO] detected old app is not docker compose app
2024/02/03 17:09:03.256591 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 17:09:03.292450 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 17:09:03.309752 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 17:09:03.309794 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 17:09:03.325397 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 17:09:03.325464 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 17:09:03.341733 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 17:09:03.341788 [INFO] stopping current container: 2e02b2521b61
2024/02/03 17:09:03.341802 [INFO] Running command /bin/sh -c docker ps | grep -q 2e02b2521b61
2024/02/03 17:09:03.364020 [INFO] Running command /bin/sh -c docker ps | grep -q 2e02b2521b61
2024/02/03 17:09:03.423494 [INFO] Pruning containers ...
2024/02/03 17:09:03.423518 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 17:09:03.453511 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 17:09:03.453540 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 17:09:03.479987 [INFO] Total reclaimed space: 0B

2024/02/03 17:09:03.480014 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 17:09:03.507256 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 17:09:03.507286 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 17:09:03.531042 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 17:09:03.531068 [INFO] Removing /var/app/current/ if it exists
2024/02/03 17:09:03.531205 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 17:09:03.531223 [INFO] detected new app is not docker compose app
2024/02/03 17:09:03.531270 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 17:09:03.979191 [INFO] b8f471194056dfd056af0291fceab8e97eacc0436c906fa4c4bde7cbc5110eaa

2024/02/03 17:09:08.981445 [INFO] Running command /bin/sh -c docker ps | grep -q b8f471194056
2024/02/03 17:09:09.009515 [ERROR] docker container quit unexpectedly on 2024-02-03 17:09:09.009502381 +0000 UTC: Command /bin/sh -c docker ps | grep -q b8f471194056 failed with error exit status 1
2024/02/03 17:09:09.009555 [INFO] Running command /bin/sh -c docker logs b8f471194056
2024/02/03 17:09:09.036785 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b8f471194056: Command /bin/sh -c docker ps | grep -q b8f471194056 failed with error exit status 1 

2024/02/03 17:09:09.036795 [INFO] Executing cleanup logic
2024/02/03 17:09:09.037075 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 18:09:09.993203 [INFO] Starting...
2024/02/03 18:09:09.993279 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 18:09:09.993336 [INFO] reading event message file
2024/02/03 18:09:09.994461 [INFO] Engine received EB command userdata-exec

2024/02/03 18:09:09.999196 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 18:09:10.402853 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 18:09:10.860616 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 18:09:10.860667 [INFO] Engine command: (self-startup)

2024/02/03 18:09:10.860676 [INFO] Downloading EB Application...
2024/02/03 18:09:10.860680 [INFO] Region: eu-west-1
2024/02/03 18:09:10.860684 [INFO] envID: e-8gmkc7rmw6
2024/02/03 18:09:10.860687 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 18:09:10.860690 [INFO] Using manifest file name from command request
2024/02/03 18:09:10.860706 [INFO] Unable to get version manifest file.
2024/02/03 18:09:10.860709 [INFO] Downloading latest manifest available.
2024/02/03 18:09:10.860712 [INFO] Download latest app version manifest
2024/02/03 18:09:10.860872 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 18:09:10.903209 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 18:09:10.903398 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 18:09:10.914213 [INFO] Download successful124bytes downloaded
2024/02/03 18:09:10.914376 [INFO] Trying to read and parse version manifest...
2024/02/03 18:09:10.914451 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 18:09:10.942730 [INFO] Download successful264bytes downloaded
2024/02/03 18:09:10.943038 [INFO] Executing instruction: SyncClock
2024/02/03 18:09:10.943044 [INFO] Starting SyncClock
2024/02/03 18:09:10.943054 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 18:09:10.948703 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 18:09:07 2024
System time     : 0.000000362 seconds slow of NTP time
Last offset     : -0.000000225 seconds
RMS offset      : 0.000000857 seconds
Frequency       : 0.336 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.018 ppm
Root delay      : 0.000363385 seconds
Root dispersion : 0.000408202 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/03 18:09:10.948724 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 18:09:10.952832 [INFO] 200 OK

2024/02/03 18:09:10.952925 [INFO] Skipping Configure OS
2024/02/03 18:09:10.952930 [INFO] Skipping LockRepo
2024/02/03 18:09:10.952934 [INFO] Skipping GenerateEBBanner
2024/02/03 18:09:10.952938 [INFO] Skipping Install Process Manager
2024/02/03 18:09:10.952942 [INFO] Skipping install syslog
2024/02/03 18:09:10.952946 [INFO] Skipping install cron
2024/02/03 18:09:10.952950 [INFO] Skipping install proxy
2024/02/03 18:09:10.952961 [INFO] Skipping installhealthd
2024/02/03 18:09:10.952965 [INFO] Skipping Install Log Streaming Manager
2024/02/03 18:09:10.952969 [INFO] Skipping install X-Ray
2024/02/03 18:09:10.952972 [INFO] Skipping install Third Party License
2024/02/03 18:09:10.952977 [INFO] Skipping installSqsd
2024/02/03 18:09:10.952981 [INFO] Skipping bootstraphealthd
2024/02/03 18:09:10.952985 [INFO] Skipping Install yum packages
2024/02/03 18:09:10.952989 [INFO] Skipping install docker-compose
2024/02/03 18:09:10.952995 [INFO] Skipping Configure Docker Daemon
2024/02/03 18:09:10.952999 [INFO] Skipping MarkBaked
2024/02/03 18:09:10.953003 [INFO] Skipping TuneSystemSettings
2024/02/03 18:09:10.953006 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 18:09:10.953008 [INFO] Initialize LogRotate files and directories
2024/02/03 18:09:10.966216 [INFO] Skipping BootstrapCFNHup
2024/02/03 18:09:10.966224 [INFO] Executing instruction: StartCFNHup
2024/02/03 18:09:10.966227 [INFO] Start cfn-hup
2024/02/03 18:09:10.966243 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 18:09:10.979045 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 18:09:10.988179 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 18:09:10.988203 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 18:09:10.988212 [INFO] Executing instruction: Start Docker
2024/02/03 18:09:10.988215 [INFO] Starting Docker...
2024/02/03 18:09:10.988379 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 18:09:10.989498 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 18:09:10.990482 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 18:09:11.433641 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 18:09:11.466379 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 18:09:11.466424 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 18:09:11.486841 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 18:09:11.496030 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 18:09:11.506162 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 18:09:11.596253 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 18:09:11.596287 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 18:09:11.935366 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 18:09:12.308227 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 18:09:12.318694 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 18:09:12.646516 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 18:09:12.656101 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 18:09:12.669551 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 18:09:12.678309 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 18:09:14.016042 [INFO] Skipping Setup Docker Options
2024/02/03 18:09:14.016073 [INFO] Skipping MarkBootstrapped
2024/02/03 18:09:14.016077 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 18:09:14.016265 [INFO] Starting SwitchCFNStack
2024/02/03 18:09:14.016272 [INFO] Executing instruction: stopSqsd
2024/02/03 18:09:14.016277 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 18:09:14.016281 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 18:09:14.016284 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 18:09:14.016311 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 18:09:14.522191 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 18:09:14.522214 [INFO] Executing instruction: StagedockerApplication
2024/02/03 18:09:14.522226 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 18:09:14.544299 [INFO] Pruning containers ...
2024/02/03 18:09:14.544326 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 18:09:14.568347 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b8f471194056   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             compassionate_babbage

2024/02/03 18:09:14.568381 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 18:09:14.595434 [INFO] Deleted Containers:
b8f471194056dfd056af0291fceab8e97eacc0436c906fa4c4bde7cbc5110eaa

Total reclaimed space: 0B

2024/02/03 18:09:14.595470 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 18:09:14.619926 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 18:09:14.620180 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 18:09:14.624282 [INFO] application/json

2024/02/03 18:09:14.624311 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 18:09:14.711209 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 18:09:14.711463 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 18:09:14.712789 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 18:09:14.712813 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 18:09:14.712841 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 18:09:14.712845 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 18:09:14.712851 [INFO] Executing instruction: Generate environment file
2024/02/03 18:09:14.712882 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 18:09:14.712885 [INFO] start build docker app
2024/02/03 18:09:14.713340 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 18:09:14.713345 [INFO] fetching image and ports
2024/02/03 18:09:14.715085 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 18:09:14.715174 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 18:09:14.715184 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 18:09:14.715227 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 18:09:15.659741 [INFO] Login Succeeded

2024/02/03 18:09:15.659760 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 18:09:15.659767 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 18:09:15.659786 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 18:09:15.811986 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 18:09:15.812013 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 18:09:15.812016 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 18:09:15.812019 [INFO] start to build docker image
2024/02/03 18:09:15.812038 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 18:09:16.099383 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 18:09:16.099402 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 18:09:16.099406 [INFO] successfully build docker image
2024/02/03 18:09:16.099408 [INFO] save staging docker image id
2024/02/03 18:09:16.099425 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 18:09:16.119952 [INFO] c176d18fbf65

2024/02/03 18:09:16.120085 [INFO] Executing instruction: configure X-Ray
2024/02/03 18:09:16.120092 [INFO] X-Ray is not enabled.
2024/02/03 18:09:16.120094 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 18:09:16.125925 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 18:09:16.127605 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 18:09:16.141142 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 18:09:16.141173 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 18:09:16.151594 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 18:09:16.164408 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 18:09:16.176378 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 18:09:16.229423 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 18:09:16.619362 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 18:09:16.619589 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 18:09:16.914870 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 18:09:16.926515 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 18:09:17.263547 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 18:09:17.274318 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 18:09:17.282861 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 18:09:17.633259 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 18:09:17.646481 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 18:09:17.921695 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 18:09:17.921733 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 18:09:17.935494 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 18:09:17.944081 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 18:09:18.020028 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 18:09:18.020950 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 18:09:18.021791 [INFO] Executing instruction: configure log streaming
2024/02/03 18:09:18.021801 [INFO] log streaming is not enabled
2024/02/03 18:09:18.021805 [INFO] disable log stream
2024/02/03 18:09:18.021819 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 18:09:18.044906 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 18:09:18.065961 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 18:09:18.065981 [INFO] Checking if logs need forced rotation
2024/02/03 18:09:18.066002 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 18:09:18.576489 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 18:09:19.093289 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 18:09:19.095281 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 18:09:19.668167 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 18:09:19.690272 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 18:09:19.690313 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 18:09:19.690335 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 18:09:20.133346 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 18:09:20.133471 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 18:09:20.133497 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 18:09:20.133501 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 18:09:20.133527 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 18:09:20.133539 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 18:09:20.133542 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 18:09:20.133547 [INFO] Executing instruction: stop X-Ray
2024/02/03 18:09:20.133554 [INFO] stop X-Ray ...
2024/02/03 18:09:20.133565 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 18:09:20.156624 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 18:09:20.156658 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 18:09:20.186323 [INFO] Executing instruction: Run Docker Container
2024/02/03 18:09:20.186385 [INFO] stop currently running containers...
2024/02/03 18:09:20.186398 [INFO] detected old app is not docker compose app
2024/02/03 18:09:20.186416 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 18:09:20.252430 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 18:09:20.275620 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 18:09:20.275666 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 18:09:20.302462 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 18:09:20.302496 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 18:09:20.318176 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 18:09:20.318255 [INFO] stopping current container: b8f471194056
2024/02/03 18:09:20.318269 [INFO] Running command /bin/sh -c docker ps | grep -q b8f471194056
2024/02/03 18:09:20.358133 [INFO] Running command /bin/sh -c docker ps | grep -q b8f471194056
2024/02/03 18:09:20.387881 [INFO] Pruning containers ...
2024/02/03 18:09:20.387905 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 18:09:20.409249 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 18:09:20.409276 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 18:09:20.432979 [INFO] Total reclaimed space: 0B

2024/02/03 18:09:20.433094 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 18:09:20.460317 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 18:09:20.460346 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 18:09:20.483341 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 18:09:20.483361 [INFO] Removing /var/app/current/ if it exists
2024/02/03 18:09:20.483457 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 18:09:20.483474 [INFO] detected new app is not docker compose app
2024/02/03 18:09:20.483519 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 18:09:20.932031 [INFO] d50aaf15fcade86b5bce186037f81b534e311c8801b66aaad92216c39ca51658

2024/02/03 18:09:25.932422 [INFO] Running command /bin/sh -c docker ps | grep -q d50aaf15fcad
2024/02/03 18:09:25.960004 [ERROR] docker container quit unexpectedly on 2024-02-03 18:09:25.959992809 +0000 UTC: Command /bin/sh -c docker ps | grep -q d50aaf15fcad failed with error exit status 1
2024/02/03 18:09:25.960033 [INFO] Running command /bin/sh -c docker logs d50aaf15fcad
2024/02/03 18:09:25.982651 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container d50aaf15fcad: Command /bin/sh -c docker ps | grep -q d50aaf15fcad failed with error exit status 1 

2024/02/03 18:09:25.982660 [INFO] Executing cleanup logic
2024/02/03 18:09:25.982856 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 19:09:27.036603 [INFO] Starting...
2024/02/03 19:09:27.036647 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 19:09:27.036677 [INFO] reading event message file
2024/02/03 19:09:27.037803 [INFO] Engine received EB command userdata-exec

2024/02/03 19:09:27.046145 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 19:09:27.490738 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 19:09:27.877379 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 19:09:27.877479 [INFO] Engine command: (self-startup)

2024/02/03 19:09:27.877488 [INFO] Downloading EB Application...
2024/02/03 19:09:27.877491 [INFO] Region: eu-west-1
2024/02/03 19:09:27.877494 [INFO] envID: e-8gmkc7rmw6
2024/02/03 19:09:27.877498 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 19:09:27.877501 [INFO] Using manifest file name from command request
2024/02/03 19:09:27.877522 [INFO] Unable to get version manifest file.
2024/02/03 19:09:27.877525 [INFO] Downloading latest manifest available.
2024/02/03 19:09:27.877527 [INFO] Download latest app version manifest
2024/02/03 19:09:27.877654 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 19:09:27.916383 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 19:09:27.916553 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 19:09:27.932284 [INFO] Download successful124bytes downloaded
2024/02/03 19:09:27.933262 [INFO] Trying to read and parse version manifest...
2024/02/03 19:09:27.933462 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 19:09:27.959564 [INFO] Download successful264bytes downloaded
2024/02/03 19:09:27.959924 [INFO] Executing instruction: SyncClock
2024/02/03 19:09:27.959929 [INFO] Starting SyncClock
2024/02/03 19:09:27.959939 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 19:09:27.965606 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 19:09:16 2024
System time     : 0.000009912 seconds fast of NTP time
Last offset     : +0.000027254 seconds
RMS offset      : 0.000009944 seconds
Frequency       : 0.669 ppm fast
Residual freq   : +0.296 ppm
Skew            : 0.587 ppm
Root delay      : 0.000469238 seconds
Root dispersion : 0.000490414 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/03 19:09:27.965633 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 19:09:27.969563 [INFO] 200 OK

2024/02/03 19:09:27.969657 [INFO] Skipping Configure OS
2024/02/03 19:09:27.969662 [INFO] Skipping LockRepo
2024/02/03 19:09:27.969666 [INFO] Skipping GenerateEBBanner
2024/02/03 19:09:27.969671 [INFO] Skipping Install Process Manager
2024/02/03 19:09:27.969674 [INFO] Skipping install syslog
2024/02/03 19:09:27.969678 [INFO] Skipping install cron
2024/02/03 19:09:27.969682 [INFO] Skipping install proxy
2024/02/03 19:09:27.969685 [INFO] Skipping installhealthd
2024/02/03 19:09:27.969689 [INFO] Skipping Install Log Streaming Manager
2024/02/03 19:09:27.969693 [INFO] Skipping install X-Ray
2024/02/03 19:09:27.969697 [INFO] Skipping install Third Party License
2024/02/03 19:09:27.969702 [INFO] Skipping installSqsd
2024/02/03 19:09:27.969705 [INFO] Skipping bootstraphealthd
2024/02/03 19:09:27.969709 [INFO] Skipping Install yum packages
2024/02/03 19:09:27.969712 [INFO] Skipping install docker-compose
2024/02/03 19:09:27.969716 [INFO] Skipping Configure Docker Daemon
2024/02/03 19:09:27.969720 [INFO] Skipping MarkBaked
2024/02/03 19:09:27.969725 [INFO] Skipping TuneSystemSettings
2024/02/03 19:09:27.969728 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 19:09:27.969730 [INFO] Initialize LogRotate files and directories
2024/02/03 19:09:27.982812 [INFO] Skipping BootstrapCFNHup
2024/02/03 19:09:27.982823 [INFO] Executing instruction: StartCFNHup
2024/02/03 19:09:27.982826 [INFO] Start cfn-hup
2024/02/03 19:09:27.982842 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 19:09:27.995691 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 19:09:28.005575 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 19:09:28.006870 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 19:09:28.006884 [INFO] Executing instruction: Start Docker
2024/02/03 19:09:28.006888 [INFO] Starting Docker...
2024/02/03 19:09:28.006962 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 19:09:28.007979 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 19:09:28.009012 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 19:09:28.423398 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 19:09:28.441461 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 19:09:28.441490 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 19:09:28.454114 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 19:09:28.470646 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 19:09:28.484131 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 19:09:28.564447 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 19:09:28.564473 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 19:09:28.927090 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 19:09:29.241967 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 19:09:29.256640 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 19:09:29.543761 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 19:09:29.553470 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 19:09:29.566261 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 19:09:29.575006 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 19:09:30.834333 [INFO] Skipping Setup Docker Options
2024/02/03 19:09:30.834353 [INFO] Skipping MarkBootstrapped
2024/02/03 19:09:30.834357 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 19:09:30.834526 [INFO] Starting SwitchCFNStack
2024/02/03 19:09:30.834535 [INFO] Executing instruction: stopSqsd
2024/02/03 19:09:30.834539 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 19:09:30.834543 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 19:09:30.834551 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 19:09:30.834568 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 19:09:31.278061 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 19:09:31.278085 [INFO] Executing instruction: StagedockerApplication
2024/02/03 19:09:31.278097 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 19:09:31.329715 [INFO] Pruning containers ...
2024/02/03 19:09:31.329751 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 19:09:31.367171 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
d50aaf15fcad   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             affectionate_kowalevski

2024/02/03 19:09:31.367209 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 19:09:31.395080 [INFO] Deleted Containers:
d50aaf15fcade86b5bce186037f81b534e311c8801b66aaad92216c39ca51658

Total reclaimed space: 0B

2024/02/03 19:09:31.395102 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 19:09:31.416227 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 19:09:31.416473 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 19:09:31.420092 [INFO] application/json

2024/02/03 19:09:31.420203 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 19:09:31.500735 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/03 19:09:31.500910 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 19:09:31.502182 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 19:09:31.502212 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 19:09:31.502227 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 19:09:31.502229 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 19:09:31.502234 [INFO] Executing instruction: Generate environment file
2024/02/03 19:09:31.502264 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 19:09:31.502269 [INFO] start build docker app
2024/02/03 19:09:31.502812 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 19:09:31.502864 [INFO] fetching image and ports
2024/02/03 19:09:31.504839 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 19:09:31.504894 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 19:09:31.504903 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 19:09:31.504912 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 19:09:32.517634 [INFO] Login Succeeded

2024/02/03 19:09:32.517698 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 19:09:32.517836 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 19:09:32.517856 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 19:09:32.665432 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 19:09:32.665454 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 19:09:32.665459 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 19:09:32.665463 [INFO] start to build docker image
2024/02/03 19:09:32.665482 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 19:09:32.922268 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 19:09:32.922291 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 19:09:32.922297 [INFO] successfully build docker image
2024/02/03 19:09:32.922380 [INFO] save staging docker image id
2024/02/03 19:09:32.922424 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 19:09:32.945715 [INFO] c176d18fbf65

2024/02/03 19:09:32.945943 [INFO] Executing instruction: configure X-Ray
2024/02/03 19:09:32.945949 [INFO] X-Ray is not enabled.
2024/02/03 19:09:32.945952 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 19:09:32.951736 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 19:09:32.953360 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 19:09:32.965961 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 19:09:32.965996 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 19:09:32.978220 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 19:09:32.987137 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 19:09:32.997088 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 19:09:33.070539 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 19:09:33.376740 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 19:09:33.376933 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 19:09:33.662956 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 19:09:33.675503 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 19:09:33.973495 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 19:09:33.988864 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 19:09:34.011600 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 19:09:34.419271 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 19:09:34.430340 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 19:09:34.903386 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 19:09:34.903513 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 19:09:34.922535 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 19:09:34.940830 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 19:09:35.048982 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 19:09:35.050463 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 19:09:35.051623 [INFO] Executing instruction: configure log streaming
2024/02/03 19:09:35.051635 [INFO] log streaming is not enabled
2024/02/03 19:09:35.051639 [INFO] disable log stream
2024/02/03 19:09:35.051653 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 19:09:35.076657 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 19:09:35.096950 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 19:09:35.096975 [INFO] Checking if logs need forced rotation
2024/02/03 19:09:35.097000 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 19:09:35.656527 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 19:09:36.125258 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 19:09:36.127140 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 19:09:36.650288 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 19:09:36.669278 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 19:09:36.669299 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 19:09:36.669311 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 19:09:37.085258 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 19:09:37.085281 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 19:09:37.085318 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 19:09:37.085321 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 19:09:37.085340 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 19:09:37.085352 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 19:09:37.085355 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 19:09:37.085360 [INFO] Executing instruction: stop X-Ray
2024/02/03 19:09:37.085362 [INFO] stop X-Ray ...
2024/02/03 19:09:37.085373 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 19:09:37.103850 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 19:09:37.103882 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 19:09:37.125139 [INFO] Executing instruction: Run Docker Container
2024/02/03 19:09:37.125174 [INFO] stop currently running containers...
2024/02/03 19:09:37.125189 [INFO] detected old app is not docker compose app
2024/02/03 19:09:37.125200 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 19:09:37.172401 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 19:09:37.202370 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 19:09:37.202406 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 19:09:37.231467 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 19:09:37.231503 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 19:09:37.252107 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 19:09:37.252158 [INFO] stopping current container: d50aaf15fcad
2024/02/03 19:09:37.252170 [INFO] Running command /bin/sh -c docker ps | grep -q d50aaf15fcad
2024/02/03 19:09:37.284445 [INFO] Running command /bin/sh -c docker ps | grep -q d50aaf15fcad
2024/02/03 19:09:37.304585 [INFO] Pruning containers ...
2024/02/03 19:09:37.304608 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 19:09:37.330481 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 19:09:37.330513 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 19:09:37.352786 [INFO] Total reclaimed space: 0B

2024/02/03 19:09:37.352818 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 19:09:37.374515 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 19:09:37.374550 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 19:09:37.398537 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 19:09:37.398580 [INFO] Removing /var/app/current/ if it exists
2024/02/03 19:09:37.398687 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 19:09:37.398704 [INFO] detected new app is not docker compose app
2024/02/03 19:09:37.398824 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 19:09:37.852597 [INFO] 926a8e7fbb5ccb14dbb21876c1bcb2fbbbba4d7e2b4732ecd179d3f531ba061d

2024/02/03 19:09:42.853019 [INFO] Running command /bin/sh -c docker ps | grep -q 926a8e7fbb5c
2024/02/03 19:09:42.885631 [ERROR] docker container quit unexpectedly on 2024-02-03 19:09:42.885616232 +0000 UTC: Command /bin/sh -c docker ps | grep -q 926a8e7fbb5c failed with error exit status 1
2024/02/03 19:09:42.885672 [INFO] Running command /bin/sh -c docker logs 926a8e7fbb5c
2024/02/03 19:09:42.932927 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 926a8e7fbb5c: Command /bin/sh -c docker ps | grep -q 926a8e7fbb5c failed with error exit status 1 

2024/02/03 19:09:42.932937 [INFO] Executing cleanup logic
2024/02/03 19:09:42.933135 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 20:09:44.001716 [INFO] Starting...
2024/02/03 20:09:44.001760 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 20:09:44.001789 [INFO] reading event message file
2024/02/03 20:09:44.002546 [INFO] Engine received EB command userdata-exec

2024/02/03 20:09:44.009057 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 20:09:44.476080 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 20:09:44.907052 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 20:09:44.907236 [INFO] Engine command: (self-startup)

2024/02/03 20:09:44.907244 [INFO] Downloading EB Application...
2024/02/03 20:09:44.907246 [INFO] Region: eu-west-1
2024/02/03 20:09:44.907248 [INFO] envID: e-8gmkc7rmw6
2024/02/03 20:09:44.907251 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 20:09:44.907253 [INFO] Using manifest file name from command request
2024/02/03 20:09:44.907267 [INFO] Unable to get version manifest file.
2024/02/03 20:09:44.907269 [INFO] Downloading latest manifest available.
2024/02/03 20:09:44.907271 [INFO] Download latest app version manifest
2024/02/03 20:09:44.907551 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 20:09:44.948831 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 20:09:44.948992 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 20:09:44.960668 [INFO] Download successful124bytes downloaded
2024/02/03 20:09:44.960856 [INFO] Trying to read and parse version manifest...
2024/02/03 20:09:44.960928 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 20:09:44.987717 [INFO] Download successful264bytes downloaded
2024/02/03 20:09:44.988031 [INFO] Executing instruction: SyncClock
2024/02/03 20:09:44.988035 [INFO] Starting SyncClock
2024/02/03 20:09:44.988045 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 20:09:44.993975 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 20:09:22 2024
System time     : 0.000000194 seconds slow of NTP time
Last offset     : -0.000004515 seconds
RMS offset      : 0.000003957 seconds
Frequency       : 0.429 ppm fast
Residual freq   : -0.038 ppm
Skew            : 0.073 ppm
Root delay      : 0.000403350 seconds
Root dispersion : 0.000445945 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/03 20:09:44.993999 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 20:09:45.001170 [INFO] 200 OK

2024/02/03 20:09:45.001302 [INFO] Skipping Configure OS
2024/02/03 20:09:45.001311 [INFO] Skipping LockRepo
2024/02/03 20:09:45.001316 [INFO] Skipping GenerateEBBanner
2024/02/03 20:09:45.001321 [INFO] Skipping Install Process Manager
2024/02/03 20:09:45.001338 [INFO] Skipping install syslog
2024/02/03 20:09:45.001343 [INFO] Skipping install cron
2024/02/03 20:09:45.001348 [INFO] Skipping install proxy
2024/02/03 20:09:45.001353 [INFO] Skipping installhealthd
2024/02/03 20:09:45.001358 [INFO] Skipping Install Log Streaming Manager
2024/02/03 20:09:45.001384 [INFO] Skipping install X-Ray
2024/02/03 20:09:45.001389 [INFO] Skipping install Third Party License
2024/02/03 20:09:45.001396 [INFO] Skipping installSqsd
2024/02/03 20:09:45.001402 [INFO] Skipping bootstraphealthd
2024/02/03 20:09:45.001407 [INFO] Skipping Install yum packages
2024/02/03 20:09:45.001412 [INFO] Skipping install docker-compose
2024/02/03 20:09:45.001418 [INFO] Skipping Configure Docker Daemon
2024/02/03 20:09:45.001425 [INFO] Skipping MarkBaked
2024/02/03 20:09:45.001431 [INFO] Skipping TuneSystemSettings
2024/02/03 20:09:45.001434 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 20:09:45.001437 [INFO] Initialize LogRotate files and directories
2024/02/03 20:09:45.015448 [INFO] Skipping BootstrapCFNHup
2024/02/03 20:09:45.015460 [INFO] Executing instruction: StartCFNHup
2024/02/03 20:09:45.015463 [INFO] Start cfn-hup
2024/02/03 20:09:45.015481 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 20:09:45.029394 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 20:09:45.043044 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 20:09:45.043080 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 20:09:45.043084 [INFO] Executing instruction: Start Docker
2024/02/03 20:09:45.043087 [INFO] Starting Docker...
2024/02/03 20:09:45.043176 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 20:09:45.044202 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 20:09:45.045190 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 20:09:45.432284 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 20:09:45.452272 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 20:09:45.452306 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 20:09:45.465591 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 20:09:45.477071 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 20:09:45.491219 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 20:09:45.584385 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 20:09:45.584446 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 20:09:45.920257 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 20:09:46.246654 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 20:09:46.258113 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 20:09:46.592481 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 20:09:46.603964 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 20:09:46.617316 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 20:09:46.626275 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 20:09:48.042081 [INFO] Skipping Setup Docker Options
2024/02/03 20:09:48.042104 [INFO] Skipping MarkBootstrapped
2024/02/03 20:09:48.042108 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 20:09:48.042244 [INFO] Starting SwitchCFNStack
2024/02/03 20:09:48.042251 [INFO] Executing instruction: stopSqsd
2024/02/03 20:09:48.042255 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 20:09:48.042258 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 20:09:48.042265 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 20:09:48.042289 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 20:09:48.469322 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 20:09:48.469346 [INFO] Executing instruction: StagedockerApplication
2024/02/03 20:09:48.469359 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 20:09:48.490041 [INFO] Pruning containers ...
2024/02/03 20:09:48.490070 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 20:09:48.510626 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
926a8e7fbb5c   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             frosty_buck

2024/02/03 20:09:48.510660 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 20:09:48.542641 [INFO] Deleted Containers:
926a8e7fbb5ccb14dbb21876c1bcb2fbbbba4d7e2b4732ecd179d3f531ba061d

Total reclaimed space: 0B

2024/02/03 20:09:48.542664 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 20:09:48.561594 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 20:09:48.561846 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 20:09:48.564791 [INFO] application/json

2024/02/03 20:09:48.564811 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 20:09:48.687481 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/03 20:09:48.687653 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 20:09:48.688878 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 20:09:48.688902 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 20:09:48.688919 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 20:09:48.688922 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 20:09:48.688927 [INFO] Executing instruction: Generate environment file
2024/02/03 20:09:48.688956 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 20:09:48.688959 [INFO] start build docker app
2024/02/03 20:09:48.689369 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 20:09:48.689374 [INFO] fetching image and ports
2024/02/03 20:09:48.690871 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 20:09:48.690940 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 20:09:48.690949 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 20:09:48.690957 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 20:09:49.558006 [INFO] Login Succeeded

2024/02/03 20:09:49.558025 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 20:09:49.558031 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 20:09:49.558047 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 20:09:49.729389 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 20:09:49.729412 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 20:09:49.729416 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 20:09:49.729419 [INFO] start to build docker image
2024/02/03 20:09:49.729438 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 20:09:50.008562 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 20:09:50.008590 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 20:09:50.008594 [INFO] successfully build docker image
2024/02/03 20:09:50.008597 [INFO] save staging docker image id
2024/02/03 20:09:50.008614 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 20:09:50.047389 [INFO] c176d18fbf65

2024/02/03 20:09:50.047679 [INFO] Executing instruction: configure X-Ray
2024/02/03 20:09:50.047687 [INFO] X-Ray is not enabled.
2024/02/03 20:09:50.047691 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 20:09:50.054942 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 20:09:50.056997 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 20:09:50.070649 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 20:09:50.070682 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 20:09:50.084077 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 20:09:50.094311 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 20:09:50.110460 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 20:09:50.178419 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 20:09:50.479900 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 20:09:50.479992 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 20:09:50.830844 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 20:09:50.845120 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 20:09:51.197207 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 20:09:51.207786 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 20:09:51.217745 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 20:09:51.524553 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 20:09:51.537537 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 20:09:51.851966 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 20:09:51.852016 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 20:09:51.873744 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 20:09:51.884388 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 20:09:51.992111 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 20:09:51.992977 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 20:09:51.993719 [INFO] Executing instruction: configure log streaming
2024/02/03 20:09:51.993725 [INFO] log streaming is not enabled
2024/02/03 20:09:51.993728 [INFO] disable log stream
2024/02/03 20:09:51.993738 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 20:09:52.019728 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 20:09:52.044326 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 20:09:52.044351 [INFO] Checking if logs need forced rotation
2024/02/03 20:09:52.044372 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 20:09:52.535599 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 20:09:53.075582 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 20:09:53.077437 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 20:09:53.419100 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 20:09:53.440099 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 20:09:53.440115 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 20:09:53.440128 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 20:09:53.874431 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 20:09:53.874466 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 20:09:53.874492 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 20:09:53.874496 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 20:09:53.874518 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 20:09:53.874531 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 20:09:53.874534 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 20:09:53.874539 [INFO] Executing instruction: stop X-Ray
2024/02/03 20:09:53.874543 [INFO] stop X-Ray ...
2024/02/03 20:09:53.874555 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 20:09:53.891542 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 20:09:53.891578 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 20:09:53.911480 [INFO] Executing instruction: Run Docker Container
2024/02/03 20:09:53.911515 [INFO] stop currently running containers...
2024/02/03 20:09:53.911529 [INFO] detected old app is not docker compose app
2024/02/03 20:09:53.911545 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 20:09:53.962438 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 20:09:53.979749 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 20:09:53.979788 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 20:09:53.993921 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 20:09:53.993948 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 20:09:54.011095 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 20:09:54.011145 [INFO] stopping current container: 926a8e7fbb5c
2024/02/03 20:09:54.011158 [INFO] Running command /bin/sh -c docker ps | grep -q 926a8e7fbb5c
2024/02/03 20:09:54.032528 [INFO] Running command /bin/sh -c docker ps | grep -q 926a8e7fbb5c
2024/02/03 20:09:54.052286 [INFO] Pruning containers ...
2024/02/03 20:09:54.052319 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 20:09:54.071589 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 20:09:54.071642 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 20:09:54.090153 [INFO] Total reclaimed space: 0B

2024/02/03 20:09:54.090200 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 20:09:54.122674 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 20:09:54.122702 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 20:09:54.153517 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 20:09:54.153537 [INFO] Removing /var/app/current/ if it exists
2024/02/03 20:09:54.153688 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 20:09:54.153802 [INFO] detected new app is not docker compose app
2024/02/03 20:09:54.153856 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 20:09:54.677978 [INFO] fc6ebed05688ab198f60cb4ed36a25e2d040354558667d4c6ae137b6ee614b6e

2024/02/03 20:09:59.678458 [INFO] Running command /bin/sh -c docker ps | grep -q fc6ebed05688
2024/02/03 20:09:59.727063 [ERROR] docker container quit unexpectedly on 2024-02-03 20:09:59.727043547 +0000 UTC: Command /bin/sh -c docker ps | grep -q fc6ebed05688 failed with error exit status 1
2024/02/03 20:09:59.727096 [INFO] Running command /bin/sh -c docker logs fc6ebed05688
2024/02/03 20:09:59.755011 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container fc6ebed05688: Command /bin/sh -c docker ps | grep -q fc6ebed05688 failed with error exit status 1 

2024/02/03 20:09:59.755024 [INFO] Executing cleanup logic
2024/02/03 20:09:59.755254 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 21:10:01.039863 [INFO] Starting...
2024/02/03 21:10:01.039905 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 21:10:01.039931 [INFO] reading event message file
2024/02/03 21:10:01.040646 [INFO] Engine received EB command userdata-exec

2024/02/03 21:10:01.047316 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 21:10:01.643120 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 21:10:02.568620 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 21:10:02.568752 [INFO] Engine command: (self-startup)

2024/02/03 21:10:02.568764 [INFO] Downloading EB Application...
2024/02/03 21:10:02.568769 [INFO] Region: eu-west-1
2024/02/03 21:10:02.568773 [INFO] envID: e-8gmkc7rmw6
2024/02/03 21:10:02.568776 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 21:10:02.568779 [INFO] Using manifest file name from command request
2024/02/03 21:10:02.568795 [INFO] Unable to get version manifest file.
2024/02/03 21:10:02.568808 [INFO] Downloading latest manifest available.
2024/02/03 21:10:02.568810 [INFO] Download latest app version manifest
2024/02/03 21:10:02.569345 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 21:10:02.620669 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 21:10:02.621067 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 21:10:02.634391 [INFO] Download successful124bytes downloaded
2024/02/03 21:10:02.634543 [INFO] Trying to read and parse version manifest...
2024/02/03 21:10:02.634620 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 21:10:02.656233 [INFO] Download successful264bytes downloaded
2024/02/03 21:10:02.656616 [INFO] Executing instruction: SyncClock
2024/02/03 21:10:02.656622 [INFO] Starting SyncClock
2024/02/03 21:10:02.656636 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 21:10:02.667186 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 21:10:00 2024
System time     : 0.000000098 seconds fast of NTP time
Last offset     : -0.000000186 seconds
RMS offset      : 0.000002022 seconds
Frequency       : 0.388 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.041 ppm
Root delay      : 0.000428927 seconds
Root dispersion : 0.000363473 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/03 21:10:02.667215 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 21:10:02.673699 [INFO] 200 OK

2024/02/03 21:10:02.673810 [INFO] Skipping Configure OS
2024/02/03 21:10:02.673818 [INFO] Skipping LockRepo
2024/02/03 21:10:02.673825 [INFO] Skipping GenerateEBBanner
2024/02/03 21:10:02.673831 [INFO] Skipping Install Process Manager
2024/02/03 21:10:02.673836 [INFO] Skipping install syslog
2024/02/03 21:10:02.673840 [INFO] Skipping install cron
2024/02/03 21:10:02.673844 [INFO] Skipping install proxy
2024/02/03 21:10:02.673848 [INFO] Skipping installhealthd
2024/02/03 21:10:02.673852 [INFO] Skipping Install Log Streaming Manager
2024/02/03 21:10:02.673856 [INFO] Skipping install X-Ray
2024/02/03 21:10:02.673859 [INFO] Skipping install Third Party License
2024/02/03 21:10:02.673865 [INFO] Skipping installSqsd
2024/02/03 21:10:02.673922 [INFO] Skipping bootstraphealthd
2024/02/03 21:10:02.673930 [INFO] Skipping Install yum packages
2024/02/03 21:10:02.673936 [INFO] Skipping install docker-compose
2024/02/03 21:10:02.673944 [INFO] Skipping Configure Docker Daemon
2024/02/03 21:10:02.673948 [INFO] Skipping MarkBaked
2024/02/03 21:10:02.673952 [INFO] Skipping TuneSystemSettings
2024/02/03 21:10:02.673954 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 21:10:02.673957 [INFO] Initialize LogRotate files and directories
2024/02/03 21:10:02.687435 [INFO] Skipping BootstrapCFNHup
2024/02/03 21:10:02.687446 [INFO] Executing instruction: StartCFNHup
2024/02/03 21:10:02.687449 [INFO] Start cfn-hup
2024/02/03 21:10:02.687467 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 21:10:02.719096 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 21:10:02.732424 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 21:10:02.732461 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 21:10:02.732465 [INFO] Executing instruction: Start Docker
2024/02/03 21:10:02.732467 [INFO] Starting Docker...
2024/02/03 21:10:02.732612 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 21:10:02.734011 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 21:10:02.735100 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 21:10:03.195408 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 21:10:03.233886 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 21:10:03.233922 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 21:10:03.252604 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 21:10:03.270109 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 21:10:03.298859 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 21:10:03.389314 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 21:10:03.389359 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 21:10:03.678010 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 21:10:04.126609 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 21:10:04.137921 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 21:10:04.442837 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 21:10:04.453562 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 21:10:04.466419 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 21:10:04.475220 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 21:10:05.776611 [INFO] Skipping Setup Docker Options
2024/02/03 21:10:05.776634 [INFO] Skipping MarkBootstrapped
2024/02/03 21:10:05.776639 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 21:10:05.776771 [INFO] Starting SwitchCFNStack
2024/02/03 21:10:05.776777 [INFO] Executing instruction: stopSqsd
2024/02/03 21:10:05.776782 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 21:10:05.776785 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 21:10:05.776790 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 21:10:05.776809 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 21:10:06.346094 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 21:10:06.346123 [INFO] Executing instruction: StagedockerApplication
2024/02/03 21:10:06.346135 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 21:10:06.368351 [INFO] Pruning containers ...
2024/02/03 21:10:06.368385 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 21:10:06.388009 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
fc6ebed05688   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             relaxed_darwin

2024/02/03 21:10:06.388037 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 21:10:06.416294 [INFO] Deleted Containers:
fc6ebed05688ab198f60cb4ed36a25e2d040354558667d4c6ae137b6ee614b6e

Total reclaimed space: 0B

2024/02/03 21:10:06.416332 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 21:10:06.435807 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 21:10:06.436191 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 21:10:06.443538 [INFO] application/json

2024/02/03 21:10:06.443565 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 21:10:06.555208 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 21:10:06.555400 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 21:10:06.556821 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 21:10:06.556859 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 21:10:06.556875 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 21:10:06.556878 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 21:10:06.556884 [INFO] Executing instruction: Generate environment file
2024/02/03 21:10:06.556913 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 21:10:06.556918 [INFO] start build docker app
2024/02/03 21:10:06.557363 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 21:10:06.557367 [INFO] fetching image and ports
2024/02/03 21:10:06.559302 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 21:10:06.559370 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 21:10:06.559379 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 21:10:06.559390 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 21:10:07.750670 [INFO] Login Succeeded

2024/02/03 21:10:07.750687 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 21:10:07.750693 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 21:10:07.750708 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 21:10:07.962917 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 21:10:07.962945 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 21:10:07.962950 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 21:10:07.962954 [INFO] start to build docker image
2024/02/03 21:10:07.962976 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 21:10:08.260142 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 21:10:08.260166 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 21:10:08.260170 [INFO] successfully build docker image
2024/02/03 21:10:08.260177 [INFO] save staging docker image id
2024/02/03 21:10:08.260192 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 21:10:08.281133 [INFO] c176d18fbf65

2024/02/03 21:10:08.281260 [INFO] Executing instruction: configure X-Ray
2024/02/03 21:10:08.281267 [INFO] X-Ray is not enabled.
2024/02/03 21:10:08.281271 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 21:10:08.286619 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 21:10:08.288176 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 21:10:08.299734 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 21:10:08.299767 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 21:10:08.319252 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 21:10:08.343275 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 21:10:08.356826 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 21:10:08.450290 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 21:10:08.842723 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 21:10:08.842811 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 21:10:09.119245 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 21:10:09.130290 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 21:10:09.493787 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 21:10:09.516801 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 21:10:09.529004 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 21:10:09.883128 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 21:10:09.894317 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 21:10:10.383024 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 21:10:10.383055 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 21:10:10.399835 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 21:10:10.409359 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 21:10:10.487551 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 21:10:10.488426 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 21:10:10.489357 [INFO] Executing instruction: configure log streaming
2024/02/03 21:10:10.489367 [INFO] log streaming is not enabled
2024/02/03 21:10:10.489371 [INFO] disable log stream
2024/02/03 21:10:10.489385 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 21:10:10.513110 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 21:10:10.533981 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 21:10:10.534005 [INFO] Checking if logs need forced rotation
2024/02/03 21:10:10.534028 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 21:10:11.132645 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 21:10:11.617096 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 21:10:11.618947 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 21:10:12.131953 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 21:10:12.149027 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 21:10:12.149044 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 21:10:12.149056 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 21:10:12.601689 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 21:10:12.601716 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 21:10:12.601741 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 21:10:12.601745 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 21:10:12.601767 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 21:10:12.601780 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 21:10:12.601784 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 21:10:12.601789 [INFO] Executing instruction: stop X-Ray
2024/02/03 21:10:12.601792 [INFO] stop X-Ray ...
2024/02/03 21:10:12.601805 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 21:10:12.617409 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 21:10:12.617442 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 21:10:12.635404 [INFO] Executing instruction: Run Docker Container
2024/02/03 21:10:12.635459 [INFO] stop currently running containers...
2024/02/03 21:10:12.635469 [INFO] detected old app is not docker compose app
2024/02/03 21:10:12.635486 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 21:10:12.702694 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 21:10:12.718946 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 21:10:12.718980 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 21:10:12.745555 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 21:10:12.745590 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 21:10:12.761953 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 21:10:12.762006 [INFO] stopping current container: fc6ebed05688
2024/02/03 21:10:12.762021 [INFO] Running command /bin/sh -c docker ps | grep -q fc6ebed05688
2024/02/03 21:10:12.786255 [INFO] Running command /bin/sh -c docker ps | grep -q fc6ebed05688
2024/02/03 21:10:12.816423 [INFO] Pruning containers ...
2024/02/03 21:10:12.816446 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 21:10:12.842389 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 21:10:12.842427 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 21:10:12.868881 [INFO] Total reclaimed space: 0B

2024/02/03 21:10:12.868915 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 21:10:12.890629 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 21:10:12.890662 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 21:10:12.912839 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 21:10:12.912859 [INFO] Removing /var/app/current/ if it exists
2024/02/03 21:10:12.913017 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 21:10:12.913035 [INFO] detected new app is not docker compose app
2024/02/03 21:10:12.913084 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 21:10:13.323748 [INFO] 818959efeeb3a29cd785c564c993828eb009dc7ac9497d878139497be488b962

2024/02/03 21:10:18.324366 [INFO] Running command /bin/sh -c docker ps | grep -q 818959efeeb3
2024/02/03 21:10:18.348006 [ERROR] docker container quit unexpectedly on 2024-02-03 21:10:18.347989109 +0000 UTC: Command /bin/sh -c docker ps | grep -q 818959efeeb3 failed with error exit status 1
2024/02/03 21:10:18.348039 [INFO] Running command /bin/sh -c docker logs 818959efeeb3
2024/02/03 21:10:18.371287 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 818959efeeb3: Command /bin/sh -c docker ps | grep -q 818959efeeb3 failed with error exit status 1 

2024/02/03 21:10:18.371297 [INFO] Executing cleanup logic
2024/02/03 21:10:18.371534 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 22:10:19.396613 [INFO] Starting...
2024/02/03 22:10:19.396657 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 22:10:19.396682 [INFO] reading event message file
2024/02/03 22:10:19.398570 [INFO] Engine received EB command userdata-exec

2024/02/03 22:10:19.404761 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 22:10:19.851524 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 22:10:20.243022 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 22:10:20.243143 [INFO] Engine command: (self-startup)

2024/02/03 22:10:20.243155 [INFO] Downloading EB Application...
2024/02/03 22:10:20.243159 [INFO] Region: eu-west-1
2024/02/03 22:10:20.243172 [INFO] envID: e-8gmkc7rmw6
2024/02/03 22:10:20.243176 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 22:10:20.243179 [INFO] Using manifest file name from command request
2024/02/03 22:10:20.243201 [INFO] Unable to get version manifest file.
2024/02/03 22:10:20.243205 [INFO] Downloading latest manifest available.
2024/02/03 22:10:20.243213 [INFO] Download latest app version manifest
2024/02/03 22:10:20.243398 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 22:10:20.283354 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 22:10:20.283640 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 22:10:20.294929 [INFO] Download successful124bytes downloaded
2024/02/03 22:10:20.295080 [INFO] Trying to read and parse version manifest...
2024/02/03 22:10:20.295155 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 22:10:20.317009 [INFO] Download successful264bytes downloaded
2024/02/03 22:10:20.317422 [INFO] Executing instruction: SyncClock
2024/02/03 22:10:20.317428 [INFO] Starting SyncClock
2024/02/03 22:10:20.317439 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 22:10:20.323497 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 22:10:08 2024
System time     : 0.000001515 seconds slow of NTP time
Last offset     : -0.000002656 seconds
RMS offset      : 0.000002401 seconds
Frequency       : 0.368 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.056 ppm
Root delay      : 0.000363785 seconds
Root dispersion : 0.000445288 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/03 22:10:20.323522 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 22:10:20.327507 [INFO] 200 OK

2024/02/03 22:10:20.327597 [INFO] Skipping Configure OS
2024/02/03 22:10:20.327602 [INFO] Skipping LockRepo
2024/02/03 22:10:20.327616 [INFO] Skipping GenerateEBBanner
2024/02/03 22:10:20.327620 [INFO] Skipping Install Process Manager
2024/02/03 22:10:20.327624 [INFO] Skipping install syslog
2024/02/03 22:10:20.327628 [INFO] Skipping install cron
2024/02/03 22:10:20.327632 [INFO] Skipping install proxy
2024/02/03 22:10:20.327635 [INFO] Skipping installhealthd
2024/02/03 22:10:20.327639 [INFO] Skipping Install Log Streaming Manager
2024/02/03 22:10:20.327643 [INFO] Skipping install X-Ray
2024/02/03 22:10:20.327647 [INFO] Skipping install Third Party License
2024/02/03 22:10:20.327652 [INFO] Skipping installSqsd
2024/02/03 22:10:20.327656 [INFO] Skipping bootstraphealthd
2024/02/03 22:10:20.327659 [INFO] Skipping Install yum packages
2024/02/03 22:10:20.327663 [INFO] Skipping install docker-compose
2024/02/03 22:10:20.327667 [INFO] Skipping Configure Docker Daemon
2024/02/03 22:10:20.327670 [INFO] Skipping MarkBaked
2024/02/03 22:10:20.327674 [INFO] Skipping TuneSystemSettings
2024/02/03 22:10:20.327677 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 22:10:20.327679 [INFO] Initialize LogRotate files and directories
2024/02/03 22:10:20.342229 [INFO] Skipping BootstrapCFNHup
2024/02/03 22:10:20.342241 [INFO] Executing instruction: StartCFNHup
2024/02/03 22:10:20.342243 [INFO] Start cfn-hup
2024/02/03 22:10:20.342262 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 22:10:20.360338 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 22:10:20.370487 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 22:10:20.370528 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 22:10:20.370532 [INFO] Executing instruction: Start Docker
2024/02/03 22:10:20.370536 [INFO] Starting Docker...
2024/02/03 22:10:20.370619 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 22:10:20.371941 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 22:10:20.373344 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 22:10:20.662617 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 22:10:20.676178 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 22:10:20.676212 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 22:10:20.686906 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 22:10:20.695979 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 22:10:20.706560 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 22:10:20.750713 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 22:10:20.750797 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 22:10:21.068415 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 22:10:21.480774 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 22:10:21.543013 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 22:10:21.875223 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 22:10:21.884822 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 22:10:21.900679 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 22:10:21.909223 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 22:10:23.255715 [INFO] Skipping Setup Docker Options
2024/02/03 22:10:23.255739 [INFO] Skipping MarkBootstrapped
2024/02/03 22:10:23.255743 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 22:10:23.255877 [INFO] Starting SwitchCFNStack
2024/02/03 22:10:23.255882 [INFO] Executing instruction: stopSqsd
2024/02/03 22:10:23.255890 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 22:10:23.255893 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 22:10:23.255897 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 22:10:23.255915 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 22:10:23.852477 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 22:10:23.852507 [INFO] Executing instruction: StagedockerApplication
2024/02/03 22:10:23.852517 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 22:10:23.880440 [INFO] Pruning containers ...
2024/02/03 22:10:23.880485 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 22:10:23.909820 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
818959efeeb3   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             boring_shaw

2024/02/03 22:10:23.909888 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 22:10:23.945738 [INFO] Deleted Containers:
818959efeeb3a29cd785c564c993828eb009dc7ac9497d878139497be488b962

Total reclaimed space: 0B

2024/02/03 22:10:23.945778 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 22:10:23.973307 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 22:10:23.973643 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 22:10:23.977998 [INFO] application/json

2024/02/03 22:10:23.978019 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 22:10:24.100433 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/03 22:10:24.100656 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 22:10:24.102147 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 22:10:24.102203 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 22:10:24.102253 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 22:10:24.102259 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 22:10:24.102266 [INFO] Executing instruction: Generate environment file
2024/02/03 22:10:24.102298 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 22:10:24.102302 [INFO] start build docker app
2024/02/03 22:10:24.102687 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 22:10:24.102692 [INFO] fetching image and ports
2024/02/03 22:10:24.104555 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 22:10:24.104608 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 22:10:24.104616 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 22:10:24.104632 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 22:10:25.146297 [INFO] Login Succeeded

2024/02/03 22:10:25.146319 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 22:10:25.146325 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 22:10:25.146345 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 22:10:25.281463 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 22:10:25.281488 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 22:10:25.281498 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 22:10:25.281503 [INFO] start to build docker image
2024/02/03 22:10:25.281541 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 22:10:25.566259 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 22:10:25.566285 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 22:10:25.566290 [INFO] successfully build docker image
2024/02/03 22:10:25.566293 [INFO] save staging docker image id
2024/02/03 22:10:25.566307 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 22:10:25.593203 [INFO] c176d18fbf65

2024/02/03 22:10:25.593365 [INFO] Executing instruction: configure X-Ray
2024/02/03 22:10:25.593371 [INFO] X-Ray is not enabled.
2024/02/03 22:10:25.593374 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 22:10:25.599466 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 22:10:25.601101 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 22:10:25.629456 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 22:10:25.629485 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 22:10:25.641763 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 22:10:25.651873 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 22:10:25.662776 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 22:10:25.715644 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 22:10:26.118795 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 22:10:26.118871 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 22:10:26.475784 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 22:10:26.499059 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 22:10:26.812041 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 22:10:26.824197 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 22:10:26.844818 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 22:10:27.183810 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 22:10:27.193985 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 22:10:27.571356 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 22:10:27.571425 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 22:10:27.585092 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 22:10:27.595782 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 22:10:27.687034 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 22:10:27.687938 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 22:10:27.688775 [INFO] Executing instruction: configure log streaming
2024/02/03 22:10:27.688786 [INFO] log streaming is not enabled
2024/02/03 22:10:27.688790 [INFO] disable log stream
2024/02/03 22:10:27.688809 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 22:10:27.714455 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 22:10:27.735997 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 22:10:27.736026 [INFO] Checking if logs need forced rotation
2024/02/03 22:10:27.736045 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 22:10:28.344981 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 22:10:28.869778 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 22:10:28.872013 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 22:10:29.168093 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 22:10:29.186336 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 22:10:29.186352 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 22:10:29.186363 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 22:10:29.712044 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 22:10:29.712086 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 22:10:29.712111 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 22:10:29.712115 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 22:10:29.712138 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 22:10:29.712149 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 22:10:29.712152 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 22:10:29.712157 [INFO] Executing instruction: stop X-Ray
2024/02/03 22:10:29.712159 [INFO] stop X-Ray ...
2024/02/03 22:10:29.712170 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 22:10:29.734761 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 22:10:29.734845 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 22:10:29.762093 [INFO] Executing instruction: Run Docker Container
2024/02/03 22:10:29.762135 [INFO] stop currently running containers...
2024/02/03 22:10:29.762148 [INFO] detected old app is not docker compose app
2024/02/03 22:10:29.762183 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 22:10:29.832565 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 22:10:29.863167 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 22:10:29.863202 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 22:10:29.885622 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 22:10:29.885667 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 22:10:29.900330 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 22:10:29.900384 [INFO] stopping current container: 818959efeeb3
2024/02/03 22:10:29.900398 [INFO] Running command /bin/sh -c docker ps | grep -q 818959efeeb3
2024/02/03 22:10:29.919746 [INFO] Running command /bin/sh -c docker ps | grep -q 818959efeeb3
2024/02/03 22:10:29.940215 [INFO] Pruning containers ...
2024/02/03 22:10:29.940243 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 22:10:29.958577 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 22:10:29.958606 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 22:10:29.977436 [INFO] Total reclaimed space: 0B

2024/02/03 22:10:29.977465 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 22:10:29.996336 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 22:10:29.996369 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 22:10:30.022925 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 22:10:30.022950 [INFO] Removing /var/app/current/ if it exists
2024/02/03 22:10:30.023104 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 22:10:30.023121 [INFO] detected new app is not docker compose app
2024/02/03 22:10:30.023171 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 22:10:30.418746 [INFO] 760659a966e338ce4fcae45938b7a6da428db958c64ba9ee60863b609c5af104

2024/02/03 22:10:35.421565 [INFO] Running command /bin/sh -c docker ps | grep -q 760659a966e3
2024/02/03 22:10:35.447005 [ERROR] docker container quit unexpectedly on 2024-02-03 22:10:35.446993989 +0000 UTC: Command /bin/sh -c docker ps | grep -q 760659a966e3 failed with error exit status 1
2024/02/03 22:10:35.447035 [INFO] Running command /bin/sh -c docker logs 760659a966e3
2024/02/03 22:10:35.472937 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 760659a966e3: Command /bin/sh -c docker ps | grep -q 760659a966e3 failed with error exit status 1 

2024/02/03 22:10:35.472948 [INFO] Executing cleanup logic
2024/02/03 22:10:35.473223 [INFO] Platform Engine finished execution on command: self-startup

2024/02/03 23:10:36.435755 [INFO] Starting...
2024/02/03 23:10:36.435798 [INFO] Starting EBPlatform-PlatformEngine
2024/02/03 23:10:36.435954 [INFO] reading event message file
2024/02/03 23:10:36.436672 [INFO] Engine received EB command userdata-exec

2024/02/03 23:10:36.443173 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 23:10:36.825592 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 23:10:37.301344 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/03 23:10:37.301451 [INFO] Engine command: (self-startup)

2024/02/03 23:10:37.301463 [INFO] Downloading EB Application...
2024/02/03 23:10:37.301467 [INFO] Region: eu-west-1
2024/02/03 23:10:37.301471 [INFO] envID: e-8gmkc7rmw6
2024/02/03 23:10:37.301475 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/03 23:10:37.301490 [INFO] Using manifest file name from command request
2024/02/03 23:10:37.301507 [INFO] Unable to get version manifest file.
2024/02/03 23:10:37.301511 [INFO] Downloading latest manifest available.
2024/02/03 23:10:37.301514 [INFO] Download latest app version manifest
2024/02/03 23:10:37.301638 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/03 23:10:37.352791 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/03 23:10:37.352962 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/03 23:10:37.364978 [INFO] Download successful124bytes downloaded
2024/02/03 23:10:37.365134 [INFO] Trying to read and parse version manifest...
2024/02/03 23:10:37.365225 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 23:10:37.415520 [INFO] Download successful264bytes downloaded
2024/02/03 23:10:37.415873 [INFO] Executing instruction: SyncClock
2024/02/03 23:10:37.415880 [INFO] Starting SyncClock
2024/02/03 23:10:37.415891 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/03 23:10:37.421265 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sat Feb 03 23:10:31 2024
System time     : 0.000001676 seconds fast of NTP time
Last offset     : +0.000000614 seconds
RMS offset      : 0.000003238 seconds
Frequency       : 0.364 ppm fast
Residual freq   : +0.000 ppm
Skew            : 0.041 ppm
Root delay      : 0.000423267 seconds
Root dispersion : 0.000375456 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/03 23:10:37.421286 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/03 23:10:37.425384 [INFO] 200 OK

2024/02/03 23:10:37.425477 [INFO] Skipping Configure OS
2024/02/03 23:10:37.425483 [INFO] Skipping LockRepo
2024/02/03 23:10:37.425487 [INFO] Skipping GenerateEBBanner
2024/02/03 23:10:37.425491 [INFO] Skipping Install Process Manager
2024/02/03 23:10:37.425495 [INFO] Skipping install syslog
2024/02/03 23:10:37.425498 [INFO] Skipping install cron
2024/02/03 23:10:37.425502 [INFO] Skipping install proxy
2024/02/03 23:10:37.425506 [INFO] Skipping installhealthd
2024/02/03 23:10:37.425510 [INFO] Skipping Install Log Streaming Manager
2024/02/03 23:10:37.425514 [INFO] Skipping install X-Ray
2024/02/03 23:10:37.425518 [INFO] Skipping install Third Party License
2024/02/03 23:10:37.425522 [INFO] Skipping installSqsd
2024/02/03 23:10:37.425526 [INFO] Skipping bootstraphealthd
2024/02/03 23:10:37.425533 [INFO] Skipping Install yum packages
2024/02/03 23:10:37.425537 [INFO] Skipping install docker-compose
2024/02/03 23:10:37.425541 [INFO] Skipping Configure Docker Daemon
2024/02/03 23:10:37.425545 [INFO] Skipping MarkBaked
2024/02/03 23:10:37.425549 [INFO] Skipping TuneSystemSettings
2024/02/03 23:10:37.425551 [INFO] Executing instruction: GetSetupLogRotate
2024/02/03 23:10:37.425553 [INFO] Initialize LogRotate files and directories
2024/02/03 23:10:37.437526 [INFO] Skipping BootstrapCFNHup
2024/02/03 23:10:37.437534 [INFO] Executing instruction: StartCFNHup
2024/02/03 23:10:37.437537 [INFO] Start cfn-hup
2024/02/03 23:10:37.437553 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/03 23:10:37.452733 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/03 23:10:37.461635 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/03 23:10:37.461671 [INFO] Skipping SetupPublishLogCronjob
2024/02/03 23:10:37.461675 [INFO] Executing instruction: Start Docker
2024/02/03 23:10:37.461679 [INFO] Starting Docker...
2024/02/03 23:10:37.461756 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/03 23:10:37.462718 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/03 23:10:37.463680 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 23:10:37.940308 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 23:10:37.954757 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/03 23:10:37.954788 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 23:10:37.964930 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 23:10:37.975096 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 23:10:37.987430 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/03 23:10:38.028273 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/03 23:10:38.028320 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/03 23:10:38.394991 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 23:10:38.766152 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 23:10:38.776759 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 23:10:39.098152 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 23:10:39.111874 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/03 23:10:39.125037 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/03 23:10:39.133995 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/03 23:10:40.270652 [INFO] Skipping Setup Docker Options
2024/02/03 23:10:40.270681 [INFO] Skipping MarkBootstrapped
2024/02/03 23:10:40.270685 [INFO] Executing instruction: Save CFN Stack Info
2024/02/03 23:10:40.270812 [INFO] Starting SwitchCFNStack
2024/02/03 23:10:40.270818 [INFO] Executing instruction: stopSqsd
2024/02/03 23:10:40.270822 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/03 23:10:40.270825 [INFO] Executing instruction: PreBuildEbExtension
2024/02/03 23:10:40.270829 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/03 23:10:40.270846 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/03 23:10:40.761478 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/03 23:10:40.761505 [INFO] Executing instruction: StagedockerApplication
2024/02/03 23:10:40.761610 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/03 23:10:40.787630 [INFO] Pruning containers ...
2024/02/03 23:10:40.787664 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 23:10:40.814772 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
760659a966e3   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             gracious_mestorf

2024/02/03 23:10:40.814835 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 23:10:40.844887 [INFO] Deleted Containers:
760659a966e338ce4fcae45938b7a6da428db958c64ba9ee60863b609c5af104

Total reclaimed space: 0B

2024/02/03 23:10:40.844913 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 23:10:40.867428 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 23:10:40.867730 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/03 23:10:40.870878 [INFO] application/json

2024/02/03 23:10:40.870897 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/03 23:10:40.951428 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/03 23:10:40.951614 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/03 23:10:40.954459 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/03 23:10:40.954790 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/03 23:10:40.955812 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/03 23:10:40.956811 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/03 23:10:40.956823 [INFO] Executing instruction: Generate environment file
2024/02/03 23:10:40.957226 [INFO] Executing instruction: Docker Specific Build Application
2024/02/03 23:10:40.957235 [INFO] start build docker app
2024/02/03 23:10:40.958414 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/03 23:10:40.958423 [INFO] fetching image and ports
2024/02/03 23:10:40.964524 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/03 23:10:40.964590 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/03 23:10:40.964599 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/03 23:10:40.964609 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/03 23:10:41.913072 [INFO] Login Succeeded

2024/02/03 23:10:41.913094 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/03 23:10:41.913100 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/03 23:10:41.913117 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 23:10:42.075187 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/03 23:10:42.075214 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 23:10:42.075218 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/03 23:10:42.075223 [INFO] start to build docker image
2024/02/03 23:10:42.075241 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 23:10:42.358133 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/03 23:10:42.358171 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/03 23:10:42.358180 [INFO] successfully build docker image
2024/02/03 23:10:42.358182 [INFO] save staging docker image id
2024/02/03 23:10:42.358193 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/03 23:10:42.379296 [INFO] c176d18fbf65

2024/02/03 23:10:42.379414 [INFO] Executing instruction: configure X-Ray
2024/02/03 23:10:42.379420 [INFO] X-Ray is not enabled.
2024/02/03 23:10:42.379423 [INFO] Executing instruction: configure proxy Nginx
2024/02/03 23:10:42.384654 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/03 23:10:42.386218 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 23:10:42.397884 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/03 23:10:42.397915 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 23:10:42.409140 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 23:10:42.417541 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 23:10:42.427721 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/03 23:10:42.487792 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/03 23:10:42.799981 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/03 23:10:42.800076 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 23:10:43.121014 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 23:10:43.132250 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/03 23:10:43.393271 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/03 23:10:43.406808 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/03 23:10:43.418364 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/03 23:10:43.767204 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/03 23:10:43.776785 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/03 23:10:44.073573 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/03 23:10:44.073613 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/03 23:10:44.087444 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/03 23:10:44.096545 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/03 23:10:44.162462 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/03 23:10:44.163375 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/03 23:10:44.164269 [INFO] Executing instruction: configure log streaming
2024/02/03 23:10:44.164280 [INFO] log streaming is not enabled
2024/02/03 23:10:44.164284 [INFO] disable log stream
2024/02/03 23:10:44.164298 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/03 23:10:44.192476 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/03 23:10:44.220330 [INFO] Executing instruction: GetToggleForceRotate
2024/02/03 23:10:44.220356 [INFO] Checking if logs need forced rotation
2024/02/03 23:10:44.220377 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/03 23:10:44.815467 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/03 23:10:45.304189 [INFO] Procfile not found. Generating default rsyslog config
2024/02/03 23:10:45.305762 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/03 23:10:45.389664 [INFO] Executing instruction: Configure Docker Logging
2024/02/03 23:10:45.405860 [INFO] Executing instruction: PostBuildEbExtension
2024/02/03 23:10:45.405876 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/03 23:10:45.405888 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/03 23:10:45.776338 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/03 23:10:45.776376 [INFO] Executing instruction: CleanEbExtensions
2024/02/03 23:10:45.776401 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/03 23:10:45.776404 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/03 23:10:45.776430 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/03 23:10:45.776441 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/03 23:10:45.776444 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/03 23:10:45.776450 [INFO] Executing instruction: stop X-Ray
2024/02/03 23:10:45.776453 [INFO] stop X-Ray ...
2024/02/03 23:10:45.776467 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/03 23:10:45.855446 [WARN] stopProcess Warning: process xray is not registered 
2024/02/03 23:10:45.855481 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/03 23:10:45.875266 [INFO] Executing instruction: Run Docker Container
2024/02/03 23:10:45.875301 [INFO] stop currently running containers...
2024/02/03 23:10:45.875314 [INFO] detected old app is not docker compose app
2024/02/03 23:10:45.875332 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/03 23:10:45.902554 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/03 23:10:45.927078 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/03 23:10:45.927116 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/03 23:10:45.946324 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/03 23:10:45.946364 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/03 23:10:45.970201 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/03 23:10:45.970272 [INFO] stopping current container: 760659a966e3
2024/02/03 23:10:45.970288 [INFO] Running command /bin/sh -c docker ps | grep -q 760659a966e3
2024/02/03 23:10:46.008437 [INFO] Running command /bin/sh -c docker ps | grep -q 760659a966e3
2024/02/03 23:10:46.036038 [INFO] Pruning containers ...
2024/02/03 23:10:46.036069 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 23:10:46.059716 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 23:10:46.059749 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/03 23:10:46.081081 [INFO] Total reclaimed space: 0B

2024/02/03 23:10:46.081109 [INFO] Running command /bin/sh -c docker ps -a
2024/02/03 23:10:46.102248 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/03 23:10:46.102305 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/03 23:10:46.122618 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/03 23:10:46.122639 [INFO] Removing /var/app/current/ if it exists
2024/02/03 23:10:46.122854 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/03 23:10:46.122912 [INFO] detected new app is not docker compose app
2024/02/03 23:10:46.123011 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/03 23:10:46.563594 [INFO] 80ece8e9b51a377b7553a16b52507aa22d34534aee42e964678aa96656ebd8d6

2024/02/03 23:10:51.563976 [INFO] Running command /bin/sh -c docker ps | grep -q 80ece8e9b51a
2024/02/03 23:10:51.586026 [ERROR] docker container quit unexpectedly on 2024-02-03 23:10:51.586004156 +0000 UTC: Command /bin/sh -c docker ps | grep -q 80ece8e9b51a failed with error exit status 1
2024/02/03 23:10:51.586061 [INFO] Running command /bin/sh -c docker logs 80ece8e9b51a
2024/02/03 23:10:51.610292 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 80ece8e9b51a: Command /bin/sh -c docker ps | grep -q 80ece8e9b51a failed with error exit status 1 

2024/02/03 23:10:51.610499 [INFO] Executing cleanup logic
2024/02/03 23:10:51.610732 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 00:10:52.752746 [INFO] Starting...
2024/02/04 00:10:52.752790 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 00:10:52.752819 [INFO] reading event message file
2024/02/04 00:10:52.754802 [INFO] Engine received EB command userdata-exec

2024/02/04 00:10:52.762613 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 00:10:53.170985 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 00:10:53.633076 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 00:10:53.633149 [INFO] Engine command: (self-startup)

2024/02/04 00:10:53.633155 [INFO] Downloading EB Application...
2024/02/04 00:10:53.633158 [INFO] Region: eu-west-1
2024/02/04 00:10:53.633160 [INFO] envID: e-8gmkc7rmw6
2024/02/04 00:10:53.633162 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 00:10:53.633165 [INFO] Using manifest file name from command request
2024/02/04 00:10:53.633178 [INFO] Unable to get version manifest file.
2024/02/04 00:10:53.633180 [INFO] Downloading latest manifest available.
2024/02/04 00:10:53.633182 [INFO] Download latest app version manifest
2024/02/04 00:10:53.633325 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 00:10:53.672590 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 00:10:53.672765 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 00:10:53.684891 [INFO] Download successful124bytes downloaded
2024/02/04 00:10:53.685064 [INFO] Trying to read and parse version manifest...
2024/02/04 00:10:53.685159 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 00:10:53.721015 [INFO] Download successful264bytes downloaded
2024/02/04 00:10:53.721427 [INFO] Executing instruction: SyncClock
2024/02/04 00:10:53.721435 [INFO] Starting SyncClock
2024/02/04 00:10:53.721445 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 00:10:53.748765 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 00:10:53 2024
System time     : 0.000002296 seconds slow of NTP time
Last offset     : -0.000000302 seconds
RMS offset      : 0.000003270 seconds
Frequency       : 0.282 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.083 ppm
Root delay      : 0.000441292 seconds
Root dispersion : 0.000330022 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/04 00:10:53.748800 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 00:10:53.759949 [INFO] 200 OK

2024/02/04 00:10:53.760087 [INFO] Skipping Configure OS
2024/02/04 00:10:53.760096 [INFO] Skipping LockRepo
2024/02/04 00:10:53.760103 [INFO] Skipping GenerateEBBanner
2024/02/04 00:10:53.761155 [INFO] Skipping Install Process Manager
2024/02/04 00:10:53.761170 [INFO] Skipping install syslog
2024/02/04 00:10:53.761175 [INFO] Skipping install cron
2024/02/04 00:10:53.761180 [INFO] Skipping install proxy
2024/02/04 00:10:53.761185 [INFO] Skipping installhealthd
2024/02/04 00:10:53.761190 [INFO] Skipping Install Log Streaming Manager
2024/02/04 00:10:53.761195 [INFO] Skipping install X-Ray
2024/02/04 00:10:53.761200 [INFO] Skipping install Third Party License
2024/02/04 00:10:53.761205 [INFO] Skipping installSqsd
2024/02/04 00:10:53.761209 [INFO] Skipping bootstraphealthd
2024/02/04 00:10:53.761213 [INFO] Skipping Install yum packages
2024/02/04 00:10:53.761217 [INFO] Skipping install docker-compose
2024/02/04 00:10:53.761220 [INFO] Skipping Configure Docker Daemon
2024/02/04 00:10:53.761224 [INFO] Skipping MarkBaked
2024/02/04 00:10:53.761228 [INFO] Skipping TuneSystemSettings
2024/02/04 00:10:53.761232 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 00:10:53.761601 [INFO] Initialize LogRotate files and directories
2024/02/04 00:10:53.777348 [INFO] Skipping BootstrapCFNHup
2024/02/04 00:10:53.777361 [INFO] Executing instruction: StartCFNHup
2024/02/04 00:10:53.777364 [INFO] Start cfn-hup
2024/02/04 00:10:53.777382 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 00:10:53.800064 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 00:10:53.811204 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 00:10:53.811244 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 00:10:53.811247 [INFO] Executing instruction: Start Docker
2024/02/04 00:10:53.811250 [INFO] Starting Docker...
2024/02/04 00:10:53.811325 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 00:10:53.812680 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 00:10:53.813857 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 00:10:54.175539 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 00:10:54.201676 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 00:10:54.201719 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 00:10:54.214550 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 00:10:54.234421 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 00:10:54.257606 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 00:10:54.365983 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 00:10:54.366057 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 00:10:54.759489 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 00:10:55.057803 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 00:10:55.071488 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 00:10:55.353832 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 00:10:55.364046 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 00:10:55.377603 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 00:10:55.386688 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 00:10:56.889149 [INFO] Skipping Setup Docker Options
2024/02/04 00:10:56.889178 [INFO] Skipping MarkBootstrapped
2024/02/04 00:10:56.889182 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 00:10:56.889308 [INFO] Starting SwitchCFNStack
2024/02/04 00:10:56.889314 [INFO] Executing instruction: stopSqsd
2024/02/04 00:10:56.889318 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 00:10:56.889322 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 00:10:56.889325 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 00:10:56.889350 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 00:10:57.383862 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 00:10:57.383920 [INFO] Executing instruction: StagedockerApplication
2024/02/04 00:10:57.383934 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 00:10:57.404975 [INFO] Pruning containers ...
2024/02/04 00:10:57.405004 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 00:10:57.432137 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
80ece8e9b51a   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             determined_satoshi

2024/02/04 00:10:57.432169 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 00:10:57.468229 [INFO] Deleted Containers:
80ece8e9b51a377b7553a16b52507aa22d34534aee42e964678aa96656ebd8d6

Total reclaimed space: 0B

2024/02/04 00:10:57.468252 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 00:10:57.491681 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 00:10:57.491944 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 00:10:57.495668 [INFO] application/json

2024/02/04 00:10:57.495688 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 00:10:57.570794 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/04 00:10:57.570952 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 00:10:57.572374 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 00:10:57.572570 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 00:10:57.572587 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 00:10:57.572592 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 00:10:57.572597 [INFO] Executing instruction: Generate environment file
2024/02/04 00:10:57.572741 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 00:10:57.572745 [INFO] start build docker app
2024/02/04 00:10:57.573171 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 00:10:57.573175 [INFO] fetching image and ports
2024/02/04 00:10:57.574709 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 00:10:57.574766 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 00:10:57.574774 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 00:10:57.574785 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 00:10:58.594943 [INFO] Login Succeeded

2024/02/04 00:10:58.594963 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 00:10:58.594975 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 00:10:58.594992 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 00:10:58.764627 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 00:10:58.764653 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 00:10:58.764666 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 00:10:58.764670 [INFO] start to build docker image
2024/02/04 00:10:58.764688 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 00:10:59.122212 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 00:10:59.122232 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 00:10:59.122236 [INFO] successfully build docker image
2024/02/04 00:10:59.122238 [INFO] save staging docker image id
2024/02/04 00:10:59.122250 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 00:10:59.150841 [INFO] c176d18fbf65

2024/02/04 00:10:59.150967 [INFO] Executing instruction: configure X-Ray
2024/02/04 00:10:59.150973 [INFO] X-Ray is not enabled.
2024/02/04 00:10:59.150979 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 00:10:59.156177 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 00:10:59.157738 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 00:10:59.174892 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 00:10:59.174923 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 00:10:59.189272 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 00:10:59.200590 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 00:10:59.212923 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 00:10:59.333266 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 00:10:59.712319 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 00:10:59.712506 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 00:11:00.155708 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 00:11:00.180967 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 00:11:00.503154 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 00:11:00.515658 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 00:11:00.529171 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 00:11:00.796290 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 00:11:00.814299 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 00:11:01.251058 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 00:11:01.251099 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 00:11:01.264965 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 00:11:01.275395 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 00:11:01.367026 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 00:11:01.368511 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 00:11:01.369547 [INFO] Executing instruction: configure log streaming
2024/02/04 00:11:01.369639 [INFO] log streaming is not enabled
2024/02/04 00:11:01.369643 [INFO] disable log stream
2024/02/04 00:11:01.369657 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 00:11:01.391014 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 00:11:01.465555 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 00:11:01.465581 [INFO] Checking if logs need forced rotation
2024/02/04 00:11:01.465602 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 00:11:02.137151 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 00:11:02.753936 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 00:11:02.755930 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 00:11:03.144860 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 00:11:03.163272 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 00:11:03.163291 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 00:11:03.163307 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 00:11:03.693536 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 00:11:03.693564 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 00:11:03.693590 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 00:11:03.693594 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 00:11:03.693617 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 00:11:03.693632 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 00:11:03.693635 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 00:11:03.693640 [INFO] Executing instruction: stop X-Ray
2024/02/04 00:11:03.693644 [INFO] stop X-Ray ...
2024/02/04 00:11:03.693656 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 00:11:03.710891 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 00:11:03.710925 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 00:11:03.730252 [INFO] Executing instruction: Run Docker Container
2024/02/04 00:11:03.730281 [INFO] stop currently running containers...
2024/02/04 00:11:03.730296 [INFO] detected old app is not docker compose app
2024/02/04 00:11:03.730310 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 00:11:03.802590 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 00:11:03.819335 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 00:11:03.819364 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 00:11:03.834614 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 00:11:03.834653 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 00:11:03.848896 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 00:11:03.848946 [INFO] stopping current container: 80ece8e9b51a
2024/02/04 00:11:03.848958 [INFO] Running command /bin/sh -c docker ps | grep -q 80ece8e9b51a
2024/02/04 00:11:03.870592 [INFO] Running command /bin/sh -c docker ps | grep -q 80ece8e9b51a
2024/02/04 00:11:03.895690 [INFO] Pruning containers ...
2024/02/04 00:11:03.895714 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 00:11:03.916305 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 00:11:03.916414 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 00:11:03.936627 [INFO] Total reclaimed space: 0B

2024/02/04 00:11:03.936654 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 00:11:03.966966 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 00:11:03.966999 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 00:11:03.988570 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 00:11:03.988591 [INFO] Removing /var/app/current/ if it exists
2024/02/04 00:11:03.988684 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 00:11:03.988702 [INFO] detected new app is not docker compose app
2024/02/04 00:11:03.988749 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 00:11:04.441634 [INFO] c9d2cd6138ee866de22b6b36c2e8174eb931466b216e2fc0611c1a7c38b98414

2024/02/04 00:11:09.442574 [INFO] Running command /bin/sh -c docker ps | grep -q c9d2cd6138ee
2024/02/04 00:11:09.465027 [ERROR] docker container quit unexpectedly on 2024-02-04 00:11:09.465015972 +0000 UTC: Command /bin/sh -c docker ps | grep -q c9d2cd6138ee failed with error exit status 1
2024/02/04 00:11:09.465055 [INFO] Running command /bin/sh -c docker logs c9d2cd6138ee
2024/02/04 00:11:09.487911 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container c9d2cd6138ee: Command /bin/sh -c docker ps | grep -q c9d2cd6138ee failed with error exit status 1 

2024/02/04 00:11:09.487920 [INFO] Executing cleanup logic
2024/02/04 00:11:09.488103 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 01:11:10.753563 [INFO] Starting...
2024/02/04 01:11:10.753603 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 01:11:10.753630 [INFO] reading event message file
2024/02/04 01:11:10.754608 [INFO] Engine received EB command userdata-exec

2024/02/04 01:11:10.763812 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 01:11:11.121883 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 01:11:11.573584 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 01:11:11.573698 [INFO] Engine command: (self-startup)

2024/02/04 01:11:11.573707 [INFO] Downloading EB Application...
2024/02/04 01:11:11.573711 [INFO] Region: eu-west-1
2024/02/04 01:11:11.573725 [INFO] envID: e-8gmkc7rmw6
2024/02/04 01:11:11.573798 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 01:11:11.573803 [INFO] Using manifest file name from command request
2024/02/04 01:11:11.573816 [INFO] Unable to get version manifest file.
2024/02/04 01:11:11.573819 [INFO] Downloading latest manifest available.
2024/02/04 01:11:11.573821 [INFO] Download latest app version manifest
2024/02/04 01:11:11.573977 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 01:11:11.615783 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 01:11:11.615977 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 01:11:11.636598 [INFO] Download successful124bytes downloaded
2024/02/04 01:11:11.637105 [INFO] Trying to read and parse version manifest...
2024/02/04 01:11:11.637290 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 01:11:11.666167 [INFO] Download successful264bytes downloaded
2024/02/04 01:11:11.666569 [INFO] Executing instruction: SyncClock
2024/02/04 01:11:11.666574 [INFO] Starting SyncClock
2024/02/04 01:11:11.666587 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 01:11:11.672386 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 01:10:59 2024
System time     : 0.000000002 seconds fast of NTP time
Last offset     : -0.000009462 seconds
RMS offset      : 0.000004176 seconds
Frequency       : 0.372 ppm fast
Residual freq   : -0.169 ppm
Skew            : 0.182 ppm
Root delay      : 0.000406702 seconds
Root dispersion : 0.000512232 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/04 01:11:11.672412 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 01:11:11.677701 [INFO] 200 OK

2024/02/04 01:11:11.677798 [INFO] Skipping Configure OS
2024/02/04 01:11:11.677803 [INFO] Skipping LockRepo
2024/02/04 01:11:11.677808 [INFO] Skipping GenerateEBBanner
2024/02/04 01:11:11.677812 [INFO] Skipping Install Process Manager
2024/02/04 01:11:11.677817 [INFO] Skipping install syslog
2024/02/04 01:11:11.677820 [INFO] Skipping install cron
2024/02/04 01:11:11.677824 [INFO] Skipping install proxy
2024/02/04 01:11:11.677828 [INFO] Skipping installhealthd
2024/02/04 01:11:11.677832 [INFO] Skipping Install Log Streaming Manager
2024/02/04 01:11:11.677835 [INFO] Skipping install X-Ray
2024/02/04 01:11:11.677839 [INFO] Skipping install Third Party License
2024/02/04 01:11:11.677845 [INFO] Skipping installSqsd
2024/02/04 01:11:11.677849 [INFO] Skipping bootstraphealthd
2024/02/04 01:11:11.677853 [INFO] Skipping Install yum packages
2024/02/04 01:11:11.677857 [INFO] Skipping install docker-compose
2024/02/04 01:11:11.677861 [INFO] Skipping Configure Docker Daemon
2024/02/04 01:11:11.677864 [INFO] Skipping MarkBaked
2024/02/04 01:11:11.677868 [INFO] Skipping TuneSystemSettings
2024/02/04 01:11:11.677871 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 01:11:11.677873 [INFO] Initialize LogRotate files and directories
2024/02/04 01:11:11.689831 [INFO] Skipping BootstrapCFNHup
2024/02/04 01:11:11.689839 [INFO] Executing instruction: StartCFNHup
2024/02/04 01:11:11.689842 [INFO] Start cfn-hup
2024/02/04 01:11:11.689858 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 01:11:11.703392 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 01:11:11.716189 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 01:11:11.716220 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 01:11:11.716223 [INFO] Executing instruction: Start Docker
2024/02/04 01:11:11.716226 [INFO] Starting Docker...
2024/02/04 01:11:11.716293 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 01:11:11.717241 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 01:11:11.718286 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 01:11:12.151675 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 01:11:12.166688 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 01:11:12.166720 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 01:11:12.176673 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 01:11:12.185087 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 01:11:12.195906 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 01:11:12.255606 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 01:11:12.255651 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 01:11:12.527088 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 01:11:12.837832 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 01:11:12.849288 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 01:11:13.288131 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 01:11:13.299764 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 01:11:13.316845 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 01:11:13.334961 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 01:11:14.573376 [INFO] Skipping Setup Docker Options
2024/02/04 01:11:14.573405 [INFO] Skipping MarkBootstrapped
2024/02/04 01:11:14.573411 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 01:11:14.573539 [INFO] Starting SwitchCFNStack
2024/02/04 01:11:14.573546 [INFO] Executing instruction: stopSqsd
2024/02/04 01:11:14.573550 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 01:11:14.573553 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 01:11:14.573562 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 01:11:14.573578 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 01:11:15.095325 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 01:11:15.095353 [INFO] Executing instruction: StagedockerApplication
2024/02/04 01:11:15.095363 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 01:11:15.115857 [INFO] Pruning containers ...
2024/02/04 01:11:15.115899 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 01:11:15.135012 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
c9d2cd6138ee   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             frosty_kilby

2024/02/04 01:11:15.135052 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 01:11:15.160607 [INFO] Deleted Containers:
c9d2cd6138ee866de22b6b36c2e8174eb931466b216e2fc0611c1a7c38b98414

Total reclaimed space: 0B

2024/02/04 01:11:15.160631 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 01:11:15.180473 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 01:11:15.180848 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 01:11:15.184819 [INFO] application/json

2024/02/04 01:11:15.184848 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 01:11:15.277380 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 01:11:15.277555 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 01:11:15.278975 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 01:11:15.279013 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 01:11:15.279033 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 01:11:15.279037 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 01:11:15.279043 [INFO] Executing instruction: Generate environment file
2024/02/04 01:11:15.279071 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 01:11:15.279074 [INFO] start build docker app
2024/02/04 01:11:15.279618 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 01:11:15.279622 [INFO] fetching image and ports
2024/02/04 01:11:15.281529 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 01:11:15.281587 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 01:11:15.281595 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 01:11:15.281604 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 01:11:16.207717 [INFO] Login Succeeded

2024/02/04 01:11:16.207834 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 01:11:16.207844 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 01:11:16.207862 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 01:11:16.344179 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 01:11:16.344203 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 01:11:16.344215 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 01:11:16.344219 [INFO] start to build docker image
2024/02/04 01:11:16.344236 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 01:11:16.606997 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 01:11:16.607028 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 01:11:16.607033 [INFO] successfully build docker image
2024/02/04 01:11:16.607036 [INFO] save staging docker image id
2024/02/04 01:11:16.607050 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 01:11:16.627272 [INFO] c176d18fbf65

2024/02/04 01:11:16.627430 [INFO] Executing instruction: configure X-Ray
2024/02/04 01:11:16.627437 [INFO] X-Ray is not enabled.
2024/02/04 01:11:16.627440 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 01:11:16.632592 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 01:11:16.634317 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 01:11:16.646368 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 01:11:16.646401 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 01:11:16.656607 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 01:11:16.665979 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 01:11:16.675987 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 01:11:16.748290 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 01:11:17.044756 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 01:11:17.044839 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 01:11:17.379366 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 01:11:17.392488 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 01:11:17.708629 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 01:11:17.719243 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 01:11:17.735022 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 01:11:18.049185 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 01:11:18.060531 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 01:11:18.387246 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 01:11:18.387288 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 01:11:18.400826 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 01:11:18.410118 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 01:11:18.501493 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 01:11:18.502717 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 01:11:18.503533 [INFO] Executing instruction: configure log streaming
2024/02/04 01:11:18.503544 [INFO] log streaming is not enabled
2024/02/04 01:11:18.503547 [INFO] disable log stream
2024/02/04 01:11:18.503562 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 01:11:18.528303 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 01:11:18.549396 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 01:11:18.549421 [INFO] Checking if logs need forced rotation
2024/02/04 01:11:18.549441 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 01:11:19.159647 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 01:11:19.660371 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 01:11:19.662036 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 01:11:20.169128 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 01:11:20.192358 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 01:11:20.192373 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 01:11:20.192391 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 01:11:20.662069 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 01:11:20.662109 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 01:11:20.662134 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 01:11:20.662137 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 01:11:20.662158 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 01:11:20.662173 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 01:11:20.662177 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 01:11:20.662183 [INFO] Executing instruction: stop X-Ray
2024/02/04 01:11:20.662199 [INFO] stop X-Ray ...
2024/02/04 01:11:20.662285 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 01:11:20.681271 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 01:11:20.681306 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 01:11:20.702470 [INFO] Executing instruction: Run Docker Container
2024/02/04 01:11:20.702505 [INFO] stop currently running containers...
2024/02/04 01:11:20.702518 [INFO] detected old app is not docker compose app
2024/02/04 01:11:20.702531 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 01:11:20.752592 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 01:11:20.770382 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 01:11:20.770438 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 01:11:20.785520 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 01:11:20.785546 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 01:11:20.800325 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 01:11:20.800373 [INFO] stopping current container: c9d2cd6138ee
2024/02/04 01:11:20.800386 [INFO] Running command /bin/sh -c docker ps | grep -q c9d2cd6138ee
2024/02/04 01:11:20.820151 [INFO] Running command /bin/sh -c docker ps | grep -q c9d2cd6138ee
2024/02/04 01:11:20.841687 [INFO] Pruning containers ...
2024/02/04 01:11:20.841711 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 01:11:20.860467 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 01:11:20.860504 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 01:11:20.880082 [INFO] Total reclaimed space: 0B

2024/02/04 01:11:20.880105 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 01:11:20.901467 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 01:11:20.901499 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 01:11:20.921241 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 01:11:20.921267 [INFO] Removing /var/app/current/ if it exists
2024/02/04 01:11:20.921390 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 01:11:20.921414 [INFO] detected new app is not docker compose app
2024/02/04 01:11:20.921483 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 01:11:21.349236 [INFO] fe1b11190c1f302a306d1ab0faefa36a0c3511f97cfe4823e629c5d8393faade

2024/02/04 01:11:26.353611 [INFO] Running command /bin/sh -c docker ps | grep -q fe1b11190c1f
2024/02/04 01:11:26.408093 [ERROR] docker container quit unexpectedly on 2024-02-04 01:11:26.408073308 +0000 UTC: Command /bin/sh -c docker ps | grep -q fe1b11190c1f failed with error exit status 1
2024/02/04 01:11:26.408522 [INFO] Running command /bin/sh -c docker logs fe1b11190c1f
2024/02/04 01:11:26.480216 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container fe1b11190c1f: Command /bin/sh -c docker ps | grep -q fe1b11190c1f failed with error exit status 1 

2024/02/04 01:11:26.480226 [INFO] Executing cleanup logic
2024/02/04 01:11:26.480401 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 02:11:27.581656 [INFO] Starting...
2024/02/04 02:11:27.581698 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 02:11:27.581726 [INFO] reading event message file
2024/02/04 02:11:27.582534 [INFO] Engine received EB command userdata-exec

2024/02/04 02:11:27.587086 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 02:11:27.969095 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 02:11:28.432768 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 02:11:28.432912 [INFO] Engine command: (self-startup)

2024/02/04 02:11:28.432922 [INFO] Downloading EB Application...
2024/02/04 02:11:28.432925 [INFO] Region: eu-west-1
2024/02/04 02:11:28.432927 [INFO] envID: e-8gmkc7rmw6
2024/02/04 02:11:28.432931 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 02:11:28.432933 [INFO] Using manifest file name from command request
2024/02/04 02:11:28.432946 [INFO] Unable to get version manifest file.
2024/02/04 02:11:28.432948 [INFO] Downloading latest manifest available.
2024/02/04 02:11:28.432951 [INFO] Download latest app version manifest
2024/02/04 02:11:28.433088 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 02:11:28.478014 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 02:11:28.478212 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 02:11:28.490453 [INFO] Download successful124bytes downloaded
2024/02/04 02:11:28.490741 [INFO] Trying to read and parse version manifest...
2024/02/04 02:11:28.490817 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 02:11:28.513921 [INFO] Download successful264bytes downloaded
2024/02/04 02:11:28.514301 [INFO] Executing instruction: SyncClock
2024/02/04 02:11:28.514308 [INFO] Starting SyncClock
2024/02/04 02:11:28.514318 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 02:11:28.520168 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 02:11:24 2024
System time     : 0.000001391 seconds slow of NTP time
Last offset     : -0.000000606 seconds
RMS offset      : 0.000000931 seconds
Frequency       : 0.314 ppm fast
Residual freq   : -0.000 ppm
Skew            : 0.024 ppm
Root delay      : 0.000399891 seconds
Root dispersion : 0.000286876 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/04 02:11:28.520195 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 02:11:28.524596 [INFO] 200 OK

2024/02/04 02:11:28.524691 [INFO] Skipping Configure OS
2024/02/04 02:11:28.524696 [INFO] Skipping LockRepo
2024/02/04 02:11:28.524700 [INFO] Skipping GenerateEBBanner
2024/02/04 02:11:28.524704 [INFO] Skipping Install Process Manager
2024/02/04 02:11:28.524712 [INFO] Skipping install syslog
2024/02/04 02:11:28.524716 [INFO] Skipping install cron
2024/02/04 02:11:28.524719 [INFO] Skipping install proxy
2024/02/04 02:11:28.524723 [INFO] Skipping installhealthd
2024/02/04 02:11:28.524727 [INFO] Skipping Install Log Streaming Manager
2024/02/04 02:11:28.524731 [INFO] Skipping install X-Ray
2024/02/04 02:11:28.524734 [INFO] Skipping install Third Party License
2024/02/04 02:11:28.524739 [INFO] Skipping installSqsd
2024/02/04 02:11:28.524743 [INFO] Skipping bootstraphealthd
2024/02/04 02:11:28.524747 [INFO] Skipping Install yum packages
2024/02/04 02:11:28.524751 [INFO] Skipping install docker-compose
2024/02/04 02:11:28.524755 [INFO] Skipping Configure Docker Daemon
2024/02/04 02:11:28.524759 [INFO] Skipping MarkBaked
2024/02/04 02:11:28.524763 [INFO] Skipping TuneSystemSettings
2024/02/04 02:11:28.524765 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 02:11:28.524767 [INFO] Initialize LogRotate files and directories
2024/02/04 02:11:28.538033 [INFO] Skipping BootstrapCFNHup
2024/02/04 02:11:28.538041 [INFO] Executing instruction: StartCFNHup
2024/02/04 02:11:28.538044 [INFO] Start cfn-hup
2024/02/04 02:11:28.538060 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 02:11:28.553936 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 02:11:28.565322 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 02:11:28.565359 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 02:11:28.565364 [INFO] Executing instruction: Start Docker
2024/02/04 02:11:28.565367 [INFO] Starting Docker...
2024/02/04 02:11:28.565492 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 02:11:28.566543 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 02:11:28.567552 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 02:11:28.884123 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 02:11:28.903299 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 02:11:28.903333 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 02:11:28.916465 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 02:11:28.929606 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 02:11:28.940890 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 02:11:29.028971 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 02:11:29.029015 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 02:11:29.369698 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 02:11:29.684205 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 02:11:29.695862 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 02:11:30.076710 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 02:11:30.094284 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 02:11:30.108223 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 02:11:30.116435 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 02:11:31.413689 [INFO] Skipping Setup Docker Options
2024/02/04 02:11:31.413719 [INFO] Skipping MarkBootstrapped
2024/02/04 02:11:31.413723 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 02:11:31.413849 [INFO] Starting SwitchCFNStack
2024/02/04 02:11:31.413854 [INFO] Executing instruction: stopSqsd
2024/02/04 02:11:31.413858 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 02:11:31.413861 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 02:11:31.413864 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 02:11:31.413887 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 02:11:31.856118 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 02:11:31.856143 [INFO] Executing instruction: StagedockerApplication
2024/02/04 02:11:31.856216 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 02:11:31.877131 [INFO] Pruning containers ...
2024/02/04 02:11:31.877160 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 02:11:31.901151 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
fe1b11190c1f   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             peaceful_colden

2024/02/04 02:11:31.901185 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 02:11:31.932624 [INFO] Deleted Containers:
fe1b11190c1f302a306d1ab0faefa36a0c3511f97cfe4823e629c5d8393faade

Total reclaimed space: 0B

2024/02/04 02:11:31.932645 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 02:11:31.955119 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 02:11:31.955346 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 02:11:31.958194 [INFO] application/json

2024/02/04 02:11:31.958211 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 02:11:32.053732 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Ports is not allowed

2024/02/04 02:11:32.053899 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 02:11:32.055161 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 02:11:32.055233 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 02:11:32.055253 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 02:11:32.055258 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 02:11:32.055263 [INFO] Executing instruction: Generate environment file
2024/02/04 02:11:32.055291 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 02:11:32.055294 [INFO] start build docker app
2024/02/04 02:11:32.055837 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 02:11:32.055844 [INFO] fetching image and ports
2024/02/04 02:11:32.057419 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 02:11:32.057511 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 02:11:32.057547 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 02:11:32.057557 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 02:11:32.958272 [INFO] Login Succeeded

2024/02/04 02:11:32.958292 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 02:11:32.958305 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 02:11:32.958324 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 02:11:33.096675 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 02:11:33.096699 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 02:11:33.096712 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 02:11:33.096716 [INFO] start to build docker image
2024/02/04 02:11:33.096732 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 02:11:33.393038 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 02:11:33.393061 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 02:11:33.393066 [INFO] successfully build docker image
2024/02/04 02:11:33.393069 [INFO] save staging docker image id
2024/02/04 02:11:33.393100 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 02:11:33.416011 [INFO] c176d18fbf65

2024/02/04 02:11:33.416145 [INFO] Executing instruction: configure X-Ray
2024/02/04 02:11:33.416152 [INFO] X-Ray is not enabled.
2024/02/04 02:11:33.416155 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 02:11:33.421985 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 02:11:33.423630 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 02:11:33.437729 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 02:11:33.437761 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 02:11:33.448220 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 02:11:33.458752 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 02:11:33.470486 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 02:11:33.539275 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 02:11:33.915972 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 02:11:33.916060 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 02:11:34.250029 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 02:11:34.263468 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 02:11:34.570820 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 02:11:34.581282 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 02:11:34.590018 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 02:11:34.909259 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 02:11:34.928144 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 02:11:35.246266 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 02:11:35.246305 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 02:11:35.258523 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 02:11:35.267558 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 02:11:35.358420 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 02:11:35.359286 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 02:11:35.360232 [INFO] Executing instruction: configure log streaming
2024/02/04 02:11:35.360244 [INFO] log streaming is not enabled
2024/02/04 02:11:35.360247 [INFO] disable log stream
2024/02/04 02:11:35.360262 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 02:11:35.380659 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 02:11:35.400556 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 02:11:35.400581 [INFO] Checking if logs need forced rotation
2024/02/04 02:11:35.400601 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 02:11:35.947141 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 02:11:36.389806 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 02:11:36.391357 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 02:11:36.869626 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 02:11:36.887848 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 02:11:36.887865 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 02:11:36.891423 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 02:11:37.332758 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 02:11:37.332845 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 02:11:37.332892 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 02:11:37.332897 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 02:11:37.332919 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 02:11:37.332930 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 02:11:37.332932 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 02:11:37.332938 [INFO] Executing instruction: stop X-Ray
2024/02/04 02:11:37.332940 [INFO] stop X-Ray ...
2024/02/04 02:11:37.332950 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 02:11:37.345926 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 02:11:37.345957 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 02:11:37.360772 [INFO] Executing instruction: Run Docker Container
2024/02/04 02:11:37.360880 [INFO] stop currently running containers...
2024/02/04 02:11:37.360901 [INFO] detected old app is not docker compose app
2024/02/04 02:11:37.360919 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 02:11:37.413698 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 02:11:37.455812 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 02:11:37.455846 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 02:11:37.473529 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 02:11:37.473563 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 02:11:37.487559 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 02:11:37.487611 [INFO] stopping current container: fe1b11190c1f
2024/02/04 02:11:37.487624 [INFO] Running command /bin/sh -c docker ps | grep -q fe1b11190c1f
2024/02/04 02:11:37.508947 [INFO] Running command /bin/sh -c docker ps | grep -q fe1b11190c1f
2024/02/04 02:11:37.530874 [INFO] Pruning containers ...
2024/02/04 02:11:37.530898 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 02:11:37.552140 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 02:11:37.552228 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 02:11:37.578157 [INFO] Total reclaimed space: 0B

2024/02/04 02:11:37.578183 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 02:11:37.605596 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 02:11:37.605695 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 02:11:37.639548 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 02:11:37.639571 [INFO] Removing /var/app/current/ if it exists
2024/02/04 02:11:37.639727 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 02:11:37.639744 [INFO] detected new app is not docker compose app
2024/02/04 02:11:37.639791 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 02:11:38.127177 [INFO] b8b676d2f16dbdfbc8699a1d8ce62dad2c7f489bbaf779ea5d1ba008197e0315

2024/02/04 02:11:43.129777 [INFO] Running command /bin/sh -c docker ps | grep -q b8b676d2f16d
2024/02/04 02:11:43.155156 [ERROR] docker container quit unexpectedly on 2024-02-04 02:11:43.155138193 +0000 UTC: Command /bin/sh -c docker ps | grep -q b8b676d2f16d failed with error exit status 1
2024/02/04 02:11:43.155183 [INFO] Running command /bin/sh -c docker logs b8b676d2f16d
2024/02/04 02:11:43.179842 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b8b676d2f16d: Command /bin/sh -c docker ps | grep -q b8b676d2f16d failed with error exit status 1 

2024/02/04 02:11:43.179852 [INFO] Executing cleanup logic
2024/02/04 02:11:43.180055 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 03:11:44.403068 [INFO] Starting...
2024/02/04 03:11:44.403236 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 03:11:44.403391 [INFO] reading event message file
2024/02/04 03:11:44.404265 [INFO] Engine received EB command userdata-exec

2024/02/04 03:11:44.409671 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 03:11:44.833697 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 03:11:45.420608 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 03:11:45.420701 [INFO] Engine command: (self-startup)

2024/02/04 03:11:45.420718 [INFO] Downloading EB Application...
2024/02/04 03:11:45.420722 [INFO] Region: eu-west-1
2024/02/04 03:11:45.420724 [INFO] envID: e-8gmkc7rmw6
2024/02/04 03:11:45.420727 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 03:11:45.420731 [INFO] Using manifest file name from command request
2024/02/04 03:11:45.420744 [INFO] Unable to get version manifest file.
2024/02/04 03:11:45.420748 [INFO] Downloading latest manifest available.
2024/02/04 03:11:45.420751 [INFO] Download latest app version manifest
2024/02/04 03:11:45.420905 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 03:11:45.466434 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 03:11:45.466702 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 03:11:45.479242 [INFO] Download successful124bytes downloaded
2024/02/04 03:11:45.479485 [INFO] Trying to read and parse version manifest...
2024/02/04 03:11:45.479714 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 03:11:45.525496 [INFO] Download successful264bytes downloaded
2024/02/04 03:11:45.526427 [INFO] Executing instruction: SyncClock
2024/02/04 03:11:45.526434 [INFO] Starting SyncClock
2024/02/04 03:11:45.526447 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 03:11:45.535155 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 03:11:32 2024
System time     : 0.000000526 seconds slow of NTP time
Last offset     : +0.000000812 seconds
RMS offset      : 0.000003737 seconds
Frequency       : 0.053 ppm fast
Residual freq   : -0.006 ppm
Skew            : 0.300 ppm
Root delay      : 0.000398603 seconds
Root dispersion : 0.000564190 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/04 03:11:45.535187 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 03:11:45.539894 [INFO] 200 OK

2024/02/04 03:11:45.540031 [INFO] Skipping Configure OS
2024/02/04 03:11:45.540139 [INFO] Skipping LockRepo
2024/02/04 03:11:45.540146 [INFO] Skipping GenerateEBBanner
2024/02/04 03:11:45.540152 [INFO] Skipping Install Process Manager
2024/02/04 03:11:45.540158 [INFO] Skipping install syslog
2024/02/04 03:11:45.540164 [INFO] Skipping install cron
2024/02/04 03:11:45.540170 [INFO] Skipping install proxy
2024/02/04 03:11:45.540176 [INFO] Skipping installhealthd
2024/02/04 03:11:45.540181 [INFO] Skipping Install Log Streaming Manager
2024/02/04 03:11:45.540187 [INFO] Skipping install X-Ray
2024/02/04 03:11:45.540192 [INFO] Skipping install Third Party License
2024/02/04 03:11:45.540199 [INFO] Skipping installSqsd
2024/02/04 03:11:45.540204 [INFO] Skipping bootstraphealthd
2024/02/04 03:11:45.540365 [INFO] Skipping Install yum packages
2024/02/04 03:11:45.540375 [INFO] Skipping install docker-compose
2024/02/04 03:11:45.540380 [INFO] Skipping Configure Docker Daemon
2024/02/04 03:11:45.540385 [INFO] Skipping MarkBaked
2024/02/04 03:11:45.540391 [INFO] Skipping TuneSystemSettings
2024/02/04 03:11:45.540400 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 03:11:45.540404 [INFO] Initialize LogRotate files and directories
2024/02/04 03:11:45.557875 [INFO] Skipping BootstrapCFNHup
2024/02/04 03:11:45.557889 [INFO] Executing instruction: StartCFNHup
2024/02/04 03:11:45.557892 [INFO] Start cfn-hup
2024/02/04 03:11:45.557910 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 03:11:45.579632 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 03:11:45.594497 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 03:11:45.594535 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 03:11:45.594539 [INFO] Executing instruction: Start Docker
2024/02/04 03:11:45.594549 [INFO] Starting Docker...
2024/02/04 03:11:45.594633 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 03:11:45.595893 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 03:11:45.597474 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 03:11:45.883221 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 03:11:45.904238 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 03:11:45.904312 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 03:11:45.919680 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 03:11:45.944517 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 03:11:45.959402 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 03:11:46.031281 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 03:11:46.031313 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 03:11:46.379622 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 03:11:46.688967 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 03:11:46.703768 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 03:11:47.076404 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 03:11:47.087189 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 03:11:47.113353 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 03:11:47.136546 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 03:11:48.341235 [INFO] Skipping Setup Docker Options
2024/02/04 03:11:48.341265 [INFO] Skipping MarkBootstrapped
2024/02/04 03:11:48.341269 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 03:11:48.341426 [INFO] Starting SwitchCFNStack
2024/02/04 03:11:48.341435 [INFO] Executing instruction: stopSqsd
2024/02/04 03:11:48.341438 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 03:11:48.341442 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 03:11:48.341446 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 03:11:48.341465 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 03:11:48.893307 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 03:11:48.893348 [INFO] Executing instruction: StagedockerApplication
2024/02/04 03:11:48.893362 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 03:11:48.913113 [INFO] Pruning containers ...
2024/02/04 03:11:48.913144 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 03:11:48.933964 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b8b676d2f16d   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             affectionate_dijkstra

2024/02/04 03:11:48.933997 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 03:11:48.960437 [INFO] Deleted Containers:
b8b676d2f16dbdfbc8699a1d8ce62dad2c7f489bbaf779ea5d1ba008197e0315

Total reclaimed space: 0B

2024/02/04 03:11:48.960460 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 03:11:48.981966 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 03:11:48.982317 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 03:11:48.985719 [INFO] application/json

2024/02/04 03:11:48.985741 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 03:11:49.063924 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 03:11:49.064088 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 03:11:49.065778 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 03:11:49.065801 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 03:11:49.065825 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 03:11:49.065828 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 03:11:49.065832 [INFO] Executing instruction: Generate environment file
2024/02/04 03:11:49.065858 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 03:11:49.065861 [INFO] start build docker app
2024/02/04 03:11:49.066228 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 03:11:49.066232 [INFO] fetching image and ports
2024/02/04 03:11:49.067992 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 03:11:49.068052 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 03:11:49.068061 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 03:11:49.068072 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 03:11:50.063116 [INFO] Login Succeeded

2024/02/04 03:11:50.063135 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 03:11:50.063141 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 03:11:50.063158 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 03:11:50.210910 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 03:11:50.210933 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 03:11:50.210937 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 03:11:50.210940 [INFO] start to build docker image
2024/02/04 03:11:50.210955 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 03:11:50.521228 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 03:11:50.521262 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 03:11:50.521267 [INFO] successfully build docker image
2024/02/04 03:11:50.521270 [INFO] save staging docker image id
2024/02/04 03:11:50.521283 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 03:11:50.545226 [INFO] c176d18fbf65

2024/02/04 03:11:50.545351 [INFO] Executing instruction: configure X-Ray
2024/02/04 03:11:50.545356 [INFO] X-Ray is not enabled.
2024/02/04 03:11:50.545360 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 03:11:50.552971 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 03:11:50.554920 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 03:11:50.569608 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 03:11:50.569637 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 03:11:50.580925 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 03:11:50.595766 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 03:11:50.637822 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 03:11:50.719857 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 03:11:51.036996 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 03:11:51.037086 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 03:11:51.354497 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 03:11:51.371845 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 03:11:51.862724 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 03:11:51.874383 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 03:11:51.894032 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 03:11:52.212018 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 03:11:52.225378 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 03:11:52.674743 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 03:11:52.674796 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 03:11:52.695308 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 03:11:52.707407 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 03:11:52.841830 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 03:11:52.842806 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 03:11:52.844180 [INFO] Executing instruction: configure log streaming
2024/02/04 03:11:52.844192 [INFO] log streaming is not enabled
2024/02/04 03:11:52.844196 [INFO] disable log stream
2024/02/04 03:11:52.844214 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 03:11:52.867415 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 03:11:52.891113 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 03:11:52.891139 [INFO] Checking if logs need forced rotation
2024/02/04 03:11:52.891164 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 03:11:53.466667 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 03:11:53.995361 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 03:11:53.997071 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 03:11:54.044075 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 03:11:54.063573 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 03:11:54.063589 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 03:11:54.063600 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 03:11:54.505312 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 03:11:54.505339 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 03:11:54.505367 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 03:11:54.505370 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 03:11:54.505391 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 03:11:54.505409 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 03:11:54.505412 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 03:11:54.505418 [INFO] Executing instruction: stop X-Ray
2024/02/04 03:11:54.505422 [INFO] stop X-Ray ...
2024/02/04 03:11:54.505438 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 03:11:54.520588 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 03:11:54.520614 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 03:11:54.537181 [INFO] Executing instruction: Run Docker Container
2024/02/04 03:11:54.537217 [INFO] stop currently running containers...
2024/02/04 03:11:54.537243 [INFO] detected old app is not docker compose app
2024/02/04 03:11:54.537258 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 03:11:54.592549 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 03:11:54.613407 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 03:11:54.613451 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 03:11:54.629312 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 03:11:54.629348 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 03:11:54.644912 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 03:11:54.644966 [INFO] stopping current container: b8b676d2f16d
2024/02/04 03:11:54.644979 [INFO] Running command /bin/sh -c docker ps | grep -q b8b676d2f16d
2024/02/04 03:11:54.668916 [INFO] Running command /bin/sh -c docker ps | grep -q b8b676d2f16d
2024/02/04 03:11:54.691073 [INFO] Pruning containers ...
2024/02/04 03:11:54.691096 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 03:11:54.710976 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 03:11:54.711008 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 03:11:54.758149 [INFO] Total reclaimed space: 0B

2024/02/04 03:11:54.758212 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 03:11:54.781303 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 03:11:54.781332 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 03:11:54.800382 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 03:11:54.800403 [INFO] Removing /var/app/current/ if it exists
2024/02/04 03:11:54.800560 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 03:11:54.800577 [INFO] detected new app is not docker compose app
2024/02/04 03:11:54.800628 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 03:11:55.273206 [INFO] 640061c83c7d0b813425893fa4befd9357e592afce4bfaa08ccdfe799b2e2066

2024/02/04 03:12:00.273903 [INFO] Running command /bin/sh -c docker ps | grep -q 640061c83c7d
2024/02/04 03:12:00.324242 [ERROR] docker container quit unexpectedly on 2024-02-04 03:12:00.324227618 +0000 UTC: Command /bin/sh -c docker ps | grep -q 640061c83c7d failed with error exit status 1
2024/02/04 03:12:00.324276 [INFO] Running command /bin/sh -c docker logs 640061c83c7d
2024/02/04 03:12:00.388424 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 640061c83c7d: Command /bin/sh -c docker ps | grep -q 640061c83c7d failed with error exit status 1 

2024/02/04 03:12:00.388435 [INFO] Executing cleanup logic
2024/02/04 03:12:00.388704 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 04:12:01.588944 [INFO] Starting...
2024/02/04 04:12:01.588989 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 04:12:01.589019 [INFO] reading event message file
2024/02/04 04:12:01.590044 [INFO] Engine received EB command userdata-exec

2024/02/04 04:12:01.597423 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 04:12:02.581551 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 04:12:03.213428 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 04:12:03.213518 [INFO] Engine command: (self-startup)

2024/02/04 04:12:03.213527 [INFO] Downloading EB Application...
2024/02/04 04:12:03.213531 [INFO] Region: eu-west-1
2024/02/04 04:12:03.213534 [INFO] envID: e-8gmkc7rmw6
2024/02/04 04:12:03.213538 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 04:12:03.213541 [INFO] Using manifest file name from command request
2024/02/04 04:12:03.213555 [INFO] Unable to get version manifest file.
2024/02/04 04:12:03.213558 [INFO] Downloading latest manifest available.
2024/02/04 04:12:03.213561 [INFO] Download latest app version manifest
2024/02/04 04:12:03.213688 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 04:12:03.252956 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 04:12:03.253142 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 04:12:03.263131 [INFO] Download successful124bytes downloaded
2024/02/04 04:12:03.263278 [INFO] Trying to read and parse version manifest...
2024/02/04 04:12:03.263416 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 04:12:03.293495 [INFO] Download successful264bytes downloaded
2024/02/04 04:12:03.296074 [INFO] Executing instruction: SyncClock
2024/02/04 04:12:03.296082 [INFO] Starting SyncClock
2024/02/04 04:12:03.296098 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 04:12:03.301871 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 04:11:54 2024
System time     : 0.000001504 seconds fast of NTP time
Last offset     : +0.000000646 seconds
RMS offset      : 0.000001983 seconds
Frequency       : 0.132 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.051 ppm
Root delay      : 0.000447116 seconds
Root dispersion : 0.000461255 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/04 04:12:03.301904 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 04:12:03.306181 [INFO] 200 OK

2024/02/04 04:12:03.306310 [INFO] Skipping Configure OS
2024/02/04 04:12:03.306316 [INFO] Skipping LockRepo
2024/02/04 04:12:03.306320 [INFO] Skipping GenerateEBBanner
2024/02/04 04:12:03.306324 [INFO] Skipping Install Process Manager
2024/02/04 04:12:03.306328 [INFO] Skipping install syslog
2024/02/04 04:12:03.306332 [INFO] Skipping install cron
2024/02/04 04:12:03.306336 [INFO] Skipping install proxy
2024/02/04 04:12:03.306340 [INFO] Skipping installhealthd
2024/02/04 04:12:03.306344 [INFO] Skipping Install Log Streaming Manager
2024/02/04 04:12:03.306348 [INFO] Skipping install X-Ray
2024/02/04 04:12:03.306355 [INFO] Skipping install Third Party License
2024/02/04 04:12:03.306360 [INFO] Skipping installSqsd
2024/02/04 04:12:03.306364 [INFO] Skipping bootstraphealthd
2024/02/04 04:12:03.306367 [INFO] Skipping Install yum packages
2024/02/04 04:12:03.306371 [INFO] Skipping install docker-compose
2024/02/04 04:12:03.306377 [INFO] Skipping Configure Docker Daemon
2024/02/04 04:12:03.306381 [INFO] Skipping MarkBaked
2024/02/04 04:12:03.306385 [INFO] Skipping TuneSystemSettings
2024/02/04 04:12:03.306388 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 04:12:03.306390 [INFO] Initialize LogRotate files and directories
2024/02/04 04:12:03.321080 [INFO] Skipping BootstrapCFNHup
2024/02/04 04:12:03.321102 [INFO] Executing instruction: StartCFNHup
2024/02/04 04:12:03.321107 [INFO] Start cfn-hup
2024/02/04 04:12:03.321143 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 04:12:03.336372 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 04:12:03.347442 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 04:12:03.347487 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 04:12:03.347491 [INFO] Executing instruction: Start Docker
2024/02/04 04:12:03.347494 [INFO] Starting Docker...
2024/02/04 04:12:03.347579 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 04:12:03.348623 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 04:12:03.349565 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 04:12:03.670299 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 04:12:03.689602 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 04:12:03.689636 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 04:12:03.702792 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 04:12:03.712632 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 04:12:03.722978 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 04:12:03.813816 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 04:12:03.813913 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 04:12:04.229000 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 04:12:04.544500 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 04:12:04.561786 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 04:12:04.909984 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 04:12:04.919690 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 04:12:04.933695 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 04:12:04.943613 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 04:12:06.291835 [INFO] Skipping Setup Docker Options
2024/02/04 04:12:06.291855 [INFO] Skipping MarkBootstrapped
2024/02/04 04:12:06.291859 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 04:12:06.291979 [INFO] Starting SwitchCFNStack
2024/02/04 04:12:06.291985 [INFO] Executing instruction: stopSqsd
2024/02/04 04:12:06.291989 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 04:12:06.291992 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 04:12:06.291996 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 04:12:06.292015 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 04:12:06.800767 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 04:12:06.800847 [INFO] Executing instruction: StagedockerApplication
2024/02/04 04:12:06.800859 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 04:12:06.822087 [INFO] Pruning containers ...
2024/02/04 04:12:06.822117 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 04:12:06.843406 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
640061c83c7d   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             lucid_mayer

2024/02/04 04:12:06.843435 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 04:12:06.867747 [INFO] Deleted Containers:
640061c83c7d0b813425893fa4befd9357e592afce4bfaa08ccdfe799b2e2066

Total reclaimed space: 0B

2024/02/04 04:12:06.867772 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 04:12:06.886243 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 04:12:06.886471 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 04:12:06.889338 [INFO] application/json

2024/02/04 04:12:06.889358 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 04:12:06.959874 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 04:12:06.960059 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 04:12:06.961681 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 04:12:06.961710 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 04:12:06.961728 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 04:12:06.961732 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 04:12:06.961739 [INFO] Executing instruction: Generate environment file
2024/02/04 04:12:06.961768 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 04:12:06.961772 [INFO] start build docker app
2024/02/04 04:12:06.962234 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 04:12:06.962239 [INFO] fetching image and ports
2024/02/04 04:12:06.964272 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 04:12:06.964326 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 04:12:06.964335 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 04:12:06.964344 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 04:12:07.903504 [INFO] Login Succeeded

2024/02/04 04:12:07.903524 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 04:12:07.903532 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 04:12:07.903551 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 04:12:08.059610 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 04:12:08.059634 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 04:12:08.059644 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 04:12:08.059649 [INFO] start to build docker image
2024/02/04 04:12:08.059669 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 04:12:08.303493 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 04:12:08.303517 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 04:12:08.303521 [INFO] successfully build docker image
2024/02/04 04:12:08.303524 [INFO] save staging docker image id
2024/02/04 04:12:08.303539 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 04:12:08.324480 [INFO] c176d18fbf65

2024/02/04 04:12:08.324599 [INFO] Executing instruction: configure X-Ray
2024/02/04 04:12:08.324604 [INFO] X-Ray is not enabled.
2024/02/04 04:12:08.324607 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 04:12:08.330030 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 04:12:08.331680 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 04:12:08.342890 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 04:12:08.342921 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 04:12:08.352707 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 04:12:08.362508 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 04:12:08.372545 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 04:12:08.437870 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 04:12:08.791216 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 04:12:08.791305 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 04:12:09.091088 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 04:12:09.103731 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 04:12:09.412318 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 04:12:09.423161 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 04:12:09.435001 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 04:12:09.805096 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 04:12:09.816559 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 04:12:10.166885 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 04:12:10.166925 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 04:12:10.179862 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 04:12:10.189159 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 04:12:10.274229 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 04:12:10.275023 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 04:12:10.275978 [INFO] Executing instruction: configure log streaming
2024/02/04 04:12:10.275989 [INFO] log streaming is not enabled
2024/02/04 04:12:10.275993 [INFO] disable log stream
2024/02/04 04:12:10.276007 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 04:12:10.297299 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 04:12:10.319852 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 04:12:10.319880 [INFO] Checking if logs need forced rotation
2024/02/04 04:12:10.319905 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 04:12:11.133590 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 04:12:11.506278 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 04:12:11.507872 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 04:12:11.908064 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 04:12:11.925462 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 04:12:11.925478 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 04:12:11.925489 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 04:12:12.296047 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 04:12:12.296071 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 04:12:12.296104 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 04:12:12.296109 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 04:12:12.296129 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 04:12:12.296140 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 04:12:12.296142 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 04:12:12.296147 [INFO] Executing instruction: stop X-Ray
2024/02/04 04:12:12.296150 [INFO] stop X-Ray ...
2024/02/04 04:12:12.296160 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 04:12:12.319714 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 04:12:12.319747 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 04:12:12.344375 [INFO] Executing instruction: Run Docker Container
2024/02/04 04:12:12.344419 [INFO] stop currently running containers...
2024/02/04 04:12:12.344429 [INFO] detected old app is not docker compose app
2024/02/04 04:12:12.344441 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 04:12:12.363462 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 04:12:12.411828 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 04:12:12.411860 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 04:12:12.430034 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 04:12:12.430098 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 04:12:12.450212 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 04:12:12.450280 [INFO] stopping current container: 640061c83c7d
2024/02/04 04:12:12.450294 [INFO] Running command /bin/sh -c docker ps | grep -q 640061c83c7d
2024/02/04 04:12:12.490047 [INFO] Running command /bin/sh -c docker ps | grep -q 640061c83c7d
2024/02/04 04:12:12.511519 [INFO] Pruning containers ...
2024/02/04 04:12:12.511546 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 04:12:12.530057 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 04:12:12.530092 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 04:12:12.550144 [INFO] Total reclaimed space: 0B

2024/02/04 04:12:12.550174 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 04:12:12.568375 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 04:12:12.568405 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 04:12:12.616131 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 04:12:12.616153 [INFO] Removing /var/app/current/ if it exists
2024/02/04 04:12:12.616320 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 04:12:12.616338 [INFO] detected new app is not docker compose app
2024/02/04 04:12:12.616386 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 04:12:13.079259 [INFO] 5e2b1b992c6ba2854870b2624dea90f958340218b7809b663f69feb25a42f317

2024/02/04 04:12:18.081426 [INFO] Running command /bin/sh -c docker ps | grep -q 5e2b1b992c6b
2024/02/04 04:12:18.104428 [ERROR] docker container quit unexpectedly on 2024-02-04 04:12:18.104417409 +0000 UTC: Command /bin/sh -c docker ps | grep -q 5e2b1b992c6b failed with error exit status 1
2024/02/04 04:12:18.104452 [INFO] Running command /bin/sh -c docker logs 5e2b1b992c6b
2024/02/04 04:12:18.125921 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 5e2b1b992c6b: Command /bin/sh -c docker ps | grep -q 5e2b1b992c6b failed with error exit status 1 

2024/02/04 04:12:18.125931 [INFO] Executing cleanup logic
2024/02/04 04:12:18.126148 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 05:12:19.115679 [INFO] Starting...
2024/02/04 05:12:19.115716 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 05:12:19.115739 [INFO] reading event message file
2024/02/04 05:12:19.116965 [INFO] Engine received EB command userdata-exec

2024/02/04 05:12:19.122377 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 05:12:19.564975 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 05:12:20.042883 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 05:12:20.042996 [INFO] Engine command: (self-startup)

2024/02/04 05:12:20.043006 [INFO] Downloading EB Application...
2024/02/04 05:12:20.043010 [INFO] Region: eu-west-1
2024/02/04 05:12:20.043013 [INFO] envID: e-8gmkc7rmw6
2024/02/04 05:12:20.043016 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 05:12:20.043029 [INFO] Using manifest file name from command request
2024/02/04 05:12:20.043042 [INFO] Unable to get version manifest file.
2024/02/04 05:12:20.043045 [INFO] Downloading latest manifest available.
2024/02/04 05:12:20.043047 [INFO] Download latest app version manifest
2024/02/04 05:12:20.043144 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 05:12:20.084913 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 05:12:20.085128 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 05:12:20.102833 [INFO] Download successful124bytes downloaded
2024/02/04 05:12:20.103087 [INFO] Trying to read and parse version manifest...
2024/02/04 05:12:20.103176 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 05:12:20.137927 [INFO] Download successful264bytes downloaded
2024/02/04 05:12:20.138606 [INFO] Executing instruction: SyncClock
2024/02/04 05:12:20.138612 [INFO] Starting SyncClock
2024/02/04 05:12:20.138623 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 05:12:20.154001 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 05:12:19 2024
System time     : 0.000002233 seconds slow of NTP time
Last offset     : -0.000001595 seconds
RMS offset      : 0.000002059 seconds
Frequency       : 0.291 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.050 ppm
Root delay      : 0.000412788 seconds
Root dispersion : 0.000408433 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/04 05:12:20.154029 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 05:12:20.159622 [INFO] 200 OK

2024/02/04 05:12:20.159730 [INFO] Skipping Configure OS
2024/02/04 05:12:20.159736 [INFO] Skipping LockRepo
2024/02/04 05:12:20.159740 [INFO] Skipping GenerateEBBanner
2024/02/04 05:12:20.159745 [INFO] Skipping Install Process Manager
2024/02/04 05:12:20.159749 [INFO] Skipping install syslog
2024/02/04 05:12:20.159753 [INFO] Skipping install cron
2024/02/04 05:12:20.159757 [INFO] Skipping install proxy
2024/02/04 05:12:20.159761 [INFO] Skipping installhealthd
2024/02/04 05:12:20.159765 [INFO] Skipping Install Log Streaming Manager
2024/02/04 05:12:20.159771 [INFO] Skipping install X-Ray
2024/02/04 05:12:20.159777 [INFO] Skipping install Third Party License
2024/02/04 05:12:20.159784 [INFO] Skipping installSqsd
2024/02/04 05:12:20.159790 [INFO] Skipping bootstraphealthd
2024/02/04 05:12:20.159793 [INFO] Skipping Install yum packages
2024/02/04 05:12:20.159797 [INFO] Skipping install docker-compose
2024/02/04 05:12:20.159804 [INFO] Skipping Configure Docker Daemon
2024/02/04 05:12:20.159808 [INFO] Skipping MarkBaked
2024/02/04 05:12:20.159812 [INFO] Skipping TuneSystemSettings
2024/02/04 05:12:20.159815 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 05:12:20.159817 [INFO] Initialize LogRotate files and directories
2024/02/04 05:12:20.178028 [INFO] Skipping BootstrapCFNHup
2024/02/04 05:12:20.178043 [INFO] Executing instruction: StartCFNHup
2024/02/04 05:12:20.178046 [INFO] Start cfn-hup
2024/02/04 05:12:20.178065 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 05:12:20.195613 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 05:12:20.205562 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 05:12:20.205597 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 05:12:20.205600 [INFO] Executing instruction: Start Docker
2024/02/04 05:12:20.205602 [INFO] Starting Docker...
2024/02/04 05:12:20.205665 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 05:12:20.206626 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 05:12:20.207662 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 05:12:20.632412 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 05:12:20.658122 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 05:12:20.658158 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 05:12:20.673132 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 05:12:20.682823 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 05:12:20.703053 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 05:12:20.789781 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 05:12:20.789879 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 05:12:21.108727 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 05:12:21.476489 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 05:12:21.492987 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 05:12:21.896363 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 05:12:21.909212 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 05:12:21.929868 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 05:12:21.956294 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 05:12:23.198914 [INFO] Skipping Setup Docker Options
2024/02/04 05:12:23.198940 [INFO] Skipping MarkBootstrapped
2024/02/04 05:12:23.198944 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 05:12:23.199174 [INFO] Starting SwitchCFNStack
2024/02/04 05:12:23.199183 [INFO] Executing instruction: stopSqsd
2024/02/04 05:12:23.199188 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 05:12:23.199191 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 05:12:23.199195 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 05:12:23.199215 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 05:12:23.611442 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 05:12:23.611468 [INFO] Executing instruction: StagedockerApplication
2024/02/04 05:12:23.611480 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 05:12:23.633436 [INFO] Pruning containers ...
2024/02/04 05:12:23.633533 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 05:12:23.656420 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
5e2b1b992c6b   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             strange_franklin

2024/02/04 05:12:23.656449 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 05:12:23.683886 [INFO] Deleted Containers:
5e2b1b992c6ba2854870b2624dea90f958340218b7809b663f69feb25a42f317

Total reclaimed space: 0B

2024/02/04 05:12:23.683908 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 05:12:23.723516 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 05:12:23.723782 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 05:12:23.726849 [INFO] application/json

2024/02/04 05:12:23.726870 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 05:12:23.794734 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/04 05:12:23.794910 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 05:12:23.796189 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 05:12:23.796217 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 05:12:23.796232 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 05:12:23.796235 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 05:12:23.796239 [INFO] Executing instruction: Generate environment file
2024/02/04 05:12:23.796264 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 05:12:23.796267 [INFO] start build docker app
2024/02/04 05:12:23.796747 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 05:12:23.796751 [INFO] fetching image and ports
2024/02/04 05:12:23.798222 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 05:12:23.798270 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 05:12:23.798278 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 05:12:23.798286 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 05:12:24.835937 [INFO] Login Succeeded

2024/02/04 05:12:24.835976 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 05:12:24.835982 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 05:12:24.835999 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 05:12:24.970790 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 05:12:24.970817 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 05:12:24.970820 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 05:12:24.970823 [INFO] start to build docker image
2024/02/04 05:12:24.970838 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 05:12:25.343166 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 05:12:25.343198 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 05:12:25.343203 [INFO] successfully build docker image
2024/02/04 05:12:25.343206 [INFO] save staging docker image id
2024/02/04 05:12:25.343223 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 05:12:25.391868 [INFO] c176d18fbf65

2024/02/04 05:12:25.392041 [INFO] Executing instruction: configure X-Ray
2024/02/04 05:12:25.392049 [INFO] X-Ray is not enabled.
2024/02/04 05:12:25.392053 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 05:12:25.399239 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 05:12:25.401071 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 05:12:25.417092 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 05:12:25.417135 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 05:12:25.434392 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 05:12:25.445819 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 05:12:25.468752 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 05:12:25.550184 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 05:12:25.867903 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 05:12:25.867985 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 05:12:26.133337 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 05:12:26.145709 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 05:12:26.478937 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 05:12:26.492048 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 05:12:26.507272 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 05:12:26.827587 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 05:12:26.838928 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 05:12:27.182026 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 05:12:27.182063 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 05:12:27.193672 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 05:12:27.203152 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 05:12:27.289742 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 05:12:27.290639 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 05:12:27.291514 [INFO] Executing instruction: configure log streaming
2024/02/04 05:12:27.291526 [INFO] log streaming is not enabled
2024/02/04 05:12:27.291530 [INFO] disable log stream
2024/02/04 05:12:27.291544 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 05:12:27.309283 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 05:12:27.326358 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 05:12:27.326382 [INFO] Checking if logs need forced rotation
2024/02/04 05:12:27.326403 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 05:12:27.883399 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 05:12:28.319419 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 05:12:28.321442 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 05:12:28.429886 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 05:12:28.446783 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 05:12:28.446799 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 05:12:28.446812 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 05:12:28.909058 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 05:12:28.909377 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 05:12:28.909576 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 05:12:28.909585 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 05:12:28.909837 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 05:12:28.909857 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 05:12:28.909860 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 05:12:28.909867 [INFO] Executing instruction: stop X-Ray
2024/02/04 05:12:28.909870 [INFO] stop X-Ray ...
2024/02/04 05:12:28.909879 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 05:12:28.930366 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 05:12:28.930403 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 05:12:28.946601 [INFO] Executing instruction: Run Docker Container
2024/02/04 05:12:28.946693 [INFO] stop currently running containers...
2024/02/04 05:12:28.946707 [INFO] detected old app is not docker compose app
2024/02/04 05:12:28.946721 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 05:12:28.972561 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 05:12:28.988698 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 05:12:28.988743 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 05:12:29.003652 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 05:12:29.003682 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 05:12:29.018829 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 05:12:29.018882 [INFO] stopping current container: 5e2b1b992c6b
2024/02/04 05:12:29.018896 [INFO] Running command /bin/sh -c docker ps | grep -q 5e2b1b992c6b
2024/02/04 05:12:29.041911 [INFO] Running command /bin/sh -c docker ps | grep -q 5e2b1b992c6b
2024/02/04 05:12:29.062956 [INFO] Pruning containers ...
2024/02/04 05:12:29.062979 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 05:12:29.082806 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 05:12:29.082834 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 05:12:29.102549 [INFO] Total reclaimed space: 0B

2024/02/04 05:12:29.102578 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 05:12:29.122943 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 05:12:29.122970 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 05:12:29.147888 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 05:12:29.147913 [INFO] Removing /var/app/current/ if it exists
2024/02/04 05:12:29.148076 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 05:12:29.148096 [INFO] detected new app is not docker compose app
2024/02/04 05:12:29.148151 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 05:12:29.659928 [INFO] bf76dd7943e7a364ff615664a13067c83f5dc15873c74f70f9355a6f76bf1b8e

2024/02/04 05:12:34.660433 [INFO] Running command /bin/sh -c docker ps | grep -q bf76dd7943e7
2024/02/04 05:12:34.689604 [ERROR] docker container quit unexpectedly on 2024-02-04 05:12:34.689593812 +0000 UTC: Command /bin/sh -c docker ps | grep -q bf76dd7943e7 failed with error exit status 1
2024/02/04 05:12:34.689630 [INFO] Running command /bin/sh -c docker logs bf76dd7943e7
2024/02/04 05:12:34.720251 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container bf76dd7943e7: Command /bin/sh -c docker ps | grep -q bf76dd7943e7 failed with error exit status 1 

2024/02/04 05:12:34.720260 [INFO] Executing cleanup logic
2024/02/04 05:12:34.720489 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 06:12:35.643425 [INFO] Starting...
2024/02/04 06:12:35.643475 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 06:12:35.643505 [INFO] reading event message file
2024/02/04 06:12:35.644339 [INFO] Engine received EB command userdata-exec

2024/02/04 06:12:35.649649 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 06:12:36.056732 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 06:12:36.537186 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 06:12:36.537276 [INFO] Engine command: (self-startup)

2024/02/04 06:12:36.537285 [INFO] Downloading EB Application...
2024/02/04 06:12:36.537289 [INFO] Region: eu-west-1
2024/02/04 06:12:36.537292 [INFO] envID: e-8gmkc7rmw6
2024/02/04 06:12:36.537295 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 06:12:36.537299 [INFO] Using manifest file name from command request
2024/02/04 06:12:36.537314 [INFO] Unable to get version manifest file.
2024/02/04 06:12:36.537317 [INFO] Downloading latest manifest available.
2024/02/04 06:12:36.537319 [INFO] Download latest app version manifest
2024/02/04 06:12:36.537436 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 06:12:36.580120 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 06:12:36.580345 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 06:12:36.593755 [INFO] Download successful124bytes downloaded
2024/02/04 06:12:36.593904 [INFO] Trying to read and parse version manifest...
2024/02/04 06:12:36.593975 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 06:12:36.626425 [INFO] Download successful264bytes downloaded
2024/02/04 06:12:36.626803 [INFO] Executing instruction: SyncClock
2024/02/04 06:12:36.626810 [INFO] Starting SyncClock
2024/02/04 06:12:36.626823 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 06:12:36.634550 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 06:12:26 2024
System time     : 0.000001690 seconds fast of NTP time
Last offset     : +0.000001566 seconds
RMS offset      : 0.000001032 seconds
Frequency       : 0.297 ppm fast
Residual freq   : +0.001 ppm
Skew            : 0.031 ppm
Root delay      : 0.000433365 seconds
Root dispersion : 0.000439224 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/04 06:12:36.634587 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 06:12:36.639321 [INFO] 200 OK

2024/02/04 06:12:36.639415 [INFO] Skipping Configure OS
2024/02/04 06:12:36.639421 [INFO] Skipping LockRepo
2024/02/04 06:12:36.639425 [INFO] Skipping GenerateEBBanner
2024/02/04 06:12:36.639429 [INFO] Skipping Install Process Manager
2024/02/04 06:12:36.639433 [INFO] Skipping install syslog
2024/02/04 06:12:36.639437 [INFO] Skipping install cron
2024/02/04 06:12:36.639441 [INFO] Skipping install proxy
2024/02/04 06:12:36.639445 [INFO] Skipping installhealthd
2024/02/04 06:12:36.639448 [INFO] Skipping Install Log Streaming Manager
2024/02/04 06:12:36.639452 [INFO] Skipping install X-Ray
2024/02/04 06:12:36.639456 [INFO] Skipping install Third Party License
2024/02/04 06:12:36.639461 [INFO] Skipping installSqsd
2024/02/04 06:12:36.639465 [INFO] Skipping bootstraphealthd
2024/02/04 06:12:36.639469 [INFO] Skipping Install yum packages
2024/02/04 06:12:36.639473 [INFO] Skipping install docker-compose
2024/02/04 06:12:36.639477 [INFO] Skipping Configure Docker Daemon
2024/02/04 06:12:36.639482 [INFO] Skipping MarkBaked
2024/02/04 06:12:36.639486 [INFO] Skipping TuneSystemSettings
2024/02/04 06:12:36.639489 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 06:12:36.639491 [INFO] Initialize LogRotate files and directories
2024/02/04 06:12:36.653871 [INFO] Skipping BootstrapCFNHup
2024/02/04 06:12:36.653882 [INFO] Executing instruction: StartCFNHup
2024/02/04 06:12:36.653885 [INFO] Start cfn-hup
2024/02/04 06:12:36.653901 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 06:12:36.675085 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 06:12:36.690224 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 06:12:36.690260 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 06:12:36.690265 [INFO] Executing instruction: Start Docker
2024/02/04 06:12:36.690268 [INFO] Starting Docker...
2024/02/04 06:12:36.690338 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 06:12:36.691553 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 06:12:36.692892 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 06:12:37.131390 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 06:12:37.147500 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 06:12:37.147533 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 06:12:37.163928 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 06:12:37.174256 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 06:12:37.184588 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 06:12:37.265147 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 06:12:37.265199 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 06:12:37.561587 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 06:12:37.853812 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 06:12:37.865993 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 06:12:38.201125 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 06:12:38.210370 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 06:12:38.224658 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 06:12:38.244327 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 06:12:39.513689 [INFO] Skipping Setup Docker Options
2024/02/04 06:12:39.513715 [INFO] Skipping MarkBootstrapped
2024/02/04 06:12:39.513720 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 06:12:39.513839 [INFO] Starting SwitchCFNStack
2024/02/04 06:12:39.513844 [INFO] Executing instruction: stopSqsd
2024/02/04 06:12:39.513848 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 06:12:39.513852 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 06:12:39.513855 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 06:12:39.513877 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 06:12:39.927277 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 06:12:39.927362 [INFO] Executing instruction: StagedockerApplication
2024/02/04 06:12:39.927375 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 06:12:39.952877 [INFO] Pruning containers ...
2024/02/04 06:12:39.952905 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 06:12:39.977959 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
bf76dd7943e7   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             unruffled_tu

2024/02/04 06:12:39.977991 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 06:12:40.005263 [INFO] Deleted Containers:
bf76dd7943e7a364ff615664a13067c83f5dc15873c74f70f9355a6f76bf1b8e

Total reclaimed space: 0B

2024/02/04 06:12:40.005289 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 06:12:40.025718 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 06:12:40.025977 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 06:12:40.029086 [INFO] application/json

2024/02/04 06:12:40.029172 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 06:12:40.110028 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 06:12:40.110213 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 06:12:40.111605 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 06:12:40.111633 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 06:12:40.111653 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 06:12:40.111655 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 06:12:40.111660 [INFO] Executing instruction: Generate environment file
2024/02/04 06:12:40.111687 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 06:12:40.111692 [INFO] start build docker app
2024/02/04 06:12:40.112125 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 06:12:40.112128 [INFO] fetching image and ports
2024/02/04 06:12:40.113702 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 06:12:40.113768 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 06:12:40.113780 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 06:12:40.113796 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 06:12:40.973072 [INFO] Login Succeeded

2024/02/04 06:12:40.973093 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 06:12:40.973100 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 06:12:40.973121 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 06:12:41.173279 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 06:12:41.173303 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 06:12:41.173307 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 06:12:41.173310 [INFO] start to build docker image
2024/02/04 06:12:41.173329 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 06:12:41.468044 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 06:12:41.468068 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 06:12:41.468074 [INFO] successfully build docker image
2024/02/04 06:12:41.468077 [INFO] save staging docker image id
2024/02/04 06:12:41.468091 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 06:12:41.492273 [INFO] c176d18fbf65

2024/02/04 06:12:41.492395 [INFO] Executing instruction: configure X-Ray
2024/02/04 06:12:41.492401 [INFO] X-Ray is not enabled.
2024/02/04 06:12:41.492403 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 06:12:41.497901 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 06:12:41.499367 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 06:12:41.513187 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 06:12:41.513211 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 06:12:41.525180 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 06:12:41.534651 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 06:12:41.545072 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 06:12:41.667976 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 06:12:41.991459 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 06:12:41.991542 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 06:12:42.350559 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 06:12:42.369741 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 06:12:42.710408 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 06:12:42.720446 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 06:12:42.730023 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 06:12:43.062260 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 06:12:43.074510 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 06:12:43.434986 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 06:12:43.435176 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 06:12:43.451331 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 06:12:43.461297 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 06:12:43.572650 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 06:12:43.573653 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 06:12:43.574508 [INFO] Executing instruction: configure log streaming
2024/02/04 06:12:43.574518 [INFO] log streaming is not enabled
2024/02/04 06:12:43.574522 [INFO] disable log stream
2024/02/04 06:12:43.574538 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 06:12:43.593401 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 06:12:43.619086 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 06:12:43.619111 [INFO] Checking if logs need forced rotation
2024/02/04 06:12:43.619132 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 06:12:44.246406 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 06:12:44.705036 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 06:12:44.706687 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 06:12:44.791186 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 06:12:44.809962 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 06:12:44.809979 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 06:12:44.809990 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 06:12:45.349814 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 06:12:45.349839 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 06:12:45.349863 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 06:12:45.349866 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 06:12:45.349889 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 06:12:45.349903 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 06:12:45.349906 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 06:12:45.349911 [INFO] Executing instruction: stop X-Ray
2024/02/04 06:12:45.349913 [INFO] stop X-Ray ...
2024/02/04 06:12:45.349923 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 06:12:45.365988 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 06:12:45.366016 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 06:12:45.382794 [INFO] Executing instruction: Run Docker Container
2024/02/04 06:12:45.382898 [INFO] stop currently running containers...
2024/02/04 06:12:45.382912 [INFO] detected old app is not docker compose app
2024/02/04 06:12:45.382925 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 06:12:45.422418 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 06:12:45.441615 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 06:12:45.441650 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 06:12:45.457407 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 06:12:45.457442 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 06:12:45.472300 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 06:12:45.472351 [INFO] stopping current container: bf76dd7943e7
2024/02/04 06:12:45.472364 [INFO] Running command /bin/sh -c docker ps | grep -q bf76dd7943e7
2024/02/04 06:12:45.496233 [INFO] Running command /bin/sh -c docker ps | grep -q bf76dd7943e7
2024/02/04 06:12:45.519995 [INFO] Pruning containers ...
2024/02/04 06:12:45.520019 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 06:12:45.557400 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 06:12:45.557434 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 06:12:45.583652 [INFO] Total reclaimed space: 0B

2024/02/04 06:12:45.583678 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 06:12:45.606213 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 06:12:45.606269 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 06:12:45.627666 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 06:12:45.627690 [INFO] Removing /var/app/current/ if it exists
2024/02/04 06:12:45.627844 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 06:12:45.627861 [INFO] detected new app is not docker compose app
2024/02/04 06:12:45.627908 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 06:12:46.073106 [INFO] 09a8a905d4e19cec307a591644d0b5205a70c910d7db28f763a04d7d5138180c

2024/02/04 06:12:51.073616 [INFO] Running command /bin/sh -c docker ps | grep -q 09a8a905d4e1
2024/02/04 06:12:51.102480 [ERROR] docker container quit unexpectedly on 2024-02-04 06:12:51.102468206 +0000 UTC: Command /bin/sh -c docker ps | grep -q 09a8a905d4e1 failed with error exit status 1
2024/02/04 06:12:51.102514 [INFO] Running command /bin/sh -c docker logs 09a8a905d4e1
2024/02/04 06:12:51.129802 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 09a8a905d4e1: Command /bin/sh -c docker ps | grep -q 09a8a905d4e1 failed with error exit status 1 

2024/02/04 06:12:51.129817 [INFO] Executing cleanup logic
2024/02/04 06:12:51.130074 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 07:12:52.171774 [INFO] Starting...
2024/02/04 07:12:52.171820 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 07:12:52.171847 [INFO] reading event message file
2024/02/04 07:12:52.172641 [INFO] Engine received EB command userdata-exec

2024/02/04 07:12:52.178193 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 07:12:52.573534 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 07:12:53.102304 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 07:12:53.102410 [INFO] Engine command: (self-startup)

2024/02/04 07:12:53.102419 [INFO] Downloading EB Application...
2024/02/04 07:12:53.102421 [INFO] Region: eu-west-1
2024/02/04 07:12:53.102424 [INFO] envID: e-8gmkc7rmw6
2024/02/04 07:12:53.102426 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 07:12:53.102429 [INFO] Using manifest file name from command request
2024/02/04 07:12:53.102443 [INFO] Unable to get version manifest file.
2024/02/04 07:12:53.102446 [INFO] Downloading latest manifest available.
2024/02/04 07:12:53.102510 [INFO] Download latest app version manifest
2024/02/04 07:12:53.102671 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 07:12:53.137994 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 07:12:53.138507 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 07:12:53.149482 [INFO] Download successful124bytes downloaded
2024/02/04 07:12:53.149709 [INFO] Trying to read and parse version manifest...
2024/02/04 07:12:53.149786 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 07:12:53.172458 [INFO] Download successful264bytes downloaded
2024/02/04 07:12:53.172840 [INFO] Executing instruction: SyncClock
2024/02/04 07:12:53.172847 [INFO] Starting SyncClock
2024/02/04 07:12:53.172862 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 07:12:53.179521 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 07:12:49 2024
System time     : 0.000000293 seconds fast of NTP time
Last offset     : -0.000001106 seconds
RMS offset      : 0.000002911 seconds
Frequency       : 0.133 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.082 ppm
Root delay      : 0.000426123 seconds
Root dispersion : 0.000452581 seconds
Update interval : 16.3 seconds
Leap status     : Normal

2024/02/04 07:12:53.179542 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 07:12:53.183661 [INFO] 200 OK

2024/02/04 07:12:53.183758 [INFO] Skipping Configure OS
2024/02/04 07:12:53.183763 [INFO] Skipping LockRepo
2024/02/04 07:12:53.183767 [INFO] Skipping GenerateEBBanner
2024/02/04 07:12:53.183771 [INFO] Skipping Install Process Manager
2024/02/04 07:12:53.183775 [INFO] Skipping install syslog
2024/02/04 07:12:53.183779 [INFO] Skipping install cron
2024/02/04 07:12:53.183783 [INFO] Skipping install proxy
2024/02/04 07:12:53.183786 [INFO] Skipping installhealthd
2024/02/04 07:12:53.183790 [INFO] Skipping Install Log Streaming Manager
2024/02/04 07:12:53.183794 [INFO] Skipping install X-Ray
2024/02/04 07:12:53.183798 [INFO] Skipping install Third Party License
2024/02/04 07:12:53.183803 [INFO] Skipping installSqsd
2024/02/04 07:12:53.183806 [INFO] Skipping bootstraphealthd
2024/02/04 07:12:53.183812 [INFO] Skipping Install yum packages
2024/02/04 07:12:53.183816 [INFO] Skipping install docker-compose
2024/02/04 07:12:53.183821 [INFO] Skipping Configure Docker Daemon
2024/02/04 07:12:53.183824 [INFO] Skipping MarkBaked
2024/02/04 07:12:53.183828 [INFO] Skipping TuneSystemSettings
2024/02/04 07:12:53.183831 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 07:12:53.183833 [INFO] Initialize LogRotate files and directories
2024/02/04 07:12:53.198852 [INFO] Skipping BootstrapCFNHup
2024/02/04 07:12:53.198862 [INFO] Executing instruction: StartCFNHup
2024/02/04 07:12:53.198865 [INFO] Start cfn-hup
2024/02/04 07:12:53.198882 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 07:12:53.214198 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 07:12:53.246504 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 07:12:53.246654 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 07:12:53.246662 [INFO] Executing instruction: Start Docker
2024/02/04 07:12:53.246665 [INFO] Starting Docker...
2024/02/04 07:12:53.247086 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 07:12:53.250842 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 07:12:53.255839 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 07:12:53.661003 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 07:12:53.697313 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 07:12:53.697389 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 07:12:53.711050 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 07:12:53.720481 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 07:12:53.732668 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 07:12:53.811286 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 07:12:53.811312 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 07:12:54.123072 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 07:12:54.542488 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 07:12:54.576411 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 07:12:54.937434 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 07:12:54.980274 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 07:12:55.005607 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 07:12:55.029511 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 07:12:56.491669 [INFO] Skipping Setup Docker Options
2024/02/04 07:12:56.491697 [INFO] Skipping MarkBootstrapped
2024/02/04 07:12:56.491701 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 07:12:56.491819 [INFO] Starting SwitchCFNStack
2024/02/04 07:12:56.491825 [INFO] Executing instruction: stopSqsd
2024/02/04 07:12:56.491829 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 07:12:56.491832 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 07:12:56.491836 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 07:12:56.491858 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 07:12:57.049486 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 07:12:57.049628 [INFO] Executing instruction: StagedockerApplication
2024/02/04 07:12:57.049644 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 07:12:57.100359 [INFO] Pruning containers ...
2024/02/04 07:12:57.100395 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 07:12:57.136355 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
09a8a905d4e1   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             hardcore_hellman

2024/02/04 07:12:57.136496 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 07:12:57.163639 [INFO] Deleted Containers:
09a8a905d4e19cec307a591644d0b5205a70c910d7db28f763a04d7d5138180c

Total reclaimed space: 0B

2024/02/04 07:12:57.163670 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 07:12:57.183304 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 07:12:57.183584 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 07:12:57.186580 [INFO] application/json

2024/02/04 07:12:57.186604 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 07:12:57.257858 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 07:12:57.258032 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 07:12:57.259200 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 07:12:57.259224 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 07:12:57.259237 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 07:12:57.259240 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 07:12:57.259244 [INFO] Executing instruction: Generate environment file
2024/02/04 07:12:57.259268 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 07:12:57.259271 [INFO] start build docker app
2024/02/04 07:12:57.259628 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 07:12:57.259631 [INFO] fetching image and ports
2024/02/04 07:12:57.261529 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 07:12:57.261603 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 07:12:57.261611 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 07:12:57.261624 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 07:12:58.271619 [INFO] Login Succeeded

2024/02/04 07:12:58.271634 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 07:12:58.271640 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 07:12:58.271658 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 07:12:58.406814 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 07:12:58.406833 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 07:12:58.406837 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 07:12:58.406840 [INFO] start to build docker image
2024/02/04 07:12:58.406857 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 07:12:58.676001 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 07:12:58.676028 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 07:12:58.676032 [INFO] successfully build docker image
2024/02/04 07:12:58.676034 [INFO] save staging docker image id
2024/02/04 07:12:58.676045 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 07:12:58.703784 [INFO] c176d18fbf65

2024/02/04 07:12:58.703997 [INFO] Executing instruction: configure X-Ray
2024/02/04 07:12:58.704004 [INFO] X-Ray is not enabled.
2024/02/04 07:12:58.704007 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 07:12:58.710315 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 07:12:58.712372 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 07:12:58.725080 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 07:12:58.725107 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 07:12:58.736179 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 07:12:58.744880 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 07:12:58.755335 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 07:12:58.831205 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 07:12:59.145039 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 07:12:59.145125 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 07:12:59.492742 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 07:12:59.505114 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 07:12:59.855556 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 07:12:59.870597 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 07:12:59.880469 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 07:13:00.413525 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 07:13:00.423942 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 07:13:00.798397 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 07:13:00.798554 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 07:13:00.811733 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 07:13:00.820566 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 07:13:00.878418 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 07:13:00.879362 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 07:13:00.880461 [INFO] Executing instruction: configure log streaming
2024/02/04 07:13:00.880472 [INFO] log streaming is not enabled
2024/02/04 07:13:00.880476 [INFO] disable log stream
2024/02/04 07:13:00.880494 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 07:13:00.903368 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 07:13:00.925300 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 07:13:00.925324 [INFO] Checking if logs need forced rotation
2024/02/04 07:13:00.925348 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 07:13:01.496107 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 07:13:02.385612 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 07:13:02.387432 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 07:13:02.662906 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 07:13:02.685617 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 07:13:02.685638 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 07:13:02.685661 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 07:13:03.106405 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 07:13:03.106443 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 07:13:03.106468 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 07:13:03.106472 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 07:13:03.106495 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 07:13:03.106507 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 07:13:03.106511 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 07:13:03.106516 [INFO] Executing instruction: stop X-Ray
2024/02/04 07:13:03.106520 [INFO] stop X-Ray ...
2024/02/04 07:13:03.106537 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 07:13:03.122190 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 07:13:03.122275 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 07:13:03.137436 [INFO] Executing instruction: Run Docker Container
2024/02/04 07:13:03.137467 [INFO] stop currently running containers...
2024/02/04 07:13:03.137494 [INFO] detected old app is not docker compose app
2024/02/04 07:13:03.137506 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 07:13:03.192500 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 07:13:03.217618 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 07:13:03.217659 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 07:13:03.233243 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 07:13:03.233281 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 07:13:03.248338 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 07:13:03.248393 [INFO] stopping current container: 09a8a905d4e1
2024/02/04 07:13:03.248405 [INFO] Running command /bin/sh -c docker ps | grep -q 09a8a905d4e1
2024/02/04 07:13:03.278952 [INFO] Running command /bin/sh -c docker ps | grep -q 09a8a905d4e1
2024/02/04 07:13:03.304331 [INFO] Pruning containers ...
2024/02/04 07:13:03.304357 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 07:13:03.323541 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 07:13:03.323569 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 07:13:03.345652 [INFO] Total reclaimed space: 0B

2024/02/04 07:13:03.345688 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 07:13:03.364949 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 07:13:03.364990 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 07:13:03.386121 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 07:13:03.386143 [INFO] Removing /var/app/current/ if it exists
2024/02/04 07:13:03.386316 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 07:13:03.386334 [INFO] detected new app is not docker compose app
2024/02/04 07:13:03.386388 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 07:13:03.879965 [INFO] 263e0e94310d6353942ea758530e645a4241edc39ab879d8453609e74d3ad5d3

2024/02/04 07:13:08.881465 [INFO] Running command /bin/sh -c docker ps | grep -q 263e0e94310d
2024/02/04 07:13:08.905732 [ERROR] docker container quit unexpectedly on 2024-02-04 07:13:08.905715385 +0000 UTC: Command /bin/sh -c docker ps | grep -q 263e0e94310d failed with error exit status 1
2024/02/04 07:13:08.905762 [INFO] Running command /bin/sh -c docker logs 263e0e94310d
2024/02/04 07:13:08.928019 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 263e0e94310d: Command /bin/sh -c docker ps | grep -q 263e0e94310d failed with error exit status 1 

2024/02/04 07:13:08.928029 [INFO] Executing cleanup logic
2024/02/04 07:13:08.928248 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 08:13:09.900274 [INFO] Starting...
2024/02/04 08:13:09.900315 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 08:13:09.900342 [INFO] reading event message file
2024/02/04 08:13:09.904251 [INFO] Engine received EB command userdata-exec

2024/02/04 08:13:09.932384 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 08:13:10.386840 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 08:13:10.822644 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 08:13:10.822692 [INFO] Engine command: (self-startup)

2024/02/04 08:13:10.822707 [INFO] Downloading EB Application...
2024/02/04 08:13:10.822712 [INFO] Region: eu-west-1
2024/02/04 08:13:10.822714 [INFO] envID: e-8gmkc7rmw6
2024/02/04 08:13:10.822719 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 08:13:10.822723 [INFO] Using manifest file name from command request
2024/02/04 08:13:10.822791 [INFO] Unable to get version manifest file.
2024/02/04 08:13:10.822796 [INFO] Downloading latest manifest available.
2024/02/04 08:13:10.822799 [INFO] Download latest app version manifest
2024/02/04 08:13:10.822934 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 08:13:10.862964 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 08:13:10.863149 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 08:13:10.873503 [INFO] Download successful124bytes downloaded
2024/02/04 08:13:10.873664 [INFO] Trying to read and parse version manifest...
2024/02/04 08:13:10.873743 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 08:13:10.903567 [INFO] Download successful264bytes downloaded
2024/02/04 08:13:10.903942 [INFO] Executing instruction: SyncClock
2024/02/04 08:13:10.903948 [INFO] Starting SyncClock
2024/02/04 08:13:10.903958 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 08:13:10.912546 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 08:12:57 2024
System time     : 0.000001790 seconds fast of NTP time
Last offset     : +0.000005342 seconds
RMS offset      : 0.000002031 seconds
Frequency       : 0.132 ppm fast
Residual freq   : +0.015 ppm
Skew            : 0.055 ppm
Root delay      : 0.000391826 seconds
Root dispersion : 0.000374623 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/04 08:13:10.912578 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 08:13:10.916531 [INFO] 200 OK

2024/02/04 08:13:10.916624 [INFO] Skipping Configure OS
2024/02/04 08:13:10.916629 [INFO] Skipping LockRepo
2024/02/04 08:13:10.916639 [INFO] Skipping GenerateEBBanner
2024/02/04 08:13:10.916644 [INFO] Skipping Install Process Manager
2024/02/04 08:13:10.916648 [INFO] Skipping install syslog
2024/02/04 08:13:10.916651 [INFO] Skipping install cron
2024/02/04 08:13:10.916655 [INFO] Skipping install proxy
2024/02/04 08:13:10.916659 [INFO] Skipping installhealthd
2024/02/04 08:13:10.916663 [INFO] Skipping Install Log Streaming Manager
2024/02/04 08:13:10.916666 [INFO] Skipping install X-Ray
2024/02/04 08:13:10.916670 [INFO] Skipping install Third Party License
2024/02/04 08:13:10.916675 [INFO] Skipping installSqsd
2024/02/04 08:13:10.916679 [INFO] Skipping bootstraphealthd
2024/02/04 08:13:10.916683 [INFO] Skipping Install yum packages
2024/02/04 08:13:10.916687 [INFO] Skipping install docker-compose
2024/02/04 08:13:10.916691 [INFO] Skipping Configure Docker Daemon
2024/02/04 08:13:10.916694 [INFO] Skipping MarkBaked
2024/02/04 08:13:10.916698 [INFO] Skipping TuneSystemSettings
2024/02/04 08:13:10.916701 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 08:13:10.916703 [INFO] Initialize LogRotate files and directories
2024/02/04 08:13:10.929051 [INFO] Skipping BootstrapCFNHup
2024/02/04 08:13:10.929070 [INFO] Executing instruction: StartCFNHup
2024/02/04 08:13:10.929074 [INFO] Start cfn-hup
2024/02/04 08:13:10.929094 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 08:13:10.941899 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 08:13:10.949864 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 08:13:10.949890 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 08:13:10.949894 [INFO] Executing instruction: Start Docker
2024/02/04 08:13:10.949897 [INFO] Starting Docker...
2024/02/04 08:13:10.949979 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 08:13:10.950959 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 08:13:10.951879 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 08:13:11.380513 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 08:13:11.396127 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 08:13:11.396155 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 08:13:11.407298 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 08:13:11.417520 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 08:13:11.428088 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 08:13:11.467252 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 08:13:11.467298 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 08:13:11.747684 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 08:13:12.102692 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 08:13:12.114029 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 08:13:12.489718 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 08:13:12.500957 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 08:13:12.527300 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 08:13:12.573215 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 08:13:13.820408 [INFO] Skipping Setup Docker Options
2024/02/04 08:13:13.820430 [INFO] Skipping MarkBootstrapped
2024/02/04 08:13:13.820435 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 08:13:13.820623 [INFO] Starting SwitchCFNStack
2024/02/04 08:13:13.820630 [INFO] Executing instruction: stopSqsd
2024/02/04 08:13:13.820634 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 08:13:13.820637 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 08:13:13.820641 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 08:13:13.820660 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 08:13:14.212908 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 08:13:14.212934 [INFO] Executing instruction: StagedockerApplication
2024/02/04 08:13:14.212946 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 08:13:14.232012 [INFO] Pruning containers ...
2024/02/04 08:13:14.232053 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 08:13:14.250648 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
263e0e94310d   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             friendly_euclid

2024/02/04 08:13:14.250694 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 08:13:14.275107 [INFO] Deleted Containers:
263e0e94310d6353942ea758530e645a4241edc39ab879d8453609e74d3ad5d3

Total reclaimed space: 0B

2024/02/04 08:13:14.275133 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 08:13:14.293292 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 08:13:14.293517 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 08:13:14.296333 [INFO] application/json

2024/02/04 08:13:14.296350 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 08:13:14.362694 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 08:13:14.362921 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 08:13:14.364222 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 08:13:14.364260 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 08:13:14.364276 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 08:13:14.364278 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 08:13:14.364283 [INFO] Executing instruction: Generate environment file
2024/02/04 08:13:14.364313 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 08:13:14.364317 [INFO] start build docker app
2024/02/04 08:13:14.364743 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 08:13:14.364747 [INFO] fetching image and ports
2024/02/04 08:13:14.366275 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 08:13:14.366317 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 08:13:14.366331 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 08:13:14.366411 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 08:13:15.373354 [INFO] Login Succeeded

2024/02/04 08:13:15.373373 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 08:13:15.373378 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 08:13:15.373393 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 08:13:15.516416 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 08:13:15.516456 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 08:13:15.517331 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 08:13:15.517338 [INFO] start to build docker image
2024/02/04 08:13:15.517364 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 08:13:15.818240 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 08:13:15.818258 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 08:13:15.818262 [INFO] successfully build docker image
2024/02/04 08:13:15.818264 [INFO] save staging docker image id
2024/02/04 08:13:15.818276 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 08:13:15.857061 [INFO] c176d18fbf65

2024/02/04 08:13:15.857291 [INFO] Executing instruction: configure X-Ray
2024/02/04 08:13:15.857298 [INFO] X-Ray is not enabled.
2024/02/04 08:13:15.857302 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 08:13:15.865220 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 08:13:15.868506 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 08:13:15.880648 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 08:13:15.880679 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 08:13:15.891333 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 08:13:15.900641 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 08:13:15.910467 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 08:13:16.001260 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 08:13:16.317758 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 08:13:16.317883 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 08:13:16.616949 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 08:13:16.628457 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 08:13:16.986786 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 08:13:16.997158 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 08:13:17.006771 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 08:13:17.340876 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 08:13:17.352464 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 08:13:17.668416 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 08:13:17.668456 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 08:13:17.682857 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 08:13:17.698101 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 08:13:17.762526 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 08:13:17.763678 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 08:13:17.764729 [INFO] Executing instruction: configure log streaming
2024/02/04 08:13:17.764739 [INFO] log streaming is not enabled
2024/02/04 08:13:17.764743 [INFO] disable log stream
2024/02/04 08:13:17.764758 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 08:13:17.790277 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 08:13:17.814318 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 08:13:17.814351 [INFO] Checking if logs need forced rotation
2024/02/04 08:13:17.814374 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 08:13:18.375534 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 08:13:18.841771 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 08:13:18.843584 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 08:13:19.431073 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 08:13:19.447209 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 08:13:19.447225 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 08:13:19.447237 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 08:13:19.794025 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 08:13:19.794051 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 08:13:19.794083 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 08:13:19.794088 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 08:13:19.794107 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 08:13:19.794118 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 08:13:19.794120 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 08:13:19.794125 [INFO] Executing instruction: stop X-Ray
2024/02/04 08:13:19.794132 [INFO] stop X-Ray ...
2024/02/04 08:13:19.794144 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 08:13:19.808369 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 08:13:19.808396 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 08:13:19.822942 [INFO] Executing instruction: Run Docker Container
2024/02/04 08:13:19.822985 [INFO] stop currently running containers...
2024/02/04 08:13:19.822995 [INFO] detected old app is not docker compose app
2024/02/04 08:13:19.823005 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 08:13:19.862430 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 08:13:19.877615 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 08:13:19.877655 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 08:13:19.892433 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 08:13:19.892466 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 08:13:19.907311 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 08:13:19.907371 [INFO] stopping current container: 263e0e94310d
2024/02/04 08:13:19.907384 [INFO] Running command /bin/sh -c docker ps | grep -q 263e0e94310d
2024/02/04 08:13:19.929898 [INFO] Running command /bin/sh -c docker ps | grep -q 263e0e94310d
2024/02/04 08:13:19.949991 [INFO] Pruning containers ...
2024/02/04 08:13:19.950013 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 08:13:19.984868 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 08:13:19.984900 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 08:13:20.012517 [INFO] Total reclaimed space: 0B

2024/02/04 08:13:20.012547 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 08:13:20.033493 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 08:13:20.033527 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 08:13:20.058424 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 08:13:20.058451 [INFO] Removing /var/app/current/ if it exists
2024/02/04 08:13:20.058678 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 08:13:20.058702 [INFO] detected new app is not docker compose app
2024/02/04 08:13:20.058753 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 08:13:20.424984 [INFO] 8cc9fbbd81b17911f66c852981cd48cb3f1eb858008e17f761bfad825f4f8b1b

2024/02/04 08:13:25.425613 [INFO] Running command /bin/sh -c docker ps | grep -q 8cc9fbbd81b1
2024/02/04 08:13:25.447001 [ERROR] docker container quit unexpectedly on 2024-02-04 08:13:25.446990318 +0000 UTC: Command /bin/sh -c docker ps | grep -q 8cc9fbbd81b1 failed with error exit status 1
2024/02/04 08:13:25.447029 [INFO] Running command /bin/sh -c docker logs 8cc9fbbd81b1
2024/02/04 08:13:25.473692 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 8cc9fbbd81b1: Command /bin/sh -c docker ps | grep -q 8cc9fbbd81b1 failed with error exit status 1 

2024/02/04 08:13:25.473705 [INFO] Executing cleanup logic
2024/02/04 08:13:25.473924 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 09:13:26.472732 [INFO] Starting...
2024/02/04 09:13:26.472772 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 09:13:26.472800 [INFO] reading event message file
2024/02/04 09:13:26.473690 [INFO] Engine received EB command userdata-exec

2024/02/04 09:13:26.479149 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 09:13:26.944846 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 09:13:27.402022 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 09:13:27.402136 [INFO] Engine command: (self-startup)

2024/02/04 09:13:27.402145 [INFO] Downloading EB Application...
2024/02/04 09:13:27.402149 [INFO] Region: eu-west-1
2024/02/04 09:13:27.402152 [INFO] envID: e-8gmkc7rmw6
2024/02/04 09:13:27.402156 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 09:13:27.402166 [INFO] Using manifest file name from command request
2024/02/04 09:13:27.402193 [INFO] Unable to get version manifest file.
2024/02/04 09:13:27.402196 [INFO] Downloading latest manifest available.
2024/02/04 09:13:27.402199 [INFO] Download latest app version manifest
2024/02/04 09:13:27.402334 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 09:13:27.439264 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 09:13:27.439442 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 09:13:27.449284 [INFO] Download successful124bytes downloaded
2024/02/04 09:13:27.449553 [INFO] Trying to read and parse version manifest...
2024/02/04 09:13:27.449638 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 09:13:27.475063 [INFO] Download successful264bytes downloaded
2024/02/04 09:13:27.475718 [INFO] Executing instruction: SyncClock
2024/02/04 09:13:27.475724 [INFO] Starting SyncClock
2024/02/04 09:13:27.475737 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 09:13:27.483269 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 09:13:18 2024
System time     : 0.000001997 seconds fast of NTP time
Last offset     : +0.000001812 seconds
RMS offset      : 0.000003230 seconds
Frequency       : 0.061 ppm slow
Residual freq   : +0.002 ppm
Skew            : 0.198 ppm
Root delay      : 0.000433323 seconds
Root dispersion : 0.000367992 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/04 09:13:27.483291 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 09:13:27.488365 [INFO] 200 OK

2024/02/04 09:13:27.488583 [INFO] Skipping Configure OS
2024/02/04 09:13:27.488593 [INFO] Skipping LockRepo
2024/02/04 09:13:27.488598 [INFO] Skipping GenerateEBBanner
2024/02/04 09:13:27.488604 [INFO] Skipping Install Process Manager
2024/02/04 09:13:27.488609 [INFO] Skipping install syslog
2024/02/04 09:13:27.488614 [INFO] Skipping install cron
2024/02/04 09:13:27.488620 [INFO] Skipping install proxy
2024/02/04 09:13:27.488625 [INFO] Skipping installhealthd
2024/02/04 09:13:27.488630 [INFO] Skipping Install Log Streaming Manager
2024/02/04 09:13:27.488636 [INFO] Skipping install X-Ray
2024/02/04 09:13:27.488641 [INFO] Skipping install Third Party License
2024/02/04 09:13:27.488648 [INFO] Skipping installSqsd
2024/02/04 09:13:27.488653 [INFO] Skipping bootstraphealthd
2024/02/04 09:13:27.488657 [INFO] Skipping Install yum packages
2024/02/04 09:13:27.488661 [INFO] Skipping install docker-compose
2024/02/04 09:13:27.488665 [INFO] Skipping Configure Docker Daemon
2024/02/04 09:13:27.488671 [INFO] Skipping MarkBaked
2024/02/04 09:13:27.488678 [INFO] Skipping TuneSystemSettings
2024/02/04 09:13:27.488681 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 09:13:27.488684 [INFO] Initialize LogRotate files and directories
2024/02/04 09:13:27.510124 [INFO] Skipping BootstrapCFNHup
2024/02/04 09:13:27.510139 [INFO] Executing instruction: StartCFNHup
2024/02/04 09:13:27.510142 [INFO] Start cfn-hup
2024/02/04 09:13:27.510165 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 09:13:27.545677 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 09:13:27.566026 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 09:13:27.566062 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 09:13:27.566066 [INFO] Executing instruction: Start Docker
2024/02/04 09:13:27.566070 [INFO] Starting Docker...
2024/02/04 09:13:27.566152 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 09:13:27.567474 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 09:13:27.568364 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 09:13:27.931446 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 09:13:27.947915 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 09:13:27.947958 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 09:13:27.968052 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 09:13:27.978152 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 09:13:27.988526 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 09:13:28.081640 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 09:13:28.081713 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 09:13:28.453804 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 09:13:28.821222 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 09:13:28.834111 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 09:13:29.208260 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 09:13:29.219843 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 09:13:29.234454 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 09:13:29.245935 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 09:13:30.822473 [INFO] Skipping Setup Docker Options
2024/02/04 09:13:30.822502 [INFO] Skipping MarkBootstrapped
2024/02/04 09:13:30.822506 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 09:13:30.822627 [INFO] Starting SwitchCFNStack
2024/02/04 09:13:30.822633 [INFO] Executing instruction: stopSqsd
2024/02/04 09:13:30.822637 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 09:13:30.822640 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 09:13:30.822643 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 09:13:30.822659 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 09:13:31.299695 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 09:13:31.299730 [INFO] Executing instruction: StagedockerApplication
2024/02/04 09:13:31.299741 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 09:13:31.323523 [INFO] Pruning containers ...
2024/02/04 09:13:31.323595 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 09:13:31.348234 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
8cc9fbbd81b1   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             magical_fermi

2024/02/04 09:13:31.348262 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 09:13:31.376350 [INFO] Deleted Containers:
8cc9fbbd81b17911f66c852981cd48cb3f1eb858008e17f761bfad825f4f8b1b

Total reclaimed space: 0B

2024/02/04 09:13:31.376377 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 09:13:31.406554 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 09:13:31.408906 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 09:13:31.413786 [INFO] application/json

2024/02/04 09:13:31.413813 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 09:13:31.503988 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 09:13:31.504237 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 09:13:31.505581 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 09:13:31.505603 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 09:13:31.505619 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 09:13:31.505623 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 09:13:31.505629 [INFO] Executing instruction: Generate environment file
2024/02/04 09:13:31.505655 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 09:13:31.505659 [INFO] start build docker app
2024/02/04 09:13:31.506027 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 09:13:31.506031 [INFO] fetching image and ports
2024/02/04 09:13:31.507777 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 09:13:31.507842 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 09:13:31.507851 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 09:13:31.507860 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 09:13:32.452761 [INFO] Login Succeeded

2024/02/04 09:13:32.452779 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 09:13:32.452788 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 09:13:32.452813 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 09:13:32.604165 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 09:13:32.604190 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 09:13:32.604194 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 09:13:32.604197 [INFO] start to build docker image
2024/02/04 09:13:32.604214 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 09:13:32.876021 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 09:13:32.876050 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 09:13:32.876055 [INFO] successfully build docker image
2024/02/04 09:13:32.876058 [INFO] save staging docker image id
2024/02/04 09:13:32.876070 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 09:13:32.897127 [INFO] c176d18fbf65

2024/02/04 09:13:32.897376 [INFO] Executing instruction: configure X-Ray
2024/02/04 09:13:32.897386 [INFO] X-Ray is not enabled.
2024/02/04 09:13:32.897390 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 09:13:32.903634 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 09:13:32.905664 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 09:13:32.919057 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 09:13:32.919090 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 09:13:32.939729 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 09:13:32.957695 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 09:13:32.969457 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 09:13:33.069648 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 09:13:33.372614 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 09:13:33.372698 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 09:13:33.733473 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 09:13:33.745393 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 09:13:33.995025 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 09:13:34.004012 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 09:13:34.014158 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 09:13:34.362911 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 09:13:34.373745 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 09:13:34.712855 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 09:13:34.712895 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 09:13:34.726606 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 09:13:34.736111 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 09:13:34.820723 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 09:13:34.821819 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 09:13:34.822844 [INFO] Executing instruction: configure log streaming
2024/02/04 09:13:34.822853 [INFO] log streaming is not enabled
2024/02/04 09:13:34.822856 [INFO] disable log stream
2024/02/04 09:13:34.822868 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 09:13:34.846836 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 09:13:34.872196 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 09:13:34.872222 [INFO] Checking if logs need forced rotation
2024/02/04 09:13:34.872242 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 09:13:35.419513 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 09:13:35.909025 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 09:13:35.910548 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 09:13:36.400514 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 09:13:36.416758 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 09:13:36.416775 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 09:13:36.416793 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 09:13:36.844502 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 09:13:36.844573 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 09:13:36.844597 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 09:13:36.844601 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 09:13:36.844626 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 09:13:36.844638 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 09:13:36.844641 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 09:13:36.844646 [INFO] Executing instruction: stop X-Ray
2024/02/04 09:13:36.844648 [INFO] stop X-Ray ...
2024/02/04 09:13:36.844663 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 09:13:36.861006 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 09:13:36.861034 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 09:13:36.888817 [INFO] Executing instruction: Run Docker Container
2024/02/04 09:13:36.888845 [INFO] stop currently running containers...
2024/02/04 09:13:36.888856 [INFO] detected old app is not docker compose app
2024/02/04 09:13:36.888870 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 09:13:36.953140 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 09:13:36.973101 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 09:13:36.973134 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 09:13:36.989065 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 09:13:36.989094 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 09:13:37.026671 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 09:13:37.026728 [INFO] stopping current container: 8cc9fbbd81b1
2024/02/04 09:13:37.026741 [INFO] Running command /bin/sh -c docker ps | grep -q 8cc9fbbd81b1
2024/02/04 09:13:37.061470 [INFO] Running command /bin/sh -c docker ps | grep -q 8cc9fbbd81b1
2024/02/04 09:13:37.084132 [INFO] Pruning containers ...
2024/02/04 09:13:37.084155 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 09:13:37.106102 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 09:13:37.106130 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 09:13:37.125329 [INFO] Total reclaimed space: 0B

2024/02/04 09:13:37.125377 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 09:13:37.145880 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 09:13:37.145912 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 09:13:37.165872 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 09:13:37.165902 [INFO] Removing /var/app/current/ if it exists
2024/02/04 09:13:37.166300 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 09:13:37.166323 [INFO] detected new app is not docker compose app
2024/02/04 09:13:37.166377 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 09:13:37.580568 [INFO] 3935f32a0faa00484259b6c991b8e303a5c8a9d57b22a94e52c92a6a0d7e91c6

2024/02/04 09:13:42.584615 [INFO] Running command /bin/sh -c docker ps | grep -q 3935f32a0faa
2024/02/04 09:13:42.612138 [ERROR] docker container quit unexpectedly on 2024-02-04 09:13:42.61212151 +0000 UTC: Command /bin/sh -c docker ps | grep -q 3935f32a0faa failed with error exit status 1
2024/02/04 09:13:42.612169 [INFO] Running command /bin/sh -c docker logs 3935f32a0faa
2024/02/04 09:13:42.645646 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 3935f32a0faa: Command /bin/sh -c docker ps | grep -q 3935f32a0faa failed with error exit status 1 

2024/02/04 09:13:42.645655 [INFO] Executing cleanup logic
2024/02/04 09:13:42.645880 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 10:13:43.787594 [INFO] Starting...
2024/02/04 10:13:43.787635 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 10:13:43.787664 [INFO] reading event message file
2024/02/04 10:13:43.788359 [INFO] Engine received EB command userdata-exec

2024/02/04 10:13:43.794061 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 10:13:44.183486 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 10:13:44.654518 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 10:13:44.654608 [INFO] Engine command: (self-startup)

2024/02/04 10:13:44.654615 [INFO] Downloading EB Application...
2024/02/04 10:13:44.654618 [INFO] Region: eu-west-1
2024/02/04 10:13:44.654622 [INFO] envID: e-8gmkc7rmw6
2024/02/04 10:13:44.654625 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 10:13:44.654629 [INFO] Using manifest file name from command request
2024/02/04 10:13:44.654643 [INFO] Unable to get version manifest file.
2024/02/04 10:13:44.654646 [INFO] Downloading latest manifest available.
2024/02/04 10:13:44.654649 [INFO] Download latest app version manifest
2024/02/04 10:13:44.654797 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 10:13:44.692845 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 10:13:44.693017 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 10:13:44.708401 [INFO] Download successful124bytes downloaded
2024/02/04 10:13:44.708691 [INFO] Trying to read and parse version manifest...
2024/02/04 10:13:44.708779 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 10:13:44.733460 [INFO] Download successful264bytes downloaded
2024/02/04 10:13:44.733927 [INFO] Executing instruction: SyncClock
2024/02/04 10:13:44.734070 [INFO] Starting SyncClock
2024/02/04 10:13:44.734092 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 10:13:44.740086 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 10:13:42 2024
System time     : 0.000000272 seconds fast of NTP time
Last offset     : -0.000001100 seconds
RMS offset      : 0.000002204 seconds
Frequency       : 0.171 ppm fast
Residual freq   : -0.001 ppm
Skew            : 0.086 ppm
Root delay      : 0.000408269 seconds
Root dispersion : 0.000293789 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/04 10:13:44.740103 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 10:13:44.744213 [INFO] 200 OK

2024/02/04 10:13:44.744311 [INFO] Skipping Configure OS
2024/02/04 10:13:44.744315 [INFO] Skipping LockRepo
2024/02/04 10:13:44.744319 [INFO] Skipping GenerateEBBanner
2024/02/04 10:13:44.744324 [INFO] Skipping Install Process Manager
2024/02/04 10:13:44.744328 [INFO] Skipping install syslog
2024/02/04 10:13:44.744331 [INFO] Skipping install cron
2024/02/04 10:13:44.744335 [INFO] Skipping install proxy
2024/02/04 10:13:44.744338 [INFO] Skipping installhealthd
2024/02/04 10:13:44.744342 [INFO] Skipping Install Log Streaming Manager
2024/02/04 10:13:44.744346 [INFO] Skipping install X-Ray
2024/02/04 10:13:44.744350 [INFO] Skipping install Third Party License
2024/02/04 10:13:44.744354 [INFO] Skipping installSqsd
2024/02/04 10:13:44.744358 [INFO] Skipping bootstraphealthd
2024/02/04 10:13:44.744361 [INFO] Skipping Install yum packages
2024/02/04 10:13:44.744365 [INFO] Skipping install docker-compose
2024/02/04 10:13:44.744369 [INFO] Skipping Configure Docker Daemon
2024/02/04 10:13:44.744373 [INFO] Skipping MarkBaked
2024/02/04 10:13:44.744376 [INFO] Skipping TuneSystemSettings
2024/02/04 10:13:44.744379 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 10:13:44.744381 [INFO] Initialize LogRotate files and directories
2024/02/04 10:13:44.760081 [INFO] Skipping BootstrapCFNHup
2024/02/04 10:13:44.760089 [INFO] Executing instruction: StartCFNHup
2024/02/04 10:13:44.760092 [INFO] Start cfn-hup
2024/02/04 10:13:44.760109 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 10:13:44.779008 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 10:13:44.789917 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 10:13:44.789946 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 10:13:44.789949 [INFO] Executing instruction: Start Docker
2024/02/04 10:13:44.789952 [INFO] Starting Docker...
2024/02/04 10:13:44.790010 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 10:13:44.791216 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 10:13:44.792630 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 10:13:45.163426 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 10:13:45.185328 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 10:13:45.185361 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 10:13:45.207815 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 10:13:45.217217 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 10:13:45.229734 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 10:13:45.313729 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 10:13:45.313792 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 10:13:45.686335 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 10:13:45.943476 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 10:13:45.955214 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 10:13:46.283722 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 10:13:46.294554 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 10:13:46.310291 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 10:13:46.322337 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 10:13:47.521442 [INFO] Skipping Setup Docker Options
2024/02/04 10:13:47.521787 [INFO] Skipping MarkBootstrapped
2024/02/04 10:13:47.521792 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 10:13:47.522154 [INFO] Starting SwitchCFNStack
2024/02/04 10:13:47.522163 [INFO] Executing instruction: stopSqsd
2024/02/04 10:13:47.522167 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 10:13:47.522170 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 10:13:47.522177 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 10:13:47.522220 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 10:13:48.014068 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 10:13:48.014105 [INFO] Executing instruction: StagedockerApplication
2024/02/04 10:13:48.014118 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 10:13:48.035710 [INFO] Pruning containers ...
2024/02/04 10:13:48.035746 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 10:13:48.055981 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
3935f32a0faa   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             blissful_swartz

2024/02/04 10:13:48.056016 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 10:13:48.083383 [INFO] Deleted Containers:
3935f32a0faa00484259b6c991b8e303a5c8a9d57b22a94e52c92a6a0d7e91c6

Total reclaimed space: 0B

2024/02/04 10:13:48.083408 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 10:13:48.103447 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 10:13:48.103694 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 10:13:48.106695 [INFO] application/json

2024/02/04 10:13:48.106721 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 10:13:48.173456 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 10:13:48.173740 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 10:13:48.175081 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 10:13:48.175109 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 10:13:48.175124 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 10:13:48.175126 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 10:13:48.175130 [INFO] Executing instruction: Generate environment file
2024/02/04 10:13:48.175158 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 10:13:48.175161 [INFO] start build docker app
2024/02/04 10:13:48.175559 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 10:13:48.175564 [INFO] fetching image and ports
2024/02/04 10:13:48.177349 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 10:13:48.177399 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 10:13:48.177415 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 10:13:48.177429 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 10:13:49.308553 [INFO] Login Succeeded

2024/02/04 10:13:49.308575 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 10:13:49.308581 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 10:13:49.308597 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 10:13:49.477367 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 10:13:49.477388 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 10:13:49.477392 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 10:13:49.477395 [INFO] start to build docker image
2024/02/04 10:13:49.477413 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 10:13:49.731622 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 10:13:49.731644 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 10:13:49.731649 [INFO] successfully build docker image
2024/02/04 10:13:49.731652 [INFO] save staging docker image id
2024/02/04 10:13:49.731667 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 10:13:49.759687 [INFO] c176d18fbf65

2024/02/04 10:13:49.759818 [INFO] Executing instruction: configure X-Ray
2024/02/04 10:13:49.759825 [INFO] X-Ray is not enabled.
2024/02/04 10:13:49.759830 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 10:13:49.766292 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 10:13:49.768114 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 10:13:49.781448 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 10:13:49.781476 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 10:13:49.793878 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 10:13:49.804354 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 10:13:49.814254 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 10:13:49.888401 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 10:13:50.313016 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 10:13:50.313274 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 10:13:50.645074 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 10:13:50.667416 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 10:13:50.982836 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 10:13:51.007823 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 10:13:51.037965 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 10:13:51.353335 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 10:13:51.363610 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 10:13:51.695347 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 10:13:51.695389 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 10:13:51.713844 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 10:13:51.723387 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 10:13:51.811112 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 10:13:51.812203 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 10:13:51.813568 [INFO] Executing instruction: configure log streaming
2024/02/04 10:13:51.813579 [INFO] log streaming is not enabled
2024/02/04 10:13:51.813582 [INFO] disable log stream
2024/02/04 10:13:51.813600 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 10:13:51.835055 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 10:13:51.873802 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 10:13:51.873830 [INFO] Checking if logs need forced rotation
2024/02/04 10:13:51.873853 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 10:13:52.447765 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 10:13:52.881568 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 10:13:52.883607 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 10:13:53.387079 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 10:13:53.408339 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 10:13:53.408368 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 10:13:53.408380 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 10:13:53.878052 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 10:13:53.878085 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 10:13:53.878110 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 10:13:53.878114 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 10:13:53.878137 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 10:13:53.878150 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 10:13:53.878153 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 10:13:53.878164 [INFO] Executing instruction: stop X-Ray
2024/02/04 10:13:53.878167 [INFO] stop X-Ray ...
2024/02/04 10:13:53.878179 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 10:13:53.903289 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 10:13:53.903340 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 10:13:53.920063 [INFO] Executing instruction: Run Docker Container
2024/02/04 10:13:53.920092 [INFO] stop currently running containers...
2024/02/04 10:13:53.920101 [INFO] detected old app is not docker compose app
2024/02/04 10:13:53.920114 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 10:13:53.972615 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 10:13:53.987880 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 10:13:53.987913 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 10:13:54.002651 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 10:13:54.002679 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 10:13:54.018545 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 10:13:54.018591 [INFO] stopping current container: 3935f32a0faa
2024/02/04 10:13:54.018610 [INFO] Running command /bin/sh -c docker ps | grep -q 3935f32a0faa
2024/02/04 10:13:54.040995 [INFO] Running command /bin/sh -c docker ps | grep -q 3935f32a0faa
2024/02/04 10:13:54.064458 [INFO] Pruning containers ...
2024/02/04 10:13:54.064487 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 10:13:54.084052 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 10:13:54.084145 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 10:13:54.106475 [INFO] Total reclaimed space: 0B

2024/02/04 10:13:54.106501 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 10:13:54.126283 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 10:13:54.126329 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 10:13:54.145265 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 10:13:54.145287 [INFO] Removing /var/app/current/ if it exists
2024/02/04 10:13:54.145657 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 10:13:54.145677 [INFO] detected new app is not docker compose app
2024/02/04 10:13:54.145736 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 10:13:54.586860 [INFO] a12dec23ac062da2bdcc104b3f686180c5d2699a310537f057545c2fd9b28bcb

2024/02/04 10:13:59.587291 [INFO] Running command /bin/sh -c docker ps | grep -q a12dec23ac06
2024/02/04 10:13:59.617456 [ERROR] docker container quit unexpectedly on 2024-02-04 10:13:59.617436704 +0000 UTC: Command /bin/sh -c docker ps | grep -q a12dec23ac06 failed with error exit status 1
2024/02/04 10:13:59.617486 [INFO] Running command /bin/sh -c docker logs a12dec23ac06
2024/02/04 10:13:59.640100 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container a12dec23ac06: Command /bin/sh -c docker ps | grep -q a12dec23ac06 failed with error exit status 1 

2024/02/04 10:13:59.640110 [INFO] Executing cleanup logic
2024/02/04 10:13:59.640547 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 11:14:00.679080 [INFO] Starting...
2024/02/04 11:14:00.679123 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 11:14:00.679150 [INFO] reading event message file
2024/02/04 11:14:00.680060 [INFO] Engine received EB command userdata-exec

2024/02/04 11:14:00.686977 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 11:14:01.104850 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 11:14:01.716890 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 11:14:01.717107 [INFO] Engine command: (self-startup)

2024/02/04 11:14:01.717117 [INFO] Downloading EB Application...
2024/02/04 11:14:01.717121 [INFO] Region: eu-west-1
2024/02/04 11:14:01.717125 [INFO] envID: e-8gmkc7rmw6
2024/02/04 11:14:01.717128 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 11:14:01.717131 [INFO] Using manifest file name from command request
2024/02/04 11:14:01.717157 [INFO] Unable to get version manifest file.
2024/02/04 11:14:01.717160 [INFO] Downloading latest manifest available.
2024/02/04 11:14:01.717162 [INFO] Download latest app version manifest
2024/02/04 11:14:01.717268 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 11:14:01.772311 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 11:14:01.773026 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 11:14:01.851000 [INFO] Download successful124bytes downloaded
2024/02/04 11:14:01.851302 [INFO] Trying to read and parse version manifest...
2024/02/04 11:14:01.851559 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 11:14:01.886837 [INFO] Download successful264bytes downloaded
2024/02/04 11:14:01.887198 [INFO] Executing instruction: SyncClock
2024/02/04 11:14:01.887206 [INFO] Starting SyncClock
2024/02/04 11:14:01.887221 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 11:14:01.905228 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 11:13:47 2024
System time     : 0.000002799 seconds fast of NTP time
Last offset     : +0.000003647 seconds
RMS offset      : 0.000004588 seconds
Frequency       : 0.179 ppm slow
Residual freq   : +0.123 ppm
Skew            : 0.343 ppm
Root delay      : 0.000405114 seconds
Root dispersion : 0.000545509 seconds
Update interval : 32.2 seconds
Leap status     : Normal

2024/02/04 11:14:01.905266 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 11:14:01.922002 [INFO] 200 OK

2024/02/04 11:14:01.922154 [INFO] Skipping Configure OS
2024/02/04 11:14:01.922164 [INFO] Skipping LockRepo
2024/02/04 11:14:01.922304 [INFO] Skipping GenerateEBBanner
2024/02/04 11:14:01.922310 [INFO] Skipping Install Process Manager
2024/02/04 11:14:01.922316 [INFO] Skipping install syslog
2024/02/04 11:14:01.922321 [INFO] Skipping install cron
2024/02/04 11:14:01.922326 [INFO] Skipping install proxy
2024/02/04 11:14:01.922332 [INFO] Skipping installhealthd
2024/02/04 11:14:01.922337 [INFO] Skipping Install Log Streaming Manager
2024/02/04 11:14:01.922342 [INFO] Skipping install X-Ray
2024/02/04 11:14:01.922348 [INFO] Skipping install Third Party License
2024/02/04 11:14:01.922356 [INFO] Skipping installSqsd
2024/02/04 11:14:01.926920 [INFO] Skipping bootstraphealthd
2024/02/04 11:14:01.926948 [INFO] Skipping Install yum packages
2024/02/04 11:14:01.926953 [INFO] Skipping install docker-compose
2024/02/04 11:14:01.926958 [INFO] Skipping Configure Docker Daemon
2024/02/04 11:14:01.926962 [INFO] Skipping MarkBaked
2024/02/04 11:14:01.926967 [INFO] Skipping TuneSystemSettings
2024/02/04 11:14:01.926969 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 11:14:01.926973 [INFO] Initialize LogRotate files and directories
2024/02/04 11:14:01.941815 [INFO] Skipping BootstrapCFNHup
2024/02/04 11:14:01.941831 [INFO] Executing instruction: StartCFNHup
2024/02/04 11:14:01.941835 [INFO] Start cfn-hup
2024/02/04 11:14:01.941856 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 11:14:01.986990 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 11:14:02.019059 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 11:14:02.019100 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 11:14:02.019104 [INFO] Executing instruction: Start Docker
2024/02/04 11:14:02.019108 [INFO] Starting Docker...
2024/02/04 11:14:02.019364 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 11:14:02.020473 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 11:14:02.023545 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 11:14:02.158598 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 11:14:02.200638 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 11:14:02.200684 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 11:14:02.232186 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 11:14:02.260565 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 11:14:02.282529 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 11:14:02.431053 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 11:14:02.431090 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 11:14:02.812357 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 11:14:03.142405 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 11:14:03.155404 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 11:14:03.560052 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 11:14:03.570961 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 11:14:03.587522 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 11:14:03.603549 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 11:14:04.882768 [INFO] Skipping Setup Docker Options
2024/02/04 11:14:04.882790 [INFO] Skipping MarkBootstrapped
2024/02/04 11:14:04.882793 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 11:14:04.882910 [INFO] Starting SwitchCFNStack
2024/02/04 11:14:04.882916 [INFO] Executing instruction: stopSqsd
2024/02/04 11:14:04.882920 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 11:14:04.882923 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 11:14:04.882927 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 11:14:04.882944 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 11:14:05.457853 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 11:14:05.457919 [INFO] Executing instruction: StagedockerApplication
2024/02/04 11:14:05.457932 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 11:14:05.503136 [INFO] Pruning containers ...
2024/02/04 11:14:05.503166 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 11:14:05.526185 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
a12dec23ac06   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             crazy_elgamal

2024/02/04 11:14:05.526228 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 11:14:05.555175 [INFO] Deleted Containers:
a12dec23ac062da2bdcc104b3f686180c5d2699a310537f057545c2fd9b28bcb

Total reclaimed space: 0B

2024/02/04 11:14:05.555206 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 11:14:05.575599 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 11:14:05.575920 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 11:14:05.578930 [INFO] application/json

2024/02/04 11:14:05.578949 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 11:14:05.676033 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property Image is not allowed

2024/02/04 11:14:05.676204 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 11:14:05.677567 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 11:14:05.677595 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 11:14:05.677610 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 11:14:05.677613 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 11:14:05.677617 [INFO] Executing instruction: Generate environment file
2024/02/04 11:14:05.677647 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 11:14:05.677652 [INFO] start build docker app
2024/02/04 11:14:05.678147 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 11:14:05.678150 [INFO] fetching image and ports
2024/02/04 11:14:05.679840 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 11:14:05.679923 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 11:14:05.679932 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 11:14:05.679941 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 11:14:06.695242 [INFO] Login Succeeded

2024/02/04 11:14:06.695258 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 11:14:06.695264 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 11:14:06.695283 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 11:14:06.854983 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 11:14:06.855008 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 11:14:06.855012 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 11:14:06.855015 [INFO] start to build docker image
2024/02/04 11:14:06.855035 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 11:14:07.127519 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 11:14:07.127542 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 11:14:07.127545 [INFO] successfully build docker image
2024/02/04 11:14:07.127547 [INFO] save staging docker image id
2024/02/04 11:14:07.127559 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 11:14:07.156328 [INFO] c176d18fbf65

2024/02/04 11:14:07.156467 [INFO] Executing instruction: configure X-Ray
2024/02/04 11:14:07.156473 [INFO] X-Ray is not enabled.
2024/02/04 11:14:07.156476 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 11:14:07.162775 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 11:14:07.164364 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 11:14:07.196427 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 11:14:07.196592 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 11:14:07.214590 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 11:14:07.223820 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 11:14:07.246416 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 11:14:07.323359 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 11:14:07.647007 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 11:14:07.647085 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 11:14:07.965054 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 11:14:07.978574 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 11:14:08.286128 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 11:14:08.296246 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 11:14:08.305270 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 11:14:08.651345 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 11:14:08.718784 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 11:14:09.108368 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 11:14:09.108405 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 11:14:09.156371 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 11:14:09.170399 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 11:14:09.206578 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 11:14:09.207643 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 11:14:09.208695 [INFO] Executing instruction: configure log streaming
2024/02/04 11:14:09.208705 [INFO] log streaming is not enabled
2024/02/04 11:14:09.208709 [INFO] disable log stream
2024/02/04 11:14:09.208724 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 11:14:09.244205 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 11:14:09.266668 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 11:14:09.266694 [INFO] Checking if logs need forced rotation
2024/02/04 11:14:09.266715 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 11:14:09.817203 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 11:14:10.236707 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 11:14:10.238466 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 11:14:10.291276 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 11:14:10.309684 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 11:14:10.309701 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 11:14:10.309712 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 11:14:10.691829 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 11:14:10.691863 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 11:14:10.691888 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 11:14:10.691890 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 11:14:10.691911 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 11:14:10.691922 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 11:14:10.691924 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 11:14:10.691929 [INFO] Executing instruction: stop X-Ray
2024/02/04 11:14:10.691931 [INFO] stop X-Ray ...
2024/02/04 11:14:10.691943 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 11:14:10.705329 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 11:14:10.705361 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 11:14:10.721435 [INFO] Executing instruction: Run Docker Container
2024/02/04 11:14:10.721466 [INFO] stop currently running containers...
2024/02/04 11:14:10.721478 [INFO] detected old app is not docker compose app
2024/02/04 11:14:10.721492 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 11:14:10.742410 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 11:14:10.778571 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 11:14:10.778728 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 11:14:10.804127 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 11:14:10.804164 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 11:14:10.819530 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 11:14:10.819583 [INFO] stopping current container: a12dec23ac06
2024/02/04 11:14:10.819597 [INFO] Running command /bin/sh -c docker ps | grep -q a12dec23ac06
2024/02/04 11:14:10.854939 [INFO] Running command /bin/sh -c docker ps | grep -q a12dec23ac06
2024/02/04 11:14:10.879019 [INFO] Pruning containers ...
2024/02/04 11:14:10.879044 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 11:14:10.913625 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 11:14:10.913652 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 11:14:10.959449 [INFO] Total reclaimed space: 0B

2024/02/04 11:14:10.959483 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 11:14:11.014916 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 11:14:11.015603 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 11:14:11.051082 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 11:14:11.051106 [INFO] Removing /var/app/current/ if it exists
2024/02/04 11:14:11.051340 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 11:14:11.051400 [INFO] detected new app is not docker compose app
2024/02/04 11:14:11.051474 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 11:14:11.468210 [INFO] a9657f61b5b87ea327d57d47766940eb3e0981deae47288b4e15b75b318428ee

2024/02/04 11:14:16.468642 [INFO] Running command /bin/sh -c docker ps | grep -q a9657f61b5b8
2024/02/04 11:14:16.494472 [ERROR] docker container quit unexpectedly on 2024-02-04 11:14:16.494460317 +0000 UTC: Command /bin/sh -c docker ps | grep -q a9657f61b5b8 failed with error exit status 1
2024/02/04 11:14:16.494503 [INFO] Running command /bin/sh -c docker logs a9657f61b5b8
2024/02/04 11:14:16.517174 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container a9657f61b5b8: Command /bin/sh -c docker ps | grep -q a9657f61b5b8 failed with error exit status 1 

2024/02/04 11:14:16.517184 [INFO] Executing cleanup logic
2024/02/04 11:14:16.517387 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 12:14:17.548034 [INFO] Starting...
2024/02/04 12:14:17.548078 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 12:14:17.548104 [INFO] reading event message file
2024/02/04 12:14:17.549132 [INFO] Engine received EB command userdata-exec

2024/02/04 12:14:17.556372 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 12:14:17.940071 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 12:14:18.364362 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 12:14:18.364455 [INFO] Engine command: (self-startup)

2024/02/04 12:14:18.364463 [INFO] Downloading EB Application...
2024/02/04 12:14:18.364466 [INFO] Region: eu-west-1
2024/02/04 12:14:18.364469 [INFO] envID: e-8gmkc7rmw6
2024/02/04 12:14:18.364473 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 12:14:18.364476 [INFO] Using manifest file name from command request
2024/02/04 12:14:18.364487 [INFO] Unable to get version manifest file.
2024/02/04 12:14:18.364490 [INFO] Downloading latest manifest available.
2024/02/04 12:14:18.364492 [INFO] Download latest app version manifest
2024/02/04 12:14:18.364619 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 12:14:18.405220 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 12:14:18.405475 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 12:14:18.416628 [INFO] Download successful124bytes downloaded
2024/02/04 12:14:18.416791 [INFO] Trying to read and parse version manifest...
2024/02/04 12:14:18.416868 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 12:14:18.445225 [INFO] Download successful264bytes downloaded
2024/02/04 12:14:18.445812 [INFO] Executing instruction: SyncClock
2024/02/04 12:14:18.445821 [INFO] Starting SyncClock
2024/02/04 12:14:18.445832 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 12:14:18.452099 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 12:14:13 2024
System time     : 0.000001463 seconds slow of NTP time
Last offset     : -0.000000317 seconds
RMS offset      : 0.000001633 seconds
Frequency       : 0.149 ppm slow
Residual freq   : -0.000 ppm
Skew            : 0.032 ppm
Root delay      : 0.000405717 seconds
Root dispersion : 0.000489300 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/04 12:14:18.452122 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 12:14:18.462661 [INFO] 200 OK

2024/02/04 12:14:18.462762 [INFO] Skipping Configure OS
2024/02/04 12:14:18.462768 [INFO] Skipping LockRepo
2024/02/04 12:14:18.462772 [INFO] Skipping GenerateEBBanner
2024/02/04 12:14:18.462776 [INFO] Skipping Install Process Manager
2024/02/04 12:14:18.462780 [INFO] Skipping install syslog
2024/02/04 12:14:18.462783 [INFO] Skipping install cron
2024/02/04 12:14:18.462787 [INFO] Skipping install proxy
2024/02/04 12:14:18.462791 [INFO] Skipping installhealthd
2024/02/04 12:14:18.462794 [INFO] Skipping Install Log Streaming Manager
2024/02/04 12:14:18.462801 [INFO] Skipping install X-Ray
2024/02/04 12:14:18.462804 [INFO] Skipping install Third Party License
2024/02/04 12:14:18.462810 [INFO] Skipping installSqsd
2024/02/04 12:14:18.462814 [INFO] Skipping bootstraphealthd
2024/02/04 12:14:18.462818 [INFO] Skipping Install yum packages
2024/02/04 12:14:18.462822 [INFO] Skipping install docker-compose
2024/02/04 12:14:18.462826 [INFO] Skipping Configure Docker Daemon
2024/02/04 12:14:18.462830 [INFO] Skipping MarkBaked
2024/02/04 12:14:18.462836 [INFO] Skipping TuneSystemSettings
2024/02/04 12:14:18.462839 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 12:14:18.462841 [INFO] Initialize LogRotate files and directories
2024/02/04 12:14:18.476721 [INFO] Skipping BootstrapCFNHup
2024/02/04 12:14:18.476732 [INFO] Executing instruction: StartCFNHup
2024/02/04 12:14:18.476734 [INFO] Start cfn-hup
2024/02/04 12:14:18.476753 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 12:14:18.497364 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 12:14:18.506793 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 12:14:18.506827 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 12:14:18.506832 [INFO] Executing instruction: Start Docker
2024/02/04 12:14:18.506835 [INFO] Starting Docker...
2024/02/04 12:14:18.506914 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 12:14:18.508056 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 12:14:18.509113 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 12:14:18.913232 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 12:14:18.945629 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 12:14:18.945663 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 12:14:18.970602 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 12:14:18.981883 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 12:14:19.001838 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 12:14:19.100865 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 12:14:19.100915 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 12:14:19.377159 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 12:14:19.677156 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 12:14:19.689963 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 12:14:20.034205 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 12:14:20.045900 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 12:14:20.059407 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 12:14:20.070324 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 12:14:21.338834 [INFO] Skipping Setup Docker Options
2024/02/04 12:14:21.338865 [INFO] Skipping MarkBootstrapped
2024/02/04 12:14:21.338870 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 12:14:21.338995 [INFO] Starting SwitchCFNStack
2024/02/04 12:14:21.339000 [INFO] Executing instruction: stopSqsd
2024/02/04 12:14:21.339004 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 12:14:21.339007 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 12:14:21.339010 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 12:14:21.339032 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 12:14:21.769196 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 12:14:21.769238 [INFO] Executing instruction: StagedockerApplication
2024/02/04 12:14:21.769250 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 12:14:21.793731 [INFO] Pruning containers ...
2024/02/04 12:14:21.793779 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 12:14:21.816655 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
a9657f61b5b8   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             boring_driscoll

2024/02/04 12:14:21.816683 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 12:14:21.854438 [INFO] Deleted Containers:
a9657f61b5b87ea327d57d47766940eb3e0981deae47288b4e15b75b318428ee

Total reclaimed space: 0B

2024/02/04 12:14:21.854471 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 12:14:21.884457 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 12:14:21.884686 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 12:14:21.887958 [INFO] application/json

2024/02/04 12:14:21.887977 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 12:14:21.959330 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 12:14:21.959496 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 12:14:21.960887 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 12:14:21.960912 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 12:14:21.960926 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 12:14:21.960928 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 12:14:21.960932 [INFO] Executing instruction: Generate environment file
2024/02/04 12:14:21.960964 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 12:14:21.960968 [INFO] start build docker app
2024/02/04 12:14:21.961584 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 12:14:21.961601 [INFO] fetching image and ports
2024/02/04 12:14:21.963068 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 12:14:21.963124 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 12:14:21.963138 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 12:14:21.963148 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 12:14:22.891400 [INFO] Login Succeeded

2024/02/04 12:14:22.891420 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 12:14:22.891426 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 12:14:22.891441 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 12:14:23.030942 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 12:14:23.031078 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 12:14:23.031084 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 12:14:23.031087 [INFO] start to build docker image
2024/02/04 12:14:23.031103 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 12:14:23.319996 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 12:14:23.320019 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 12:14:23.320024 [INFO] successfully build docker image
2024/02/04 12:14:23.320027 [INFO] save staging docker image id
2024/02/04 12:14:23.320042 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 12:14:23.343477 [INFO] c176d18fbf65

2024/02/04 12:14:23.343599 [INFO] Executing instruction: configure X-Ray
2024/02/04 12:14:23.343604 [INFO] X-Ray is not enabled.
2024/02/04 12:14:23.343607 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 12:14:23.348412 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 12:14:23.349982 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 12:14:23.362811 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 12:14:23.362837 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 12:14:23.373827 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 12:14:23.382914 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 12:14:23.394813 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 12:14:23.496812 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 12:14:23.850506 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 12:14:23.850589 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 12:14:24.119198 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 12:14:24.131512 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 12:14:24.548145 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 12:14:24.556393 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 12:14:24.565233 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 12:14:24.869471 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 12:14:24.878914 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 12:14:25.141018 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 12:14:25.141054 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 12:14:25.153221 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 12:14:25.161637 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 12:14:25.249950 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 12:14:25.250924 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 12:14:25.251744 [INFO] Executing instruction: configure log streaming
2024/02/04 12:14:25.251754 [INFO] log streaming is not enabled
2024/02/04 12:14:25.251757 [INFO] disable log stream
2024/02/04 12:14:25.251770 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 12:14:25.272425 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 12:14:25.291903 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 12:14:25.291938 [INFO] Checking if logs need forced rotation
2024/02/04 12:14:25.291960 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 12:14:25.814555 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 12:14:26.218390 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 12:14:26.220109 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 12:14:26.345567 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 12:14:26.364636 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 12:14:26.364940 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 12:14:26.364959 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 12:14:26.774397 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 12:14:26.774425 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 12:14:26.774451 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 12:14:26.774454 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 12:14:26.774474 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 12:14:26.774490 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 12:14:26.774493 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 12:14:26.774498 [INFO] Executing instruction: stop X-Ray
2024/02/04 12:14:26.774501 [INFO] stop X-Ray ...
2024/02/04 12:14:26.774515 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 12:14:26.789270 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 12:14:26.789303 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 12:14:26.808420 [INFO] Executing instruction: Run Docker Container
2024/02/04 12:14:26.808448 [INFO] stop currently running containers...
2024/02/04 12:14:26.808457 [INFO] detected old app is not docker compose app
2024/02/04 12:14:26.808471 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 12:14:26.852696 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 12:14:26.868456 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 12:14:26.868484 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 12:14:26.882451 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 12:14:26.882481 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 12:14:26.897923 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 12:14:26.897973 [INFO] stopping current container: a9657f61b5b8
2024/02/04 12:14:26.897986 [INFO] Running command /bin/sh -c docker ps | grep -q a9657f61b5b8
2024/02/04 12:14:26.919128 [INFO] Running command /bin/sh -c docker ps | grep -q a9657f61b5b8
2024/02/04 12:14:26.940490 [INFO] Pruning containers ...
2024/02/04 12:14:26.940514 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 12:14:26.959474 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 12:14:26.959506 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 12:14:26.980064 [INFO] Total reclaimed space: 0B

2024/02/04 12:14:26.980087 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 12:14:26.998444 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 12:14:26.998486 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 12:14:27.035572 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 12:14:27.035592 [INFO] Removing /var/app/current/ if it exists
2024/02/04 12:14:27.035701 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 12:14:27.035722 [INFO] detected new app is not docker compose app
2024/02/04 12:14:27.035776 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 12:14:27.525327 [INFO] 197ae659a4af1a472c88f095fcb97639ba32ab6aafe99440c9e1ec82d2d08184

2024/02/04 12:14:32.529728 [INFO] Running command /bin/sh -c docker ps | grep -q 197ae659a4af
2024/02/04 12:14:32.552507 [ERROR] docker container quit unexpectedly on 2024-02-04 12:14:32.552489762 +0000 UTC: Command /bin/sh -c docker ps | grep -q 197ae659a4af failed with error exit status 1
2024/02/04 12:14:32.552533 [INFO] Running command /bin/sh -c docker logs 197ae659a4af
2024/02/04 12:14:32.573081 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 197ae659a4af: Command /bin/sh -c docker ps | grep -q 197ae659a4af failed with error exit status 1 

2024/02/04 12:14:32.573090 [INFO] Executing cleanup logic
2024/02/04 12:14:32.573427 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 13:14:33.583113 [INFO] Starting...
2024/02/04 13:14:33.583151 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 13:14:33.583180 [INFO] reading event message file
2024/02/04 13:14:33.584181 [INFO] Engine received EB command userdata-exec

2024/02/04 13:14:33.603651 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 13:14:33.973429 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 13:14:34.446304 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 13:14:34.446446 [INFO] Engine command: (self-startup)

2024/02/04 13:14:34.446456 [INFO] Downloading EB Application...
2024/02/04 13:14:34.446460 [INFO] Region: eu-west-1
2024/02/04 13:14:34.446463 [INFO] envID: e-8gmkc7rmw6
2024/02/04 13:14:34.446466 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 13:14:34.446469 [INFO] Using manifest file name from command request
2024/02/04 13:14:34.446482 [INFO] Unable to get version manifest file.
2024/02/04 13:14:34.446484 [INFO] Downloading latest manifest available.
2024/02/04 13:14:34.446486 [INFO] Download latest app version manifest
2024/02/04 13:14:34.446708 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 13:14:34.489634 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 13:14:34.489881 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 13:14:34.505655 [INFO] Download successful124bytes downloaded
2024/02/04 13:14:34.505802 [INFO] Trying to read and parse version manifest...
2024/02/04 13:14:34.505888 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 13:14:34.533639 [INFO] Download successful264bytes downloaded
2024/02/04 13:14:34.533929 [INFO] Executing instruction: SyncClock
2024/02/04 13:14:34.533935 [INFO] Starting SyncClock
2024/02/04 13:14:34.533949 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 13:14:34.539786 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 13:14:21 2024
System time     : 0.000001874 seconds slow of NTP time
Last offset     : -0.000003725 seconds
RMS offset      : 0.000003387 seconds
Frequency       : 0.359 ppm slow
Residual freq   : -0.004 ppm
Skew            : 0.116 ppm
Root delay      : 0.000404680 seconds
Root dispersion : 0.000500595 seconds
Update interval : 16.2 seconds
Leap status     : Normal

2024/02/04 13:14:34.539804 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 13:14:34.544138 [INFO] 200 OK

2024/02/04 13:14:34.544285 [INFO] Skipping Configure OS
2024/02/04 13:14:34.544291 [INFO] Skipping LockRepo
2024/02/04 13:14:34.544295 [INFO] Skipping GenerateEBBanner
2024/02/04 13:14:34.544299 [INFO] Skipping Install Process Manager
2024/02/04 13:14:34.544303 [INFO] Skipping install syslog
2024/02/04 13:14:34.544307 [INFO] Skipping install cron
2024/02/04 13:14:34.544311 [INFO] Skipping install proxy
2024/02/04 13:14:34.544315 [INFO] Skipping installhealthd
2024/02/04 13:14:34.544318 [INFO] Skipping Install Log Streaming Manager
2024/02/04 13:14:34.544323 [INFO] Skipping install X-Ray
2024/02/04 13:14:34.544327 [INFO] Skipping install Third Party License
2024/02/04 13:14:34.544332 [INFO] Skipping installSqsd
2024/02/04 13:14:34.544335 [INFO] Skipping bootstraphealthd
2024/02/04 13:14:34.544339 [INFO] Skipping Install yum packages
2024/02/04 13:14:34.544343 [INFO] Skipping install docker-compose
2024/02/04 13:14:34.544347 [INFO] Skipping Configure Docker Daemon
2024/02/04 13:14:34.544350 [INFO] Skipping MarkBaked
2024/02/04 13:14:34.544355 [INFO] Skipping TuneSystemSettings
2024/02/04 13:14:34.544363 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 13:14:34.544366 [INFO] Initialize LogRotate files and directories
2024/02/04 13:14:34.559434 [INFO] Skipping BootstrapCFNHup
2024/02/04 13:14:34.559445 [INFO] Executing instruction: StartCFNHup
2024/02/04 13:14:34.559448 [INFO] Start cfn-hup
2024/02/04 13:14:34.559573 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 13:14:34.573125 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 13:14:34.581278 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 13:14:34.581303 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 13:14:34.581307 [INFO] Executing instruction: Start Docker
2024/02/04 13:14:34.581310 [INFO] Starting Docker...
2024/02/04 13:14:34.581423 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 13:14:34.582541 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 13:14:34.583662 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 13:14:34.916263 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 13:14:34.930997 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 13:14:34.931133 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 13:14:34.943834 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 13:14:34.954231 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 13:14:34.966121 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 13:14:35.016714 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 13:14:35.016783 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 13:14:35.345331 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 13:14:35.697930 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 13:14:35.709599 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 13:14:36.042503 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 13:14:36.052916 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 13:14:36.072471 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 13:14:36.085991 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 13:14:37.435496 [INFO] Skipping Setup Docker Options
2024/02/04 13:14:37.435523 [INFO] Skipping MarkBootstrapped
2024/02/04 13:14:37.435527 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 13:14:37.435655 [INFO] Starting SwitchCFNStack
2024/02/04 13:14:37.435661 [INFO] Executing instruction: stopSqsd
2024/02/04 13:14:37.435667 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 13:14:37.435671 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 13:14:37.435674 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 13:14:37.435691 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 13:14:37.896523 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 13:14:37.896593 [INFO] Executing instruction: StagedockerApplication
2024/02/04 13:14:37.896606 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 13:14:37.927439 [INFO] Pruning containers ...
2024/02/04 13:14:37.927494 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 13:14:37.952786 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
197ae659a4af   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             loving_hertz

2024/02/04 13:14:37.952834 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 13:14:37.981024 [INFO] Deleted Containers:
197ae659a4af1a472c88f095fcb97639ba32ab6aafe99440c9e1ec82d2d08184

Total reclaimed space: 0B

2024/02/04 13:14:37.981050 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 13:14:38.000707 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 13:14:38.001122 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 13:14:38.005806 [INFO] application/json

2024/02/04 13:14:38.005834 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 13:14:38.089050 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 13:14:38.089282 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 13:14:38.090676 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 13:14:38.090701 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 13:14:38.090715 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 13:14:38.090718 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 13:14:38.090722 [INFO] Executing instruction: Generate environment file
2024/02/04 13:14:38.090748 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 13:14:38.090752 [INFO] start build docker app
2024/02/04 13:14:38.091127 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 13:14:38.091131 [INFO] fetching image and ports
2024/02/04 13:14:38.092721 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 13:14:38.092789 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 13:14:38.092798 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 13:14:38.092808 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 13:14:39.075503 [INFO] Login Succeeded

2024/02/04 13:14:39.075520 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 13:14:39.075526 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 13:14:39.075544 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 13:14:39.206350 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 13:14:39.206374 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 13:14:39.206379 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 13:14:39.206389 [INFO] start to build docker image
2024/02/04 13:14:39.206404 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 13:14:39.438527 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 13:14:39.438554 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 13:14:39.438559 [INFO] successfully build docker image
2024/02/04 13:14:39.438562 [INFO] save staging docker image id
2024/02/04 13:14:39.438580 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 13:14:39.468588 [INFO] c176d18fbf65

2024/02/04 13:14:39.468736 [INFO] Executing instruction: configure X-Ray
2024/02/04 13:14:39.468743 [INFO] X-Ray is not enabled.
2024/02/04 13:14:39.468746 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 13:14:39.473849 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 13:14:39.475504 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 13:14:39.488836 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 13:14:39.488869 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 13:14:39.505636 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 13:14:39.517591 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 13:14:39.528490 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 13:14:39.589306 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 13:14:39.911134 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 13:14:39.911313 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 13:14:40.199704 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 13:14:40.210907 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 13:14:40.511183 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 13:14:40.528171 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 13:14:40.539527 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 13:14:40.908342 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 13:14:40.920628 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 13:14:41.235950 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 13:14:41.235995 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 13:14:41.248832 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 13:14:41.257331 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 13:14:41.330205 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 13:14:41.331100 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 13:14:41.332087 [INFO] Executing instruction: configure log streaming
2024/02/04 13:14:41.332099 [INFO] log streaming is not enabled
2024/02/04 13:14:41.332107 [INFO] disable log stream
2024/02/04 13:14:41.332122 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 13:14:41.355845 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 13:14:41.375652 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 13:14:41.375676 [INFO] Checking if logs need forced rotation
2024/02/04 13:14:41.375695 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 13:14:41.953055 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 13:14:42.400906 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 13:14:42.402513 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 13:14:42.923055 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 13:14:42.938655 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 13:14:42.938671 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 13:14:42.938682 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 13:14:43.383674 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 13:14:43.383698 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 13:14:43.383726 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 13:14:43.383730 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 13:14:43.383750 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 13:14:43.383761 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 13:14:43.383763 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 13:14:43.383768 [INFO] Executing instruction: stop X-Ray
2024/02/04 13:14:43.383771 [INFO] stop X-Ray ...
2024/02/04 13:14:43.383781 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 13:14:43.398115 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 13:14:43.398148 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 13:14:43.413950 [INFO] Executing instruction: Run Docker Container
2024/02/04 13:14:43.413981 [INFO] stop currently running containers...
2024/02/04 13:14:43.413992 [INFO] detected old app is not docker compose app
2024/02/04 13:14:43.414005 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 13:14:43.462725 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 13:14:43.477943 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 13:14:43.477976 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 13:14:43.491088 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 13:14:43.491120 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 13:14:43.505359 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 13:14:43.505411 [INFO] stopping current container: 197ae659a4af
2024/02/04 13:14:43.505424 [INFO] Running command /bin/sh -c docker ps | grep -q 197ae659a4af
2024/02/04 13:14:43.525159 [INFO] Running command /bin/sh -c docker ps | grep -q 197ae659a4af
2024/02/04 13:14:43.544636 [INFO] Pruning containers ...
2024/02/04 13:14:43.544660 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 13:14:43.562898 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 13:14:43.562928 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 13:14:43.584405 [INFO] Total reclaimed space: 0B

2024/02/04 13:14:43.584428 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 13:14:43.604306 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 13:14:43.604347 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 13:14:43.623642 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 13:14:43.623669 [INFO] Removing /var/app/current/ if it exists
2024/02/04 13:14:43.623753 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 13:14:43.623770 [INFO] detected new app is not docker compose app
2024/02/04 13:14:43.623816 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 13:14:44.014354 [INFO] b82b9c154b6dba3075a5c503b8e2b6a8706b4dbf97cc164e3ba7e34e26270188

2024/02/04 13:14:49.018633 [INFO] Running command /bin/sh -c docker ps | grep -q b82b9c154b6d
2024/02/04 13:14:49.055343 [ERROR] docker container quit unexpectedly on 2024-02-04 13:14:49.055329362 +0000 UTC: Command /bin/sh -c docker ps | grep -q b82b9c154b6d failed with error exit status 1
2024/02/04 13:14:49.055371 [INFO] Running command /bin/sh -c docker logs b82b9c154b6d
2024/02/04 13:14:49.079327 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b82b9c154b6d: Command /bin/sh -c docker ps | grep -q b82b9c154b6d failed with error exit status 1 

2024/02/04 13:14:49.079337 [INFO] Executing cleanup logic
2024/02/04 13:14:49.079576 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 14:14:50.097291 [INFO] Starting...
2024/02/04 14:14:50.097330 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 14:14:50.097355 [INFO] reading event message file
2024/02/04 14:14:50.098050 [INFO] Engine received EB command userdata-exec

2024/02/04 14:14:50.103271 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 14:14:50.483673 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 14:14:50.946694 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 14:14:50.946789 [INFO] Engine command: (self-startup)

2024/02/04 14:14:50.946797 [INFO] Downloading EB Application...
2024/02/04 14:14:50.946801 [INFO] Region: eu-west-1
2024/02/04 14:14:50.946804 [INFO] envID: e-8gmkc7rmw6
2024/02/04 14:14:50.946807 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 14:14:50.946811 [INFO] Using manifest file name from command request
2024/02/04 14:14:50.946833 [INFO] Unable to get version manifest file.
2024/02/04 14:14:50.946836 [INFO] Downloading latest manifest available.
2024/02/04 14:14:50.946840 [INFO] Download latest app version manifest
2024/02/04 14:14:50.947077 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 14:14:50.985095 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 14:14:50.985284 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 14:14:51.003136 [INFO] Download successful124bytes downloaded
2024/02/04 14:14:51.003301 [INFO] Trying to read and parse version manifest...
2024/02/04 14:14:51.003381 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 14:14:51.039818 [INFO] Download successful264bytes downloaded
2024/02/04 14:14:51.040191 [INFO] Executing instruction: SyncClock
2024/02/04 14:14:51.040197 [INFO] Starting SyncClock
2024/02/04 14:14:51.040207 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 14:14:51.046380 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 14:14:45 2024
System time     : 0.000002019 seconds fast of NTP time
Last offset     : +0.000001371 seconds
RMS offset      : 0.000001731 seconds
Frequency       : 0.151 ppm slow
Residual freq   : +0.001 ppm
Skew            : 0.037 ppm
Root delay      : 0.000449573 seconds
Root dispersion : 0.000368902 seconds
Update interval : 16.1 seconds
Leap status     : Normal

2024/02/04 14:14:51.046404 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 14:14:51.051018 [INFO] 200 OK

2024/02/04 14:14:51.051205 [INFO] Skipping Configure OS
2024/02/04 14:14:51.051213 [INFO] Skipping LockRepo
2024/02/04 14:14:51.051217 [INFO] Skipping GenerateEBBanner
2024/02/04 14:14:51.051223 [INFO] Skipping Install Process Manager
2024/02/04 14:14:51.051228 [INFO] Skipping install syslog
2024/02/04 14:14:51.051234 [INFO] Skipping install cron
2024/02/04 14:14:51.051240 [INFO] Skipping install proxy
2024/02/04 14:14:51.051244 [INFO] Skipping installhealthd
2024/02/04 14:14:51.051248 [INFO] Skipping Install Log Streaming Manager
2024/02/04 14:14:51.051252 [INFO] Skipping install X-Ray
2024/02/04 14:14:51.051256 [INFO] Skipping install Third Party License
2024/02/04 14:14:51.051261 [INFO] Skipping installSqsd
2024/02/04 14:14:51.051265 [INFO] Skipping bootstraphealthd
2024/02/04 14:14:51.051269 [INFO] Skipping Install yum packages
2024/02/04 14:14:51.051273 [INFO] Skipping install docker-compose
2024/02/04 14:14:51.051277 [INFO] Skipping Configure Docker Daemon
2024/02/04 14:14:51.051280 [INFO] Skipping MarkBaked
2024/02/04 14:14:51.051287 [INFO] Skipping TuneSystemSettings
2024/02/04 14:14:51.051290 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 14:14:51.051293 [INFO] Initialize LogRotate files and directories
2024/02/04 14:14:51.066274 [INFO] Skipping BootstrapCFNHup
2024/02/04 14:14:51.066285 [INFO] Executing instruction: StartCFNHup
2024/02/04 14:14:51.066288 [INFO] Start cfn-hup
2024/02/04 14:14:51.066306 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 14:14:51.080462 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 14:14:51.089701 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 14:14:51.089734 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 14:14:51.089738 [INFO] Executing instruction: Start Docker
2024/02/04 14:14:51.089741 [INFO] Starting Docker...
2024/02/04 14:14:51.089823 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 14:14:51.091187 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 14:14:51.092334 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 14:14:51.431704 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 14:14:51.447442 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 14:14:51.447475 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 14:14:51.463050 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 14:14:51.472862 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 14:14:51.485454 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 14:14:51.588189 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 14:14:51.588226 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 14:14:51.955324 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 14:14:52.298963 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 14:14:52.310500 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 14:14:52.597434 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 14:14:52.608776 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 14:14:52.622043 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 14:14:52.631764 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 14:14:54.178400 [INFO] Skipping Setup Docker Options
2024/02/04 14:14:54.178435 [INFO] Skipping MarkBootstrapped
2024/02/04 14:14:54.178440 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 14:14:54.178565 [INFO] Starting SwitchCFNStack
2024/02/04 14:14:54.178571 [INFO] Executing instruction: stopSqsd
2024/02/04 14:14:54.178575 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 14:14:54.178578 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 14:14:54.178582 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 14:14:54.178600 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 14:14:54.586005 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 14:14:54.586044 [INFO] Executing instruction: StagedockerApplication
2024/02/04 14:14:54.586062 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 14:14:54.605611 [INFO] Pruning containers ...
2024/02/04 14:14:54.605640 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 14:14:54.625464 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b82b9c154b6d   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             friendly_borg

2024/02/04 14:14:54.625500 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 14:14:54.682691 [INFO] Deleted Containers:
b82b9c154b6dba3075a5c503b8e2b6a8706b4dbf97cc164e3ba7e34e26270188

Total reclaimed space: 0B

2024/02/04 14:14:54.682719 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 14:14:54.722741 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 14:14:54.722988 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 14:14:54.725926 [INFO] application/json

2024/02/04 14:14:54.725944 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 14:14:54.797874 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 14:14:54.798051 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 14:14:54.799304 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 14:14:54.799325 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 14:14:54.799339 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 14:14:54.799342 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 14:14:54.799346 [INFO] Executing instruction: Generate environment file
2024/02/04 14:14:54.799376 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 14:14:54.799380 [INFO] start build docker app
2024/02/04 14:14:54.799740 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 14:14:54.799748 [INFO] fetching image and ports
2024/02/04 14:14:54.801470 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 14:14:54.801532 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 14:14:54.801541 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 14:14:54.801551 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 14:14:55.574982 [INFO] Login Succeeded

2024/02/04 14:14:55.575000 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 14:14:55.575006 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 14:14:55.575025 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 14:14:55.716822 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 14:14:55.716849 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 14:14:55.716854 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 14:14:55.716858 [INFO] start to build docker image
2024/02/04 14:14:55.716877 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 14:14:55.963456 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 218B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 14:14:55.963479 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 14:14:55.963483 [INFO] successfully build docker image
2024/02/04 14:14:55.963486 [INFO] save staging docker image id
2024/02/04 14:14:55.963502 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 14:14:55.983173 [INFO] c176d18fbf65

2024/02/04 14:14:55.983307 [INFO] Executing instruction: configure X-Ray
2024/02/04 14:14:55.983315 [INFO] X-Ray is not enabled.
2024/02/04 14:14:55.983319 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 14:14:55.989335 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 14:14:55.991490 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 14:14:56.004930 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 14:14:56.004967 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 14:14:56.017716 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 14:14:56.027344 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 14:14:56.038437 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 14:14:56.108591 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 14:14:56.425980 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 14:14:56.426055 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 14:14:56.803873 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 14:14:56.819527 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 14:14:57.178217 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 14:14:57.188014 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 14:14:57.203700 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 14:14:57.520349 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 14:14:57.533244 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 14:14:57.819910 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 14:14:57.820015 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 14:14:57.842375 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 14:14:57.854541 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 14:14:57.941159 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 14:14:57.942060 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 14:14:57.943025 [INFO] Executing instruction: configure log streaming
2024/02/04 14:14:57.943034 [INFO] log streaming is not enabled
2024/02/04 14:14:57.943036 [INFO] disable log stream
2024/02/04 14:14:57.943048 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 14:14:57.970197 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 14:14:57.988278 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 14:14:57.988302 [INFO] Checking if logs need forced rotation
2024/02/04 14:14:57.988322 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 14:14:58.510183 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 14:14:59.026585 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 14:14:59.028769 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 14:14:59.413159 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 14:14:59.442599 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 14:14:59.442617 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 14:14:59.442629 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 14:14:59.862788 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 14:14:59.862817 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 14:14:59.862841 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 14:14:59.862849 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 14:14:59.862869 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 14:14:59.862884 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 14:14:59.862887 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 14:14:59.862893 [INFO] Executing instruction: stop X-Ray
2024/02/04 14:14:59.862897 [INFO] stop X-Ray ...
2024/02/04 14:14:59.862908 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 14:14:59.877758 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 14:14:59.877791 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 14:14:59.895852 [INFO] Executing instruction: Run Docker Container
2024/02/04 14:14:59.895883 [INFO] stop currently running containers...
2024/02/04 14:14:59.895894 [INFO] detected old app is not docker compose app
2024/02/04 14:14:59.895908 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 14:14:59.932593 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 14:14:59.947861 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 14:14:59.947907 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 14:14:59.963097 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 14:14:59.963124 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 14:14:59.981016 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 14:14:59.981080 [INFO] stopping current container: b82b9c154b6d
2024/02/04 14:14:59.981094 [INFO] Running command /bin/sh -c docker ps | grep -q b82b9c154b6d
2024/02/04 14:15:00.128356 [INFO] Running command /bin/sh -c docker ps | grep -q b82b9c154b6d
2024/02/04 14:15:00.173867 [INFO] Pruning containers ...
2024/02/04 14:15:00.173893 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 14:15:00.196121 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 14:15:00.196152 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 14:15:00.217769 [INFO] Total reclaimed space: 0B

2024/02/04 14:15:00.217796 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 14:15:00.237252 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 14:15:00.237284 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 14:15:00.260796 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 14:15:00.260825 [INFO] Removing /var/app/current/ if it exists
2024/02/04 14:15:00.260935 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 14:15:00.260956 [INFO] detected new app is not docker compose app
2024/02/04 14:15:00.261014 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 14:15:00.752960 [INFO] 2df2adc48cf5083ae0949a009a7df73357c34d095402533cf681edefc8501b67

2024/02/04 14:15:05.757690 [INFO] Running command /bin/sh -c docker ps | grep -q 2df2adc48cf5
2024/02/04 14:15:05.789616 [ERROR] docker container quit unexpectedly on 2024-02-04 14:15:05.789602388 +0000 UTC: Command /bin/sh -c docker ps | grep -q 2df2adc48cf5 failed with error exit status 1
2024/02/04 14:15:05.789645 [INFO] Running command /bin/sh -c docker logs 2df2adc48cf5
2024/02/04 14:15:05.828051 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 2df2adc48cf5: Command /bin/sh -c docker ps | grep -q 2df2adc48cf5 failed with error exit status 1 

2024/02/04 14:15:05.828062 [INFO] Executing cleanup logic
2024/02/04 14:15:05.828275 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 15:15:06.974554 [INFO] Starting...
2024/02/04 15:15:06.974607 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 15:15:06.974635 [INFO] reading event message file
2024/02/04 15:15:06.975529 [INFO] Engine received EB command userdata-exec

2024/02/04 15:15:06.980744 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 15:15:07.449879 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 15:15:08.114209 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 15:15:08.114308 [INFO] Engine command: (self-startup)

2024/02/04 15:15:08.114317 [INFO] Downloading EB Application...
2024/02/04 15:15:08.114321 [INFO] Region: eu-west-1
2024/02/04 15:15:08.114324 [INFO] envID: e-8gmkc7rmw6
2024/02/04 15:15:08.114328 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 15:15:08.114331 [INFO] Using manifest file name from command request
2024/02/04 15:15:08.114352 [INFO] Unable to get version manifest file.
2024/02/04 15:15:08.114354 [INFO] Downloading latest manifest available.
2024/02/04 15:15:08.114356 [INFO] Download latest app version manifest
2024/02/04 15:15:08.114481 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 15:15:08.153381 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 15:15:08.153549 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 15:15:08.167103 [INFO] Download successful124bytes downloaded
2024/02/04 15:15:08.167260 [INFO] Trying to read and parse version manifest...
2024/02/04 15:15:08.167337 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 15:15:08.190824 [INFO] Download successful264bytes downloaded
2024/02/04 15:15:08.191337 [INFO] Executing instruction: SyncClock
2024/02/04 15:15:08.191342 [INFO] Starting SyncClock
2024/02/04 15:15:08.191352 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 15:15:08.197711 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 15:15:06 2024
System time     : 0.000002829 seconds fast of NTP time
Last offset     : +0.000002681 seconds
RMS offset      : 0.000006285 seconds
Frequency       : 0.196 ppm slow
Residual freq   : +0.003 ppm
Skew            : 0.166 ppm
Root delay      : 0.000422631 seconds
Root dispersion : 0.000316580 seconds
Update interval : 48.4 seconds
Leap status     : Normal

2024/02/04 15:15:08.197732 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 15:15:08.202225 [INFO] 200 OK

2024/02/04 15:15:08.202326 [INFO] Skipping Configure OS
2024/02/04 15:15:08.202331 [INFO] Skipping LockRepo
2024/02/04 15:15:08.202335 [INFO] Skipping GenerateEBBanner
2024/02/04 15:15:08.202339 [INFO] Skipping Install Process Manager
2024/02/04 15:15:08.202343 [INFO] Skipping install syslog
2024/02/04 15:15:08.202347 [INFO] Skipping install cron
2024/02/04 15:15:08.202350 [INFO] Skipping install proxy
2024/02/04 15:15:08.202354 [INFO] Skipping installhealthd
2024/02/04 15:15:08.202358 [INFO] Skipping Install Log Streaming Manager
2024/02/04 15:15:08.202361 [INFO] Skipping install X-Ray
2024/02/04 15:15:08.202365 [INFO] Skipping install Third Party License
2024/02/04 15:15:08.202370 [INFO] Skipping installSqsd
2024/02/04 15:15:08.202374 [INFO] Skipping bootstraphealthd
2024/02/04 15:15:08.202377 [INFO] Skipping Install yum packages
2024/02/04 15:15:08.202381 [INFO] Skipping install docker-compose
2024/02/04 15:15:08.202385 [INFO] Skipping Configure Docker Daemon
2024/02/04 15:15:08.202393 [INFO] Skipping MarkBaked
2024/02/04 15:15:08.202397 [INFO] Skipping TuneSystemSettings
2024/02/04 15:15:08.202399 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 15:15:08.202402 [INFO] Initialize LogRotate files and directories
2024/02/04 15:15:08.215210 [INFO] Skipping BootstrapCFNHup
2024/02/04 15:15:08.215220 [INFO] Executing instruction: StartCFNHup
2024/02/04 15:15:08.215223 [INFO] Start cfn-hup
2024/02/04 15:15:08.215239 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 15:15:08.229232 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 15:15:08.238262 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 15:15:08.238294 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 15:15:08.238298 [INFO] Executing instruction: Start Docker
2024/02/04 15:15:08.238302 [INFO] Starting Docker...
2024/02/04 15:15:08.238388 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 15:15:08.239456 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 15:15:08.240534 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 15:15:08.632962 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 15:15:08.662585 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 15:15:08.662619 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 15:15:08.682109 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 15:15:08.694068 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 15:15:08.715136 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 15:15:08.812621 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 15:15:08.812666 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 15:15:09.204407 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 15:15:09.527734 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 15:15:09.539331 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 15:15:09.833035 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 15:15:09.842422 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 15:15:09.858000 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 15:15:09.867082 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 15:15:11.120806 [INFO] Skipping Setup Docker Options
2024/02/04 15:15:11.120836 [INFO] Skipping MarkBootstrapped
2024/02/04 15:15:11.120840 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 15:15:11.120969 [INFO] Starting SwitchCFNStack
2024/02/04 15:15:11.120974 [INFO] Executing instruction: stopSqsd
2024/02/04 15:15:11.120978 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 15:15:11.120984 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 15:15:11.120988 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 15:15:11.121005 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 15:15:11.635602 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 15:15:11.635679 [INFO] Executing instruction: StagedockerApplication
2024/02/04 15:15:11.635691 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 15:15:11.657076 [INFO] Pruning containers ...
2024/02/04 15:15:11.657117 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 15:15:11.679050 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
2df2adc48cf5   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             kind_mclaren

2024/02/04 15:15:11.679081 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 15:15:11.710583 [INFO] Deleted Containers:
2df2adc48cf5083ae0949a009a7df73357c34d095402533cf681edefc8501b67

Total reclaimed space: 0B

2024/02/04 15:15:11.710606 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 15:15:11.736140 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 15:15:11.736394 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 15:15:11.739775 [INFO] application/json

2024/02/04 15:15:11.739798 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 15:15:11.823724 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 15:15:11.823913 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 15:15:11.825185 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 15:15:11.825211 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 15:15:11.825230 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 15:15:11.825233 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 15:15:11.825242 [INFO] Executing instruction: Generate environment file
2024/02/04 15:15:11.825268 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 15:15:11.825271 [INFO] start build docker app
2024/02/04 15:15:11.825650 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 15:15:11.825655 [INFO] fetching image and ports
2024/02/04 15:15:11.827285 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 15:15:11.827403 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 15:15:11.827413 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 15:15:11.827422 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 15:15:12.746264 [INFO] Login Succeeded

2024/02/04 15:15:12.746279 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 15:15:12.746286 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 15:15:12.746302 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 15:15:12.955093 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 15:15:12.955121 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 15:15:12.955125 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 15:15:12.955133 [INFO] start to build docker image
2024/02/04 15:15:12.955146 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 15:15:13.289555 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 15:15:13.289579 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 15:15:13.289584 [INFO] successfully build docker image
2024/02/04 15:15:13.289586 [INFO] save staging docker image id
2024/02/04 15:15:13.289601 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 15:15:13.309960 [INFO] c176d18fbf65

2024/02/04 15:15:13.310097 [INFO] Executing instruction: configure X-Ray
2024/02/04 15:15:13.310102 [INFO] X-Ray is not enabled.
2024/02/04 15:15:13.310105 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 15:15:13.315675 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 15:15:13.317510 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 15:15:13.330407 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 15:15:13.330443 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 15:15:13.340799 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 15:15:13.349511 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 15:15:13.359734 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 15:15:13.419508 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 15:15:13.734049 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 15:15:13.734219 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 15:15:14.013873 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 15:15:14.026400 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 15:15:14.351846 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 15:15:14.362029 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 15:15:14.370475 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 15:15:14.730473 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 15:15:14.745949 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 15:15:15.045315 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 15:15:15.045354 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 15:15:15.058413 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 15:15:15.069113 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 15:15:15.160034 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 15:15:15.160978 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 15:15:15.161901 [INFO] Executing instruction: configure log streaming
2024/02/04 15:15:15.161913 [INFO] log streaming is not enabled
2024/02/04 15:15:15.161917 [INFO] disable log stream
2024/02/04 15:15:15.161932 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 15:15:15.184486 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 15:15:15.207734 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 15:15:15.207760 [INFO] Checking if logs need forced rotation
2024/02/04 15:15:15.207781 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 15:15:15.792396 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 15:15:16.261123 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 15:15:16.262819 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 15:15:16.378708 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 15:15:16.397709 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 15:15:16.397727 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 15:15:16.397739 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 15:15:16.836244 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 15:15:16.836281 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 15:15:16.836308 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 15:15:16.836312 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 15:15:16.836335 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 15:15:16.836348 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 15:15:16.836351 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 15:15:16.836356 [INFO] Executing instruction: stop X-Ray
2024/02/04 15:15:16.836360 [INFO] stop X-Ray ...
2024/02/04 15:15:16.836372 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 15:15:16.850902 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 15:15:16.850935 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 15:15:16.868597 [INFO] Executing instruction: Run Docker Container
2024/02/04 15:15:16.868625 [INFO] stop currently running containers...
2024/02/04 15:15:16.868636 [INFO] detected old app is not docker compose app
2024/02/04 15:15:16.868651 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 15:15:16.932463 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 15:15:16.947612 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 15:15:16.947645 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 15:15:16.961842 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 15:15:16.961881 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 15:15:16.978248 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 15:15:16.978298 [INFO] stopping current container: 2df2adc48cf5
2024/02/04 15:15:16.978311 [INFO] Running command /bin/sh -c docker ps | grep -q 2df2adc48cf5
2024/02/04 15:15:16.999032 [INFO] Running command /bin/sh -c docker ps | grep -q 2df2adc48cf5
2024/02/04 15:15:17.023524 [INFO] Pruning containers ...
2024/02/04 15:15:17.023548 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 15:15:17.043887 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 15:15:17.043917 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 15:15:17.062468 [INFO] Total reclaimed space: 0B

2024/02/04 15:15:17.062501 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 15:15:17.083340 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 15:15:17.083373 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 15:15:17.103985 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 15:15:17.104006 [INFO] Removing /var/app/current/ if it exists
2024/02/04 15:15:17.104102 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 15:15:17.104120 [INFO] detected new app is not docker compose app
2024/02/04 15:15:17.104169 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 15:15:17.481055 [INFO] ec101b63ffab4e6fe323490a64c4d49618865a3e36f7d62f1f06a2c2462e3e51

2024/02/04 15:15:22.486479 [INFO] Running command /bin/sh -c docker ps | grep -q ec101b63ffab
2024/02/04 15:15:22.529982 [ERROR] docker container quit unexpectedly on 2024-02-04 15:15:22.529971408 +0000 UTC: Command /bin/sh -c docker ps | grep -q ec101b63ffab failed with error exit status 1
2024/02/04 15:15:22.530010 [INFO] Running command /bin/sh -c docker logs ec101b63ffab
2024/02/04 15:15:22.556872 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container ec101b63ffab: Command /bin/sh -c docker ps | grep -q ec101b63ffab failed with error exit status 1 

2024/02/04 15:15:22.556882 [INFO] Executing cleanup logic
2024/02/04 15:15:22.557239 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 16:15:23.622745 [INFO] Starting...
2024/02/04 16:15:23.622794 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 16:15:23.622828 [INFO] reading event message file
2024/02/04 16:15:23.623663 [INFO] Engine received EB command userdata-exec

2024/02/04 16:15:23.628567 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 16:15:24.060015 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 16:15:24.496780 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 16:15:24.496834 [INFO] Engine command: (self-startup)

2024/02/04 16:15:24.496842 [INFO] Downloading EB Application...
2024/02/04 16:15:24.496846 [INFO] Region: eu-west-1
2024/02/04 16:15:24.496849 [INFO] envID: e-8gmkc7rmw6
2024/02/04 16:15:24.496852 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 16:15:24.496856 [INFO] Using manifest file name from command request
2024/02/04 16:15:24.496872 [INFO] Unable to get version manifest file.
2024/02/04 16:15:24.496875 [INFO] Downloading latest manifest available.
2024/02/04 16:15:24.496877 [INFO] Download latest app version manifest
2024/02/04 16:15:24.497034 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 16:15:24.544411 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 16:15:24.545024 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 16:15:24.577904 [INFO] Download successful124bytes downloaded
2024/02/04 16:15:24.578081 [INFO] Trying to read and parse version manifest...
2024/02/04 16:15:24.578172 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 16:15:24.602696 [INFO] Download successful264bytes downloaded
2024/02/04 16:15:24.605584 [INFO] Executing instruction: SyncClock
2024/02/04 16:15:24.605592 [INFO] Starting SyncClock
2024/02/04 16:15:24.605602 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 16:15:24.611647 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 16:15:13 2024
System time     : 0.000002770 seconds fast of NTP time
Last offset     : +0.000003048 seconds
RMS offset      : 0.000003378 seconds
Frequency       : 0.153 ppm slow
Residual freq   : +0.001 ppm
Skew            : 0.523 ppm
Root delay      : 0.000422036 seconds
Root dispersion : 0.000312637 seconds
Update interval : 32.3 seconds
Leap status     : Normal

2024/02/04 16:15:24.611673 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 16:15:24.615915 [INFO] 200 OK

2024/02/04 16:15:24.616046 [INFO] Skipping Configure OS
2024/02/04 16:15:24.616055 [INFO] Skipping LockRepo
2024/02/04 16:15:24.616059 [INFO] Skipping GenerateEBBanner
2024/02/04 16:15:24.616064 [INFO] Skipping Install Process Manager
2024/02/04 16:15:24.616068 [INFO] Skipping install syslog
2024/02/04 16:15:24.616072 [INFO] Skipping install cron
2024/02/04 16:15:24.616075 [INFO] Skipping install proxy
2024/02/04 16:15:24.616079 [INFO] Skipping installhealthd
2024/02/04 16:15:24.616083 [INFO] Skipping Install Log Streaming Manager
2024/02/04 16:15:24.616086 [INFO] Skipping install X-Ray
2024/02/04 16:15:24.616091 [INFO] Skipping install Third Party License
2024/02/04 16:15:24.616124 [INFO] Skipping installSqsd
2024/02/04 16:15:24.616129 [INFO] Skipping bootstraphealthd
2024/02/04 16:15:24.616133 [INFO] Skipping Install yum packages
2024/02/04 16:15:24.616138 [INFO] Skipping install docker-compose
2024/02/04 16:15:24.616142 [INFO] Skipping Configure Docker Daemon
2024/02/04 16:15:24.616145 [INFO] Skipping MarkBaked
2024/02/04 16:15:24.616150 [INFO] Skipping TuneSystemSettings
2024/02/04 16:15:24.616153 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 16:15:24.616155 [INFO] Initialize LogRotate files and directories
2024/02/04 16:15:24.629480 [INFO] Skipping BootstrapCFNHup
2024/02/04 16:15:24.629490 [INFO] Executing instruction: StartCFNHup
2024/02/04 16:15:24.629493 [INFO] Start cfn-hup
2024/02/04 16:15:24.629511 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 16:15:24.645929 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 16:15:24.655390 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 16:15:24.655425 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 16:15:24.655429 [INFO] Executing instruction: Start Docker
2024/02/04 16:15:24.655433 [INFO] Starting Docker...
2024/02/04 16:15:24.655641 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 16:15:24.656828 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 16:15:24.657929 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 16:15:25.204346 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 16:15:25.218159 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 16:15:25.218198 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 16:15:25.228186 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 16:15:25.254177 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 16:15:25.276775 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 16:15:25.356234 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 16:15:25.356337 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 16:15:25.673481 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 16:15:25.996819 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 16:15:26.017719 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 16:15:26.311756 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 16:15:26.321300 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 16:15:26.334213 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 16:15:26.343201 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 16:15:27.746524 [INFO] Skipping Setup Docker Options
2024/02/04 16:15:27.746560 [INFO] Skipping MarkBootstrapped
2024/02/04 16:15:27.746564 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 16:15:27.746701 [INFO] Starting SwitchCFNStack
2024/02/04 16:15:27.746707 [INFO] Executing instruction: stopSqsd
2024/02/04 16:15:27.746711 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 16:15:27.746715 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 16:15:27.746718 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 16:15:27.746741 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 16:15:28.240376 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 16:15:28.240465 [INFO] Executing instruction: StagedockerApplication
2024/02/04 16:15:28.240478 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 16:15:28.264096 [INFO] Pruning containers ...
2024/02/04 16:15:28.264127 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 16:15:28.287901 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
ec101b63ffab   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             pensive_lovelace

2024/02/04 16:15:28.287947 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 16:15:28.312961 [INFO] Deleted Containers:
ec101b63ffab4e6fe323490a64c4d49618865a3e36f7d62f1f06a2c2462e3e51

Total reclaimed space: 0B

2024/02/04 16:15:28.312986 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 16:15:28.336512 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 16:15:28.336877 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 16:15:28.339957 [INFO] application/json

2024/02/04 16:15:28.339978 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 16:15:28.410689 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 16:15:28.410856 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 16:15:28.412390 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 16:15:28.412421 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 16:15:28.412435 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 16:15:28.412440 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 16:15:28.412444 [INFO] Executing instruction: Generate environment file
2024/02/04 16:15:28.412469 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 16:15:28.412480 [INFO] start build docker app
2024/02/04 16:15:28.412915 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 16:15:28.412975 [INFO] fetching image and ports
2024/02/04 16:15:28.414759 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 16:15:28.414806 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 16:15:28.414817 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 16:15:28.414832 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 16:15:29.296076 [INFO] Login Succeeded

2024/02/04 16:15:29.296090 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 16:15:29.296097 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 16:15:29.296117 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 16:15:29.468889 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 16:15:29.468911 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 16:15:29.468916 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 16:15:29.468919 [INFO] start to build docker image
2024/02/04 16:15:29.468937 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 16:15:29.735794 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 16:15:29.735817 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 16:15:29.735822 [INFO] successfully build docker image
2024/02/04 16:15:29.735824 [INFO] save staging docker image id
2024/02/04 16:15:29.735838 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 16:15:29.758124 [INFO] c176d18fbf65

2024/02/04 16:15:29.758384 [INFO] Executing instruction: configure X-Ray
2024/02/04 16:15:29.758392 [INFO] X-Ray is not enabled.
2024/02/04 16:15:29.758395 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 16:15:29.764990 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 16:15:29.766723 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 16:15:29.781136 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 16:15:29.781179 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 16:15:29.792726 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 16:15:29.801757 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 16:15:29.813001 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 16:15:29.898891 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 16:15:30.201974 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 16:15:30.202203 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 16:15:30.653893 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 16:15:30.667751 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 16:15:31.073597 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 16:15:31.083889 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 16:15:31.093477 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 16:15:31.391193 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 16:15:31.404411 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 16:15:31.761629 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 16:15:31.761658 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 16:15:31.772812 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 16:15:31.780569 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 16:15:31.857906 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 16:15:31.859001 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 16:15:31.859916 [INFO] Executing instruction: configure log streaming
2024/02/04 16:15:31.859927 [INFO] log streaming is not enabled
2024/02/04 16:15:31.859930 [INFO] disable log stream
2024/02/04 16:15:31.859944 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 16:15:31.879985 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 16:15:31.900398 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 16:15:31.900424 [INFO] Checking if logs need forced rotation
2024/02/04 16:15:31.900446 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 16:15:32.392715 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 16:15:32.795142 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 16:15:32.796965 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 16:15:32.884329 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 16:15:32.906188 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 16:15:32.906205 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 16:15:32.906249 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 16:15:33.296169 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 16:15:33.296195 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 16:15:33.296227 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 16:15:33.296230 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 16:15:33.296254 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 16:15:33.296271 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 16:15:33.296274 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 16:15:33.296280 [INFO] Executing instruction: stop X-Ray
2024/02/04 16:15:33.296283 [INFO] stop X-Ray ...
2024/02/04 16:15:33.296296 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 16:15:33.315041 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 16:15:33.315116 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 16:15:33.333541 [INFO] Executing instruction: Run Docker Container
2024/02/04 16:15:33.333573 [INFO] stop currently running containers...
2024/02/04 16:15:33.333582 [INFO] detected old app is not docker compose app
2024/02/04 16:15:33.333594 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 16:15:33.372462 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 16:15:33.388732 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 16:15:33.388770 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 16:15:33.417376 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 16:15:33.417438 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 16:15:33.436279 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 16:15:33.436327 [INFO] stopping current container: ec101b63ffab
2024/02/04 16:15:33.436340 [INFO] Running command /bin/sh -c docker ps | grep -q ec101b63ffab
2024/02/04 16:15:33.462936 [INFO] Running command /bin/sh -c docker ps | grep -q ec101b63ffab
2024/02/04 16:15:33.488014 [INFO] Pruning containers ...
2024/02/04 16:15:33.488038 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 16:15:33.510982 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 16:15:33.511014 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 16:15:33.536543 [INFO] Total reclaimed space: 0B

2024/02/04 16:15:33.536579 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 16:15:33.559486 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 16:15:33.559516 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 16:15:33.590386 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 16:15:33.590409 [INFO] Removing /var/app/current/ if it exists
2024/02/04 16:15:33.590512 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 16:15:33.590536 [INFO] detected new app is not docker compose app
2024/02/04 16:15:33.590584 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 16:15:34.068367 [INFO] b2b4084d7150ae644243bdd54db65afd2c6fe6b4faab52b45647c5593efb10a5

2024/02/04 16:15:39.071434 [INFO] Running command /bin/sh -c docker ps | grep -q b2b4084d7150
2024/02/04 16:15:39.095290 [ERROR] docker container quit unexpectedly on 2024-02-04 16:15:39.095107139 +0000 UTC: Command /bin/sh -c docker ps | grep -q b2b4084d7150 failed with error exit status 1
2024/02/04 16:15:39.095486 [INFO] Running command /bin/sh -c docker logs b2b4084d7150
2024/02/04 16:15:39.120030 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container b2b4084d7150: Command /bin/sh -c docker ps | grep -q b2b4084d7150 failed with error exit status 1 

2024/02/04 16:15:39.120039 [INFO] Executing cleanup logic
2024/02/04 16:15:39.120331 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 17:15:40.207648 [INFO] Starting...
2024/02/04 17:15:40.207690 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 17:15:40.207716 [INFO] reading event message file
2024/02/04 17:15:40.208599 [INFO] Engine received EB command userdata-exec

2024/02/04 17:15:40.219768 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 17:15:40.642672 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 17:15:41.102495 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 17:15:41.102596 [INFO] Engine command: (self-startup)

2024/02/04 17:15:41.102605 [INFO] Downloading EB Application...
2024/02/04 17:15:41.102608 [INFO] Region: eu-west-1
2024/02/04 17:15:41.102611 [INFO] envID: e-8gmkc7rmw6
2024/02/04 17:15:41.102613 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 17:15:41.102616 [INFO] Using manifest file name from command request
2024/02/04 17:15:41.102632 [INFO] Unable to get version manifest file.
2024/02/04 17:15:41.102635 [INFO] Downloading latest manifest available.
2024/02/04 17:15:41.102637 [INFO] Download latest app version manifest
2024/02/04 17:15:41.102768 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 17:15:41.148006 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 17:15:41.148186 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 17:15:41.160739 [INFO] Download successful124bytes downloaded
2024/02/04 17:15:41.160912 [INFO] Trying to read and parse version manifest...
2024/02/04 17:15:41.160992 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 17:15:41.183660 [INFO] Download successful264bytes downloaded
2024/02/04 17:15:41.184114 [INFO] Executing instruction: SyncClock
2024/02/04 17:15:41.184121 [INFO] Starting SyncClock
2024/02/04 17:15:41.184133 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 17:15:41.190246 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 17:15:36 2024
System time     : 0.000003375 seconds slow of NTP time
Last offset     : -0.000002695 seconds
RMS offset      : 0.000002630 seconds
Frequency       : 0.141 ppm fast
Residual freq   : -0.002 ppm
Skew            : 0.064 ppm
Root delay      : 0.000438999 seconds
Root dispersion : 0.000428616 seconds
Update interval : 48.8 seconds
Leap status     : Normal

2024/02/04 17:15:41.190266 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 17:15:41.195161 [INFO] 200 OK

2024/02/04 17:15:41.195260 [INFO] Skipping Configure OS
2024/02/04 17:15:41.195265 [INFO] Skipping LockRepo
2024/02/04 17:15:41.195269 [INFO] Skipping GenerateEBBanner
2024/02/04 17:15:41.195274 [INFO] Skipping Install Process Manager
2024/02/04 17:15:41.195278 [INFO] Skipping install syslog
2024/02/04 17:15:41.195281 [INFO] Skipping install cron
2024/02/04 17:15:41.195285 [INFO] Skipping install proxy
2024/02/04 17:15:41.195289 [INFO] Skipping installhealthd
2024/02/04 17:15:41.195293 [INFO] Skipping Install Log Streaming Manager
2024/02/04 17:15:41.195297 [INFO] Skipping install X-Ray
2024/02/04 17:15:41.195301 [INFO] Skipping install Third Party License
2024/02/04 17:15:41.195306 [INFO] Skipping installSqsd
2024/02/04 17:15:41.195310 [INFO] Skipping bootstraphealthd
2024/02/04 17:15:41.195314 [INFO] Skipping Install yum packages
2024/02/04 17:15:41.195329 [INFO] Skipping install docker-compose
2024/02/04 17:15:41.195333 [INFO] Skipping Configure Docker Daemon
2024/02/04 17:15:41.195337 [INFO] Skipping MarkBaked
2024/02/04 17:15:41.195341 [INFO] Skipping TuneSystemSettings
2024/02/04 17:15:41.195344 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 17:15:41.195346 [INFO] Initialize LogRotate files and directories
2024/02/04 17:15:41.209569 [INFO] Skipping BootstrapCFNHup
2024/02/04 17:15:41.209579 [INFO] Executing instruction: StartCFNHup
2024/02/04 17:15:41.209582 [INFO] Start cfn-hup
2024/02/04 17:15:41.209598 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 17:15:41.222569 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 17:15:41.231625 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 17:15:41.231768 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 17:15:41.231773 [INFO] Executing instruction: Start Docker
2024/02/04 17:15:41.231776 [INFO] Starting Docker...
2024/02/04 17:15:41.231847 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 17:15:41.232817 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 17:15:41.233850 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 17:15:41.671321 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 17:15:41.684894 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 17:15:41.684926 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 17:15:41.694297 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 17:15:41.702759 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 17:15:41.712529 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 17:15:41.818902 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 17:15:41.818968 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 17:15:42.112988 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 17:15:42.470106 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 17:15:42.486003 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 17:15:42.782538 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 17:15:42.792009 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 17:15:42.806490 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 17:15:42.817580 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 17:15:44.071212 [INFO] Skipping Setup Docker Options
2024/02/04 17:15:44.071291 [INFO] Skipping MarkBootstrapped
2024/02/04 17:15:44.071295 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 17:15:44.071474 [INFO] Starting SwitchCFNStack
2024/02/04 17:15:44.071481 [INFO] Executing instruction: stopSqsd
2024/02/04 17:15:44.071485 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 17:15:44.071488 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 17:15:44.071492 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 17:15:44.071510 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 17:15:44.613819 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 17:15:44.613845 [INFO] Executing instruction: StagedockerApplication
2024/02/04 17:15:44.613861 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 17:15:44.636598 [INFO] Pruning containers ...
2024/02/04 17:15:44.636688 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 17:15:44.665690 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
b2b4084d7150   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             pedantic_ardinghelli

2024/02/04 17:15:44.665721 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 17:15:44.714965 [INFO] Deleted Containers:
b2b4084d7150ae644243bdd54db65afd2c6fe6b4faab52b45647c5593efb10a5

Total reclaimed space: 0B

2024/02/04 17:15:44.714990 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 17:15:44.737178 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 17:15:44.737419 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 17:15:44.740406 [INFO] application/json

2024/02/04 17:15:44.740423 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 17:15:44.831196 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 17:15:44.831409 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 17:15:44.832524 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 17:15:44.832717 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 17:15:44.832736 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 17:15:44.832738 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 17:15:44.832744 [INFO] Executing instruction: Generate environment file
2024/02/04 17:15:44.832772 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 17:15:44.832777 [INFO] start build docker app
2024/02/04 17:15:44.833142 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 17:15:44.833146 [INFO] fetching image and ports
2024/02/04 17:15:44.835119 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 17:15:44.835183 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 17:15:44.835191 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 17:15:44.835201 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 17:15:45.686189 [INFO] Login Succeeded

2024/02/04 17:15:45.686207 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 17:15:45.686213 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 17:15:45.686259 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 17:15:45.827415 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 17:15:45.827440 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 17:15:45.827450 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 17:15:45.827453 [INFO] start to build docker image
2024/02/04 17:15:45.827468 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 17:15:46.115662 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B 0.0s done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 17:15:46.115752 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 17:15:46.115759 [INFO] successfully build docker image
2024/02/04 17:15:46.115762 [INFO] save staging docker image id
2024/02/04 17:15:46.115780 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 17:15:46.136847 [INFO] c176d18fbf65

2024/02/04 17:15:46.137068 [INFO] Executing instruction: configure X-Ray
2024/02/04 17:15:46.137075 [INFO] X-Ray is not enabled.
2024/02/04 17:15:46.137078 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 17:15:46.143202 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 17:15:46.145035 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 17:15:46.160575 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 17:15:46.160603 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 17:15:46.172205 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 17:15:46.181845 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 17:15:46.192111 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 17:15:46.258687 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 17:15:46.552052 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 17:15:46.552170 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 17:15:46.854521 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 17:15:46.867293 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 17:15:47.214042 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 17:15:47.226661 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 17:15:47.235863 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 17:15:47.560964 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 17:15:47.572987 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 17:15:47.854978 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 17:15:47.855017 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 17:15:47.868118 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 17:15:47.876979 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 17:15:47.950010 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 17:15:47.951217 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 17:15:47.952145 [INFO] Executing instruction: configure log streaming
2024/02/04 17:15:47.952156 [INFO] log streaming is not enabled
2024/02/04 17:15:47.952160 [INFO] disable log stream
2024/02/04 17:15:47.952175 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 17:15:47.973122 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 17:15:47.993501 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 17:15:47.993528 [INFO] Checking if logs need forced rotation
2024/02/04 17:15:47.993553 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 17:15:48.552588 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 17:15:48.971800 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 17:15:48.974264 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 17:15:49.065108 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 17:15:49.086325 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 17:15:49.086341 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 17:15:49.086354 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 17:15:49.487758 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 17:15:49.487783 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 17:15:49.487812 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 17:15:49.487816 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 17:15:49.487838 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 17:15:49.487849 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 17:15:49.487851 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 17:15:49.487856 [INFO] Executing instruction: stop X-Ray
2024/02/04 17:15:49.487859 [INFO] stop X-Ray ...
2024/02/04 17:15:49.487870 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 17:15:49.505387 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 17:15:49.505421 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 17:15:49.521771 [INFO] Executing instruction: Run Docker Container
2024/02/04 17:15:49.521807 [INFO] stop currently running containers...
2024/02/04 17:15:49.521820 [INFO] detected old app is not docker compose app
2024/02/04 17:15:49.521842 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 17:15:49.542565 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 17:15:49.557250 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 17:15:49.557295 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 17:15:49.578983 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 17:15:49.579017 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 17:15:49.597207 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 17:15:49.597261 [INFO] stopping current container: b2b4084d7150
2024/02/04 17:15:49.597280 [INFO] Running command /bin/sh -c docker ps | grep -q b2b4084d7150
2024/02/04 17:15:49.619076 [INFO] Running command /bin/sh -c docker ps | grep -q b2b4084d7150
2024/02/04 17:15:49.640032 [INFO] Pruning containers ...
2024/02/04 17:15:49.640056 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 17:15:49.658495 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 17:15:49.658523 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 17:15:49.680355 [INFO] Total reclaimed space: 0B

2024/02/04 17:15:49.680383 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 17:15:49.702111 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 17:15:49.702148 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 17:15:49.724069 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 17:15:49.724095 [INFO] Removing /var/app/current/ if it exists
2024/02/04 17:15:49.724458 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 17:15:49.724479 [INFO] detected new app is not docker compose app
2024/02/04 17:15:49.724537 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 17:15:50.135801 [INFO] 35027c9d4d9d59f1a0570a6b8e12a148bd18cfef739538f9b770f6df88f83682

2024/02/04 17:15:55.136146 [INFO] Running command /bin/sh -c docker ps | grep -q 35027c9d4d9d
2024/02/04 17:15:55.160278 [ERROR] docker container quit unexpectedly on 2024-02-04 17:15:55.160267893 +0000 UTC: Command /bin/sh -c docker ps | grep -q 35027c9d4d9d failed with error exit status 1
2024/02/04 17:15:55.160302 [INFO] Running command /bin/sh -c docker logs 35027c9d4d9d
2024/02/04 17:15:55.192960 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 35027c9d4d9d: Command /bin/sh -c docker ps | grep -q 35027c9d4d9d failed with error exit status 1 

2024/02/04 17:15:55.192973 [INFO] Executing cleanup logic
2024/02/04 17:15:55.193235 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 18:15:56.189699 [INFO] Starting...
2024/02/04 18:15:56.189750 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 18:15:56.189786 [INFO] reading event message file
2024/02/04 18:15:56.190900 [INFO] Engine received EB command userdata-exec

2024/02/04 18:15:56.199328 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 18:15:56.659326 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 18:15:57.082260 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/02/04 18:15:57.082347 [INFO] Engine command: (self-startup)

2024/02/04 18:15:57.082354 [INFO] Downloading EB Application...
2024/02/04 18:15:57.082358 [INFO] Region: eu-west-1
2024/02/04 18:15:57.082361 [INFO] envID: e-8gmkc7rmw6
2024/02/04 18:15:57.082365 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 18:15:57.082368 [INFO] Using manifest file name from command request
2024/02/04 18:15:57.082382 [INFO] Unable to get version manifest file.
2024/02/04 18:15:57.082384 [INFO] Downloading latest manifest available.
2024/02/04 18:15:57.082387 [INFO] Download latest app version manifest
2024/02/04 18:15:57.082593 [INFO] resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest
2024/02/04 18:15:57.122948 [INFO] latestManifest key *: resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986

2024/02/04 18:15:57.123459 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1706554846986
2024/02/04 18:15:57.138392 [INFO] Download successful124bytes downloaded
2024/02/04 18:15:57.138635 [INFO] Trying to read and parse version manifest...
2024/02/04 18:15:57.138707 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 18:15:57.172303 [INFO] Download successful264bytes downloaded
2024/02/04 18:15:57.172639 [INFO] Executing instruction: SyncClock
2024/02/04 18:15:57.172645 [INFO] Starting SyncClock
2024/02/04 18:15:57.172655 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/02/04 18:15:57.180218 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Sun Feb 04 18:15:42 2024
System time     : 0.000001067 seconds fast of NTP time
Last offset     : +0.000002075 seconds
RMS offset      : 0.000006276 seconds
Frequency       : 0.050 ppm slow
Residual freq   : -0.004 ppm
Skew            : 0.334 ppm
Root delay      : 0.000426824 seconds
Root dispersion : 0.000391522 seconds
Update interval : 16.0 seconds
Leap status     : Normal

2024/02/04 18:15:57.180237 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/02/04 18:15:57.187883 [INFO] 200 OK

2024/02/04 18:15:57.188516 [INFO] Skipping Configure OS
2024/02/04 18:15:57.188530 [INFO] Skipping LockRepo
2024/02/04 18:15:57.188534 [INFO] Skipping GenerateEBBanner
2024/02/04 18:15:57.188538 [INFO] Skipping Install Process Manager
2024/02/04 18:15:57.188542 [INFO] Skipping install syslog
2024/02/04 18:15:57.188546 [INFO] Skipping install cron
2024/02/04 18:15:57.188550 [INFO] Skipping install proxy
2024/02/04 18:15:57.188554 [INFO] Skipping installhealthd
2024/02/04 18:15:57.188558 [INFO] Skipping Install Log Streaming Manager
2024/02/04 18:15:57.188562 [INFO] Skipping install X-Ray
2024/02/04 18:15:57.188565 [INFO] Skipping install Third Party License
2024/02/04 18:15:57.188570 [INFO] Skipping installSqsd
2024/02/04 18:15:57.188575 [INFO] Skipping bootstraphealthd
2024/02/04 18:15:57.188578 [INFO] Skipping Install yum packages
2024/02/04 18:15:57.188586 [INFO] Skipping install docker-compose
2024/02/04 18:15:57.188590 [INFO] Skipping Configure Docker Daemon
2024/02/04 18:15:57.188595 [INFO] Skipping MarkBaked
2024/02/04 18:15:57.188599 [INFO] Skipping TuneSystemSettings
2024/02/04 18:15:57.188601 [INFO] Executing instruction: GetSetupLogRotate
2024/02/04 18:15:57.188604 [INFO] Initialize LogRotate files and directories
2024/02/04 18:15:57.202140 [INFO] Skipping BootstrapCFNHup
2024/02/04 18:15:57.202152 [INFO] Executing instruction: StartCFNHup
2024/02/04 18:15:57.202156 [INFO] Start cfn-hup
2024/02/04 18:15:57.202176 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/02/04 18:15:57.215169 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/02/04 18:15:57.224529 [INFO] cfn-hup process is already registered and up running, skip installation
2024/02/04 18:15:57.224561 [INFO] Skipping SetupPublishLogCronjob
2024/02/04 18:15:57.224565 [INFO] Executing instruction: Start Docker
2024/02/04 18:15:57.224568 [INFO] Starting Docker...
2024/02/04 18:15:57.224652 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/02/04 18:15:57.225704 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/02/04 18:15:57.226742 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 18:15:57.653462 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 18:15:57.670348 [WARN] Warning: process docker is already registered...
Deregistering the process ...
2024/02/04 18:15:57.670380 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 18:15:57.692770 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 18:15:57.702673 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 18:15:57.717984 [INFO] Running command /bin/sh -c systemctl stop docker.service
2024/02/04 18:15:57.787324 [INFO] Warning: The unit file, source configuration file or drop-ins of docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.
Warning: Stopping docker.service, but it can still be activated by:
  docker.socket

2024/02/04 18:15:57.787396 [INFO] Running command /bin/sh -c systemctl disable docker.service
2024/02/04 18:15:58.067626 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 18:15:58.517926 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 18:15:58.538843 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 18:15:58.841741 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 18:15:58.850692 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/02/04 18:15:58.864875 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/02/04 18:15:58.875282 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/02/04 18:16:00.452409 [INFO] Skipping Setup Docker Options
2024/02/04 18:16:00.452439 [INFO] Skipping MarkBootstrapped
2024/02/04 18:16:00.452443 [INFO] Executing instruction: Save CFN Stack Info
2024/02/04 18:16:00.452577 [INFO] Starting SwitchCFNStack
2024/02/04 18:16:00.452583 [INFO] Executing instruction: stopSqsd
2024/02/04 18:16:00.452587 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 18:16:00.452590 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 18:16:00.452593 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 18:16:00.452612 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 18:16:00.975949 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 18:16:00.975978 [INFO] Executing instruction: StagedockerApplication
2024/02/04 18:16:00.975999 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 18:16:01.000709 [INFO] Pruning containers ...
2024/02/04 18:16:01.000738 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 18:16:01.038984 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS                         PORTS     NAMES
35027c9d4d9d   c176d18fbf65   "./main --environmen…"   About an hour ago   Exited (1) About an hour ago             thirsty_allen

2024/02/04 18:16:01.039083 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 18:16:01.092176 [INFO] Deleted Containers:
35027c9d4d9d59f1a0570a6b8e12a148bd18cfef739538f9b770f6df88f83682

Total reclaimed space: 0B

2024/02/04 18:16:01.092220 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 18:16:01.124840 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 18:16:01.125150 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 18:16:01.138842 [INFO] application/json

2024/02/04 18:16:01.138888 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 18:16:01.233838 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 18:16:01.234082 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 18:16:01.235513 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 18:16:01.235544 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 18:16:01.235561 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 18:16:01.235564 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 18:16:01.235574 [INFO] Executing instruction: Generate environment file
2024/02/04 18:16:01.235605 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 18:16:01.235609 [INFO] start build docker app
2024/02/04 18:16:01.236013 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 18:16:01.236018 [INFO] fetching image and ports
2024/02/04 18:16:01.237881 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 18:16:01.237944 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 18:16:01.237953 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 18:16:01.237966 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 18:16:02.599542 [INFO] Login Succeeded

2024/02/04 18:16:02.599561 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 18:16:02.599567 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 18:16:02.599586 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 18:16:02.749769 [INFO] 660d597673dec46251de14dcd7450f2fa9199a26: Pulling from hisab-backend/hisab-backend
Digest: sha256:ddd10e62aedd7317044e16455d6f8f0e611238ff2d47341b3ee665555a44599e
Status: Image is up to date for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26

2024/02/04 18:16:02.749796 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 18:16:02.749801 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
2024/02/04 18:16:02.749805 [INFO] start to build docker image
2024/02/04 18:16:02.749917 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 18:16:03.027955 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:660d597673dec46251de14dcd7450f2fa9199a26
#4 CACHED

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:c176d18fbf6591f3dfbd29fcd76b3267a1677c3366432aad925f520d7f698667 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 18:16:03.027989 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 18:16:03.027994 [INFO] successfully build docker image
2024/02/04 18:16:03.027997 [INFO] save staging docker image id
2024/02/04 18:16:03.028009 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 18:16:03.048085 [INFO] c176d18fbf65

2024/02/04 18:16:03.048208 [INFO] Executing instruction: configure X-Ray
2024/02/04 18:16:03.048213 [INFO] X-Ray is not enabled.
2024/02/04 18:16:03.048216 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 18:16:03.055087 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 18:16:03.056835 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 18:16:03.069504 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 18:16:03.069534 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 18:16:03.081654 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 18:16:03.090688 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 18:16:03.101475 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 18:16:03.148732 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 18:16:03.466544 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 18:16:03.466968 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 18:16:03.878018 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 18:16:03.892209 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 18:16:04.249591 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 18:16:04.259968 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 18:16:04.269582 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 18:16:04.563565 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 18:16:04.597074 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 18:16:04.939616 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 18:16:04.939700 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 18:16:04.969751 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 18:16:04.984286 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 18:16:05.080232 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 18:16:05.081250 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 18:16:05.082381 [INFO] Executing instruction: configure log streaming
2024/02/04 18:16:05.082396 [INFO] log streaming is not enabled
2024/02/04 18:16:05.082400 [INFO] disable log stream
2024/02/04 18:16:05.082416 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 18:16:05.100390 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 18:16:05.125952 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 18:16:05.125986 [INFO] Checking if logs need forced rotation
2024/02/04 18:16:05.126005 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 18:16:05.684697 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 18:16:06.157048 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 18:16:06.158824 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 18:16:06.671181 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 18:16:06.691433 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 18:16:06.691451 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 18:16:06.691463 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 18:16:07.169029 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 18:16:07.169057 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 18:16:07.169083 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 18:16:07.169087 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 18:16:07.169118 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 18:16:07.169129 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 18:16:07.169132 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 18:16:07.169138 [INFO] Executing instruction: stop X-Ray
2024/02/04 18:16:07.169141 [INFO] stop X-Ray ...
2024/02/04 18:16:07.169150 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 18:16:07.184943 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 18:16:07.184976 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 18:16:07.200887 [INFO] Executing instruction: Run Docker Container
2024/02/04 18:16:07.200927 [INFO] stop currently running containers...
2024/02/04 18:16:07.200940 [INFO] detected old app is not docker compose app
2024/02/04 18:16:07.200955 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 18:16:07.243932 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 18:16:07.264466 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 18:16:07.264495 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 18:16:07.279447 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 18:16:07.279476 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 18:16:07.294498 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 18:16:07.294549 [INFO] stopping current container: 35027c9d4d9d
2024/02/04 18:16:07.294566 [INFO] Running command /bin/sh -c docker ps | grep -q 35027c9d4d9d
2024/02/04 18:16:07.320605 [INFO] Running command /bin/sh -c docker ps | grep -q 35027c9d4d9d
2024/02/04 18:16:07.346223 [INFO] Pruning containers ...
2024/02/04 18:16:07.346247 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 18:16:07.367023 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 18:16:07.367053 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 18:16:07.388552 [INFO] Total reclaimed space: 0B

2024/02/04 18:16:07.388576 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 18:16:07.407902 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 18:16:07.407939 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 18:16:07.428060 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 18:16:07.428081 [INFO] Removing /var/app/current/ if it exists
2024/02/04 18:16:07.428172 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 18:16:07.428192 [INFO] detected new app is not docker compose app
2024/02/04 18:16:07.428250 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   c176d18fbf65 
2024/02/04 18:16:07.827435 [INFO] a40dbfa62218a067c571727841a3ab84c51a3683eaa178e19d18c3f9c10c2385

2024/02/04 18:16:12.831430 [INFO] Running command /bin/sh -c docker ps | grep -q a40dbfa62218
2024/02/04 18:16:12.874630 [ERROR] docker container quit unexpectedly on 2024-02-04 18:16:12.8745368 +0000 UTC: Command /bin/sh -c docker ps | grep -q a40dbfa62218 failed with error exit status 1
2024/02/04 18:16:12.875662 [INFO] Running command /bin/sh -c docker logs a40dbfa62218
2024/02/04 18:16:12.906837 [ERROR] An error occurred during execution of command [self-startup] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container a40dbfa62218: Command /bin/sh -c docker ps | grep -q a40dbfa62218 failed with error exit status 1 

2024/02/04 18:16:12.906852 [INFO] Executing cleanup logic
2024/02/04 18:16:12.907139 [INFO] Platform Engine finished execution on command: self-startup

2024/02/04 18:20:44.435624 [INFO] Starting...
2024/02/04 18:20:44.435691 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 18:20:44.435722 [INFO] reading event message file
2024/02/04 18:20:44.435896 [INFO] Engine received EB command cfn-hup-exec

2024/02/04 18:20:44.520736 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 18:20:44.919376 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 18:20:45.357664 [INFO] checking whether command app-deploy is applicable to this instance...
2024/02/04 18:20:45.357678 [INFO] this command is applicable to the instance, thus instance should execute command
2024/02/04 18:20:45.357682 [INFO] Engine command: (app-deploy)

2024/02/04 18:20:45.357688 [INFO] Downloading EB Application...
2024/02/04 18:20:45.357691 [INFO] Region: eu-west-1
2024/02/04 18:20:45.357694 [INFO] envID: e-8gmkc7rmw6
2024/02/04 18:20:45.357698 [INFO] envBucket: elasticbeanstalk-eu-west-1-471947097906
2024/02/04 18:20:45.357701 [INFO] Using manifest file name from command request
2024/02/04 18:20:45.357708 [INFO] Manifest name is : manifest_1707070842359
2024/02/04 18:20:45.357710 [INFO] Download app version manifest
2024/02/04 18:20:45.357871 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/versions/manifest_1707070842359
2024/02/04 18:20:45.391048 [INFO] Download successful124bytes downloaded
2024/02/04 18:20:45.392272 [INFO] Trying to read and parse version manifest...
2024/02/04 18:20:45.392540 [INFO] Downloading: bucket: elasticbeanstalk-eu-west-1-471947097906, object: /resources/environments/e-8gmkc7rmw6/_runtime/_versions/hisab-backend/19a8904401e78827d22210974a42784853b4f2b1
2024/02/04 18:20:45.406886 [INFO] Download successful264bytes downloaded
2024/02/04 18:20:45.407183 [INFO] Executing instruction: ElectLeader
2024/02/04 18:20:45.407190 [INFO] Running leader election for instance i-02934d2a7fab7a2db...
2024/02/04 18:20:45.407192 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/02/04 18:20:45.407206 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 13858a6f-09b5-4571-aad5-a72703cbe5ba --listener-id i-02934d2a7fab7a2db --region eu-west-1
2024/02/04 18:20:45.835841 [INFO] Instance is Leader.
2024/02/04 18:20:45.836005 [INFO] Executing instruction: stopSqsd
2024/02/04 18:20:45.836012 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/02/04 18:20:45.836015 [INFO] Executing instruction: PreBuildEbExtension
2024/02/04 18:20:45.836018 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/02/04 18:20:45.836033 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPreBuild
2024/02/04 18:20:46.262113 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/02/04 18:20:46.262152 [INFO] Executing instruction: StagedockerApplication
2024/02/04 18:20:46.262165 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/02/04 18:20:46.284107 [INFO] Pruning containers ...
2024/02/04 18:20:46.284132 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 18:20:46.309341 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS                     PORTS     NAMES
a40dbfa62218   c176d18fbf65   "./main --environmen…"   4 minutes ago   Exited (1) 4 minutes ago             beautiful_lehmann

2024/02/04 18:20:46.309377 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 18:20:46.349763 [INFO] Deleted Containers:
a40dbfa62218a067c571727841a3ab84c51a3683eaa178e19d18c3f9c10c2385

Total reclaimed space: 0B

2024/02/04 18:20:46.349829 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 18:20:46.370295 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 18:20:46.370612 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/02/04 18:20:46.373770 [INFO] application/json

2024/02/04 18:20:46.373790 [INFO] Running command /bin/sh -c docker compose -f /opt/elasticbeanstalk/deployment/app_source_bundle config -q
2024/02/04 18:20:46.492469 [INFO] validating /opt/elasticbeanstalk/deployment/app_source_bundle: (root) Additional property AWSEBDockerrunVersion is not allowed

2024/02/04 18:20:46.494031 [INFO] Copying file /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/Dockerrun.aws.json
2024/02/04 18:20:46.497033 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/02/04 18:20:46.497075 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/02/04 18:20:46.497096 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/02/04 18:20:46.497099 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/02/04 18:20:46.497104 [INFO] Executing instruction: Generate environment file
2024/02/04 18:20:46.497132 [INFO] Executing instruction: Docker Specific Build Application
2024/02/04 18:20:46.497135 [INFO] start build docker app
2024/02/04 18:20:46.497546 [INFO] generate dockerfile with the image and ports from Dockerrun.aws.json
2024/02/04 18:20:46.497558 [INFO] fetching image and ports
2024/02/04 18:20:46.500127 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/02/04 18:20:46.500226 [INFO] found images [471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:19a8904401e78827d22210974a42784853b4f2b1] in Dockerfile /var/app/staging/Dockerfile
2024/02/04 18:20:46.500236 [INFO] authenticate with ECR if the image is in an ECR repo
2024/02/04 18:20:46.500246 [INFO] Running command /bin/sh -c aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 471947097906.dkr.ecr.eu-west-1.amazonaws.com
2024/02/04 18:20:47.386467 [INFO] Login Succeeded

2024/02/04 18:20:47.386538 [INFO] WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


2024/02/04 18:20:47.386547 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/02/04 18:20:47.386567 [INFO] Running command /bin/sh -c docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:19a8904401e78827d22210974a42784853b4f2b1
2024/02/04 18:21:20.525935 [INFO] 19a8904401e78827d22210974a42784853b4f2b1: Pulling from hisab-backend/hisab-backend
6a299ae9cfd9: Pulling fs layer
e08e8703b2fb: Pulling fs layer
68e92d11b04e: Pulling fs layer
4105062d1ee6: Pulling fs layer
23e7e6e9302a: Pulling fs layer
e30a39fc6986: Pulling fs layer
4f4fb700ef54: Pulling fs layer
b7a0a9f2cf47: Pulling fs layer
86e90c373d71: Pulling fs layer
80f2e6fed403: Pulling fs layer
ed0613fe5b61: Pulling fs layer
3293c53a5345: Pulling fs layer
4105062d1ee6: Waiting
b7a0a9f2cf47: Waiting
86e90c373d71: Waiting
80f2e6fed403: Waiting
ed0613fe5b61: Waiting
3293c53a5345: Waiting
23e7e6e9302a: Waiting
e30a39fc6986: Waiting
4f4fb700ef54: Waiting
e08e8703b2fb: Verifying Checksum
e08e8703b2fb: Download complete
6a299ae9cfd9: Verifying Checksum
6a299ae9cfd9: Download complete
68e92d11b04e: Verifying Checksum
68e92d11b04e: Download complete
e30a39fc6986: Verifying Checksum
e30a39fc6986: Download complete
4f4fb700ef54: Verifying Checksum
4f4fb700ef54: Download complete
b7a0a9f2cf47: Verifying Checksum
b7a0a9f2cf47: Download complete
23e7e6e9302a: Verifying Checksum
23e7e6e9302a: Download complete
86e90c373d71: Verifying Checksum
86e90c373d71: Download complete
4105062d1ee6: Verifying Checksum
4105062d1ee6: Download complete
ed0613fe5b61: Verifying Checksum
ed0613fe5b61: Download complete
3293c53a5345: Verifying Checksum
3293c53a5345: Download complete
80f2e6fed403: Verifying Checksum
80f2e6fed403: Download complete
6a299ae9cfd9: Pull complete
e08e8703b2fb: Pull complete
68e92d11b04e: Pull complete
4105062d1ee6: Pull complete
23e7e6e9302a: Pull complete
e30a39fc6986: Pull complete
4f4fb700ef54: Pull complete
b7a0a9f2cf47: Pull complete
86e90c373d71: Pull complete
80f2e6fed403: Pull complete
ed0613fe5b61: Pull complete
3293c53a5345: Pull complete
Digest: sha256:5a7f4c3e3f823f14becad2efb47d0373750507d51edf7807570f2245dd5afce7
Status: Downloaded newer image for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:19a8904401e78827d22210974a42784853b4f2b1
471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:19a8904401e78827d22210974a42784853b4f2b1

2024/02/04 18:21:20.528934 [INFO] successfully execute command: docker pull 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:19a8904401e78827d22210974a42784853b4f2b1
2024/02/04 18:21:20.528950 [INFO] successfully pulled docker image 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:19a8904401e78827d22210974a42784853b4f2b1
2024/02/04 18:21:20.529419 [INFO] start to build docker image
2024/02/04 18:21:20.533671 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 18:21:21.640615 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:19a8904401e78827d22210974a42784853b4f2b1
#3 DONE 0.0s

#4 [1/1] FROM 471947097906.dkr.ecr.eu-west-1.amazonaws.com/hisab-backend/hisab-backend:19a8904401e78827d22210974a42784853b4f2b1
#4 DONE 0.2s

#5 exporting to image
#5 exporting layers done
#5 writing image sha256:be24a8fbacab91dfa32f425a66e3320cdff546b2a4835e30499a01d23a72cd71 done
#5 naming to docker.io/aws_beanstalk/staging-app done
#5 DONE 0.0s

2024/02/04 18:21:21.640645 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/02/04 18:21:21.640650 [INFO] successfully build docker image
2024/02/04 18:21:21.640653 [INFO] save staging docker image id
2024/02/04 18:21:21.640670 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/02/04 18:21:21.680261 [INFO] be24a8fbacab

2024/02/04 18:21:21.680379 [INFO] Executing instruction: configure X-Ray
2024/02/04 18:21:21.680386 [INFO] X-Ray is not enabled.
2024/02/04 18:21:21.680389 [INFO] Executing instruction: configure proxy Nginx
2024/02/04 18:21:21.695781 [INFO] Executing instruction: configure healthd specific proxy conf
2024/02/04 18:21:21.698597 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 18:21:21.730676 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/02/04 18:21:21.730710 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 18:21:21.740713 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 18:21:21.748808 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 18:21:21.767073 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/02/04 18:21:21.885996 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/02/04 18:21:22.411939 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/02/04 18:21:22.413458 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 18:21:22.734758 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 18:21:22.748649 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/02/04 18:21:23.042563 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/02/04 18:21:23.051250 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/02/04 18:21:23.059089 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/02/04 18:21:23.381647 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/02/04 18:21:23.391460 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/02/04 18:21:23.679432 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/02/04 18:21:23.679471 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/02/04 18:21:23.697729 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/02/04 18:21:23.705945 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/02/04 18:21:23.778648 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/02/04 18:21:23.779560 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/02/04 18:21:23.780445 [INFO] Executing instruction: configure log streaming
2024/02/04 18:21:23.780455 [INFO] log streaming is not enabled
2024/02/04 18:21:23.780459 [INFO] disable log stream
2024/02/04 18:21:23.780475 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/02/04 18:21:23.803734 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/02/04 18:21:23.823507 [INFO] Executing instruction: GetToggleForceRotate
2024/02/04 18:21:23.823532 [INFO] Checking if logs need forced rotation
2024/02/04 18:21:23.823588 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 18:21:24.672923 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 18:21:25.186212 [INFO] Procfile not found. Generating default rsyslog config
2024/02/04 18:21:25.188273 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/02/04 18:21:25.703551 [INFO] Executing instruction: Configure Docker Logging
2024/02/04 18:21:25.740755 [INFO] Executing instruction: PostBuildEbExtension
2024/02/04 18:21:25.740773 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/02/04 18:21:25.740788 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1 --configsets Infra-EmbeddedPostBuild
2024/02/04 18:21:26.179477 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/02/04 18:21:26.179875 [INFO] Executing instruction: CleanEbExtensions
2024/02/04 18:21:26.180378 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/02/04 18:21:26.180391 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/02/04 18:21:26.180417 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/02/04 18:21:26.180432 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/02/04 18:21:26.180637 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/02/04 18:21:26.180653 [INFO] Executing instruction: stop X-Ray
2024/02/04 18:21:26.180656 [INFO] stop X-Ray ...
2024/02/04 18:21:26.180667 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/02/04 18:21:26.196086 [WARN] stopProcess Warning: process xray is not registered 
2024/02/04 18:21:26.196114 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/02/04 18:21:26.211858 [INFO] Executing instruction: Run Docker Container
2024/02/04 18:21:26.211886 [INFO] stop currently running containers...
2024/02/04 18:21:26.211897 [INFO] detected old app is not docker compose app
2024/02/04 18:21:26.211909 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/02/04 18:21:26.303305 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/02/04 18:21:26.323018 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/02/04 18:21:26.323051 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/02/04 18:21:26.344909 [WARN] deregisterProcess Warning: process eb-docker is not registered, skipping...

2024/02/04 18:21:26.344942 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/02/04 18:21:26.362940 [WARN] deregisterProcess Warning: process eb-docker-log is not registered, skipping...

2024/02/04 18:21:26.363458 [INFO] stopping current container: a40dbfa62218
2024/02/04 18:21:26.363475 [INFO] Running command /bin/sh -c docker ps | grep -q a40dbfa62218
2024/02/04 18:21:26.397836 [INFO] Running command /bin/sh -c docker ps | grep -q a40dbfa62218
2024/02/04 18:21:26.425868 [INFO] Pruning containers ...
2024/02/04 18:21:26.425895 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 18:21:26.452146 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 18:21:26.452177 [INFO] Running command /bin/sh -c docker container prune -f
2024/02/04 18:21:26.475056 [INFO] Total reclaimed space: 0B

2024/02/04 18:21:26.475082 [INFO] Running command /bin/sh -c docker ps -a
2024/02/04 18:21:26.501304 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/02/04 18:21:26.501336 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/current-app
2024/02/04 18:21:26.528102 [INFO] Error response from daemon: No such image: aws_beanstalk/current-app:latest

2024/02/04 18:21:26.528124 [INFO] Removing /var/app/current/ if it exists
2024/02/04 18:21:26.528229 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/02/04 18:21:26.528254 [INFO] detected new app is not docker compose app
2024/02/04 18:21:26.528312 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list   be24a8fbacab 
2024/02/04 18:21:27.473229 [INFO] 54367f5b13bd02e740b9359906e52945dbf9ff4897ddc1d2b16d26cd2fb95b12

2024/02/04 18:21:32.478535 [INFO] Running command /bin/sh -c docker ps | grep -q 54367f5b13bd
2024/02/04 18:21:32.498690 [ERROR] docker container quit unexpectedly on 2024-02-04 18:21:32.498146562 +0000 UTC: Command /bin/sh -c docker ps | grep -q 54367f5b13bd failed with error exit status 1
2024/02/04 18:21:32.498719 [INFO] Running command /bin/sh -c docker logs 54367f5b13bd
2024/02/04 18:21:32.522220 [ERROR] An error occurred during execution of command [app-deploy] - [Run Docker Container]. Stop running the command. Error: failed to run the docker container 54367f5b13bd: Command /bin/sh -c docker ps | grep -q 54367f5b13bd failed with error exit status 1 

2024/02/04 18:21:32.522293 [INFO] Executing cleanup logic
2024/02/04 18:21:32.524786 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment: The Docker container unexpectedly ended after it was started.","timestamp":1707070892498,"severity":"ERROR"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1707070892522,"severity":"ERROR"}]}]}

2024/02/04 18:21:32.526464 [INFO] Platform Engine finished execution on command: app-deploy

2024/02/04 18:21:43.017544 [INFO] Starting...
2024/02/04 18:21:43.017585 [INFO] Starting EBPlatform-PlatformEngine
2024/02/04 18:21:43.017611 [INFO] reading event message file
2024/02/04 18:21:43.018332 [INFO] Engine received EB command cfn-hup-exec

2024/02/04 18:21:43.190560 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBAutoScalingGroup --region eu-west-1
2024/02/04 18:21:43.708772 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:eu-west-1:471947097906:stack/awseb-e-8gmkc7rmw6-stack/e739e470-bed0-11ee-9627-0a7a22b9c067 -r AWSEBBeanstalkMetadata --region eu-west-1
2024/02/04 18:21:44.130453 [INFO] checking whether command bundle-log is applicable to this instance...
2024/02/04 18:21:44.130466 [INFO] this command is applicable to the instance, thus instance should execute command
2024/02/04 18:21:44.130469 [INFO] Engine command: (bundle-log)

2024/02/04 18:21:44.130521 [INFO] Executing instruction: GetBundleLogs
2024/02/04 18:21:44.130524 [INFO] Bundle Logs...
